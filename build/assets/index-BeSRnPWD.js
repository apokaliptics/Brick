function _mergeNamespaces(r,a){for(var s=0;s<a.length;s++){const i=a[s];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in r)){const x=Object.getOwnPropertyDescriptor(i,u);x&&Object.defineProperty(r,u,x.get?x:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const x of u)if(x.type==="childList")for(const h of x.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const x={};return u.integrity&&(x.integrity=u.integrity),u.referrerPolicy&&(x.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?x.credentials="include":u.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function i(u){if(u.ep)return;u.ep=!0;const x=s(u);fetch(u.href,x)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),l=Symbol.iterator;function d(D){return D===null||typeof D!="object"?null:(D=l&&D[l]||D["@@iterator"],typeof D=="function"?D:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,y={};function E(D,K,ae){this.props=D,this.context=K,this.refs=y,this.updater=ae||f}E.prototype.isReactComponent={},E.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function g(){}g.prototype=E.prototype;function w(D,K,ae){this.props=D,this.context=K,this.refs=y,this.updater=ae||f}var T=w.prototype=new g;T.constructor=w,S(T,E.prototype),T.isPureReactComponent=!0;var _=Array.isArray,A=Object.prototype.hasOwnProperty,I={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function N(D,K,ae){var oe,ue={},we=null,xe=null;if(K!=null)for(oe in K.ref!==void 0&&(xe=K.ref),K.key!==void 0&&(we=""+K.key),K)A.call(K,oe)&&!k.hasOwnProperty(oe)&&(ue[oe]=K[oe]);var se=arguments.length-2;if(se===1)ue.children=ae;else if(1<se){for(var Z=Array(se),be=0;be<se;be++)Z[be]=arguments[be+2];ue.children=Z}if(D&&D.defaultProps)for(oe in se=D.defaultProps,se)ue[oe]===void 0&&(ue[oe]=se[oe]);return{$$typeof:r,type:D,key:we,ref:xe,props:ue,_owner:I.current}}function Y(D,K){return{$$typeof:r,type:D.type,key:K,ref:D.ref,props:D.props,_owner:D._owner}}function z(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function W(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return K[ae]})}var G=/\/+/g;function $(D,K){return typeof D=="object"&&D!==null&&D.key!=null?W(""+D.key):K.toString(36)}function ge(D,K,ae,oe,ue){var we=typeof D;(we==="undefined"||we==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(we){case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case r:case a:xe=!0}}if(xe)return xe=D,ue=ue(xe),D=oe===""?"."+$(xe,0):oe,_(ue)?(ae="",D!=null&&(ae=D.replace(G,"$&/")+"/"),ge(ue,K,ae,"",function(be){return be})):ue!=null&&(z(ue)&&(ue=Y(ue,ae+(!ue.key||xe&&xe.key===ue.key?"":(""+ue.key).replace(G,"$&/")+"/")+D)),K.push(ue)),1;if(xe=0,oe=oe===""?".":oe+":",_(D))for(var se=0;se<D.length;se++){we=D[se];var Z=oe+$(we,se);xe+=ge(we,K,ae,Z,ue)}else if(Z=d(D),typeof Z=="function")for(D=Z.call(D),se=0;!(we=D.next()).done;)we=we.value,Z=oe+$(we,se++),xe+=ge(we,K,ae,Z,ue);else if(we==="object")throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return xe}function F(D,K,ae){if(D==null)return D;var oe=[],ue=0;return ge(D,oe,"","",function(we){return K.call(ae,we,ue++)}),oe}function le(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var me={current:null},H={transition:null},pe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:H,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:F,forEach:function(D,K,ae){F(D,function(){K.apply(this,arguments)},ae)},count:function(D){var K=0;return F(D,function(){K++}),K},toArray:function(D){return F(D,function(K){return K})||[]},only:function(D){if(!z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},react_production_min.Component=E,react_production_min.Fragment=s,react_production_min.Profiler=u,react_production_min.PureComponent=w,react_production_min.StrictMode=i,react_production_min.Suspense=b,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,react_production_min.act=L,react_production_min.cloneElement=function(D,K,ae){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var oe=S({},D.props),ue=D.key,we=D.ref,xe=D._owner;if(K!=null){if(K.ref!==void 0&&(we=K.ref,xe=I.current),K.key!==void 0&&(ue=""+K.key),D.type&&D.type.defaultProps)var se=D.type.defaultProps;for(Z in K)A.call(K,Z)&&!k.hasOwnProperty(Z)&&(oe[Z]=K[Z]===void 0&&se!==void 0?se[Z]:K[Z])}var Z=arguments.length-2;if(Z===1)oe.children=ae;else if(1<Z){se=Array(Z);for(var be=0;be<Z;be++)se[be]=arguments[be+2];oe.children=se}return{$$typeof:r,type:D.type,key:ue,ref:we,props:oe,_owner:xe}},react_production_min.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:x,_context:D},D.Consumer=D},react_production_min.createElement=N,react_production_min.createFactory=function(D){var K=N.bind(null,D);return K.type=D,K},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(D){return{$$typeof:p,render:D}},react_production_min.isValidElement=z,react_production_min.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:le}},react_production_min.memo=function(D,K){return{$$typeof:c,type:D,compare:K===void 0?null:K}},react_production_min.startTransition=function(D){var K=H.transition;H.transition={};try{D()}finally{H.transition=K}},react_production_min.unstable_act=L,react_production_min.useCallback=function(D,K){return me.current.useCallback(D,K)},react_production_min.useContext=function(D){return me.current.useContext(D)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(D){return me.current.useDeferredValue(D)},react_production_min.useEffect=function(D,K){return me.current.useEffect(D,K)},react_production_min.useId=function(){return me.current.useId()},react_production_min.useImperativeHandle=function(D,K,ae){return me.current.useImperativeHandle(D,K,ae)},react_production_min.useInsertionEffect=function(D,K){return me.current.useInsertionEffect(D,K)},react_production_min.useLayoutEffect=function(D,K){return me.current.useLayoutEffect(D,K)},react_production_min.useMemo=function(D,K){return me.current.useMemo(D,K)},react_production_min.useReducer=function(D,K,ae){return me.current.useReducer(D,K,ae)},react_production_min.useRef=function(D){return me.current.useRef(D)},react_production_min.useState=function(D){return me.current.useState(D)},react_production_min.useSyncExternalStore=function(D,K,ae){return me.current.useSyncExternalStore(D,K,ae)},react_production_min.useTransition=function(){return me.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var r=requireReact(),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function h(p,b,c){var m,l={},d=null,f=null;c!==void 0&&(d=""+c),b.key!==void 0&&(d=""+b.key),b.ref!==void 0&&(f=b.ref);for(m in b)i.call(b,m)&&!x.hasOwnProperty(m)&&(l[m]=b[m]);if(p&&p.defaultProps)for(m in b=p.defaultProps,b)l[m]===void 0&&(l[m]=b[m]);return{$$typeof:a,type:p,key:d,ref:f,props:l,_owner:u.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=h,reactJsxRuntime_production_min.jsxs=h,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(r){function a(H,pe){var L=H.length;H.push(pe);e:for(;0<L;){var D=L-1>>>1,K=H[D];if(0<u(K,pe))H[D]=pe,H[L]=K,L=D;else break e}}function s(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var pe=H[0],L=H.pop();if(L!==pe){H[0]=L;e:for(var D=0,K=H.length,ae=K>>>1;D<ae;){var oe=2*(D+1)-1,ue=H[oe],we=oe+1,xe=H[we];if(0>u(ue,L))we<K&&0>u(xe,ue)?(H[D]=xe,H[we]=L,D=we):(H[D]=ue,H[oe]=L,D=oe);else if(we<K&&0>u(xe,L))H[D]=xe,H[we]=L,D=we;else break e}}return pe}function u(H,pe){var L=H.sortIndex-pe.sortIndex;return L!==0?L:H.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;r.unstable_now=function(){return x.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var b=[],c=[],m=1,l=null,d=3,f=!1,S=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var pe=s(c);pe!==null;){if(pe.callback===null)i(c);else if(pe.startTime<=H)i(c),pe.sortIndex=pe.expirationTime,a(b,pe);else break;pe=s(c)}}function _(H){if(y=!1,T(H),!S)if(s(b)!==null)S=!0,le(A);else{var pe=s(c);pe!==null&&me(_,pe.startTime-H)}}function A(H,pe){S=!1,y&&(y=!1,g(N),N=-1),f=!0;var L=d;try{for(T(pe),l=s(b);l!==null&&(!(l.expirationTime>pe)||H&&!W());){var D=l.callback;if(typeof D=="function"){l.callback=null,d=l.priorityLevel;var K=D(l.expirationTime<=pe);pe=r.unstable_now(),typeof K=="function"?l.callback=K:l===s(b)&&i(b),T(pe)}else i(b);l=s(b)}if(l!==null)var ae=!0;else{var oe=s(c);oe!==null&&me(_,oe.startTime-pe),ae=!1}return ae}finally{l=null,d=L,f=!1}}var I=!1,k=null,N=-1,Y=5,z=-1;function W(){return!(r.unstable_now()-z<Y)}function G(){if(k!==null){var H=r.unstable_now();z=H;var pe=!0;try{pe=k(!0,H)}finally{pe?$():(I=!1,k=null)}}else I=!1}var $;if(typeof w=="function")$=function(){w(G)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,F=ge.port2;ge.port1.onmessage=G,$=function(){F.postMessage(null)}}else $=function(){E(G,0)};function le(H){k=H,I||(I=!0,$())}function me(H,pe){N=E(function(){H(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){S||f||(S=!0,le(A))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return s(b)},r.unstable_next=function(H){switch(d){case 1:case 2:case 3:var pe=3;break;default:pe=d}var L=d;d=pe;try{return H()}finally{d=L}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,pe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var L=d;d=H;try{return pe()}finally{d=L}},r.unstable_scheduleCallback=function(H,pe,L){var D=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,H){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,H={id:m++,callback:pe,priorityLevel:H,startTime:L,expirationTime:K,sortIndex:-1},L>D?(H.sortIndex=L,a(c,H),s(b)===null&&H===s(c)&&(y?(g(N),N=-1):y=!0,me(_,L-D))):(H.sortIndex=K,a(b,H),S||f||(S=!0,le(A))),H},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(H){var pe=d;return function(){var L=d;d=pe;try{return H.apply(this,arguments)}finally{d=L}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var r=requireReact(),a=requireScheduler();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,u={};function x(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)i.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},l={};function d(e){return b.call(l,e)?!0:b.call(m,e)?!1:c.test(e)?l[e]=!0:(m[e]=!0,!1)}function f(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,n,o){if(t===null||typeof t>"u"||f(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function y(e,t,n,o,v,j,P){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=v,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=j,this.removeEmptyString=P}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new y(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new y(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new y(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new y(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new y(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new y(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,w);E[t]=new y(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,w);E[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,w);E[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,n,o){var v=E.hasOwnProperty(t)?E[t]:null;(v!==null?v.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,n,v,o)&&(n=null),o||v===null?d(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):v.mustUseProperty?e[v.propertyName]=n===null?v.type===3?!1:"":n:(t=v.attributeName,o=v.attributeNamespace,n===null?e.removeAttribute(t):(v=v.type,n=v===3||v===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),W=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),H=Symbol.iterator;function pe(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var L=Object.assign,D;function K(e){if(D===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return`
`+D+e}var ae=!1;function oe(e,t){if(!e||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(ve){var o=ve}Reflect.construct(e,[],t)}else{try{t.call()}catch(ve){o=ve}e.call(t.prototype)}else{try{throw Error()}catch(ve){o=ve}e()}}catch(ve){if(ve&&o&&typeof ve.stack=="string"){for(var v=ve.stack.split(`
`),j=o.stack.split(`
`),P=v.length-1,V=j.length-1;1<=P&&0<=V&&v[P]!==j[V];)V--;for(;1<=P&&0<=V;P--,V--)if(v[P]!==j[V]){if(P!==1||V!==1)do if(P--,V--,0>V||v[P]!==j[V]){var re=`
`+v[P].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=P&&0<=V);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function ue(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function we(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case I:return"Portal";case Y:return"Profiler";case N:return"StrictMode";case $:return"Suspense";case ge:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W:return(e.displayName||"Context")+".Consumer";case z:return(e._context.displayName||"Context")+".Provider";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}function xe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function be(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var v=n.get,j=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return v.call(this)},set:function(P){o=""+P,j.call(this,P)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(P){o=""+P},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _e(e){e._valueTracker||(e._valueTracker=be(e))}function te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=Z(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function q(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ce(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=se(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ee(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function je(e,t){Ee(e,t);var n=se(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ee(e,t,n){(t!=="number"||q(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Se=Array.isArray;function Te(e,t,n,o){if(e=e.options,t){t={};for(var v=0;v<n.length;v++)t["$"+n[v]]=!0;for(n=0;n<e.length;n++)v=t.hasOwnProperty("$"+e[n].value),e[n].selected!==v&&(e[n].selected=v),v&&o&&(e[n].defaultSelected=!0)}else{for(n=""+se(n),t=null,v=0;v<e.length;v++){if(e[v].value===n){e[v].selected=!0,o&&(e[v].defaultSelected=!0);return}t!==null||e[v].disabled||(t=e[v])}t!==null&&(t.selected=!0)}}function ye(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(Se(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:se(n)}}function He(e,t){var n=se(t.value),o=se(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function Ke(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Je(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var R,C=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,v){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,v)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(R=R||document.createElement("div"),R.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=R.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function U(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ne={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];Object.keys(ne).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ne[t]=ne[e]})});function ke(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ne.hasOwnProperty(e)&&ne[e]?(""+t).trim():t+"px"}function Ve(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,v=ke(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,v):e[n]=v}}var tt=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(e,t){if(t){if(tt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function rt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Mt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wt=null,Ut=null,bt=null;function nr(e){if(e=ei(e)){if(typeof wt!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Li(t),wt(e.stateNode,e.type,t))}}function Vt(e){Ut?bt?bt.push(e):bt=[e]:Ut=e}function Ct(){if(Ut){var e=Ut,t=bt;if(bt=Ut=null,nr(e),t)for(e=0;e<t.length;e++)nr(t[e])}}function Ne(e,t){return e(t)}function B(){}var O=!1;function Re(e,t,n){if(O)return e(t,n);O=!0;try{return Ne(e,t,n)}finally{O=!1,(Ut!==null||bt!==null)&&(B(),Ct())}}function Ae(e,t){var n=e.stateNode;if(n===null)return null;var o=Li(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var J=!1;if(p)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){J=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch{J=!1}function ze(e,t,n,o,v,j,P,V,re){var ve=Array.prototype.slice.call(arguments,3);try{t.apply(n,ve)}catch(De){this.onError(De)}}var Fe=!1,Ye=null,lt=!1,pt=null,ir={onError:function(e){Fe=!0,Ye=e}};function qt(e,t,n,o,v,j,P,V,re){Fe=!1,Ye=null,ze.apply(ir,arguments)}function It(e,t,n,o,v,j,P,V,re){if(qt.apply(this,arguments),Fe){if(Fe){var ve=Ye;Fe=!1,Ye=null}else throw Error(s(198));lt||(lt=!0,pt=ve)}}function ut(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wt(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function st(e){if(ut(e)!==e)throw Error(s(188))}function Dt(e){var t=e.alternate;if(!t){if(t=ut(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,o=t;;){var v=n.return;if(v===null)break;var j=v.alternate;if(j===null){if(o=v.return,o!==null){n=o;continue}break}if(v.child===j.child){for(j=v.child;j;){if(j===n)return st(v),e;if(j===o)return st(v),t;j=j.sibling}throw Error(s(188))}if(n.return!==o.return)n=v,o=j;else{for(var P=!1,V=v.child;V;){if(V===n){P=!0,n=v,o=j;break}if(V===o){P=!0,o=v,n=j;break}V=V.sibling}if(!P){for(V=j.child;V;){if(V===n){P=!0,n=j,o=v;break}if(V===o){P=!0,o=j,n=v;break}V=V.sibling}if(!P)throw Error(s(189))}}if(n.alternate!==o)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function nt(e){return e=Dt(e),e!==null?kt(e):null}function kt(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kt(e);if(t!==null)return t;e=e.sibling}return null}var Bt=a.unstable_scheduleCallback,At=a.unstable_cancelCallback,Gt=a.unstable_shouldYield,ar=a.unstable_requestPaint,mt=a.unstable_now,Dn=a.unstable_getCurrentPriorityLevel,wa=a.unstable_ImmediatePriority,oo=a.unstable_UserBlockingPriority,gi=a.unstable_NormalPriority,Bu=a.unstable_LowPriority,lo=a.unstable_IdlePriority,yi=null,br=null;function Lu(e){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(yi,e,void 0,(e.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:zu,Fu=Math.log,Ou=Math.LN2;function zu(e){return e>>>=0,e===0?32:31-(Fu(e)/Ou|0)|0}var bi=64,vi=4194304;function Bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ei(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,v=e.suspendedLanes,j=e.pingedLanes,P=n&268435455;if(P!==0){var V=P&~v;V!==0?o=Bn(V):(j&=P,j!==0&&(o=Bn(j)))}else P=n&~v,P!==0?o=Bn(P):j!==0&&(o=Bn(j));if(o===0)return 0;if(t!==0&&t!==o&&(t&v)===0&&(v=o&-o,j=t&-t,v>=j||v===16&&(j&4194240)!==0))return t;if((o&4)!==0&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-fr(t),v=1<<n,o|=e[n],t&=~v;return o}function Uu(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qu(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,v=e.expirationTimes,j=e.pendingLanes;0<j;){var P=31-fr(j),V=1<<P,re=v[P];re===-1?((V&n)===0||(V&o)!==0)&&(v[P]=Uu(V,t)):re<=t&&(e.expiredLanes|=V),j&=~V}}function Sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uo(){var e=bi;return bi<<=1,(bi&4194240)===0&&(bi=64),e}function Ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ln(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fr(t),e[t]=n}function Wu(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var v=31-fr(n),j=1<<v;t[v]=0,o[v]=-1,e[v]=-1,n&=~j}}function ka(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-fr(n),v=1<<o;v&t|e[o]&t&&(e[o]|=t),n&=~v}}var ot=0;function co(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var fo,ja,po,mo,ho,Ta=!1,wi=[],Mr=null,Dr=null,Br=null,Fn=new Map,On=new Map,Lr=[],$u="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xo(e,t){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Fn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function zn(e,t,n,o,v,j){return e===null||e.nativeEvent!==j?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:j,targetContainers:[v]},t!==null&&(t=ei(t),t!==null&&ja(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,v!==null&&t.indexOf(v)===-1&&t.push(v),e)}function Hu(e,t,n,o,v){switch(t){case"focusin":return Mr=zn(Mr,e,t,n,o,v),!0;case"dragenter":return Dr=zn(Dr,e,t,n,o,v),!0;case"mouseover":return Br=zn(Br,e,t,n,o,v),!0;case"pointerover":var j=v.pointerId;return Fn.set(j,zn(Fn.get(j)||null,e,t,n,o,v)),!0;case"gotpointercapture":return j=v.pointerId,On.set(j,zn(On.get(j)||null,e,t,n,o,v)),!0}return!1}function go(e){var t=en(e.target);if(t!==null){var n=ut(t);if(n!==null){if(t=n.tag,t===13){if(t=Wt(n),t!==null){e.blockedOn=t,ho(e.priority,function(){po(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ca(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);Ze=o,n.target.dispatchEvent(o),Ze=null}else return t=ei(n),t!==null&&ja(t),e.blockedOn=n,!1;t.shift()}return!0}function yo(e,t,n){Si(e)&&n.delete(t)}function Vu(){Ta=!1,Mr!==null&&Si(Mr)&&(Mr=null),Dr!==null&&Si(Dr)&&(Dr=null),Br!==null&&Si(Br)&&(Br=null),Fn.forEach(yo),On.forEach(yo)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,Ta||(Ta=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vu)))}function qn(e){function t(v){return Un(v,e)}if(0<wi.length){Un(wi[0],e);for(var n=1;n<wi.length;n++){var o=wi[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Mr!==null&&Un(Mr,e),Dr!==null&&Un(Dr,e),Br!==null&&Un(Br,e),Fn.forEach(t),On.forEach(t),n=0;n<Lr.length;n++)o=Lr[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)go(n),n.blockedOn===null&&Lr.shift()}var pn=_.ReactCurrentBatchConfig,Ri=!0;function Gu(e,t,n,o){var v=ot,j=pn.transition;pn.transition=null;try{ot=1,_a(e,t,n,o)}finally{ot=v,pn.transition=j}}function Xu(e,t,n,o){var v=ot,j=pn.transition;pn.transition=null;try{ot=4,_a(e,t,n,o)}finally{ot=v,pn.transition=j}}function _a(e,t,n,o){if(Ri){var v=Ca(e,t,n,o);if(v===null)Va(e,t,o,ki,n),xo(e,o);else if(Hu(v,e,t,n,o))o.stopPropagation();else if(xo(e,o),t&4&&-1<$u.indexOf(e)){for(;v!==null;){var j=ei(v);if(j!==null&&fo(j),j=Ca(e,t,n,o),j===null&&Va(e,t,o,ki,n),j===v)break;v=j}v!==null&&o.stopPropagation()}else Va(e,t,o,null,n)}}var ki=null;function Ca(e,t,n,o){if(ki=null,e=Mt(o),e=en(e),e!==null)if(t=ut(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wt(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ki=e,null}function bo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dn()){case wa:return 1;case oo:return 4;case gi:case Bu:return 16;case lo:return 536870912;default:return 16}default:return 16}}var Fr=null,Ia=null,ji=null;function vo(){if(ji)return ji;var e,t=Ia,n=t.length,o,v="value"in Fr?Fr.value:Fr.textContent,j=v.length;for(e=0;e<n&&t[e]===v[e];e++);var P=n-e;for(o=1;o<=P&&t[n-o]===v[j-o];o++);return ji=v.slice(e,1<o?1-o:void 0)}function Ti(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _i(){return!0}function Eo(){return!1}function Jt(e){function t(n,o,v,j,P){this._reactName=n,this._targetInst=v,this.type=o,this.nativeEvent=j,this.target=P,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(n=e[V],this[V]=n?n(j):j[V]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?_i:Eo,this.isPropagationStopped=Eo,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),t}var mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=Jt(mn),Wn=L({},mn,{view:0,detail:0}),Ku=Jt(Wn),Na,Pa,$n,Ci=L({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$n&&($n&&e.type==="mousemove"?(Na=e.screenX-$n.screenX,Pa=e.screenY-$n.screenY):Pa=Na=0,$n=e),Na)},movementY:function(e){return"movementY"in e?e.movementY:Pa}}),wo=Jt(Ci),Yu=L({},Ci,{dataTransfer:0}),Qu=Jt(Yu),Zu=L({},Wn,{relatedTarget:0}),Ma=Jt(Zu),Ju=L({},mn,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Jt(Ju),tc=L({},mn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rc=Jt(tc),nc=L({},mn,{data:0}),So=Jt(nc),ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sc[e])?!!t[e]:!1}function Da(){return oc}var lc=L({},Wn,{key:function(e){if(e.key){var t=ic[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ac[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(e){return e.type==="keypress"?Ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uc=Jt(lc),cc=L({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ro=Jt(cc),dc=L({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),fc=Jt(dc),pc=L({},mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mc=Jt(pc),hc=L({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xc=Jt(hc),gc=[9,13,27,32],Ba=p&&"CompositionEvent"in window,Hn=null;p&&"documentMode"in document&&(Hn=document.documentMode);var yc=p&&"TextEvent"in window&&!Hn,ko=p&&(!Ba||Hn&&8<Hn&&11>=Hn),jo=" ",To=!1;function _o(e,t){switch(e){case"keyup":return gc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Co(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hn=!1;function bc(e,t){switch(e){case"compositionend":return Co(t);case"keypress":return t.which!==32?null:(To=!0,jo);case"textInput":return e=t.data,e===jo&&To?null:e;default:return null}}function vc(e,t){if(hn)return e==="compositionend"||!Ba&&_o(e,t)?(e=vo(),ji=Ia=Fr=null,hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ko&&t.locale!=="ko"?null:t.data;default:return null}}var Ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Io(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ec[e.type]:t==="textarea"}function Ao(e,t,n,o){Vt(o),t=Mi(t,"onChange"),0<t.length&&(n=new Aa("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Vn=null,Gn=null;function wc(e){Ko(e,0)}function Ii(e){var t=vn(e);if(te(t))return e}function Sc(e,t){if(e==="change")return t}var No=!1;if(p){var La;if(p){var Fa="oninput"in document;if(!Fa){var Po=document.createElement("div");Po.setAttribute("oninput","return;"),Fa=typeof Po.oninput=="function"}La=Fa}else La=!1;No=La&&(!document.documentMode||9<document.documentMode)}function Mo(){Vn&&(Vn.detachEvent("onpropertychange",Do),Gn=Vn=null)}function Do(e){if(e.propertyName==="value"&&Ii(Gn)){var t=[];Ao(t,Gn,e,Mt(e)),Re(wc,t)}}function Rc(e,t,n){e==="focusin"?(Mo(),Vn=t,Gn=n,Vn.attachEvent("onpropertychange",Do)):e==="focusout"&&Mo()}function kc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(Gn)}function jc(e,t){if(e==="click")return Ii(t)}function Tc(e,t){if(e==="input"||e==="change")return Ii(t)}function _c(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pr=typeof Object.is=="function"?Object.is:_c;function Xn(e,t){if(pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var v=n[o];if(!b.call(t,v)||!pr(e[v],t[v]))return!1}return!0}function Bo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lo(e,t){var n=Bo(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bo(n)}}function Fo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Oo(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=q(e.document)}return t}function Oa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cc(e){var t=Oo(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fo(n.ownerDocument.documentElement,n)){if(o!==null&&Oa(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var v=n.textContent.length,j=Math.min(o.start,v);o=o.end===void 0?j:Math.min(o.end,v),!e.extend&&j>o&&(v=o,o=j,j=v),v=Lo(n,j);var P=Lo(n,o);v&&P&&(e.rangeCount!==1||e.anchorNode!==v.node||e.anchorOffset!==v.offset||e.focusNode!==P.node||e.focusOffset!==P.offset)&&(t=t.createRange(),t.setStart(v.node,v.offset),e.removeAllRanges(),j>o?(e.addRange(t),e.extend(P.node,P.offset)):(t.setEnd(P.node,P.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ic=p&&"documentMode"in document&&11>=document.documentMode,xn=null,za=null,Kn=null,Ua=!1;function zo(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ua||xn==null||xn!==q(o)||(o=xn,"selectionStart"in o&&Oa(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Kn&&Xn(Kn,o)||(Kn=o,o=Mi(za,"onSelect"),0<o.length&&(t=new Aa("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=xn)))}function Ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gn={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},qa={},Uo={};p&&(Uo=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function Ni(e){if(qa[e])return qa[e];if(!gn[e])return e;var t=gn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Uo)return qa[e]=t[n];return e}var qo=Ni("animationend"),Wo=Ni("animationiteration"),$o=Ni("animationstart"),Ho=Ni("transitionend"),Vo=new Map,Go="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Vo.set(e,t),x(t,[e])}for(var Wa=0;Wa<Go.length;Wa++){var $a=Go[Wa],Ac=$a.toLowerCase(),Nc=$a[0].toUpperCase()+$a.slice(1);Or(Ac,"on"+Nc)}Or(qo,"onAnimationEnd"),Or(Wo,"onAnimationIteration"),Or($o,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ho,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function Xo(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,It(o,t,void 0,e),e.currentTarget=null}function Ko(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],v=o.event;o=o.listeners;e:{var j=void 0;if(t)for(var P=o.length-1;0<=P;P--){var V=o[P],re=V.instance,ve=V.currentTarget;if(V=V.listener,re!==j&&v.isPropagationStopped())break e;Xo(v,V,ve),j=re}else for(P=0;P<o.length;P++){if(V=o[P],re=V.instance,ve=V.currentTarget,V=V.listener,re!==j&&v.isPropagationStopped())break e;Xo(v,V,ve),j=re}}}if(lt)throw e=pt,lt=!1,pt=null,e}function dt(e,t){var n=t[Za];n===void 0&&(n=t[Za]=new Set);var o=e+"__bubble";n.has(o)||(Yo(t,e,2,!1),n.add(o))}function Ha(e,t,n){var o=0;t&&(o|=4),Yo(n,e,o,t)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Qn(e){if(!e[Pi]){e[Pi]=!0,i.forEach(function(n){n!=="selectionchange"&&(Pc.has(n)||Ha(n,!1,e),Ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pi]||(t[Pi]=!0,Ha("selectionchange",!1,t))}}function Yo(e,t,n,o){switch(bo(t)){case 1:var v=Gu;break;case 4:v=Xu;break;default:v=_a}n=v.bind(null,t,n,e),v=void 0,!J||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(v=!0),o?v!==void 0?e.addEventListener(t,n,{capture:!0,passive:v}):e.addEventListener(t,n,!0):v!==void 0?e.addEventListener(t,n,{passive:v}):e.addEventListener(t,n,!1)}function Va(e,t,n,o,v){var j=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var P=o.tag;if(P===3||P===4){var V=o.stateNode.containerInfo;if(V===v||V.nodeType===8&&V.parentNode===v)break;if(P===4)for(P=o.return;P!==null;){var re=P.tag;if((re===3||re===4)&&(re=P.stateNode.containerInfo,re===v||re.nodeType===8&&re.parentNode===v))return;P=P.return}for(;V!==null;){if(P=en(V),P===null)return;if(re=P.tag,re===5||re===6){o=j=P;continue e}V=V.parentNode}}o=o.return}Re(function(){var ve=j,De=Mt(n),Be=[];e:{var Pe=Vo.get(e);if(Pe!==void 0){var Oe=Aa,qe=e;switch(e){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":Oe=uc;break;case"focusin":qe="focus",Oe=Ma;break;case"focusout":qe="blur",Oe=Ma;break;case"beforeblur":case"afterblur":Oe=Ma;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=fc;break;case qo:case Wo:case $o:Oe=ec;break;case Ho:Oe=mc;break;case"scroll":Oe=Ku;break;case"wheel":Oe=xc;break;case"copy":case"cut":case"paste":Oe=rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Ro}var We=(t&4)!==0,vt=!We&&e==="scroll",de=We?Pe!==null?Pe+"Capture":null:Pe;We=[];for(var ie=ve,he;ie!==null;){he=ie;var Le=he.stateNode;if(he.tag===5&&Le!==null&&(he=Le,de!==null&&(Le=Ae(ie,de),Le!=null&&We.push(Zn(ie,Le,he)))),vt)break;ie=ie.return}0<We.length&&(Pe=new Oe(Pe,qe,null,n,De),Be.push({event:Pe,listeners:We}))}}if((t&7)===0){e:{if(Pe=e==="mouseover"||e==="pointerover",Oe=e==="mouseout"||e==="pointerout",Pe&&n!==Ze&&(qe=n.relatedTarget||n.fromElement)&&(en(qe)||qe[Rr]))break e;if((Oe||Pe)&&(Pe=De.window===De?De:(Pe=De.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Oe?(qe=n.relatedTarget||n.toElement,Oe=ve,qe=qe?en(qe):null,qe!==null&&(vt=ut(qe),qe!==vt||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(Oe=null,qe=ve),Oe!==qe)){if(We=wo,Le="onMouseLeave",de="onMouseEnter",ie="mouse",(e==="pointerout"||e==="pointerover")&&(We=Ro,Le="onPointerLeave",de="onPointerEnter",ie="pointer"),vt=Oe==null?Pe:vn(Oe),he=qe==null?Pe:vn(qe),Pe=new We(Le,ie+"leave",Oe,n,De),Pe.target=vt,Pe.relatedTarget=he,Le=null,en(De)===ve&&(We=new We(de,ie+"enter",qe,n,De),We.target=he,We.relatedTarget=vt,Le=We),vt=Le,Oe&&qe)t:{for(We=Oe,de=qe,ie=0,he=We;he;he=yn(he))ie++;for(he=0,Le=de;Le;Le=yn(Le))he++;for(;0<ie-he;)We=yn(We),ie--;for(;0<he-ie;)de=yn(de),he--;for(;ie--;){if(We===de||de!==null&&We===de.alternate)break t;We=yn(We),de=yn(de)}We=null}else We=null;Oe!==null&&Qo(Be,Pe,Oe,We,!1),qe!==null&&vt!==null&&Qo(Be,vt,qe,We,!0)}}e:{if(Pe=ve?vn(ve):window,Oe=Pe.nodeName&&Pe.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Pe.type==="file")var $e=Sc;else if(Io(Pe))if(No)$e=Tc;else{$e=kc;var Ge=Rc}else(Oe=Pe.nodeName)&&Oe.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&($e=jc);if($e&&($e=$e(e,ve))){Ao(Be,$e,n,De);break e}Ge&&Ge(e,Pe,ve),e==="focusout"&&(Ge=Pe._wrapperState)&&Ge.controlled&&Pe.type==="number"&&ee(Pe,"number",Pe.value)}switch(Ge=ve?vn(ve):window,e){case"focusin":(Io(Ge)||Ge.contentEditable==="true")&&(xn=Ge,za=ve,Kn=null);break;case"focusout":Kn=za=xn=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,zo(Be,n,De);break;case"selectionchange":if(Ic)break;case"keydown":case"keyup":zo(Be,n,De)}var Xe;if(Ba)e:{switch(e){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else hn?_o(e,n)&&(Qe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Qe="onCompositionStart");Qe&&(ko&&n.locale!=="ko"&&(hn||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&hn&&(Xe=vo()):(Fr=De,Ia="value"in Fr?Fr.value:Fr.textContent,hn=!0)),Ge=Mi(ve,Qe),0<Ge.length&&(Qe=new So(Qe,e,null,n,De),Be.push({event:Qe,listeners:Ge}),Xe?Qe.data=Xe:(Xe=Co(n),Xe!==null&&(Qe.data=Xe)))),(Xe=yc?bc(e,n):vc(e,n))&&(ve=Mi(ve,"onBeforeInput"),0<ve.length&&(De=new So("onBeforeInput","beforeinput",null,n,De),Be.push({event:De,listeners:ve}),De.data=Xe))}Ko(Be,t)})}function Zn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mi(e,t){for(var n=t+"Capture",o=[];e!==null;){var v=e,j=v.stateNode;v.tag===5&&j!==null&&(v=j,j=Ae(e,n),j!=null&&o.unshift(Zn(e,j,v)),j=Ae(e,t),j!=null&&o.push(Zn(e,j,v))),e=e.return}return o}function yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qo(e,t,n,o,v){for(var j=t._reactName,P=[];n!==null&&n!==o;){var V=n,re=V.alternate,ve=V.stateNode;if(re!==null&&re===o)break;V.tag===5&&ve!==null&&(V=ve,v?(re=Ae(n,j),re!=null&&P.unshift(Zn(n,re,V))):v||(re=Ae(n,j),re!=null&&P.push(Zn(n,re,V)))),n=n.return}P.length!==0&&e.push({event:t,listeners:P})}var Mc=/\r\n?/g,Dc=/\u0000|\uFFFD/g;function Zo(e){return(typeof e=="string"?e:""+e).replace(Mc,`
`).replace(Dc,"")}function Di(e,t,n){if(t=Zo(t),Zo(e)!==t&&n)throw Error(s(425))}function Bi(){}var Ga=null,Xa=null;function Ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,Bc=typeof clearTimeout=="function"?clearTimeout:void 0,Jo=typeof Promise=="function"?Promise:void 0,Lc=typeof queueMicrotask=="function"?queueMicrotask:typeof Jo<"u"?function(e){return Jo.resolve(null).then(e).catch(Fc)}:Ya;function Fc(e){setTimeout(function(){throw e})}function Qa(e,t){var n=t,o=0;do{var v=n.nextSibling;if(e.removeChild(n),v&&v.nodeType===8)if(n=v.data,n==="/$"){if(o===0){e.removeChild(v),qn(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=v}while(n);qn(t)}function zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function el(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bn=Math.random().toString(36).slice(2),vr="__reactFiber$"+bn,Jn="__reactProps$"+bn,Rr="__reactContainer$"+bn,Za="__reactEvents$"+bn,Oc="__reactListeners$"+bn,zc="__reactHandles$"+bn;function en(e){var t=e[vr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rr]||n[vr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=el(e);e!==null;){if(n=e[vr])return n;e=el(e)}return t}e=n,n=e.parentNode}return null}function ei(e){return e=e[vr]||e[Rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Li(e){return e[Jn]||null}var Ja=[],En=-1;function Ur(e){return{current:e}}function ft(e){0>En||(e.current=Ja[En],Ja[En]=null,En--)}function ct(e,t){En++,Ja[En]=e.current,e.current=t}var qr={},Lt=Ur(qr),Xt=Ur(!1),tn=qr;function wn(e,t){var n=e.type.contextTypes;if(!n)return qr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var v={},j;for(j in n)v[j]=t[j];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=v),v}function Kt(e){return e=e.childContextTypes,e!=null}function Fi(){ft(Xt),ft(Lt)}function tl(e,t,n){if(Lt.current!==qr)throw Error(s(168));ct(Lt,t),ct(Xt,n)}function rl(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var v in o)if(!(v in t))throw Error(s(108,xe(e)||"Unknown",v));return L({},n,o)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qr,tn=Lt.current,ct(Lt,e),ct(Xt,Xt.current),!0}function nl(e,t,n){var o=e.stateNode;if(!o)throw Error(s(169));n?(e=rl(e,t,tn),o.__reactInternalMemoizedMergedChildContext=e,ft(Xt),ft(Lt),ct(Lt,e)):ft(Xt),ct(Xt,n)}var kr=null,zi=!1,es=!1;function il(e){kr===null?kr=[e]:kr.push(e)}function Uc(e){zi=!0,il(e)}function Wr(){if(!es&&kr!==null){es=!0;var e=0,t=ot;try{var n=kr;for(ot=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}kr=null,zi=!1}catch(v){throw kr!==null&&(kr=kr.slice(e+1)),Bt(wa,Wr),v}finally{ot=t,es=!1}}return null}var Sn=[],Rn=0,Ui=null,qi=0,sr=[],or=0,rn=null,jr=1,Tr="";function nn(e,t){Sn[Rn++]=qi,Sn[Rn++]=Ui,Ui=e,qi=t}function al(e,t,n){sr[or++]=jr,sr[or++]=Tr,sr[or++]=rn,rn=e;var o=jr;e=Tr;var v=32-fr(o)-1;o&=~(1<<v),n+=1;var j=32-fr(t)+v;if(30<j){var P=v-v%5;j=(o&(1<<P)-1).toString(32),o>>=P,v-=P,jr=1<<32-fr(t)+v|n<<v|o,Tr=j+e}else jr=1<<j|n<<v|o,Tr=e}function ts(e){e.return!==null&&(nn(e,1),al(e,1,0))}function rs(e){for(;e===Ui;)Ui=Sn[--Rn],Sn[Rn]=null,qi=Sn[--Rn],Sn[Rn]=null;for(;e===rn;)rn=sr[--or],sr[or]=null,Tr=sr[--or],sr[or]=null,jr=sr[--or],sr[or]=null}var er=null,tr=null,ht=!1,mr=null;function sl(e,t){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ol(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,er=e,tr=zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,er=e,tr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rn!==null?{id:jr,overflow:Tr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,er=e,tr=null,!0):!1;default:return!1}}function ns(e){return(e.mode&1)!==0&&(e.flags&128)===0}function is(e){if(ht){var t=tr;if(t){var n=t;if(!ol(e,t)){if(ns(e))throw Error(s(418));t=zr(n.nextSibling);var o=er;t&&ol(e,t)?sl(o,n):(e.flags=e.flags&-4097|2,ht=!1,er=e)}}else{if(ns(e))throw Error(s(418));e.flags=e.flags&-4097|2,ht=!1,er=e}}}function ll(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;er=e}function Wi(e){if(e!==er)return!1;if(!ht)return ll(e),ht=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ka(e.type,e.memoizedProps)),t&&(t=tr)){if(ns(e))throw ul(),Error(s(418));for(;t;)sl(e,t),t=zr(t.nextSibling)}if(ll(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tr=zr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tr=null}}else tr=er?zr(e.stateNode.nextSibling):null;return!0}function ul(){for(var e=tr;e;)e=zr(e.nextSibling)}function kn(){tr=er=null,ht=!1}function as(e){mr===null?mr=[e]:mr.push(e)}var qc=_.ReactCurrentBatchConfig;function ti(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var o=n.stateNode}if(!o)throw Error(s(147,e));var v=o,j=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===j?t.ref:(t=function(P){var V=v.refs;P===null?delete V[j]:V[j]=P},t._stringRef=j,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function $i(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cl(e){var t=e._init;return t(e._payload)}function dl(e){function t(de,ie){if(e){var he=de.deletions;he===null?(de.deletions=[ie],de.flags|=16):he.push(ie)}}function n(de,ie){if(!e)return null;for(;ie!==null;)t(de,ie),ie=ie.sibling;return null}function o(de,ie){for(de=new Map;ie!==null;)ie.key!==null?de.set(ie.key,ie):de.set(ie.index,ie),ie=ie.sibling;return de}function v(de,ie){return de=Qr(de,ie),de.index=0,de.sibling=null,de}function j(de,ie,he){return de.index=he,e?(he=de.alternate,he!==null?(he=he.index,he<ie?(de.flags|=2,ie):he):(de.flags|=2,ie)):(de.flags|=1048576,ie)}function P(de){return e&&de.alternate===null&&(de.flags|=2),de}function V(de,ie,he,Le){return ie===null||ie.tag!==6?(ie=Qs(he,de.mode,Le),ie.return=de,ie):(ie=v(ie,he),ie.return=de,ie)}function re(de,ie,he,Le){var $e=he.type;return $e===k?De(de,ie,he.props.children,Le,he.key):ie!==null&&(ie.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===le&&cl($e)===ie.type)?(Le=v(ie,he.props),Le.ref=ti(de,ie,he),Le.return=de,Le):(Le=ma(he.type,he.key,he.props,null,de.mode,Le),Le.ref=ti(de,ie,he),Le.return=de,Le)}function ve(de,ie,he,Le){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==he.containerInfo||ie.stateNode.implementation!==he.implementation?(ie=Zs(he,de.mode,Le),ie.return=de,ie):(ie=v(ie,he.children||[]),ie.return=de,ie)}function De(de,ie,he,Le,$e){return ie===null||ie.tag!==7?(ie=fn(he,de.mode,Le,$e),ie.return=de,ie):(ie=v(ie,he),ie.return=de,ie)}function Be(de,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Qs(""+ie,de.mode,he),ie.return=de,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case A:return he=ma(ie.type,ie.key,ie.props,null,de.mode,he),he.ref=ti(de,null,ie),he.return=de,he;case I:return ie=Zs(ie,de.mode,he),ie.return=de,ie;case le:var Le=ie._init;return Be(de,Le(ie._payload),he)}if(Se(ie)||pe(ie))return ie=fn(ie,de.mode,he,null),ie.return=de,ie;$i(de,ie)}return null}function Pe(de,ie,he,Le){var $e=ie!==null?ie.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return $e!==null?null:V(de,ie,""+he,Le);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case A:return he.key===$e?re(de,ie,he,Le):null;case I:return he.key===$e?ve(de,ie,he,Le):null;case le:return $e=he._init,Pe(de,ie,$e(he._payload),Le)}if(Se(he)||pe(he))return $e!==null?null:De(de,ie,he,Le,null);$i(de,he)}return null}function Oe(de,ie,he,Le,$e){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return de=de.get(he)||null,V(ie,de,""+Le,$e);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case A:return de=de.get(Le.key===null?he:Le.key)||null,re(ie,de,Le,$e);case I:return de=de.get(Le.key===null?he:Le.key)||null,ve(ie,de,Le,$e);case le:var Ge=Le._init;return Oe(de,ie,he,Ge(Le._payload),$e)}if(Se(Le)||pe(Le))return de=de.get(he)||null,De(ie,de,Le,$e,null);$i(ie,Le)}return null}function qe(de,ie,he,Le){for(var $e=null,Ge=null,Xe=ie,Qe=ie=0,_t=null;Xe!==null&&Qe<he.length;Qe++){Xe.index>Qe?(_t=Xe,Xe=null):_t=Xe.sibling;var at=Pe(de,Xe,he[Qe],Le);if(at===null){Xe===null&&(Xe=_t);break}e&&Xe&&at.alternate===null&&t(de,Xe),ie=j(at,ie,Qe),Ge===null?$e=at:Ge.sibling=at,Ge=at,Xe=_t}if(Qe===he.length)return n(de,Xe),ht&&nn(de,Qe),$e;if(Xe===null){for(;Qe<he.length;Qe++)Xe=Be(de,he[Qe],Le),Xe!==null&&(ie=j(Xe,ie,Qe),Ge===null?$e=Xe:Ge.sibling=Xe,Ge=Xe);return ht&&nn(de,Qe),$e}for(Xe=o(de,Xe);Qe<he.length;Qe++)_t=Oe(Xe,de,Qe,he[Qe],Le),_t!==null&&(e&&_t.alternate!==null&&Xe.delete(_t.key===null?Qe:_t.key),ie=j(_t,ie,Qe),Ge===null?$e=_t:Ge.sibling=_t,Ge=_t);return e&&Xe.forEach(function(Zr){return t(de,Zr)}),ht&&nn(de,Qe),$e}function We(de,ie,he,Le){var $e=pe(he);if(typeof $e!="function")throw Error(s(150));if(he=$e.call(he),he==null)throw Error(s(151));for(var Ge=$e=null,Xe=ie,Qe=ie=0,_t=null,at=he.next();Xe!==null&&!at.done;Qe++,at=he.next()){Xe.index>Qe?(_t=Xe,Xe=null):_t=Xe.sibling;var Zr=Pe(de,Xe,at.value,Le);if(Zr===null){Xe===null&&(Xe=_t);break}e&&Xe&&Zr.alternate===null&&t(de,Xe),ie=j(Zr,ie,Qe),Ge===null?$e=Zr:Ge.sibling=Zr,Ge=Zr,Xe=_t}if(at.done)return n(de,Xe),ht&&nn(de,Qe),$e;if(Xe===null){for(;!at.done;Qe++,at=he.next())at=Be(de,at.value,Le),at!==null&&(ie=j(at,ie,Qe),Ge===null?$e=at:Ge.sibling=at,Ge=at);return ht&&nn(de,Qe),$e}for(Xe=o(de,Xe);!at.done;Qe++,at=he.next())at=Oe(Xe,de,Qe,at.value,Le),at!==null&&(e&&at.alternate!==null&&Xe.delete(at.key===null?Qe:at.key),ie=j(at,ie,Qe),Ge===null?$e=at:Ge.sibling=at,Ge=at);return e&&Xe.forEach(function(Ed){return t(de,Ed)}),ht&&nn(de,Qe),$e}function vt(de,ie,he,Le){if(typeof he=="object"&&he!==null&&he.type===k&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case A:e:{for(var $e=he.key,Ge=ie;Ge!==null;){if(Ge.key===$e){if($e=he.type,$e===k){if(Ge.tag===7){n(de,Ge.sibling),ie=v(Ge,he.props.children),ie.return=de,de=ie;break e}}else if(Ge.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===le&&cl($e)===Ge.type){n(de,Ge.sibling),ie=v(Ge,he.props),ie.ref=ti(de,Ge,he),ie.return=de,de=ie;break e}n(de,Ge);break}else t(de,Ge);Ge=Ge.sibling}he.type===k?(ie=fn(he.props.children,de.mode,Le,he.key),ie.return=de,de=ie):(Le=ma(he.type,he.key,he.props,null,de.mode,Le),Le.ref=ti(de,ie,he),Le.return=de,de=Le)}return P(de);case I:e:{for(Ge=he.key;ie!==null;){if(ie.key===Ge)if(ie.tag===4&&ie.stateNode.containerInfo===he.containerInfo&&ie.stateNode.implementation===he.implementation){n(de,ie.sibling),ie=v(ie,he.children||[]),ie.return=de,de=ie;break e}else{n(de,ie);break}else t(de,ie);ie=ie.sibling}ie=Zs(he,de.mode,Le),ie.return=de,de=ie}return P(de);case le:return Ge=he._init,vt(de,ie,Ge(he._payload),Le)}if(Se(he))return qe(de,ie,he,Le);if(pe(he))return We(de,ie,he,Le);$i(de,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ie!==null&&ie.tag===6?(n(de,ie.sibling),ie=v(ie,he),ie.return=de,de=ie):(n(de,ie),ie=Qs(he,de.mode,Le),ie.return=de,de=ie),P(de)):n(de,ie)}return vt}var jn=dl(!0),fl=dl(!1),Hi=Ur(null),Vi=null,Tn=null,ss=null;function os(){ss=Tn=Vi=null}function ls(e){var t=Hi.current;ft(Hi),e._currentValue=t}function us(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function _n(e,t){Vi=e,ss=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Yt=!0),e.firstContext=null)}function lr(e){var t=e._currentValue;if(ss!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(Vi===null)throw Error(s(308));Tn=e,Vi.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var an=null;function cs(e){an===null?an=[e]:an.push(e)}function pl(e,t,n,o){var v=t.interleaved;return v===null?(n.next=n,cs(t)):(n.next=v.next,v.next=n),t.interleaved=n,_r(e,o)}function _r(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $r=!1;function ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ml(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(it&2)!==0){var v=o.pending;return v===null?t.next=t:(t.next=v.next,v.next=t),o.pending=t,_r(e,n)}return v=o.interleaved,v===null?(t.next=t,cs(o)):(t.next=v.next,v.next=t),o.interleaved=t,_r(e,n)}function Gi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,ka(e,n)}}function hl(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var v=null,j=null;if(n=n.firstBaseUpdate,n!==null){do{var P={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};j===null?v=j=P:j=j.next=P,n=n.next}while(n!==null);j===null?v=j=t:j=j.next=t}else v=j=t;n={baseState:o.baseState,firstBaseUpdate:v,lastBaseUpdate:j,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xi(e,t,n,o){var v=e.updateQueue;$r=!1;var j=v.firstBaseUpdate,P=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var re=V,ve=re.next;re.next=null,P===null?j=ve:P.next=ve,P=re;var De=e.alternate;De!==null&&(De=De.updateQueue,V=De.lastBaseUpdate,V!==P&&(V===null?De.firstBaseUpdate=ve:V.next=ve,De.lastBaseUpdate=re))}if(j!==null){var Be=v.baseState;P=0,De=ve=re=null,V=j;do{var Pe=V.lane,Oe=V.eventTime;if((o&Pe)===Pe){De!==null&&(De=De.next={eventTime:Oe,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var qe=e,We=V;switch(Pe=t,Oe=n,We.tag){case 1:if(qe=We.payload,typeof qe=="function"){Be=qe.call(Oe,Be,Pe);break e}Be=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=We.payload,Pe=typeof qe=="function"?qe.call(Oe,Be,Pe):qe,Pe==null)break e;Be=L({},Be,Pe);break e;case 2:$r=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,Pe=v.effects,Pe===null?v.effects=[V]:Pe.push(V))}else Oe={eventTime:Oe,lane:Pe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},De===null?(ve=De=Oe,re=Be):De=De.next=Oe,P|=Pe;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;Pe=V,V=Pe.next,Pe.next=null,v.lastBaseUpdate=Pe,v.shared.pending=null}}while(!0);if(De===null&&(re=Be),v.baseState=re,v.firstBaseUpdate=ve,v.lastBaseUpdate=De,t=v.shared.interleaved,t!==null){v=t;do P|=v.lane,v=v.next;while(v!==t)}else j===null&&(v.shared.lanes=0);ln|=P,e.lanes=P,e.memoizedState=Be}}function xl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],v=o.callback;if(v!==null){if(o.callback=null,o=n,typeof v!="function")throw Error(s(191,v));v.call(o)}}}var ri={},Er=Ur(ri),ni=Ur(ri),ii=Ur(ri);function sn(e){if(e===ri)throw Error(s(174));return e}function fs(e,t){switch(ct(ii,t),ct(ni,e),ct(Er,ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:M(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=M(t,e)}ft(Er),ct(Er,t)}function Cn(){ft(Er),ft(ni),ft(ii)}function gl(e){sn(ii.current);var t=sn(Er.current),n=M(t,e.type);t!==n&&(ct(ni,e),ct(Er,n))}function ps(e){ni.current===e&&(ft(Er),ft(ni))}var xt=Ur(0);function Ki(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function xs(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var Yi=_.ReactCurrentDispatcher,gs=_.ReactCurrentBatchConfig,on=0,gt=null,St=null,jt=null,Qi=!1,ai=!1,si=0,Wc=0;function Ft(){throw Error(s(321))}function ys(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pr(e[n],t[n]))return!1;return!0}function bs(e,t,n,o,v,j){if(on=j,gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yi.current=e===null||e.memoizedState===null?Gc:Xc,e=n(o,v),ai){j=0;do{if(ai=!1,si=0,25<=j)throw Error(s(301));j+=1,jt=St=null,t.updateQueue=null,Yi.current=Kc,e=n(o,v)}while(ai)}if(Yi.current=ea,t=St!==null&&St.next!==null,on=0,jt=St=gt=null,Qi=!1,t)throw Error(s(300));return e}function vs(){var e=si!==0;return si=0,e}function wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?gt.memoizedState=jt=e:jt=jt.next=e,jt}function ur(){if(St===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=jt===null?gt.memoizedState:jt.next;if(t!==null)jt=t,St=e;else{if(e===null)throw Error(s(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},jt===null?gt.memoizedState=jt=e:jt=jt.next=e}return jt}function oi(e,t){return typeof t=="function"?t(e):t}function Es(e){var t=ur(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var o=St,v=o.baseQueue,j=n.pending;if(j!==null){if(v!==null){var P=v.next;v.next=j.next,j.next=P}o.baseQueue=v=j,n.pending=null}if(v!==null){j=v.next,o=o.baseState;var V=P=null,re=null,ve=j;do{var De=ve.lane;if((on&De)===De)re!==null&&(re=re.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),o=ve.hasEagerState?ve.eagerState:e(o,ve.action);else{var Be={lane:De,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};re===null?(V=re=Be,P=o):re=re.next=Be,gt.lanes|=De,ln|=De}ve=ve.next}while(ve!==null&&ve!==j);re===null?P=o:re.next=V,pr(o,t.memoizedState)||(Yt=!0),t.memoizedState=o,t.baseState=P,t.baseQueue=re,n.lastRenderedState=o}if(e=n.interleaved,e!==null){v=e;do j=v.lane,gt.lanes|=j,ln|=j,v=v.next;while(v!==e)}else v===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=ur(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var o=n.dispatch,v=n.pending,j=t.memoizedState;if(v!==null){n.pending=null;var P=v=v.next;do j=e(j,P.action),P=P.next;while(P!==v);pr(j,t.memoizedState)||(Yt=!0),t.memoizedState=j,t.baseQueue===null&&(t.baseState=j),n.lastRenderedState=j}return[j,o]}function yl(){}function bl(e,t){var n=gt,o=ur(),v=t(),j=!pr(o.memoizedState,v);if(j&&(o.memoizedState=v,Yt=!0),o=o.queue,Ss(wl.bind(null,n,o,e),[e]),o.getSnapshot!==t||j||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,li(9,El.bind(null,n,o,v,t),void 0,null),Tt===null)throw Error(s(349));(on&30)!==0||vl(n,t,v)}return v}function vl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function El(e,t,n,o){t.value=n,t.getSnapshot=o,Sl(t)&&Rl(e)}function wl(e,t,n){return n(function(){Sl(t)&&Rl(e)})}function Sl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pr(e,n)}catch{return!0}}function Rl(e){var t=_r(e,1);t!==null&&yr(t,e,1,-1)}function kl(e){var t=wr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t.queue=e,e=e.dispatch=Vc.bind(null,gt,e),[t.memoizedState,e]}function li(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function jl(){return ur().memoizedState}function Zi(e,t,n,o){var v=wr();gt.flags|=e,v.memoizedState=li(1|t,n,void 0,o===void 0?null:o)}function Ji(e,t,n,o){var v=ur();o=o===void 0?null:o;var j=void 0;if(St!==null){var P=St.memoizedState;if(j=P.destroy,o!==null&&ys(o,P.deps)){v.memoizedState=li(t,n,j,o);return}}gt.flags|=e,v.memoizedState=li(1|t,n,j,o)}function Tl(e,t){return Zi(8390656,8,e,t)}function Ss(e,t){return Ji(2048,8,e,t)}function _l(e,t){return Ji(4,2,e,t)}function Cl(e,t){return Ji(4,4,e,t)}function Il(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Al(e,t,n){return n=n!=null?n.concat([e]):null,Ji(4,4,Il.bind(null,t,e),n)}function Rs(){}function Nl(e,t){var n=ur();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&ys(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function Pl(e,t){var n=ur();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&ys(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function Ml(e,t,n){return(on&21)===0?(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=n):(pr(n,t)||(n=uo(),gt.lanes|=n,ln|=n,e.baseState=!0),t)}function $c(e,t){var n=ot;ot=n!==0&&4>n?n:4,e(!0);var o=gs.transition;gs.transition={};try{e(!1),t()}finally{ot=n,gs.transition=o}}function Dl(){return ur().memoizedState}function Hc(e,t,n){var o=Kr(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Bl(e))Ll(t,n);else if(n=pl(e,t,n,o),n!==null){var v=Ht();yr(n,e,o,v),Fl(n,t,o)}}function Vc(e,t,n){var o=Kr(e),v={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bl(e))Ll(t,v);else{var j=e.alternate;if(e.lanes===0&&(j===null||j.lanes===0)&&(j=t.lastRenderedReducer,j!==null))try{var P=t.lastRenderedState,V=j(P,n);if(v.hasEagerState=!0,v.eagerState=V,pr(V,P)){var re=t.interleaved;re===null?(v.next=v,cs(t)):(v.next=re.next,re.next=v),t.interleaved=v;return}}catch{}finally{}n=pl(e,t,v,o),n!==null&&(v=Ht(),yr(n,e,o,v),Fl(n,t,o))}}function Bl(e){var t=e.alternate;return e===gt||t!==null&&t===gt}function Ll(e,t){ai=Qi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fl(e,t,n){if((n&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,ka(e,n)}}var ea={readContext:lr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Gc={readContext:lr,useCallback:function(e,t){return wr().memoizedState=[e,t===void 0?null:t],e},useContext:lr,useEffect:Tl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zi(4194308,4,Il.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zi(4,2,e,t)},useMemo:function(e,t){var n=wr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=wr();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Hc.bind(null,gt,e),[o.memoizedState,e]},useRef:function(e){var t=wr();return e={current:e},t.memoizedState=e},useState:kl,useDebugValue:Rs,useDeferredValue:function(e){return wr().memoizedState=e},useTransition:function(){var e=kl(!1),t=e[0];return e=$c.bind(null,e[1]),wr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=gt,v=wr();if(ht){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Tt===null)throw Error(s(349));(on&30)!==0||vl(o,t,n)}v.memoizedState=n;var j={value:n,getSnapshot:t};return v.queue=j,Tl(wl.bind(null,o,j,e),[e]),o.flags|=2048,li(9,El.bind(null,o,j,n,t),void 0,null),n},useId:function(){var e=wr(),t=Tt.identifierPrefix;if(ht){var n=Tr,o=jr;n=(o&~(1<<32-fr(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=si++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Wc++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xc={readContext:lr,useCallback:Nl,useContext:lr,useEffect:Ss,useImperativeHandle:Al,useInsertionEffect:_l,useLayoutEffect:Cl,useMemo:Pl,useReducer:Es,useRef:jl,useState:function(){return Es(oi)},useDebugValue:Rs,useDeferredValue:function(e){var t=ur();return Ml(t,St.memoizedState,e)},useTransition:function(){var e=Es(oi)[0],t=ur().memoizedState;return[e,t]},useMutableSource:yl,useSyncExternalStore:bl,useId:Dl,unstable_isNewReconciler:!1},Kc={readContext:lr,useCallback:Nl,useContext:lr,useEffect:Ss,useImperativeHandle:Al,useInsertionEffect:_l,useLayoutEffect:Cl,useMemo:Pl,useReducer:ws,useRef:jl,useState:function(){return ws(oi)},useDebugValue:Rs,useDeferredValue:function(e){var t=ur();return St===null?t.memoizedState=e:Ml(t,St.memoizedState,e)},useTransition:function(){var e=ws(oi)[0],t=ur().memoizedState;return[e,t]},useMutableSource:yl,useSyncExternalStore:bl,useId:Dl,unstable_isNewReconciler:!1};function hr(e,t){if(e&&e.defaultProps){t=L({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ks(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:L({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ta={isMounted:function(e){return(e=e._reactInternals)?ut(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Ht(),v=Kr(e),j=Cr(o,v);j.payload=t,n!=null&&(j.callback=n),t=Hr(e,j,v),t!==null&&(yr(t,e,v,o),Gi(t,e,v))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Ht(),v=Kr(e),j=Cr(o,v);j.tag=1,j.payload=t,n!=null&&(j.callback=n),t=Hr(e,j,v),t!==null&&(yr(t,e,v,o),Gi(t,e,v))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ht(),o=Kr(e),v=Cr(n,o);v.tag=2,t!=null&&(v.callback=t),t=Hr(e,v,o),t!==null&&(yr(t,e,o,n),Gi(t,e,o))}};function Ol(e,t,n,o,v,j,P){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,j,P):t.prototype&&t.prototype.isPureReactComponent?!Xn(n,o)||!Xn(v,j):!0}function zl(e,t,n){var o=!1,v=qr,j=t.contextType;return typeof j=="object"&&j!==null?j=lr(j):(v=Kt(t)?tn:Lt.current,o=t.contextTypes,j=(o=o!=null)?wn(e,v):qr),t=new t(n,j),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ta,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=v,e.__reactInternalMemoizedMaskedChildContext=j),t}function Ul(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&ta.enqueueReplaceState(t,t.state,null)}function js(e,t,n,o){var v=e.stateNode;v.props=n,v.state=e.memoizedState,v.refs={},ds(e);var j=t.contextType;typeof j=="object"&&j!==null?v.context=lr(j):(j=Kt(t)?tn:Lt.current,v.context=wn(e,j)),v.state=e.memoizedState,j=t.getDerivedStateFromProps,typeof j=="function"&&(ks(e,t,j,n),v.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(t=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),t!==v.state&&ta.enqueueReplaceState(v,v.state,null),Xi(e,n,v,o),v.state=e.memoizedState),typeof v.componentDidMount=="function"&&(e.flags|=4194308)}function In(e,t){try{var n="",o=t;do n+=ue(o),o=o.return;while(o);var v=n}catch(j){v=`
Error generating stack: `+j.message+`
`+j.stack}return{value:e,source:t,stack:v,digest:null}}function Ts(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _s(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yc=typeof WeakMap=="function"?WeakMap:Map;function ql(e,t,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){la||(la=!0,Ws=o),_s(e,t)},n}function Wl(e,t,n){n=Cr(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var v=t.value;n.payload=function(){return o(v)},n.callback=function(){_s(e,t)}}var j=e.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){_s(e,t),typeof o!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var P=t.stack;this.componentDidCatch(t.value,{componentStack:P!==null?P:""})}),n}function $l(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Yc;var v=new Set;o.set(t,v)}else v=o.get(t),v===void 0&&(v=new Set,o.set(t,v));v.has(n)||(v.add(n),e=cd.bind(null,e,t,n),t.then(e,e))}function Hl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vl(e,t,n,o,v){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cr(-1,1),t.tag=2,Hr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=v,e)}var Qc=_.ReactCurrentOwner,Yt=!1;function $t(e,t,n,o){t.child=e===null?fl(t,null,n,o):jn(t,e.child,n,o)}function Gl(e,t,n,o,v){n=n.render;var j=t.ref;return _n(t,v),o=bs(e,t,n,o,j,v),n=vs(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,Ir(e,t,v)):(ht&&n&&ts(t),t.flags|=1,$t(e,t,o,v),t.child)}function Xl(e,t,n,o,v){if(e===null){var j=n.type;return typeof j=="function"&&!Ys(j)&&j.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=j,Kl(e,t,j,o,v)):(e=ma(n.type,null,o,t,t.mode,v),e.ref=t.ref,e.return=t,t.child=e)}if(j=e.child,(e.lanes&v)===0){var P=j.memoizedProps;if(n=n.compare,n=n!==null?n:Xn,n(P,o)&&e.ref===t.ref)return Ir(e,t,v)}return t.flags|=1,e=Qr(j,o),e.ref=t.ref,e.return=t,t.child=e}function Kl(e,t,n,o,v){if(e!==null){var j=e.memoizedProps;if(Xn(j,o)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=o=j,(e.lanes&v)!==0)(e.flags&131072)!==0&&(Yt=!0);else return t.lanes=e.lanes,Ir(e,t,v)}return Cs(e,t,n,o,v)}function Yl(e,t,n){var o=t.pendingProps,v=o.children,j=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Nn,rr),rr|=n;else{if((n&1073741824)===0)return e=j!==null?j.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ct(Nn,rr),rr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=j!==null?j.baseLanes:n,ct(Nn,rr),rr|=o}else j!==null?(o=j.baseLanes|n,t.memoizedState=null):o=n,ct(Nn,rr),rr|=o;return $t(e,t,v,n),t.child}function Ql(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,o,v){var j=Kt(n)?tn:Lt.current;return j=wn(t,j),_n(t,v),n=bs(e,t,n,o,j,v),o=vs(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,Ir(e,t,v)):(ht&&o&&ts(t),t.flags|=1,$t(e,t,n,v),t.child)}function Zl(e,t,n,o,v){if(Kt(n)){var j=!0;Oi(t)}else j=!1;if(_n(t,v),t.stateNode===null)na(e,t),zl(t,n,o),js(t,n,o,v),o=!0;else if(e===null){var P=t.stateNode,V=t.memoizedProps;P.props=V;var re=P.context,ve=n.contextType;typeof ve=="object"&&ve!==null?ve=lr(ve):(ve=Kt(n)?tn:Lt.current,ve=wn(t,ve));var De=n.getDerivedStateFromProps,Be=typeof De=="function"||typeof P.getSnapshotBeforeUpdate=="function";Be||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==o||re!==ve)&&Ul(t,P,o,ve),$r=!1;var Pe=t.memoizedState;P.state=Pe,Xi(t,o,P,v),re=t.memoizedState,V!==o||Pe!==re||Xt.current||$r?(typeof De=="function"&&(ks(t,n,De,o),re=t.memoizedState),(V=$r||Ol(t,n,V,o,Pe,re,ve))?(Be||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(t.flags|=4194308)):(typeof P.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=re),P.props=o,P.state=re,P.context=ve,o=V):(typeof P.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{P=t.stateNode,ml(e,t),V=t.memoizedProps,ve=t.type===t.elementType?V:hr(t.type,V),P.props=ve,Be=t.pendingProps,Pe=P.context,re=n.contextType,typeof re=="object"&&re!==null?re=lr(re):(re=Kt(n)?tn:Lt.current,re=wn(t,re));var Oe=n.getDerivedStateFromProps;(De=typeof Oe=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==Be||Pe!==re)&&Ul(t,P,o,re),$r=!1,Pe=t.memoizedState,P.state=Pe,Xi(t,o,P,v);var qe=t.memoizedState;V!==Be||Pe!==qe||Xt.current||$r?(typeof Oe=="function"&&(ks(t,n,Oe,o),qe=t.memoizedState),(ve=$r||Ol(t,n,ve,o,Pe,qe,re)||!1)?(De||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(o,qe,re),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(o,qe,re)),typeof P.componentDidUpdate=="function"&&(t.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof P.componentDidUpdate!="function"||V===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=qe),P.props=o,P.state=qe,P.context=re,o=ve):(typeof P.componentDidUpdate!="function"||V===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=1024),o=!1)}return Is(e,t,n,o,j,v)}function Is(e,t,n,o,v,j){Ql(e,t);var P=(t.flags&128)!==0;if(!o&&!P)return v&&nl(t,n,!1),Ir(e,t,j);o=t.stateNode,Qc.current=t;var V=P&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&P?(t.child=jn(t,e.child,null,j),t.child=jn(t,null,V,j)):$t(e,t,V,j),t.memoizedState=o.state,v&&nl(t,n,!0),t.child}function Jl(e){var t=e.stateNode;t.pendingContext?tl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tl(e,t.context,!1),fs(e,t.containerInfo)}function eu(e,t,n,o,v){return kn(),as(v),t.flags|=256,$t(e,t,n,o),t.child}var As={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function tu(e,t,n){var o=t.pendingProps,v=xt.current,j=!1,P=(t.flags&128)!==0,V;if((V=P)||(V=e!==null&&e.memoizedState===null?!1:(v&2)!==0),V?(j=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(v|=1),ct(xt,v&1),e===null)return is(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(P=o.children,e=o.fallback,j?(o=t.mode,j=t.child,P={mode:"hidden",children:P},(o&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=P):j=ha(P,o,0,null),e=fn(e,o,n,null),j.return=t,e.return=t,j.sibling=e,t.child=j,t.child.memoizedState=Ns(n),t.memoizedState=As,e):Ps(t,P));if(v=e.memoizedState,v!==null&&(V=v.dehydrated,V!==null))return Zc(e,t,P,o,V,v,n);if(j){j=o.fallback,P=t.mode,v=e.child,V=v.sibling;var re={mode:"hidden",children:o.children};return(P&1)===0&&t.child!==v?(o=t.child,o.childLanes=0,o.pendingProps=re,t.deletions=null):(o=Qr(v,re),o.subtreeFlags=v.subtreeFlags&14680064),V!==null?j=Qr(V,j):(j=fn(j,P,n,null),j.flags|=2),j.return=t,o.return=t,o.sibling=j,t.child=o,o=j,j=t.child,P=e.child.memoizedState,P=P===null?Ns(n):{baseLanes:P.baseLanes|n,cachePool:null,transitions:P.transitions},j.memoizedState=P,j.childLanes=e.childLanes&~n,t.memoizedState=As,o}return j=e.child,e=j.sibling,o=Qr(j,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ps(e,t){return t=ha({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ra(e,t,n,o){return o!==null&&as(o),jn(t,e.child,null,n),e=Ps(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zc(e,t,n,o,v,j,P){if(n)return t.flags&256?(t.flags&=-257,o=Ts(Error(s(422))),ra(e,t,P,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(j=o.fallback,v=t.mode,o=ha({mode:"visible",children:o.children},v,0,null),j=fn(j,v,P,null),j.flags|=2,o.return=t,j.return=t,o.sibling=j,t.child=o,(t.mode&1)!==0&&jn(t,e.child,null,P),t.child.memoizedState=Ns(P),t.memoizedState=As,j);if((t.mode&1)===0)return ra(e,t,P,null);if(v.data==="$!"){if(o=v.nextSibling&&v.nextSibling.dataset,o)var V=o.dgst;return o=V,j=Error(s(419)),o=Ts(j,o,void 0),ra(e,t,P,o)}if(V=(P&e.childLanes)!==0,Yt||V){if(o=Tt,o!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(o.suspendedLanes|P))!==0?0:v,v!==0&&v!==j.retryLane&&(j.retryLane=v,_r(e,v),yr(o,e,v,-1))}return Ks(),o=Ts(Error(s(421))),ra(e,t,P,o)}return v.data==="$?"?(t.flags|=128,t.child=e.child,t=dd.bind(null,e),v._reactRetry=t,null):(e=j.treeContext,tr=zr(v.nextSibling),er=t,ht=!0,mr=null,e!==null&&(sr[or++]=jr,sr[or++]=Tr,sr[or++]=rn,jr=e.id,Tr=e.overflow,rn=t),t=Ps(t,o.children),t.flags|=4096,t)}function ru(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),us(e.return,t,n)}function Ms(e,t,n,o,v){var j=e.memoizedState;j===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:v}:(j.isBackwards=t,j.rendering=null,j.renderingStartTime=0,j.last=o,j.tail=n,j.tailMode=v)}function nu(e,t,n){var o=t.pendingProps,v=o.revealOrder,j=o.tail;if($t(e,t,o.children,n),o=xt.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ru(e,n,t);else if(e.tag===19)ru(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(ct(xt,o),(t.mode&1)===0)t.memoizedState=null;else switch(v){case"forwards":for(n=t.child,v=null;n!==null;)e=n.alternate,e!==null&&Ki(e)===null&&(v=n),n=n.sibling;n=v,n===null?(v=t.child,t.child=null):(v=n.sibling,n.sibling=null),Ms(t,!1,v,n,j);break;case"backwards":for(n=null,v=t.child,t.child=null;v!==null;){if(e=v.alternate,e!==null&&Ki(e)===null){t.child=v;break}e=v.sibling,v.sibling=n,n=v,v=e}Ms(t,!0,n,null,j);break;case"together":Ms(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function na(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ir(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ln|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Qr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jc(e,t,n){switch(t.tag){case 3:Jl(t),kn();break;case 5:gl(t);break;case 1:Kt(t.type)&&Oi(t);break;case 4:fs(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,v=t.memoizedProps.value;ct(Hi,o._currentValue),o._currentValue=v;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(ct(xt,xt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?tu(e,t,n):(ct(xt,xt.current&1),e=Ir(e,t,n),e!==null?e.sibling:null);ct(xt,xt.current&1);break;case 19:if(o=(n&t.childLanes)!==0,(e.flags&128)!==0){if(o)return nu(e,t,n);t.flags|=128}if(v=t.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ct(xt,xt.current),o)break;return null;case 22:case 23:return t.lanes=0,Yl(e,t,n)}return Ir(e,t,n)}var iu,Ds,au,su;iu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},au=function(e,t,n,o){var v=e.memoizedProps;if(v!==o){e=t.stateNode,sn(Er.current);var j=null;switch(n){case"input":v=Q(e,v),o=Q(e,o),j=[];break;case"select":v=L({},v,{value:void 0}),o=L({},o,{value:void 0}),j=[];break;case"textarea":v=ye(e,v),o=ye(e,o),j=[];break;default:typeof v.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bi)}et(n,o);var P;n=null;for(ve in v)if(!o.hasOwnProperty(ve)&&v.hasOwnProperty(ve)&&v[ve]!=null)if(ve==="style"){var V=v[ve];for(P in V)V.hasOwnProperty(P)&&(n||(n={}),n[P]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(u.hasOwnProperty(ve)?j||(j=[]):(j=j||[]).push(ve,null));for(ve in o){var re=o[ve];if(V=v?.[ve],o.hasOwnProperty(ve)&&re!==V&&(re!=null||V!=null))if(ve==="style")if(V){for(P in V)!V.hasOwnProperty(P)||re&&re.hasOwnProperty(P)||(n||(n={}),n[P]="");for(P in re)re.hasOwnProperty(P)&&V[P]!==re[P]&&(n||(n={}),n[P]=re[P])}else n||(j||(j=[]),j.push(ve,n)),n=re;else ve==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,V=V?V.__html:void 0,re!=null&&V!==re&&(j=j||[]).push(ve,re)):ve==="children"?typeof re!="string"&&typeof re!="number"||(j=j||[]).push(ve,""+re):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(u.hasOwnProperty(ve)?(re!=null&&ve==="onScroll"&&dt("scroll",e),j||V===re||(j=[])):(j=j||[]).push(ve,re))}n&&(j=j||[]).push("style",n);var ve=j;(t.updateQueue=ve)&&(t.flags|=4)}},su=function(e,t,n,o){n!==o&&(t.flags|=4)};function ui(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var v=e.child;v!==null;)n|=v.lanes|v.childLanes,o|=v.subtreeFlags&14680064,o|=v.flags&14680064,v.return=e,v=v.sibling;else for(v=e.child;v!==null;)n|=v.lanes|v.childLanes,o|=v.subtreeFlags,o|=v.flags,v.return=e,v=v.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function ed(e,t,n){var o=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Kt(t.type)&&Fi(),Ot(t),null;case 3:return o=t.stateNode,Cn(),ft(Xt),ft(Lt),xs(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Wi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mr!==null&&(Vs(mr),mr=null))),Ds(e,t),Ot(t),null;case 5:ps(t);var v=sn(ii.current);if(n=t.type,e!==null&&t.stateNode!=null)au(e,t,n,o,v),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return Ot(t),null}if(e=sn(Er.current),Wi(t)){o=t.stateNode,n=t.type;var j=t.memoizedProps;switch(o[vr]=t,o[Jn]=j,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",o),dt("close",o);break;case"iframe":case"object":case"embed":dt("load",o);break;case"video":case"audio":for(v=0;v<Yn.length;v++)dt(Yn[v],o);break;case"source":dt("error",o);break;case"img":case"image":case"link":dt("error",o),dt("load",o);break;case"details":dt("toggle",o);break;case"input":ce(o,j),dt("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!j.multiple},dt("invalid",o);break;case"textarea":Ie(o,j),dt("invalid",o)}et(n,j),v=null;for(var P in j)if(j.hasOwnProperty(P)){var V=j[P];P==="children"?typeof V=="string"?o.textContent!==V&&(j.suppressHydrationWarning!==!0&&Di(o.textContent,V,e),v=["children",V]):typeof V=="number"&&o.textContent!==""+V&&(j.suppressHydrationWarning!==!0&&Di(o.textContent,V,e),v=["children",""+V]):u.hasOwnProperty(P)&&V!=null&&P==="onScroll"&&dt("scroll",o)}switch(n){case"input":_e(o),Ce(o,j,!0);break;case"textarea":_e(o),Ke(o);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(o.onclick=Bi)}o=v,t.updateQueue=o,o!==null&&(t.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Je(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=P.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=P.createElement(n,{is:o.is}):(e=P.createElement(n),n==="select"&&(P=e,o.multiple?P.multiple=!0:o.size&&(P.size=o.size))):e=P.createElementNS(e,n),e[vr]=t,e[Jn]=o,iu(e,t,!1,!1),t.stateNode=e;e:{switch(P=rt(n,o),n){case"dialog":dt("cancel",e),dt("close",e),v=o;break;case"iframe":case"object":case"embed":dt("load",e),v=o;break;case"video":case"audio":for(v=0;v<Yn.length;v++)dt(Yn[v],e);v=o;break;case"source":dt("error",e),v=o;break;case"img":case"image":case"link":dt("error",e),dt("load",e),v=o;break;case"details":dt("toggle",e),v=o;break;case"input":ce(e,o),v=Q(e,o),dt("invalid",e);break;case"option":v=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},v=L({},o,{value:void 0}),dt("invalid",e);break;case"textarea":Ie(e,o),v=ye(e,o),dt("invalid",e);break;default:v=o}et(n,v),V=v;for(j in V)if(V.hasOwnProperty(j)){var re=V[j];j==="style"?Ve(e,re):j==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&C(e,re)):j==="children"?typeof re=="string"?(n!=="textarea"||re!=="")&&U(e,re):typeof re=="number"&&U(e,""+re):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(u.hasOwnProperty(j)?re!=null&&j==="onScroll"&&dt("scroll",e):re!=null&&T(e,j,re,P))}switch(n){case"input":_e(e),Ce(e,o,!1);break;case"textarea":_e(e),Ke(e);break;case"option":o.value!=null&&e.setAttribute("value",""+se(o.value));break;case"select":e.multiple=!!o.multiple,j=o.value,j!=null?Te(e,!!o.multiple,j,!1):o.defaultValue!=null&&Te(e,!!o.multiple,o.defaultValue,!0);break;default:typeof v.onClick=="function"&&(e.onclick=Bi)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ot(t),null;case 6:if(e&&t.stateNode!=null)su(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(n=sn(ii.current),sn(Er.current),Wi(t)){if(o=t.stateNode,n=t.memoizedProps,o[vr]=t,(j=o.nodeValue!==n)&&(e=er,e!==null))switch(e.tag){case 3:Di(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Di(o.nodeValue,n,(e.mode&1)!==0)}j&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[vr]=t,t.stateNode=o}return Ot(t),null;case 13:if(ft(xt),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ht&&tr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ul(),kn(),t.flags|=98560,j=!1;else if(j=Wi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!j)throw Error(s(318));if(j=t.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(s(317));j[vr]=t}else kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ot(t),j=!1}else mr!==null&&(Vs(mr),mr=null),j=!0;if(!j)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(xt.current&1)!==0?Rt===0&&(Rt=3):Ks())),t.updateQueue!==null&&(t.flags|=4),Ot(t),null);case 4:return Cn(),Ds(e,t),e===null&&Qn(t.stateNode.containerInfo),Ot(t),null;case 10:return ls(t.type._context),Ot(t),null;case 17:return Kt(t.type)&&Fi(),Ot(t),null;case 19:if(ft(xt),j=t.memoizedState,j===null)return Ot(t),null;if(o=(t.flags&128)!==0,P=j.rendering,P===null)if(o)ui(j,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(P=Ki(e),P!==null){for(t.flags|=128,ui(j,!1),o=P.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)j=n,e=o,j.flags&=14680066,P=j.alternate,P===null?(j.childLanes=0,j.lanes=e,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=P.childLanes,j.lanes=P.lanes,j.child=P.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=P.memoizedProps,j.memoizedState=P.memoizedState,j.updateQueue=P.updateQueue,j.type=P.type,e=P.dependencies,j.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ct(xt,xt.current&1|2),t.child}e=e.sibling}j.tail!==null&&mt()>Pn&&(t.flags|=128,o=!0,ui(j,!1),t.lanes=4194304)}else{if(!o)if(e=Ki(P),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ui(j,!0),j.tail===null&&j.tailMode==="hidden"&&!P.alternate&&!ht)return Ot(t),null}else 2*mt()-j.renderingStartTime>Pn&&n!==1073741824&&(t.flags|=128,o=!0,ui(j,!1),t.lanes=4194304);j.isBackwards?(P.sibling=t.child,t.child=P):(n=j.last,n!==null?n.sibling=P:t.child=P,j.last=P)}return j.tail!==null?(t=j.tail,j.rendering=t,j.tail=t.sibling,j.renderingStartTime=mt(),t.sibling=null,n=xt.current,ct(xt,o?n&1|2:n&1),t):(Ot(t),null);case 22:case 23:return Xs(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(rr&1073741824)!==0&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function td(e,t){switch(rs(t),t.tag){case 1:return Kt(t.type)&&Fi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),ft(Xt),ft(Lt),xs(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ps(t),null;case 13:if(ft(xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(xt),null;case 4:return Cn(),null;case 10:return ls(t.type._context),null;case 22:case 23:return Xs(),null;case 24:return null;default:return null}}var ia=!1,zt=!1,rd=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function An(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){yt(e,t,o)}else n.current=null}function Bs(e,t,n){try{n()}catch(o){yt(e,t,o)}}var ou=!1;function nd(e,t){if(Ga=Ri,e=Oo(),Oa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var v=o.anchorOffset,j=o.focusNode;o=o.focusOffset;try{n.nodeType,j.nodeType}catch{n=null;break e}var P=0,V=-1,re=-1,ve=0,De=0,Be=e,Pe=null;t:for(;;){for(var Oe;Be!==n||v!==0&&Be.nodeType!==3||(V=P+v),Be!==j||o!==0&&Be.nodeType!==3||(re=P+o),Be.nodeType===3&&(P+=Be.nodeValue.length),(Oe=Be.firstChild)!==null;)Pe=Be,Be=Oe;for(;;){if(Be===e)break t;if(Pe===n&&++ve===v&&(V=P),Pe===j&&++De===o&&(re=P),(Oe=Be.nextSibling)!==null)break;Be=Pe,Pe=Be.parentNode}Be=Oe}n=V===-1||re===-1?null:{start:V,end:re}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xa={focusedElem:e,selectionRange:n},Ri=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var qe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var We=qe.memoizedProps,vt=qe.memoizedState,de=t.stateNode,ie=de.getSnapshotBeforeUpdate(t.elementType===t.type?We:hr(t.type,We),vt);de.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var he=t.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Le){yt(t,t.return,Le)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return qe=ou,ou=!1,qe}function ci(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var v=o=o.next;do{if((v.tag&e)===e){var j=v.destroy;v.destroy=void 0,j!==void 0&&Bs(t,n,j)}v=v.next}while(v!==o)}}function aa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Ls(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lu(e){var t=e.alternate;t!==null&&(e.alternate=null,lu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vr],delete t[Jn],delete t[Za],delete t[Oc],delete t[zc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uu(e){return e.tag===5||e.tag===3||e.tag===4}function cu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fs(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bi));else if(o!==4&&(e=e.child,e!==null))for(Fs(e,t,n),e=e.sibling;e!==null;)Fs(e,t,n),e=e.sibling}function Os(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Os(e,t,n),e=e.sibling;e!==null;)Os(e,t,n),e=e.sibling}var Nt=null,xr=!1;function Vr(e,t,n){for(n=n.child;n!==null;)du(e,t,n),n=n.sibling}function du(e,t,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(yi,n)}catch{}switch(n.tag){case 5:zt||An(n,t);case 6:var o=Nt,v=xr;Nt=null,Vr(e,t,n),Nt=o,xr=v,Nt!==null&&(xr?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(xr?(e=Nt,n=n.stateNode,e.nodeType===8?Qa(e.parentNode,n):e.nodeType===1&&Qa(e,n),qn(e)):Qa(Nt,n.stateNode));break;case 4:o=Nt,v=xr,Nt=n.stateNode.containerInfo,xr=!0,Vr(e,t,n),Nt=o,xr=v;break;case 0:case 11:case 14:case 15:if(!zt&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){v=o=o.next;do{var j=v,P=j.destroy;j=j.tag,P!==void 0&&((j&2)!==0||(j&4)!==0)&&Bs(n,t,P),v=v.next}while(v!==o)}Vr(e,t,n);break;case 1:if(!zt&&(An(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(V){yt(n,t,V)}Vr(e,t,n);break;case 21:Vr(e,t,n);break;case 22:n.mode&1?(zt=(o=zt)||n.memoizedState!==null,Vr(e,t,n),zt=o):Vr(e,t,n);break;default:Vr(e,t,n)}}function fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rd),t.forEach(function(o){var v=fd.bind(null,e,o);n.has(o)||(n.add(o),o.then(v,v))})}}function gr(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var v=n[o];try{var j=e,P=t,V=P;e:for(;V!==null;){switch(V.tag){case 5:Nt=V.stateNode,xr=!1;break e;case 3:Nt=V.stateNode.containerInfo,xr=!0;break e;case 4:Nt=V.stateNode.containerInfo,xr=!0;break e}V=V.return}if(Nt===null)throw Error(s(160));du(j,P,v),Nt=null,xr=!1;var re=v.alternate;re!==null&&(re.return=null),v.return=null}catch(ve){yt(v,t,ve)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pu(t,e),t=t.sibling}function pu(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gr(t,e),Sr(e),o&4){try{ci(3,e,e.return),aa(3,e)}catch(We){yt(e,e.return,We)}try{ci(5,e,e.return)}catch(We){yt(e,e.return,We)}}break;case 1:gr(t,e),Sr(e),o&512&&n!==null&&An(n,n.return);break;case 5:if(gr(t,e),Sr(e),o&512&&n!==null&&An(n,n.return),e.flags&32){var v=e.stateNode;try{U(v,"")}catch(We){yt(e,e.return,We)}}if(o&4&&(v=e.stateNode,v!=null)){var j=e.memoizedProps,P=n!==null?n.memoizedProps:j,V=e.type,re=e.updateQueue;if(e.updateQueue=null,re!==null)try{V==="input"&&j.type==="radio"&&j.name!=null&&Ee(v,j),rt(V,P);var ve=rt(V,j);for(P=0;P<re.length;P+=2){var De=re[P],Be=re[P+1];De==="style"?Ve(v,Be):De==="dangerouslySetInnerHTML"?C(v,Be):De==="children"?U(v,Be):T(v,De,Be,ve)}switch(V){case"input":je(v,j);break;case"textarea":He(v,j);break;case"select":var Pe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!j.multiple;var Oe=j.value;Oe!=null?Te(v,!!j.multiple,Oe,!1):Pe!==!!j.multiple&&(j.defaultValue!=null?Te(v,!!j.multiple,j.defaultValue,!0):Te(v,!!j.multiple,j.multiple?[]:"",!1))}v[Jn]=j}catch(We){yt(e,e.return,We)}}break;case 6:if(gr(t,e),Sr(e),o&4){if(e.stateNode===null)throw Error(s(162));v=e.stateNode,j=e.memoizedProps;try{v.nodeValue=j}catch(We){yt(e,e.return,We)}}break;case 3:if(gr(t,e),Sr(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{qn(t.containerInfo)}catch(We){yt(e,e.return,We)}break;case 4:gr(t,e),Sr(e);break;case 13:gr(t,e),Sr(e),v=e.child,v.flags&8192&&(j=v.memoizedState!==null,v.stateNode.isHidden=j,!j||v.alternate!==null&&v.alternate.memoizedState!==null||(qs=mt())),o&4&&fu(e);break;case 22:if(De=n!==null&&n.memoizedState!==null,e.mode&1?(zt=(ve=zt)||De,gr(t,e),zt=ve):gr(t,e),Sr(e),o&8192){if(ve=e.memoizedState!==null,(e.stateNode.isHidden=ve)&&!De&&(e.mode&1)!==0)for(Ue=e,De=e.child;De!==null;){for(Be=Ue=De;Ue!==null;){switch(Pe=Ue,Oe=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:ci(4,Pe,Pe.return);break;case 1:An(Pe,Pe.return);var qe=Pe.stateNode;if(typeof qe.componentWillUnmount=="function"){o=Pe,n=Pe.return;try{t=o,qe.props=t.memoizedProps,qe.state=t.memoizedState,qe.componentWillUnmount()}catch(We){yt(o,n,We)}}break;case 5:An(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){xu(Be);continue}}Oe!==null?(Oe.return=Pe,Ue=Oe):xu(Be)}De=De.sibling}e:for(De=null,Be=e;;){if(Be.tag===5){if(De===null){De=Be;try{v=Be.stateNode,ve?(j=v.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(V=Be.stateNode,re=Be.memoizedProps.style,P=re!=null&&re.hasOwnProperty("display")?re.display:null,V.style.display=ke("display",P))}catch(We){yt(e,e.return,We)}}}else if(Be.tag===6){if(De===null)try{Be.stateNode.nodeValue=ve?"":Be.memoizedProps}catch(We){yt(e,e.return,We)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===e)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===e)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===e)break e;De===Be&&(De=null),Be=Be.return}De===Be&&(De=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:gr(t,e),Sr(e),o&4&&fu(e);break;case 21:break;default:gr(t,e),Sr(e)}}function Sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(uu(n)){var o=n;break e}n=n.return}throw Error(s(160))}switch(o.tag){case 5:var v=o.stateNode;o.flags&32&&(U(v,""),o.flags&=-33);var j=cu(e);Os(e,j,v);break;case 3:case 4:var P=o.stateNode.containerInfo,V=cu(e);Fs(e,V,P);break;default:throw Error(s(161))}}catch(re){yt(e,e.return,re)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function id(e,t,n){Ue=e,mu(e)}function mu(e,t,n){for(var o=(e.mode&1)!==0;Ue!==null;){var v=Ue,j=v.child;if(v.tag===22&&o){var P=v.memoizedState!==null||ia;if(!P){var V=v.alternate,re=V!==null&&V.memoizedState!==null||zt;V=ia;var ve=zt;if(ia=P,(zt=re)&&!ve)for(Ue=v;Ue!==null;)P=Ue,re=P.child,P.tag===22&&P.memoizedState!==null?gu(v):re!==null?(re.return=P,Ue=re):gu(v);for(;j!==null;)Ue=j,mu(j),j=j.sibling;Ue=v,ia=V,zt=ve}hu(e)}else(v.subtreeFlags&8772)!==0&&j!==null?(j.return=v,Ue=j):hu(e)}}function hu(e){for(;Ue!==null;){var t=Ue;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:zt||aa(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!zt)if(n===null)o.componentDidMount();else{var v=t.elementType===t.type?n.memoizedProps:hr(t.type,n.memoizedProps);o.componentDidUpdate(v,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var j=t.updateQueue;j!==null&&xl(t,j,o);break;case 3:var P=t.updateQueue;if(P!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xl(t,P,n)}break;case 5:var V=t.stateNode;if(n===null&&t.flags&4){n=V;var re=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&n.focus();break;case"img":re.src&&(n.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var ve=t.alternate;if(ve!==null){var De=ve.memoizedState;if(De!==null){var Be=De.dehydrated;Be!==null&&qn(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}zt||t.flags&512&&Ls(t)}catch(Pe){yt(t,t.return,Pe)}}if(t===e){Ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function xu(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function gu(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{aa(4,t)}catch(re){yt(t,n,re)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var v=t.return;try{o.componentDidMount()}catch(re){yt(t,v,re)}}var j=t.return;try{Ls(t)}catch(re){yt(t,j,re)}break;case 5:var P=t.return;try{Ls(t)}catch(re){yt(t,P,re)}}}catch(re){yt(t,t.return,re)}if(t===e){Ue=null;break}var V=t.sibling;if(V!==null){V.return=t.return,Ue=V;break}Ue=t.return}}var ad=Math.ceil,sa=_.ReactCurrentDispatcher,zs=_.ReactCurrentOwner,cr=_.ReactCurrentBatchConfig,it=0,Tt=null,Et=null,Pt=0,rr=0,Nn=Ur(0),Rt=0,di=null,ln=0,oa=0,Us=0,fi=null,Qt=null,qs=0,Pn=1/0,Ar=null,la=!1,Ws=null,Gr=null,ua=!1,Xr=null,ca=0,pi=0,$s=null,da=-1,fa=0;function Ht(){return(it&6)!==0?mt():da!==-1?da:da=mt()}function Kr(e){return(e.mode&1)===0?1:(it&2)!==0&&Pt!==0?Pt&-Pt:qc.transition!==null?(fa===0&&(fa=uo()),fa):(e=ot,e!==0||(e=window.event,e=e===void 0?16:bo(e.type)),e)}function yr(e,t,n,o){if(50<pi)throw pi=0,$s=null,Error(s(185));Ln(e,n,o),((it&2)===0||e!==Tt)&&(e===Tt&&((it&2)===0&&(oa|=n),Rt===4&&Yr(e,Pt)),Zt(e,o),n===1&&it===0&&(t.mode&1)===0&&(Pn=mt()+500,zi&&Wr()))}function Zt(e,t){var n=e.callbackNode;qu(e,t);var o=Ei(e,e===Tt?Pt:0);if(o===0)n!==null&&At(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&At(n),t===1)e.tag===0?Uc(bu.bind(null,e)):il(bu.bind(null,e)),Lc(function(){(it&6)===0&&Wr()}),n=null;else{switch(co(o)){case 1:n=wa;break;case 4:n=oo;break;case 16:n=gi;break;case 536870912:n=lo;break;default:n=gi}n=Tu(n,yu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yu(e,t){if(da=-1,fa=0,(it&6)!==0)throw Error(s(327));var n=e.callbackNode;if(Mn()&&e.callbackNode!==n)return null;var o=Ei(e,e===Tt?Pt:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=pa(e,o);else{t=o;var v=it;it|=2;var j=Eu();(Tt!==e||Pt!==t)&&(Ar=null,Pn=mt()+500,cn(e,t));do try{ld();break}catch(V){vu(e,V)}while(!0);os(),sa.current=j,it=v,Et!==null?t=0:(Tt=null,Pt=0,t=Rt)}if(t!==0){if(t===2&&(v=Sa(e),v!==0&&(o=v,t=Hs(e,v))),t===1)throw n=di,cn(e,0),Yr(e,o),Zt(e,mt()),n;if(t===6)Yr(e,o);else{if(v=e.current.alternate,(o&30)===0&&!sd(v)&&(t=pa(e,o),t===2&&(j=Sa(e),j!==0&&(o=j,t=Hs(e,j))),t===1))throw n=di,cn(e,0),Yr(e,o),Zt(e,mt()),n;switch(e.finishedWork=v,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:dn(e,Qt,Ar);break;case 3:if(Yr(e,o),(o&130023424)===o&&(t=qs+500-mt(),10<t)){if(Ei(e,0)!==0)break;if(v=e.suspendedLanes,(v&o)!==o){Ht(),e.pingedLanes|=e.suspendedLanes&v;break}e.timeoutHandle=Ya(dn.bind(null,e,Qt,Ar),t);break}dn(e,Qt,Ar);break;case 4:if(Yr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,v=-1;0<o;){var P=31-fr(o);j=1<<P,P=t[P],P>v&&(v=P),o&=~j}if(o=v,o=mt()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*ad(o/1960))-o,10<o){e.timeoutHandle=Ya(dn.bind(null,e,Qt,Ar),o);break}dn(e,Qt,Ar);break;case 5:dn(e,Qt,Ar);break;default:throw Error(s(329))}}}return Zt(e,mt()),e.callbackNode===n?yu.bind(null,e):null}function Hs(e,t){var n=fi;return e.current.memoizedState.isDehydrated&&(cn(e,t).flags|=256),e=pa(e,t),e!==2&&(t=Qt,Qt=n,t!==null&&Vs(t)),e}function Vs(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function sd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var v=n[o],j=v.getSnapshot;v=v.value;try{if(!pr(j(),v))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t){for(t&=~Us,t&=~oa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fr(t),o=1<<n;e[n]=-1,t&=~o}}function bu(e){if((it&6)!==0)throw Error(s(327));Mn();var t=Ei(e,0);if((t&1)===0)return Zt(e,mt()),null;var n=pa(e,t);if(e.tag!==0&&n===2){var o=Sa(e);o!==0&&(t=o,n=Hs(e,o))}if(n===1)throw n=di,cn(e,0),Yr(e,t),Zt(e,mt()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dn(e,Qt,Ar),Zt(e,mt()),null}function Gs(e,t){var n=it;it|=1;try{return e(t)}finally{it=n,it===0&&(Pn=mt()+500,zi&&Wr())}}function un(e){Xr!==null&&Xr.tag===0&&(it&6)===0&&Mn();var t=it;it|=1;var n=cr.transition,o=ot;try{if(cr.transition=null,ot=1,e)return e()}finally{ot=o,cr.transition=n,it=t,(it&6)===0&&Wr()}}function Xs(){rr=Nn.current,ft(Nn)}function cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Bc(n)),Et!==null)for(n=Et.return;n!==null;){var o=n;switch(rs(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Fi();break;case 3:Cn(),ft(Xt),ft(Lt),xs();break;case 5:ps(o);break;case 4:Cn();break;case 13:ft(xt);break;case 19:ft(xt);break;case 10:ls(o.type._context);break;case 22:case 23:Xs()}n=n.return}if(Tt=e,Et=e=Qr(e.current,null),Pt=rr=t,Rt=0,di=null,Us=oa=ln=0,Qt=fi=null,an!==null){for(t=0;t<an.length;t++)if(n=an[t],o=n.interleaved,o!==null){n.interleaved=null;var v=o.next,j=n.pending;if(j!==null){var P=j.next;j.next=v,o.next=P}n.pending=o}an=null}return e}function vu(e,t){do{var n=Et;try{if(os(),Yi.current=ea,Qi){for(var o=gt.memoizedState;o!==null;){var v=o.queue;v!==null&&(v.pending=null),o=o.next}Qi=!1}if(on=0,jt=St=gt=null,ai=!1,si=0,zs.current=null,n===null||n.return===null){Rt=1,di=t,Et=null;break}e:{var j=e,P=n.return,V=n,re=t;if(t=Pt,V.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var ve=re,De=V,Be=De.tag;if((De.mode&1)===0&&(Be===0||Be===11||Be===15)){var Pe=De.alternate;Pe?(De.updateQueue=Pe.updateQueue,De.memoizedState=Pe.memoizedState,De.lanes=Pe.lanes):(De.updateQueue=null,De.memoizedState=null)}var Oe=Hl(P);if(Oe!==null){Oe.flags&=-257,Vl(Oe,P,V,j,t),Oe.mode&1&&$l(j,ve,t),t=Oe,re=ve;var qe=t.updateQueue;if(qe===null){var We=new Set;We.add(re),t.updateQueue=We}else qe.add(re);break e}else{if((t&1)===0){$l(j,ve,t),Ks();break e}re=Error(s(426))}}else if(ht&&V.mode&1){var vt=Hl(P);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),Vl(vt,P,V,j,t),as(In(re,V));break e}}j=re=In(re,V),Rt!==4&&(Rt=2),fi===null?fi=[j]:fi.push(j),j=P;do{switch(j.tag){case 3:j.flags|=65536,t&=-t,j.lanes|=t;var de=ql(j,re,t);hl(j,de);break e;case 1:V=re;var ie=j.type,he=j.stateNode;if((j.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Gr===null||!Gr.has(he)))){j.flags|=65536,t&=-t,j.lanes|=t;var Le=Wl(j,V,t);hl(j,Le);break e}}j=j.return}while(j!==null)}Su(n)}catch($e){t=$e,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function Eu(){var e=sa.current;return sa.current=ea,e===null?ea:e}function Ks(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Tt===null||(ln&268435455)===0&&(oa&268435455)===0||Yr(Tt,Pt)}function pa(e,t){var n=it;it|=2;var o=Eu();(Tt!==e||Pt!==t)&&(Ar=null,cn(e,t));do try{od();break}catch(v){vu(e,v)}while(!0);if(os(),it=n,sa.current=o,Et!==null)throw Error(s(261));return Tt=null,Pt=0,Rt}function od(){for(;Et!==null;)wu(Et)}function ld(){for(;Et!==null&&!Gt();)wu(Et)}function wu(e){var t=ju(e.alternate,e,rr);e.memoizedProps=e.pendingProps,t===null?Su(e):Et=t,zs.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=ed(n,t,rr),n!==null){Et=n;return}}else{if(n=td(n,t),n!==null){n.flags&=32767,Et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,Et=null;return}}if(t=t.sibling,t!==null){Et=t;return}Et=t=e}while(t!==null);Rt===0&&(Rt=5)}function dn(e,t,n){var o=ot,v=cr.transition;try{cr.transition=null,ot=1,ud(e,t,n,o)}finally{cr.transition=v,ot=o}return null}function ud(e,t,n,o){do Mn();while(Xr!==null);if((it&6)!==0)throw Error(s(327));n=e.finishedWork;var v=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var j=n.lanes|n.childLanes;if(Wu(e,j),e===Tt&&(Et=Tt=null,Pt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ua||(ua=!0,Tu(gi,function(){return Mn(),null})),j=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||j){j=cr.transition,cr.transition=null;var P=ot;ot=1;var V=it;it|=4,zs.current=null,nd(e,n),pu(n,e),Cc(Xa),Ri=!!Ga,Xa=Ga=null,e.current=n,id(n),ar(),it=V,ot=P,cr.transition=j}else e.current=n;if(ua&&(ua=!1,Xr=e,ca=v),j=e.pendingLanes,j===0&&(Gr=null),Lu(n.stateNode),Zt(e,mt()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)v=t[n],o(v.value,{componentStack:v.stack,digest:v.digest});if(la)throw la=!1,e=Ws,Ws=null,e;return(ca&1)!==0&&e.tag!==0&&Mn(),j=e.pendingLanes,(j&1)!==0?e===$s?pi++:(pi=0,$s=e):pi=0,Wr(),null}function Mn(){if(Xr!==null){var e=co(ca),t=cr.transition,n=ot;try{if(cr.transition=null,ot=16>e?16:e,Xr===null)var o=!1;else{if(e=Xr,Xr=null,ca=0,(it&6)!==0)throw Error(s(331));var v=it;for(it|=4,Ue=e.current;Ue!==null;){var j=Ue,P=j.child;if((Ue.flags&16)!==0){var V=j.deletions;if(V!==null){for(var re=0;re<V.length;re++){var ve=V[re];for(Ue=ve;Ue!==null;){var De=Ue;switch(De.tag){case 0:case 11:case 15:ci(8,De,j)}var Be=De.child;if(Be!==null)Be.return=De,Ue=Be;else for(;Ue!==null;){De=Ue;var Pe=De.sibling,Oe=De.return;if(lu(De),De===ve){Ue=null;break}if(Pe!==null){Pe.return=Oe,Ue=Pe;break}Ue=Oe}}}var qe=j.alternate;if(qe!==null){var We=qe.child;if(We!==null){qe.child=null;do{var vt=We.sibling;We.sibling=null,We=vt}while(We!==null)}}Ue=j}}if((j.subtreeFlags&2064)!==0&&P!==null)P.return=j,Ue=P;else e:for(;Ue!==null;){if(j=Ue,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:ci(9,j,j.return)}var de=j.sibling;if(de!==null){de.return=j.return,Ue=de;break e}Ue=j.return}}var ie=e.current;for(Ue=ie;Ue!==null;){P=Ue;var he=P.child;if((P.subtreeFlags&2064)!==0&&he!==null)he.return=P,Ue=he;else e:for(P=ie;Ue!==null;){if(V=Ue,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:aa(9,V)}}catch($e){yt(V,V.return,$e)}if(V===P){Ue=null;break e}var Le=V.sibling;if(Le!==null){Le.return=V.return,Ue=Le;break e}Ue=V.return}}if(it=v,Wr(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(yi,e)}catch{}o=!0}return o}finally{ot=n,cr.transition=t}}return!1}function Ru(e,t,n){t=In(n,t),t=ql(e,t,1),e=Hr(e,t,1),t=Ht(),e!==null&&(Ln(e,1,t),Zt(e,t))}function yt(e,t,n){if(e.tag===3)Ru(e,e,n);else for(;t!==null;){if(t.tag===3){Ru(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Gr===null||!Gr.has(o))){e=In(n,e),e=Wl(t,e,1),t=Hr(t,e,1),e=Ht(),t!==null&&(Ln(t,1,e),Zt(t,e));break}}t=t.return}}function cd(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&n,Tt===e&&(Pt&n)===n&&(Rt===4||Rt===3&&(Pt&130023424)===Pt&&500>mt()-qs?cn(e,0):Us|=n),Zt(e,t)}function ku(e,t){t===0&&((e.mode&1)===0?t=1:(t=vi,vi<<=1,(vi&130023424)===0&&(vi=4194304)));var n=Ht();e=_r(e,t),e!==null&&(Ln(e,t,n),Zt(e,n))}function dd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ku(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,v=e.memoizedState;v!==null&&(n=v.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),ku(e,n)}var ju;ju=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Yt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Yt=!1,Jc(e,t,n);Yt=(e.flags&131072)!==0}else Yt=!1,ht&&(t.flags&1048576)!==0&&al(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;na(e,t),e=t.pendingProps;var v=wn(t,Lt.current);_n(t,n),v=bs(null,t,o,e,v,n);var j=vs();return t.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kt(o)?(j=!0,Oi(t)):j=!1,t.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,ds(t),v.updater=ta,t.stateNode=v,v._reactInternals=t,js(t,o,e,n),t=Is(null,t,o,!0,j,n)):(t.tag=0,ht&&j&&ts(t),$t(null,t,v,n),t=t.child),t;case 16:o=t.elementType;e:{switch(na(e,t),e=t.pendingProps,v=o._init,o=v(o._payload),t.type=o,v=t.tag=md(o),e=hr(o,e),v){case 0:t=Cs(null,t,o,e,n);break e;case 1:t=Zl(null,t,o,e,n);break e;case 11:t=Gl(null,t,o,e,n);break e;case 14:t=Xl(null,t,o,hr(o.type,e),n);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,v=t.pendingProps,v=t.elementType===o?v:hr(o,v),Cs(e,t,o,v,n);case 1:return o=t.type,v=t.pendingProps,v=t.elementType===o?v:hr(o,v),Zl(e,t,o,v,n);case 3:e:{if(Jl(t),e===null)throw Error(s(387));o=t.pendingProps,j=t.memoizedState,v=j.element,ml(e,t),Xi(t,o,null,n);var P=t.memoizedState;if(o=P.element,j.isDehydrated)if(j={element:o,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},t.updateQueue.baseState=j,t.memoizedState=j,t.flags&256){v=In(Error(s(423)),t),t=eu(e,t,o,n,v);break e}else if(o!==v){v=In(Error(s(424)),t),t=eu(e,t,o,n,v);break e}else for(tr=zr(t.stateNode.containerInfo.firstChild),er=t,ht=!0,mr=null,n=fl(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kn(),o===v){t=Ir(e,t,n);break e}$t(e,t,o,n)}t=t.child}return t;case 5:return gl(t),e===null&&is(t),o=t.type,v=t.pendingProps,j=e!==null?e.memoizedProps:null,P=v.children,Ka(o,v)?P=null:j!==null&&Ka(o,j)&&(t.flags|=32),Ql(e,t),$t(e,t,P,n),t.child;case 6:return e===null&&is(t),null;case 13:return tu(e,t,n);case 4:return fs(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=jn(t,null,o,n):$t(e,t,o,n),t.child;case 11:return o=t.type,v=t.pendingProps,v=t.elementType===o?v:hr(o,v),Gl(e,t,o,v,n);case 7:return $t(e,t,t.pendingProps,n),t.child;case 8:return $t(e,t,t.pendingProps.children,n),t.child;case 12:return $t(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,v=t.pendingProps,j=t.memoizedProps,P=v.value,ct(Hi,o._currentValue),o._currentValue=P,j!==null)if(pr(j.value,P)){if(j.children===v.children&&!Xt.current){t=Ir(e,t,n);break e}}else for(j=t.child,j!==null&&(j.return=t);j!==null;){var V=j.dependencies;if(V!==null){P=j.child;for(var re=V.firstContext;re!==null;){if(re.context===o){if(j.tag===1){re=Cr(-1,n&-n),re.tag=2;var ve=j.updateQueue;if(ve!==null){ve=ve.shared;var De=ve.pending;De===null?re.next=re:(re.next=De.next,De.next=re),ve.pending=re}}j.lanes|=n,re=j.alternate,re!==null&&(re.lanes|=n),us(j.return,n,t),V.lanes|=n;break}re=re.next}}else if(j.tag===10)P=j.type===t.type?null:j.child;else if(j.tag===18){if(P=j.return,P===null)throw Error(s(341));P.lanes|=n,V=P.alternate,V!==null&&(V.lanes|=n),us(P,n,t),P=j.sibling}else P=j.child;if(P!==null)P.return=j;else for(P=j;P!==null;){if(P===t){P=null;break}if(j=P.sibling,j!==null){j.return=P.return,P=j;break}P=P.return}j=P}$t(e,t,v.children,n),t=t.child}return t;case 9:return v=t.type,o=t.pendingProps.children,_n(t,n),v=lr(v),o=o(v),t.flags|=1,$t(e,t,o,n),t.child;case 14:return o=t.type,v=hr(o,t.pendingProps),v=hr(o.type,v),Xl(e,t,o,v,n);case 15:return Kl(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,v=t.pendingProps,v=t.elementType===o?v:hr(o,v),na(e,t),t.tag=1,Kt(o)?(e=!0,Oi(t)):e=!1,_n(t,n),zl(t,o,v),js(t,o,v,n),Is(null,t,o,!0,e,n);case 19:return nu(e,t,n);case 22:return Yl(e,t,n)}throw Error(s(156,t.tag))};function Tu(e,t){return Bt(e,t)}function pd(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,n,o){return new pd(e,t,n,o)}function Ys(e){return e=e.prototype,!(!e||!e.isReactComponent)}function md(e){if(typeof e=="function")return Ys(e)?1:0;if(e!=null){if(e=e.$$typeof,e===G)return 11;if(e===F)return 14}return 2}function Qr(e,t){var n=e.alternate;return n===null?(n=dr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ma(e,t,n,o,v,j){var P=2;if(o=e,typeof e=="function")Ys(e)&&(P=1);else if(typeof e=="string")P=5;else e:switch(e){case k:return fn(n.children,v,j,t);case N:P=8,v|=8;break;case Y:return e=dr(12,n,t,v|2),e.elementType=Y,e.lanes=j,e;case $:return e=dr(13,n,t,v),e.elementType=$,e.lanes=j,e;case ge:return e=dr(19,n,t,v),e.elementType=ge,e.lanes=j,e;case me:return ha(n,v,j,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:P=10;break e;case W:P=9;break e;case G:P=11;break e;case F:P=14;break e;case le:P=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=dr(P,n,t,v),t.elementType=e,t.type=o,t.lanes=j,t}function fn(e,t,n,o){return e=dr(7,e,o,t),e.lanes=n,e}function ha(e,t,n,o){return e=dr(22,e,o,t),e.elementType=me,e.lanes=n,e.stateNode={isHidden:!1},e}function Qs(e,t,n){return e=dr(6,e,null,t),e.lanes=n,e}function Zs(e,t,n){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hd(e,t,n,o,v){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=o,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Js(e,t,n,o,v,j,P,V,re){return e=new hd(e,t,n,V,re),t===1?(t=1,j===!0&&(t|=8)):t=0,j=dr(3,null,null,t),e.current=j,j.stateNode=e,j.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ds(j),e}function xd(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function _u(e){if(!e)return qr;e=e._reactInternals;e:{if(ut(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(Kt(n))return rl(e,n,t)}return t}function Cu(e,t,n,o,v,j,P,V,re){return e=Js(n,o,!0,e,v,j,P,V,re),e.context=_u(null),n=e.current,o=Ht(),v=Kr(n),j=Cr(o,v),j.callback=t??null,Hr(n,j,v),e.current.lanes=v,Ln(e,v,o),Zt(e,o),e}function xa(e,t,n,o){var v=t.current,j=Ht(),P=Kr(v);return n=_u(n),t.context===null?t.context=n:t.pendingContext=n,t=Cr(j,P),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Hr(v,t,P),e!==null&&(yr(e,v,P,j),Gi(e,v,P)),P}function ga(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Iu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function eo(e,t){Iu(e,t),(e=e.alternate)&&Iu(e,t)}function gd(){return null}var Au=typeof reportError=="function"?reportError:function(e){console.error(e)};function to(e){this._internalRoot=e}ya.prototype.render=to.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));xa(e,t,null,null)},ya.prototype.unmount=to.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;un(function(){xa(null,e,null,null)}),t[Rr]=null}};function ya(e){this._internalRoot=e}ya.prototype.unstable_scheduleHydration=function(e){if(e){var t=mo();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lr.length&&t!==0&&t<Lr[n].priority;n++);Lr.splice(n,0,e),n===0&&go(e)}};function ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ba(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nu(){}function yd(e,t,n,o,v){if(v){if(typeof o=="function"){var j=o;o=function(){var ve=ga(P);j.call(ve)}}var P=Cu(t,o,e,0,null,!1,!1,"",Nu);return e._reactRootContainer=P,e[Rr]=P.current,Qn(e.nodeType===8?e.parentNode:e),un(),P}for(;v=e.lastChild;)e.removeChild(v);if(typeof o=="function"){var V=o;o=function(){var ve=ga(re);V.call(ve)}}var re=Js(e,0,!1,null,null,!1,!1,"",Nu);return e._reactRootContainer=re,e[Rr]=re.current,Qn(e.nodeType===8?e.parentNode:e),un(function(){xa(t,re,n,o)}),re}function va(e,t,n,o,v){var j=n._reactRootContainer;if(j){var P=j;if(typeof v=="function"){var V=v;v=function(){var re=ga(P);V.call(re)}}xa(t,P,e,v)}else P=yd(n,t,e,v,o);return ga(P)}fo=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bn(t.pendingLanes);n!==0&&(ka(t,n|1),Zt(t,mt()),(it&6)===0&&(Pn=mt()+500,Wr()))}break;case 13:un(function(){var o=_r(e,1);if(o!==null){var v=Ht();yr(o,e,1,v)}}),eo(e,1)}},ja=function(e){if(e.tag===13){var t=_r(e,134217728);if(t!==null){var n=Ht();yr(t,e,134217728,n)}eo(e,134217728)}},po=function(e){if(e.tag===13){var t=Kr(e),n=_r(e,t);if(n!==null){var o=Ht();yr(n,e,t,o)}eo(e,t)}},mo=function(){return ot},ho=function(e,t){var n=ot;try{return ot=e,t()}finally{ot=n}},wt=function(e,t,n){switch(t){case"input":if(je(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var v=Li(o);if(!v)throw Error(s(90));te(o),je(o,v)}}}break;case"textarea":He(e,n);break;case"select":t=n.value,t!=null&&Te(e,!!n.multiple,t,!1)}},Ne=Gs,B=un;var bd={usingClientEntryPoint:!1,Events:[ei,vn,Li,Vt,Ct,Gs]},mi={findFiberByHostInstance:en,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vd={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nt(e),e===null?null:e.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||gd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{yi=Ea.inject(vd),br=Ea}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bd,reactDom_production_min.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ro(t))throw Error(s(200));return xd(e,t,null,n)},reactDom_production_min.createRoot=function(e,t){if(!ro(e))throw Error(s(299));var n=!1,o="",v=Au;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Js(e,1,!1,null,null,n,!1,o,v),e[Rr]=t.current,Qn(e.nodeType===8?e.parentNode:e),new to(t)},reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=nt(t),e=e===null?null:e.stateNode,e},reactDom_production_min.flushSync=function(e){return un(e)},reactDom_production_min.hydrate=function(e,t,n){if(!ba(t))throw Error(s(200));return va(null,e,t,!0,n)},reactDom_production_min.hydrateRoot=function(e,t,n){if(!ro(e))throw Error(s(405));var o=n!=null&&n.hydratedSources||null,v=!1,j="",P=Au;if(n!=null&&(n.unstable_strictMode===!0&&(v=!0),n.identifierPrefix!==void 0&&(j=n.identifierPrefix),n.onRecoverableError!==void 0&&(P=n.onRecoverableError)),t=Cu(t,null,e,1,n??null,v,!1,j,P),e[Rr]=t.current,Qn(e),o)for(e=0;e<o.length;e++)n=o[e],v=n._getVersion,v=v(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,v]:t.mutableSourceEagerHydrationData.push(n,v);return new ya(t)},reactDom_production_min.render=function(e,t,n){if(!ba(t))throw Error(s(200));return va(null,e,t,!1,n)},reactDom_production_min.unmountComponentAtNode=function(e){if(!ba(e))throw Error(s(40));return e._reactRootContainer?(un(function(){va(null,null,e,!1,function(){e._reactRootContainer=null,e[Rr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Gs,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!ba(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return va(e,t,n,!1,o)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient();const scriptRel="modulepreload",assetsURL=function(r){return"/"+r},seen={},__vitePreload=function(a,s,i){let u=Promise.resolve();if(s&&s.length>0){let h=function(c){return Promise.all(c.map(m=>Promise.resolve(m).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),b=p?.nonce||p?.getAttribute("nonce");u=h(s.map(c=>{if(c=assetsURL(c),c in seen)return;seen[c]=!0;const m=c.endsWith(".css"),l=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":scriptRel,m||(d.as="script"),d.crossOrigin="",d.href=c,b&&d.setAttribute("nonce",b),document.head.appendChild(d),m)return new Promise((f,S)=>{d.addEventListener("load",f),d.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function x(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return u.then(h=>{for(const p of h||[])p.status==="rejected"&&x(p.reason);return a().catch(x)})};var reactExports=requireReact();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,i)=>i?i.toUpperCase():s.toLowerCase()),toPascalCase=r=>{const a=toCamelCase(r);return a.charAt(0).toUpperCase()+a.slice(1)},mergeClasses=(...r)=>r.filter((a,s,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:u="",children:x,iconNode:h,...p},b)=>reactExports.createElement("svg",{ref:b,...defaultAttributes,width:a,height:a,stroke:r,strokeWidth:i?Number(s)*24/Number(a):s,className:mergeClasses("lucide",u),...p},[...h.map(([c,m])=>reactExports.createElement(c,m)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(r,a)=>{const s=reactExports.forwardRef(({className:i,...u},x)=>reactExports.createElement(Icon,{ref:x,iconNode:a,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(r))}`,`lucide-${r}`,i),...u}));return s.displayName=toPascalCase(r),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]],Album=createLucideIcon("album",__iconNode$L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$G);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Cloud=createLucideIcon("cloud",__iconNode$F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("download",__iconNode$C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FolderOpen=createLucideIcon("folder-open",__iconNode$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Grid3x3=createLucideIcon("grid-3x3",__iconNode$A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Hammer=createLucideIcon("hammer",__iconNode$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],HardDrive=createLucideIcon("hard-drive",__iconNode$x);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("heart",__iconNode$w);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image=createLucideIcon("image",__iconNode$u);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$t);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ListMusic=createLucideIcon("list-music",__iconNode$s);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Music=createLucideIcon("music",__iconNode$p);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]],Orbit=createLucideIcon("orbit",__iconNode$o);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pause=createLucideIcon("pause",__iconNode$n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$m);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$l);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Search=createLucideIcon("search",__iconNode$j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$i);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$h);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Shuffle=createLucideIcon("shuffle",__iconNode$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],SkipBack=createLucideIcon("skip-back",__iconNode$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],SlidersVertical=createLucideIcon("sliders-vertical",__iconNode$c);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$a);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserMinus=createLucideIcon("user-minus",__iconNode$5);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Users=createLucideIcon("users",__iconNode$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],VolumeX=createLucideIcon("volume-x",__iconNode$2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:r}){const[a,s]=reactExports.useState(()=>{const h=localStorage.getItem("brick-theme");return h||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=a==="dark",u=i?{bg:{primary:"#1a1a1a",secondary:"#252525",tertiary:"#2a2a2a"},text:{primary:"#e0e0e0",secondary:"#a0a0a0",tertiary:"#666666"},accent:"#d32f2f",border:"#333333"}:{bg:{primary:"#ffffff",secondary:"#f8f8f8",tertiary:"#e8e8e8"},text:{primary:"#1a1a1a",secondary:"#666666",tertiary:"#999999"},accent:"#d32f2f",border:"#cccccc"};reactExports.useEffect(()=>{localStorage.setItem("brick-theme",a),document.documentElement.setAttribute("data-theme",a)},[a]);const x=()=>{s(h=>h==="dark"?"light":"dark")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:a,toggleTheme:x,isDark:i,colors:u},children:r})}function useTheme$1(){const r=reactExports.useContext(ThemeContext);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r}const PinkTierStorageKey="pink_tier_unlocked",ThemeEnabledStorageKey="pink_theme_enabled",PinkUnlockTimestampStorageKey="pink_unlock_ts",stateClassnames={SECURE:"wall-secure",SHAKING:"wall-shaking",COLLAPSED:"wall-collapsed",REBUILDING:"wall-rebuilding",CRACKED:"wall-cracked"},WallContext=reactExports.createContext(void 0),WallProvider=({children:r})=>{const[a,s]=reactExports.useState("SECURE"),[i,u]=reactExports.useState(!1),[x,h]=reactExports.useState(null),[p,b]=reactExports.useState(!0),c=reactExports.useRef([]),m=reactExports.useRef(!1),l=reactExports.useCallback(()=>{c.current.forEach(T=>window.clearTimeout(T)),c.current=[]},[]);reactExports.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.getItem(PinkTierStorageKey)==="true"&&(u(!0),s("CRACKED")),localStorage.getItem(ThemeEnabledStorageKey)==="false"&&b(!1)}catch(T){console.warn("Unable to read wall theme flags:",T)}},[]);const d=reactExports.useCallback(T=>{b(T);try{localStorage.setItem(ThemeEnabledStorageKey,T?"true":"false")}catch(_){console.warn("Unable to persist wall theme preference:",_)}},[]);reactExports.useEffect(()=>{if(typeof document>"u")return;const T=document.body,_=Object.values(stateClassnames);T.classList.remove(..._),T.classList.add(stateClassnames[a]);const A=p&&(i||a==="CRACKED");T.classList.toggle("theme-cracked",A)},[a,i,p]);const f=reactExports.useCallback(()=>{i||(l(),m.current=!1,s("SECURE"))},[l,i]),S=reactExports.useCallback(()=>{i||m.current||s(T=>T==="SECURE"?"SHAKING":T)},[i]),y=reactExports.useCallback(()=>{i||m.current||s(T=>T==="SHAKING"?"SECURE":T)},[i]),E=reactExports.useCallback(()=>{l(),m.current=!1,s("CRACKED"),u(!0);const T=Date.now();h(T),d(!0);try{localStorage.setItem(PinkTierStorageKey,"true"),localStorage.setItem(PinkUnlockTimestampStorageKey,String(T))}catch(_){console.warn("Unable to persist pink tier unlock flag:",_)}},[l,d]),g=reactExports.useCallback(()=>{if(i||m.current)return;m.current=!0,l(),s("COLLAPSED");const T=window.setTimeout(()=>{s("REBUILDING")},5e3),_=window.setTimeout(()=>{E()},8e3);c.current=[T,_]},[l,E,i]);reactExports.useEffect(()=>()=>l(),[l]);const w=reactExports.useMemo(()=>({wallState:a,pinkTierUnlocked:i,pinkUnlockTimestamp:x,themeEnabled:p,setThemeEnabled:d,startWarning:S,cancelWarning:y,triggerCollapse:g,resetToSecure:f}),[a,i,x,p,d,S,y,g,f]);return jsxRuntimeExports.jsx(WallContext.Provider,{value:w,children:r})},useWall=()=>{const r=reactExports.useContext(WallContext);if(!r)throw new Error("useWall must be used within a WallProvider");return r};function HeroCarousel({artists:r,onArtistPress:a}){const[s,i]=reactExports.useState(0),[u,x]=reactExports.useState(0),[h,p]=reactExports.useState(0),b=l=>{x(l.touches[0].clientX)},c=l=>{p(l.touches[0].clientX)},m=()=>{u-h>75&&i(l=>(l+1)%r.length),u-h<-75&&i(l=>(l-1+r.length)%r.length)};return r[s],jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden",style:{height:"40vh",minHeight:"320px",maxHeight:"450px"},onTouchStart:b,onTouchMove:c,onTouchEnd:m,children:[jsxRuntimeExports.jsx("div",{className:"flex h-full transition-transform duration-500 ease-out",style:{transform:`translateX(-${s*100}%)`},children:r.map(l=>jsxRuntimeExports.jsxs("div",{className:"w-full flex-shrink-0 relative cursor-pointer",onClick:()=>a(l.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-transform duration-700",style:{transform:`scale(${s===r.indexOf(l)?1:1.1})`},children:jsxRuntimeExports.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover",style:{filter:"grayscale(20%) brightness(0.5)"}})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 70%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",border:"1px solid #d32f2f",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx(Crown,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"CHOSEN ARTIST"})]})}),jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:l.name}),jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#cccccc",fontSize:"1rem"},children:l.genre}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#d32f2f",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6), 0 0 40px rgba(211, 47, 47, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#ffffff"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ffffff",fontSize:"0.8rem",fontWeight:600,letterSpacing:"0.05em"},children:"80% REVENUE SHARE ACTIVE"})]})}),jsxRuntimeExports.jsx("p",{className:"mono mt-3",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"TAP TO PLAY ESSENTIALS  HOLD TO VIEW PROFILE"})]})]},l.id))}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center gap-2",children:r.map((l,d)=>jsxRuntimeExports.jsx("button",{onClick:()=>i(d),className:"transition-all duration-200",style:{width:s===d?"24px":"8px",height:"8px",borderRadius:"4px",backgroundColor:s===d?"#e0e0e0":"rgba(224, 224, 224, 0.3)"}},d))})]})}function NetworkStories({connections:r,onStoryClick:a}){return jsxRuntimeExports.jsxs("div",{className:"px-6 py-4",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:r.map(s=>jsxRuntimeExports.jsxs("button",{onClick:()=>a(s.id),className:"flex flex-col items-center gap-2 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #546e7a, #d32f2f)",padding:"3px"},children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full",style:{backgroundColor:"#1a1a1a"}})}),jsxRuntimeExports.jsx("img",{src:s.user.avatar,alt:s.user.name,className:"relative w-16 h-16 rounded-full object-cover",style:{border:"3px solid #1a1a1a"}}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 rounded-full border-2",style:{backgroundColor:"#d32f2f",borderColor:"#1a1a1a"}})]}),jsxRuntimeExports.jsx("span",{className:"text-center max-w-[70px] truncate",style:{color:"#cccccc",fontSize:"0.75rem"},children:s.user.name.split(" ")[0]})]},s.id))}),jsxRuntimeExports.jsx("style",{children:`
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `})]})}const ERROR_IMG_SRC="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ImageWithFallback(r){const[a,s]=reactExports.useState(!1),i=()=>{s(!0)},{src:u,alt:x,style:h,className:p,...b}=r;return a?jsxRuntimeExports.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${p??""}`,style:h,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-full",children:jsxRuntimeExports.jsx("img",{src:ERROR_IMG_SRC,alt:"Error loading image",...b,"data-original-url":u})})}):jsxRuntimeExports.jsx("img",{src:u,alt:x,className:p,style:h,...b,onError:i})}function BrickCard({playlist:r,isLocked:a=!1,onClick:s,onDelete:i,onCancelDelete:u,onConfirmDelete:x,size:h="medium",compact:p=!1,canDelete:b=!1,timeUntilDeletion:c}){const m={small:"w-full",medium:"w-full",large:"w-full col-span-2"},l=r.deletionQueuedAt!==void 0;return jsxRuntimeExports.jsxs("div",{onClick:s,className:`${m[h]} bg-[#252525] rounded-lg overflow-hidden cursor-pointer transition-all duration-200 hover:bg-[#2a2a2a] group relative`,style:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative w-full aspect-square",children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:r.customCoverImage||r.coverImage,alt:r.name,className:`w-full h-full object-cover ${a?"blur-xl":""}`}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 60%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute top-3 left-3 right-3 flex justify-between items-start",children:[r.hiRes&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#c6a700] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#c6a700",fontSize:"0.7rem"},children:"Hi-Res"})}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),!r.isPublic&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#a0a0a0] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Draft"})})]}),a&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{size:48,color:"#a0a0a0",strokeWidth:1.5})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-3 left-3",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem"},children:[r.trackCount," tracks"]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mb-1 truncate",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:r.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[r.creator&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:r.creator.avatar,alt:r.creator.name,className:"w-4 h-4 rounded-full"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:r.creator.name})]}),!r.creator&&jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"Your Collection"})]}),r.structuralIntegrity!==void 0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem"},children:"Structural Integrity"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:r.structuralIntegrity>=70?"#4caf50":"#d32f2f",fontSize:"0.7rem"},children:[r.structuralIntegrity,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-[#1a1a1a] rounded-full h-1",children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${r.structuralIntegrity}%`,background:r.structuralIntegrity>=70?"linear-gradient(to right, #4caf50, #8bc34a)":"linear-gradient(to right, #d32f2f, #b71c1c)"}})})]}),l&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:[jsxRuntimeExports.jsx("p",{className:"mono text-center text-sm mb-2",style:{color:"#d32f2f",fontSize:"0.7rem"},children:c}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:d=>{d.stopPropagation(),u?.(r.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #a0a0a0",color:"#a0a0a0"},children:"Cancel"}),b&&jsxRuntimeExports.jsx("button",{onClick:d=>{d.stopPropagation(),x?.(r.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#d32f2f",color:"#e0e0e0"},children:"Delete Now"})]})]}),!l&&i&&jsxRuntimeExports.jsxs("button",{onClick:d=>{d.stopPropagation(),i(r.id)},className:"w-full mt-3 py-2 px-3 rounded flex items-center justify-center gap-2 transition-all hover:bg-red-900/20",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f",color:"#d32f2f"},children:[jsxRuntimeExports.jsx(Trash2,{size:14}),jsxRuntimeExports.jsx("span",{className:"mono text-xs",children:"Delete Brick"})]})]})]})}const DB_NAME$1="BrickMusicDB",DB_VERSION$1=5,ensureObjectStores=r=>{r.objectStoreNames.contains("localTracks")||r.createObjectStore("localTracks",{keyPath:"id"}),r.objectStoreNames.contains("playlists")||r.createObjectStore("playlists",{keyPath:"id"}),r.objectStoreNames.contains("recentlyPlayedTracks")||r.createObjectStore("recentlyPlayedTracks",{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1}),r.objectStoreNames.contains("recentlyPlayedPlaylists")||r.createObjectStore("recentlyPlayedPlaylists",{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1})},openBrickDB=()=>new Promise((r,a)=>{const s=indexedDB.open(DB_NAME$1,DB_VERSION$1);s.onerror=()=>a(s.error),s.onsuccess=()=>r(s.result),s.onupgradeneeded=i=>{const u=i.target.result;ensureObjectStores(u)}});function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jsmediatags_min$1={exports:{}},jsmediatags_min=jsmediatags_min$1.exports,hasRequiredJsmediatags_min;function requireJsmediatags_min(){return hasRequiredJsmediatags_min||(hasRequiredJsmediatags_min=1,(function(r,a){var s=s||{};s.scope={},s.ASSUME_ES5=!1,s.ASSUME_NO_NATIVE_MAP=!1,s.ASSUME_NO_NATIVE_SET=!1,s.defineProperty=s.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,u,x){i!=Array.prototype&&i!=Object.prototype&&(i[u]=x.value)},s.getGlobal=function(i){return typeof window<"u"&&window===i?i:typeof commonjsGlobal<"u"&&commonjsGlobal!=null?commonjsGlobal:i},s.global=s.getGlobal(jsmediatags_min),s.polyfill=function(i,u,x,h){if(u){for(x=s.global,i=i.split("."),h=0;h<i.length-1;h++){var p=i[h];p in x||(x[p]={}),x=x[p]}i=i[i.length-1],h=x[i],u=u(h),u!=h&&u!=null&&s.defineProperty(x,i,{configurable:!0,writable:!0,value:u})}},s.polyfill("Object.setPrototypeOf",function(i){return i||(typeof"".__proto__!="object"?null:function(u,x){if(u.__proto__=x,u.__proto__!==x)throw new TypeError(u+" is not extensible");return u})},"es6","es5"),s.objectCreate=s.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(i){var u=function(){};return u.prototype=i,new u},s.construct=typeof Reflect<"u"&&Reflect.construct||function(i,u,x){return x===void 0&&(x=i),x=s.objectCreate(x.prototype||Object.prototype),Function.prototype.apply.call(i,x,u)||x},s.polyfill("Reflect.construct",function(i){return i||s.construct},"es6","es3"),(function(i){r.exports=i()})(function(){return(function(){function i(u,x,h){function p(m,l){if(!x[m]){if(!u[m]){var d=typeof commonjsRequire=="function"&&commonjsRequire;if(!l&&d)return d(m,!0);if(b)return b(m,!0);throw l=Error("Cannot find module '"+m+"'"),l.code="MODULE_NOT_FOUND",l}l=x[m]={exports:{}},u[m][0].call(l.exports,function(f){return p(u[m][1][f]||f)},l,l.exports,i,u,x,h)}return x[m].exports}for(var b=typeof commonjsRequire=="function"&&commonjsRequire,c=0;c<h.length;c++)p(h[c]);return p}return i})()({1:[function(i,u,x){},{}],2:[function(i,u,x){u.exports=XMLHttpRequest},{}],3:[function(i,u,x){function h(E){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},h(E)}function p(E,g){for(var w=0;w<g.length;w++){var T=g[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function b(E,g,w){return g&&p(E.prototype,g),w&&p(E,w),E}function c(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),g&&m(E,g)}function m(E,g){return m=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w},m(E,g)}function l(E){var g=f();return function(){var w=S(E);if(g){var T=S(this).constructor;w=Reflect.construct(w,arguments,T)}else w=w.apply(this,arguments);return w=!w||h(w)!=="object"&&typeof w!="function"?d(this):w,w}}function d(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(E){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},S(E)}function y(E,g,w){return g in E?Object.defineProperty(E,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):E[g]=w,E}i=(function(E){function g(T){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var _=w.call(this);return y(d(_),"_array",void 0),y(d(_),"_size",void 0),_._array=T,_._size=T.length,_._isInitialized=!0,_}c(g,E);var w=l(g);return b(g,[{key:"init",value:function(T){setTimeout(T.onSuccess,0)}},{key:"loadRange",value:function(T,_){setTimeout(_.onSuccess,0)}},{key:"getByteAt",value:function(T){if(T>=this._array.length)throw Error("Offset "+T+" hasn't been loaded yet.");return this._array[T]}}],[{key:"canReadFile",value:function(T){return Array.isArray(T)||typeof Buffer=="function"&&Buffer.isBuffer(T)}}]),g})(i("./MediaFileReader")),u.exports=i},{"./MediaFileReader":11}],4:[function(i,u,x){function h(g){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(g)}function p(g,w){for(var T=0;T<w.length;T++){var _=w[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}function b(g,w,T){return w&&p(g.prototype,w),T&&p(g,T),g}function c(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),w&&m(g,w)}function m(g,w){return m=Object.setPrototypeOf||function(T,_){return T.__proto__=_,T},m(g,w)}function l(g){var w=f();return function(){var T=S(g);if(w){var _=S(this).constructor;T=Reflect.construct(T,arguments,_)}else T=T.apply(this,arguments);return T=!T||h(T)!=="object"&&typeof T!="function"?d(this):T,T}}function d(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(g){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},S(g)}function y(g,w,T){return w in g?Object.defineProperty(g,w,{value:T,enumerable:!0,configurable:!0,writable:!0}):g[w]=T,g}var E=i("./ChunkedFileData");i=(function(g){function w(_){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var A=T.call(this);return y(d(A),"_blob",void 0),y(d(A),"_fileData",void 0),A._blob=_,A._fileData=new E,A}c(w,g);var T=l(w);return b(w,[{key:"_init",value:function(_){this._size=this._blob.size,setTimeout(_.onSuccess,1)}},{key:"loadRange",value:function(_,A){var I=this,k=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,_[0],_[1]+1),N=new FileReader;N.onloadend=function(Y){Y=new Uint8Array(N.result),I._fileData.addData(_[0],Y),A.onSuccess()},N.onerror=N.onabort=function(Y){A.onError&&A.onError({type:"blob",info:N.error})},N.readAsArrayBuffer(k)}},{key:"getByteAt",value:function(_){return this._fileData.getByteAt(_)}}],[{key:"canReadFile",value:function(_){return typeof Blob<"u"&&_ instanceof Blob||typeof File<"u"&&_ instanceof File}}]),w})(i("./MediaFileReader")),u.exports=i},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(i,u,x){function h(b,c){for(var m=0;m<c.length;m++){var l=c[m];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(b,l.key,l)}}function p(b,c,m){return c&&h(b.prototype,c),m&&h(b,m),b}i=(function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0,this._fileData=[]}return p(b,[{key:"addData",value:function(c,m){var l=c+m.length-1,d=this._getChunkRange(c,l);if(d.startIx===-1)this._fileData.splice(d.insertIx||0,0,{offset:c,data:m});else{var f=this._fileData[d.startIx],S=this._fileData[d.endIx];l=l<S.offset+S.data.length-1;var y={offset:Math.min(c,f.offset),data:m};c>f.offset&&(c=this._sliceData(f.data,0,c-f.offset),y.data=this._concatData(c,m)),l&&(c=this._sliceData(y.data,0,S.offset-y.offset),y.data=this._concatData(c,S.data)),this._fileData.splice(d.startIx,d.endIx-d.startIx+1,y)}}},{key:"_concatData",value:function(c,m){if(typeof ArrayBuffer<"u"&&ArrayBuffer.isView&&ArrayBuffer.isView(c)){var l=new c.constructor(c.length+m.length);return l.set(c,0),l.set(m,c.length),l}return c.concat(m)}},{key:"_sliceData",value:function(c,m,l){return c.slice?c.slice(m,l):c.subarray(m,l)}},{key:"_getChunkRange",value:function(c,m){for(var l,d,f=-1,S=-1,y=0,E=0;E<this._fileData.length&&(d=this._fileData[E].offset,l=d+this._fileData[E].data.length,!(m<d-1));E++,y=E)if(c<=l+1&&m>=d-1){f=E;break}if(f===-1)return{startIx:-1,endIx:-1,insertIx:y};for(E=f;E<this._fileData.length&&(d=this._fileData[E].offset,l=d+this._fileData[E].data.length,m>=d-1&&(S=E),!(m<=l+1));E++);return S===-1&&(S=f),{startIx:f,endIx:S}}},{key:"hasDataRange",value:function(c,m){for(var l=0;l<this._fileData.length;l++){var d=this._fileData[l];if(m<d.offset)break;if(c>=d.offset&&m<d.offset+d.data.length)return!0}return!1}},{key:"getByteAt",value:function(c){for(var m,l=0;l<this._fileData.length;l++){var d=this._fileData[l].offset,f=d+this._fileData[l].data.length-1;if(c>=d&&c<=f){m=this._fileData[l];break}}if(m)return m.data[c-m.offset];throw Error("Offset "+c+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return-1}}]),b})(),u.exports=i},{}],6:[function(i,u,x){function h(T){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(T)}function p(T,_){for(var A=0;A<_.length;A++){var I=_[A];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(T,I.key,I)}}function b(T,_,A){return _&&p(T.prototype,_),A&&p(T,A),T}function c(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),_&&m(T,_)}function m(T,_){return m=Object.setPrototypeOf||function(A,I){return A.__proto__=I,A},m(T,_)}function l(T){var _=f();return function(){var A=S(T);if(_){var I=S(this).constructor;A=Reflect.construct(A,arguments,I)}else A=A.apply(this,arguments);return A=!A||h(A)!=="object"&&typeof A!="function"?d(this):A,A}}function d(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(T){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},S(T)}function y(T,_,A){return _ in T?Object.defineProperty(T,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):T[_]=A,T}var E=[4,132],g=[6,134],w="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");i=(function(T){function _(){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");for(var I=arguments.length,k=Array(I),N=0;N<I;N++)k[N]=arguments[N];return I=A.call.apply(A,[this].concat(k)),y(d(I),"_commentOffset",void 0),y(d(I),"_pictureOffset",void 0),I}c(_,T);var A=l(_);return b(_,[{key:"_loadData",value:function(I,k){var N=this;I.loadRange([4,7],{onSuccess:function(){N._loadBlock(I,4,k)}})}},{key:"_loadBlock",value:function(I,k,N){var Y=this,z=I.getByteAt(k),W=I.getInteger24At(k+1,!0);if(E.indexOf(z)!==-1){var G=k+4;I.loadRange([G,G+W],{onSuccess:function(){Y._commentOffset=G,Y._nextBlock(I,k,z,W,N)}})}else g.indexOf(z)!==-1?(G=k+4,I.loadRange([G,G+W],{onSuccess:function(){Y._pictureOffset=G,Y._nextBlock(I,k,z,W,N)}})):Y._nextBlock(I,k,z,W,N)}},{key:"_nextBlock",value:function(I,k,N,Y,z){var W=this;127<N?W._commentOffset?z.onSuccess():z.onError({type:"loadData",info:"Comment block could not be found."}):I.loadRange([k+4+Y,k+4+4+Y],{onSuccess:function(){W._loadBlock(I,k+4+Y,z)}})}},{key:"_parseData",value:function(I,k){var N=I.getLongAt(this._commentOffset,!1)+(this._commentOffset+4);k=I.getLongAt(N,!1),N+=4;for(var Y,z,W,G,$,ge,F=0;F<k;F++){var le=I.getLongAt(N,!1),me=I.getStringWithCharsetAt(N+4,le,"utf-8").toString(),H=me.indexOf("=");switch(me=[me.slice(0,H),me.slice(H+1)],me[0].toUpperCase()){case"TITLE":Y=me[1];break;case"ARTIST":z=me[1];break;case"ALBUM":W=me[1];break;case"TRACKNUMBER":G=me[1];break;case"GENRE":$=me[1]}N+=4+le}return this._pictureOffset&&(ge=I.getLongAt(this._pictureOffset,!0),k=this._pictureOffset+4,N=I.getLongAt(k,!0),F=k+4,k=I.getStringAt(F,N),N=F+N,F=I.getLongAt(N,!0),le=N+4,N=I.getStringWithCharsetAt(le,F,"utf-8").toString(),F=le+F+16,le=I.getLongAt(F,!0),I=I.getBytesAt(F+4,le,!0),ge={format:k,type:w[ge],description:N,data:I}),{type:"FLAC",version:"1",tags:{title:Y,artist:z,album:W,track:G,genre:$,picture:ge}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(I){return String.fromCharCode.apply(String,I.slice(0,4))==="fLaC"}}]),_})(i("./MediaTagReader")),u.exports=i},{"./MediaTagReader":12}],7:[function(i,u,x){function h(y){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},h(y)}function p(y,E){for(var g=0;g<E.length;g++){var w=E[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}function b(y,E,g){return E&&p(y.prototype,E),g&&p(y,g),y}function c(y,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),E&&m(y,E)}function m(y,E){return m=Object.setPrototypeOf||function(g,w){return g.__proto__=w,g},m(y,E)}function l(y){var E=d();return function(){var g=f(y);if(E){var w=f(this).constructor;g=Reflect.construct(g,arguments,w)}else g=g.apply(this,arguments);if(!g||h(g)!=="object"&&typeof g!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=this}return g}}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(y){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},f(y)}x=i("./MediaTagReader"),i("./MediaFileReader"),i=(function(y){function E(){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");return g.apply(this,arguments)}c(E,y);var g=l(E);return b(E,[{key:"_loadData",value:function(w,T){var _=w.getSize();w.loadRange([_-128,_-1],T)}},{key:"_parseData",value:function(w,T){var _=w.getSize()-128,A=w.getStringWithCharsetAt(_+3,30).toString(),I=w.getStringWithCharsetAt(_+33,30).toString(),k=w.getStringWithCharsetAt(_+63,30).toString(),N=w.getStringWithCharsetAt(_+93,4).toString(),Y=w.getByteAt(_+97+28);if(T=w.getByteAt(_+97+29),Y==0&&T!=0){var z="1.1";Y=w.getStringWithCharsetAt(_+97,28).toString()}else z="1.0",Y=w.getStringWithCharsetAt(_+97,30).toString(),T=0;return w=w.getByteAt(_+97+30),w={type:"ID3",version:z,tags:{title:A,artist:I,album:k,year:N,comment:Y,genre:255>w?S[w]:""}},T&&(w.tags.track=T),w}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(w){return String.fromCharCode.apply(String,w.slice(0,3))==="TAG"}}]),E})(x);var S="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");u.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(i,u,x){function h(y,E){for(var g=0;g<E.length;g++){var w=E[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}function p(y,E,g){return g&&h(y,g),y}function b(y){switch(y){case 0:y="iso-8859-1";break;case 1:y="utf-16";break;case 2:y="utf-16be";break;case 3:y="utf-8";break;default:y="iso-8859-1"}return y}function c(y,E,g,w){var T=g.getStringWithCharsetAt(y+1,E-1,w);return y=g.getStringWithCharsetAt(y+1+T.bytesReadCount,E-1-T.bytesReadCount,w),{user_description:T.toString(),data:y.toString()}}i("./MediaFileReader");var m=i("./StringUtils"),l=i("./ArrayFileReader"),d={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};i=(function(){function y(){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function")}return p(y,null,[{key:"getFrameReaderFunction",value:function(E){return E in f?f[E]:E[0]==="T"?f["T*"]:E[0]==="W"?f["W*"]:null}},{key:"readFrames",value:function(E,g,w,T,_){for(var A={},I=this._getFrameHeaderSize(T);E<g-I;){var k=this._readFrameHeader(w,E,T),N=k.id;if(!N)break;var Y=k.flags,z=k.size,W=E+k.headerSize,G=w;if(E+=k.headerSize+k.size,!_||_.indexOf(N)!==-1){if(N==="MP3e"||N==="\0MP3"||N==="\0\0MP"||N===" MP3")break;Y&&Y.format.unsynchronisation&&!T.flags.unsynchronisation&&(G=this.getUnsyncFileReader(G,W,z),W=0,z=G.getSize()),Y&&Y.format.data_length_indicator&&(W+=4,z-=4),Y=(k=y.getFrameReaderFunction(N))?k.apply(this,[W,z,G,Y,T]):null,W=this._getFrameDescription(N),z={id:N,size:z,description:W,data:Y},N in A?(A[N].id&&(A[N]=[A[N]]),A[N].push(z)):A[N]=z}}return A}},{key:"_getFrameHeaderSize",value:function(E){return E=E.major,E==2?6:E==3||E==4?10:0}},{key:"_readFrameHeader",value:function(E,g,w){var T=w.major,_=null;switch(w=this._getFrameHeaderSize(w),T){case 2:var A=E.getStringAt(g,3),I=E.getInteger24At(g+3,!0);break;case 3:A=E.getStringAt(g,4),I=E.getLongAt(g+4,!0);break;case 4:A=E.getStringAt(g,4),I=E.getSynchsafeInteger32At(g+4)}return(A=="\0\0\0"||A=="\0\0\0\0")&&(A=""),A&&2<T&&(_=this._readFrameFlags(E,g+8)),{id:A||"",size:I||0,headerSize:w||0,flags:_}}},{key:"_readFrameFlags",value:function(E,g){return{message:{tag_alter_preservation:E.isBitSetAt(g,6),file_alter_preservation:E.isBitSetAt(g,5),read_only:E.isBitSetAt(g,4)},format:{grouping_identity:E.isBitSetAt(g+1,7),compression:E.isBitSetAt(g+1,3),encryption:E.isBitSetAt(g+1,2),unsynchronisation:E.isBitSetAt(g+1,1),data_length_indicator:E.isBitSetAt(g+1,0)}}}},{key:"_getFrameDescription",value:function(E){return E in d?d[E]:"Unknown"}},{key:"getUnsyncFileReader",value:function(E,g,w){for(E=E.getBytesAt(g,w),g=0;g<E.length-1;g++)E[g]===255&&E[g+1]===0&&E.splice(g+1,1);return new l(E)}}]),y})();var f={APIC:function(y,E,g,w,T){w=y;var _=b(g.getByteAt(y));switch(T&&T.major){case 2:T=g.getStringAt(y+1,3),y+=4;break;case 3:case 4:T=g.getStringWithCharsetAt(y+1,E-1),y+=1+T.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var A=g.getByteAt(y);return A=S[A],_=g.getStringWithCharsetAt(y+1,E-(y-w)-1,_),y+=1+_.bytesReadCount,{format:T.toString(),type:A,description:_.toString(),data:g.getBytesAt(y,w+E-y)}},CHAP:function(y,E,g,w,T){w=y;var _={},A=m.readNullTerminatedString(g.getBytesAt(y,E));return _.id=A.toString(),y+=A.bytesReadCount,_.startTime=g.getLongAt(y,!0),y+=4,_.endTime=g.getLongAt(y,!0),y+=4,_.startOffset=g.getLongAt(y,!0),y+=4,_.endOffset=g.getLongAt(y,!0),y+=4,_.subFrames=this.readFrames(y,y+(E-(y-w)),g,T),_},CTOC:function(y,E,g,w,T){w=y;var _={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},A=m.readNullTerminatedString(g.getBytesAt(y,E));for(_.id=A.toString(),y+=A.bytesReadCount,_.topLevel=g.isBitSetAt(y,1),_.ordered=g.isBitSetAt(y,0),y++,_.entryCount=g.getByteAt(y),y++,A=0;A<_.entryCount;A++){var I=m.readNullTerminatedString(g.getBytesAt(y,E-(y-w)));_.childElementIds.push(I.toString()),y+=I.bytesReadCount}return _.subFrames=this.readFrames(y,y+(E-(y-w)),g,T),_},COMM:function(y,E,g,w,T){var _=y,A=b(g.getByteAt(y));return w=g.getStringAt(y+1,3),T=g.getStringWithCharsetAt(y+4,E-4,A),y+=4+T.bytesReadCount,y=g.getStringWithCharsetAt(y,_+E-y,A),{language:w,short_description:T.toString(),text:y.toString()}}};f.COM=f.COMM,f.PIC=function(y,E,g,w,T){return f.APIC(y,E,g,w,T)},f.PCNT=function(y,E,g,w,T){return g.getLongAt(y,!1)},f.CNT=f.PCNT,f["T*"]=function(y,E,g,w,T){return w=b(g.getByteAt(y)),g.getStringWithCharsetAt(y+1,E-1,w).toString()},f.TXXX=function(y,E,g,w,T){return w=b(g.getByteAt(y)),c(y,E,g,w)},f.WXXX=function(y,E,g,w,T){return E===0?null:(w=b(g.getByteAt(y)),c(y,E,g,w))},f["W*"]=function(y,E,g,w,T){return E===0?null:g.getStringWithCharsetAt(y,E,"iso-8859-1").toString()},f.TCON=function(y,E,g,w){return f["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},f.TCO=f.TCON,f.USLT=function(y,E,g,w,T){var _=y,A=b(g.getByteAt(y));return w=g.getStringAt(y+1,3),T=g.getStringWithCharsetAt(y+4,E-4,A),y+=4+T.bytesReadCount,y=g.getStringWithCharsetAt(y,_+E-y,A),{language:w,descriptor:T.toString(),lyrics:y.toString()}},f.ULT=f.USLT,f.UFID=function(y,E,g,w,T){return w=m.readNullTerminatedString(g.getBytesAt(y,E)),y+=w.bytesReadCount,y=g.getBytesAt(y,E-w.bytesReadCount),{ownerIdentifier:w.toString(),identifier:y}};var S="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");u.exports=i},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(i,u,x){function h(E){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},h(E)}function p(E,g){for(var w=0;w<g.length;w++){var T=g[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}function b(E,g,w){return g&&p(E.prototype,g),w&&p(E,w),E}function c(E,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(g&&g.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),g&&m(E,g)}function m(E,g){return m=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w},m(E,g)}function l(E){var g=d();return function(){var w=f(E);if(g){var T=f(this).constructor;w=Reflect.construct(w,arguments,T)}else w=w.apply(this,arguments);if(!w||h(w)!=="object"&&typeof w!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");w=this}return w}}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(E){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},f(E)}x=i("./MediaTagReader"),i("./MediaFileReader");var S=i("./ID3v2FrameReader");i=(function(E){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");return w.apply(this,arguments)}c(g,E);var w=l(g);return b(g,[{key:"_loadData",value:function(T,_){T.loadRange([6,9],{onSuccess:function(){T.loadRange([0,10+T.getSynchsafeInteger32At(6)-1],_)},onError:_.onError})}},{key:"_parseData",value:function(T,_){var A,I=0,k=T.getByteAt(I+3);if(4<k)return{type:"ID3",version:">2.4",tags:{}};var N=T.getByteAt(I+4),Y=T.isBitSetAt(I+5,7),z=T.isBitSetAt(I+5,6),W=T.isBitSetAt(I+5,5),G=T.getSynchsafeInteger32At(I+6);if(I+=10,z)if(k===4){var $=T.getSynchsafeInteger32At(I);I+=$}else $=T.getLongAt(I,!0),I+=$+4;$={type:"ID3",version:"2."+k+"."+N,major:k,revision:N,flags:{unsynchronisation:Y,extended_header:z,experimental_indicator:W,footer_present:!1},size:G,tags:{}},_&&(A=this._expandShortcutTags(_)),_=G+10,$.flags.unsynchronisation&&(T=S.getUnsyncFileReader(T,I,G),I=0,_=T.getSize()),T=S.readFrames(I,_,T,$,A);for(var ge in y)y.hasOwnProperty(ge)&&(A=this._getFrameData(T,y[ge]))&&($.tags[ge]=A);for(var F in T)T.hasOwnProperty(F)&&($.tags[F]=T[F]);return $}},{key:"_getFrameData",value:function(T,_){for(var A=0,I;I=_[A];A++)if(I in T)return T=T[I]instanceof Array?T[I][0]:T[I],T.data}},{key:"getShortcuts",value:function(){return y}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(T){return String.fromCharCode.apply(String,T.slice(0,3))==="ID3"}}]),g})(x);var y={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};u.exports=i},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(i,u,x){function h(g){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(g)}function p(g,w){for(var T=0;T<w.length;T++){var _=w[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}function b(g,w,T){return w&&p(g.prototype,w),T&&p(g,T),g}function c(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),w&&m(g,w)}function m(g,w){return m=Object.setPrototypeOf||function(T,_){return T.__proto__=_,T},m(g,w)}function l(g){var w=d();return function(){var T=f(g);if(w){var _=f(this).constructor;T=Reflect.construct(T,arguments,_)}else T=T.apply(this,arguments);if(!T||h(T)!=="object"&&typeof T!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");T=this}return T}}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(g){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},f(g)}x=i("./MediaTagReader"),i("./MediaFileReader"),i=(function(g){function w(){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");return T.apply(this,arguments)}c(w,g);var T=l(w);return b(w,[{key:"_loadData",value:function(_,A){var I=this;_.loadRange([0,16],{onSuccess:function(){I._loadAtom(_,0,"",A)},onError:A.onError})}},{key:"_loadAtom",value:function(_,A,I,k){if(A>=_.getSize())k.onSuccess();else{var N=this,Y=_.getLongAt(A,!0);if(Y==0||isNaN(Y))k.onSuccess();else{var z=_.getStringAt(A+4,4);if(this._isContainerAtom(z)){z=="meta"&&(A+=4);var W=(I?I+".":"")+z;W==="moov.udta.meta.ilst"?_.loadRange([A,A+Y],k):_.loadRange([A+8,A+8+8],{onSuccess:function(){N._loadAtom(_,A+8,W,k)},onError:k.onError})}else _.loadRange([A+Y,A+Y+8],{onSuccess:function(){N._loadAtom(_,A+Y,I,k)},onError:k.onError})}}}},{key:"_isContainerAtom",value:function(_){return 0<=["moov","udta","meta","ilst"].indexOf(_)}},{key:"_canReadAtom",value:function(_){return _!=="----"}},{key:"_parseData",value:function(_,A){var I={};A=this._expandShortcutTags(A),this._readAtom(I,_,0,_.getSize(),A);for(var k in E)E.hasOwnProperty(k)&&(A=I[E[k]])&&(I[k]=k==="track"?A.data.track:A.data);return{type:"MP4",ftyp:_.getStringAt(8,4),version:_.getLongAt(12,!0),tags:I}}},{key:"_readAtom",value:function(_,A,I,k,N,Y,z){z=z===void 0?"":z+"  ";for(var W=I;W<I+k;){var G=A.getLongAt(W,!0);if(G==0)break;var $=A.getStringAt(W+4,4);if(this._isContainerAtom($)){$=="meta"&&(W+=4),this._readAtom(_,A,W+8,G-8,N,(Y?Y+".":"")+$,z);break}(!N||0<=N.indexOf($))&&Y==="moov.udta.meta.ilst"&&this._canReadAtom($)&&(_[$]=this._readMetadataAtom(A,W)),W+=G}}},{key:"_readMetadataAtom",value:function(_,A){var I=_.getLongAt(A,!0),k=_.getStringAt(A+4,4),N=_.getInteger24At(A+16+1,!0);if(N=S[N],k=="trkn")var Y={track:_.getShortAt(A+16+10,!0),total:_.getShortAt(A+16+14,!0)};else if(k=="disk")Y={disk:_.getShortAt(A+16+10,!0),total:_.getShortAt(A+16+14,!0)};else{A+=24;var z=I-24;switch(k==="covr"&&N==="uint8"&&(N="jpeg"),N){case"text":Y=_.getStringWithCharsetAt(A,z,"utf-8").toString();break;case"uint8":Y=_.getShortAt(A,!1);break;case"int":case"uint":Y=(N=="int"?z==1?_.getSByteAt:z==2?_.getSShortAt:z==4?_.getSLongAt:_.getLongAt:z==1?_.getByteAt:z==2?_.getShortAt:_.getLongAt).call(_,A+(z==8?4:0),!0);break;case"jpeg":case"png":Y={format:"image/"+N,data:_.getBytesAt(A,z)}}}return{id:k,size:I,description:y[k]||"Unknown",data:Y}}},{key:"getShortcuts",value:function(){return E}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(_){return String.fromCharCode.apply(String,_.slice(4,8))==="ftyp"}}]),w})(x);var S={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},y={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},E={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};u.exports=i},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(i,u,x){function h(m,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(m,f.key,f)}}function p(m,l,d){return l&&h(m.prototype,l),d&&h(m,d),m}function b(m,l,d){return l in m?Object.defineProperty(m,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):m[l]=d,m}var c=i("./StringUtils");i=(function(){function m(l){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");b(this,"_isInitialized",void 0),b(this,"_size",void 0),this._isInitialized=!1,this._size=0}return p(m,[{key:"init",value:function(l){var d=this;if(this._isInitialized)setTimeout(l.onSuccess,1);else return this._init({onSuccess:function(){d._isInitialized=!0,l.onSuccess()},onError:l.onError})}},{key:"_init",value:function(l){throw Error("Must implement init function")}},{key:"loadRange",value:function(l,d){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(l){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(l,d){for(var f=Array(d),S=0;S<d;S++)f[S]=this.getByteAt(l+S);return f}},{key:"isBitSetAt",value:function(l,d){return(this.getByteAt(l)&1<<d)!=0}},{key:"getSByteAt",value:function(l){return l=this.getByteAt(l),127<l?l-256:l}},{key:"getShortAt",value:function(l,d){return l=d?(this.getByteAt(l)<<8)+this.getByteAt(l+1):(this.getByteAt(l+1)<<8)+this.getByteAt(l),0>l&&(l+=65536),l}},{key:"getSShortAt",value:function(l,d){return l=this.getShortAt(l,d),32767<l?l-65536:l}},{key:"getLongAt",value:function(l,d){var f=this.getByteAt(l),S=this.getByteAt(l+1),y=this.getByteAt(l+2);return l=this.getByteAt(l+3),d=d?(((f<<8)+S<<8)+y<<8)+l:(((l<<8)+y<<8)+S<<8)+f,0>d&&(d+=4294967296),d}},{key:"getSLongAt",value:function(l,d){return l=this.getLongAt(l,d),2147483647<l?l-4294967296:l}},{key:"getInteger24At",value:function(l,d){var f=this.getByteAt(l),S=this.getByteAt(l+1);return l=this.getByteAt(l+2),d=d?((f<<8)+S<<8)+l:((l<<8)+S<<8)+f,0>d&&(d+=16777216),d}},{key:"getStringAt",value:function(l,d){for(var f=[],S=l,y=0;S<l+d;S++,y++)f[y]=String.fromCharCode(this.getByteAt(S));return f.join("")}},{key:"getStringWithCharsetAt",value:function(l,d,f){switch(l=this.getBytesAt(l,d),(f||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":f=c.readUTF16String(l,f==="utf-16be");break;case"utf-8":f=c.readUTF8String(l);break;default:f=c.readNullTerminatedString(l)}return f}},{key:"getCharAt",value:function(l){return String.fromCharCode(this.getByteAt(l))}},{key:"getSynchsafeInteger32At",value:function(l){var d=this.getByteAt(l),f=this.getByteAt(l+1),S=this.getByteAt(l+2);return this.getByteAt(l+3)&127|(S&127)<<7|(f&127)<<14|(d&127)<<21}}],[{key:"canReadFile",value:function(l){throw Error("Must implement canReadFile function")}}]),m})(),u.exports=i},{"./StringUtils":13}],12:[function(i,u,x){function h(c,m){for(var l=0;l<m.length;l++){var d=m[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function p(c,m,l){return m&&h(c.prototype,m),l&&h(c,l),c}function b(c,m,l){return m in c?Object.defineProperty(c,m,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[m]=l,c}i("./MediaFileReader"),i=(function(){function c(m){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b(this,"_mediaFileReader",void 0),b(this,"_tags",void 0),this._mediaFileReader=m,this._tags=null}return p(c,[{key:"setTagsToRead",value:function(m){return this._tags=m,this}},{key:"read",value:function(m){var l=this;this._mediaFileReader.init({onSuccess:function(){l._loadData(l._mediaFileReader,{onSuccess:function(){try{var d=l._parseData(l._mediaFileReader,l._tags)}catch(f){if(m.onError){m.onError({type:"parseData",info:f.message});return}}m.onSuccess(d)},onError:m.onError})},onError:m.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(m,l){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(m,l){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(m){if(!m)return null;for(var l=[],d=this.getShortcuts(),f=0,S;S=m[f];f++)l=l.concat(d[S]||[S]);return l}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(m){throw Error("Must implement")}}]),c})(),u.exports=i},{"./MediaFileReader":11}],13:[function(i,u,x){function h(m,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(m,f.key,f)}}function p(m,l,d){return l&&h(m.prototype,l),m}function b(m,l,d){return l in m?Object.defineProperty(m,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):m[l]=d,m}var c=(function(){function m(l,d){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");b(this,"_value",void 0),b(this,"bytesReadCount",void 0),b(this,"length",void 0),this._value=l,this.bytesReadCount=d,this.length=l.length}return p(m,[{key:"toString",value:function(){return this._value}}]),m})();u.exports={readUTF16String:function(m,l,d){var f=0,S=1,y=0;d=Math.min(d||m.length,m.length),m[0]==254&&m[1]==255?(l=!0,f=2):m[0]==255&&m[1]==254&&(l=!1,f=2),l&&(S=0,y=1),l=[];for(var E=0;f<d;E++){var g=m[f+S],w=(g<<8)+m[f+y];if(f+=2,w==0)break;216>g||224<=g?l[E]=String.fromCharCode(w):(g=(m[f+S]<<8)+m[f+y],f+=2,l[E]=String.fromCharCode(w,g))}return new c(l.join(""),f)},readUTF8String:function(m,l){var d=0;l=Math.min(l||m.length,m.length),m[0]==239&&m[1]==187&&m[2]==191&&(d=3);for(var f=[],S=0;d<l;S++){var y=m[d++];if(y==0)break;if(128>y)f[S]=String.fromCharCode(y);else if(194<=y&&224>y){var E=m[d++];f[S]=String.fromCharCode(((y&31)<<6)+(E&63))}else if(224<=y&&240>y){E=m[d++];var g=m[d++];f[S]=String.fromCharCode(((y&255)<<12)+((E&63)<<6)+(g&63))}else if(240<=y&&245>y){E=m[d++],g=m[d++];var w=m[d++];g=((y&7)<<18)+((E&63)<<12)+((g&63)<<6)+(w&63)-65536,f[S]=String.fromCharCode((g>>10)+55296,(g&1023)+56320)}}return new c(f.join(""),d)},readNullTerminatedString:function(m,l){var d=[];l=l||m.length;for(var f=0;f<l;){var S=m[f++];if(S==0)break;d[f-1]=String.fromCharCode(S)}return new c(d.join(""),f)}}},{}],14:[function(i,u,x){function h(g){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(g)}function p(g,w){for(var T=0;T<w.length;T++){var _=w[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}function b(g,w,T){return w&&p(g.prototype,w),T&&p(g,T),g}function c(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),w&&m(g,w)}function m(g,w){return m=Object.setPrototypeOf||function(T,_){return T.__proto__=_,T},m(g,w)}function l(g){var w=f();return function(){var T=S(g);if(w){var _=S(this).constructor;T=Reflect.construct(T,arguments,_)}else T=T.apply(this,arguments);return T=!T||h(T)!=="object"&&typeof T!="function"?d(this):T,T}}function d(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(g){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},S(g)}function y(g,w,T){return w in g?Object.defineProperty(g,w,{value:T,enumerable:!0,configurable:!0,writable:!0}):g[w]=T,g}var E=i("./ChunkedFileData");x=(function(g){function w(_){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var A=T.call(this);return y(d(A),"_url",void 0),y(d(A),"_fileData",void 0),A._url=_,A._fileData=new E,A}c(w,g);var T=l(w);return b(w,[{key:"_init",value:function(_){w._config.avoidHeadRequests?this._fetchSizeWithGetRequest(_):this._fetchSizeWithHeadRequest(_)}},{key:"_fetchSizeWithHeadRequest",value:function(_){var A=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(I){(I=A._parseContentLength(I))?(A._size=I,_.onSuccess()):A._fetchSizeWithGetRequest(_)},onError:_.onError})}},{key:"_fetchSizeWithGetRequest",value:function(_){var A=this,I=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",I,{onSuccess:function(k){var N=A._parseContentRange(k);if(k=A._getXhrResponseContent(k),N){if(N.instanceLength==null){A._fetchEntireFile(_);return}A._size=N.instanceLength}else A._size=k.length;A._fileData.addData(0,k),_.onSuccess()},onError:_.onError})}},{key:"_fetchEntireFile",value:function(_){var A=this;this._makeXHRRequest("GET",null,{onSuccess:function(I){I=A._getXhrResponseContent(I),A._size=I.length,A._fileData.addData(0,I),_.onSuccess()},onError:_.onError})}},{key:"_getXhrResponseContent",value:function(_){return _.responseBody||_.responseText||""}},{key:"_parseContentLength",value:function(_){return _=this._getResponseHeader(_,"Content-Length"),_==null?_:parseInt(_,10)}},{key:"_parseContentRange",value:function(_){if(_=this._getResponseHeader(_,"Content-Range")){var A=_.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!A)throw Error("FIXME: Unknown Content-Range syntax: "+_);return{firstBytePosition:parseInt(A[1],10),lastBytePosition:parseInt(A[2],10),instanceLength:A[3]?parseInt(A[3],10):null}}return null}},{key:"loadRange",value:function(_,A){var I=this;I._fileData.hasDataRange(_[0],Math.min(I._size,_[1]))?setTimeout(A.onSuccess,1):(_=this._roundRangeToChunkMultiple(_),_[1]=Math.min(I._size,_[1]),this._makeXHRRequest("GET",_,{onSuccess:function(k){k=I._getXhrResponseContent(k),I._fileData.addData(_[0],k),A.onSuccess()},onError:A.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(_){return[_[0],_[0]+1024*Math.ceil((_[1]-_[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(_,A,I){var k=this._createXHRObject();k.open(_,this._url);var N=function(){k.status===200||k.status===206?I.onSuccess(k):I.onError&&I.onError({type:"xhr",info:"Unexpected HTTP status "+k.status+".",xhr:k}),k=null};typeof k.onload<"u"?(k.onload=N,k.onerror=function(){I.onError&&I.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:k})}):k.onreadystatechange=function(){k.readyState===4&&N()},w._config.timeoutInSec&&(k.timeout=1e3*w._config.timeoutInSec,k.ontimeout=function(){I.onError&&I.onError({type:"xhr",info:"Timeout after "+k.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:k})}),k.overrideMimeType("text/plain; charset=x-user-defined"),A&&this._setRequestHeader(k,"Range","bytes="+A[0]+"-"+A[1]),this._setRequestHeader(k,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),k.send(null)}},{key:"_setRequestHeader",value:function(_,A,I){0>w._config.disallowedXhrHeaders.indexOf(A.toLowerCase())&&_.setRequestHeader(A,I)}},{key:"_hasResponseHeader",value:function(_,A){if(_=_.getAllResponseHeaders(),!_)return!1;_=_.split(`\r
`);for(var I=[],k=0;k<_.length;k++)I[k]=_[k].split(":")[0].toLowerCase();return 0<=I.indexOf(A.toLowerCase())}},{key:"_getResponseHeader",value:function(_,A){return this._hasResponseHeader(_,A)?_.getResponseHeader(A):null}},{key:"getByteAt",value:function(_){return this._fileData.getByteAt(_).charCodeAt(0)&255}},{key:"_isWebWorker",value:function(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if(typeof window>"u"&&!this._isWebWorker())return new(i("xhr2")).XMLHttpRequest;if(typeof XMLHttpRequest<"u")return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(_){return typeof _=="string"&&/^[a-z]+:\/\//i.test(_)}},{key:"setConfig",value:function(_){for(var A in _)_.hasOwnProperty(A)&&(this._config[A]=_[A]);for(_=this._config.disallowedXhrHeaders,A=0;A<_.length;A++)_[A]=_[A].toLowerCase()}}]),w})(i("./MediaFileReader")),y(x,"_config",void 0),x._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},u.exports=x},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(i,u,x){function h(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function p(A,I){for(var k=0;k<I.length;k++){var N=I[k];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(A,N.key,N)}}function b(A,I,k){return I&&p(A.prototype,I),k&&p(A,k),A}function c(A,I,k){return I in A?Object.defineProperty(A,I,{value:k,enumerable:!0,configurable:!0,writable:!0}):A[I]=k,A}function m(A,I){var k=0>A.offset&&(-A.offset>I||0<A.offset+A.length);return!(0<=A.offset&&A.offset+A.length>=I||k)}i("./MediaFileReader");var l=i("./XhrFileReader"),d=i("./BlobFileReader"),f=i("./ArrayFileReader");i("./MediaTagReader");var S=i("./ID3v1TagReader"),y=i("./ID3v2TagReader"),E=i("./MP4TagReader"),g=i("./FLACTagReader"),w=[],T=[],_=(function(){function A(I){h(this,A),c(this,"_file",void 0),c(this,"_tagsToRead",void 0),c(this,"_fileReader",void 0),c(this,"_tagReader",void 0),this._file=I}return b(A,[{key:"setTagsToRead",value:function(I){return this._tagsToRead=I,this}},{key:"setFileReader",value:function(I){return this._fileReader=I,this}},{key:"setTagReader",value:function(I){return this._tagReader=I,this}},{key:"read",value:function(I){var k=new(this._getFileReader())(this._file),N=this;k.init({onSuccess:function(){N._getTagReader(k,{onSuccess:function(Y){new Y(k).setTagsToRead(N._tagsToRead).read(I)},onError:I.onError})},onError:I.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var I=0;I<w.length;I++)if(w[I].canReadFile(this._file))return w[I];throw Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(I,k){if(this._tagReader){var N=this._tagReader;setTimeout(function(){k.onSuccess(N)},1)}else this._findTagReader(I,k)}},{key:"_findTagReader",value:function(I,k){for(var N=[],Y=[],z=I.getSize(),W=0;W<T.length;W++){var G=T[W].getTagIdentifierByteRange();m(G,z)&&(0<=G.offset&&G.offset<z/2||0>G.offset&&G.offset<-z/2?N.push(T[W]):Y.push(T[W]))}var $=!1;W={onSuccess:function(){if($){for(var ge=0;ge<T.length;ge++){var F=T[ge].getTagIdentifierByteRange();if(m(F,z)){try{var le=I.getBytesAt(0<=F.offset?F.offset:F.offset+z,F.length)}catch(me){k.onError&&k.onError({type:"fileReader",info:me.message});return}if(T[ge].canReadTagFormat(le)){k.onSuccess(T[ge]);return}}}k.onError&&k.onError({type:"tagFormat",info:"No suitable tag reader found"})}else $=!0},onError:k.onError},this._loadTagIdentifierRanges(I,N,W),this._loadTagIdentifierRanges(I,Y,W)}},{key:"_loadTagIdentifierRanges",value:function(I,k,N){if(k.length===0)setTimeout(N.onSuccess,1);else{for(var Y=[Number.MAX_VALUE,0],z=I.getSize(),W=0;W<k.length;W++){var G=k[W].getTagIdentifierByteRange(),$=0<=G.offset?G.offset:G.offset+z;G=$+G.length-1,Y[0]=Math.min($,Y[0]),Y[1]=Math.max(G,Y[1])}I.loadRange(Y,N)}}}]),A})();x=(function(){function A(){h(this,A)}return b(A,null,[{key:"addFileReader",value:function(I){return w.push(I),A}},{key:"addTagReader",value:function(I){return T.push(I),A}},{key:"removeTagReader",value:function(I){return I=T.indexOf(I),0<=I&&T.splice(I,1),A}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){l.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(I){l.setConfig({disallowedXhrHeaders:I})}},{key:"setXhrTimeoutInSec",value:function(I){l.setConfig({timeoutInSec:I})}}]),A})(),x.addFileReader(l).addFileReader(d).addFileReader(f).addTagReader(y).addTagReader(S).addTagReader(E).addTagReader(g),typeof process>"u"||process.browser||(i=typeof navigator<"u"&&navigator.product==="ReactNative"?i("./ReactNativeFileReader"):i("./NodeFileReader"),x.addFileReader(i)),u.exports={read:function(A,I){new _(A).read(I)},Reader:_,Config:x}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)})})(jsmediatags_min$1)),jsmediatags_min$1.exports}var jsmediatags_minExports=requireJsmediatags_min();const jsmediatags=getDefaultExportFromCjs(jsmediatags_minExports),LONG_TRACK_SECONDS=600,tagNumberKeys={track:["track","tracknumber","track_num","trackno","tracknum","trck","trk","tracknumbertext"],disc:["disc","discnumber","disc_num","discno","discnum","tpos","part_of_a_set","partofset","set"]},coerceTagNumber=r=>{if(r!=null){if(typeof r=="number"&&!Number.isNaN(r))return r;if(typeof r=="string"){const a=r.match(/(\d{1,3})/);if(a)return parseInt(a[1],10)}if(Array.isArray(r))for(const a of r){const s=coerceTagNumber(a);if(s!==void 0)return s}if(typeof r=="object"){const a=r.data??r.text;return coerceTagNumber(a)}}},extractNumberFromTags=(r,a)=>{for(const s of a){const i=r[s];if(i!==void 0){const h=coerceTagNumber(i);if(h!==void 0)return h}const u=s.toLowerCase();if(u!==s&&r[u]!==void 0){const h=coerceTagNumber(r[u]);if(h!==void 0)return h}const x=s.toUpperCase();if(x!==s&&r[x]!==void 0){const h=coerceTagNumber(r[x]);if(h!==void 0)return h}}},stripExtension=r=>r.replace(/\.[^.]+$/,""),extractNumbersFromFilename=r=>{const a=stripExtension(r),s=a.toLowerCase(),i={},u=s.match(/(?:disc|cd)\s*0*(\d{1,2})/);u&&(i.discNumber=parseInt(u[1],10));const x=a.match(/^\s*0*(\d{1,3})(?=[\s._-])/);if(x)i.trackNumber=parseInt(x[1],10);else{const h=a.match(/(?:\s|[-_.])0*(\d{1,3})(?=\s|[-_.]|$)/);if(h){const p=parseInt(h[1],10);p<=99&&(i.trackNumber=p)}else{const p=a.match(/0*(\d{1,3})/g);if(p){const b=p.map(c=>parseInt(c,10)).find(c=>c>0&&c<=99);b&&(i.trackNumber=b)}}}return i},extractDiscFromPath=r=>{if(!r)return;const a=r.toLowerCase().match(/(?:disc|cd)\s*0*(\d{1,2})/);return a?parseInt(a[1],10):void 0},sanitizeSegment=r=>r.replace(/_/g," ").replace(/\s+/g," ").trim(),removeTrackNumberPrefix=r=>r.replace(/^\s*\d{1,3}[\s._-]+/,"").trim(),deriveFromPath=r=>{if(!r)return{};const a=r.split("/").filter(Boolean);return a.length>=3?{artist:sanitizeSegment(a[a.length-3]),album:sanitizeSegment(a[a.length-2])}:a.length>=2?{album:sanitizeSegment(a[a.length-2])}:{}},deriveFromFilename=r=>{const a=stripExtension(r),s=a.split(" - ").map(sanitizeSegment);if(s.length>=3){const i=s[0],u=s[1],x=removeTrackNumberPrefix(s.slice(2).join(" - "));return{artist:i,album:u,title:x}}if(s.length===2){const i=s[0],u=removeTrackNumberPrefix(s[1]);return{artist:i,title:u}}return{title:removeTrackNumberPrefix(a)}},STORE_NAME$2="localTracks",openDB=()=>openBrickDB(),saveTrackToDB=async r=>{try{console.log("Saving track to DB:",r.id,r.name);const u=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).put(r);return new Promise((x,h)=>{u.onsuccess=()=>{console.log("Successfully saved track to IndexedDB:",r.id),x()},u.onerror=()=>{console.error("Error saving track to IndexedDB:",u.error),h(u.error)}})}catch(a){throw console.error("Error saving track:",a),a}},getAllTracksFromDB=async()=>{const r=await openDB();return new Promise((a,s)=>{const x=r.transaction([STORE_NAME$2],"readonly").objectStore(STORE_NAME$2).getAll();x.onsuccess=()=>a(x.result),x.onerror=()=>s(x.error)})},deleteTrackFromDB=async r=>{const a=await openDB();return new Promise((s,i)=>{const h=a.transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).delete(r);h.onsuccess=()=>s(),h.onerror=()=>i(h.error)})};function LocalMusicUploader({onPlayTrack:r,onPlayAlbum:a,currentPlayingId:s,isPlaying:i}){const[u,x]=reactExports.useState([]),[h,p]=reactExports.useState(!1),[b,c]=reactExports.useState(!0),[m,l]=reactExports.useState(null),[d,f]=reactExports.useState("tracks"),[S,y]=reactExports.useState("added"),[E,g]=reactExports.useState(null),[w,T]=reactExports.useState(1),[_,A]=reactExports.useState(25),I=reactExports.useRef(null),k=reactExports.useRef(null),N=reactExports.useRef(!1),Y=()=>p(F=>!F);reactExports.useEffect(()=>{},[]),reactExports.useEffect(()=>((async()=>{try{console.log("Starting to load tracks from IndexedDB..."),localStorage.getItem("brick_local_tracks")&&(console.log("Migrating from localStorage to IndexedDB..."),localStorage.removeItem("brick_local_tracks"));const le=await getAllTracksFromDB();console.log("Retrieved tracks from IndexedDB:",le.length);const me=Date.now(),H=le.map((pe,L)=>{try{console.log("Processing track:",pe.id,pe.name);const D=URL.createObjectURL(pe.file);return console.log("Successfully created blob URL for track:",pe.id),{...pe,addedAt:pe.addedAt??me+L,url:D}}catch(D){return console.error("Failed to process track:",pe.id,D),null}}).filter(Boolean);console.log("Successfully loaded tracks:",H.length),x(H)}catch(le){console.error("Error loading local tracks from IndexedDB:",le)}finally{c(!1)}})(),()=>{u.forEach(le=>{le.url?.startsWith("blob:")&&URL.revokeObjectURL(le.url)})}),[]);const z=async F=>{const le=F.target.files;if(!le)return;const me=/\.(flac|wav|mp3|m4a|aac|ogg|aif|aiff|alac|wv|mka)$/i,H=Array.from(le).filter(Z=>{const be=typeof Z.type=="string"&&Z.type.startsWith("audio/"),_e=me.test(Z.name);return be||_e});if(H.length===0){console.warn("No audio files detected in selection.");return}console.log("Processing",H.length,"audio files..."),l({processed:0,total:H.length});let pe=new Set,L=new Map;try{const Z=await getAllTracksFromDB();pe=new Set(Z.map(be=>`${be.file?.name||be.name}-${be.file?.size||be.size}`)),Z.forEach(be=>L.set(`${be.file?.name||be.name}-${be.file?.size||be.size}`,be))}catch(Z){console.warn("Unable to read existing tracks for dedupe:",Z)}const D=[],K=Date.now(),ae=(Z,be,_e)=>new Promise(te=>{const q=setTimeout(()=>te(_e),be);Z.then(Q=>{clearTimeout(q),te(Q)}).catch(()=>{clearTimeout(q),te(_e)})}),oe=async(Z,be)=>{const _e=`${Z.name}-${Z.size}`;if(pe.has(_e)){const Te=L.get(_e);try{const ye=Te?.file?.webkitRelativePath||Z.webkitRelativePath,Ie=deriveFromPath(ye),He=deriveFromFilename(Z.name),Ke=Te?.artist==="Unknown Artist"?He.artist||Ie.artist:void 0,Je=Te?.album==="Unknown Album"?Ie.album||He.album:void 0,M=!Te?.name||/^\d{1,3}[\s._-]/.test(Te?.name)?He.title:void 0;if(Ke||Je||M){const R={...Te,artist:Ke||Te.artist,album:Je||Te.album,albumArtist:Te.albumArtist||Ke||Te.artist,name:M||Te.name};await saveTrackToDB(R),x(C=>C.map(U=>U.id===R.id?{...U,...R}:U)),console.log("Updated existing track metadata from path/filename:",R.id)}else console.log("Skipping duplicate file:",Z.name)}catch(ye){console.warn("Failed to update duplicate track metadata:",ye)}return l(ye=>ye?{...ye,processed:ye.processed+1}:null),null}const te=(Z.type?.split("/")[1]||Z.name.split(".").pop()||"UNKNOWN").toUpperCase(),q=URL.createObjectURL(Z);let Q=null,ce=null;try{Q=await ae(new Promise(Te=>{try{jsmediatags.read(Z,{onSuccess:ye=>Te(ye),onError:()=>Te(null)})}catch{Te(null)}}),12e3,null)}catch{}if(!Q)try{const{parseBlob:Te}=await __vitePreload(async()=>{const{parseBlob:Ie}=await Promise.resolve().then(()=>index);return{parseBlob:Ie}},void 0),ye=await ae(Te(Z),12e3,null);if(ye&&ye.common){const Ie=ye.common;ce={tags:{title:Ie.title,artist:(Array.isArray(Ie.artists)&&Ie.artists.length?Ie.artists[0]:Ie.artist)??void 0,album:Ie.album,album_artist:Ie.albumartist,genre:(Array.isArray(Ie.genre)?Ie.genre[0]:Ie.genre)??void 0,year:Ie.year?String(Ie.year):void 0,picture:Ie.picture&&Ie.picture.length?{data:Ie.picture[0].data,format:Ie.picture[0].format}:void 0,track:Ie.track?Ie.track.no??Ie.track.of??Ie.track:void 0,disc:Ie.disk?Ie.disk.no??Ie.disk.of??Ie.disk:void 0}}}}catch{}const Ee=new Audio;Ee.preload="metadata",Ee.src=q;let je,Ce,ee,Se;try{const{extractAudioMeta:Te}=await __vitePreload(async()=>{const{extractAudioMeta:Ie}=await Promise.resolve().then(()=>audioMetadata);return{extractAudioMeta:Ie}},void 0),ye=await ae(Te(Z),8e3,{});je=ye.bitDepth,Ce=ye.sampleRate,ee=ye.bitrateKbps,Se=ye.codecLabel}catch{}return await new Promise(Te=>{const ye=()=>{const He=ce?.tags||Q?.tags||{},Ke=extractNumbersFromFilename(Z.name),Je=extractDiscFromPath(Z.webkitRelativePath),M=extractNumberFromTags(He,tagNumberKeys.track),R=extractNumberFromTags(He,tagNumberKeys.disc),C=M??Ke.trackNumber,U=R??Je??Ke.discNumber;let ne;if(He.picture){const{data:bt,format:nr}=He.picture;let Vt="";for(let Ct=0;Ct<bt.length;Ct++)Vt+=String.fromCharCode(bt[Ct]);ne=`data:${nr};base64,${btoa(Vt)}`}const fe=Z.webkitRelativePath,ke=deriveFromPath(fe),Ve=deriveFromFilename(Z.name),tt=He.title||Ve.title||stripExtension(Z.name),et=He.artist||Ve.artist||ke.artist||"Unknown Artist",rt=He.album||ke.album||Ve.album||"Unknown Album",Ze=`local-${Date.now()}-${be}`,Mt=Number.isFinite(Ee.duration)&&Ee.duration>0?Ee.duration:0,wt=Mt>LONG_TRACK_SECONDS,Ut={id:Ze,name:tt,artist:et,album:rt,albumArtist:He.album_artist||et,year:He.year,trackNumber:C,discNumber:U,genre:He.genre,addedAt:K+be,file:Z,url:q,duration:Mt,format:te,size:Z.size,coverArt:ne,bitDepth:je,sampleRate:Ce,bitrateKbps:ee,codecLabel:Se||te,isLong:wt};D.push(Ut),pe.add(_e),l(bt=>bt?{...bt,processed:bt.processed+1}:null),Te(null)},Ie=setTimeout(ye,4e3);Ee.addEventListener("loadedmetadata",()=>{clearTimeout(Ie),ye()}),Ee.addEventListener("error",()=>{clearTimeout(Ie),ye()})}),null},ue=Math.min(5,H.length);let we=0;const xe=()=>{if(we>=H.length)return Promise.resolve();const Z=we,be=oe(H[Z],Z);return we+=1,be.then(()=>xe())},se=Array.from({length:ue},()=>xe());await Promise.all(se),console.log("Adding",D.length,"new tracks to state"),x([...u,...D]),p(!0),l(null),I.current&&(I.current.value=""),console.log("Saving tracks to database...");try{const _e=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2);await Promise.all(D.map(te=>new Promise((q,Q)=>{const ce=_e.put(te);ce.onsuccess=()=>q(),ce.onerror=()=>Q(ce.error)})))}catch(Z){console.error("Failed bulk save, falling back to per-track:",Z);for(const be of D)try{await saveTrackToDB(be)}catch(_e){console.error("Failed to save track:",be.id,_e)}}},W=async F=>{console.log("Deleting track:",F);const le=u.find(me=>me.id===F);le?.url&&le.url.startsWith("blob:")&&URL.revokeObjectURL(le.url),x(u.filter(me=>me.id!==F));try{await deleteTrackFromDB(F),console.log("Successfully deleted track:",F)}catch(me){console.error("Error deleting track from IndexedDB:",me)}},G=F=>{const le=Math.floor(F/60),me=Math.floor(F%60);return`${le}:${me.toString().padStart(2,"0")}`},$=u.reduce((F,le)=>{const me=`${le.album}:::${le.albumArtist||le.artist}`;return F[me]||(F[me]=[]),F[me].push(le),F},{});Object.keys($).forEach(F=>{$[F].sort((le,me)=>{const H=le.discNumber||1,pe=me.discNumber||1;if(H!==pe)return H-pe;const L=(le.trackNumber||0)-(me.trackNumber||0);return L!==0?L:(le.addedAt||0)-(me.addedAt||0)})});const ge=Object.entries($).map(([F,le])=>{const[me,H]=F.split(":::");return{name:me,artist:H,tracks:le,coverArt:le.find(pe=>pe.coverArt)?.coverArt,year:le.find(pe=>pe.year)?.year,totalDuration:le.reduce((pe,L)=>pe+(L.duration??0),0)}});return reactExports.useEffect(()=>{T(1)},[d,S,E,u.length]),jsxRuntimeExports.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:`p-4 flex items-center justify-between cursor-pointer local-vault-header ${h?"expanded":""}`,onClick:Y,onKeyDown:F=>{(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),Y())},role:"button",tabIndex:0,"aria-expanded":h,"aria-controls":"local-vault-panel",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 local-vault-info",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mono local-vault-title",style:{color:"#e0e0e0"},children:"Local Vault"}),jsxRuntimeExports.jsxs("p",{className:"mono local-vault-meta",style:{color:"#a0a0a0"},children:[u.length," ",u.length===1?"track":"tracks","  Private only"]})]})]}),jsxRuntimeExports.jsx("div",{className:"local-vault-indicator","aria-hidden":"true"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center local-vault-actions",children:[jsxRuntimeExports.jsxs("button",{onClick:F=>{F.stopPropagation(),I.current?.click()},className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:[jsxRuntimeExports.jsx(Upload,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.8rem"},children:"Import"})]}),jsxRuntimeExports.jsxs("button",{onClick:F=>{F.stopPropagation(),k.current?.click()},className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},title:"Import Folder (preserves artist/album path)",children:[jsxRuntimeExports.jsx(FolderOpen,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.8rem"},children:"Import Folder"})]}),jsxRuntimeExports.jsx("button",{onClick:F=>{F.stopPropagation(),repairMetadata()},className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.12)"},title:"Repair metadata from filenames",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem"},children:"Repair Metadata"})})]}),jsxRuntimeExports.jsx("input",{ref:I,type:"file",accept:"audio/*,.flac,.wav,.mp3,.m4a,.aac,.ogg,.aif,.aiff,.alac,.wv,.mka",multiple:!0,onChange:z,className:"hidden"}),jsxRuntimeExports.jsx("input",{ref:k,type:"file",multiple:!0,onChange:z,className:"hidden",accept:"audio/*,.flac,.wav,.mp3,.m4a,.aac,.ogg,.aif,.aiff,.alac,.wv,.mka",webkitdirectory:"true"})]}),jsxRuntimeExports.jsx("div",{className:`hydraulic-panel ${h?"open":""}`,id:"local-vault-panel",children:jsxRuntimeExports.jsx("div",{className:"hydraulic-content",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[m&&jsxRuntimeExports.jsxs("div",{className:"mb-3 px-3 py-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:["Importing ",m.processed,"/",m.total," files..."]}),jsxRuntimeExports.jsx("div",{className:"w-full h-1 rounded-full mt-2",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full",style:{width:`${m.processed/Math.max(1,m.total)*100}%`,background:"linear-gradient(to right, #d32f2f, #b71c1c)"}})})]}),b?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.85rem"},children:"Loading tracks..."})]}):u.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.85rem"},children:"No local tracks imported yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:"Import FLAC, WAV, or MP3 files to play privately"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>f("tracks"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:d==="tracks"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${d==="tracks"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(ListMusic,{size:14,color:d==="tracks"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:d==="tracks"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Tracks"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>f("albums"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:d==="albums"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${d==="albums"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Album,{size:14,color:d==="albums"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:d==="albums"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Albums"})]}),d==="tracks"&&jsxRuntimeExports.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Sort:"}),jsxRuntimeExports.jsxs("select",{value:S,onChange:F=>y(F.target.value),className:"mono px-3 py-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:"added",children:"Added"}),jsxRuntimeExports.jsx("option",{value:"title",children:"AZ"}),jsxRuntimeExports.jsx("option",{value:"artist",children:"Artist"})]})]})]}),E&&d==="albums"&&jsxRuntimeExports.jsx("button",{onClick:()=>g(null),className:"flex items-center gap-2 px-3 py-2 rounded-lg mb-4 transition-all duration-200 hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:" Back to Albums"})}),d==="tracks"?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[(()=>{const F=[...u];S==="title"?F.sort((L,D)=>(L.name||"").localeCompare(D.name||"",void 0,{sensitivity:"base"})):S==="artist"?F.sort((L,D)=>(L.artist||"").localeCompare(D.artist||"",void 0,{sensitivity:"base"})):F.sort((L,D)=>(L.addedAt||0)-(D.addedAt||0));const le=F.length,me=(w-1)*_,H=Math.min(me+_,le);return F.slice(me,H)})().map(F=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center gap-4 p-3 rounded-lg transition-all duration-200",onClick:()=>{if(!N.current){N.current=!0;try{r(F)}finally{setTimeout(()=>{N.current=!1},300)}}},style:{backgroundColor:s===F.id?"rgba(211, 47, 47, 0.1)":"#252525",border:`1px solid ${s===F.id?"#d32f2f":"#333333"}`},children:[F.coverArt?jsxRuntimeExports.jsx("img",{src:F.coverArt,alt:F.album,className:"flex-shrink-0 w-12 h-12 rounded object-cover"}):jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded flex items-center justify-center",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:20,color:"#666666"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem"},children:F.name}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[F.artist,"  ",F.album]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{backgroundColor:"#1a1a1a",color:"#d32f2f",fontSize:"0.65rem"},children:F.format}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:G(F.duration??0)})]})]}),jsxRuntimeExports.jsx("button",{onClick:le=>{if(le.stopPropagation(),!N.current){N.current=!0;try{r(F)}finally{setTimeout(()=>{N.current=!1},300)}}},className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:s===F.id?"#d32f2f":"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:s===F.id&&i?jsxRuntimeExports.jsx(Pause,{size:16,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:16,color:s===F.id?"#ffffff":"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:le=>{le.stopPropagation(),W(F.id)},className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#d32f2f"})})]},F.id)),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:_,onChange:F=>A(parseInt(F.target.value,10)||25),className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>T(F=>Math.max(1,F-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:w}),jsxRuntimeExports.jsx("button",{onClick:()=>T(F=>F+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Next"})]})]})]}):E?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:(()=>{const F=ge.find(D=>D.name===E.name&&D.artist===E.artist);if(!F)return null;const le=F.tracks,me={};let H=1,pe=0;return le.forEach((D,K)=>{const ae=D.trackNumber??K+1;let oe=D.discNumber??void 0;oe===void 0?(K===0?H=1:ae<pe&&(H+=1),oe=H):H=oe,pe=ae;const ue=oe??1;me[ue]||(me[ue]={disc:ue,items:[]}),me[ue].items.push({track:D,index:K})}),Object.values(me).sort((D,K)=>D.disc-K.disc).map(D=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 px-3 py-2 mb-2 mt-4",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"8px"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.75rem",fontWeight:600},children:["DISC ",D.disc]})}),D.items.map(({track:K,index:ae})=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-lg transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:s===K.id?"rgba(211, 47, 47, 0.1)":"#1a1a1a",border:`1px solid ${s===K.id?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-8 text-center",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:K.trackNumber??ae+1})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-0",style:{alignItems:"center"},children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem",margin:0,lineHeight:"1.2"},children:K.name}),K.codecLabel&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0"},children:String(K.codecLabel).toUpperCase()}),(K.bitDepth||K.sampleRate)&&jsxRuntimeExports.jsxs("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",width:"136px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",padding:"0 8px",fontSize:"0.72rem"},children:[jsxRuntimeExports.jsx("span",{style:{color:K.bitDepth===24?"#c6a700":"#a0a0a0"},children:K.bitDepth?`${K.bitDepth}-bit`:""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:K.sampleRate?`${K.sampleRate}kHz`:""})]})]}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.7rem",marginTop:"2px",lineHeight:"1.2"},children:[K.artist,"  ",G(K.duration??0)]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(!N.current){N.current=!0;try{r(K)}finally{setTimeout(()=>{N.current=!1},300)}}},className:"flex-shrink-0 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200",style:{backgroundColor:s===K.id?"#d32f2f":"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:i&&s===K.id?jsxRuntimeExports.jsx(Pause,{size:16,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:16,color:s===K.id?"#ffffff":"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>W(K.id),className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#d32f2f"})})]},K.id))]},`disc-${D.disc}`))})()}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(()=>{const F=ge.length,le=(w-1)*_,me=Math.min(le+_,F);return ge.slice(le,me)})().map((F,le)=>jsxRuntimeExports.jsxs("div",{className:"group rounded-lg overflow-hidden transition-all duration-200 hover:scale-105 cursor-pointer",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:()=>g({name:F.name,artist:F.artist}),children:[jsxRuntimeExports.jsxs("div",{className:"relative aspect-square",children:[F.coverArt?jsxRuntimeExports.jsx("img",{src:F.coverArt,alt:F.name,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx(Album,{size:48,color:"#666666"})}),jsxRuntimeExports.jsx("button",{onClick:me=>{me.stopPropagation(),a?.(F.tracks)},className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:24,color:"#ffffff"})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem"},children:F.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:F.artist}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[F.year&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:F.year}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:[F.tracks.length," tracks"]})]})]})]},`${F.name}-${F.artist}-${le}`))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:_,onChange:F=>A(parseInt(F.target.value,10)||25),className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>T(F=>Math.max(1,F-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:w}),jsxRuntimeExports.jsx("button",{onClick:()=>T(F=>F+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Next"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.05)",border:"1px solid rgba(211, 47, 47, 0.2)"},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:" Local files are stored in your browser and only playable on this device. They cannot be shared or accessed by others."})})]})})})]})}async function repairMetadata(){try{const s=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2),i=await new Promise((x,h)=>{const p=s.getAll();p.onsuccess=()=>x(p.result),p.onerror=()=>h(p.error)});let u=0;for(const x of i){const h=deriveFromFilename(x.file?.name||x.name||""),p=!x.artist||x.artist==="Unknown Artist",b=!x.album||x.album==="Unknown Album",c=!x.name||/^\d{1,3}[\s._-]/.test(x.name),m={...x,artist:p&&h.artist||x.artist,album:b&&h.album||x.album,name:c&&h.title||x.name,albumArtist:x.albumArtist||p&&h.artist||x.artist};(m.artist!==x.artist||m.album!==x.album||m.name!==x.name||m.albumArtist!==x.albumArtist)&&(await new Promise((l,d)=>{const f=s.put(m);f.onsuccess=()=>l(),f.onerror=()=>d(f.error)}),u+=1)}try{const h=(await getAllTracksFromDB()).map(p=>({...p,url:p.url||(p.file?URL.createObjectURL(p.file):"")}));window.dispatchEvent(new CustomEvent("brick:local-tracks-refreshed",{detail:{count:u,tracks:h}}))}catch{}console.log(`Repair complete: updated ${u} tracks`)}catch(r){console.error("Repair metadata failed:",r)}}const mockCurrentUser={name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400",connectionsUsed:12,connectionsMax:20,tier:"Mason"},mockArtists=[{id:"artist-1",name:"Pink Floyd",image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800",globalChosenUsers:234567,genre:"Progressive Rock"},{id:"artist-2",name:"David Bowie",image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",globalChosenUsers:198432,genre:"Art Rock"},{id:"artist-3",name:"Luna Chen",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",globalChosenUsers:15203,genre:"Jazz Fusion"},{id:"artist-4",name:"Broken Compass",image:"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400",globalChosenUsers:6892,genre:"Post-Rock"}],mockTracks=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"},{id:"track-4",title:"Cement Horizon",artist:"Broken Compass",album:"The Wall",duration:"6:12",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"}],mockPlaylists=[{id:"playlist-1",name:"Foundation Mix",coverImage:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",trackCount:24,isPublic:!0,hiRes:!0,creator:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},structuralIntegrity:85,tracks:[mockTracks[0],mockTracks[1],mockTracks[2],mockTracks[3]]},{id:"playlist-2",name:"Industrial Lounge",coverImage:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",trackCount:18,isPublic:!0,hiRes:!0,creator:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},structuralIntegrity:92,tracks:[mockTracks[1],mockTracks[2],mockTracks[3],mockTracks[0]]},{id:"playlist-3",name:"Night Builds",coverImage:"https://images.unsplash.com/photo-1690013429722-87852aae164b?w=400",trackCount:32,isPublic:!0,hiRes:!1,creator:{id:"user-1",name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400"},structuralIntegrity:78,tracks:[mockTracks[2],mockTracks[3],mockTracks[0],mockTracks[1]]},{id:"playlist-4",name:"Concrete Soul",coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",trackCount:15,isPublic:!0,hiRes:!0,creator:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},structuralIntegrity:88,tracks:[mockTracks[3],mockTracks[0],mockTracks[1],mockTracks[2]]},{id:"playlist-5",name:"Mortar Sessions",coverImage:"https://images.unsplash.com/photo-1620456029959-f27e9935cbb9?w=400",trackCount:21,isPublic:!0,hiRes:!0,creator:{id:"user-5",name:"Casey Wu",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"},structuralIntegrity:95,tracks:[mockTracks[0],mockTracks[2],mockTracks[1],mockTracks[3]]}],mockConnections$1=[{id:"conn-1",user:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},matchScore:88,mutualArtists:["Nora Vex","Luna Chen","Broken Compass"],connectedDate:"2025-10-15"},{id:"conn-2",user:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},matchScore:82,mutualArtists:["The Midnight Architects","Luna Chen"],connectedDate:"2025-11-02"},{id:"conn-3",user:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},matchScore:76,mutualArtists:["Nora Vex","Broken Compass"],connectedDate:"2025-11-10"}],mockFeedEvents=[{id:"event-1",type:"playlist_created",timestamp:"2025-11-22T14:30:00Z",data:{user:mockConnections$1[0].user,playlist:mockPlaylists[0]}},{id:"event-2",type:"connection_formed",timestamp:"2025-11-21T09:15:00Z",data:{userA:mockConnections$1[1].user,userB:{id:"user-6",name:"Riley Martinez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"},matchScore:84}},{id:"event-3",type:"patronage_update",timestamp:"2025-11-20T18:45:00Z",data:{user:mockConnections$1[0].user,artist:mockArtists[0]}},{id:"event-4",type:"playlist_created",timestamp:"2025-11-19T11:20:00Z",data:{user:mockConnections$1[2].user,playlist:mockPlaylists[3]}}],STORE_NAME$1="recentlyPlayedTracks",LOCAL_TRACK_STORE="localTracks";async function openRecentlyPlayedDB(){return console.log(`Opening recently played tracks DB, version ${DB_VERSION$1}`),openBrickDB()}async function getLocalTrackById(r){try{const a=await openBrickDB();return a.objectStoreNames.contains(LOCAL_TRACK_STORE)?await new Promise(s=>{const x=a.transaction([LOCAL_TRACK_STORE],"readonly").objectStore(LOCAL_TRACK_STORE).get(r);x.onsuccess=()=>s(x.result||null),x.onerror=()=>s(null)}):null}catch(a){return console.error("Failed to load local track for recent playback",a),null}}async function addRecentlyPlayedTrack(r){console.log("addRecentlyPlayedTrack called with:",r);const i=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readwrite").objectStore(STORE_NAME$1);return new Promise((u,x)=>{const h=i.put({...r,playedAt:Date.now()});h.onsuccess=()=>{console.log("Successfully added track to recently played:",r.trackTitle),u()},h.onerror=()=>{console.error("Failed to add track to recently played:",h.error),x(h.error)}})}async function getRecentlyPlayedTracks(r=10){console.log("getRecentlyPlayedTracks called with limit:",r);const u=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readonly").objectStore(STORE_NAME$1).index("playedAt");return new Promise((x,h)=>{const p=u.getAll();p.onsuccess=async()=>{const b=p.result;console.log("Retrieved tracks from DB:",b);const c=b.sort((l,d)=>d.playedAt-l.playedAt).slice(0,r);console.log("Sorted and limited tracks:",c);const m=await Promise.all(c.map(async l=>{if(!(!l.audioUrl||l.audioUrl.includes("SoundHelix")||l.audioUrl.startsWith("blob:")))return l;const f=await getLocalTrackById(l.trackId);if(!f)return l;let S=l.audioUrl;try{f.file&&(S=URL.createObjectURL(f.file))}catch(y){console.error("Failed to rebuild blob URL for recent track",y)}return{...l,audioUrl:S||l.audioUrl,album:l.album||f.album,quality:l.quality||f.format,codecLabel:l.codecLabel||f.codecLabel,bitDepth:l.bitDepth??f.bitDepth,sampleRate:l.sampleRate??f.sampleRate,bitrateKbps:l.bitrateKbps??f.bitrateKbps,durationSeconds:l.durationSeconds??(typeof f.duration=="number"?f.duration:void 0)}}));if(m.length===0){console.log("No recently played tracks found, adding test data...");const l=[{trackId:"test-track-1",trackTitle:"Test Track 1",artistName:"Test Artist",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",playedAt:Date.now()-1e3,album:"Test Album",quality:"FLAC",bitrateKbps:1411,durationSeconds:240},{trackId:"test-track-2",trackTitle:"Test Track 2",artistName:"Another Artist",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",playedAt:Date.now()-2e3,album:"Another Album",quality:"MP3",bitrateKbps:320,durationSeconds:260}];x(l),l.forEach(d=>addRecentlyPlayedTrack(d).catch(console.error))}else x(m)},p.onerror=()=>{console.error("Failed to get recently played tracks:",p.error),h(p.error)}})}const STORE_NAME="recentlyPlayedPlaylists";async function openRecentlyPlayedPlaylistsDB(){return console.log(`Opening recently played playlists DB, version ${DB_VERSION$1}`),openBrickDB()}async function addRecentlyPlayedPlaylist(r){const i=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME);return new Promise((u,x)=>{const h=i.put({...r,playedAt:Date.now()});h.onsuccess=()=>u(),h.onerror=()=>x(h.error)})}async function getRecentlyPlayedPlaylists(r=10){const u=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).index("playedAt");return new Promise((x,h)=>{const p=u.getAll();p.onsuccess=()=>{const c=p.result.sort((m,l)=>(l.playedAt||0)-(m.playedAt||0)).slice(0,r);x(c)},p.onerror=()=>h(p.error)})}function HomeScreenV2({onPlaylistClick:r,onArtistPress:a,onFeedClick:s,activeFilter:i,onFilterChange:u,onLocalTrackPlay:x,onLocalAlbumPlay:h}){const[p,b]=reactExports.useState("all"),[c,m]=reactExports.useState(null),[l,d]=reactExports.useState(null),[f,S]=reactExports.useState(!1),[y,E]=reactExports.useState("brick"),[g,w]=reactExports.useState([]),[T,_]=reactExports.useState([]),[A,I]=reactExports.useState(!0),k=F=>F.codecLabel||F.quality||"MP3",N=i!==void 0?i:p;reactExports.useEffect(()=>{console.log("HomeScreenV2 useEffect triggered - loading recent items");let F=!0;return(async()=>{try{console.log("Starting sequential loading of recent items..."),I(!0),console.log("Loading recently played playlists...");const me=await getRecentlyPlayedPlaylists(3);if(console.log("Successfully loaded playlists:",me),!F){console.log("Component unmounted during playlist loading, aborting");return}console.log("Loading recently played tracks...");const H=await getRecentlyPlayedTracks(3);if(console.log("Successfully loaded tracks:",H),!F){console.log("Component unmounted during track loading, aborting");return}console.log("Setting recent items state"),w(me),_(H),console.log("Recent items state updated successfully")}catch(me){console.error("Failed to load recent items:",me),F&&(w([]),_([]))}finally{F&&(I(!1),console.log("Loading recent items completed"))}})(),()=>{console.log("HomeScreenV2 useEffect cleanup - component unmounting"),F=!1}},[]);const Y=mockArtists.slice(0,2),z=mockPlaylists.slice(0,5),W=F=>{if(c&&(c.pause(),c.currentTime=0),l?.id===F.id){f?(c?.pause(),S(!1)):(c?.play(),S(!0));return}const le=new Audio(F.url);le.addEventListener("ended",()=>{S(!1)}),le.play(),m(le),d(F),S(!0),x&&x(F)},G=F=>F?F>=85?"large":F>=70?"medium":"small":"medium",$=F=>{const le=[...F].sort((me,H)=>(H.structuralIntegrity||0)-(me.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:"#151515",border:"1px solid #333333"},children:[[150,300,450].map((me,H)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${me}px`,height:`${me}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},H)),le[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>r(le[0].id),children:[jsxRuntimeExports.jsx("img",{src:le[0].coverImage,alt:le[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:le[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[le[0].structuralIntegrity,"% Integrity"]})]})]}),le.slice(1).map((me,H)=>{const pe=me.structuralIntegrity||50,L=pe>=85?100:pe>=70?80:60,D=le.length-1,K=H/D*Math.PI*2,ae=pe>=85?150:pe>=70?220:290,oe=50+Math.cos(K)*(ae/8),ue=50+Math.sin(K)*(ae/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${oe}%`,top:`${ue}%`,transform:"translate(-50%, -50%)"},onClick:()=>r(me.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${L}px`,height:`${L}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:me.coverImage,alt:me.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${L}px`,height:`${L}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:me.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[pe,"% Integrity"]})]})]},me.id)})]})},ge=()=>{if(N==="feed")return null;if(N==="all")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:Y,onArtistPress:a}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8",children:jsxRuntimeExports.jsx(LocalMusicUploader,{onPlayTrack:W,onPlayAlbum:h,currentPlayingId:l?.id,isPlaying:f})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Materials"}),A?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Loading recent materials..."})}):jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[g.map(F=>jsxRuntimeExports.jsxs("button",{onClick:()=>r(F.playlistId),className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:F.coverImage,alt:F.playlistName,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:F.playlistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[typeof F.creatorName=="string"?F.creatorName:"Your Collection","  ",F.trackCount," tracks"]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`playlist-${F.playlistId}`)),T.map(F=>jsxRuntimeExports.jsxs("button",{onClick:()=>{x&&x({id:F.trackId,name:F.trackTitle,artist:F.artistName,coverArt:F.coverArt,url:F.audioUrl,album:F.album,duration:F.durationSeconds??"0:00",format:k(F),bitDepth:F.bitDepth,sampleRate:F.sampleRate,bitrateKbps:F.bitrateKbps,codecLabel:F.codecLabel})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:F.coverArt,alt:F.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:F.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:F.artistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#777777",fontSize:"0.8rem"},children:[F.album||"Unknown Album","  ",k(F)]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${F.trackId}`)),g.length===0&&T.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recent materials yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})]})]});if(N==="payroll")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:Y,onArtistPress:a}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8 pb-24",children:jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{backgroundColor:"rgba(30, 30, 30, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-2",style:{color:"#e0e0e0"},children:"Your Monthly Support"}),jsxRuntimeExports.jsxs("p",{className:"mono mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:["You're directly supporting ",Y.length," artists this month"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-8",children:Y.map(F=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"1.5rem"},children:"$8.00"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:F.name})]},F.id))})]})})]});if(N==="network")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NetworkStories,{connections:mockConnections$1,onStoryClick:F=>console.log("Story clicked:",F)}),jsxRuntimeExports.jsxs("div",{className:"px-6 pt-4 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"From Your Connections"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>E("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:y==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>E("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:y==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),y==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:z.sort((F,le)=>(le.structuralIntegrity||0)-(F.structuralIntegrity||0)).map(F=>{const le=G(F.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:le==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:F,onClick:()=>r(F.id),size:"small"})},F.id)})}):$(z)]})]});if(N==="recent")return jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Recently Played"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>E("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:y==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>E("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:y==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),T.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Tracks"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:T.map(F=>jsxRuntimeExports.jsxs("button",{onClick:()=>{x&&x({id:F.trackId,name:F.trackTitle,artist:F.artistName,coverArt:F.coverArt,url:F.audioUrl,album:F.album,duration:F.durationSeconds??"0:00",format:k(F),bitDepth:F.bitDepth,sampleRate:F.sampleRate,bitrateKbps:F.bitrateKbps,codecLabel:F.codecLabel})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:F.coverArt,alt:F.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:F.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:F.artistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#777777",fontSize:"0.8rem"},children:[F.album||"Unknown Album","  ",k(F)]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${F.trackId}`))})]}),g.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Playlists"}),y==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:g.sort((F,le)=>(le.structuralIntegrity||0)-(F.structuralIntegrity||0)).map(F=>{const le={id:F.playlistId,name:F.playlistName,coverImage:F.coverImage,creator:F.creatorName,trackCount:F.trackCount,structuralIntegrity:F.structuralIntegrity||50},me=G(F.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:me==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:le,onClick:()=>r(F.playlistId),size:"small"})},F.playlistId)})}):$(g.map(F=>({id:F.playlistId,name:F.playlistName,coverImage:F.coverImage,structuralIntegrity:F.structuralIntegrity||50})))]}),g.length===0&&T.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recently played items yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})};return jsxRuntimeExports.jsx("div",{className:`min-h-screen ${N==="network"||N==="recent"||N==="feed"?"pt-6 md:pt-16":""}`,children:ge()})}const mockConnections=[{user:{id:"user1",name:"Alina R.",avatar:"https://placehold.co/40x40/4f46e5/ffffff?text=AR"},matchScore:85,x:25,y:75},{user:{id:"user2",name:"Ben C.",avatar:"https://placehold.co/40x40/10b981/ffffff?text=BC"},matchScore:72,x:70,y:20},{user:{id:"user3",name:"Cathy L.",avatar:"https://placehold.co/40x40/f97316/ffffff?text=CL"},matchScore:91,x:45,y:55},{user:{id:"user4",name:"David M.",avatar:"https://placehold.co/40x40/ef4444/ffffff?text=DM"},matchScore:65,x:10,y:30}],useTheme=()=>({colors:{bg:{primary:"#1a1a1a",secondary:"#252525"},text:{primary:"#e0e0e0",secondary:"#a0aaae"},border:"#333333",accent:"#d32f2f"}}),IA_METADATA_BASE_URL="https://archive.org/metadata",IA_SEARCH_BASE_URL="https://archive.org/advancedsearch.php",IA_COVER_IMAGE_BASE_URL="https://archive.org/services/img",formatDuration=r=>{if(!r)return"N/A";const a=parseFloat(r);if(isNaN(a))return r;const s=Math.floor(a/60),i=Math.floor(a%60);return`${s}:${i.toString().padStart(2,"0")}`},fetchWithRetry=async(r,a=3)=>{for(let s=0;s<a;s++)try{const i=await fetch(r);if(!i.ok)throw i.status===404||i.status===403?new Error(`Item not found or forbidden (Status: ${i.status})`):new Error(`HTTP error! status: ${i.status}`);const u=i.headers.get("content-type");return u&&u.indexOf("application/json")!==-1?i.json():i.text()}catch(i){if(s<a-1){const u=2**s*1e3;await new Promise(x=>setTimeout(x,u))}else throw i}};function RadarScreen({onUserClick:r,onTrackClick:a}){const{colors:s}=useTheme(),[i,u]=reactExports.useState(null),[x,h]=reactExports.useState(""),[p,b]=reactExports.useState("all"),[c,m]=reactExports.useState("users"),[l,d]=reactExports.useState({artists:[],tracks:[]}),[f,S]=reactExports.useState(!1),[y,E]=reactExports.useState(null);reactExports.useEffect(()=>{d({artists:[],tracks:[]}),E(null),b("all")},[c]);const g=[...mockConnections].sort((I,k)=>k.matchScore-I.matchScore),T=g.map((I,k)=>{const N=40-I.matchScore/100*35,Y=k/g.length*Math.PI*2;return{...I,x:50+Math.cos(Y)*N,y:50+Math.sin(Y)*N}}).filter(I=>I.user.name.toLowerCase().includes(x.toLowerCase())),_=reactExports.useCallback(async I=>{if(E(null),c==="music"&&I.length>2){S(!0),d({artists:[],tracks:[]});try{const N=`${I.replace(/[()]/g,"").trim()} AND mediatype:(audio OR etree)`,Y=`${IA_SEARCH_BASE_URL}?q=${encodeURIComponent(N)}&sort[]=downloads+desc&fl[]=identifier&output=json&rows=15`,z=await fetchWithRetry(Y),G=(typeof z=="string"?JSON.parse(z):z).response?.docs?.map(H=>H.identifier).filter(Boolean)||[];if(G.length===0){E("No matching items found on Internet Archive."),S(!1);return}const $=[],ge=new Map,F=G.map(async H=>{try{const pe=`${IA_METADATA_BASE_URL}/${H}`,L=await fetchWithRetry(pe),D=Array.isArray(L.metadata.creator)?L.metadata.creator[0]:L.metadata.creator||"Unknown Artist",K=`${IA_COVER_IMAGE_BASE_URL}/${H}`,ae=Array.isArray(L.metadata.title)?L.metadata.title[0]:L.metadata.title;ge.has(D)||ge.set(D,{id:`artist-${H}`,name:D,genre:L.metadata.mediatype||"Audio",globalChosenUsers:Math.floor(Math.random()*1e3)+100,image:K}),L.files&&L.files.filter(oe=>oe.source==="original"&&oe.format&&oe.format.includes("MP3")).forEach(oe=>{const ue=oe.title||oe.name.replace(/\.(mp3|flac|ogg)$/i,"").replace(/_/g," "),we=formatDuration(oe.length),xe=oe.bitrate?`${oe.bitrate} kbps`:"N/A",se=`https://archive.org/download/${H}/${oe.name}`,Z=oe.artist||oe.creator||D;$.push({id:`${H}-${oe.name}`,title:ue,artist:Z,album:ae,coverArt:K,duration:we,bitrate:xe,downloadUrl:se})})}catch(pe){console.warn(`Failed to fetch metadata for item ${H}:`,pe)}});await Promise.allSettled(F);const le=Array.from(new Map($.map(H=>[H.id,H])).values()),me=Array.from(ge.values());d({artists:me,tracks:le})}catch(k){console.error("Internet Archive search failed:",k),E("A critical error occurred while searching the Archive.")}finally{S(!1)}}else d({artists:[],tracks:[]})},[c]),A=reactExports.useCallback(I=>{h(I),window.searchTimer&&clearTimeout(window.searchTimer),window.searchTimer=setTimeout(()=>{_(I)},500)},[_]);return jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6 md:pt-16 min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{letterSpacing:"-0.02em",color:s.text.primary},children:"The Radar"}),jsxRuntimeExports.jsx("p",{style:{color:s.text.secondary,fontSize:"0.95rem"},children:"Discover users with compatible taste."})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 focus-within:ring-2 focus-within:ring-[#d32f2f] focus-within:ring-opacity-30",style:{backgroundColor:s.bg.secondary,border:`1px solid ${s.border}`},children:[jsxRuntimeExports.jsx(Search,{size:20,color:s.text.secondary}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:c==="users"?"Search for Materials (Architects, Genres, Bricks)...":"Search the Archive for songs, artists, albums...",value:x,onChange:I=>A(I.target.value),className:"flex-1 bg-transparent outline-none",style:{color:s.text.primary,fontSize:"0.95rem"}})]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>m("users"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:c==="users"?s.accent:s.bg.secondary,color:c==="users"?"#ffffff":s.text.secondary,border:"1px solid",borderColor:c==="users"?s.accent:s.border,boxShadow:c==="users"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Users,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:c==="users"?600:400},children:"USERS"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>m("music"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:c==="music"?s.accent:s.bg.secondary,color:c==="music"?"#ffffff":s.text.secondary,border:"1px solid",borderColor:c==="music"?s.accent:s.border,boxShadow:c==="music"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Music,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:c==="music"?600:400},children:"MUSIC"})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto",children:c==="users"?[{id:"all",label:"All"},{id:"architects",label:"Architects Only"},{id:"local",label:"Local"},{id:"global",label:"Global"}].map(I=>jsxRuntimeExports.jsx("button",{onClick:()=>b(I.id),className:"px-4 py-2.5 rounded-xl whitespace-nowrap transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:p===I.id?s.accent:s.bg.secondary,color:p===I.id?"#ffffff":s.text.secondary,border:"1px solid",borderColor:p===I.id?s.accent:s.border,boxShadow:p===I.id?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:p===I.id?600:400},children:I.label})},I.id)):[{id:"all",label:"All"},{id:"tracks",label:"Tracks"},{id:"artists",label:"Artists"}].map(I=>jsxRuntimeExports.jsx("button",{onClick:()=>b(I.id),className:"px-4 py-2.5 rounded-xl whitespace-nowrap transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:p===I.id?s.accent:s.bg.secondary,color:p===I.id?"#ffffff":s.text.secondary,border:"1px solid",borderColor:p===I.id?s.accent:s.border,boxShadow:p===I.id?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:p===I.id?600:400},children:I.label})},I.id))}),c==="users"&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:s.text.secondary,fontSize:"0.8rem",letterSpacing:"0.05em"},children:[T.length," COMPATIBLE USERS FOUND"]})}),c==="music"&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:f?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-[#d32f2f] border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"SEARCHING INTERNET ARCHIVE..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y&&jsxRuntimeExports.jsx("div",{className:"p-3 mb-4 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("p",{className:"mono text-sm",style:{color:"#d32f2f"},children:["Error: ",y]})}),l.artists.length>0&&(p==="all"||p==="artists")&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[l.artists.length," ARTISTS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.artists.map(I=>jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg transition-all hover:bg-[#333333]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:I.image,alt:I.name,className:"w-10 h-10 rounded object-cover",onError:k=>{k.currentTarget.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:I.name}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[I.genre,"  ",I.globalChosenUsers," users"]})]})]})},I.id))})]}),l.tracks.length>0&&(p==="all"||p==="tracks")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[l.tracks.length," TRACKS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.tracks.map(I=>jsxRuntimeExports.jsx("div",{onClick:()=>a&&a(I,l.tracks),className:"block p-3 rounded-lg transition-all hover:bg-[#333333] cursor-pointer active:scale-[0.99]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:I.coverArt,alt:I.album,className:"w-10 h-10 rounded object-cover flex-shrink-0",onError:k=>{k.currentTarget.src="https://placehold.co/40x40/252525/ffffff?text=IA"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:I.title||"Unknown Title"}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[I.artist,"  ",I.album,"  ",I.bitrate]})]}),jsxRuntimeExports.jsx("span",{className:"mono text-xs flex-shrink-0",style:{color:"#546e7a"},children:I.duration})]})},I.id))})]}),l.artists.length===0&&l.tracks.length===0&&x.length>2&&!y&&jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"NO RESULTS FOUND"})]})}),c==="users"&&jsxRuntimeExports.jsx("div",{className:"relative rounded-lg mb-6 overflow-hidden",style:{backgroundColor:s.bg.primary,height:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",border:`1px solid ${s.border}`},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative",style:{width:"100%",height:"100%"},children:[[100,200,300].map((I,k)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${I}px`,height:`${I}px`,border:"1px solid rgba(84, 110, 122, 0.2)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},k)),jsxRuntimeExports.jsx("div",{className:"absolute w-4 h-4 rounded-full",style:{backgroundColor:"#d32f2f",left:"50%",top:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6)"}}),T.map((I,k)=>jsxRuntimeExports.jsxs("div",{onClick:()=>r(I.user.id),className:"absolute cursor-pointer group",style:{left:`${I.x}%`,top:`${I.y}%`,transform:"translate(-50%, -50%)"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full animate-ping",style:{backgroundColor:"rgba(84, 110, 122, 0.4)",width:"32px",height:"32px",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:I.user.avatar,alt:I.user.name,className:"relative w-8 h-8 rounded-full border-2 group-hover:scale-125 transition-transform",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:I.user.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[I.matchScore,"% Match"]})]})]},k))]})})}),c==="users"&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:s.bg.secondary,border:`1px solid ${s.border}`},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:s.text.secondary,fontSize:"0.75rem"},children:"Tap a dot to view Structural Integrity. Closer dots = Higher compatibility."})})]})}function VaultScreen({onOpenConnectionManagement:r,onSignOut:a}){const s="Mason",i=[{name:"Sketcher",price:"Free",priceValue:0,icon:Layers,color:"#546e7a",features:["10 Bond Slots","320kbps Audio Quality","2 Artist Patronage Slots","Basic Blueprint Creation"],isCurrent:s==="Sketcher"},{name:"Mason",price:"$4.99/mo",priceValue:4.99,icon:Hammer,color:"#d32f2f",features:["25 Bond Slots","Hi-Res Audio (FLAC)","2 Artist Patronage Slots","Advanced Analytics","Priority Support"],isCurrent:s==="Mason"},{name:"Architect",price:"$9.99/mo",priceValue:9.99,icon:Crown,color:"#c6a700",features:["50 Bond Slots","Hi-Res Audio (24-bit)","3 Artist Patronage Slots","Advanced Analytics","Priority Artist Payouts","Early Access to New Artists","Exclusive Content"],isCurrent:s==="Architect"}];return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-6 md:pt-16",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",children:"Account Blueprints"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Configure your foundation settings."})]}),jsxRuntimeExports.jsxs("section",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Membership Tiers"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:i.map(u=>{const x=u.icon;return jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl relative overflow-hidden transition-all duration-200",style:{backgroundColor:u.isCurrent?"rgba(37, 37, 37, 0.8)":"rgba(37, 37, 37, 0.4)",border:u.isCurrent?`2px solid ${u.color}`:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:u.isCurrent?`0 8px 24px ${u.color}33`:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[u.isCurrent&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full",style:{backgroundColor:`${u.color}20`,border:`1px solid ${u.color}`},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:u.color,fontSize:"0.65rem"},children:"CURRENT"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${u.color}20`,border:`1px solid ${u.color}`},children:jsxRuntimeExports.jsx(x,{size:24,color:u.color})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:u.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:u.color,fontSize:"1.125rem"},children:u.price})]})]}),jsxRuntimeExports.jsx("ul",{className:"mb-6 space-y-2",children:u.features.map((h,p)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0",style:{backgroundColor:u.color}}),jsxRuntimeExports.jsx("span",{style:{color:"#cccccc",fontSize:"0.875rem"},children:h})]},p))}),!u.isCurrent&&jsxRuntimeExports.jsx("button",{className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:u.name==="Sketcher"?"transparent":`linear-gradient(to bottom, ${u.color}, ${u.color}dd)`,color:u.name==="Sketcher"?u.color:"#1a1a1a",border:u.name==="Sketcher"?`1px solid ${u.color}`:"none",boxShadow:u.name==="Sketcher"?"none":`0 4px 16px ${u.color}40`,fontWeight:600},children:u.name==="Sketcher"?"Downgrade":`Upgrade to ${u.name}`})]},u.name)})})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Audio Quality"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{size:20,color:"#e0e0e0"}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Force Hi-Res on Cellular"})]}),jsxRuntimeExports.jsx("div",{className:"relative w-12 h-6 rounded-full cursor-pointer transition-colors",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full transition-all",style:{backgroundColor:"#e0e0e0"}})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"QUALITY SELECTOR"}),[{label:"Gravel",value:"128kbps",active:!1},{label:"Stone",value:"320kbps",active:!1},{label:"Marble",value:"FLAC",active:!0}].map(u=>jsxRuntimeExports.jsx("button",{className:"w-full p-3 rounded-lg text-left transition-all",style:{backgroundColor:u.active?"#333333":"transparent",border:"1px solid",borderColor:u.active?"#d32f2f":"#333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{style:{color:"#e0e0e0"},children:u.label}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:u.value})]})},u.value))]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Data Ownership"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You own your listening history. Download it as .CSV at any time."}),jsxRuntimeExports.jsxs("button",{className:"w-full py-3 rounded-full flex items-center justify-center gap-2 transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export My Data"]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Account"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Privacy Settings"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:r,children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Bond Management"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:a,children:jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f"},children:"Sign Out"})})]})]})]})}const wallHeader="_wallHeader_1vcia_33",wallTitle="_wallTitle_1vcia_51",pinkWallTitle="_pinkWallTitle_1vcia_69",toggleStack="_toggleStack_1vcia_87",toggleShell="_toggleShell_1vcia_101",toggleLabel="_toggleLabel_1vcia_113",toggleControl="_toggleControl_1vcia_129",toggleControlActive="_toggleControlActive_1vcia_157",toggleThumb="_toggleThumb_1vcia_169",toggleThumbActive="_toggleThumbActive_1vcia_187",toggleHint="_toggleHint_1vcia_199",pinkBadgeText="_pinkBadgeText_1vcia_213",navPinkButton="_navPinkButton_1vcia_223",navPinkLabel="_navPinkLabel_1vcia_237",pinkStyles={wallHeader,wallTitle,pinkWallTitle,toggleStack,toggleShell,toggleLabel,toggleControl,toggleControlActive,toggleThumb,toggleThumbActive,toggleHint,pinkBadgeText,navPinkButton,navPinkLabel};function ProfileScreen({onPlaylistClick:r,onCreatePlaylist:a,currentUser:s,isPinkMode:i=!1,onPinkToggle:u,pinkTierUnlocked:x=!1}){const{colors:h}=useTheme$1(),p=mockPlaylists,[b,c]=reactExports.useState("brick"),[m,l]=reactExports.useState("online"),[d,f]=reactExports.useState([]),[S,y]=reactExports.useState(0);reactExports.useEffect(()=>{const oe=m==="online"?p:[];if(oe.length>0){const ue=oe.reduce((xe,se)=>xe+(se.structuralIntegrity||0),0),we=Math.round(ue/oe.length);y(we),s&&we!==s.diversityScore&&__vitePreload(async()=>{const{updateUser:xe}=await Promise.resolve().then(()=>auth);return{updateUser:xe}},void 0).then(({updateUser:xe})=>{xe({...s,diversityScore:we}).catch(console.error)})}else y(0)},[p,m,s]),reactExports.useEffect(()=>{E();const oe=()=>{l("local"),E()};return window.addEventListener("switchToLocalWall",oe),()=>{window.removeEventListener("switchToLocalWall",oe)}},[]);const E=async()=>{try{const we=(await g()).transaction(["playlists"],"readonly").objectStore("playlists"),xe=await new Promise((se,Z)=>{const be=we.getAll();be.onsuccess=()=>se(be.result),be.onerror=()=>Z(be.error)});f(xe),console.log("Loaded playlists from IndexedDB:",xe)}catch(oe){console.error("Failed to load playlists:",oe),f([])}},g=()=>openBrickDB(),w=oe=>oe?oe>=85?"large":oe>=70?"medium":"small":"medium",T=24,_=oe=>{if(!oe.deletionQueuedAt)return!0;const ue=Date.now(),we=oe.deletionScheduledFor||0;return ue>=we},A=oe=>{if(!oe.deletionScheduledFor)return"";const ue=Date.now(),we=oe.deletionScheduledFor-ue;if(we<=0)return"Ready to delete";const xe=Math.floor(we/(1e3*60*60)),se=Math.floor(we%(1e3*60*60)/(1e3*60));return xe>0?`Delete in ${xe}h ${se}m`:`Delete in ${se}m`},I=async oe=>{try{const xe=(await g()).transaction(["playlists"],"readwrite").objectStore("playlists"),se=xe.get(oe);se.onsuccess=()=>{const Z=se.result;if(Z){const be=Date.now();Z.deletionQueuedAt=be,Z.deletionScheduledFor=be+T*60*60*1e3;const _e=xe.put(Z);_e.onsuccess=()=>{E()}}}}catch(ue){console.error("Failed to queue playlist deletion:",ue)}},k=async oe=>{try{const xe=(await g()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise(se=>{const Z=xe.delete(oe);Z.onsuccess=()=>se()}),E()}catch(ue){console.error("Failed to delete playlist:",ue)}},N=async oe=>{try{const xe=(await g()).transaction(["playlists"],"readwrite").objectStore("playlists"),se=xe.get(oe);se.onsuccess=()=>{const Z=se.result;if(Z){Z.deletionQueuedAt=void 0,Z.deletionScheduledFor=void 0;const be=xe.put(Z);be.onsuccess=()=>{E()}}}}catch(ue){console.error("Failed to cancel deletion:",ue)}},Y=oe=>{const ue=[...oe].sort((we,xe)=>(xe.structuralIntegrity||0)-(we.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:h.bg.primary,border:`1px solid ${h.border}`},children:[[150,300,450].map((we,xe)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${we}px`,height:`${we}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},xe)),ue[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>r(ue[0].id),children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:ue[0].coverImage,alt:ue[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:ue[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[ue[0].structuralIntegrity,"% Integrity"]})]})]}),ue.slice(1).map((we,xe)=>{const se=we.structuralIntegrity||50,Z=se>=85?100:se>=70?80:60,be=ue.length-1,_e=xe/be*Math.PI*2,te=se>=85?150:se>=70?220:290,q=50+Math.cos(_e)*(te/8),Q=50+Math.sin(_e)*(te/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${q}%`,top:`${Q}%`,transform:"translate(-50%, -50%)"},onClick:()=>r(we.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${Z}px`,height:`${Z}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx(ImageWithFallback,{src:we.coverImage,alt:we.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${Z}px`,height:`${Z}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:we.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[se,"% Integrity"]})]})]},we.id)})]})},z=s||mockCurrentUser,[W,G]=reactExports.useState(!1),[$,ge]=reactExports.useState(!1),[F,le]=reactExports.useState(null),[me,H]=reactExports.useState(z.bio||""),pe=reactExports.useRef(null),L=oe=>{const ue=oe.target.files?.[0];ue&&ue.type.startsWith("image/")&&le(ue)},D=async()=>{if(!(!s||!F))try{const oe=new FileReader;oe.onloadend=async()=>{const ue=oe.result,{updateUser:we}=await __vitePreload(async()=>{const{updateUser:xe}=await Promise.resolve().then(()=>auth);return{updateUser:xe}},void 0);await we({...s,avatar:ue}),window.location.reload()},oe.readAsDataURL(F)}catch(oe){console.error("Failed to update avatar:",oe)}},K=async()=>{if(s)try{const{updateUser:oe}=await __vitePreload(async()=>{const{updateUser:ue}=await Promise.resolve().then(()=>auth);return{updateUser:ue}},void 0);await oe({...s,bio:me}),window.location.reload()}catch(oe){console.error("Failed to update bio:",oe)}},ae=()=>{!x||!u||u(!i)};return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-10",children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.wallHeader,children:[jsxRuntimeExports.jsx("h1",{className:`${pinkStyles.wallTitle} ${i?pinkStyles.pinkWallTitle:""}`,children:"MY WALL"}),x&&jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleStack,children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleShell,children:[jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleLabel,children:"THE WALL THEME"}),jsxRuntimeExports.jsx("button",{type:"button","aria-pressed":i,onClick:ae,className:`${pinkStyles.toggleControl} ${i?pinkStyles.toggleControlActive:""}`,children:jsxRuntimeExports.jsx("span",{className:`${pinkStyles.toggleThumb} ${i?pinkStyles.toggleThumbActive:""}`})})]}),jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleHint,children:i?"Pink Tier engaged":"Industrial base coat"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative inline-block",children:jsxRuntimeExports.jsx("img",{src:z.avatar,alt:z.name,onClick:()=>s&&G(!W),className:"w-24 h-24 rounded-full mx-auto mb-4 cursor-pointer hover:opacity-80 transition-opacity",style:{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.4)"}})}),W&&s&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:pe,type:"file",accept:"image/*",onChange:L,className:"hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>pe.current?.click(),className:"px-4 py-2 rounded",style:{backgroundColor:h.bg.secondary,border:`1px solid ${h.border}`,color:h.text.primary},children:F?F.name:"Choose Image"}),F&&jsxRuntimeExports.jsx("button",{onClick:D,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:h.text.primary},children:"Upload & Save"})]}),jsxRuntimeExports.jsx("h2",{className:"mb-1",style:{color:h.text.primary},children:z.name}),jsxRuntimeExports.jsxs("p",{style:{color:h.text.secondary},children:[z.tier," Tier"]}),jsxRuntimeExports.jsx("div",{className:"mt-4 max-w-md mx-auto",children:$&&s?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:me,onChange:oe=>H(oe.target.value),placeholder:"Tell us about yourself...",className:"px-3 py-2 rounded resize-none",rows:3,style:{backgroundColor:h.bg.secondary,border:`1px solid ${h.border}`,color:h.text.primary}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:K,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:h.text.primary},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>ge(!1),className:"px-4 py-2 rounded",style:{backgroundColor:h.bg.tertiary,color:h.text.secondary},children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm italic",style:{color:h.text.secondary},children:z.bio||"No bio yet"}),s&&jsxRuntimeExports.jsx("button",{onClick:()=>{H(z.bio||""),ge(!0)},className:"text-xs px-2 py-1 rounded",style:{backgroundColor:h.bg.secondary,color:h.text.secondary},children:"Edit"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"80",height:"80",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"#1a1a1a",strokeWidth:"8",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"url(#diversity-gradient)",strokeWidth:"8",fill:"none",strokeDasharray:`${S/100*220} 220`,strokeLinecap:"round"}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"diversity-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#4caf50"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#546e7a"})]})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:h.text.primary,fontSize:"1.5rem"},children:S})})]}),jsxRuntimeExports.jsx("h4",{style:{color:h.text.primary},children:"Authenticity"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:h.text.secondary,fontSize:"0.75rem"},children:"Diversity Score"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:h.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${h.border}`},children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:z.connectionsUsed}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"1.2rem"},children:["/",z.connectionsMax]})]}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Connections"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-1 mt-2",children:Array.from({length:z.connectionsMax}).map((oe,ue)=>jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ue<z.connectionsUsed?"#546e7a":"#1a1a1a"}},ue))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h3",{style:{color:h.text.primary},children:"The Wall"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>l("online"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:m==="online"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${m==="online"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Music,{size:14,color:m==="online"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:m==="online"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:"Online"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>l("local"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:m==="local"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${m==="local"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:m==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:m==="local"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:["Local (",d.length,")"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a&&a(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},title:"Create Playlist",children:jsxRuntimeExports.jsx(Plus,{size:18,color:"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>c("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:b==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${b==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:b==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>c("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:b==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${b==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:b==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),m==="local"&&d.length===0?jsxRuntimeExports.jsxs("div",{className:"p-12 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:[jsxRuntimeExports.jsx(HardDrive,{size:48,color:"#666666",className:"mx-auto mb-4"}),jsxRuntimeExports.jsx("h4",{style:{color:"#a0a0a0",marginBottom:"8px"},children:"No Local Blueprints Yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:'Create your first playlist from the "+" button'})]}):b==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:(m==="online"?p:d).sort((oe,ue)=>(ue.structuralIntegrity||0)-(oe.structuralIntegrity||0)).map(oe=>{const ue=w(oe.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:ue==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:oe,onClick:()=>r(oe.id),size:"small",onDelete:m==="local"?I:void 0,onCancelDelete:m==="local"?N:void 0,onConfirmDelete:m==="local"?k:void 0,canDelete:_(oe),timeUntilDeletion:A(oe)})},oe.id)})}):Y(m==="online"?p:d)]})]})}function FeedScreen({currentUser:r}){const{colors:a}=useTheme$1(),[s,i]=reactExports.useState(""),[u,x]=reactExports.useState([]),h=()=>{if(!s.trim())return;const c={id:Date.now().toString(),content:s,user:{name:r?.name||"You",avatar:r?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100"},timestamp:new Date().toISOString(),likes:0};x([c,...u]),i("")},p=c=>{const m=new Date(c),d=new Date().getTime()-m.getTime(),f=Math.floor(d/(1e3*60*60));return f<1?"Just now":f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`},b=[...mockFeedEvents,{id:"feed-7",type:"listening_milestone",timestamp:new Date(Date.now()-1e3*60*60*5).toISOString(),data:{user:mockConnections$1[0].user,hours:100}},{id:"feed-8",type:"new_favorite",timestamp:new Date(Date.now()-1e3*60*60*8).toISOString(),data:{user:mockConnections$1[1].user,track:{title:"Architectural Daydreams",artist:mockArtists[2].name,coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400"},playCount:42}},{id:"feed-9",type:"playlist_created",timestamp:new Date(Date.now()-1e3*60*60*12).toISOString(),data:{user:mockConnections$1[2].user,playlist:{name:"Midnight Foundations",trackCount:28,coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}}},{id:"feed-10",type:"connection_formed",timestamp:new Date(Date.now()-1e3*60*60*18).toISOString(),data:{userA:mockConnections$1[0].user,userB:mockConnections$1[1].user,matchScore:87}}];return jsxRuntimeExports.jsx("div",{className:"pb-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 pt-6",children:[jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg mb-6",style:{backgroundColor:a.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${a.border}`},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:r?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100",alt:`${r?.name||"Your"} avatar`,className:"w-10 h-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("textarea",{value:s,onChange:c=>i(c.target.value),placeholder:"Share your thoughts on The Neighbourhood...",className:"w-full bg-[#1a1a1a] text-[#e0e0e0] rounded-lg p-3 resize-none focus:outline-none focus:ring-2 focus:ring-[#d32f2f] placeholder-[#555555]",rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i(""),className:"px-4 py-2 rounded-lg transition-colors hover:opacity-80",style:{color:a.text.secondary,backgroundColor:a.bg.primary},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:h,disabled:!s.trim(),className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:s.trim()?a.accent:a.text.tertiary,color:"#e0e0e0",fontWeight:600},children:[jsxRuntimeExports.jsx(Send,{size:16}),"Post"]})]})]})]})}),u.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:u.map(c=>{const m=new Date,l=new Date(c.timestamp),d=m.getTime()-l.getTime(),f=Math.floor(d/(1e3*60*60)),S=f<1?"Just now":f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`;return jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:c.user.avatar,alt:c.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("p",{style:{color:a.text.primary},className:"font-semibold",children:c.user.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:a.text.tertiary,fontSize:"0.7rem"},children:S})]}),jsxRuntimeExports.jsx("p",{style:{color:a.text.primary},className:"mb-3 leading-relaxed",children:c.content}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const y=u.map(E=>E.id===c.id?{...E,likes:E.likes+1}:E);x(y)},className:"flex items-center gap-2 px-3 py-1 rounded-lg transition-colors hover:bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:c.likes>0?"#d32f2f":"none",color:c.likes>0?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:c.likes>0?c.likes:"Like"})]})]})]})},c.id)})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:b.map(c=>c.type==="playlist_created"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:c.data.user.avatar,alt:c.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:c.data.user.name})," created a new brick"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:p(c.timestamp)})]}),jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-3",style:{color:"#e0e0e0"},children:c.data.playlist.name}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((m,l)=>jsxRuntimeExports.jsx("img",{src:c.data.playlist.coverImage,alt:"",className:"w-full aspect-square object-cover rounded"},l))}),jsxRuntimeExports.jsxs("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[c.data.playlist.trackCount," tracks"]})]})]},c.id):c.type==="connection_formed"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("img",{src:c.data.userA.avatar,alt:c.data.userA.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"}),jsxRuntimeExports.jsx("img",{src:c.data.userB.avatar,alt:c.data.userB.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:c.data.userA.name})," connected with"," ",jsxRuntimeExports.jsx("strong",{children:c.data.userB.name})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:p(c.timestamp)})]}),jsxRuntimeExports.jsx(Users,{size:20,color:"#546e7a"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg text-center",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.5rem"},children:[c.data.matchScore,"%"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"STRUCTURAL INTEGRITY"})]})]},c.id):c.type==="patronage_update"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:c.data.user.avatar,alt:c.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:c.data.user.name})," chose a new artist for November"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:p(c.timestamp)})]}),jsxRuntimeExports.jsx(Crown,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:c.data.artist.image,alt:c.data.artist.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:c.data.artist.name}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:c.data.artist.genre})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen Ad-Free via ",c.data.user.name]})})]},c.id):c.type==="listening_milestone"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:c.data.user.avatar,alt:c.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:c.data.user.name})," reached ",c.data.hours," hours of listening"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:p(c.timestamp)})]}),jsxRuntimeExports.jsx(TrendingUp,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:c.data.user.avatar,alt:c.data.user.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:c.data.user.name}),jsxRuntimeExports.jsxs("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[c.data.hours," hours of listening"]})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Celebrate with ",c.data.user.name]})})]},c.id):c.type==="new_favorite"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:c.data.user.avatar,alt:c.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:c.data.user.name})," added a new favorite track"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:p(c.timestamp)})]}),jsxRuntimeExports.jsx(Heart,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:c.data.track.coverArt,alt:c.data.track.title,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:c.data.track.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:c.data.track.artist})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen to ",c.data.track.title]})})]},c.id):null)}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx("button",{className:"px-6 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#a0a0a0"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:"Load More"})})})]})})}function PlaylistCreationScreen({onClose:r,onPublish:a}){const[s,i]=reactExports.useState(""),[u,x]=reactExports.useState([]),[h,p]=reactExports.useState(0),[b,c]=reactExports.useState([]),[m,l]=reactExports.useState("platform"),[d,f]=reactExports.useState(""),[S,y]=reactExports.useState(!0),[E,g]=reactExports.useState(null),[w,T]=reactExports.useState(null),_=reactExports.useRef(null),[A,I]=reactExports.useState(25),[k,N]=reactExports.useState(1);reactExports.useEffect(()=>{Y()},[]);const Y=async()=>{try{const Q=(await z()).transaction(["localTracks"],"readonly").objectStore("localTracks"),Ee=(await new Promise((je,Ce)=>{const ee=Q.getAll();ee.onsuccess=()=>je(ee.result),ee.onerror=()=>Ce(ee.error)})).map(je=>{try{const Ce=URL.createObjectURL(je.file);return{...je,url:Ce}}catch(Ce){return console.error("Failed to create URL for track:",je.id,Ce),null}}).filter(Boolean);c(Ee),y(!1)}catch(te){console.error("Failed to load local tracks:",te),y(!1)}},z=()=>openBrickDB(),W=te=>{const q=Math.floor(te/60),Q=Math.floor(te%60);return`${q}:${Q.toString().padStart(2,"0")}`},G={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],shoegaze:["shoegaze","dream pop","ambient","post-rock","noise rock","ethereal","atmospheric"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},$=te=>{if(!te)return"unknown";const q=te.toLowerCase().trim();for(const[Q,ce]of Object.entries(G))for(const Ee of ce)if(q.includes(Ee)||Ee.includes(q))return Ee;return q},ge=te=>{if(te.length===0)return 0;if(te.length===1)return 100;const q=te.map(Ie=>$(Ie.genre)),Q=q.filter(Ie=>Ie==="unknown").length;if(Q===te.length)return 50;const ce=Q/te.length*20,Ee=q.map(Ie=>{const He=[];return Object.entries(G).forEach(([Ke,Je])=>{Je.includes(Ie)&&He.push(Ke)}),{genre:Ie,groups:He}}),je=q.filter(Ie=>Ie!=="unknown"),Ce=new Set(je);if(Ce.size===1&&Q===0)return 100;if(Ce.size===1&&Q>0)return Math.max(50,100-ce);let ee=0,Se=0;for(let Ie=0;Ie<Ee.length;Ie++)for(let He=Ie+1;He<Ee.length;He++){if(q[Ie]==="unknown"||q[He]==="unknown")continue;Se++;const Ke=Ee[Ie].groups,Je=Ee[He].groups;Ke.some(R=>Je.includes(R))&&ee++}if(Se===0)return 50;const Te=ee/Se;let ye;return Te>=.9?ye=95:Te>=.7?ye=80:Te>=.5?ye=60:Te>=.3?ye=40:ye=Math.round(Te*100),Math.max(0,Math.round(ye-ce))},F=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",isPatronage:!1,genre:"shoegaze"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",isPatronage:!1,genre:"post-rock"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",isPatronage:!1,genre:"indie rock"},{id:"track-4",title:"Digital Breakdown",artist:"Marcus Flow",album:"Urban Chronicles",duration:"3:22",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",isPatronage:!1,genre:"hip hop"},{id:"track-5",title:"Steel Resonance",artist:"Iron Assembly",album:"Forge",duration:"5:45",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400",isPatronage:!1,genre:"metal"}],le=te=>{const q=[...u,te];x(q);const Q=ge(q);p(Q)},me=te=>{console.log("Adding local track:",te),console.log("Local track genre:",te.genre);const q={id:te.id,title:te.name,artist:te.artist,album:te.album,duration:W(te.duration),quality:te.format,coverArt:te.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:te.url,isPatronage:!1,genre:te.genre,bitDepth:te.bitDepth,sampleRate:te.sampleRate,bitrateKbps:te.bitrateKbps,codecLabel:te.codecLabel,file:te.file};console.log("Converted track:",q),le(q)},H=te=>{const q=u.filter(ce=>ce.id!==te);x(q);const Q=ge(q);p(Q)},pe=(te,q)=>{const Q=u.findIndex(Ce=>Ce.id===te),ce=u.findIndex(Ce=>Ce.id===q);if(Q===-1||ce===-1||Q===ce)return;const Ee=[...u],je=Ee[Q];Ee.splice(Q,1),Ee.splice(ce,0,je),x(Ee)},L=te=>{g(te)},D=te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},K=te=>{E&&E!==te&&pe(E,te),g(null)},ae=()=>{g(null)},oe=te=>{const q=te.target.files?.[0];if(q){const Q=new FileReader;Q.onload=ce=>{const Ee=ce.target?.result;T(Ee)},Q.readAsDataURL(q)}},ue=()=>{_.current?.click()},we=s.length>0&&u.length>0&&h>=50,xe=d.trim().toLowerCase(),se=xe.length>0,Z=te=>!se||!te?!1:te.toLowerCase().includes(xe),be=se?F.filter(te=>Z(te.title)||Z(te.name)||Z(te.artist)||Z(te.album)||Z(te.genre)):F,_e=se?b.filter(te=>Z(te.name)||Z(te.artist)||Z(te.album)||Z(te.genre)||Z(te.format)):b;return reactExports.useEffect(()=>{console.log("=== Fire Brick Debug ==="),console.log("Playlist Name:",s),console.log("Tracks Count:",u.length),console.log("Structural Integrity:",h),console.log("Can Publish:",we),console.log("Track Genres:",u.map(te=>({title:te.title,genre:te.genre}))),console.log("========================")},[s,u,h,we]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto pb-24",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-[#333333]",style:{backgroundColor:"#252525",backdropFilter:"blur(20px)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:r,className:"p-2",children:jsxRuntimeExports.jsx(X,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Drawing New Blueprints"}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"mono mb-2 block",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"BRICK NAME"}),jsxRuntimeExports.jsx("input",{type:"text",value:s,onChange:te=>i(te.target.value),placeholder:"Enter playlist name...",className:"w-full px-4 py-3 rounded-lg outline-none",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0"}})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"mono mb-2 block",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"BRICK COVER IMAGE"}),jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg border-2 border-dashed cursor-pointer transition-all hover:border-[#d32f2f]",style:{backgroundColor:"#252525",borderColor:w?"#d32f2f":"#333333"},onClick:ue,children:w?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:w,alt:"Custom cover",className:"w-16 h-16 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Custom image selected"}),jsxRuntimeExports.jsx("p",{className:"mono text-xs",style:{color:"#a0a0a0"},children:"Click to change"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[jsxRuntimeExports.jsx(Image,{size:32,color:"#546e7a",className:"mb-2"}),jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Upload custom cover image"}),jsxRuntimeExports.jsx("p",{className:"mono text-xs",style:{color:"#a0a0a0"},children:"or drag and drop"})]})}),jsxRuntimeExports.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:oe,style:{display:"none"}}),w&&jsxRuntimeExports.jsx("button",{onClick:()=>T(null),className:"mt-2 w-full py-2 rounded text-xs transition-all",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333",color:"#a0a0a0"},children:"Remove custom image"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h4",{className:"mb-3",children:["The Batch (",u.length," tracks)"]}),u.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No tracks added yet"})}):jsxRuntimeExports.jsx("div",{className:"rounded-lg overflow-hidden",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:u.map((te,q)=>jsxRuntimeExports.jsxs("div",{draggable:!0,onDragStart:()=>L(te.id),onDragOver:D,onDrop:()=>K(te.id),onDragEnd:ae,className:`flex items-center gap-3 p-3 border-b border-[#333333] last:border-b-0 transition-colors ${E===te.id?"opacity-50":""}`,style:{backgroundColor:E===te.id?"rgba(211, 47, 47, 0.1)":q%2===0?"#252525":"#222222",cursor:"grab"},children:[jsxRuntimeExports.jsx(GripVertical,{size:16,color:"#a0a0a0",className:"cursor-grab flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:te.title}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[te.artist,"  ",te.duration," ",te.genre&&jsxRuntimeExports.jsxs("span",{style:{color:"#546e7a"},children:[" ",te.genre]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>H(te.id),className:"p-1 hover:bg-[#333333] rounded transition-colors flex-shrink-0",children:jsxRuntimeExports.jsx(X,{size:16,color:"#a0a0a0"})})]},te.id))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h4",{children:"Available Tracks"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>l("platform"),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:m==="platform"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${m==="platform"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Music,{size:14,color:m==="platform"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:m==="platform"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:"Platform"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>l("local"),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:m==="local"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${m==="local"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:m==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:m==="local"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:["Local (",b.length,")"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-4",style:{position:"relative"},children:[jsxRuntimeExports.jsx(Search,{size:16,color:"#546e7a",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"}}),jsxRuntimeExports.jsx("input",{type:"search",value:d,onChange:te=>f(te.target.value),placeholder:"Search by title, artist, or album...","aria-label":"Search tracks",className:"w-full py-2 px-4 rounded-lg outline-none",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",paddingLeft:"38px",paddingRight:"34px"}}),d&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>f(""),"aria-label":"Clear track search",style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#a0a0a0",cursor:"pointer"},children:jsxRuntimeExports.jsx(X,{size:14})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:A,onChange:te=>{I(parseInt(te.target.value,10)||25),N(1)},className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),m==="platform"?be.length===0?jsxRuntimeExports.jsx("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:se?"No tracks match your search.":"No platform tracks available right now."})}):(()=>{const te=be.length,q=(k-1)*A,Q=Math.min(q+A,te);return be.slice(q,Q)})().map(te=>{const q=u.some(Q=>Q.id===te.id);return jsxRuntimeExports.jsxs("button",{onClick:()=>!q&&le(te),disabled:q,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all",style:{backgroundColor:q?"#1a1a1a":"#252525",border:"1px solid #333333",opacity:q?.5:1,cursor:q?"not-allowed":"pointer"},children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:te.coverArt,alt:te.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0"},children:te.title||te.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:te.artist})]}),!q&&jsxRuntimeExports.jsx(Plus,{size:20,color:"#546e7a"})]},te.id)}):S?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Loading local tracks..."})}):b.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:[jsxRuntimeExports.jsx(HardDrive,{size:32,color:"#666666",className:"mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",marginBottom:"8px"},children:"No local tracks available"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:"Upload tracks from the home screen to add them here"})]}):_e.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No local tracks match your search."})}):(()=>{const te=_e.length,q=(k-1)*A,Q=Math.min(q+A,te);return _e.slice(q,Q)})().map(te=>{const q=u.some(Q=>Q.id===te.id);return jsxRuntimeExports.jsxs("button",{onClick:()=>!q&&me(te),disabled:q,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all",style:{backgroundColor:q?"#1a1a1a":"#252525",border:"1px solid #333333",opacity:q?.5:1,cursor:q?"not-allowed":"pointer"},children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:te.coverArt,alt:te.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0"},children:te.name}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[te.artist," ",te.genre&&jsxRuntimeExports.jsxs("span",{style:{color:"#546e7a"},children:[" ",te.genre]})]})]}),!q&&jsxRuntimeExports.jsx(Plus,{size:20,color:"#546e7a"})]},te.id)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>N(te=>Math.max(1,te-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:k}),jsxRuntimeExports.jsx("button",{onClick:()=>N(te=>te+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Next"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg mb-6",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Structural Integrity"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:h>=50?"#4caf50":"#d32f2f",fontSize:"1.25rem"},children:[h,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-[#1a1a1a] rounded-full h-2 mb-3",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${h}%`,background:h>=50?"linear-gradient(to right, #4caf50, #8bc34a)":"linear-gradient(to right, #d32f2f, #b71c1c)"}})}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:h<50?"Genre clash detected. Mix compatible genres to strengthen this Brick.":"Genre uniformity maintained. This Brick has strong structural integrity."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(we){const te=u.map(q=>({id:q.id,title:q.title,artist:q.artist,album:q.album,duration:q.duration,quality:q.quality,coverArt:q.coverArt,audioUrl:q.audioUrl?.startsWith("blob:")?void 0:q.audioUrl,isPatronage:q.isPatronage,genre:q.genre}));console.log("Publishing cleaned tracks:",te),console.log("Custom cover image:",w?"Present":"None"),w&&sessionStorage.setItem("playlistCustomCover",w),a(s,te)}},disabled:!we,className:"w-full py-4 rounded-full transition-all mb-6",style:{background:we?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:we?"#e0e0e0":"#666666",boxShadow:we?"0 4px 12px rgba(211, 47, 47, 0.3)":"none",cursor:we?"pointer":"not-allowed"},children:"Fire Brick (Publish)"})]})]})}function LoginScreen({onLogin:r,onSignup:a}){const[s,i]=reactExports.useState("initial"),[u,x]=reactExports.useState(""),[h,p]=reactExports.useState(""),[b,c]=reactExports.useState(""),[m,l]=reactExports.useState(""),[d,f]=reactExports.useState(!1),S=async()=>{if(!u||!h){l("Please fill in all fields");return}f(!0),l("");try{const{loginUser:w}=await __vitePreload(async()=>{const{loginUser:_}=await Promise.resolve().then(()=>auth);return{loginUser:_}},void 0),T=await w(u,h);r(T)}catch(w){l(w instanceof Error?w.message:"Login failed")}finally{f(!1)}},y=async()=>{if(!u||!h||!b){l("Please fill in all fields");return}if(h.length<6){l("Password must be at least 6 characters");return}f(!0),l("");try{const{registerUser:w}=await __vitePreload(async()=>{const{registerUser:_}=await Promise.resolve().then(()=>auth);return{registerUser:_}},void 0),T=await w(u,h,b);a()}catch(w){l(w instanceof Error?w.message:"Registration failed")}finally{f(!1)}},E=()=>{u&&i("login")},g=()=>{u&&i("register")};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%)"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`repeating-linear-gradient(
              0deg,
              transparent,
              transparent 2px,
              rgba(255, 255, 255, 0.03) 2px,
              rgba(255, 255, 255, 0.03) 4px
            )`,animation:"slow-shift 20s linear infinite"}})}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes slow-shift {
          from {
            transform: translateY(0);
          }
          to {
            transform: translateY(40px);
          }
        }
      `}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16 fade-in",children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"4rem",letterSpacing:"0.2em",color:"#e0e0e0",textTransform:"uppercase",fontWeight:900},children:"BRICK"}),jsxRuntimeExports.jsx("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.75rem",letterSpacing:"0.1em"},children:"BUILD ON SOLID GROUND"})]}),jsxRuntimeExports.jsxs("div",{className:"spring-in rounded-2xl p-8 overflow-hidden",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)"},children:[s==="initial"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"mb-6 text-center",style:{color:"#e0e0e0"},children:"Lay Your First Brick"}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:u,onChange:w=>{x(w.target.value),l("")},onKeyDown:w=>w.key==="Enter"&&u&&E(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid",borderColor:u?"#e0e0e0":"#333333",fontSize:"1rem"}})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:E,disabled:!u,className:"w-full py-3 rounded-full transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid #e0e0e0",color:"#e0e0e0",opacity:u?1:.5,cursor:u?"pointer":"not-allowed"},children:"Enter (Log In)"}),jsxRuntimeExports.jsx("button",{onClick:g,disabled:!u,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:u?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:u?"#e0e0e0":"#666666",boxShadow:u?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:u?"pointer":"not-allowed"},children:"Begin Construction (Sign Up)"})]})]}),s==="login"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{i("initial"),p(""),l("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Log In"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:u,onChange:w=>{x(w.target.value),l("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",value:h,onChange:w=>{p(w.target.value),l("")},onKeyDown:w=>w.key==="Enter"&&u&&h&&S(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),m&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:m})}),jsxRuntimeExports.jsx("button",{onClick:S,disabled:!u||!h||d,className:"w-full py-3 rounded-full transition-all duration-200",style:{background:u&&h?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:u&&h?"#e0e0e0":"#666666",boxShadow:u&&h?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:u&&h&&!d?"pointer":"not-allowed"},children:d?"Logging in...":"Enter"})]}),s==="register"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{i("initial"),p(""),c(""),l("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Sign Up"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Your name",value:b,onChange:w=>{c(w.target.value),l("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:u,onChange:w=>{x(w.target.value),l("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:h,onChange:w=>{p(w.target.value),l("")},onKeyDown:w=>w.key==="Enter"&&u&&h&&b&&y(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),m&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:m})}),jsxRuntimeExports.jsx("button",{onClick:y,disabled:!u||!h||!b||d,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:u&&h&&b?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:u&&h&&b?"#e0e0e0":"#666666",boxShadow:u&&h&&b?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:u&&h&&b&&!d?"pointer":"not-allowed"},children:d?"Creating account...":"Begin Construction"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem"},children:"BY CONTINUING, YOU AGREE TO BRICK'S TERMS"})})]})]})}function ImportScreen({onImport:r,onSkip:a}){const[s,i]=reactExports.useState(null),[u,x]=reactExports.useState(!1),h=[{id:"spotify",name:"Spotify",icon:""},{id:"apple",name:"Apple Music",icon:""},{id:"tidal",name:"Tidal",icon:""}],p=b=>{i(b),x(!0),setTimeout(()=>{r(b)},3e3)};return u?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center fade-in",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",animation:"pulse 2s ease-in-out infinite"},children:jsxRuntimeExports.jsx(Music,{size:32,color:"#e0e0e0"})})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Connecting..."}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Analyzing Audio Quality..."}),jsxRuntimeExports.jsx("div",{className:"mt-6 mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:jsxRuntimeExports.jsx("p",{className:"animate-pulse",children:"Importing library..."})})]}),jsxRuntimeExports.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.05);
              opacity: 0.8;
            }
          }
        `})]}):jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12 fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"mb-3",style:{color:"#e0e0e0"},children:"Do you have existing materials?"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Import your library to upgrade to lossless quality."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:h.map((b,c)=>jsxRuntimeExports.jsxs("button",{onClick:()=>p(b.id),className:"spring-in p-8 rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)",animationDelay:`${c*.1}s`},children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4 opacity-80",style:{filter:"grayscale(1) brightness(1.5)"},children:b.icon}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:b.name})]},b.id))}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:a,className:"transition-all duration-200 hover:opacity-70",style:{color:"#a0a0a0",fontSize:"0.875rem",textDecoration:"underline"},children:"No, I'm starting fresh"})})]})})}function ConnectionManagementScreen({onClose:r}){const[a,s]=reactExports.useState(""),[i,u]=reactExports.useState("active"),x=mockConnections$1.slice(0,8),h=mockConnections$1.slice(8,10),p=mockConnections$1.slice(10,11),b=x.filter(d=>d.user.name.toLowerCase().includes(a.toLowerCase())),c=x.length,m=mockCurrentUser.connectionsMax,l=m-c;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-[#333333]",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"mb-0",children:"Bond Management"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all hover:scale-110",style:{backgroundColor:"rgba(37, 37, 37, 0.8)"},children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{size:18,color:"#546e7a"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:"BOND CAPACITY"})]}),jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:l<=2?"#d32f2f":"#c6a700"},children:c}),"/",m]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${c/m*100}%`,backgroundColor:l<=2?"#d32f2f":"#c6a700"}})}),l<=2&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:l===0?"Connection capacity reached. Remove connections or upgrade tier.":`Only ${l} slot${l===1?"":"s"} remaining.`})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-4",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18,color:"#a0a0a0"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search connections...",value:a,onChange:d=>s(d.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg transition-all",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",outline:"none"}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>u("active"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="active"?"#d32f2f":"transparent",color:i==="active"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="active"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["ACTIVE (",x.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>u("pending"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="pending"?"#d32f2f":"transparent",color:i==="pending"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="pending"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["PENDING (",h.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>u("blocked"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="blocked"?"#d32f2f":"transparent",color:i==="blocked"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="blocked"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["BLOCKED (",p.length,")"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 pb-24",children:[i==="active"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:b.map(d=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:d.user.avatar,alt:d.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:d.user.name}),jsxRuntimeExports.jsx("div",{className:"px-2 py-0.5 rounded",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[d.matchScore,"% MATCH"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Activity,{size:14,color:"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[d.mutualArtists," mutual artists"]})]}),jsxRuntimeExports.jsxs("span",{style:{color:"#666666",fontSize:"0.75rem"},children:["Connected ",Math.floor(Math.random()*90+10)," days ago"]})]})]}),jsxRuntimeExports.jsx("button",{className:"p-2 rounded-lg transition-all hover:bg-[#333333]",style:{color:"#d32f2f"},children:jsxRuntimeExports.jsx(UserMinus,{size:18})})]})},d.user.id))}),i==="pending"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:h.map(d=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(198, 167, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:d.user.avatar,alt:d.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:d.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#c6a700",fontSize:"0.75rem"},children:"Awaiting their acceptance"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #666666",color:"#a0a0a0",fontSize:"0.75rem"},children:"Cancel"})]})},d.user.id))}),i==="blocked"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:p.map(d=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:d.user.avatar,alt:d.user.name,className:"w-14 h-14 rounded-full object-cover opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:d.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Blocked user"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a",fontSize:"0.75rem"},children:"Unblock"})]})},d.user.id))})]})]})})}function ArtistProfileScreenV2({artist:r,onClose:a,onShowPatronageLock:s}){const[i,u]=reactExports.useState(0),[x,h]=reactExports.useState(!1),[p,b]=reactExports.useState(!0),c=reactExports.useRef(null);reactExports.useEffect(()=>{const y=()=>{c.current&&u(c.current.scrollTop)},E=c.current;if(E)return E.addEventListener("scroll",y),()=>E.removeEventListener("scroll",y)},[]);const m=Math.min(i/200,1),l=1+i/2e3,d=Math.min(i/20,20),f=[{id:1,name:"Industrial Soundscapes",year:2024,image:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400"},{id:2,name:"Concrete Dreams",year:2023,image:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400"},{id:3,name:"The Foundation",year:2022,image:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}],S=()=>{if(p&&s){s();return}h(!x),navigator.vibrate&&navigator.vibrate(50)};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 transition-opacity duration-300",style:{opacity:m,pointerEvents:m>.5?"auto":"none"},children:jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("button",{onClick:a,className:"p-2 -ml-2",children:jsxRuntimeExports.jsx(ArrowLeft,{size:24,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:r.name}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsxs("div",{ref:c,className:"h-full overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-96 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-all duration-100",style:{transform:`scale(${l}) translateY(${i*.5}px)`,filter:`grayscale(40%) brightness(0.6) blur(${d}px)`},children:jsxRuntimeExports.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, #1a1a1a 0%, transparent 60%)"}}),jsxRuntimeExports.jsx("button",{onClick:a,className:"absolute top-6 left-6 w-10 h-10 rounded-full flex items-center justify-center transition-opacity duration-300",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",opacity:1-m},children:jsxRuntimeExports.jsx(ArrowLeft,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-8 left-6 right-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:r.name}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"1.125rem"},children:r.genre})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6 -mt-6",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:"Monthly Support"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:x?"$8.00/month  80% to artist":"Support this artist directly"})]}),jsxRuntimeExports.jsx("button",{onClick:S,className:"relative transition-all duration-300",style:{width:"60px",height:"32px",borderRadius:"16px",backgroundColor:x?"#d32f2f":"#333333",boxShadow:x?"0 0 20px rgba(211, 47, 47, 0.4)":"none"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 transition-all duration-300",style:{left:x?"calc(100% - 28px)":"4px",width:"24px",height:"24px",borderRadius:"12px",backgroundColor:"#e0e0e0"}})})]}),x&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg spring-in",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Crown,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:"Payment Allocated  Support Active"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Revenue Dashboard"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Users,{size:16,color:"#c6a700"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"GLOBAL PATRONS"})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:r.globalChosenUsers.toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"YOUR CONTRIBUTION"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:x?"$8.00":"$0.00"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Essential Albums"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:jsxRuntimeExports.jsx("div",{className:"flex gap-4",style:{width:"max-content"},children:f.map(y=>jsxRuntimeExports.jsxs("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",style:{width:"180px"},children:[jsxRuntimeExports.jsx("img",{src:y.image,alt:y.name,className:"w-full aspect-square rounded-xl mb-3 object-cover"}),jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:y.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:y.year})]},y.id))})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Top Bricks"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mockPlaylists.slice(0,4).map(y=>jsxRuntimeExports.jsx(BrickCard,{playlist:y,size:"medium"},y.id))})]})]})]})]})}const EXTENSION_TABLE={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"},QUALITY_KEYWORDS=[["FLAC","FLAC"],["ALAC","ALAC"],["AAC","AAC"],["AIFF","AIFF"],["WAV","WAV"],["MP3","MP3"],["320KBPS","MP3"],["256KBPS","AAC"],["M4A","M4A"],["OGG","OGG"],["OPUS","OPUS"],["LOSSLESS","FLAC"]],MIME_KEYWORDS=[["flac","FLAC"],["x-wav","WAV"],["wav","WAV"],["wave","WAV"],["aiff","AIFF"],["aac","AAC"],["alac","ALAC"],["mp4","M4A"],["m4a","M4A"],["mpeg","MP3"],["mp3","MP3"],["ogg","OGG"],["opus","OPUS"],["webm","WEBM"]],matchKeyword=(r,a)=>{if(!r)return;const s=r.toUpperCase();for(const[i,u]of a)if(s.includes(i))return u},matchMime=r=>{if(!r)return;const a=r.toLowerCase();for(const[s,i]of MIME_KEYWORDS)if(a.includes(s))return i},extFromName$1=r=>{if(!r)return;const a=r.split("?")[0].split("#")[0],s=a.lastIndexOf(".");if(s!==-1)return a.substring(s+1).toLowerCase()},labelFromExtension=r=>{const a=extFromName$1(r);return a?EXTENSION_TABLE[a]:void 0};function inferCodecLabel(r){if(r.codecLabel)return r.codecLabel;const a=matchKeyword(r.qualityHint,QUALITY_KEYWORDS);if(a)return a;if(r.file){const s=matchMime(r.file.type);if(s)return s;const i=labelFromExtension(r.file.name);if(i)return i}if(r.url){const s=labelFromExtension(r.url);if(s)return s}}function formatBitrate(r){return r?`${Math.round(r).toLocaleString()} kbps`:null}class GaplessAudioEngine{audioContext;gainNode;currentSource=null;nextSource=null;currentBuffer=null;nextBuffer=null;currentTrack=null;nextTrack=null;isPlaying=!1;volume=1;isMuted=!1;playbackStartTime=0;pausedAt=0;scheduledNextTrack=!1;preloadTimeoutId=null;swapTimeoutId=null;bassFilter;midFilter;trebleFilter;onStateChange=null;onTrackEnd=null;onTrackChange=null;rafId=null;suppressOnEnded=!1;constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.bassFilter=this.audioContext.createBiquadFilter(),this.bassFilter.type="lowshelf",this.bassFilter.frequency.value=200,this.midFilter=this.audioContext.createBiquadFilter(),this.midFilter.type="peaking",this.midFilter.frequency.value=1e3,this.midFilter.Q.value=1,this.trebleFilter=this.audioContext.createBiquadFilter(),this.trebleFilter.type="highshelf",this.trebleFilter.frequency.value=3200,this.gainNode.connect(this.bassFilter),this.bassFilter.connect(this.midFilter),this.midFilter.connect(this.trebleFilter),this.trebleFilter.connect(this.audioContext.destination),this.startTimeUpdates()}setCallbacks(a){this.onStateChange=a.onStateChange||null,this.onTrackEnd=a.onTrackEnd||null,this.onTrackChange=a.onTrackChange||null}async loadTrack(a){if(this.currentTrack=a,this.nextSource){try{this.nextSource.stop()}catch{}this.nextSource=null}this.nextBuffer=null,this.nextTrack=null,this.clearScheduledTransitions();try{const i=await(await fetch(a.url)).arrayBuffer(),u=await this.audioContext.decodeAudioData(i);this.currentBuffer=u,this.onTrackChange&&this.onTrackChange(a.id),this.notifyStateChange({duration:u.duration,currentTime:0})}catch(s){throw console.error("Error loading track:",s),s}}async preloadNextTrack(a){this.nextTrack=a;try{const i=await(await fetch(a.url)).arrayBuffer(),u=await this.audioContext.decodeAudioData(i);this.nextBuffer=u,console.log(`Preloaded next track: ${a.id}`),this.scheduleNextTrackPlayback()}catch(s){console.error("Error preloading next track:",s)}}play(){if(!this.currentBuffer){console.warn("No track loaded");return}if(this.audioContext.state==="suspended"&&this.audioContext.resume(),this.currentSource)try{this.currentSource.stop()}catch{}this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=this.currentBuffer,this.currentSource.connect(this.gainNode);const a=this.currentSource;a.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}a===this.currentSource&&(console.log("Current track ended"),this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))};const s=this.pausedAt;this.currentSource.start(0,s),this.playbackStartTime=this.audioContext.currentTime-s,this.isPlaying=!0,this.notifyStateChange({isPlaying:!0}),this.scheduleNextTrackPlayback()}performGaplessTransition(a){if(!this.nextBuffer||!this.nextTrack||!this.nextSource)return;console.log("Executing gapless transition"),this.currentBuffer=this.nextBuffer,this.currentTrack=this.nextTrack;const s=this.nextSource;if(s){const i=s;s.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}i===this.currentSource&&(console.log("Track ended naturally"),this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))}}this.currentSource=s,this.nextBuffer=null,this.nextTrack=null,this.nextSource=null,this.scheduledNextTrack=!1,this.pausedAt=0,this.playbackStartTime=a,this.onTrackChange&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer.duration,currentTime:0})}pause(){if(this.isPlaying){if(this.pausedAt=this.getCurrentTime(),this.isPlaying=!1,this.currentSource){try{this.suppressOnEnded=!0,this.currentSource.stop()}catch{}this.currentSource=null}if(this.nextSource)try{this.suppressOnEnded=!0,this.nextSource.stop()}catch{}this.scheduledNextTrack=!1,this.clearScheduledTransitions(),this.notifyStateChange({isPlaying:!1})}}usePreloadedTrack(a,s){if(!this.nextTrack||!this.nextBuffer||this.nextTrack.id!==a)return!1;if(this.currentSource){try{this.currentSource.stop()}catch{}this.currentSource=null}return this.clearScheduledTransitions(),this.currentTrack=this.nextTrack,this.currentBuffer=this.nextBuffer,this.nextTrack=null,this.nextBuffer=null,this.nextSource=null,this.pausedAt=0,this.scheduledNextTrack=!1,this.onTrackChange&&this.currentTrack&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer?.duration||0,currentTime:0}),s?this.play():(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1,currentTime:0})),!0}togglePlayPause(){this.isPlaying?this.pause():this.play()}seek(a){if(!this.currentBuffer)return;const s=this.isPlaying;this.isPlaying&&this.pause(),this.pausedAt=Math.max(0,Math.min(a,this.currentBuffer.duration)),this.notifyStateChange({currentTime:this.pausedAt}),s&&this.play()}setVolume(a){this.volume=Math.max(0,Math.min(1,a)),this.isMuted||this.gainNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.notifyStateChange({volume:this.volume})}setMuted(a){this.isMuted=a;const s=a?0:this.volume;this.gainNode.gain.setValueAtTime(s,this.audioContext.currentTime),this.notifyStateChange({isMuted:a})}setEQ(a,s,i){this.bassFilter.gain.value=a,this.midFilter.gain.value=s,this.trebleFilter.gain.value=i}setAdvancedEQ(a,s,i,u){this.bassFilter.frequency.value=a,this.midFilter.frequency.value=s,this.midFilter.Q.value=i,this.trebleFilter.frequency.value=u}getCurrentTime(){if(!this.currentBuffer)return 0;if(this.isPlaying){const a=this.audioContext.currentTime-this.playbackStartTime;return a<0?0:Math.min(a,this.currentBuffer.duration)}return this.pausedAt}getDuration(){return this.currentBuffer?.duration||0}getState(){return{isPlaying:this.isPlaying,currentTime:this.getCurrentTime(),duration:this.getDuration(),volume:this.volume,isMuted:this.isMuted}}startTimeUpdates(){const a=()=>{this.isPlaying&&this.notifyStateChange({currentTime:this.getCurrentTime()}),this.rafId=requestAnimationFrame(a)};a()}notifyStateChange(a){this.onStateChange&&this.onStateChange(a)}destroy(){if(this.rafId!==null&&cancelAnimationFrame(this.rafId),this.clearScheduledTransitions(),this.currentSource)try{this.suppressOnEnded=!0,this.currentSource.stop()}catch{}if(this.nextSource)try{this.suppressOnEnded=!0,this.nextSource.stop()}catch{}this.audioContext.close()}scheduleNextTrackPlayback(){if(!this.currentBuffer||!this.nextBuffer||!this.nextTrack||!this.currentSource||!this.isPlaying)return;this.clearScheduledTransitions();const a=this.currentBuffer.duration,s=2,i=this.audioContext.currentTime-this.playbackStartTime,u=a-i,x=Math.max(0,(u-s)*1e3);this.preloadTimeoutId=window.setTimeout(()=>{if(!this.isPlaying||this.scheduledNextTrack||!this.nextBuffer||!this.nextTrack)return;this.scheduledNextTrack=!0,console.log("Scheduling gapless transition for next track"),this.nextSource=this.audioContext.createBufferSource(),this.nextSource.buffer=this.nextBuffer,this.nextSource.connect(this.gainNode);const h=this.playbackStartTime+a;this.nextSource.start(h),console.log("Next track scheduled to start at:",h);const p=(h-this.audioContext.currentTime)*1e3-50;this.swapTimeoutId=window.setTimeout(()=>{this.isPlaying&&this.performGaplessTransition(h)},Math.max(0,p))},x)}clearScheduledTransitions(){this.preloadTimeoutId!==null&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),this.swapTimeoutId!==null&&(clearTimeout(this.swapTimeoutId),this.swapTimeoutId=null),this.scheduledNextTrack=!1}}var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,a=r*60,s=a*60,i=s*24,u=i*7,x=i*365.25;ms=function(m,l){l=l||{};var d=typeof m;if(d==="string"&&m.length>0)return h(m);if(d==="number"&&isFinite(m))return l.long?b(m):p(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function h(m){if(m=String(m),!(m.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(l){var d=parseFloat(l[1]),f=(l[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return d*x;case"weeks":case"week":case"w":return d*u;case"days":case"day":case"d":return d*i;case"hours":case"hour":case"hrs":case"hr":case"h":return d*s;case"minutes":case"minute":case"mins":case"min":case"m":return d*a;case"seconds":case"second":case"secs":case"sec":case"s":return d*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function p(m){var l=Math.abs(m);return l>=i?Math.round(m/i)+"d":l>=s?Math.round(m/s)+"h":l>=a?Math.round(m/a)+"m":l>=r?Math.round(m/r)+"s":m+"ms"}function b(m){var l=Math.abs(m);return l>=i?c(m,l,i,"day"):l>=s?c(m,l,s,"hour"):l>=a?c(m,l,a,"minute"):l>=r?c(m,l,r,"second"):m+" ms"}function c(m,l,d,f){var S=l>=d*1.5;return Math.round(m/d)+" "+f+(S?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function r(a){i.debug=i,i.default=i,i.coerce=c,i.disable=p,i.enable=x,i.enabled=b,i.humanize=requireMs(),i.destroy=m,Object.keys(a).forEach(l=>{i[l]=a[l]}),i.names=[],i.skips=[],i.formatters={};function s(l){let d=0;for(let f=0;f<l.length;f++)d=(d<<5)-d+l.charCodeAt(f),d|=0;return i.colors[Math.abs(d)%i.colors.length]}i.selectColor=s;function i(l){let d,f=null,S,y;function E(...g){if(!E.enabled)return;const w=E,T=Number(new Date),_=T-(d||T);w.diff=_,w.prev=d,w.curr=T,d=T,g[0]=i.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let A=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(k,N)=>{if(k==="%%")return"%";A++;const Y=i.formatters[N];if(typeof Y=="function"){const z=g[A];k=Y.call(w,z),g.splice(A,1),A--}return k}),i.formatArgs.call(w,g),(w.log||i.log).apply(w,g)}return E.namespace=l,E.useColors=i.useColors(),E.color=i.selectColor(l),E.extend=u,E.destroy=i.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(S!==i.namespaces&&(S=i.namespaces,y=i.enabled(l)),y),set:g=>{f=g}}),typeof i.init=="function"&&i.init(E),E}function u(l,d){const f=i(this.namespace+(typeof d>"u"?":":d)+l);return f.log=this.log,f}function x(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];const d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of d)f[0]==="-"?i.skips.push(f.slice(1)):i.names.push(f)}function h(l,d){let f=0,S=0,y=-1,E=0;for(;f<l.length;)if(S<d.length&&(d[S]===l[f]||d[S]==="*"))d[S]==="*"?(y=S,E=f,S++):(f++,S++);else if(y!==-1)S=y+1,E++,f=E;else return!1;for(;S<d.length&&d[S]==="*";)S++;return S===d.length}function p(){const l=[...i.names,...i.skips.map(d=>"-"+d)].join(",");return i.enable(""),l}function b(l){for(const d of i.skips)if(h(l,d))return!1;for(const d of i.names)if(h(l,d))return!0;return!1}function c(l){return l instanceof Error?l.stack||l.message:l}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return common=r,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(r,a){var s={};a.formatArgs=u,a.save=x,a.load=h,a.useColors=i,a.storage=p(),a.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;c.splice(1,0,m,"color: inherit");let l=0,d=0;c[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(d=l))}),c.splice(d,0,m)}a.log=console.debug||console.log||(()=>{});function x(c){try{c?a.storage.setItem("debug",c):a.storage.removeItem("debug")}catch{}}function h(){let c;try{c=a.storage.getItem("debug")||a.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=s.DEBUG),c}function p(){try{return localStorage}catch{}}r.exports=requireCommon()(a);const{formatters:b}=r.exports;b.j=function(c){try{return JSON.stringify(c)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.EndOfStreamError=r.defaultMessages=void 0,r.defaultMessages="End-Of-Stream";class a extends Error{constructor(){super(r.defaultMessages)}}r.EndOfStreamError=a})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let r=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((s,i)=>{this.reject=i,this.resolve=s})}};return Deferred.Deferred=r,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;const a=requireEndOfFileStream(),s=requireDeferred();var i=requireEndOfFileStream();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});const u=1*1024*1024;class x{constructor(p){if(this.s=p,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!p.read||!p.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new a.EndOfStreamError)),this.s.once("error",b=>this.reject(b)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(p,b,c){const m=await this.read(p,b,c);return this.peekQueue.push(p.subarray(b,b+m)),m}async read(p,b,c){if(c===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new a.EndOfStreamError;let m=c,l=0;for(;this.peekQueue.length>0&&m>0;){const d=this.peekQueue.pop();if(!d)throw new Error("peekData should be defined");const f=Math.min(d.length,m);p.set(d.subarray(0,f),b+l),l+=f,m-=f,f<d.length&&this.peekQueue.push(d.subarray(f))}for(;m>0&&!this.endOfStream;){const d=Math.min(m,u),f=await this.readFromStream(p,b+l,d);if(l+=f,f<d)break;m-=f}return l}async readFromStream(p,b,c){const m=this.s.read(c);if(m)return p.set(m,b),m.length;{const l={buffer:p,offset:b,length:c,deferred:new s.Deferred};return this.deferred=l.deferred,this.s.once("readable",()=>{this.readDeferred(l)}),l.deferred.promise}}readDeferred(p){const b=this.s.read(p.length);b?(p.buffer.set(b,p.offset),p.deferred.resolve(b.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(p)})}reject(p){this.endOfStream=!0,this.deferred&&(this.deferred.reject(p),this.deferred=null)}}r.StreamReader=x})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;var a=requireEndOfFileStream();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}});var s=requireStreamReader();Object.defineProperty(r,"StreamReader",{enumerable:!0,get:function(){return s.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const r=requireLib$3();let a=class{constructor(i){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=i||{}}async readToken(i,u=this.position){const x=Buffer.alloc(i.len);if(await this.readBuffer(x,{position:u})<i.len)throw new r.EndOfStreamError;return i.get(x,0)}async peekToken(i,u=this.position){const x=Buffer.alloc(i.len);if(await this.peekBuffer(x,{position:u})<i.len)throw new r.EndOfStreamError;return i.get(x,0)}async readNumber(i){if(await this.readBuffer(this.numBuffer,{length:i.len})<i.len)throw new r.EndOfStreamError;return i.get(this.numBuffer,0)}async peekNumber(i){if(await this.peekBuffer(this.numBuffer,{length:i.len})<i.len)throw new r.EndOfStreamError;return i.get(this.numBuffer,0)}async ignore(i){if(this.fileInfo.size!==void 0){const u=this.fileInfo.size-this.position;if(i>u)return this.position+=u,u}return this.position+=i,i}async close(){}normalizeOptions(i,u){if(u&&u.position!==void 0&&u.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return u?{mayBeLess:u.mayBeLess===!0,offset:u.offset?u.offset:0,length:u.length?u.length:i.length-(u.offset?u.offset:0),position:u.position?u.position:this.position}:{mayBeLess:!1,offset:0,length:i.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=a,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const r=requireAbstractTokenizer(),a=requireLib$3(),s=256e3;let i=class extends r.AbstractTokenizer{constructor(x,h){super(h),this.streamReader=new a.StreamReader(x)}async getFileInfo(){return this.fileInfo}async readBuffer(x,h){const p=this.normalizeOptions(x,h),b=p.position-this.position;if(b>0)return await this.ignore(b),this.readBuffer(x,h);if(b<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(p.length===0)return 0;const c=await this.streamReader.read(x,p.offset,p.length);if(this.position+=c,(!h||!h.mayBeLess)&&c<p.length)throw new a.EndOfStreamError;return c}async peekBuffer(x,h){const p=this.normalizeOptions(x,h);let b=0;if(p.position){const c=p.position-this.position;if(c>0){const m=new Uint8Array(p.length+c);return b=await this.peekBuffer(m,{mayBeLess:p.mayBeLess}),x.set(m.subarray(c),p.offset),b-c}else if(c<0)throw new Error("Cannot peek from a negative offset in a stream")}if(p.length>0){try{b=await this.streamReader.peek(x,p.offset,p.length)}catch(c){if(h&&h.mayBeLess&&c instanceof a.EndOfStreamError)return 0;throw c}if(!p.mayBeLess&&b<p.length)throw new a.EndOfStreamError}return b}async ignore(x){const h=Math.min(s,x),p=new Uint8Array(h);let b=0;for(;b<x;){const c=x-b,m=await this.readBuffer(p,{length:Math.min(h,c)});if(m<0)return m;b+=m}return b}};return ReadStreamTokenizer.ReadStreamTokenizer=i,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const r=requireLib$3(),a=requireAbstractTokenizer();let s=class extends a.AbstractTokenizer{constructor(u,x){super(x),this.uint8Array=u,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:u.length}async readBuffer(u,x){if(x&&x.position){if(x.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=x.position}const h=await this.peekBuffer(u,x);return this.position+=h,h}async peekBuffer(u,x){const h=this.normalizeOptions(u,x),p=Math.min(this.uint8Array.length-h.position,h.length);if(!h.mayBeLess&&p<h.length)throw new r.EndOfStreamError;return u.set(this.uint8Array.subarray(h.position,h.position+p),h.offset),p}async close(){}};return BufferTokenizer.BufferTokenizer=s,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fromBuffer=r.fromStream=r.EndOfStreamError=void 0;const a=requireReadStreamTokenizer(),s=requireBufferTokenizer();var i=requireLib$3();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});function u(h,p){return p=p||{},new a.ReadStreamTokenizer(h,p)}r.fromStream=u;function x(h,p){return new s.BufferTokenizer(h,p)}r.fromBuffer=x})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(r,a,s,i,u){var x,h,p=u*8-i-1,b=(1<<p)-1,c=b>>1,m=-7,l=s?u-1:0,d=s?-1:1,f=r[a+l];for(l+=d,x=f&(1<<-m)-1,f>>=-m,m+=p;m>0;x=x*256+r[a+l],l+=d,m-=8);for(h=x&(1<<-m)-1,x>>=-m,m+=i;m>0;h=h*256+r[a+l],l+=d,m-=8);if(x===0)x=1-c;else{if(x===b)return h?NaN:(f?-1:1)*(1/0);h=h+Math.pow(2,i),x=x-c}return(f?-1:1)*h*Math.pow(2,x-i)},ieee754.write=function(r,a,s,i,u,x){var h,p,b,c=x*8-u-1,m=(1<<c)-1,l=m>>1,d=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:x-1,S=i?1:-1,y=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(p=isNaN(a)?1:0,h=m):(h=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-h))<1&&(h--,b*=2),h+l>=1?a+=d/b:a+=d*Math.pow(2,1-l),a*b>=2&&(h++,b/=2),h+l>=m?(p=0,h=m):h+l>=1?(p=(a*b-1)*Math.pow(2,u),h=h+l):(p=a*Math.pow(2,l-1)*Math.pow(2,u),h=0));u>=8;r[s+f]=p&255,f+=S,p/=256,u-=8);for(h=h<<u|p,c+=u;c>0;r[s+f]=h&255,f+=S,h/=256,c-=8);r[s+f-S]|=y*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnsiStringType=r.StringType=r.BufferType=r.Uint8ArrayType=r.IgnoreType=r.Float80_LE=r.Float80_BE=r.Float64_LE=r.Float64_BE=r.Float32_LE=r.Float32_BE=r.Float16_LE=r.Float16_BE=r.INT64_BE=r.UINT64_BE=r.INT64_LE=r.UINT64_LE=r.INT32_LE=r.INT32_BE=r.INT24_BE=r.INT24_LE=r.INT16_LE=r.INT16_BE=r.INT8=r.UINT32_BE=r.UINT32_LE=r.UINT24_BE=r.UINT24_LE=r.UINT16_BE=r.UINT16_LE=r.UINT8=void 0;const a=requireIeee754();function s(b){return new DataView(b.buffer,b.byteOffset)}r.UINT8={len:1,get(b,c){return s(b).getUint8(c)},put(b,c,m){return s(b).setUint8(c,m),c+1}},r.UINT16_LE={len:2,get(b,c){return s(b).getUint16(c,!0)},put(b,c,m){return s(b).setUint16(c,m,!0),c+2}},r.UINT16_BE={len:2,get(b,c){return s(b).getUint16(c)},put(b,c,m){return s(b).setUint16(c,m),c+2}},r.UINT24_LE={len:3,get(b,c){const m=s(b);return m.getUint8(c)+(m.getUint16(c+1,!0)<<8)},put(b,c,m){const l=s(b);return l.setUint8(c,m&255),l.setUint16(c+1,m>>8,!0),c+3}},r.UINT24_BE={len:3,get(b,c){const m=s(b);return(m.getUint16(c)<<8)+m.getUint8(c+2)},put(b,c,m){const l=s(b);return l.setUint16(c,m>>8),l.setUint8(c+2,m&255),c+3}},r.UINT32_LE={len:4,get(b,c){return s(b).getUint32(c,!0)},put(b,c,m){return s(b).setUint32(c,m,!0),c+4}},r.UINT32_BE={len:4,get(b,c){return s(b).getUint32(c)},put(b,c,m){return s(b).setUint32(c,m),c+4}},r.INT8={len:1,get(b,c){return s(b).getInt8(c)},put(b,c,m){return s(b).setInt8(c,m),c+1}},r.INT16_BE={len:2,get(b,c){return s(b).getInt16(c)},put(b,c,m){return s(b).setInt16(c,m),c+2}},r.INT16_LE={len:2,get(b,c){return s(b).getInt16(c,!0)},put(b,c,m){return s(b).setInt16(c,m,!0),c+2}},r.INT24_LE={len:3,get(b,c){const m=r.UINT24_LE.get(b,c);return m>8388607?m-16777216:m},put(b,c,m){const l=s(b);return l.setUint8(c,m&255),l.setUint16(c+1,m>>8,!0),c+3}},r.INT24_BE={len:3,get(b,c){const m=r.UINT24_BE.get(b,c);return m>8388607?m-16777216:m},put(b,c,m){const l=s(b);return l.setUint16(c,m>>8),l.setUint8(c+2,m&255),c+3}},r.INT32_BE={len:4,get(b,c){return s(b).getInt32(c)},put(b,c,m){return s(b).setInt32(c,m),c+4}},r.INT32_LE={len:4,get(b,c){return s(b).getInt32(c,!0)},put(b,c,m){return s(b).setInt32(c,m,!0),c+4}},r.UINT64_LE={len:8,get(b,c){return s(b).getBigUint64(c,!0)},put(b,c,m){return s(b).setBigUint64(c,m,!0),c+8}},r.INT64_LE={len:8,get(b,c){return s(b).getBigInt64(c,!0)},put(b,c,m){return s(b).setBigInt64(c,m,!0),c+8}},r.UINT64_BE={len:8,get(b,c){return s(b).getBigUint64(c)},put(b,c,m){return s(b).setBigUint64(c,m),c+8}},r.INT64_BE={len:8,get(b,c){return s(b).getBigInt64(c)},put(b,c,m){return s(b).setBigInt64(c,m),c+8}},r.Float16_BE={len:2,get(b,c){return a.read(b,c,!1,10,this.len)},put(b,c,m){return a.write(b,m,c,!1,10,this.len),c+this.len}},r.Float16_LE={len:2,get(b,c){return a.read(b,c,!0,10,this.len)},put(b,c,m){return a.write(b,m,c,!0,10,this.len),c+this.len}},r.Float32_BE={len:4,get(b,c){return s(b).getFloat32(c)},put(b,c,m){return s(b).setFloat32(c,m),c+4}},r.Float32_LE={len:4,get(b,c){return s(b).getFloat32(c,!0)},put(b,c,m){return s(b).setFloat32(c,m,!0),c+4}},r.Float64_BE={len:8,get(b,c){return s(b).getFloat64(c)},put(b,c,m){return s(b).setFloat64(c,m),c+8}},r.Float64_LE={len:8,get(b,c){return s(b).getFloat64(c,!0)},put(b,c,m){return s(b).setFloat64(c,m,!0),c+8}},r.Float80_BE={len:10,get(b,c){return a.read(b,c,!1,63,this.len)},put(b,c,m){return a.write(b,m,c,!1,63,this.len),c+this.len}},r.Float80_LE={len:10,get(b,c){return a.read(b,c,!0,63,this.len)},put(b,c,m){return a.write(b,m,c,!0,63,this.len),c+this.len}};class i{constructor(c){this.len=c}get(c,m){}}r.IgnoreType=i;class u{constructor(c){this.len=c}get(c,m){return c.subarray(m,m+this.len)}}r.Uint8ArrayType=u;class x{constructor(c){this.len=c}get(c,m){return Buffer.from(c.subarray(m,m+this.len))}}r.BufferType=x;class h{constructor(c,m){this.len=c,this.encoding=m}get(c,m){return Buffer.from(c).toString(this.encoding,m,m+this.len)}}r.StringType=h;class p{constructor(c){this.len=c}static decode(c,m,l){let d="";for(let f=m;f<l;++f)d+=p.codePointToString(p.singleByteDecoder(c[f]));return d}static inRange(c,m,l){return m<=c&&c<=l}static codePointToString(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}static singleByteDecoder(c){if(p.inRange(c,0,127))return c;const m=p.windows1252[c-128];if(m===null)throw Error("invaliding encoding");return m}get(c,m=0){return p.decode(c,m,m+this.len)}}r.AnsiStringType=p,p.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=r=>[...r].map(a=>a.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(r,a=0)=>{const s=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(s))return!1;let i=256;for(let u=a;u<a+148;u++)i+=r[u];for(let u=a+156;u<a+512;u++)i+=r[u];return s===i},util$1.uint32SyncSafeToken={get:(r,a)=>r[a+3]&127|r[a+2]<<7|r[a+1]<<14|r[a]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(r){const a=await strtok3.fromStream(r);try{return await fromTokenizer(a)}finally{await a.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const a=r instanceof Buffer?r:Buffer.from(r);if(!(a&&a.length>1))return;const s=strtok3.fromBuffer(a);return fromTokenizer(s)}function _check(r,a,s){s={offset:0,...s};for(const[i,u]of a.entries())if(s.mask){if(u!==(s.mask[i]&r[i+s.offset]))return!1}else if(u!==r[i+s.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(a){if(!(a instanceof strtok3.EndOfStreamError))throw a}}async function _fromTokenizer(r){let a=Buffer.alloc(minimumBytes);const s=12,i=(x,h)=>_check(a,x,h),u=(x,h)=>i(stringToBytes(x),h);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(a,{length:s,mayBeLess:!0}),i([66,77]))return{ext:"bmp",mime:"image/bmp"};if(i([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(i([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(i([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(i([37,33]))return await r.peekBuffer(a,{length:24,mayBeLess:!0}),u("PS-Adobe-",{offset:2})&&u(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(i([31,160])||i([31,157]))return{ext:"Z",mime:"application/x-compress"};if(i([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(i([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(i([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(i([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(u("ID3")){await r.ignore(6);const x=await r.readToken(uint32SyncSafeToken);return r.position+x>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(x),fromTokenizer(r))}if(u("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((a[0]===67||a[0]===70)&&i([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(i([71,73,70]))return{ext:"gif",mime:"image/gif"};if(u("FLIF"))return{ext:"flif",mime:"image/flif"};if(u("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(u("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(u("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(u("FORM"))return{ext:"aif",mime:"audio/aiff"};if(u("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(i([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(a,{length:30});const x={compressedSize:a.readUInt32LE(18),uncompressedSize:a.readUInt32LE(22),filenameLength:a.readUInt16LE(26),extraFieldLength:a.readUInt16LE(28)};if(x.filename=await r.readToken(new Token.StringType(x.filenameLength,"utf-8")),await r.ignore(x.extraFieldLength),x.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(x.filename.endsWith(".rels")||x.filename.endsWith(".xml"))switch(x.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(x.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(x.filename.startsWith("3D/")&&x.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(x.filename==="mimetype"&&x.compressedSize===x.uncompressedSize)switch(await r.readToken(new Token.StringType(x.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(x.compressedSize===0){let h=-1;for(;h<0&&r.position<r.fileInfo.size;)await r.peekBuffer(a,{mayBeLess:!0}),h=a.indexOf("504B0304",0,"hex"),await r.ignore(h>=0?h:a.length)}else await r.ignore(x.compressedSize)}}catch(x){if(!(x instanceof strtok3.EndOfStreamError))throw x}return{ext:"zip",mime:"application/zip"}}if(u("OggS")){await r.ignore(28);const x=Buffer.alloc(8);return await r.readBuffer(x),_check(x,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(x,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(x,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(x,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(x,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(x,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(i([80,75])&&(a[2]===3||a[2]===5||a[2]===7)&&(a[3]===4||a[3]===6||a[3]===8))return{ext:"zip",mime:"application/zip"};if(u("ftyp",{offset:4})&&(a[8]&96)!==0){const x=a.toString("binary",8,12).replace("\0"," ").trim();switch(x){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return x.startsWith("3g")?x.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(u("MThd"))return{ext:"mid",mime:"audio/midi"};if(u("wOFF")&&(i([0,1,0,0],{offset:4})||u("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(u("wOF2")&&(i([0,1,0,0],{offset:4})||u("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(i([212,195,178,161])||i([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(u("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(u("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(u("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(i([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(u("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(u("%PDF")){await r.ignore(1350);const x=10*1024*1024,h=Buffer.alloc(Math.min(x,r.fileInfo.size));return await r.readBuffer(h,{mayBeLess:!0}),h.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(i([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(i([73,73,42,0]))return u("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:i([28,0,254,0],{offset:8})||i([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:i([8,0,0,0],{offset:4})&&(i([45,0,254,0],{offset:8})||i([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(a=Buffer.alloc(24),await r.peekBuffer(a),(i([16,251,134,1],{offset:4})||i([8,0,0,0],{offset:4}))&&i([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(i([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(u("MAC "))return{ext:"ape",mime:"audio/ape"};if(i([26,69,223,163])){async function x(){const m=await r.peekNumber(Token.UINT8);let l=128,d=0;for(;(m&l)===0&&l!==0;)++d,l>>=1;const f=Buffer.alloc(d+1);return await r.readBuffer(f),f}async function h(){const m=await x(),l=await x();l[0]^=128>>l.length-1;const d=Math.min(6,l.length);return{id:m.readUIntBE(0,m.length),len:l.readUIntBE(l.length-d,d)}}async function p(m,l){for(;l>0;){const d=await h();if(d.id===17026)return r.readToken(new Token.StringType(d.len,"utf-8"));await r.ignore(d.len),--l}}const b=await h();switch(await p(1,b.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(i([82,73,70,70])){if(i([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(i([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(i([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(u("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(i([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(u("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(u("MSCF")||u("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(i([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(i([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(i([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(i([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(u("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(u("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(i([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(u("IMPM"))return{ext:"it",mime:"audio/x-it"};if(u("-lh0-",{offset:2})||u("-lh1-",{offset:2})||u("-lh2-",{offset:2})||u("-lh3-",{offset:2})||u("-lh4-",{offset:2})||u("-lh5-",{offset:2})||u("-lh6-",{offset:2})||u("-lh7-",{offset:2})||u("-lzs-",{offset:2})||u("-lz4-",{offset:2})||u("-lz5-",{offset:2})||u("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(i([0,0,1,186])){if(i([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(i([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(u("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(i([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(u("<?xml "))return{ext:"xml",mime:"application/xml"};if(i([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(i([82,97,114,33,26,7])&&(a[6]===0||a[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(u("solid "))return{ext:"stl",mime:"model/stl"};if(u("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(u("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(i([137,80,78,71,13,10,26,10])){await r.ignore(8);async function x(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{const h=await x();if(h.length<0)return;switch(h.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(h.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(i([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(i([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(i([102,114,101,101],{offset:4})||i([109,100,97,116],{offset:4})||i([109,111,111,118],{offset:4})||i([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(i([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(u("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(i([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(i([48,38,178,117,142,102,207,17,166,217])){async function x(){const h=Buffer.alloc(16);return await r.readBuffer(h),{id:h,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){const h=await x();let p=h.size-24;if(_check(h.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const b=Buffer.alloc(16);if(p-=await r.readBuffer(b),_check(b,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(b,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(p)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(i([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((i([126,16,4])||i([126,24,4]))&&i([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(i([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(i([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(i([255,10])||i([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(i([0,0,1,186])||i([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(i([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(i([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(i([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(i([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(a,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),u("BEGIN:")){if(u("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(u("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(u("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(u("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(u("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(i([4,0,0,0])&&a.length>=16){const x=a.readUInt32LE(12);if(x>12&&a.length>=x+16)try{const h=a.slice(16,x+16).toString();if(JSON.parse(h).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(i([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(u("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(i([71],{offset:4})&&(i([71],{offset:192})||i([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(i([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(i([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(i([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(i([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(i([76,80],{offset:34})&&(i([0,0,1],{offset:8})||i([1,0,2],{offset:8})||i([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(i([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(a,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(a))return{ext:"tar",mime:"application/x-tar"};if(i([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(u("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(a.length>=2&&i([255,224],{offset:0,mask:[255,224]})){if(i([16],{offset:1,mask:[22]}))return i([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(i([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(i([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(i([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const r=new stream.PassThrough;let a;stream.pipeline?a=stream.pipeline(readableStream,r,()=>{}):a=readableStream.pipe(r);const s=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const i=await fromBuffer(s);r.fileType=i}catch(i){reject(i)}resolve(a)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,a=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,i=/\\([\u000b\u0020-\u00ff])/g,u=/([\\"])/g,x=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=h,contentType.parse=p;function h(l){if(!l||typeof l!="object")throw new TypeError("argument obj is required");var d=l.parameters,f=l.type;if(!f||!x.test(f))throw new TypeError("invalid type");var S=f;if(d&&typeof d=="object")for(var y,E=Object.keys(d).sort(),g=0;g<E.length;g++){if(y=E[g],!s.test(y))throw new TypeError("invalid parameter name");S+="; "+y+"="+c(d[y])}return S}function p(l){if(!l)throw new TypeError("argument string is required");var d=typeof l=="object"?b(l):l;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var f=d.indexOf(";"),S=f!==-1?d.slice(0,f).trim():d.trim();if(!x.test(S))throw new TypeError("invalid media type");var y=new m(S.toLowerCase());if(f!==-1){var E,g,w;for(r.lastIndex=f;g=r.exec(d);){if(g.index!==f)throw new TypeError("invalid parameter format");f+=g[0].length,E=g[1].toLowerCase(),w=g[2],w.charCodeAt(0)===34&&(w=w.slice(1,-1),w.indexOf("\\")!==-1&&(w=w.replace(i,"$1"))),y.parameters[E]=w}if(f!==d.length)throw new TypeError("invalid parameter format")}return y}function b(l){var d;if(typeof l.getHeader=="function"?d=l.getHeader("content-type"):typeof l.headers=="object"&&(d=l.headers&&l.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function c(l){var d=String(l);if(s.test(d))return d;if(d.length>0&&!a.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(u,"\\$1")+'"'}function m(l){this.parameters=Object.create(null),this.type=l}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,a=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,s=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=i,mediaTyper.parse=x,mediaTyper.test=u;function i(p){if(!p||typeof p!="object")throw new TypeError("argument obj is required");var b=p.subtype,c=p.suffix,m=p.type;if(!m||!a.test(m))throw new TypeError("invalid type");if(!b||!r.test(b))throw new TypeError("invalid subtype");var l=m+"/"+b;if(c){if(!a.test(c))throw new TypeError("invalid suffix");l+="+"+c}return l}function u(p){if(!p)throw new TypeError("argument string is required");if(typeof p!="string")throw new TypeError("argument string is required to be a string");return s.test(p.toLowerCase())}function x(p){if(!p)throw new TypeError("argument string is required");if(typeof p!="string")throw new TypeError("argument string is required to be a string");var b=s.exec(p.toLowerCase());if(!b)throw new TypeError("invalid media type");var c=b[1],m=b[2],l,d=m.lastIndexOf("+");return d!==-1&&(l=m.substr(d+1),m=m.substr(0,d)),new h(c,m,l)}function h(p,b,c){this.type=p,this.subtype=b,this.suffix=c}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrackType=r.TargetType=r.DataType=void 0,(function(a){a[a.string=0]="string",a[a.uint=1]="uint",a[a.uid=2]="uid",a[a.bool=3]="bool",a[a.binary=4]="binary",a[a.float=5]="float"})(r.DataType||(r.DataType={})),(function(a){a[a.shot=10]="shot",a[a.scene=20]="scene",a[a.track=30]="track",a[a.part=40]="part",a[a.album=50]="album",a[a.edition=60]="edition",a[a.collection=70]="collection"})(r.TargetType||(r.TargetType={})),(function(a){a[a.video=1]="video",a[a.audio=2]="audio",a[a.complex=3]="complex",a[a.logo=4]="logo",a[a.subtitle=17]="subtitle",a[a.button=18]="button",a[a.control=32]="control"})(r.TrackType||(r.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrackType=void 0;var a=requireTypes();Object.defineProperty(r,"TrackType",{enumerable:!0,get:function(){return a.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.isUnique=r.isSingleton=r.commonTags=void 0,r.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function a(i){return r.commonTags.hasOwnProperty(i)&&!r.commonTags[i].multiple}r.isSingleton=a;function s(i){return!r.commonTags[i].multiple||r.commonTags[i].unique}r.isUnique=s})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class r{static toIntOrNull(s){const i=parseInt(s,10);return isNaN(i)?null:i}static normalizeTrack(s){const i=s.toString().split("/");return{no:parseInt(i[0],10)||null,of:parseInt(i[1],10)||null}}constructor(s,i){this.tagTypes=s,this.tagMap=i}mapGenericTag(s,i){s={id:s.id,value:s.value},this.postMap(s,i);const u=this.getCommonName(s.id);return u?{id:u,value:s.value}:null}getCommonName(s){return this.tagMap[s]}postMap(s,i){}}return r.maxRatingScore=1,GenericTagMapper.CommonTagMapper=r,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const r=requireGenericTagMapper(),a={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class s extends r.CommonTagMapper{constructor(){super(["ID3v1"],a)}}return ID3v1TagMap.ID3v1TagMapper=s,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const r=requireGenericTagMapper();let a=class extends r.CommonTagMapper{constructor(i,u){const x={};for(const h of Object.keys(u))x[h.toUpperCase()]=u[h];super(i,x)}getCommonName(i){return this.tagMap[i.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=a,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function r(d,f,S){return(d[f]&1<<S)!==0}Util.getBit=r;function a(d,f,S,y){let E=f;if(y==="utf16le"){for(;d[E]!==0||d[E+1]!==0;){if(E>=S)return S;E+=2}return E}else{for(;d[E]!==0;){if(E>=S)return S;E++}return E}}Util.findZero=a;function s(d){const f=d.indexOf("\0");return f===-1?d:d.substr(0,f)}Util.trimRightNull=s;function i(d){const f=d.length;if((f&1)!==0)throw new Error("Buffer length must be even");for(let S=0;S<f;S+=2){const y=d[S];d[S]=d[S+1],d[S+1]=y}return d}function u(d,f){if(d[0]===255&&d[1]===254)return u(d.subarray(2),f);if(f==="utf16le"&&d[0]===254&&d[1]===255){if((d.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return u(i(d),f)}return Buffer.from(d).toString(f)}Util.decodeString=u;function x(d){return d=d.replace(/^\x00+/g,""),d=d.replace(/\x00+$/g,""),d}Util.stripNulls=x;function h(d,f,S,y){const E=f+~~(S/8),g=S%8;let w=d[E];w&=255>>g;const T=8-g,_=y-T;return _<0?w>>=8-g-y:_>0&&(w<<=_,w|=h(d,f,S+T,_)),w}Util.getBitAllignedNumber=h;function p(d,f,S){return h(d,f,S,1)===1}Util.isBitSet=p;function b(d){const f=[];for(let S=0,y=d.length;S<y;S++){const E=Number(d.charCodeAt(S)).toString(16);f.push(E.length===1?"0"+E:E)}return f.join(" ")}Util.a2hex=b;function c(d){return 10*Math.log10(d)}Util.ratioToDb=c;function m(d){return Math.pow(10,d/10)}Util.dbToRatio=m;function l(d){const f=d.split(" ").map(S=>S.trim().toLowerCase());if(f.length>=1){const S=parseFloat(f[0]);return f.length===2&&f[1]==="db"?{dB:S,ratio:m(S)}:{dB:c(S),ratio:S}}}return Util.toRatio=l,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const r=requireGenericTagMapper(),a=requireCaseInsensitiveTagMap(),s=requireUtil$1(),i={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let u=class Pu extends a.CaseInsensitiveTagMap{static toRating(h){return{source:h.email,rating:h.rating>0?(h.rating-1)/254*r.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],i)}postMap(h,p){switch(h.id){case"UFID":h.value.owner_identifier==="http://musicbrainz.org"&&(h.id+=":"+h.value.owner_identifier,h.value=s.decodeString(h.value.identifier,"latin1"));break;case"PRIV":switch(h.value.owner_identifier){case"AverageLevel":case"PeakValue":h.id+=":"+h.value.owner_identifier,h.value=h.value.data.length===4?h.value.data.readUInt32LE(0):null,h.value===null&&p.addWarning("Failed to parse PRIV:PeakValue");break;default:p.addWarning(`Unknown PRIV owner-identifier: ${h.value.owner_identifier}`)}break;case"COMM":h.value=h.value?h.value.text:null;break;case"POPM":h.value=Pu.toRating(h.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=u,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const r=requireGenericTagMapper(),a={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let s=class Mu extends r.CommonTagMapper{static toRating(u){return{rating:parseFloat(u+1)/5}}constructor(){super(["asf"],a)}postMap(u){switch(u.id){case"WM/SharedUserRating":const x=u.id.split(":");u.value=Mu.toRating(u.value),u.id=x[0];break}}};return AsfTagMapper.AsfTagMapper=s,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ID3v22TagMapper=r.id3v22TagMap=void 0;const a=requireCaseInsensitiveTagMap();r.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class s extends a.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],r.id3v22TagMap)}}r.ID3v22TagMapper=s})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const r=requireCaseInsensitiveTagMap(),a={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let s=class extends r.CaseInsensitiveTagMap{constructor(){super(["APEv2"],a)}};return APEv2TagMapper.APEv2TagMapper=s,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MP4TagMapper=r.tagType=void 0;const a=requireCaseInsensitiveTagMap(),s={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};r.tagType="iTunes";class i extends a.CaseInsensitiveTagMap{constructor(){super([r.tagType],s)}postMap(x,h){switch(x.id){case"rate":x.value={source:void 0,rating:parseFloat(x.value)/100};break}}}r.MP4TagMapper=i})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const r=requireGenericTagMapper(),a={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let s=class no extends r.CommonTagMapper{static toRating(u,x,h){return{source:u&&u.toLowerCase(),rating:parseFloat(x)/h*r.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],a)}postMap(u){if(u.id==="RATING")u.value=no.toRating(void 0,u.value,100);else if(u.id.indexOf("RATING:")===0){const x=u.id.split(":");u.value=no.toRating(x[1],u.value,1),u.id=x[0]}}};return VorbisTagMapper.VorbisTagMapper=s,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RiffInfoTagMapper=r.riffInfoTagMap=void 0;const a=requireGenericTagMapper();r.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class s extends a.CommonTagMapper{constructor(){super(["exif"],r.riffInfoTagMap)}}r.RiffInfoTagMapper=s})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const r=requireCaseInsensitiveTagMap(),a={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let s=class extends r.CaseInsensitiveTagMap{constructor(){super(["matroska"],a)}};return MatroskaTagMapper.MatroskaTagMapper=s,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const r=requireGenericTagMapper(),a={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class s extends r.CommonTagMapper{constructor(){super(["AIFF"],a)}}return AiffTagMap.AiffTagMapper=s,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const r=requireID3v1TagMap(),a=requireID3v24TagMapper(),s=requireAsfTagMapper(),i=requireID3v22TagMapper(),u=requireAPEv2TagMapper(),x=requireMP4TagMapper(),h=requireVorbisTagMapper(),p=requireRiffInfoTagMap(),b=requireMatroskaTagMapper(),c=requireAiffTagMap();let m=class{constructor(){this.tagMappers={},[new r.ID3v1TagMapper,new i.ID3v22TagMapper,new a.ID3v24TagMapper,new x.MP4TagMapper,new x.MP4TagMapper,new h.VorbisTagMapper,new u.APEv2TagMapper,new s.AsfTagMapper,new p.RiffInfoTagMapper,new b.MatroskaTagMapper,new c.AiffTagMapper].forEach(d=>{this.registerTagMapper(d)})}mapTag(d,f,S){if(this.tagMappers[d])return this.tagMappers[d].mapGenericTag(f,S);throw new Error("No generic tag mapper defined for tag-format: "+d)}registerTagMapper(d){for(const f of d.tagTypes)this.tagMappers[f]=d}};return CombinedTagMapper.CombinedTagMapper=m,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const r=requireType(),a=requireBrowser$3(),s=requireGenericTagTypes(),i=requireCombinedTagMapper(),u=requireGenericTagMapper(),x=requireUtil$1(),h=requireCore$1(),p=(0,a.default)("music-metadata:collector"),b=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let c=class{constructor(d){this.opts=d,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new i.CombinedTagMapper;let f=1;for(const S of b)this.originPriority[S]=f++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(d){p(`streamInfo: type=${r.TrackType[d.type]}, codec=${d.codecName}`),this.format.trackInfo.push(d)}setFormat(d,f){p(`format: ${d} = ${f}`),this.format[d]=f,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:d,value:f}})}addTag(d,f,S){p(`tag ${d}.${f} = ${S}`),this.native[d]||(this.format.tagTypes.push(d),this.native[d]=[]),this.native[d].push({id:f,value:S}),this.toCommon(d,f,S)}addWarning(d){this.quality.warnings.push({message:d})}postMap(d,f){switch(f.id){case"artist":if(this.commonOrigin.artist===this.originPriority[d])return this.postMap("artificial",{id:"artists",value:f.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:f.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(f.value)===-1)){const g=(this.common.artists||[]).concat([f.value]),T={id:"artist",value:m(g)};this.setGenericTag("artificial",T)}break;case"picture":this.postFixPicture(f.value).then(g=>{g!==null&&(f.value=g,this.setGenericTag(d,f))});return;case"totaltracks":this.common.track.of=u.CommonTagMapper.toIntOrNull(f.value);return;case"totaldiscs":this.common.disk.of=u.CommonTagMapper.toIntOrNull(f.value);return;case"movementTotal":this.common.movementIndex.of=u.CommonTagMapper.toIntOrNull(f.value);return;case"track":case"disk":case"movementIndex":const S=this.common[f.id].of;this.common[f.id]=u.CommonTagMapper.normalizeTrack(f.value),this.common[f.id].of=S??this.common[f.id].of;return;case"bpm":case"year":case"originalyear":f.value=parseInt(f.value,10);break;case"date":const y=parseInt(f.value.substr(0,4),10);isNaN(y)||(this.common.year=y);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":f.value=typeof f.value=="string"?parseInt(f.value,10):f.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":f.value=(0,x.toRatio)(f.value);break;case"replaygain_track_minmax":f.value=f.value.split(",").map(g=>parseInt(g,10));break;case"replaygain_undo":const E=f.value.split(",").map(g=>parseInt(g,10));f.value={leftChannel:E[0],rightChannel:E[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":f.value=f.value==="1"||f.value===1;break;case"isrc":if(this.common[f.id]&&this.common[f.id].indexOf(f.value)!==-1)return;break}f.value!==null&&this.setGenericTag(d,f)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(d){if(d.data&&d.data.length>0){if(!d.format){const f=await h.fromBuffer(d.data);if(f)d.format=f.mime;else return null}switch(d.format=d.format.toLocaleLowerCase(),d.format){case"image/jpg":d.format="image/jpeg"}return d}return this.addWarning("Empty picture tag found"),null}toCommon(d,f,S){const y={id:f,value:S},E=this.tagMapper.mapTag(d,y,this);E&&this.postMap(d,E)}setGenericTag(d,f){p(`common.${f.id} = ${f.value}`);const S=this.commonOrigin[f.id]||1e3,y=this.originPriority[d];if((0,s.isSingleton)(f.id))if(y<=S)this.common[f.id]=f.value,this.commonOrigin[f.id]=y;else return p(`Ignore native tag (singleton): ${d}.${f.id} = ${f.value}`);else if(y===S)!(0,s.isUnique)(f.id)||this.common[f.id].indexOf(f.value)===-1?this.common[f.id].push(f.value):p(`Ignore duplicate value: ${d}.${f.id} = ${f.value}`);else if(y<S)this.common[f.id]=[f.value],this.commonOrigin[f.id]=y;else return p(`Ignore native tag (list): ${d}.${f.id} = ${f.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:f.id,value:f.value}})}};MetadataCollector.MetadataCollector=c;function m(l){return l.length>2?l.slice(0,l.length-1).join(", ")+" & "+l[l.length-1]:l.join(" & ")}return MetadataCollector.joinArtists=m,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextEncodingToken=r.ExtendedHeader=r.ID3v2Header=r.UINT32SYNCSAFE=r.AttachedPictureType=void 0;const a=requireLib$2(),s=requireUtil$1();(function(i){i[i.Other=0]="Other",i[i["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",i[i["Other file icon"]=2]="Other file icon",i[i["Cover (front)"]=3]="Cover (front)",i[i["Cover (back)"]=4]="Cover (back)",i[i["Leaflet page"]=5]="Leaflet page",i[i["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",i[i["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",i[i["Artist/performer"]=8]="Artist/performer",i[i.Conductor=9]="Conductor",i[i["Band/Orchestra"]=10]="Band/Orchestra",i[i.Composer=11]="Composer",i[i["Lyricist/text writer"]=12]="Lyricist/text writer",i[i["Recording Location"]=13]="Recording Location",i[i["During recording"]=14]="During recording",i[i["During performance"]=15]="During performance",i[i["Movie/video screen capture"]=16]="Movie/video screen capture",i[i["A bright coloured fish"]=17]="A bright coloured fish",i[i.Illustration=18]="Illustration",i[i["Band/artist logotype"]=19]="Band/artist logotype",i[i["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(r.AttachedPictureType||(r.AttachedPictureType={})),r.UINT32SYNCSAFE={get:(i,u)=>i[u+3]&127|i[u+2]<<7|i[u+1]<<14|i[u]<<21,len:4},r.ID3v2Header={len:10,get:(i,u)=>({fileIdentifier:new a.StringType(3,"ascii").get(i,u),version:{major:a.INT8.get(i,u+3),revision:a.INT8.get(i,u+4)},flags:{unsynchronisation:s.getBit(i,u+5,7),isExtendedHeader:s.getBit(i,u+5,6),expIndicator:s.getBit(i,u+5,5),footer:s.getBit(i,u+5,4)},size:r.UINT32SYNCSAFE.get(i,u+6)})},r.ExtendedHeader={len:10,get:(i,u)=>({size:a.UINT32_BE.get(i,u),extendedFlags:a.UINT16_BE.get(i,u+4),sizeOfPadding:a.UINT32_BE.get(i,u+6),crcDataPresent:s.getBit(i,u+4,31)})},r.TextEncodingToken={len:1,get:(i,u)=>{switch(i[u]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let r=class{init(s,i,u){return this.metadata=s,this.tokenizer=i,this.options=u,this}};return BasicParser.BasicParser=r,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FourCcToken=void 0;const a=requireUtil$1(),s=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;r.FourCcToken={len:4,get:(i,u)=>{const x=i.toString("binary",u,u+r.FourCcToken.len);if(!x.match(s))throw new Error(`FourCC contains invalid characters: ${a.a2hex(x)} "${x}"`);return x},put:(i,u,x)=>{const h=Buffer.from(x,"binary");if(h.length!==4)throw new Error("Invalid length");return h.copy(i,u)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBitSet=r.parseTagFlags=r.TagField=r.TagItemHeader=r.TagFooter=r.Header=r.DescriptorParser=r.DataType=void 0;const a=requireLib$2(),s=requireFourCC();(function(h){h[h.text_utf8=0]="text_utf8",h[h.binary=1]="binary",h[h.external_info=2]="external_info",h[h.reserved=3]="reserved"})(r.DataType||(r.DataType={})),r.DescriptorParser={len:52,get:(h,p)=>({ID:s.FourCcToken.get(h,p),version:a.UINT32_LE.get(h,p+4)/1e3,descriptorBytes:a.UINT32_LE.get(h,p+8),headerBytes:a.UINT32_LE.get(h,p+12),seekTableBytes:a.UINT32_LE.get(h,p+16),headerDataBytes:a.UINT32_LE.get(h,p+20),apeFrameDataBytes:a.UINT32_LE.get(h,p+24),apeFrameDataBytesHigh:a.UINT32_LE.get(h,p+28),terminatingDataBytes:a.UINT32_LE.get(h,p+32),fileMD5:new a.Uint8ArrayType(16).get(h,p+36)})},r.Header={len:24,get:(h,p)=>({compressionLevel:a.UINT16_LE.get(h,p),formatFlags:a.UINT16_LE.get(h,p+2),blocksPerFrame:a.UINT32_LE.get(h,p+4),finalFrameBlocks:a.UINT32_LE.get(h,p+8),totalFrames:a.UINT32_LE.get(h,p+12),bitsPerSample:a.UINT16_LE.get(h,p+16),channel:a.UINT16_LE.get(h,p+18),sampleRate:a.UINT32_LE.get(h,p+20)})},r.TagFooter={len:32,get:(h,p)=>({ID:new a.StringType(8,"ascii").get(h,p),version:a.UINT32_LE.get(h,p+8),size:a.UINT32_LE.get(h,p+12),fields:a.UINT32_LE.get(h,p+16),flags:u(a.UINT32_LE.get(h,p+20))})},r.TagItemHeader={len:8,get:(h,p)=>({size:a.UINT32_LE.get(h,p),flags:u(a.UINT32_LE.get(h,p+4))})};const i=h=>new a.Uint8ArrayType(h.size-r.TagFooter.len);r.TagField=i;function u(h){return{containsHeader:x(h,31),containsFooter:x(h,30),isHeader:x(h,31),readOnly:x(h,0),dataType:(h&6)>>1}}r.parseTagFlags=u;function x(h,p){return(h&1<<p)!==0}r.isBitSet=x})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const r=requireBrowser$3(),a=requireCore$2(),s=requireLib$2(),i=requireUtil$1(),u=requireBasicParser(),x=requireAPEv2Token(),h=(0,r.default)("music-metadata:parser:APEv2"),p="APEv2",b="APETAGEX";let c=class hi extends u.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(l,d,f){const S=new hi;return S.init(l,d,f),S.tryParseApeHeader()}static calculateDuration(l){let d=l.totalFrames>1?l.blocksPerFrame*(l.totalFrames-1):0;return d+=l.finalFrameBlocks,d/l.sampleRate}static async findApeFooterOffset(l,d){const f=Buffer.alloc(x.TagFooter.len);await l.randomRead(f,0,x.TagFooter.len,d-x.TagFooter.len);const S=x.TagFooter.get(f,0);if(S.ID==="APETAGEX")return h(`APE footer header at offset=${d}`),{footer:S,offset:d-S.size}}static parseTagFooter(l,d,f){const S=x.TagFooter.get(d,d.length-x.TagFooter.len);if(S.ID!==b)throw new Error("Unexpected APEv2 Footer ID preamble value.");a.fromBuffer(d);const y=new hi;return y.init(l,a.fromBuffer(d),f),y.parseTags(S)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<x.TagFooter.len){h("No APEv2 header found, end-of-file reached");return}const l=await this.tokenizer.peekToken(x.TagFooter);if(l.ID===b)return await this.tokenizer.ignore(x.TagFooter.len),this.parseTags(l);if(h(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const d=this.tokenizer.fileInfo.size-this.tokenizer.position,f=Buffer.alloc(d);return await this.tokenizer.readBuffer(f),hi.parseTagFooter(this.metadata,f,this.options)}}async parse(){const l=await this.tokenizer.readToken(x.DescriptorParser);if(l.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=l;const d=l.descriptorBytes-x.DescriptorParser.len,f=await(d>0?this.parseDescriptorExpansion(d):this.parseHeader());return await this.tokenizer.ignore(f.forwardBytes),this.tryParseApeHeader()}async parseTags(l){const d=Buffer.alloc(256);let f=l.size-x.TagFooter.len;h(`Parse APE tags at offset=${this.tokenizer.position}, size=${f}`);for(let S=0;S<l.fields;S++){if(f<x.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${l.fields-S} items remaining, but no more tag data to read.`);break}const y=await this.tokenizer.readToken(x.TagItemHeader);f-=x.TagItemHeader.len+y.size,await this.tokenizer.peekBuffer(d,{length:Math.min(d.length,f)});let E=i.findZero(d,0,d.length);const g=await this.tokenizer.readToken(new s.StringType(E,"ascii"));switch(await this.tokenizer.ignore(1),f-=g.length+1,y.flags.dataType){case x.DataType.text_utf8:{const T=(await this.tokenizer.readToken(new s.StringType(y.size,"utf8"))).split(/\x00/g);for(const _ of T)this.metadata.addTag(p,g,_);break}case x.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(y.size);else{const w=Buffer.alloc(y.size);await this.tokenizer.readBuffer(w),E=i.findZero(w,0,w.length);const T=w.toString("utf8",0,E),_=Buffer.from(w.slice(E+1));this.metadata.addTag(p,g,{description:T,data:_})}break;case x.DataType.external_info:h(`Ignore external info ${g}`),await this.tokenizer.ignore(y.size);break;case x.DataType.reserved:h(`Ignore external info ${g}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${g}"`),await this.tokenizer.ignore(y.size);break}}}async parseDescriptorExpansion(l){return await this.tokenizer.ignore(l),this.parseHeader()}async parseHeader(){const l=await this.tokenizer.readToken(x.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",l.bitsPerSample),this.metadata.setFormat("sampleRate",l.sampleRate),this.metadata.setFormat("numberOfChannels",l.channel),this.metadata.setFormat("duration",hi.calculateDuration(l)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=c,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.hasID3v1Header=r.ID3v1Parser=r.Genres=void 0;const a=requireBrowser$3(),s=requireLib$2(),i=requireUtil$1(),u=requireBasicParser(),x=requireAPEv2Parser(),h=(0,a.default)("music-metadata:parser:ID3v1");r.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const p={len:128,get:(l,d)=>{const f=new b(3).get(l,d);return f==="TAG"?{header:f,title:new b(30).get(l,d+3),artist:new b(30).get(l,d+33),album:new b(30).get(l,d+63),year:new b(4).get(l,d+93),comment:new b(28).get(l,d+97),zeroByte:s.UINT8.get(l,d+127),track:s.UINT8.get(l,d+126),genre:s.UINT8.get(l,d+127)}:null}};class b extends s.StringType{constructor(d){super(d,"binary")}get(d,f){let S=super.get(d,f);return S=i.trimRightNull(S),S=S.trim(),S.length>0?S:void 0}}class c extends u.BasicParser{static getGenre(d){if(d<r.Genres.length)return r.Genres[d]}async parse(){if(!this.tokenizer.fileInfo.size){h("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const S=new x.APEv2Parser;S.init(this.metadata,this.tokenizer,this.options),await S.parseTags(this.options.apeHeader.footer)}const d=this.tokenizer.fileInfo.size-p.len;if(this.tokenizer.position>d){h("Already consumed the last 128 bytes");return}const f=await this.tokenizer.readToken(p,d);if(f){h("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-p.len);for(const y of["title","artist","album","comment","track","year"])f[y]&&f[y]!==""&&this.addTag(y,f[y]);const S=c.getGenre(f.genre);S&&this.addTag("genre",S)}else h("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-p.len)}addTag(d,f){this.metadata.addTag("ID3v1",d,f)}}r.ID3v1Parser=c;async function m(l){if(l.fileSize>=128){const d=Buffer.alloc(3);return await l.randomRead(d,0,d.length,l.fileSize-128),d.toString("binary")==="TAG"}return!1}r.hasID3v1Header=m})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const r=requireBrowser$3(),a=requireLib$2(),s=requireUtil$1(),i=requireID3v2Token(),u=requireID3v1Parser(),x=(0,r.default)("music-metadata:id3v2:frame-parser"),h="latin1";function p(m){const l=[];let d,f="";for(const S of m)if(typeof d=="string")if(S==="("&&d==="")f+="(",d=void 0;else if(S===")"){f!==""&&(l.push(f),f="");const y=b(d);y&&l.push(y),d=void 0}else d+=S;else S==="("?d="":f+=S;return f&&(l.length===0&&f.match(/^\d*$/)&&(f=u.Genres[f]),l.push(f)),l}FrameParser.parseGenre=p;function b(m){if(m==="RX")return"Remix";if(m==="CR")return"Cover";if(m.match(/^\d*$/))return u.Genres[m]}let c=class Nr{constructor(l,d){this.major=l,this.warningCollector=d}readData(l,d,f){if(l.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${d}`);return}const{encoding:S,bom:y}=i.TextEncodingToken.get(l,0),E=l.length;let g=0,w=[];const T=Nr.getNullTerminatorLength(S);let _;const A={};switch(x(`Parsing tag type=${d}, encoding=${S}, bom=${y}`),d!=="TXXX"&&d[0]==="T"?"T*":d){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let I;try{I=s.decodeString(l.slice(1),S).replace(/\x00+$/,"")}catch(Y){this.warningCollector.addWarning(`id3v2.${this.major} type=${d} header has invalid string value: ${Y.message}`)}switch(d){case"TMCL":case"TIPL":case"IPLS":w=this.splitValue(d,I),w=Nr.functionList(w);break;case"TRK":case"TRCK":case"TPOS":w=I;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":w=this.splitValue(d,I);break;case"TCO":case"TCON":w=this.splitValue(d,I).map(Y=>p(Y)).reduce((Y,z)=>Y.concat(z),[]);break;case"PCS":case"PCST":w=this.major>=4?this.splitValue(d,I):[I],w=Array.isArray(w)&&w[0]===""?1:0;break;default:w=this.major>=4?this.splitValue(d,I):[I]}break;case"TXXX":w=Nr.readIdentifierAndData(l,g+1,E,S),w={description:w.id,text:this.splitValue(d,s.decodeString(w.data,S).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(f){const Y={};switch(g+=1,this.major){case 2:Y.format=s.decodeString(l.slice(g,g+3),"latin1"),g+=3;break;case 3:case 4:_=s.findZero(l,g,E,h),Y.format=s.decodeString(l.slice(g,_),h),g=_+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}Y.format=Nr.fixPictureMimeType(Y.format),Y.type=i.AttachedPictureType[l[g]],g+=1,_=s.findZero(l,g,E,S),Y.description=s.decodeString(l.slice(g,_),S),g=_+T,Y.data=Buffer.from(l.slice(g,E)),w=Y}break;case"CNT":case"PCNT":w=a.UINT32_BE.get(l,0);break;case"SYLT":for(g+=7,w=[];g<E;){const Y=l.slice(g,g=s.findZero(l,g,E,S));g+=5,w.push(s.decodeString(Y,S))}break;case"ULT":case"USLT":case"COM":case"COMM":g+=1,A.language=s.decodeString(l.slice(g,g+3),h),g+=3,_=s.findZero(l,g,E,S),A.description=s.decodeString(l.slice(g,_),S),g=_+T,A.text=s.decodeString(l.slice(g,E),S).replace(/\x00+$/,""),w=[A];break;case"UFID":w=Nr.readIdentifierAndData(l,g,E,h),w={owner_identifier:w.id,identifier:w.data};break;case"PRIV":w=Nr.readIdentifierAndData(l,g,E,h),w={owner_identifier:w.id,data:w.data};break;case"POPM":_=s.findZero(l,g,E,h);const k=s.decodeString(l.slice(g,_),h);g=_+1;const N=E-g;w={email:k,rating:a.UINT8.get(l,g),counter:N>=5?a.UINT32_BE.get(l,g+1):void 0};break;case"GEOB":{_=s.findZero(l,g+1,E,S);const Y=s.decodeString(l.slice(g+1,_),h);g=_+1,_=s.findZero(l,g,E-g,S);const z=s.decodeString(l.slice(g,_),h);g=_+1,_=s.findZero(l,g,E-g,S);const W=s.decodeString(l.slice(g,_),h);w={type:Y,filename:z,description:W,data:l.slice(g+1,E)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":w=s.decodeString(l.slice(g,_),h);break;case"WXXX":{_=s.findZero(l,g+1,E,S);const Y=s.decodeString(l.slice(g+1,_),S);g=_+(S==="utf16le"?2:1),w={description:Y,url:s.decodeString(l.slice(g,E),h)};break}case"WFD":case"WFED":w=s.decodeString(l.slice(g+1,s.findZero(l,g+1,E,S)),S);break;case"MCDI":{w=l.slice(0,E);break}default:x("Warning: unsupported id3v2-tag-type: "+d);break}return w}static fixPictureMimeType(l){switch(l=l.toLocaleLowerCase(),l){case"jpg":return"image/jpeg";case"png":return"image/png"}return l}static functionList(l){const d={};for(let f=0;f+1<l.length;f+=2){const S=l[f+1].split(",");d[l[f]]=d.hasOwnProperty(l[f])?d[l[f]].concat(S):S}return d}splitValue(l,d){let f;return this.major<4?(f=d.split(/\x00/g),f.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${l} uses non standard null-separator.`):f=d.split(/\//g)):f=d.split(/\x00/g),Nr.trimArray(f)}static trimArray(l){return l.map(d=>d.replace(/\x00+$/,"").trim())}static readIdentifierAndData(l,d,f,S){const y=s.findZero(l,d,f,S),E=s.decodeString(l.slice(d,y),S);return d=y+Nr.getNullTerminatorLength(S),{id:E,data:l.slice(d,f)}}static getNullTerminatorLength(l){return l==="utf16le"?2:1}};return FrameParser.FrameParser=c,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const r=requireLib$2(),a=requireUtil$1(),s=requireFrameParser(),i=requireID3v2Token();let u=class Jr{static removeUnsyncBytes(h){let p=0,b=0;for(;p<h.length-1;)p!==b&&(h[b]=h[p]),p+=h[p]===255&&h[p+1]===0?2:1,b++;return p<h.length&&(h[b++]=h[p]),h.slice(0,b)}static getFrameHeaderLength(h){switch(h){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(h){return{status:{tag_alter_preservation:a.getBit(h,0,6),file_alter_preservation:a.getBit(h,0,5),read_only:a.getBit(h,0,4)},format:{grouping_identity:a.getBit(h,1,7),compression:a.getBit(h,1,3),encryption:a.getBit(h,1,2),unsynchronisation:a.getBit(h,1,1),data_length_indicator:a.getBit(h,1,0)}}}static readFrameData(h,p,b,c,m){const l=new s.FrameParser(b,m);switch(b){case 2:return l.readData(h,p.id,c);case 3:case 4:return p.flags.format.unsynchronisation&&(h=Jr.removeUnsyncBytes(h)),p.flags.format.data_length_indicator&&(h=h.slice(4,h.length)),l.readData(h,p.id,c);default:throw new Error("Unexpected majorVer: "+b)}}static makeDescriptionTagName(h,p){return h+(p?":"+p:"")}async parse(h,p,b){this.tokenizer=p,this.metadata=h,this.options=b;const c=await this.tokenizer.readToken(i.ID3v2Header);if(c.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=c,this.headerType="ID3v2."+c.version.major,c.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(c.size)}async parseExtendedHeader(){const h=await this.tokenizer.readToken(i.ExtendedHeader),p=h.size-i.ExtendedHeader.len;return p>0?this.parseExtendedHeaderData(p,h.size):this.parseId3Data(this.id3Header.size-h.size)}async parseExtendedHeaderData(h,p){return await this.tokenizer.ignore(h),this.parseId3Data(this.id3Header.size-p)}async parseId3Data(h){const p=await this.tokenizer.readToken(new r.Uint8ArrayType(h));for(const b of this.parseMetadata(p))if(b.id==="TXXX"){if(b.value)for(const c of b.value.text)this.addTag(Jr.makeDescriptionTagName(b.id,b.value.description),c)}else if(b.id==="COM")for(const c of b.value)this.addTag(Jr.makeDescriptionTagName(b.id,c.description),c.text);else if(b.id==="COMM")for(const c of b.value)this.addTag(Jr.makeDescriptionTagName(b.id,c.description),c);else if(Array.isArray(b.value))for(const c of b.value)this.addTag(b.id,c);else this.addTag(b.id,b.value)}addTag(h,p){this.metadata.addTag(this.headerType,h,p)}parseMetadata(h){let p=0;const b=[];for(;p!==h.length;){const c=Jr.getFrameHeaderLength(this.id3Header.version.major);if(p+c>h.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const m=h.slice(p,p+=c),l=this.readFrameHeader(m,this.id3Header.version.major),d=h.slice(p,p+=l.length),f=Jr.readFrameData(d,l,this.id3Header.version.major,!this.options.skipCovers,this.metadata);f&&b.push({id:l.id,value:f})}return b}readFrameHeader(h,p){let b;switch(p){case 2:b={id:Buffer.from(h.slice(0,3)).toString("ascii"),length:r.UINT24_BE.get(h,3)},b.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${b.id}`);break;case 3:case 4:b={id:Buffer.from(h.slice(0,4)).toString("ascii"),length:(p===4?i.UINT32SYNCSAFE:r.UINT32_BE).get(h,4),flags:Jr.readFrameFlags(h.slice(8,10))},b.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${b.id}`);break;default:throw new Error("Unexpected majorVer: "+p)}return b}};return ID3v2Parser.ID3v2Parser=u,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const r=requireLib$2(),a=requireFourCC();class s{constructor(u,x){this.isAifc=x;const h=x?22:18;if(u.chunkSize<h)throw new Error(`COMMON CHUNK size should always be at least ${h}`);this.len=u.chunkSize}get(u,x){const h=u.readUInt16BE(x+8)-16398,p=u.readUInt16BE(x+8+2),b={numChannels:u.readUInt16BE(x),numSampleFrames:u.readUInt32BE(x+2),sampleSize:u.readUInt16BE(x+6),sampleRate:h<0?p>>Math.abs(h):p<<h};if(this.isAifc){if(b.compressionType=a.FourCcToken.get(u,x+18),this.len>22){const c=u.readInt8(x+22);if(c>0){const m=(c+1)%2;if(23+c+m===this.len)b.compressionName=new r.StringType(c,"binary").get(u,x+23);else throw new Error("Illegal pstring length")}else b.compressionName=void 0}}else b.compressionName="PCM";return b}}return AiffToken.Common=s,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const r=requireLib$2(),a=requireFourCC();return iff.Header={len:8,get:(s,i)=>({chunkID:a.FourCcToken.get(s,i),chunkSize:Number(BigInt(r.UINT32_BE.get(s,i+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireCore$2(),i=requireID3v2Parser(),u=requireFourCC(),x=requireBasicParser(),h=requireAiffToken(),p=requireIff(),b=(0,a.default)("music-metadata:parser:aiff"),c={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class m extends x.BasicParser{async parse(){if((await this.tokenizer.readToken(p.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const f=await this.tokenizer.readToken(u.FourCcToken);switch(f){case"AIFF":this.metadata.setFormat("container",f),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+f)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=p.Header.len;){b("Reading AIFF chunk at offset="+this.tokenizer.position);const S=await this.tokenizer.readToken(p.Header),y=2*Math.round(S.chunkSize/2),E=await this.readData(S);await this.tokenizer.ignore(y-E)}}catch(S){if(S instanceof s.EndOfStreamError)b("End-of-stream");else throw S}}async readData(d){var f;switch(d.chunkID){case"COMM":const S=await this.tokenizer.readToken(new h.Common(d,this.isCompressed));return this.metadata.setFormat("bitsPerSample",S.sampleSize),this.metadata.setFormat("sampleRate",S.sampleRate),this.metadata.setFormat("numberOfChannels",S.numChannels),this.metadata.setFormat("numberOfSamples",S.numSampleFrames),this.metadata.setFormat("duration",S.numSampleFrames/S.sampleRate),this.metadata.setFormat("codec",(f=S.compressionName)!==null&&f!==void 0?f:c[S.compressionType]),d.chunkSize;case"ID3 ":const y=await this.tokenizer.readToken(new r.Uint8ArrayType(d.chunkSize)),E=s.fromBuffer(y);return await new i.ID3v2Parser().parse(this.metadata,E,this.options),d.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*d.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(d);default:return b(`Ignore chunk id=${d.chunkID}, size=${d.chunkSize}`),0}}async readTextChunk(d){return(await this.tokenizer.readToken(new r.StringType(d.chunkSize,"ascii"))).split("\0").map(S=>S.trim()).filter(S=>S&&S.length>0).forEach(S=>{this.metadata.addTag("AIFF",d.chunkID,S.trim())}),d.chunkSize}}return AiffParser.AIFFParser=m,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let r=class Pr{static fromBin(s,i=0){return new Pr(this.decode(s,i))}static decode(s,i=0){return(s.readUInt32LE(i).toString(16)+"-"+s.readUInt16LE(i+4).toString(16)+"-"+s.readUInt16LE(i+6).toString(16)+"-"+s.readUInt16BE(i+8).toString(16)+"-"+s.slice(i+10,i+16).toString("hex")).toUpperCase()}static decodeMediaType(s){switch(s.str){case Pr.AudioMedia.str:return"audio";case Pr.VideoMedia.str:return"video";case Pr.CommandMedia.str:return"command";case Pr.Degradable_JPEG_Media.str:return"degradable-jpeg";case Pr.FileTransferMedia.str:return"file-transfer";case Pr.BinaryMedia.str:return"binary"}}static encode(s){const i=Buffer.alloc(16);return i.writeUInt32LE(parseInt(s.slice(0,8),16),0),i.writeUInt16LE(parseInt(s.slice(9,13),16),4),i.writeUInt16LE(parseInt(s.slice(14,18),16),6),Buffer.from(s.slice(19,23),"hex").copy(i,8),Buffer.from(s.slice(24),"hex").copy(i,10),i}constructor(s){this.str=s}equals(s){return this.str===s.str}toBin(){return Pr.encode(this.str)}};return r.HeaderObject=new r("75B22630-668E-11CF-A6D9-00AA0062CE6C"),r.DataObject=new r("75B22636-668E-11CF-A6D9-00AA0062CE6C"),r.SimpleIndexObject=new r("33000890-E5B1-11CF-89F4-00A0C90349CB"),r.IndexObject=new r("D6E229D3-35DA-11D1-9034-00A0C90349BE"),r.MediaObjectIndexObject=new r("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),r.TimecodeIndexObject=new r("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),r.FilePropertiesObject=new r("8CABDCA1-A947-11CF-8EE4-00C00C205365"),r.StreamPropertiesObject=new r("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),r.HeaderExtensionObject=new r("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),r.CodecListObject=new r("86D15240-311D-11D0-A3A4-00A0C90348F6"),r.ScriptCommandObject=new r("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),r.MarkerObject=new r("F487CD01-A951-11CF-8EE6-00C00C205365"),r.BitrateMutualExclusionObject=new r("D6E229DC-35DA-11D1-9034-00A0C90349BE"),r.ErrorCorrectionObject=new r("75B22635-668E-11CF-A6D9-00AA0062CE6C"),r.ContentDescriptionObject=new r("75B22633-668E-11CF-A6D9-00AA0062CE6C"),r.ExtendedContentDescriptionObject=new r("D2D0A440-E307-11D2-97F0-00A0C95EA850"),r.ContentBrandingObject=new r("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),r.StreamBitratePropertiesObject=new r("7BF875CE-468D-11D1-8D82-006097C9A2B2"),r.ContentEncryptionObject=new r("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),r.ExtendedContentEncryptionObject=new r("298AE614-2622-4C17-B935-DAE07EE9289C"),r.DigitalSignatureObject=new r("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),r.PaddingObject=new r("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),r.ExtendedStreamPropertiesObject=new r("14E6A5CB-C672-4332-8399-A96952065B5A"),r.AdvancedMutualExclusionObject=new r("A08649CF-4775-4670-8A16-6E35357566CD"),r.GroupMutualExclusionObject=new r("D1465A40-5A79-4338-B71B-E36B8FD6C249"),r.StreamPrioritizationObject=new r("D4FED15B-88D3-454F-81F0-ED5C45999E24"),r.BandwidthSharingObject=new r("A69609E6-517B-11D2-B6AF-00C04FD908E9"),r.LanguageListObject=new r("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),r.MetadataObject=new r("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),r.MetadataLibraryObject=new r("44231C94-9498-49D1-A141-1D134E457054"),r.IndexParametersObject=new r("D6E229DF-35DA-11D1-9034-00A0C90349BE"),r.MediaObjectIndexParametersObject=new r("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),r.TimecodeIndexParametersObject=new r("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),r.CompatibilityObject=new r("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),r.AdvancedContentEncryptionObject=new r("43058533-6981-49E6-9B74-AD12CB86D58C"),r.AudioMedia=new r("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),r.VideoMedia=new r("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),r.CommandMedia=new r("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),r.JFIF_Media=new r("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),r.Degradable_JPEG_Media=new r("35907DE0-E415-11CF-A917-00805F5C442B"),r.FileTransferMedia=new r("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),r.BinaryMedia=new r("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),r.ASF_Index_Placeholder_Object=new r("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=r,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const r=requireLib$2(),a=requireUtil$1();let s=class io{static getParserForAttr(u){return io.attributeParsers[u]}static parseUnicodeAttr(u){return a.stripNulls(a.decodeString(u,"utf16le"))}static parseByteArrayAttr(u){return Buffer.from(u)}static parseBoolAttr(u,x=0){return io.parseWordAttr(u,x)===1}static parseDWordAttr(u,x=0){return u.readUInt32LE(x)}static parseQWordAttr(u,x=0){return r.UINT64_LE.get(u,x)}static parseWordAttr(u,x=0){return u.readUInt16LE(x)}};return s.attributeParsers=[s.parseUnicodeAttr,s.parseByteArrayAttr,s.parseBoolAttr,s.parseDWordAttr,s.parseQWordAttr,s.parseWordAttr,s.parseByteArrayAttr],AsfUtil.AsfUtil=s,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WmPictureToken=r.MetadataLibraryObjectState=r.MetadataObjectState=r.ExtendedStreamPropertiesObjectState=r.ExtendedContentDescriptionObjectState=r.ContentDescriptionObjectState=r.readCodecEntries=r.HeaderExtensionObject=r.StreamPropertiesObject=r.FilePropertiesObject=r.IgnoreObjectState=r.State=r.HeaderObjectToken=r.TopLevelHeaderObjectToken=r.DataType=void 0;const a=requireUtil$1(),s=requireLib$2(),i=requireGUID(),u=requireAsfUtil(),x=requireID3v2Token();(function(I){I[I.UnicodeString=0]="UnicodeString",I[I.ByteArray=1]="ByteArray",I[I.Bool=2]="Bool",I[I.DWord=3]="DWord",I[I.QWord=4]="QWord",I[I.Word=5]="Word"})(r.DataType||(r.DataType={})),r.TopLevelHeaderObjectToken={len:30,get:(I,k)=>({objectId:i.default.fromBin(new s.BufferType(16).get(I,k)),objectSize:Number(s.UINT64_LE.get(I,k+16)),numberOfHeaderObjects:s.UINT32_LE.get(I,k+24)})},r.HeaderObjectToken={len:24,get:(I,k)=>({objectId:i.default.fromBin(new s.BufferType(16).get(I,k)),objectSize:Number(s.UINT64_LE.get(I,k+16))})};class h{constructor(k){this.len=Number(k.objectSize)-r.HeaderObjectToken.len}postProcessTag(k,N,Y,z){if(N==="WM/Picture")k.push({id:N,value:A.fromBuffer(z)});else{const W=u.AsfUtil.getParserForAttr(Y);if(!W)throw new Error("unexpected value headerType: "+Y);k.push({id:N,value:W(z)})}}}r.State=h;class p extends h{constructor(k){super(k)}get(k,N){return null}}r.IgnoreObjectState=p;class b extends h{constructor(k){super(k)}get(k,N){return{fileId:i.default.fromBin(k,N),fileSize:s.UINT64_LE.get(k,N+16),creationDate:s.UINT64_LE.get(k,N+24),dataPacketsCount:s.UINT64_LE.get(k,N+32),playDuration:s.UINT64_LE.get(k,N+40),sendDuration:s.UINT64_LE.get(k,N+48),preroll:s.UINT64_LE.get(k,N+56),flags:{broadcast:a.getBit(k,N+64,24),seekable:a.getBit(k,N+64,25)},minimumDataPacketSize:s.UINT32_LE.get(k,N+68),maximumDataPacketSize:s.UINT32_LE.get(k,N+72),maximumBitrate:s.UINT32_LE.get(k,N+76)}}}b.guid=i.default.FilePropertiesObject,r.FilePropertiesObject=b;class c extends h{constructor(k){super(k)}get(k,N){return{streamType:i.default.decodeMediaType(i.default.fromBin(k,N)),errorCorrectionType:i.default.fromBin(k,N+8)}}}c.guid=i.default.StreamPropertiesObject,r.StreamPropertiesObject=c;class m{constructor(){this.len=22}get(k,N){return{reserved1:i.default.fromBin(k,N),reserved2:k.readUInt16LE(N+16),extensionDataSize:k.readUInt32LE(N+18)}}}m.guid=i.default.HeaderExtensionObject,r.HeaderExtensionObject=m;const l={len:20,get:(I,k)=>({entryCount:I.readUInt16LE(k+16)})};async function d(I){const k=await I.readNumber(s.UINT16_LE);return(await I.readToken(new s.StringType(k*2,"utf16le"))).replace("\0","")}async function f(I){const k=await I.readToken(l),N=[];for(let Y=0;Y<k.entryCount;++Y)N.push(await y(I));return N}r.readCodecEntries=f;async function S(I){const k=await I.readNumber(s.UINT16_LE),N=Buffer.alloc(k);return await I.readBuffer(N),N}async function y(I){const k=await I.readNumber(s.UINT16_LE);return{type:{videoCodec:(k&1)===1,audioCodec:(k&2)===2},codecName:await d(I),description:await d(I),information:await S(I)}}class E extends h{constructor(k){super(k)}get(k,N){const Y=[];let z=N+10;for(let W=0;W<E.contentDescTags.length;++W){const G=k.readUInt16LE(N+W*2);if(G>0){const $=E.contentDescTags[W],ge=z+G;Y.push({id:$,value:u.AsfUtil.parseUnicodeAttr(k.slice(z,ge))}),z=ge}}return Y}}E.guid=i.default.ContentDescriptionObject,E.contentDescTags=["Title","Author","Copyright","Description","Rating"],r.ContentDescriptionObjectState=E;class g extends h{constructor(k){super(k)}get(k,N){const Y=[],z=k.readUInt16LE(N);let W=N+2;for(let G=0;G<z;G+=1){const $=k.readUInt16LE(W);W+=2;const ge=u.AsfUtil.parseUnicodeAttr(k.slice(W,W+$));W+=$;const F=k.readUInt16LE(W);W+=2;const le=k.readUInt16LE(W);W+=2;const me=k.slice(W,W+le);W+=le,this.postProcessTag(Y,ge,F,me)}return Y}}g.guid=i.default.ExtendedContentDescriptionObject,r.ExtendedContentDescriptionObjectState=g;class w extends h{constructor(k){super(k)}get(k,N){return{startTime:s.UINT64_LE.get(k,N),endTime:s.UINT64_LE.get(k,N+8),dataBitrate:k.readInt32LE(N+12),bufferSize:k.readInt32LE(N+16),initialBufferFullness:k.readInt32LE(N+20),alternateDataBitrate:k.readInt32LE(N+24),alternateBufferSize:k.readInt32LE(N+28),alternateInitialBufferFullness:k.readInt32LE(N+32),maximumObjectSize:k.readInt32LE(N+36),flags:{reliableFlag:a.getBit(k,N+40,0),seekableFlag:a.getBit(k,N+40,1),resendLiveCleanpointsFlag:a.getBit(k,N+40,2)},streamNumber:k.readInt16LE(N+42),streamLanguageId:k.readInt16LE(N+44),averageTimePerFrame:k.readInt32LE(N+52),streamNameCount:k.readInt32LE(N+54),payloadExtensionSystems:k.readInt32LE(N+56),streamNames:[],streamPropertiesObject:null}}}w.guid=i.default.ExtendedStreamPropertiesObject,r.ExtendedStreamPropertiesObjectState=w;class T extends h{constructor(k){super(k)}get(k,N){const Y=[],z=Buffer.from(k),W=z.readUInt16LE(N);let G=N+2;for(let $=0;$<W;$+=1){G+=4;const ge=z.readUInt16LE(G);G+=2;const F=z.readUInt16LE(G);G+=2;const le=z.readUInt32LE(G);G+=4;const me=u.AsfUtil.parseUnicodeAttr(z.slice(G,G+ge));G+=ge;const H=z.slice(G,G+le);G+=le,this.postProcessTag(Y,me,F,H)}return Y}}T.guid=i.default.MetadataObject,r.MetadataObjectState=T;class _ extends T{constructor(k){super(k)}}_.guid=i.default.MetadataLibraryObject,r.MetadataLibraryObjectState=_;class A{static fromBase64(k){return this.fromBuffer(Buffer.from(k,"base64"))}static fromBuffer(k){return new A(k.length).get(k,0)}constructor(k){this.len=k}get(k,N){const Y=k.readUInt8(N++),z=k.readInt32LE(N);let W=5;for(;k.readUInt16BE(W)!==0;)W+=2;const G=k.slice(5,W).toString("utf16le");for(;k.readUInt16BE(W)!==0;)W+=2;const $=k.slice(5,W).toString("utf16le");return{type:x.AttachedPictureType[Y],format:G,description:$,size:z,data:k.slice(W+4)}}}r.WmPictureToken=A})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const r=requireBrowser$3(),a=requireType(),s=requireGUID(),i=requireAsfObject(),u=requireBasicParser(),x=(0,r.default)("music-metadata:parser:ASF"),h="asf";let p=class extends u.BasicParser{async parse(){const c=await this.tokenizer.readToken(i.TopLevelHeaderObjectToken);if(!c.objectId.equals(s.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+c.objectId.str);try{await this.parseObjectHeader(c.numberOfHeaderObjects)}catch(m){x("Error while parsing ASF: %s",m)}}async parseObjectHeader(c){let m;do{const l=await this.tokenizer.readToken(i.HeaderObjectToken);switch(x("header GUID=%s",l.objectId.str),l.objectId.str){case i.FilePropertiesObject.guid.str:const d=await this.tokenizer.readToken(new i.FilePropertiesObject(l));this.metadata.setFormat("duration",Number(d.playDuration/BigInt(1e3))/1e4-Number(d.preroll)/1e3),this.metadata.setFormat("bitrate",d.maximumBitrate);break;case i.StreamPropertiesObject.guid.str:const f=await this.tokenizer.readToken(new i.StreamPropertiesObject(l));this.metadata.setFormat("container","ASF/"+f.streamType);break;case i.HeaderExtensionObject.guid.str:const S=await this.tokenizer.readToken(new i.HeaderExtensionObject);await this.parseExtensionObject(S.extensionDataSize);break;case i.ContentDescriptionObjectState.guid.str:m=await this.tokenizer.readToken(new i.ContentDescriptionObjectState(l)),this.addTags(m);break;case i.ExtendedContentDescriptionObjectState.guid.str:m=await this.tokenizer.readToken(new i.ExtendedContentDescriptionObjectState(l)),this.addTags(m);break;case s.default.CodecListObject.str:const y=await i.readCodecEntries(this.tokenizer);y.forEach(g=>{this.metadata.addStreamInfo({type:g.type.videoCodec?a.TrackType.video:a.TrackType.audio,codecName:g.codecName})});const E=y.filter(g=>g.type.audioCodec).map(g=>g.codecName).join("/");this.metadata.setFormat("codec",E);break;case s.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(l.objectSize-i.HeaderObjectToken.len);break;case s.default.PaddingObject.str:x("Padding: %s bytes",l.objectSize-i.HeaderObjectToken.len),await this.tokenizer.ignore(l.objectSize-i.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+l.objectId.str),x("Ignore ASF-Object-GUID: %s",l.objectId.str),await this.tokenizer.readToken(new i.IgnoreObjectState(l))}}while(--c)}addTags(c){c.forEach(m=>{this.metadata.addTag(h,m.id,m.value)})}async parseExtensionObject(c){do{const m=await this.tokenizer.readToken(i.HeaderObjectToken),l=m.objectSize-i.HeaderObjectToken.len;switch(m.objectId.str){case i.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new i.ExtendedStreamPropertiesObjectState(m));break;case i.MetadataObjectState.guid.str:const d=await this.tokenizer.readToken(new i.MetadataObjectState(m));this.addTags(d);break;case i.MetadataLibraryObjectState.guid.str:const f=await this.tokenizer.readToken(new i.MetadataLibraryObjectState(m));this.addTags(f);break;case s.default.PaddingObject.str:await this.tokenizer.ignore(l);break;case s.default.CompatibilityObject.str:this.tokenizer.ignore(l);break;case s.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(l);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+m.objectId.str),await this.tokenizer.readToken(new i.IgnoreObjectState(m));break}c-=m.objectSize}while(c>0)}};return AsfParser.AsfParser=p,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const r=requireLib$2(),a=requireID3v2Token();class s{static fromBase64(u){return this.fromBuffer(Buffer.from(u,"base64"))}static fromBuffer(u){return new s(u.length).get(u,0)}constructor(u){this.len=u}get(u,x){const h=a.AttachedPictureType[r.UINT32_BE.get(u,x)],p=r.UINT32_BE.get(u,x+=4),b=u.toString("utf-8",x+=4,x+p),c=r.UINT32_BE.get(u,x+=p),m=u.toString("utf-8",x+=4,x+c),l=r.UINT32_BE.get(u,x+=c),d=r.UINT32_BE.get(u,x+=4),f=r.UINT32_BE.get(u,x+=4),S=r.UINT32_BE.get(u,x+=4),y=r.UINT32_BE.get(u,x+=4),E=Buffer.from(u.slice(x+=4,x+y));return{type:h,format:b,description:m,width:l,height:d,colour_depth:f,indexed_color:S,data:E}}}return Vorbis.VorbisPictureToken=s,Vorbis.CommonHeader={len:7,get:(i,u)=>({packetType:i.readUInt8(u),vorbis:new r.StringType(6,"ascii").get(i,u+1)})},Vorbis.IdentificationHeader={len:23,get:(i,u)=>{const x=new DataView(i.buffer,i.byteOffset);return{version:x.getUint32(u+0,!0),channelMode:x.getUint8(u+4),sampleRate:x.getUint32(u+5,!0),bitrateMax:x.getUint32(u+9,!0),bitrateNominal:x.getUint32(u+13,!0),bitrateMin:x.getUint32(u+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const r=requireCore$2(),a=requireBrowser$3(),s=requireID3v2Token(),i=requireID3v2Parser(),u=requireID3v1Parser(),x=requireBasicParser(),h=(0,a.default)("music-metadata:parser:ID3");let p=class extends x.BasicParser{constructor(){super(...arguments),this.id3parser=new i.ID3v2Parser}static async startsWithID3v2Header(c){return(await c.peekToken(s.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(c){if(c instanceof r.EndOfStreamError)h("End-of-stream");else throw c}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),h("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new u.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(s.ID3v2Header)).fileIdentifier==="ID3")return h("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=p,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const r=requireLib$2();let a=class{constructor(i,u){this.data=i,this.offset=u}readInt32(){const i=r.UINT32_LE.get(this.data,this.offset);return this.offset+=4,i}readStringUtf8(){const i=this.readInt32(),u=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+i);return this.offset+=i,u}parseUserComment(){const i=this.offset,u=this.readStringUtf8(),x=u.indexOf("=");return{key:u.slice(0,x).toUpperCase(),value:u.slice(x+1),len:this.offset-i}}};return VorbisDecoder.VorbisDecoder=a,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireVorbisDecoder(),i=requireVorbis(),u=(0,a.default)("music-metadata:parser:ogg:vorbis1");let x=class{constructor(p,b){this.metadata=p,this.options=b,this.pageSegments=[]}parsePage(p,b){if(p.headerType.firstPage)this.parseFirstPage(p,b);else{if(p.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(b)}if(p.headerType.lastPage||!p.headerType.continued){if(this.pageSegments.length>0){const c=Buffer.concat(this.pageSegments);this.parseFullPage(c)}this.pageSegments=p.headerType.lastPage?[]:[b]}}p.headerType.lastPage&&this.calculateDuration(p)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(p,b){const m=new s.VorbisDecoder(p,b).parseUserComment();return this.addTag(m.key,m.value),m.len}addTag(p,b){if(p==="METADATA_BLOCK_PICTURE"&&typeof b=="string"){if(this.options.skipCovers){u("Ignore picture");return}b=i.VorbisPictureToken.fromBase64(b),u(`Push picture: id=${p}, format=${b.format}`)}else u(`Push tag: id=${p}, value=${b}`);this.metadata.addTag("vorbis",p,b)}calculateDuration(p){this.metadata.format.sampleRate&&p.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",p.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(p,b){this.metadata.setFormat("codec","Vorbis I"),u("Parse first page");const c=i.CommonHeader.get(b,0);if(c.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(c.packetType===1){const m=i.IdentificationHeader.get(b,i.CommonHeader.len);this.metadata.setFormat("sampleRate",m.sampleRate),this.metadata.setFormat("bitrate",m.bitrateNominal),this.metadata.setFormat("numberOfChannels",m.channelMode),u("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",m.sampleRate,m.bitrateNominal,m.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(p){const b=i.CommonHeader.get(p,0);switch(u("Parse full page: type=%s, byteLength=%s",b.packetType,p.byteLength),b.packetType){case 3:return this.parseUserCommentList(p,i.CommonHeader.len)}}parseUserCommentList(p,b){const c=r.UINT32_LE.get(p,b);b+=4,b+=c;let m=r.UINT32_LE.get(p,b);for(b+=4;m-- >0;)b+=this.parseUserComment(p,b)}};return VorbisParser.VorbisParser=x,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireUtil$1(),i=requireVorbis(),u=requireAbstractID3Parser(),x=requireFourCC(),h=requireVorbisParser(),p=requireVorbisDecoder(),b=(0,a.default)("music-metadata:parser:FLAC");var c;(function(d){d[d.STREAMINFO=0]="STREAMINFO",d[d.PADDING=1]="PADDING",d[d.APPLICATION=2]="APPLICATION",d[d.SEEKTABLE=3]="SEEKTABLE",d[d.VORBIS_COMMENT=4]="VORBIS_COMMENT",d[d.CUESHEET=5]="CUESHEET",d[d.PICTURE=6]="PICTURE"})(c||(c={}));let m=class extends u.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(f,S,y){return super.init(f,S,y),this.vorbisParser=new h.VorbisParser(f,y),this}async postId3v2Parse(){if((await this.tokenizer.readToken(x.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let S;do S=await this.tokenizer.readToken(l.BlockHeader),await this.parseDataBlock(S);while(!S.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const y=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*y/this.metadata.format.duration)}}parseDataBlock(f){switch(b(`blockHeader type=${f.type}, length=${f.length}`),f.type){case c.STREAMINFO:return this.parseBlockStreamInfo(f.length);case c.PADDING:this.padding+=f.length;break;case c.APPLICATION:break;case c.SEEKTABLE:break;case c.VORBIS_COMMENT:return this.parseComment(f.length);case c.CUESHEET:break;case c.PICTURE:return this.parsePicture(f.length).then();default:this.metadata.addWarning("Unknown block type: "+f.type)}return this.tokenizer.ignore(f.length).then()}async parseBlockStreamInfo(f){if(f!==l.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const S=await this.tokenizer.readToken(l.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",S.channels),this.metadata.setFormat("bitsPerSample",S.bitsPerSample),this.metadata.setFormat("sampleRate",S.sampleRate),S.totalSamples>0&&this.metadata.setFormat("duration",S.totalSamples/S.sampleRate)}async parseComment(f){const S=await this.tokenizer.readToken(new r.Uint8ArrayType(f)),y=new p.VorbisDecoder(S,0);y.readStringUtf8();const E=y.readInt32();for(let g=0;g<E;g++){const w=y.parseUserComment();this.vorbisParser.addTag(w.key,w.value)}}async parsePicture(f){if(this.options.skipCovers)return this.tokenizer.ignore(f);{const S=await this.tokenizer.readToken(new i.VorbisPictureToken(f));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",S)}}};FlacParser.FlacParser=m;class l{}return l.BlockHeader={len:4,get:(d,f)=>({lastBlock:s.getBit(d,f,7),type:s.getBitAllignedNumber(d,f,1,7),length:r.UINT24_BE.get(d,f+1)})},l.BlockStreamInfo={len:34,get:(d,f)=>({minimumBlockSize:r.UINT16_BE.get(d,f),maximumBlockSize:r.UINT16_BE.get(d,f+2)/1e3,minimumFrameSize:r.UINT24_BE.get(d,f+4),maximumFrameSize:r.UINT24_BE.get(d,f+7),sampleRate:r.UINT24_BE.get(d,f+10)>>4,channels:s.getBitAllignedNumber(d,f+12,4,3)+1,bitsPerSample:s.getBitAllignedNumber(d,f+12,7,5)+1,totalSamples:s.getBitAllignedNumber(d,f+13,4,36),fileMD5:new r.Uint8ArrayType(16).get(d,f+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChapterText=r.StcoAtom=r.StszAtom=r.StscAtom=r.SampleToChunkToken=r.SttsAtom=r.TimeToSampleToken=r.SoundSampleDescriptionV0=r.SoundSampleDescriptionVersion=r.StsdAtom=r.TrackHeaderAtom=r.NameAtom=r.DataAtom=r.MvhdAtom=r.MdhdAtom=r.FixedLengthAtom=r.mhdr=r.tkhd=r.ftyp=r.ExtendedSize=r.Header=void 0;const a=requireLib$2(),s=requireBrowser$3(),i=requireFourCC(),u=(0,s.default)("music-metadata:parser:MP4:atom");r.Header={len:8,get:(I,k)=>{const N=a.UINT32_BE.get(I,k);if(N<0)throw new Error("Invalid atom header length");return{length:BigInt(N),name:new a.StringType(4,"binary").get(I,k+4)}},put:(I,k,N)=>(a.UINT32_BE.put(I,k,Number(N.length)),i.FourCcToken.put(I,k+4,N.name))},r.ExtendedSize=a.UINT64_BE,r.ftyp={len:4,get:(I,k)=>({type:new a.StringType(4,"ascii").get(I,k)})},r.tkhd={len:4,get:(I,k)=>({type:new a.StringType(4,"ascii").get(I,k)})},r.mhdr={len:8,get:(I,k)=>({version:a.UINT8.get(I,k),flags:a.UINT24_BE.get(I,k+1),nextItemID:a.UINT32_BE.get(I,k+4)})};class x{constructor(k,N,Y){if(this.len=k,k<N)throw new Error(`Atom ${Y} expected to be ${N}, but specifies ${k} bytes long.`);k>N&&u(`Warning: atom ${Y} expected to be ${N}, but was actually ${k} bytes long.`)}}r.FixedLengthAtom=x;const h={len:4,get:(I,k)=>{const N=a.UINT32_BE.get(I,k)-2082844800;return new Date(N*1e3)}};class p extends x{constructor(k){super(k,24,"mdhd"),this.len=k}get(k,N){return{version:a.UINT8.get(k,N+0),flags:a.UINT24_BE.get(k,N+1),creationTime:h.get(k,N+4),modificationTime:h.get(k,N+8),timeScale:a.UINT32_BE.get(k,N+12),duration:a.UINT32_BE.get(k,N+16),language:a.UINT16_BE.get(k,N+20),quality:a.UINT16_BE.get(k,N+22)}}}r.MdhdAtom=p;class b extends x{constructor(k){super(k,100,"mvhd"),this.len=k}get(k,N){return{version:a.UINT8.get(k,N),flags:a.UINT24_BE.get(k,N+1),creationTime:h.get(k,N+4),modificationTime:h.get(k,N+8),timeScale:a.UINT32_BE.get(k,N+12),duration:a.UINT32_BE.get(k,N+16),preferredRate:a.UINT32_BE.get(k,N+20),preferredVolume:a.UINT16_BE.get(k,N+24),previewTime:a.UINT32_BE.get(k,N+72),previewDuration:a.UINT32_BE.get(k,N+76),posterTime:a.UINT32_BE.get(k,N+80),selectionTime:a.UINT32_BE.get(k,N+84),selectionDuration:a.UINT32_BE.get(k,N+88),currentTime:a.UINT32_BE.get(k,N+92),nextTrackID:a.UINT32_BE.get(k,N+96)}}}r.MvhdAtom=b;class c{constructor(k){this.len=k}get(k,N){return{type:{set:a.UINT8.get(k,N+0),type:a.UINT24_BE.get(k,N+1)},locale:a.UINT24_BE.get(k,N+4),value:Buffer.from(new a.Uint8ArrayType(this.len-8).get(k,N+8))}}}r.DataAtom=c;class m{constructor(k){this.len=k}get(k,N){return{version:a.UINT8.get(k,N),flags:a.UINT24_BE.get(k,N+1),name:new a.StringType(this.len-4,"utf-8").get(k,N+4)}}}r.NameAtom=m;class l{constructor(k){this.len=k}get(k,N){return{version:a.UINT8.get(k,N),flags:a.UINT24_BE.get(k,N+1),creationTime:h.get(k,N+4),modificationTime:h.get(k,N+8),trackId:a.UINT32_BE.get(k,N+12),duration:a.UINT32_BE.get(k,N+20),layer:a.UINT16_BE.get(k,N+24),alternateGroup:a.UINT16_BE.get(k,N+26),volume:a.UINT16_BE.get(k,N+28)}}}r.TrackHeaderAtom=l;const d={len:8,get:(I,k)=>({version:a.UINT8.get(I,k),flags:a.UINT24_BE.get(I,k+1),numberOfEntries:a.UINT32_BE.get(I,k+4)})};class f{constructor(k){this.len=k}get(k,N){return{dataFormat:i.FourCcToken.get(k,N),dataReferenceIndex:a.UINT16_BE.get(k,N+10),description:new a.Uint8ArrayType(this.len-12).get(k,N+12)}}}class S{constructor(k){this.len=k}get(k,N){const Y=d.get(k,N);N+=d.len;const z=[];for(let W=0;W<Y.numberOfEntries;++W){const G=a.UINT32_BE.get(k,N);N+=a.UINT32_BE.len,z.push(new f(G).get(k,N)),N+=G}return{header:Y,table:z}}}r.StsdAtom=S,r.SoundSampleDescriptionVersion={len:8,get(I,k){return{version:a.INT16_BE.get(I,k),revision:a.INT16_BE.get(I,k+2),vendor:a.INT32_BE.get(I,k+4)}}},r.SoundSampleDescriptionV0={len:12,get(I,k){return{numAudioChannels:a.INT16_BE.get(I,k+0),sampleSize:a.INT16_BE.get(I,k+2),compressionId:a.INT16_BE.get(I,k+4),packetSize:a.INT16_BE.get(I,k+6),sampleRate:a.UINT16_BE.get(I,k+8)+a.UINT16_BE.get(I,k+10)/1e4}}};class y{constructor(k,N){this.len=k,this.token=N}get(k,N){const Y=a.INT32_BE.get(k,N+4);return{version:a.INT8.get(k,N+0),flags:a.INT24_BE.get(k,N+1),numberOfEntries:Y,entries:A(k,this.token,N+8,this.len-8,Y)}}}r.TimeToSampleToken={len:8,get(I,k){return{count:a.INT32_BE.get(I,k+0),duration:a.INT32_BE.get(I,k+4)}}};class E extends y{constructor(k){super(k,r.TimeToSampleToken),this.len=k}}r.SttsAtom=E,r.SampleToChunkToken={len:12,get(I,k){return{firstChunk:a.INT32_BE.get(I,k),samplesPerChunk:a.INT32_BE.get(I,k+4),sampleDescriptionId:a.INT32_BE.get(I,k+8)}}};class g extends y{constructor(k){super(k,r.SampleToChunkToken),this.len=k}}r.StscAtom=g;class w{constructor(k){this.len=k}get(k,N){const Y=a.INT32_BE.get(k,N+8);return{version:a.INT8.get(k,N),flags:a.INT24_BE.get(k,N+1),sampleSize:a.INT32_BE.get(k,N+4),numberOfEntries:Y,entries:A(k,a.INT32_BE,N+12,this.len-12,Y)}}}r.StszAtom=w;class T extends y{constructor(k){super(k,a.INT32_BE),this.len=k}}r.StcoAtom=T;class _{constructor(k){this.len=k}get(k,N){const Y=a.INT16_BE.get(k,N+0);return new a.StringType(Y,"utf-8").get(k,N+2)}}r.ChapterText=_;function A(I,k,N,Y,z){if(u(`remainingLen=${Y}, numberOfEntries=${z} * token-len=${k.len}`),Y===0)return[];if(Y!==z*k.len)throw new Error("mismatch number-of-entries with remaining atom-length");const W=[];for(let G=0;G<z;++G)W.push(k.get(I,N)),N+=k.len;return W}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const r=requireBrowser$3(),a=requireAtomToken(),s=(0,r.default)("music-metadata:parser:MP4:Atom");let i=class ao{static async readAtom(x,h,p,b){const c=x.position,m=await x.readToken(a.Header);m.length===BigInt(1)&&(m.length=await x.readToken(a.ExtendedSize));const d=new ao(m,m.length===BigInt(1),p),f=d.getPayloadLength(b);return s(`parse atom name=${d.atomPath}, extended=${d.extended}, offset=${c}, len=${d.header.length}`),await d.readData(x,h,f),d}constructor(x,h,p){this.header=x,this.extended=h,this.parent=p,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(x){return(this.header.length===BigInt(0)?x:Number(this.header.length))-this.getHeaderLength()}async readAtoms(x,h,p){for(;p>0;){const b=await ao.readAtom(x,h,this,p);this.children.push(b),p-=b.header.length===BigInt(0)?p:Number(b.header.length)}}async readData(x,h,p){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(x,h,this.getPayloadLength(p));case"meta":const c=(await x.peekToken(a.Header)).name==="hdlr"?0:4;return await x.ignore(c),this.readAtoms(x,h,this.getPayloadLength(p)-c);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return h(this,p)}}};return Atom.Atom=i,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const r=requireBrowser$3(),a=requireLib$2(),s=requireBasicParser(),i=requireID3v1Parser(),u=requireType(),x=requireAtom(),h=requireAtomToken(),p=(0,r.default)("music-metadata:parser:MP4"),b="iTunes",c={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function m(d,f,S){return S.indexOf(d)===f}let l=class so extends s.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async f=>{const S=await this.tokenizer.readToken(new h.MvhdAtom(f));this.metadata.setFormat("creationTime",S.creationTime),this.metadata.setFormat("modificationTime",S.modificationTime)},mdhd:async f=>{const S=await this.tokenizer.readToken(new h.MdhdAtom(f)),y=this.getTrackDescription();y.creationTime=S.creationTime,y.modificationTime=S.modificationTime,y.timeScale=S.timeScale,y.duration=S.duration},chap:async f=>{const S=this.getTrackDescription(),y=[];for(;f>=a.UINT32_BE.len;)y.push(await this.tokenizer.readNumber(a.UINT32_BE)),f-=a.UINT32_BE.len;S.chapterList=y},tkhd:async f=>{const S=await this.tokenizer.readToken(new h.TrackHeaderAtom(f));this.tracks.push(S)},mdat:async f=>{if(this.audioLengthInBytes=f,this.calculateBitRate(),this.options.includeChapters){const S=this.tracks.filter(y=>y.chapterList);if(S.length===1){const y=S[0].chapterList,E=this.tracks.filter(g=>y.indexOf(g.trackId)!==-1);if(E.length===1)return this.parseChapterTrack(E[0],S[0],f)}}await this.tokenizer.ignore(f)},ftyp:async f=>{const S=[];for(;f>0;){const E=await this.tokenizer.readToken(h.ftyp);f-=h.ftyp.len;const g=E.type.replace(/\W/g,"");g.length>0&&S.push(g)}p(`ftyp: ${S.join("/")}`);const y=S.filter(m).join("/");this.metadata.setFormat("container",y)},stsd:async f=>{const S=await this.tokenizer.readToken(new h.StsdAtom(f)),y=this.getTrackDescription();y.soundSampleDescription=S.table.map(E=>this.parseSoundSampleDescription(E))},stsc:async f=>{const S=await this.tokenizer.readToken(new h.StscAtom(f));this.getTrackDescription().sampleToChunkTable=S.entries},stts:async f=>{const S=await this.tokenizer.readToken(new h.SttsAtom(f));this.getTrackDescription().timeToSampleTable=S.entries},stsz:async f=>{const S=await this.tokenizer.readToken(new h.StszAtom(f)),y=this.getTrackDescription();y.sampleSize=S.sampleSize,y.sampleSizeTable=S.entries},stco:async f=>{const S=await this.tokenizer.readToken(new h.StcoAtom(f));this.getTrackDescription().chunkOffsetTable=S.entries},date:async f=>{const S=await this.tokenizer.readToken(new a.StringType(f,"utf-8"));this.addTag("date",S)}}}static read_BE_Integer(f,S){const y=(S?"INT":"UINT")+f.length*8+(f.length>1?"_BE":""),E=a[y];if(!E)throw new Error('Token for integer type not found: "'+y+'"');return Number(E.get(f,0))}async parse(){this.tracks=[];let f=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||f>0;){try{if((await this.tokenizer.peekToken(h.Header)).name==="\0\0\0\0"){const w=`Error at offset=${this.tokenizer.position}: box.id=0`;p(w),this.addWarning(w);break}}catch(g){const w=`Error at offset=${this.tokenizer.position}: ${g.message}`;p(w),this.addWarning(w);break}const E=await x.Atom.readAtom(this.tokenizer,(g,w)=>this.handleAtom(g,w),null,f);f-=E.header.length===BigInt(0)?f:Number(E.header.length)}const S=[];this.tracks.forEach(E=>{const g=[];E.soundSampleDescription.forEach(w=>{const T={},_=c[w.dataFormat];if(_?(g.push(_.format),T.codecName=_.format):T.codecName=`<${w.dataFormat}>`,w.description){const{description:A}=w;A.sampleRate>0&&(T.type=u.TrackType.audio,T.audio={samplingFrequency:A.sampleRate,bitDepth:A.sampleSize,channels:A.numAudioChannels})}this.metadata.addStreamInfo(T)}),g.length>=1&&S.push(g.join("/"))}),S.length>0&&this.metadata.setFormat("codec",S.filter(m).join("+"));const y=this.tracks.filter(E=>E.soundSampleDescription.length>=1&&E.soundSampleDescription[0].description&&E.soundSampleDescription[0].description.numAudioChannels>0);if(y.length>=1){const E=y[0];if(E.timeScale>0){const T=E.duration/E.timeScale;this.metadata.setFormat("duration",T)}const g=E.soundSampleDescription[0];if(g.description&&(this.metadata.setFormat("sampleRate",g.description.sampleRate),this.metadata.setFormat("bitsPerSample",g.description.sampleSize),this.metadata.setFormat("numberOfChannels",g.description.numAudioChannels),E.timeScale===0&&E.timeToSampleTable.length>0)){const _=E.timeToSampleTable.map(A=>A.count*A.duration).reduce((A,I)=>A+I)/g.description.sampleRate;this.metadata.setFormat("duration",_)}const w=c[g.dataFormat];w&&this.metadata.setFormat("lossless",!w.lossy),this.calculateBitRate()}}async handleAtom(f,S){if(f.parent)switch(f.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(f)}if(this.atomParsers[f.header.name])return this.atomParsers[f.header.name](S);p(`No parser for atom path=${f.atomPath}, payload-len=${S}, ignoring atom`),await this.tokenizer.ignore(S)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(f,S){this.metadata.addTag(b,f,S)}addWarning(f){p("Warning: "+f),this.metadata.addWarning(f)}parseMetadataItemData(f){let S=f.header.name;return f.readAtoms(this.tokenizer,async(y,E)=>{const g=y.getPayloadLength(E);switch(y.header.name){case"data":return this.parseValueAtom(S,y);case"name":case"mean":case"rate":const w=await this.tokenizer.readToken(new h.NameAtom(g));S+=":"+w.name;break;default:const T=await this.tokenizer.readToken(new a.BufferType(g));this.addWarning("Unsupported meta-item: "+S+"["+y.header.name+"] => value="+T.toString("hex")+" ascii="+T.toString("ascii"))}},f.getPayloadLength(0))}async parseValueAtom(f,S){const y=await this.tokenizer.readToken(new h.DataAtom(Number(S.header.length)-h.Header.len));if(y.type.set!==0)throw new Error("Unsupported type-set != 0: "+y.type.set);switch(y.type.type){case 0:switch(f){case"trkn":case"disk":const E=a.UINT8.get(y.value,3),g=a.UINT8.get(y.value,5);this.addTag(f,E+"/"+g);break;case"gnre":const w=a.UINT8.get(y.value,1),T=i.Genres[w-1];this.addTag(f,T);break;case"rate":const _=y.value.toString("ascii");this.addTag(f,_);break;default:p("unknown proprietary value type for: "+S.atomPath)}break;case 1:case 18:this.addTag(f,y.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(f,{format:"image/jpeg",data:Buffer.from(y.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(f,{format:"image/png",data:Buffer.from(y.value)});break;case 21:this.addTag(f,so.read_BE_Integer(y.value,!0));break;case 22:this.addTag(f,so.read_BE_Integer(y.value,!1));break;case 65:this.addTag(f,y.value.readInt8(0));break;case 66:this.addTag(f,y.value.readInt16BE(0));break;case 67:this.addTag(f,y.value.readInt32BE(0));break;default:this.addWarning(`atom key=${f}, has unknown well-known-type (data-type): ${y.type.type}`)}}parseSoundSampleDescription(f){const S={dataFormat:f.dataFormat,dataReferenceIndex:f.dataReferenceIndex};let y=0;const E=h.SoundSampleDescriptionVersion.get(f.description,y);return y+=h.SoundSampleDescriptionVersion.len,E.version===0||E.version===1?S.description=h.SoundSampleDescriptionV0.get(f.description,y):p(`Warning: sound-sample-description ${E} not implemented`),S}async parseChapterTrack(f,S,y){if(!f.sampleSize&&f.chunkOffsetTable.length!==f.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const E=[];for(let g=0;g<f.chunkOffsetTable.length&&y>0;++g){const T=f.chunkOffsetTable[g]-this.tokenizer.position,_=f.sampleSize>0?f.sampleSize:f.sampleSizeTable[g];if(y-=T+_,y<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(T);const A=await this.tokenizer.readToken(new h.ChapterText(_));p(`Chapter ${g+1}: ${A}`);const I={title:A,sampleOffset:this.findSampleOffset(S,this.tokenizer.position)};p(`Chapter title=${I.title}, offset=${I.sampleOffset}/${this.tracks[0].duration}`),E.push(I)}this.metadata.setFormat("chapters",E),await this.tokenizer.ignore(y)}findSampleOffset(f,S){let y=0;f.timeToSampleTable.forEach(g=>{y+=g.count*g.duration}),p(`Total duration=${y}`);let E=0;for(;E<f.chunkOffsetTable.length&&f.chunkOffsetTable[E]<S;)++E;return this.getChunkDuration(E+1,f)}getChunkDuration(f,S){let y=0,E=S.timeToSampleTable[y].count,g=S.timeToSampleTable[y].duration,w=1,T=this.getSamplesPerChunk(w,S.sampleToChunkTable),_=0;for(;w<f;){const A=Math.min(E,T);_+=A*g,E-=A,T-=A,T===0?(++w,T=this.getSamplesPerChunk(w,S.sampleToChunkTable)):(++y,E=S.timeToSampleTable[y].count,g=S.timeToSampleTable[y].duration)}return _}getSamplesPerChunk(f,S){for(let y=0;y<S.length-1;++y)if(f>=S[y].firstChunk&&f<S[y+1].firstChunk)return S[y].samplesPerChunk;return S[S.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=l,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const r=requireUtil$1();var a;(function(i){i[i.not_set=0]="not_set",i[i.radio=1]="radio",i[i.audiophile=2]="audiophile"})(a||(a={}));var s;return(function(i){i[i.unspecified=0]="unspecified",i[i.engineer=1]="engineer",i[i.user=2]="user",i[i.automatic=3]="automatic",i[i.rms_average=4]="rms_average"})(s||(s={})),ReplayGainDataFormat.ReplayGain={len:2,get:(i,u)=>{const x=r.getBitAllignedNumber(i,u,0,3),h=r.getBitAllignedNumber(i,u,6,1),p=r.getBitAllignedNumber(i,u,7,9)/10;if(x>0)return{type:r.getBitAllignedNumber(i,u,0,3),origin:r.getBitAllignedNumber(i,u,3,3),adjustment:h?-p:p}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const r=requireLib$2(),a=requireUtil$1(),s=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(i,u)=>{const x=r.UINT32_BE.get(i,u+2);return{revision:a.getBitAllignedNumber(i,u,0,4),vbr_method:a.getBitAllignedNumber(i,u,4,4),lowpass_filter:100*r.UINT8.get(i,u+1),track_peak:x===0?void 0:x/Math.pow(2,23),track_gain:s.ReplayGain.get(i,6),album_gain:s.ReplayGain.get(i,8),music_length:r.UINT32_BE.get(i,u+20),music_crc:r.UINT8.get(i,u+24),header_crc:r.UINT16_BE.get(i,u+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.readXingHeader=r.XingHeaderFlags=r.LameEncoderVersion=r.InfoTagHeaderTag=void 0;const a=requireLib$2(),s=requireUtil$1(),i=requireExtendedLameHeader();r.InfoTagHeaderTag=new a.StringType(4,"ascii"),r.LameEncoderVersion=new a.StringType(6,"ascii"),r.XingHeaderFlags={len:4,get:(x,h)=>({frames:s.isBitSet(x,h,31),bytes:s.isBitSet(x,h,30),toc:s.isBitSet(x,h,29),vbrScale:s.isBitSet(x,h,28)})};async function u(x){const h=await x.readToken(r.XingHeaderFlags),p={};if(h.frames&&(p.numFrames=await x.readToken(a.UINT32_BE)),h.bytes&&(p.streamSize=await x.readToken(a.UINT32_BE)),h.toc&&(p.toc=Buffer.alloc(100),await x.readBuffer(p.toc)),h.vbrScale&&(p.vbrScale=await x.readToken(a.UINT32_BE)),await x.peekToken(new a.StringType(4,"ascii"))==="LAME"&&(await x.ignore(4),p.lame={version:await x.readToken(new a.StringType(5,"ascii"))},p.lame.version.match(/\d+.\d+/g))){const l=p.lame.version.match(/\d+.\d+/g)[0].split(".").map(d=>parseInt(d,10));l[0]>=3&&l[1]>=90&&(p.lame.extended=await x.readToken(i.ExtendedLameHeader))}return p}r.readXingHeader=u})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const r=requireLib$2(),a=requireCore$2(),s=requireBrowser$3(),i=requireUtil$1(),u=requireAbstractID3Parser(),x=requireXingTag(),h=(0,s.default)("music-metadata:parser:mpeg"),p=1024,b={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},c=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class m{constructor(y,E){this.versionIndex=i.getBitAllignedNumber(y,E+1,3,2),this.layer=m.LayerDescription[i.getBitAllignedNumber(y,E+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(y,E):this.parseMpegHeader(y,E),this.isProtectedByCRC=!i.isBitSet(y,E+1,7)}calcDuration(y){return y*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return m.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(y,E){this.container="MPEG",this.bitrateIndex=i.getBitAllignedNumber(y,E+2,0,4),this.sampRateFreqIndex=i.getBitAllignedNumber(y,E+2,4,2),this.padding=i.isBitSet(y,E+2,6),this.privateBit=i.isBitSet(y,E+2,7),this.channelModeIndex=i.getBitAllignedNumber(y,E+3,0,2),this.modeExtension=i.getBitAllignedNumber(y,E+3,2,2),this.isCopyrighted=i.isBitSet(y,E+3,4),this.isOriginalMedia=i.isBitSet(y,E+3,5),this.emphasis=i.getBitAllignedNumber(y,E+3,7,2),this.version=m.VersionID[this.versionIndex],this.channelMode=m.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const g=this.calcBitrate();if(!g)throw new Error("Cannot determine bit-rate");if(this.bitrate=g*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(y,E){h("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const g=i.getBitAllignedNumber(y,E+2,0,2);this.codec="AAC",this.codecProfile=b.AudioObjectTypes[g],h(`MPEG-4 audio-codec=${this.codec}`);const w=i.getBitAllignedNumber(y,E+2,2,4);this.samplingRate=b.SamplingFrequencies[w],h(`sampling-rate=${this.samplingRate}`);const T=i.getBitAllignedNumber(y,E+2,7,3);this.mp4ChannelConfig=c[T],h(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=i.getBitAllignedNumber(y,E+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const y=`${Math.floor(this.version)}${this.layer}`;return m.bitrate_index[this.bitrateIndex][y]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:m.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}m.SyncByte1=255,m.SyncByte2=224,m.VersionID=[2.5,null,2,1],m.LayerDescription=[0,3,2,1],m.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],m.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},m.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},m.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const l={len:4,get:(S,y)=>new m(S,y)};function d(S){return"V"+Math.floor((100-S)/10)}let f=class extends u.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(p),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let y=!1;for(;!y;)await this.sync(),y=await this.parseCommonMpegHeader()}catch(y){if(y instanceof a.EndOfStreamError){if(h("End-of-stream"),this.calculateEofDuration){const E=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",E);const g=E/this.metadata.format.sampleRate;h(`Calculate duration at EOF: ${g} sec.`,g),this.metadata.setFormat("duration",g)}}else throw y}}finalize(){const y=this.metadata.format,E=this.metadata.native.hasOwnProperty("ID3v1");if(y.duration&&this.tokenizer.fileInfo.size){const g=this.tokenizer.fileInfo.size-this.mpegOffset-(E?128:0);y.codecProfile&&y.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",g*8/y.duration)}else if(this.tokenizer.fileInfo.size&&y.codecProfile==="CBR"){const g=this.tokenizer.fileInfo.size-this.mpegOffset-(E?128:0),w=Math.round(g/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",w);const T=w/y.sampleRate;h("Calculate CBR duration based on file size: %s",T),this.metadata.setFormat("duration",T)}}async sync(){let y=!1;for(;;){let E=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:p,mayBeLess:!0}),this.syncPeek.len<=163)throw new a.EndOfStreamError;for(;;)if(y&&(this.syncPeek.buf[E]&224)===224){this.buf_frame_header[0]=m.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[E],await this.tokenizer.ignore(E),h(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(h(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(y=!1,E=this.syncPeek.buf.indexOf(m.SyncByte1,E),E===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new a.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++E,y=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let y;try{y=l.get(this.buf_frame_header,0)}catch(E){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+E.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",y.container),this.metadata.setFormat("codec",y.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",y.samplingRate),this.frameCount++,y.version>=2&&y.layer===0?this.parseAdts(y):this.parseAudioFrameHeader(y)}async parseAudioFrameHeader(y){this.metadata.setFormat("numberOfChannels",y.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",y.bitrate),this.frameCount<20*1e4&&h("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,y.layer,y.bitrate,y.samplingRate);const E=y.calcSlotSize();if(E===null)throw new Error("invalid slot_size");const g=y.calcSamplesPerFrame();h(`samples_per_frame=${g}`);const T=g/8*y.bitrate/y.samplingRate+(y.padding?E:0);if(this.frame_size=Math.floor(T),this.audioFrameHeader=y,this.bitrates.push(y.bitrate),this.frameCount===1)return this.offset=l.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=g,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=g,this.calculateEofDuration=!0),this.offset=4,y.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(y){const E=Buffer.alloc(3);await this.tokenizer.readBuffer(E),y.frameLength+=i.getBitAllignedNumber(E,0,0,11),this.totalDataLength+=y.frameLength,this.samplesPerFrame=1024;const g=y.samplingRate/this.samplesPerFrame,T=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*g+.5;if(this.metadata.setFormat("bitrate",T),h(`frame-count=${this.frameCount}, size=${y.frameLength} bytes, bit-rate=${T}`),await this.tokenizer.ignore(y.frameLength>7?y.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",y.codecProfile),y.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",y.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(r.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const y=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new r.Uint8ArrayType(y)),this.offset+=y,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const y=await this.tokenizer.readToken(x.InfoTagHeaderTag);switch(this.offset+=x.InfoTagHeaderTag.len,y){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const g=await this.readXingInfoHeader(),w=d(g.vbrScale);return this.metadata.setFormat("codecProfile",w),null;case"Xtra":break;case"LAME":const T=await this.tokenizer.readToken(x.LameEncoderVersion);if(this.frame_size>=this.offset+x.LameEncoderVersion.len)return this.offset+=x.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+T),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const E=this.frame_size-this.offset;return E<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(E),null}async readXingInfoHeader(){const y=this.tokenizer.position,E=await(0,x.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-y,E.lame&&(this.metadata.setFormat("tool","LAME "+i.stripNulls(E.lame.version)),E.lame.extended&&(this.metadata.setFormat("trackPeakLevel",E.lame.extended.track_peak),E.lame.extended.track_gain&&this.metadata.setFormat("trackGain",E.lame.extended.track_gain.adjustment),E.lame.extended.album_gain&&this.metadata.setFormat("albumGain",E.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",E.lame.extended.music_length/1e3))),E.streamSize){const w=this.audioFrameHeader.calcDuration(E.numFrames);return this.metadata.setFormat("duration",w),h("Get duration from Xing header: %s",this.metadata.format.duration),E}const g=this.frame_size-this.offset;return await this.skipFrameData(g),E}async skipFrameData(y){if(y<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(y),this.countSkipFrameData+=y}areAllSame(y){const E=y[0];return y.every(g=>g===E)}};return MpegParser.MpegParser=f,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireUtil$1(),i=(0,a.default)("music-metadata:parser:musepack:sv8"),u=new r.StringType(2,"binary"),x={len:5,get:(b,c)=>({crc:r.UINT32_LE.get(b,c),streamVersion:r.UINT8.get(b,c+4)})},h={len:2,get:(b,c)=>({sampleFrequency:[44100,48e3,37800,32e3][s.getBitAllignedNumber(b,c,0,3)],maxUsedBands:s.getBitAllignedNumber(b,c,3,5),channelCount:s.getBitAllignedNumber(b,c+1,0,4)+1,msUsed:s.isBitSet(b,c+1,4),audioBlockFrames:s.getBitAllignedNumber(b,c+1,5,3)})};class p{constructor(c){this.tokenizer=c}async readPacketHeader(){const c=await this.tokenizer.readToken(u),m=await this.readVariableSizeField();return{key:c,payloadLength:m.value-2-m.len}}async readStreamHeader(c){const m={};i(`Reading SH at offset=${this.tokenizer.position}`);const l=await this.tokenizer.readToken(x);c-=x.len,Object.assign(m,l),i(`SH.streamVersion = ${l.streamVersion}`);const d=await this.readVariableSizeField();c-=d.len,m.sampleCount=d.value;const f=await this.readVariableSizeField();c-=f.len,m.beginningOfSilence=f.value;const S=await this.tokenizer.readToken(h);return c-=h.len,Object.assign(m,S),await this.tokenizer.ignore(c),m}async readVariableSizeField(c=1,m=0){let l=await this.tokenizer.readNumber(r.UINT8);return(l&128)===0?{len:c,value:m+l}:(l&=127,l+=m,this.readVariableSizeField(c+1,l<<7))}}return StreamVersion8.StreamReader=p,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const r=requireBrowser$3(),a=requireBasicParser(),s=requireAPEv2Parser(),i=requireFourCC(),u=requireStreamVersion8(),x=(0,r.default)("music-metadata:parser:musepack");let h=class extends a.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(i.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const b=new u.StreamReader(this.tokenizer);do{const c=await b.readPacketHeader();switch(x(`packet-header key=${c.key}, payloadLength=${c.payloadLength}`),c.key){case"SH":const m=await b.readStreamHeader(c.payloadLength);this.metadata.setFormat("numberOfSamples",m.sampleCount),this.metadata.setFormat("sampleRate",m.sampleFrequency),this.metadata.setFormat("duration",m.sampleCount/m.sampleFrequency),this.metadata.setFormat("numberOfChannels",m.channelCount);break;case"AP":this.audioLength+=c.payloadLength,await this.tokenizer.ignore(c.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(c.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),s.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${c.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=h,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const r=requireLib$2();let a=class{constructor(i){this.tokenizer=i,this.pos=0,this.dword=void 0}async read(i){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(r.UINT32_LE);let u=this.dword;return this.pos+=i,this.pos<32?(u>>>=32-this.pos,u&(1<<i)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,u&(1<<i)-1):(this.dword=await this.tokenizer.readToken(r.UINT32_LE),this.pos&&(u<<=this.pos,u|=this.dword>>>32-this.pos),u&(1<<i)-1))}async ignore(i){if(this.pos>0){const h=32-this.pos;this.dword=void 0,i-=h,this.pos=0}const u=i%32,x=(i-u)/32;return await this.tokenizer.ignore(x*4),this.read(u)}};return BitReader.BitReader=a,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const r=requireLib$2(),a=requireUtil$1();return StreamVersion7.Header={len:24,get:(s,i)=>{const u={signature:Buffer.from(s).toString("latin1",i,i+3),streamMinorVersion:a.getBitAllignedNumber(s,i+3,0,4),streamMajorVersion:a.getBitAllignedNumber(s,i+3,4,4),frameCount:r.UINT32_LE.get(s,i+4),maxLevel:r.UINT16_LE.get(s,i+8),sampleFrequency:[44100,48e3,37800,32e3][a.getBitAllignedNumber(s,i+10,0,2)],link:a.getBitAllignedNumber(s,i+10,2,2),profile:a.getBitAllignedNumber(s,i+10,4,4),maxBand:a.getBitAllignedNumber(s,i+11,0,6),intensityStereo:a.isBitSet(s,i+11,6),midSideStereo:a.isBitSet(s,i+11,7),titlePeak:r.UINT16_LE.get(s,i+12),titleGain:r.UINT16_LE.get(s,i+14),albumPeak:r.UINT16_LE.get(s,i+16),albumGain:r.UINT16_LE.get(s,i+18),lastFrameLength:r.UINT32_LE.get(s,i+20)>>>20&2047,trueGapless:a.isBitSet(s,i+23,0)};return u.lastFrameLength=u.trueGapless?r.UINT32_LE.get(s,20)>>>20&2047:0,u}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const r=requireBrowser$3(),a=requireBasicParser(),s=requireAPEv2Parser(),i=requireBitReader(),u=requireStreamVersion7(),x=(0,r.default)("music-metadata:parser:musepack");let h=class extends a.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const b=await this.tokenizer.readToken(u.Header);if(b.signature!=="MP+")throw new Error("Unexpected magic number");x(`stream-version=${b.streamMajorVersion}.${b.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",b.sampleFrequency);const c=1152*(b.frameCount-1)+b.lastFrameLength;this.metadata.setFormat("numberOfSamples",c),this.duration=c/b.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new i.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",b.midSideStereo||b.intensityStereo?2:1);const m=await this.bitreader.read(8);return this.metadata.setFormat("codec",(m/100).toFixed(2)),await this.skipAudioData(b.frameCount),x(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),s.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(b){for(;b-- >0;){const m=await this.bitreader.read(20);this.audioLength+=20+m,await this.bitreader.ignore(m)}const c=await this.bitreader.read(11);this.audioLength+=c,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=h,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const r=requireBrowser$3(),a=requireLib$2(),s=requireAbstractID3Parser(),i=requireMpcSv8Parser(),u=requireMpcSv7Parser(),x=(0,r.default)("music-metadata:parser:musepack");class h extends s.AbstractID3Parser{async postId3v2Parse(){const b=await this.tokenizer.peekToken(new a.StringType(3,"binary"));let c;switch(b){case"MP+":{x("Musepack stream-version 7"),c=new u.MpcSv7Parser;break}case"MPC":{x("Musepack stream-version 8"),c=new i.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return c.init(this.metadata,this.tokenizer,this.options),c.parse()}}return musepack.default=h,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const r=requireLib$2();class a{constructor(i){if(this.len=i,i<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(i,u){return{magicSignature:new r.StringType(8,"ascii").get(i,u+0),version:i.readUInt8(u+8),channelCount:i.readUInt8(u+9),preSkip:i.readInt16LE(u+10),inputSampleRate:i.readInt32LE(u+12),outputGain:i.readInt16LE(u+16),channelMapping:i.readUInt8(u+18)}}}return Opus.IdHeader=a,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const r=requireLib$2(),a=requireVorbisParser(),s=requireOpus();let i=class extends a.VorbisParser{constructor(x,h,p){super(x,h),this.tokenizer=p,this.lastPos=-1}parseFirstPage(x,h){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new s.IdHeader(h.length).get(h,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(x){switch(new r.StringType(8,"ascii").get(x,0)){case"OpusTags":this.parseUserCommentList(x,8),this.lastPos=this.tokenizer.position-x.length;break}}calculateDuration(x){if(this.metadata.format.sampleRate&&x.absoluteGranulePosition>=0){const h=x.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",h),this.metadata.setFormat("duration",h/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const p=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*p/this.metadata.format.duration)}}}};return OpusParser.OpusParser=i,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const r=requireLib$2(),a=requireUtil$1();return Speex.Header={len:80,get:(s,i)=>({speex:new r.StringType(8,"ascii").get(s,i+0),version:a.trimRightNull(new r.StringType(20,"ascii").get(s,i+8)),version_id:s.readInt32LE(i+28),header_size:s.readInt32LE(i+32),rate:s.readInt32LE(i+36),mode:s.readInt32LE(i+40),mode_bitstream_version:s.readInt32LE(i+44),nb_channels:s.readInt32LE(i+48),bitrate:s.readInt32LE(i+52),frame_size:s.readInt32LE(i+56),vbr:s.readInt32LE(i+60),frames_per_packet:s.readInt32LE(i+64),extra_headers:s.readInt32LE(i+68),reserved1:s.readInt32LE(i+72),reserved2:s.readInt32LE(i+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const r=requireBrowser$3(),a=requireVorbisParser(),s=requireSpeex(),i=(0,r.default)("music-metadata:parser:ogg:speex");let u=class extends a.VorbisParser{constructor(h,p,b){super(h,p),this.tokenizer=b}parseFirstPage(h,p){i("First Ogg/Speex page");const b=s.Header.get(p,0);this.metadata.setFormat("codec",`Speex ${b.version}`),this.metadata.setFormat("numberOfChannels",b.nb_channels),this.metadata.setFormat("sampleRate",b.rate),b.bitrate!==-1&&this.metadata.setFormat("bitrate",b.bitrate)}};return SpeexParser.SpeexParser=u,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const r=requireLib$2();return Theora.IdentificationHeader={len:42,get:(a,s)=>({id:new r.StringType(7,"ascii").get(a,s),vmaj:a.readUInt8(s+7),vmin:a.readUInt8(s+8),vrev:a.readUInt8(s+9),vmbw:a.readUInt16BE(s+10),vmbh:a.readUInt16BE(s+17),nombr:r.UINT24_BE.get(a,s+37),nqual:a.readUInt8(s+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const r=requireBrowser$3(),a=requireTheora(),s=(0,r.default)("music-metadata:parser:ogg:theora");let i=class{constructor(x,h,p){this.metadata=x,this.tokenizer=p}parsePage(x,h){x.headerType.firstPage&&this.parseFirstPage(x,h)}flush(){s("flush")}calculateDuration(x){s("duration calculation not implemented")}parseFirstPage(x,h){s("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const p=a.IdentificationHeader.get(h,0);this.metadata.setFormat("bitrate",p.nombr)}};return TheoraParser.TheoraParser=i,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const r=requireLib$2(),a=requireCore$2(),s=requireBrowser$3(),i=requireUtil$1(),u=requireFourCC(),x=requireBasicParser(),h=requireVorbisParser(),p=requireOpusParser(),b=requireSpeexParser(),c=requireTheoraParser(),m=(0,s.default)("music-metadata:parser:ogg");class l{static sum(S,y,E){let g=0;for(let w=y;w<y+E;++w)g+=S[w];return g}constructor(S){this.len=S.page_segments}get(S,y){return{totalPageSize:l.sum(S,y,this.len)}}}OggParser.SegmentTable=l;let d=class Du extends x.BasicParser{async parse(){m("pos=%s, parsePage()",this.tokenizer.position);try{let S;do{if(S=await this.tokenizer.readToken(Du.Header),S.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=S,this.pageNumber=S.pageSequenceNo,m("page#=%s, Ogg.id=%s",S.pageSequenceNo,S.capturePattern);const y=await this.tokenizer.readToken(new l(S));m("totalPageSize=%s",y.totalPageSize);const E=await this.tokenizer.readToken(new r.Uint8ArrayType(y.totalPageSize));if(m("firstPage=%s, lastPage=%s, continued=%s",S.headerType.firstPage,S.headerType.lastPage,S.headerType.continued),S.headerType.firstPage){const g=new r.StringType(7,"ascii").get(Buffer.from(E),0);switch(g){case"vorbis":m("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new h.VorbisParser(this.metadata,this.options);break;case"OpusHea":m("Set page consumer to Ogg/Opus"),this.pageConsumer=new p.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":m("Set page consumer to Ogg/Speex"),this.pageConsumer=new b.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":m("Set page consumer to Ogg/Theora"),this.pageConsumer=new c.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+g+")")}}this.pageConsumer.parsePage(S,E)}while(!S.headerType.lastPage)}catch(S){if(S instanceof a.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),m("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(S.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw S}}};return d.Header={len:27,get:(f,S)=>({capturePattern:u.FourCcToken.get(f,S),version:r.UINT8.get(f,S+4),headerType:{continued:i.getBit(f,S+5,0),firstPage:i.getBit(f,S+5,1),lastPage:i.getBit(f,S+5,2)},absoluteGranulePosition:Number(r.UINT64_LE.get(f,S+6)),streamSerialNumber:r.UINT32_LE.get(f,S+14),pageSequenceNo:r.UINT32_LE.get(f,S+18),pageChecksum:r.UINT32_LE.get(f,S+22),page_segments:r.UINT8.get(f,S+26)})},OggParser.OggParser=d,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const r=requireLib$2();RiffChunk.Header={len:8,get:(s,i)=>({chunkID:s.toString("binary",i,i+4),chunkSize:r.UINT32_LE.get(s,4)})};class a{constructor(i){this.tagHeader=i,this.len=i.chunkSize,this.len+=this.len&1}get(i,u){return new r.StringType(this.tagHeader.chunkSize,"ascii").get(i,u)}}return RiffChunk.ListInfoTagValue=a,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FactChunk=r.Format=r.WaveFormat=void 0,(function(i){i[i.PCM=1]="PCM",i[i.ADPCM=2]="ADPCM",i[i.IEEE_FLOAT=3]="IEEE_FLOAT",i[i.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",i[i.MPEG_LOAS=5634]="MPEG_LOAS",i[i.RAW_AAC1=255]="RAW_AAC1",i[i.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",i[i.DVM=8192]="DVM",i[i.RAW_SPORT=576]="RAW_SPORT",i[i.ESST_AC3=577]="ESST_AC3",i[i.DRM=9]="DRM",i[i.DTS2=8193]="DTS2",i[i.MPEG=80]="MPEG"})(r.WaveFormat||(r.WaveFormat={}));class a{constructor(u){if(u.chunkSize<16)throw new Error("Invalid chunk size");this.len=u.chunkSize}get(u,x){return{wFormatTag:u.readUInt16LE(x),nChannels:u.readUInt16LE(x+2),nSamplesPerSec:u.readUInt32LE(x+4),nAvgBytesPerSec:u.readUInt32LE(x+8),nBlockAlign:u.readUInt16LE(x+12),wBitsPerSample:u.readUInt16LE(x+14)}}}r.Format=a;class s{constructor(u){if(u.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=u.chunkSize}get(u,x){return{dwSampleLength:u.readUInt32LE(x)}}}r.FactChunk=s})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const r=requireLib$2(),a=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(s,i)=>({description:(0,a.stripNulls)(new r.StringType(256,"ascii").get(s,i)).trim(),originator:(0,a.stripNulls)(new r.StringType(32,"ascii").get(s,i+256)).trim(),originatorReference:(0,a.stripNulls)(new r.StringType(32,"ascii").get(s,i+288)).trim(),originationDate:(0,a.stripNulls)(new r.StringType(10,"ascii").get(s,i+320)).trim(),originationTime:(0,a.stripNulls)(new r.StringType(8,"ascii").get(s,i+330)).trim(),timeReferenceLow:r.UINT32_LE.get(s,i+338),timeReferenceHigh:r.UINT32_LE.get(s,i+342),version:r.UINT16_LE.get(s,i+346),umid:new r.Uint8ArrayType(64).get(s,i+348),loudnessValue:r.UINT16_LE.get(s,i+412),maxTruePeakLevel:r.UINT16_LE.get(s,i+414),maxMomentaryLoudness:r.UINT16_LE.get(s,i+416),maxShortTermLoudness:r.UINT16_LE.get(s,i+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const r=requireCore$2(),a=requireLib$2(),s=requireBrowser$3(),i=requireRiffChunk(),u=requireWaveChunk(),x=requireID3v2Parser(),h=requireUtil$1(),p=requireFourCC(),b=requireBasicParser(),c=requireBwfChunk(),m=(0,s.default)("music-metadata:parser:RIFF");let l=class extends b.BasicParser{async parse(){const f=await this.tokenizer.readToken(i.Header);if(m(`pos=${this.tokenizer.position}, parse: chunkID=${f.chunkID}`),f.chunkID==="RIFF")return this.parseRiffChunk(f.chunkSize).catch(S=>{if(!(S instanceof r.EndOfStreamError))throw S})}async parseRiffChunk(f){const S=await this.tokenizer.readToken(p.FourCcToken);switch(this.metadata.setFormat("container",S),S){case"WAVE":return this.readWaveChunk(f-p.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${S}`)}}async readWaveChunk(f){for(;f>=i.Header.len;){const S=await this.tokenizer.readToken(i.Header);switch(f-=i.Header.len+S.chunkSize,S.chunkSize>f&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=S,m(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${S.chunkID}`),S.chunkID){case"LIST":await this.parseListTag(S);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new u.FactChunk(S));break;case"fmt ":const y=await this.tokenizer.readToken(new u.Format(S));let E=u.WaveFormat[y.wFormatTag];E||(m("WAVE/non-PCM format="+y.wFormatTag),E="non-PCM ("+y.wFormatTag+")"),this.metadata.setFormat("codec",E),this.metadata.setFormat("bitsPerSample",y.wBitsPerSample),this.metadata.setFormat("sampleRate",y.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",y.nChannels),this.metadata.setFormat("bitrate",y.nBlockAlign*y.nSamplesPerSec*8),this.blockAlign=y.nBlockAlign;break;case"id3 ":case"ID3 ":const g=await this.tokenizer.readToken(new a.Uint8ArrayType(S.chunkSize)),w=r.fromBuffer(g);await new x.ID3v2Parser().parse(this.metadata,w,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let T=S.chunkSize;if(this.tokenizer.fileInfo.size){const k=this.tokenizer.fileInfo.size-this.tokenizer.position;k<T&&(this.metadata.addWarning("data chunk length exceeding file length"),T=k)}const _=this.fact?this.fact.dwSampleLength:T===4294967295?void 0:T/this.blockAlign;_&&(this.metadata.setFormat("numberOfSamples",_),this.metadata.setFormat("duration",_/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(S.chunkSize);break;case"bext":const A=await this.tokenizer.readToken(c.BroadcastAudioExtensionChunk);Object.keys(A).forEach(k=>{this.metadata.addTag("exif","bext."+k,A[k])});const I=S.chunkSize-c.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(I);break;case"\0\0\0\0":m(`Ignore padding chunk: RIFF/${S.chunkID} of ${S.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+S.chunkID),await this.tokenizer.ignore(S.chunkSize);break;default:m(`Ignore chunk: RIFF/${S.chunkID} of ${S.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+S.chunkID),await this.tokenizer.ignore(S.chunkSize)}this.header.chunkSize%2===1&&(m("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(f){const S=await this.tokenizer.readToken(new a.StringType(4,"binary"));switch(m("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,S),S){case"INFO":return this.parseRiffInfoTags(f.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+S),m("Ignoring chunkID=RIFF/WAVE/LIST/"+S),this.tokenizer.ignore(f.chunkSize-4).then()}}async parseRiffInfoTags(f){for(;f>=8;){const S=await this.tokenizer.readToken(i.Header),y=new i.ListInfoTagValue(S),E=await this.tokenizer.readToken(y);this.addTag(S.chunkID,h.stripNulls(E)),f-=8+y.len}if(f!==0)throw Error("Illegal remaining size: "+f)}addTag(f,S){this.metadata.addTag("exif",f,S)}};return WaveParser.WaveParser=l,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const r=requireLib$2(),a=requireFourCC(),s=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class i{static isBitSet(x,h){return i.getBitAllignedNumber(x,h,1)===1}static getBitAllignedNumber(x,h,p){return x>>>h&4294967295>>>32-p}}return i.BlockHeaderToken={len:32,get:(u,x)=>{const h=r.UINT32_LE.get(u,x+24),p={BlockID:a.FourCcToken.get(u,x),blockSize:r.UINT32_LE.get(u,x+4),version:r.UINT16_LE.get(u,x+8),totalSamples:r.UINT32_LE.get(u,x+12),blockIndex:r.UINT32_LE.get(u,x+16),blockSamples:r.UINT32_LE.get(u,x+20),flags:{bitsPerSample:(1+i.getBitAllignedNumber(h,0,2))*8,isMono:i.isBitSet(h,2),isHybrid:i.isBitSet(h,3),isJointStereo:i.isBitSet(h,4),crossChannel:i.isBitSet(h,5),hybridNoiseShaping:i.isBitSet(h,6),floatingPoint:i.isBitSet(h,7),samplingRate:s[i.getBitAllignedNumber(h,23,4)],isDSD:i.isBitSet(h,31)},crc:new r.Uint8ArrayType(4).get(u,x+28)};return p.flags.isDSD&&(p.totalSamples*=8),p}},i.MetadataIdToken={len:1,get:(u,x)=>({functionId:i.getBitAllignedNumber(u[x],0,6),isOptional:i.isBitSet(u[x],5),isOddSize:i.isBitSet(u[x],6),largeBlock:i.isBitSet(u[x],7)})},WavPackToken.WavPack=i,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const r=requireLib$2(),a=requireAPEv2Parser(),s=requireFourCC(),i=requireBasicParser(),u=requireWavPackToken(),h=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let p=class extends i.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),a.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(s.FourCcToken)!=="wvpk")break;const m=await this.tokenizer.readToken(u.WavPack.BlockHeaderToken);if(m.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");h(`WavPack header blockIndex=${m.blockIndex}, len=${u.WavPack.BlockHeaderToken.len}`),m.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!m.flags.isHybrid),this.metadata.setFormat("bitsPerSample",m.flags.bitsPerSample),m.flags.isDSD||(this.metadata.setFormat("sampleRate",m.flags.samplingRate),this.metadata.setFormat("duration",m.totalSamples/m.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",m.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",m.totalSamples),this.metadata.setFormat("codec",m.flags.isDSD?"DSD":"PCM"));const l=m.blockSize-(u.WavPack.BlockHeaderToken.len-8);await(m.blockIndex===0?this.parseMetadataSubBlock(m,l):this.tokenizer.ignore(l)),m.blockSamples>0&&(this.audioDataSize+=m.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=u.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(c,m){for(;m>u.WavPack.MetadataIdToken.len;){const l=await this.tokenizer.readToken(u.WavPack.MetadataIdToken),d=await this.tokenizer.readNumber(l.largeBlock?r.UINT24_LE:r.UINT8),f=Buffer.alloc(d*2-(l.isOddSize?1:0));switch(await this.tokenizer.readBuffer(f),h(`Metadata Sub-Blocks functionId=0x${l.functionId.toString(16)}, id.largeBlock=${l.largeBlock},data-size=${f.length}`),l.functionId){case 0:break;case 14:h("ID_DSD_BLOCK");const S=1<<f.readUInt8(0),y=c.flags.samplingRate*S*8;if(!c.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",y),this.metadata.setFormat("duration",c.totalSamples/y);break;case 36:h("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",f);break;case 47:h(`ID_BLOCK_CHECKSUM: checksum=${f.toString("hex")}`);break;default:h(`Ignore unsupported meta-sub-block-id functionId=0x${l.functionId.toString(16)}`);break}m-=u.WavPack.MetadataIdToken.len+(l.largeBlock?r.UINT24_LE.len:r.UINT8.len)+d*2,h(`remainingLength=${m}`),l.isOddSize&&this.tokenizer.ignore(1)}if(m!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=p,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FormatChunk=r.ChannelType=r.DsdChunk=r.ChunkHeader=void 0;const a=requireLib$2(),s=requireFourCC();r.ChunkHeader={len:12,get:(i,u)=>({id:s.FourCcToken.get(i,u),size:a.UINT64_LE.get(i,u+4)})},r.DsdChunk={len:16,get:(i,u)=>({fileSize:a.INT64_LE.get(i,u),metadataPointer:a.INT64_LE.get(i,u+8)})},(function(i){i[i.mono=1]="mono",i[i.stereo=2]="stereo",i[i.channels=3]="channels",i[i.quad=4]="quad",i[i["4 channels"]=5]="4 channels",i[i["5 channels"]=6]="5 channels",i[i["5.1 channels"]=7]="5.1 channels"})(r.ChannelType||(r.ChannelType={})),r.FormatChunk={len:40,get:(i,u)=>({formatVersion:a.INT32_LE.get(i,u),formatID:a.INT32_LE.get(i,u+4),channelType:a.INT32_LE.get(i,u+8),channelNum:a.INT32_LE.get(i,u+12),samplingFrequency:a.INT32_LE.get(i,u+16),bitsPerSample:a.INT32_LE.get(i,u+20),sampleCount:a.INT64_LE.get(i,u+24),blockSizePerChannel:a.INT32_LE.get(i,u+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const r=requireBrowser$3(),a=requireAbstractID3Parser(),s=requireDsfChunk(),i=requireID3v2Parser(),u=(0,r.default)("music-metadata:parser:DSF");let x=class extends a.AbstractID3Parser{async postId3v2Parse(){const p=this.tokenizer.position,b=await this.tokenizer.readToken(s.ChunkHeader);if(b.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const c=await this.tokenizer.readToken(s.DsdChunk);if(c.metadataPointer===BigInt(0))u("No ID3v2 tag present");else return u(`expect ID3v2 at offset=${c.metadataPointer}`),await this.parseChunks(c.fileSize-b.size),await this.tokenizer.ignore(Number(c.metadataPointer)-this.tokenizer.position-p),new i.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(p){for(;p>=s.ChunkHeader.len;){const b=await this.tokenizer.readToken(s.ChunkHeader);switch(u(`Parsing chunk name=${b.id} size=${b.size}`),b.id){case"fmt ":const c=await this.tokenizer.readToken(s.FormatChunk);this.metadata.setFormat("numberOfChannels",c.channelNum),this.metadata.setFormat("sampleRate",c.samplingFrequency),this.metadata.setFormat("bitsPerSample",c.bitsPerSample),this.metadata.setFormat("numberOfSamples",c.sampleCount),this.metadata.setFormat("duration",Number(c.sampleCount)/c.samplingFrequency);const m=c.bitsPerSample*c.samplingFrequency*c.channelNum;this.metadata.setFormat("bitrate",m);return;default:this.tokenizer.ignore(Number(b.size)-s.ChunkHeader.len);break}p-=b.size}}};return DsfParser.DsfParser=x,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const r=requireLib$2(),a=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(s,i)=>({chunkID:a.FourCcToken.get(s,i),chunkSize:r.INT64_BE.get(s,i+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireCore$2(),i=requireFourCC(),u=requireBasicParser(),x=requireID3v2Parser(),h=requireDsdiffToken(),p=(0,a.default)("music-metadata:parser:aiff");let b=class extends u.BasicParser{async parse(){const m=await this.tokenizer.readToken(h.ChunkHeader64);if(m.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const l=(await this.tokenizer.readToken(i.FourCcToken)).trim();switch(l){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${l}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(m.chunkSize-BigInt(i.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${l}`)}}async readFmt8Chunks(m){for(;m>=h.ChunkHeader64.len;){const l=await this.tokenizer.readToken(h.ChunkHeader64);p(`Chunk id=${l.chunkID}`),await this.readData(l),m-=BigInt(h.ChunkHeader64.len)+l.chunkSize}}async readData(m){p(`Reading data of chunk[ID=${m.chunkID}, size=${m.chunkSize}]`);const l=this.tokenizer.position;switch(m.chunkID.trim()){case"FVER":const f=await this.tokenizer.readToken(r.UINT32_LE);p(`DSDIFF version=${f}`);break;case"PROP":if(await this.tokenizer.readToken(i.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(m.chunkSize-BigInt(i.FourCcToken.len));break;case"ID3":const y=await this.tokenizer.readToken(new r.Uint8ArrayType(Number(m.chunkSize))),E=s.fromBuffer(y);await new x.ID3v2Parser().parse(this.metadata,E,this.options);break;default:p(`Ignore chunk[ID=${m.chunkID}, size=${m.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(m.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const d=m.chunkSize-BigInt(this.tokenizer.position-l);d>0&&(p(`After Parsing chunk, remaining ${d} bytes`),await this.tokenizer.ignore(Number(d)))}async handleSoundPropertyChunks(m){for(p(`Parsing sound-property-chunks, remainingSize=${m}`);m>0;){const l=await this.tokenizer.readToken(h.ChunkHeader64);p(`Sound-property-chunk[ID=${l.chunkID}, size=${l.chunkSize}]`);const d=this.tokenizer.position;switch(l.chunkID.trim()){case"FS":const S=await this.tokenizer.readToken(r.UINT32_BE);this.metadata.setFormat("sampleRate",S);break;case"CHNL":const y=await this.tokenizer.readToken(r.UINT16_BE);this.metadata.setFormat("numberOfChannels",y),await this.handleChannelChunks(l.chunkSize-BigInt(r.UINT16_BE.len));break;case"CMPR":const E=(await this.tokenizer.readToken(i.FourCcToken)).trim(),g=await this.tokenizer.readToken(r.UINT8),w=await this.tokenizer.readToken(new r.StringType(g,"ascii"));E==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${E} (${w})`);break;case"ABSS":const T=await this.tokenizer.readToken(r.UINT16_BE),_=await this.tokenizer.readToken(r.UINT8),A=await this.tokenizer.readToken(r.UINT8),I=await this.tokenizer.readToken(r.UINT32_BE);p(`ABSS ${T}:${_}:${A}.${I}`);break;case"LSCO":const k=await this.tokenizer.readToken(r.UINT16_BE);p(`LSCO lsConfig=${k}`);break;case"COMT":default:p(`Unknown sound-property-chunk[ID=${l.chunkID}, size=${l.chunkSize}]`),await this.tokenizer.ignore(Number(l.chunkSize))}const f=l.chunkSize-BigInt(this.tokenizer.position-d);f>0&&(p(`After Parsing sound-property-chunk ${l.chunkSize}, remaining ${f} bytes`),await this.tokenizer.ignore(Number(f))),m-=BigInt(h.ChunkHeader64.len)+l.chunkSize,p(`Parsing sound-property-chunks, remainingSize=${m}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const l=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",l)}}async handleChannelChunks(m){p(`Parsing channel-chunks, remainingSize=${m}`);const l=[];for(;m>=i.FourCcToken.len;){const d=await this.tokenizer.readToken(i.FourCcToken);p(`Channel[ID=${d}]`),l.push(d),m-=BigInt(i.FourCcToken.len)}return p(`Channels: ${l.join(", ")}`),l}};return DsdiffParser.DsdiffParser=b,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const r=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:r.DataType.uint},17143:{name:"ebmlReadVersion",value:r.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:r.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:r.DataType.uint},17026:{name:"docType",value:r.DataType.string},17031:{name:"docTypeVersion",value:r.DataType.uint},17029:{name:"docTypeReadVersion",value:r.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:r.DataType.binary},21420:{name:"seekPosition",value:r.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:r.DataType.uid},29572:{name:"filename",value:r.DataType.string},3979555:{name:"prevUID",value:r.DataType.uid},3965867:{name:"prevFilename",value:r.DataType.string},4110627:{name:"nextUID",value:r.DataType.uid},4096955:{name:"nextFilename",value:r.DataType.string},2807729:{name:"timecodeScale",value:r.DataType.uint},17545:{name:"duration",value:r.DataType.float},17505:{name:"dateUTC",value:r.DataType.uint},31657:{name:"title",value:r.DataType.string},19840:{name:"muxingApp",value:r.DataType.string},22337:{name:"writingApp",value:r.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:r.DataType.uid},163:{name:"unknown",value:r.DataType.binary},167:{name:"position",value:r.DataType.uid},171:{name:"prevSize",value:r.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:r.DataType.uint},29637:{name:"uid",value:r.DataType.uid},131:{name:"trackType",value:r.DataType.uint},185:{name:"flagEnabled",value:r.DataType.bool},136:{name:"flagDefault",value:r.DataType.bool},21930:{name:"flagForced",value:r.DataType.bool},156:{name:"flagLacing",value:r.DataType.bool},28135:{name:"minCache",value:r.DataType.uint},28136:{name:"maxCache",value:r.DataType.uint},2352003:{name:"defaultDuration",value:r.DataType.uint},2306383:{name:"timecodeScale",value:r.DataType.float},21358:{name:"name",value:r.DataType.string},2274716:{name:"language",value:r.DataType.string},134:{name:"codecID",value:r.DataType.string},25506:{name:"codecPrivate",value:r.DataType.binary},2459272:{name:"codecName",value:r.DataType.string},3839639:{name:"codecSettings",value:r.DataType.string},3883072:{name:"codecInfoUrl",value:r.DataType.string},2536e3:{name:"codecDownloadUrl",value:r.DataType.string},170:{name:"codecDecodeAll",value:r.DataType.bool},28587:{name:"trackOverlay",value:r.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:r.DataType.bool},21432:{name:"stereoMode",value:r.DataType.uint},176:{name:"pixelWidth",value:r.DataType.uint},186:{name:"pixelHeight",value:r.DataType.uint},21680:{name:"displayWidth",value:r.DataType.uint},21690:{name:"displayHeight",value:r.DataType.uint},21683:{name:"aspectRatioType",value:r.DataType.uint},3061028:{name:"colourSpace",value:r.DataType.uint},3126563:{name:"gammaValue",value:r.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:r.DataType.float},30901:{name:"outputSamplingFrequency",value:r.DataType.float},159:{name:"channels",value:r.DataType.uint},148:{name:"channels",value:r.DataType.uint},32123:{name:"channelPositions",value:r.DataType.binary},25188:{name:"bitDepth",value:r.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:r.DataType.uint},20530:{name:"scope",value:r.DataType.bool},20531:{name:"type",value:r.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:r.DataType.uint},16981:{name:"contentCompSettings",value:r.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:r.DataType.uint},18402:{name:"contentEncKeyID",value:r.DataType.binary},18403:{name:"contentSignature ",value:r.DataType.binary},18404:{name:"ContentSigKeyID  ",value:r.DataType.binary},18405:{name:"contentSigAlgo ",value:r.DataType.uint},18406:{name:"contentSigHashAlgo ",value:r.DataType.uint}}},25188:{name:"bitDepth",value:r.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:r.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:r.DataType.uint},241:{name:"clusterPosition",value:r.DataType.uint},21368:{name:"blockNumber",value:r.DataType.uint},234:{name:"codecState",value:r.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:r.DataType.uint},151:{name:"cluster",value:r.DataType.uint},21343:{name:"number",value:r.DataType.uint},235:{name:"codecState",value:r.DataType.uint}}},240:{name:"relativePosition",value:r.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:r.DataType.string},18030:{name:"name",value:r.DataType.string},18016:{name:"mimeType",value:r.DataType.string},18012:{name:"data",value:r.DataType.binary},18094:{name:"uid",value:r.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:r.DataType.uid},145:{name:"timeStart",value:r.DataType.uint},146:{name:"timeEnd",value:r.DataType.uid},152:{name:"hidden",value:r.DataType.bool},17816:{name:"enabled",value:r.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:r.DataType.uid},128:{name:"display",container:{133:{name:"string",value:r.DataType.string},17276:{name:"language ",value:r.DataType.string},17278:{name:"country ",value:r.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:r.DataType.uid},25540:{name:"tagChapterUID",value:r.DataType.uint},25542:{name:"tagAttachmentUID",value:r.DataType.uid},25546:{name:"targetType",value:r.DataType.string},26826:{name:"targetTypeValue",value:r.DataType.uint},25545:{name:"tagEditionUID",value:r.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:r.DataType.string},17543:{name:"string",value:r.DataType.string},17541:{name:"binary",value:r.DataType.binary},17530:{name:"language",value:r.DataType.string},17531:{name:"languageIETF",value:r.DataType.string},17540:{name:"default",value:r.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const r=requireLib$2(),a=requireBrowser$3(),s=requireBasicParser(),i=requireTypes(),u=requireMatroskaDtd(),x=(0,a.default)("music-metadata:parser:matroska");let h=class extends s.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(i.DataType.uint,b=>this.readUint(b)),this.parserMap.set(i.DataType.string,b=>this.readString(b)),this.parserMap.set(i.DataType.binary,b=>this.readBuffer(b)),this.parserMap.set(i.DataType.uid,async b=>await this.readUint(b)===1),this.parserMap.set(i.DataType.bool,b=>this.readFlag(b)),this.parserMap.set(i.DataType.float,b=>this.readFloat(b))}init(b,c,m){return super.init(b,c,m),this}async parse(){const b=await this.parseContainer(u.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${b.ebml.docType}`),b.segment){const c=b.segment.info;if(c){const l=c.timecodeScale?c.timecodeScale:1e6;if(typeof c.duration=="number"){const d=c.duration*l/1e9;this.addTag("segment:title",c.title),this.metadata.setFormat("duration",d)}}const m=b.segment.tracks;if(m&&m.entries){m.entries.forEach(d=>{const f={codecName:d.codecID.replace("A_","").replace("V_",""),codecSettings:d.codecSettings,flagDefault:d.flagDefault,flagLacing:d.flagLacing,flagEnabled:d.flagEnabled,language:d.language,name:d.name,type:d.trackType,audio:d.audio,video:d.video};this.metadata.addStreamInfo(f)});const l=m.entries.filter(d=>d.trackType===i.TrackType.audio.valueOf()).reduce((d,f)=>!d||!d.flagDefault&&f.flagDefault||f.trackNumber&&f.trackNumber<d.trackNumber?f:d,null);l&&(this.metadata.setFormat("codec",l.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",l.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",l.audio.channels)),b.segment.tags&&b.segment.tags.tag.forEach(d=>{const f=d.target,S=f?.targetTypeValue?i.TargetType[f.targetTypeValue]:f?.targetType?f.targetType:"track";d.simpleTags.forEach(y=>{const E=y.string?y.string:y.binary;this.addTag(`${S}:${y.name}`,E)})}),b.segment.attachments&&b.segment.attachments.attachedFiles.filter(d=>d.mimeType.startsWith("image/")).map(d=>({data:d.data,format:d.mimeType,description:d.description,name:d.name})).forEach(d=>{this.addTag("picture",d)})}}}async parseContainer(b,c,m){const l={};for(;this.tokenizer.position<c;){let d;try{d=await this.readElement()}catch(S){if(S.message==="End-Of-Stream")break;throw S}const f=b[d.id];if(f)if(x(`Element: name=${f.name}, container=${!!f.container}`),f.container){const S=await this.parseContainer(f.container,d.len>=0?this.tokenizer.position+d.len:-1,m.concat([f.name]));f.multiple?(l[f.name]||(l[f.name]=[]),l[f.name].push(S)):l[f.name]=S}else l[f.name]=await this.parserMap.get(f.value)(d);else switch(d.id){case 236:this.padding+=d.len,await this.tokenizer.ignore(d.len);break;default:x(`parseEbml: path=${m.join("/")}, unknown element: id=${d.id.toString(16)}`),this.padding+=d.len,await this.tokenizer.ignore(d.len)}}return l}async readVintData(b){const c=await this.tokenizer.peekNumber(r.UINT8);let m=128,l=1;for(;(c&m)===0;){if(l>b)throw new Error("VINT value exceeding maximum size");++l,m>>=1}const d=Buffer.alloc(l);return await this.tokenizer.readBuffer(d),d}async readElement(){const b=await this.readVintData(this.ebmlMaxIDLength),c=await this.readVintData(this.ebmlMaxSizeLength);c[0]^=128>>c.length-1;const m=Math.min(6,c.length);return{id:b.readUIntBE(0,b.length),len:c.readUIntBE(c.length-m,m)}}isMaxValue(b){if(b.length===this.ebmlMaxSizeLength){for(let c=1;c<this.ebmlMaxSizeLength;++c)if(b[c]!==255)return!1;return!0}return!1}async readFloat(b){switch(b.len){case 0:return 0;case 4:return this.tokenizer.readNumber(r.Float32_BE);case 8:return this.tokenizer.readNumber(r.Float64_BE);case 10:return this.tokenizer.readNumber(r.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${b.len}`)}}async readFlag(b){return await this.readUint(b)===1}async readUint(b){const c=await this.readBuffer(b),m=Math.min(6,b.len);return c.readUIntBE(b.len-m,m)}async readString(b){return(await this.tokenizer.readToken(new r.StringType(b.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(b){const c=Buffer.alloc(b.len);return await this.tokenizer.readBuffer(c),c}addTag(b,c){this.metadata.addTag("matroska",b,c)}};return MatroskaParser.MatroskaParser=h,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const r=requireCore$1(),a=requireContentType(),s=requireMediaTyper(),i=requireBrowser$3(),u=requireMetadataCollector(),x=requireAiffParser(),h=requireAPEv2Parser(),p=requireAsfParser(),b=requireFlacParser(),c=requireMP4Parser(),m=requireMpegParser(),l=requireMusepack(),d=requireOggParser(),f=requireWaveParser(),S=requireWavPackParser(),y=requireDsfParser(),E=requireDsdiffParser(),g=requireMatroskaParser(),w=(0,i.default)("music-metadata:parser:factory");function T(I){const k=a.parse(I),N=s.parse(k.type);return{type:N.type,subtype:N.subtype,suffix:N.suffix,parameters:k.parameters}}ParserFactory.parseHttpContentType=T;async function _(I,k,N={}){const Y=await A.loadParser(k),z=new u.MetadataCollector(N);return await Y.init(z,I,N).parse(),z.toCommonMetadata()}let A=class xi{static async parseOnContentType(k,N){const{mimeType:Y,path:z,url:W}=await k.fileInfo,G=xi.getParserIdForMimeType(Y)||xi.getParserIdForExtension(z)||xi.getParserIdForExtension(W);return G||w("No parser found for MIME-type / extension: "+Y),this.parse(k,G,N)}static async parse(k,N,Y){if(!N){w("Guess parser on content...");const z=Buffer.alloc(4100);if(await k.peekBuffer(z,{mayBeLess:!0}),k.fileInfo.path&&(N=this.getParserIdForExtension(k.fileInfo.path)),!N){const W=await r.fromBuffer(z);if(!W)throw new Error("Failed to determine audio format");if(w(`Guessed file type is mime=${W.mime}, extension=${W.ext}`),N=xi.getParserIdForMimeType(W.mime),!N)throw new Error("Guessed MIME-type not supported: "+W.mime)}}return _(k,N,Y)}static getParserIdForExtension(k){if(!k)return;switch(this.getExtension(k).toLocaleLowerCase()||k){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(k){switch(k){case"aiff":return new x.AIFFParser;case"adts":case"mpeg":return new m.MpegParser;case"apev2":return new h.APEv2Parser;case"asf":return new p.AsfParser;case"dsf":return new y.DsfParser;case"dsdiff":return new E.DsdiffParser;case"flac":return new b.FlacParser;case"mp4":return new c.MP4Parser;case"musepack":return new l.default;case"ogg":return new d.OggParser;case"riff":return new f.WaveParser;case"wavpack":return new S.WavPackParser;case"matroska":return new g.MatroskaParser;default:throw new Error(`Unknown parser type: ${k}`)}}static getExtension(k){const N=k.lastIndexOf(".");return N===-1?"":k.slice(N)}static getParserIdForMimeType(k){let N;try{N=T(k)}catch{w(`Invalid HTTP Content-Type header value: ${k}`);return}const Y=N.subtype.indexOf("x-")===0?N.subtype.substring(2):N.subtype;switch(N.type){case"audio":switch(Y){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(Y){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(Y){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=A,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let r=class{constructor(s){this.uint8Array=s,this.fileSize=s.length}async randomRead(s,i,u,x){return s.set(this.uint8Array.subarray(x,x+u),i),u}};return RandomUint8ArrayReader.RandomUint8ArrayReader=r,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getLyricsHeaderLength=r.endTag2=void 0,r.endTag2="LYRICS200";async function a(s){if(s.fileSize>=143){const i=Buffer.alloc(15);await s.randomRead(i,0,i.length,s.fileSize-143);const u=i.toString("binary");if(u.substr(6)===r.endTag2)return parseInt(u.substr(0,6),10)+15}return 0}r.getLyricsHeaderLength=a})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const r=requireCore$2(),a=requireParserFactory(),s=requireRandomUint8ArrayReader(),i=requireAPEv2Parser(),u=requireID3v1Parser(),x=requireLyrics3();function h(f,S,y={}){return b(r.fromStream(f,typeof S=="string"?{mimeType:S}:S),y)}core$2.parseStream=h;async function p(f,S,y={}){const E=new s.RandomUint8ArrayReader(f);await d(E,y);const g=r.fromBuffer(f,typeof S=="string"?{mimeType:S}:S);return b(g,y)}core$2.parseBuffer=p;function b(f,S){return a.ParserFactory.parseOnContentType(f,S)}core$2.parseFromTokenizer=b;function c(f){const S={};for(const y of f)(S[y.id]=S[y.id]||[]).push(y.value);return S}core$2.orderTags=c;function m(f){return f===void 0?0:1+Math.round(f*4)}core$2.ratingToStars=m;function l(f){return f?f.reduce((S,y)=>y.name&&y.name.toLowerCase()in["front","cover","cover (front)"]?y:S):null}core$2.selectCover=l;async function d(f,S={}){let y=f.fileSize;if(await(0,u.hasID3v1Header)(f)){y-=128;const E=await(0,x.getLyricsHeaderLength)(f);y-=E}S.apeHeader=await i.APEv2Parser.findApeFooterOffset(f,y)}return core$2.scanAppendingHeaders=d,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=p,base64Js.toByteArray=c,base64Js.fromByteArray=d;for(var r=[],a=[],s=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,x=i.length;u<x;++u)r[u]=i[u],a[i.charCodeAt(u)]=u;a[45]=62,a[95]=63;function h(f){var S=f.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=f.indexOf("=");y===-1&&(y=S);var E=y===S?0:4-y%4;return[y,E]}function p(f){var S=h(f),y=S[0],E=S[1];return(y+E)*3/4-E}function b(f,S,y){return(S+y)*3/4-y}function c(f){var S,y=h(f),E=y[0],g=y[1],w=new s(b(f,E,g)),T=0,_=g>0?E-4:E,A;for(A=0;A<_;A+=4)S=a[f.charCodeAt(A)]<<18|a[f.charCodeAt(A+1)]<<12|a[f.charCodeAt(A+2)]<<6|a[f.charCodeAt(A+3)],w[T++]=S>>16&255,w[T++]=S>>8&255,w[T++]=S&255;return g===2&&(S=a[f.charCodeAt(A)]<<2|a[f.charCodeAt(A+1)]>>4,w[T++]=S&255),g===1&&(S=a[f.charCodeAt(A)]<<10|a[f.charCodeAt(A+1)]<<4|a[f.charCodeAt(A+2)]>>2,w[T++]=S>>8&255,w[T++]=S&255),w}function m(f){return r[f>>18&63]+r[f>>12&63]+r[f>>6&63]+r[f&63]}function l(f,S,y){for(var E,g=[],w=S;w<y;w+=3)E=(f[w]<<16&16711680)+(f[w+1]<<8&65280)+(f[w+2]&255),g.push(m(E));return g.join("")}function d(f){for(var S,y=f.length,E=y%3,g=[],w=16383,T=0,_=y-E;T<_;T+=w)g.push(l(f,T,T+w>_?_:T+w));return E===1?(S=f[y-1],g.push(r[S>>2]+r[S<<4&63]+"==")):E===2&&(S=(f[y-2]<<8)+f[y-1],g.push(r[S>>10]+r[S>>4&63]+r[S<<2&63]+"=")),g.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(r){const a=requireBase64Js(),s=requireIeee754(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=p,r.SlowBuffer=w,r.INSPECT_MAX_BYTES=50;const u=2147483647;r.kMaxLength=u,p.TYPED_ARRAY_SUPPORT=x(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function x(){try{const M=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(M,R),M.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function h(M){if(M>u)throw new RangeError('The value "'+M+'" is invalid for option "size"');const R=new Uint8Array(M);return Object.setPrototypeOf(R,p.prototype),R}function p(M,R,C){if(typeof M=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(M)}return b(M,R,C)}p.poolSize=8192;function b(M,R,C){if(typeof M=="string")return d(M,R);if(ArrayBuffer.isView(M))return S(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(ye(M,ArrayBuffer)||M&&ye(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(M,SharedArrayBuffer)||M&&ye(M.buffer,SharedArrayBuffer)))return y(M,R,C);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=M.valueOf&&M.valueOf();if(U!=null&&U!==M)return p.from(U,R,C);const ne=E(M);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return p.from(M[Symbol.toPrimitive]("string"),R,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}p.from=function(M,R,C){return b(M,R,C)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array);function c(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function m(M,R,C){return c(M),M<=0?h(M):R!==void 0?typeof C=="string"?h(M).fill(R,C):h(M).fill(R):h(M)}p.alloc=function(M,R,C){return m(M,R,C)};function l(M){return c(M),h(M<0?0:g(M)|0)}p.allocUnsafe=function(M){return l(M)},p.allocUnsafeSlow=function(M){return l(M)};function d(M,R){if((typeof R!="string"||R==="")&&(R="utf8"),!p.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const C=T(M,R)|0;let U=h(C);const ne=U.write(M,R);return ne!==C&&(U=U.slice(0,ne)),U}function f(M){const R=M.length<0?0:g(M.length)|0,C=h(R);for(let U=0;U<R;U+=1)C[U]=M[U]&255;return C}function S(M){if(ye(M,Uint8Array)){const R=new Uint8Array(M);return y(R.buffer,R.byteOffset,R.byteLength)}return f(M)}function y(M,R,C){if(R<0||M.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<R+(C||0))throw new RangeError('"length" is outside of buffer bounds');let U;return R===void 0&&C===void 0?U=new Uint8Array(M):C===void 0?U=new Uint8Array(M,R):U=new Uint8Array(M,R,C),Object.setPrototypeOf(U,p.prototype),U}function E(M){if(p.isBuffer(M)){const R=g(M.length)|0,C=h(R);return C.length===0||M.copy(C,0,0,R),C}if(M.length!==void 0)return typeof M.length!="number"||Ie(M.length)?h(0):f(M);if(M.type==="Buffer"&&Array.isArray(M.data))return f(M.data)}function g(M){if(M>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return M|0}function w(M){return+M!=M&&(M=0),p.alloc(+M)}p.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==p.prototype},p.compare=function(R,C){if(ye(R,Uint8Array)&&(R=p.from(R,R.offset,R.byteLength)),ye(C,Uint8Array)&&(C=p.from(C,C.offset,C.byteLength)),!p.isBuffer(R)||!p.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===C)return 0;let U=R.length,ne=C.length;for(let fe=0,ke=Math.min(U,ne);fe<ke;++fe)if(R[fe]!==C[fe]){U=R[fe],ne=C[fe];break}return U<ne?-1:ne<U?1:0},p.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(R,C){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return p.alloc(0);let U;if(C===void 0)for(C=0,U=0;U<R.length;++U)C+=R[U].length;const ne=p.allocUnsafe(C);let fe=0;for(U=0;U<R.length;++U){let ke=R[U];if(ye(ke,Uint8Array))fe+ke.length>ne.length?(p.isBuffer(ke)||(ke=p.from(ke)),ke.copy(ne,fe)):Uint8Array.prototype.set.call(ne,ke,fe);else if(p.isBuffer(ke))ke.copy(ne,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=ke.length}return ne};function T(M,R){if(p.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||ye(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const C=M.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&C===0)return 0;let ne=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return je(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return Se(M).length;default:if(ne)return U?-1:je(M).length;R=(""+R).toLowerCase(),ne=!0}}p.byteLength=T;function _(M,R,C){let U=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,R>>>=0,C<=R))return"";for(M||(M="utf8");;)switch(M){case"hex":return pe(this,R,C);case"utf8":case"utf-8":return ge(this,R,C);case"ascii":return me(this,R,C);case"latin1":case"binary":return H(this,R,C);case"base64":return $(this,R,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,R,C);default:if(U)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),U=!0}}p.prototype._isBuffer=!0;function A(M,R,C){const U=M[R];M[R]=M[C],M[C]=U}p.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<R;C+=2)A(this,C,C+1);return this},p.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<R;C+=4)A(this,C,C+3),A(this,C+1,C+2);return this},p.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<R;C+=8)A(this,C,C+7),A(this,C+1,C+6),A(this,C+2,C+5),A(this,C+3,C+4);return this},p.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?ge(this,0,R):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(R){if(!p.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:p.compare(this,R)===0},p.prototype.inspect=function(){let R="";const C=r.INSPECT_MAX_BYTES;return R=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(R+=" ... "),"<Buffer "+R+">"},i&&(p.prototype[i]=p.prototype.inspect),p.prototype.compare=function(R,C,U,ne,fe){if(ye(R,Uint8Array)&&(R=p.from(R,R.offset,R.byteLength)),!p.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(C===void 0&&(C=0),U===void 0&&(U=R?R.length:0),ne===void 0&&(ne=0),fe===void 0&&(fe=this.length),C<0||U>R.length||ne<0||fe>this.length)throw new RangeError("out of range index");if(ne>=fe&&C>=U)return 0;if(ne>=fe)return-1;if(C>=U)return 1;if(C>>>=0,U>>>=0,ne>>>=0,fe>>>=0,this===R)return 0;let ke=fe-ne,Ve=U-C;const tt=Math.min(ke,Ve),et=this.slice(ne,fe),rt=R.slice(C,U);for(let Ze=0;Ze<tt;++Ze)if(et[Ze]!==rt[Ze]){ke=et[Ze],Ve=rt[Ze];break}return ke<Ve?-1:Ve<ke?1:0};function I(M,R,C,U,ne){if(M.length===0)return-1;if(typeof C=="string"?(U=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,Ie(C)&&(C=ne?0:M.length-1),C<0&&(C=M.length+C),C>=M.length){if(ne)return-1;C=M.length-1}else if(C<0)if(ne)C=0;else return-1;if(typeof R=="string"&&(R=p.from(R,U)),p.isBuffer(R))return R.length===0?-1:k(M,R,C,U,ne);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(M,R,C):Uint8Array.prototype.lastIndexOf.call(M,R,C):k(M,[R],C,U,ne);throw new TypeError("val must be string, number or Buffer")}function k(M,R,C,U,ne){let fe=1,ke=M.length,Ve=R.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(M.length<2||R.length<2)return-1;fe=2,ke/=2,Ve/=2,C/=2}function tt(rt,Ze){return fe===1?rt[Ze]:rt.readUInt16BE(Ze*fe)}let et;if(ne){let rt=-1;for(et=C;et<ke;et++)if(tt(M,et)===tt(R,rt===-1?0:et-rt)){if(rt===-1&&(rt=et),et-rt+1===Ve)return rt*fe}else rt!==-1&&(et-=et-rt),rt=-1}else for(C+Ve>ke&&(C=ke-Ve),et=C;et>=0;et--){let rt=!0;for(let Ze=0;Ze<Ve;Ze++)if(tt(M,et+Ze)!==tt(R,Ze)){rt=!1;break}if(rt)return et}return-1}p.prototype.includes=function(R,C,U){return this.indexOf(R,C,U)!==-1},p.prototype.indexOf=function(R,C,U){return I(this,R,C,U,!0)},p.prototype.lastIndexOf=function(R,C,U){return I(this,R,C,U,!1)};function N(M,R,C,U){C=Number(C)||0;const ne=M.length-C;U?(U=Number(U),U>ne&&(U=ne)):U=ne;const fe=R.length;U>fe/2&&(U=fe/2);let ke;for(ke=0;ke<U;++ke){const Ve=parseInt(R.substr(ke*2,2),16);if(Ie(Ve))return ke;M[C+ke]=Ve}return ke}function Y(M,R,C,U){return Te(je(R,M.length-C),M,C,U)}function z(M,R,C,U){return Te(Ce(R),M,C,U)}function W(M,R,C,U){return Te(Se(R),M,C,U)}function G(M,R,C,U){return Te(ee(R,M.length-C),M,C,U)}p.prototype.write=function(R,C,U,ne){if(C===void 0)ne="utf8",U=this.length,C=0;else if(U===void 0&&typeof C=="string")ne=C,U=this.length,C=0;else if(isFinite(C))C=C>>>0,isFinite(U)?(U=U>>>0,ne===void 0&&(ne="utf8")):(ne=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-C;if((U===void 0||U>fe)&&(U=fe),R.length>0&&(U<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let ke=!1;for(;;)switch(ne){case"hex":return N(this,R,C,U);case"utf8":case"utf-8":return Y(this,R,C,U);case"ascii":case"latin1":case"binary":return z(this,R,C,U);case"base64":return W(this,R,C,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,R,C,U);default:if(ke)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),ke=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(M,R,C){return R===0&&C===M.length?a.fromByteArray(M):a.fromByteArray(M.slice(R,C))}function ge(M,R,C){C=Math.min(M.length,C);const U=[];let ne=R;for(;ne<C;){const fe=M[ne];let ke=null,Ve=fe>239?4:fe>223?3:fe>191?2:1;if(ne+Ve<=C){let tt,et,rt,Ze;switch(Ve){case 1:fe<128&&(ke=fe);break;case 2:tt=M[ne+1],(tt&192)===128&&(Ze=(fe&31)<<6|tt&63,Ze>127&&(ke=Ze));break;case 3:tt=M[ne+1],et=M[ne+2],(tt&192)===128&&(et&192)===128&&(Ze=(fe&15)<<12|(tt&63)<<6|et&63,Ze>2047&&(Ze<55296||Ze>57343)&&(ke=Ze));break;case 4:tt=M[ne+1],et=M[ne+2],rt=M[ne+3],(tt&192)===128&&(et&192)===128&&(rt&192)===128&&(Ze=(fe&15)<<18|(tt&63)<<12|(et&63)<<6|rt&63,Ze>65535&&Ze<1114112&&(ke=Ze))}}ke===null?(ke=65533,Ve=1):ke>65535&&(ke-=65536,U.push(ke>>>10&1023|55296),ke=56320|ke&1023),U.push(ke),ne+=Ve}return le(U)}const F=4096;function le(M){const R=M.length;if(R<=F)return String.fromCharCode.apply(String,M);let C="",U=0;for(;U<R;)C+=String.fromCharCode.apply(String,M.slice(U,U+=F));return C}function me(M,R,C){let U="";C=Math.min(M.length,C);for(let ne=R;ne<C;++ne)U+=String.fromCharCode(M[ne]&127);return U}function H(M,R,C){let U="";C=Math.min(M.length,C);for(let ne=R;ne<C;++ne)U+=String.fromCharCode(M[ne]);return U}function pe(M,R,C){const U=M.length;(!R||R<0)&&(R=0),(!C||C<0||C>U)&&(C=U);let ne="";for(let fe=R;fe<C;++fe)ne+=He[M[fe]];return ne}function L(M,R,C){const U=M.slice(R,C);let ne="";for(let fe=0;fe<U.length-1;fe+=2)ne+=String.fromCharCode(U[fe]+U[fe+1]*256);return ne}p.prototype.slice=function(R,C){const U=this.length;R=~~R,C=C===void 0?U:~~C,R<0?(R+=U,R<0&&(R=0)):R>U&&(R=U),C<0?(C+=U,C<0&&(C=0)):C>U&&(C=U),C<R&&(C=R);const ne=this.subarray(R,C);return Object.setPrototypeOf(ne,p.prototype),ne};function D(M,R,C){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+R>C)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(R,C,U){R=R>>>0,C=C>>>0,U||D(R,C,this.length);let ne=this[R],fe=1,ke=0;for(;++ke<C&&(fe*=256);)ne+=this[R+ke]*fe;return ne},p.prototype.readUintBE=p.prototype.readUIntBE=function(R,C,U){R=R>>>0,C=C>>>0,U||D(R,C,this.length);let ne=this[R+--C],fe=1;for(;C>0&&(fe*=256);)ne+=this[R+--C]*fe;return ne},p.prototype.readUint8=p.prototype.readUInt8=function(R,C){return R=R>>>0,C||D(R,1,this.length),this[R]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(R,C){return R=R>>>0,C||D(R,2,this.length),this[R]|this[R+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(R,C){return R=R>>>0,C||D(R,2,this.length),this[R]<<8|this[R+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(R,C){return R=R>>>0,C||D(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(R,C){return R=R>>>0,C||D(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},p.prototype.readBigUInt64LE=Ke(function(R){R=R>>>0,q(R,"offset");const C=this[R],U=this[R+7];(C===void 0||U===void 0)&&Q(R,this.length-8);const ne=C+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,fe=this[++R]+this[++R]*2**8+this[++R]*2**16+U*2**24;return BigInt(ne)+(BigInt(fe)<<BigInt(32))}),p.prototype.readBigUInt64BE=Ke(function(R){R=R>>>0,q(R,"offset");const C=this[R],U=this[R+7];(C===void 0||U===void 0)&&Q(R,this.length-8);const ne=C*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],fe=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+U;return(BigInt(ne)<<BigInt(32))+BigInt(fe)}),p.prototype.readIntLE=function(R,C,U){R=R>>>0,C=C>>>0,U||D(R,C,this.length);let ne=this[R],fe=1,ke=0;for(;++ke<C&&(fe*=256);)ne+=this[R+ke]*fe;return fe*=128,ne>=fe&&(ne-=Math.pow(2,8*C)),ne},p.prototype.readIntBE=function(R,C,U){R=R>>>0,C=C>>>0,U||D(R,C,this.length);let ne=C,fe=1,ke=this[R+--ne];for(;ne>0&&(fe*=256);)ke+=this[R+--ne]*fe;return fe*=128,ke>=fe&&(ke-=Math.pow(2,8*C)),ke},p.prototype.readInt8=function(R,C){return R=R>>>0,C||D(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},p.prototype.readInt16LE=function(R,C){R=R>>>0,C||D(R,2,this.length);const U=this[R]|this[R+1]<<8;return U&32768?U|4294901760:U},p.prototype.readInt16BE=function(R,C){R=R>>>0,C||D(R,2,this.length);const U=this[R+1]|this[R]<<8;return U&32768?U|4294901760:U},p.prototype.readInt32LE=function(R,C){return R=R>>>0,C||D(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},p.prototype.readInt32BE=function(R,C){return R=R>>>0,C||D(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},p.prototype.readBigInt64LE=Ke(function(R){R=R>>>0,q(R,"offset");const C=this[R],U=this[R+7];(C===void 0||U===void 0)&&Q(R,this.length-8);const ne=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(U<<24);return(BigInt(ne)<<BigInt(32))+BigInt(C+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),p.prototype.readBigInt64BE=Ke(function(R){R=R>>>0,q(R,"offset");const C=this[R],U=this[R+7];(C===void 0||U===void 0)&&Q(R,this.length-8);const ne=(C<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(ne)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+U)}),p.prototype.readFloatLE=function(R,C){return R=R>>>0,C||D(R,4,this.length),s.read(this,R,!0,23,4)},p.prototype.readFloatBE=function(R,C){return R=R>>>0,C||D(R,4,this.length),s.read(this,R,!1,23,4)},p.prototype.readDoubleLE=function(R,C){return R=R>>>0,C||D(R,8,this.length),s.read(this,R,!0,52,8)},p.prototype.readDoubleBE=function(R,C){return R=R>>>0,C||D(R,8,this.length),s.read(this,R,!1,52,8)};function K(M,R,C,U,ne,fe){if(!p.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ne||R<fe)throw new RangeError('"value" argument is out of bounds');if(C+U>M.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(R,C,U,ne){if(R=+R,C=C>>>0,U=U>>>0,!ne){const Ve=Math.pow(2,8*U)-1;K(this,R,C,U,Ve,0)}let fe=1,ke=0;for(this[C]=R&255;++ke<U&&(fe*=256);)this[C+ke]=R/fe&255;return C+U},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(R,C,U,ne){if(R=+R,C=C>>>0,U=U>>>0,!ne){const Ve=Math.pow(2,8*U)-1;K(this,R,C,U,Ve,0)}let fe=U-1,ke=1;for(this[C+fe]=R&255;--fe>=0&&(ke*=256);)this[C+fe]=R/ke&255;return C+U},p.prototype.writeUint8=p.prototype.writeUInt8=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,1,255,0),this[C]=R&255,C+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,2,65535,0),this[C]=R&255,this[C+1]=R>>>8,C+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,2,65535,0),this[C]=R>>>8,this[C+1]=R&255,C+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,4,4294967295,0),this[C+3]=R>>>24,this[C+2]=R>>>16,this[C+1]=R>>>8,this[C]=R&255,C+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,4,4294967295,0),this[C]=R>>>24,this[C+1]=R>>>16,this[C+2]=R>>>8,this[C+3]=R&255,C+4};function ae(M,R,C,U,ne){te(R,U,ne,M,C,7);let fe=Number(R&BigInt(4294967295));M[C++]=fe,fe=fe>>8,M[C++]=fe,fe=fe>>8,M[C++]=fe,fe=fe>>8,M[C++]=fe;let ke=Number(R>>BigInt(32)&BigInt(4294967295));return M[C++]=ke,ke=ke>>8,M[C++]=ke,ke=ke>>8,M[C++]=ke,ke=ke>>8,M[C++]=ke,C}function oe(M,R,C,U,ne){te(R,U,ne,M,C,7);let fe=Number(R&BigInt(4294967295));M[C+7]=fe,fe=fe>>8,M[C+6]=fe,fe=fe>>8,M[C+5]=fe,fe=fe>>8,M[C+4]=fe;let ke=Number(R>>BigInt(32)&BigInt(4294967295));return M[C+3]=ke,ke=ke>>8,M[C+2]=ke,ke=ke>>8,M[C+1]=ke,ke=ke>>8,M[C]=ke,C+8}p.prototype.writeBigUInt64LE=Ke(function(R,C=0){return ae(this,R,C,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Ke(function(R,C=0){return oe(this,R,C,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(R,C,U,ne){if(R=+R,C=C>>>0,!ne){const tt=Math.pow(2,8*U-1);K(this,R,C,U,tt-1,-tt)}let fe=0,ke=1,Ve=0;for(this[C]=R&255;++fe<U&&(ke*=256);)R<0&&Ve===0&&this[C+fe-1]!==0&&(Ve=1),this[C+fe]=(R/ke>>0)-Ve&255;return C+U},p.prototype.writeIntBE=function(R,C,U,ne){if(R=+R,C=C>>>0,!ne){const tt=Math.pow(2,8*U-1);K(this,R,C,U,tt-1,-tt)}let fe=U-1,ke=1,Ve=0;for(this[C+fe]=R&255;--fe>=0&&(ke*=256);)R<0&&Ve===0&&this[C+fe+1]!==0&&(Ve=1),this[C+fe]=(R/ke>>0)-Ve&255;return C+U},p.prototype.writeInt8=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,1,127,-128),R<0&&(R=255+R+1),this[C]=R&255,C+1},p.prototype.writeInt16LE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,2,32767,-32768),this[C]=R&255,this[C+1]=R>>>8,C+2},p.prototype.writeInt16BE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,2,32767,-32768),this[C]=R>>>8,this[C+1]=R&255,C+2},p.prototype.writeInt32LE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,4,2147483647,-2147483648),this[C]=R&255,this[C+1]=R>>>8,this[C+2]=R>>>16,this[C+3]=R>>>24,C+4},p.prototype.writeInt32BE=function(R,C,U){return R=+R,C=C>>>0,U||K(this,R,C,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[C]=R>>>24,this[C+1]=R>>>16,this[C+2]=R>>>8,this[C+3]=R&255,C+4},p.prototype.writeBigInt64LE=Ke(function(R,C=0){return ae(this,R,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Ke(function(R,C=0){return oe(this,R,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ue(M,R,C,U,ne,fe){if(C+U>M.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function we(M,R,C,U,ne){return R=+R,C=C>>>0,ne||ue(M,R,C,4),s.write(M,R,C,U,23,4),C+4}p.prototype.writeFloatLE=function(R,C,U){return we(this,R,C,!0,U)},p.prototype.writeFloatBE=function(R,C,U){return we(this,R,C,!1,U)};function xe(M,R,C,U,ne){return R=+R,C=C>>>0,ne||ue(M,R,C,8),s.write(M,R,C,U,52,8),C+8}p.prototype.writeDoubleLE=function(R,C,U){return xe(this,R,C,!0,U)},p.prototype.writeDoubleBE=function(R,C,U){return xe(this,R,C,!1,U)},p.prototype.copy=function(R,C,U,ne){if(!p.isBuffer(R))throw new TypeError("argument should be a Buffer");if(U||(U=0),!ne&&ne!==0&&(ne=this.length),C>=R.length&&(C=R.length),C||(C=0),ne>0&&ne<U&&(ne=U),ne===U||R.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),R.length-C<ne-U&&(ne=R.length-C+U);const fe=ne-U;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(C,U,ne):Uint8Array.prototype.set.call(R,this.subarray(U,ne),C),fe},p.prototype.fill=function(R,C,U,ne){if(typeof R=="string"){if(typeof C=="string"?(ne=C,C=0,U=this.length):typeof U=="string"&&(ne=U,U=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!p.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(R.length===1){const ke=R.charCodeAt(0);(ne==="utf8"&&ke<128||ne==="latin1")&&(R=ke)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(C<0||this.length<C||this.length<U)throw new RangeError("Out of range index");if(U<=C)return this;C=C>>>0,U=U===void 0?this.length:U>>>0,R||(R=0);let fe;if(typeof R=="number")for(fe=C;fe<U;++fe)this[fe]=R;else{const ke=p.isBuffer(R)?R:p.from(R,ne),Ve=ke.length;if(Ve===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(fe=0;fe<U-C;++fe)this[fe+C]=ke[fe%Ve]}return this};const se={};function Z(M,R,C){se[M]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(M,R){return`The "${M}" argument must be of type number. Received type ${typeof R}`},TypeError),Z("ERR_OUT_OF_RANGE",function(M,R,C){let U=`The value of "${M}" is out of range.`,ne=C;return Number.isInteger(C)&&Math.abs(C)>2**32?ne=be(String(C)):typeof C=="bigint"&&(ne=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(ne=be(ne)),ne+="n"),U+=` It must be ${R}. Received ${ne}`,U},RangeError);function be(M){let R="",C=M.length;const U=M[0]==="-"?1:0;for(;C>=U+4;C-=3)R=`_${M.slice(C-3,C)}${R}`;return`${M.slice(0,C)}${R}`}function _e(M,R,C){q(R,"offset"),(M[R]===void 0||M[R+C]===void 0)&&Q(R,M.length-(C+1))}function te(M,R,C,U,ne,fe){if(M>C||M<R){const ke=typeof R=="bigint"?"n":"";let Ve;throw R===0||R===BigInt(0)?Ve=`>= 0${ke} and < 2${ke} ** ${(fe+1)*8}${ke}`:Ve=`>= -(2${ke} ** ${(fe+1)*8-1}${ke}) and < 2 ** ${(fe+1)*8-1}${ke}`,new se.ERR_OUT_OF_RANGE("value",Ve,M)}_e(U,ne,fe)}function q(M,R){if(typeof M!="number")throw new se.ERR_INVALID_ARG_TYPE(R,"number",M)}function Q(M,R,C){throw Math.floor(M)!==M?(q(M,C),new se.ERR_OUT_OF_RANGE("offset","an integer",M)):R<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,M)}const ce=/[^+/0-9A-Za-z-_]/g;function Ee(M){if(M=M.split("=")[0],M=M.trim().replace(ce,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function je(M,R){R=R||1/0;let C;const U=M.length;let ne=null;const fe=[];for(let ke=0;ke<U;++ke){if(C=M.charCodeAt(ke),C>55295&&C<57344){if(!ne){if(C>56319){(R-=3)>-1&&fe.push(239,191,189);continue}else if(ke+1===U){(R-=3)>-1&&fe.push(239,191,189);continue}ne=C;continue}if(C<56320){(R-=3)>-1&&fe.push(239,191,189),ne=C;continue}C=(ne-55296<<10|C-56320)+65536}else ne&&(R-=3)>-1&&fe.push(239,191,189);if(ne=null,C<128){if((R-=1)<0)break;fe.push(C)}else if(C<2048){if((R-=2)<0)break;fe.push(C>>6|192,C&63|128)}else if(C<65536){if((R-=3)<0)break;fe.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((R-=4)<0)break;fe.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return fe}function Ce(M){const R=[];for(let C=0;C<M.length;++C)R.push(M.charCodeAt(C)&255);return R}function ee(M,R){let C,U,ne;const fe=[];for(let ke=0;ke<M.length&&!((R-=2)<0);++ke)C=M.charCodeAt(ke),U=C>>8,ne=C%256,fe.push(ne),fe.push(U);return fe}function Se(M){return a.toByteArray(Ee(M))}function Te(M,R,C,U){let ne;for(ne=0;ne<U&&!(ne+C>=R.length||ne>=M.length);++ne)R[ne+C]=M[ne];return ne}function ye(M,R){return M instanceof R||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===R.name}function Ie(M){return M!==M}const He=(function(){const M="0123456789abcdef",R=new Array(256);for(let C=0;C<16;++C){const U=C*16;for(let ne=0;ne<16;++ne)R[U+ne]=M[C]+M[ne]}return R})();function Ke(M){return typeof BigInt>"u"?Je:M}function Je(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class r extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let i="";for(let u=0;u<s.length;u++)i+=`    ${s[u].stack}
`;super(i),this.name="AggregateError",this.errors=s}}return primordials={AggregateError:r,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,s){return a.includes(s)},ArrayPrototypeIndexOf(a,s){return a.indexOf(s)},ArrayPrototypeJoin(a,s){return a.join(s)},ArrayPrototypeMap(a,s){return a.map(s)},ArrayPrototypePop(a,s){return a.pop(s)},ArrayPrototypePush(a,s){return a.push(s)},ArrayPrototypeSlice(a,s,i){return a.slice(s,i)},Error,FunctionPrototypeCall(a,s,...i){return a.call(s,...i)},FunctionPrototypeSymbolHasInstance(a,s){return Function.prototype[Symbol.hasInstance].call(a,s)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,s){return Object.defineProperties(a,s)},ObjectDefineProperty(a,s,i){return Object.defineProperty(a,s,i)},ObjectGetOwnPropertyDescriptor(a,s){return Object.getOwnPropertyDescriptor(a,s)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,s){return Object.setPrototypeOf(a,s)},Promise,PromisePrototypeCatch(a,s){return a.catch(s)},PromisePrototypeThen(a,s,i){return a.then(s,i)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,s){return a.test(s)},SafeSet:Set,String,StringPrototypeSlice(a,s,i){return a.slice(s,i)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,s,i){return a.set(s,i)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(r,...a){return r.replace(/%([sdifj])/g,function(...[s,i]){const u=a.shift();return i==="f"?u.toFixed(6):i==="j"?JSON.stringify(u):i==="s"&&typeof u=="object"?`${u.constructor!==Object?u.constructor.name:""} {}`.trim():u.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:r,inspect:a}=requireInspect(),{AggregateError:s}=requirePrimordials(),i=globalThis.AggregateError||s,u=Symbol("kIsNodeError"),x=["string","function","number","object","Function","Object","boolean","bigint","symbol"],h=/^([A-Z][a-z0-9]*)+$/,p="__node_internal_",b={};function c(E,g){if(!E)throw new b.ERR_INTERNAL_ASSERTION(g)}function m(E){let g="",w=E.length;const T=E[0]==="-"?1:0;for(;w>=T+4;w-=3)g=`_${E.slice(w-3,w)}${g}`;return`${E.slice(0,w)}${g}`}function l(E,g,w){if(typeof g=="function")return c(g.length<=w.length,`Code: ${E}; The provided arguments length (${w.length}) does not match the required ones (${g.length}).`),g(...w);const T=(g.match(/%[dfijoOs]/g)||[]).length;return c(T===w.length,`Code: ${E}; The provided arguments length (${w.length}) does not match the required ones (${T}).`),w.length===0?g:r(g,...w)}function d(E,g,w){w||(w=Error);class T extends w{constructor(...A){super(l(E,g,A))}toString(){return`${this.name} [${E}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:w.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${E}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=E,T.prototype[u]=!0,b[E]=T}function f(E){const g=p+E.name;return Object.defineProperty(E,"name",{value:g}),E}function S(E,g){if(E&&g&&E!==g){if(Array.isArray(g.errors))return g.errors.push(E),g;const w=new i([g,E],g.message);return w.code=g.code,w}return E||g}class y extends Error{constructor(g="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new b.ERR_INVALID_ARG_TYPE("options","Object",w);super(g,w),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(E,g,w)=>{c(typeof E=="string","'name' must be a string"),Array.isArray(g)||(g=[g]);let T="The ";E.endsWith(" argument")?T+=`${E} `:T+=`"${E}" ${E.includes(".")?"property":"argument"} `,T+="must be ";const _=[],A=[],I=[];for(const N of g)c(typeof N=="string","All expected entries have to be of type string"),x.includes(N)?_.push(N.toLowerCase()):h.test(N)?A.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),I.push(N));if(A.length>0){const N=_.indexOf("object");N!==-1&&(_.splice(_,N,1),A.push("Object"))}if(_.length>0){switch(_.length){case 1:T+=`of type ${_[0]}`;break;case 2:T+=`one of type ${_[0]} or ${_[1]}`;break;default:{const N=_.pop();T+=`one of type ${_.join(", ")}, or ${N}`}}(A.length>0||I.length>0)&&(T+=" or ")}if(A.length>0){switch(A.length){case 1:T+=`an instance of ${A[0]}`;break;case 2:T+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();T+=`an instance of ${A.join(", ")}, or ${N}`}}I.length>0&&(T+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(T+="an "),T+=`${I[0]}`;break;case 2:T+=`one of ${I[0]} or ${I[1]}`;break;default:{const N=I.pop();T+=`one of ${I.join(", ")}, or ${N}`}}if(w==null)T+=`. Received ${w}`;else if(typeof w=="function"&&w.name)T+=`. Received function ${w.name}`;else if(typeof w=="object"){var k;if((k=w.constructor)!==null&&k!==void 0&&k.name)T+=`. Received an instance of ${w.constructor.name}`;else{const N=a(w,{depth:-1});T+=`. Received ${N}`}}else{let N=a(w,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),T+=`. Received type ${typeof w} (${N})`}return T},TypeError),d("ERR_INVALID_ARG_VALUE",(E,g,w="is invalid")=>{let T=a(g);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${E.includes(".")?"property":"argument"} '${E}' ${w}. Received ${T}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(E,g,w)=>{var T;const _=w!=null&&(T=w.constructor)!==null&&T!==void 0&&T.name?`instance of ${w.constructor.name}`:`type ${typeof w}`;return`Expected ${E} to be returned from the "${g}" function but got ${_}.`},TypeError),d("ERR_MISSING_ARGS",(...E)=>{c(E.length>0,"At least one arg needs to be specified");let g;const w=E.length;switch(E=(Array.isArray(E)?E:[E]).map(T=>`"${T}"`).join(" or "),w){case 1:g+=`The ${E[0]} argument`;break;case 2:g+=`The ${E[0]} and ${E[1]} arguments`;break;default:{const T=E.pop();g+=`The ${E.join(", ")}, and ${T} arguments`}break}return`${g} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(E,g,w)=>{c(g,'Missing "range" argument');let T;if(Number.isInteger(w)&&Math.abs(w)>2**32)T=m(String(w));else if(typeof w=="bigint"){T=String(w);const _=BigInt(2)**BigInt(32);(w>_||w<-_)&&(T=m(T)),T+="n"}else T=a(w);return`The value of "${E}" is out of range. It must be ${g}. Received ${T}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:y,aggregateTwoErrors:f(S),hideStackFrames:f,codes:b},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:r,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=r,browser$1.exports.AbortSignal=a,browser$1.exports.default=r,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var r=typeof Reflect=="object"?Reflect:null,a=r&&typeof r.apply=="function"?r.apply:function(A,I,k){return Function.prototype.apply.call(A,I,k)},s;r&&typeof r.ownKeys=="function"?s=r.ownKeys:Object.getOwnPropertySymbols?s=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:s=function(A){return Object.getOwnPropertyNames(A)};function i(_){console&&console.warn&&console.warn(_)}var u=Number.isNaN||function(A){return A!==A};function x(){x.init.call(this)}events.exports=x,events.exports.once=g,x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var h=10;function p(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(_){if(typeof _!="number"||_<0||u(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");h=_}}),x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||u(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function b(_){return _._maxListeners===void 0?x.defaultMaxListeners:_._maxListeners}x.prototype.getMaxListeners=function(){return b(this)},x.prototype.emit=function(A){for(var I=[],k=1;k<arguments.length;k++)I.push(arguments[k]);var N=A==="error",Y=this._events;if(Y!==void 0)N=N&&Y.error===void 0;else if(!N)return!1;if(N){var z;if(I.length>0&&(z=I[0]),z instanceof Error)throw z;var W=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw W.context=z,W}var G=Y[A];if(G===void 0)return!1;if(typeof G=="function")a(G,this,I);else for(var $=G.length,ge=S(G,$),k=0;k<$;++k)a(ge[k],this,I);return!0};function c(_,A,I,k){var N,Y,z;if(p(I),Y=_._events,Y===void 0?(Y=_._events=Object.create(null),_._eventsCount=0):(Y.newListener!==void 0&&(_.emit("newListener",A,I.listener?I.listener:I),Y=_._events),z=Y[A]),z===void 0)z=Y[A]=I,++_._eventsCount;else if(typeof z=="function"?z=Y[A]=k?[I,z]:[z,I]:k?z.unshift(I):z.push(I),N=b(_),N>0&&z.length>N&&!z.warned){z.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=_,W.type=A,W.count=z.length,i(W)}return _}x.prototype.addListener=function(A,I){return c(this,A,I,!1)},x.prototype.on=x.prototype.addListener,x.prototype.prependListener=function(A,I){return c(this,A,I,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(_,A,I){var k={fired:!1,wrapFn:void 0,target:_,type:A,listener:I},N=m.bind(k);return N.listener=I,k.wrapFn=N,N}x.prototype.once=function(A,I){return p(I),this.on(A,l(this,A,I)),this},x.prototype.prependOnceListener=function(A,I){return p(I),this.prependListener(A,l(this,A,I)),this},x.prototype.removeListener=function(A,I){var k,N,Y,z,W;if(p(I),N=this._events,N===void 0)return this;if(k=N[A],k===void 0)return this;if(k===I||k.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete N[A],N.removeListener&&this.emit("removeListener",A,k.listener||I));else if(typeof k!="function"){for(Y=-1,z=k.length-1;z>=0;z--)if(k[z]===I||k[z].listener===I){W=k[z].listener,Y=z;break}if(Y<0)return this;Y===0?k.shift():y(k,Y),k.length===1&&(N[A]=k[0]),N.removeListener!==void 0&&this.emit("removeListener",A,W||I)}return this},x.prototype.off=x.prototype.removeListener,x.prototype.removeAllListeners=function(A){var I,k,N;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[A]),this;if(arguments.length===0){var Y=Object.keys(k),z;for(N=0;N<Y.length;++N)z=Y[N],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=k[A],typeof I=="function")this.removeListener(A,I);else if(I!==void 0)for(N=I.length-1;N>=0;N--)this.removeListener(A,I[N]);return this};function d(_,A,I){var k=_._events;if(k===void 0)return[];var N=k[A];return N===void 0?[]:typeof N=="function"?I?[N.listener||N]:[N]:I?E(N):S(N,N.length)}x.prototype.listeners=function(A){return d(this,A,!0)},x.prototype.rawListeners=function(A){return d(this,A,!1)},x.listenerCount=function(_,A){return typeof _.listenerCount=="function"?_.listenerCount(A):f.call(_,A)},x.prototype.listenerCount=f;function f(_){var A=this._events;if(A!==void 0){var I=A[_];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function S(_,A){for(var I=new Array(A),k=0;k<A;++k)I[k]=_[k];return I}function y(_,A){for(;A+1<_.length;A++)_[A]=_[A+1];_.pop()}function E(_){for(var A=new Array(_.length),I=0;I<A.length;++I)A[I]=_[I].listener||_[I];return A}function g(_,A){return new Promise(function(I,k){function N(z){_.removeListener(A,Y),k(z)}function Y(){typeof _.removeListener=="function"&&_.removeListener("error",N),I([].slice.call(arguments))}T(_,A,Y,{once:!0}),A!=="error"&&w(_,N,{once:!0})})}function w(_,A,I){typeof _.on=="function"&&T(_,"error",A,I)}function T(_,A,I,k){if(typeof _.on=="function")k.once?_.once(A,I):_.on(A,I);else if(typeof _.addEventListener=="function")_.addEventListener(A,function N(Y){k.once&&_.removeEventListener(A,N),I(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(r){const a=requireBuffer(),{format:s,inspect:i}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:u}}=requireErrors(),{kResistStopPropagation:x,AggregateError:h,SymbolDispose:p}=requirePrimordials(),b=globalThis.AbortSignal||requireBrowser$2().AbortSignal,c=globalThis.AbortController||requireBrowser$2().AbortController,m=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||a.Blob,d=typeof l<"u"?function(E){return E instanceof l}:function(E){return!1},f=(y,E)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new u(E,"AbortSignal",y)},S=(y,E)=>{if(typeof y!="function")throw new u(E,"Function",y)};r.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(y){let E=!1;return function(...g){E||(E=!0,y.apply(this,g))}},createDeferredPromise:function(){let y,E;return{promise:new Promise((w,T)=>{y=w,E=T}),resolve:y,reject:E}},promisify(y){return new Promise((E,g)=>{y((w,...T)=>w?g(w):E(...T))})},debuglog(){return function(){}},format:s,inspect:i,types:{isAsyncFunction(y){return y instanceof m},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:d,deprecate(y,E){return y},addAbortListener:requireEvents().addAbortListener||function(E,g){if(E===void 0)throw new u("signal","AbortSignal",E);f(E,"signal"),S(g,"listener");let w;return E.aborted?queueMicrotask(()=>g()):(E.addEventListener("abort",g,{__proto__:null,once:!0,[x]:!0}),w=()=>{E.removeEventListener("abort",g)}),{__proto__:null,[p](){var T;(T=w)===null||T===void 0||T()}}},AbortSignalAny:b.any||function(E){if(E.length===1)return E[0];const g=new c,w=()=>g.abort();return E.forEach(T=>{f(T,"signals"),T.addEventListener("abort",w,{once:!0})}),g.signal.addEventListener("abort",()=>{E.forEach(T=>T.removeEventListener("abort",w))},{once:!0}),g.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:s,ArrayPrototypeMap:i,NumberIsInteger:u,NumberIsNaN:x,NumberMAX_SAFE_INTEGER:h,NumberMIN_SAFE_INTEGER:p,NumberParseInt:b,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:m,String:l,StringPrototypeToUpperCase:d,StringPrototypeTrim:f}=requirePrimordials(),{hideStackFrames:S,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:E,ERR_INVALID_ARG_VALUE:g,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:T}}=requireErrors(),{normalizeEncoding:_}=requireUtil(),{isAsyncFunction:A,isArrayBufferView:I}=requireUtil().types,k={};function N(ee){return ee===(ee|0)}function Y(ee){return ee===ee>>>0}const z=/^[0-7]+$/,W="must be a 32-bit unsigned integer or an octal string";function G(ee,Se,Te){if(typeof ee>"u"&&(ee=Te),typeof ee=="string"){if(m(z,ee)===null)throw new g(Se,ee,W);ee=b(ee,8)}return F(ee,Se),ee}const $=S((ee,Se,Te=p,ye=h)=>{if(typeof ee!="number")throw new E(Se,"number",ee);if(!u(ee))throw new w(Se,"an integer",ee);if(ee<Te||ee>ye)throw new w(Se,`>= ${Te} && <= ${ye}`,ee)}),ge=S((ee,Se,Te=-2147483648,ye=2147483647)=>{if(typeof ee!="number")throw new E(Se,"number",ee);if(!u(ee))throw new w(Se,"an integer",ee);if(ee<Te||ee>ye)throw new w(Se,`>= ${Te} && <= ${ye}`,ee)}),F=S((ee,Se,Te=!1)=>{if(typeof ee!="number")throw new E(Se,"number",ee);if(!u(ee))throw new w(Se,"an integer",ee);const ye=Te?1:0,Ie=4294967295;if(ee<ye||ee>Ie)throw new w(Se,`>= ${ye} && <= ${Ie}`,ee)});function le(ee,Se){if(typeof ee!="string")throw new E(Se,"string",ee)}function me(ee,Se,Te=void 0,ye){if(typeof ee!="number")throw new E(Se,"number",ee);if(Te!=null&&ee<Te||ye!=null&&ee>ye||(Te!=null||ye!=null)&&x(ee))throw new w(Se,`${Te!=null?`>= ${Te}`:""}${Te!=null&&ye!=null?" && ":""}${ye!=null?`<= ${ye}`:""}`,ee)}const H=S((ee,Se,Te)=>{if(!a(Te,ee)){const Ie="must be one of: "+s(i(Te,He=>typeof He=="string"?`'${He}'`:l(He)),", ");throw new g(Se,ee,Ie)}});function pe(ee,Se){if(typeof ee!="boolean")throw new E(Se,"boolean",ee)}function L(ee,Se,Te){return ee==null||!c(ee,Se)?Te:ee[Se]}const D=S((ee,Se,Te=null)=>{const ye=L(Te,"allowArray",!1),Ie=L(Te,"allowFunction",!1);if(!L(Te,"nullable",!1)&&ee===null||!ye&&r(ee)||typeof ee!="object"&&(!Ie||typeof ee!="function"))throw new E(Se,"Object",ee)}),K=S((ee,Se)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new E(Se,"a dictionary",ee)}),ae=S((ee,Se,Te=0)=>{if(!r(ee))throw new E(Se,"Array",ee);if(ee.length<Te){const ye=`must be longer than ${Te}`;throw new g(Se,ee,ye)}});function oe(ee,Se){ae(ee,Se);for(let Te=0;Te<ee.length;Te++)le(ee[Te],`${Se}[${Te}]`)}function ue(ee,Se){ae(ee,Se);for(let Te=0;Te<ee.length;Te++)pe(ee[Te],`${Se}[${Te}]`)}function we(ee,Se){ae(ee,Se);for(let Te=0;Te<ee.length;Te++){const ye=ee[Te],Ie=`${Se}[${Te}]`;if(ye==null)throw new E(Ie,"AbortSignal",ye);_e(ye,Ie)}}function xe(ee,Se="signal"){if(le(ee,Se),k[ee]===void 0)throw k[d(ee)]!==void 0?new T(ee+" (signals must use all capital letters)"):new T(ee)}const se=S((ee,Se="buffer")=>{if(!I(ee))throw new E(Se,["Buffer","TypedArray","DataView"],ee)});function Z(ee,Se){const Te=_(Se),ye=ee.length;if(Te==="hex"&&ye%2!==0)throw new g("encoding",Se,`is invalid for data of length ${ye}`)}function be(ee,Se="Port",Te=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&f(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!Te)throw new y(Se,ee,Te);return ee|0}const _e=S((ee,Se)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new E(Se,"AbortSignal",ee)}),te=S((ee,Se)=>{if(typeof ee!="function")throw new E(Se,"Function",ee)}),q=S((ee,Se)=>{if(typeof ee!="function"||A(ee))throw new E(Se,"Function",ee)}),Q=S((ee,Se)=>{if(ee!==void 0)throw new E(Se,"undefined",ee)});function ce(ee,Se,Te){if(!a(Te,ee))throw new E(Se,`('${s(Te,"|")}')`,ee)}const Ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function je(ee,Se){if(typeof ee>"u"||!m(Ee,ee))throw new g(Se,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ce(ee){if(typeof ee=="string")return je(ee,"hints"),ee;if(r(ee)){const Se=ee.length;let Te="";if(Se===0)return Te;for(let ye=0;ye<Se;ye++){const Ie=ee[ye];je(Ie,"hints"),Te+=Ie,ye!==Se-1&&(Te+=", ")}return Te}throw new g("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:N,isUint32:Y,parseFileMode:G,validateArray:ae,validateStringArray:oe,validateBooleanArray:ue,validateAbortSignalArray:we,validateBoolean:pe,validateBuffer:se,validateDictionary:K,validateEncoding:Z,validateFunction:te,validateInt32:ge,validateInteger:$,validateNumber:me,validateObject:D,validateOneOf:H,validatePlainFunction:q,validatePort:be,validateSignalName:xe,validateString:le,validateUint32:F,validateUndefined:Q,validateUnion:ce,validateAbortSignal:_e,validateLinkHeaderValue:Ce},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var r=browser.exports={},a,s;function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=i}catch{a=i}try{typeof clearTimeout=="function"?s=clearTimeout:s=u}catch{s=u}})();function x(y){if(a===setTimeout)return setTimeout(y,0);if((a===i||!a)&&setTimeout)return a=setTimeout,setTimeout(y,0);try{return a(y,0)}catch{try{return a.call(null,y,0)}catch{return a.call(this,y,0)}}}function h(y){if(s===clearTimeout)return clearTimeout(y);if((s===u||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(y);try{return s(y)}catch{try{return s.call(null,y)}catch{return s.call(this,y)}}}var p=[],b=!1,c,m=-1;function l(){!b||!c||(b=!1,c.length?p=c.concat(p):m=-1,p.length&&d())}function d(){if(!b){var y=x(l);b=!0;for(var E=p.length;E;){for(c=p,p=[];++m<E;)c&&c[m].run();m=-1,E=p.length}c=null,b=!1,h(y)}}r.nextTick=function(y){var E=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)E[g-1]=arguments[g];p.push(new f(y,E)),p.length===1&&!b&&x(d)};function f(y,E){this.fun=y,this.array=E}f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function S(){}return r.on=S,r.addListener=S,r.once=S,r.off=S,r.removeListener=S,r.removeAllListeners=S,r.emit=S,r.prependListener=S,r.prependOnceListener=S,r.listeners=function(y){return[]},r.binding=function(y){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(y){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:r,SymbolIterator:a,SymbolFor:s}=requirePrimordials(),i=s("nodejs.stream.destroyed"),u=s("nodejs.stream.errored"),x=s("nodejs.stream.readable"),h=s("nodejs.stream.writable"),p=s("nodejs.stream.disturbed"),b=s("nodejs.webstream.isClosedPromise"),c=s("nodejs.webstream.controllerErrorFunction");function m(L,D=!1){var K;return!!(L&&typeof L.pipe=="function"&&typeof L.on=="function"&&(!D||typeof L.pause=="function"&&typeof L.resume=="function")&&(!L._writableState||((K=L._readableState)===null||K===void 0?void 0:K.readable)!==!1)&&(!L._writableState||L._readableState))}function l(L){var D;return!!(L&&typeof L.write=="function"&&typeof L.on=="function"&&(!L._readableState||((D=L._writableState)===null||D===void 0?void 0:D.writable)!==!1))}function d(L){return!!(L&&typeof L.pipe=="function"&&L._readableState&&typeof L.on=="function"&&typeof L.write=="function")}function f(L){return L&&(L._readableState||L._writableState||typeof L.write=="function"&&typeof L.on=="function"||typeof L.pipe=="function"&&typeof L.on=="function")}function S(L){return!!(L&&!f(L)&&typeof L.pipeThrough=="function"&&typeof L.getReader=="function"&&typeof L.cancel=="function")}function y(L){return!!(L&&!f(L)&&typeof L.getWriter=="function"&&typeof L.abort=="function")}function E(L){return!!(L&&!f(L)&&typeof L.readable=="object"&&typeof L.writable=="object")}function g(L){return S(L)||y(L)||E(L)}function w(L,D){return L==null?!1:D===!0?typeof L[r]=="function":D===!1?typeof L[a]=="function":typeof L[r]=="function"||typeof L[a]=="function"}function T(L){if(!f(L))return null;const D=L._writableState,K=L._readableState,ae=D||K;return!!(L.destroyed||L[i]||ae!=null&&ae.destroyed)}function _(L){if(!l(L))return null;if(L.writableEnded===!0)return!0;const D=L._writableState;return D!=null&&D.errored?!1:typeof D?.ended!="boolean"?null:D.ended}function A(L,D){if(!l(L))return null;if(L.writableFinished===!0)return!0;const K=L._writableState;return K!=null&&K.errored?!1:typeof K?.finished!="boolean"?null:!!(K.finished||D===!1&&K.ended===!0&&K.length===0)}function I(L){if(!m(L))return null;if(L.readableEnded===!0)return!0;const D=L._readableState;return!D||D.errored?!1:typeof D?.ended!="boolean"?null:D.ended}function k(L,D){if(!m(L))return null;const K=L._readableState;return K!=null&&K.errored?!1:typeof K?.endEmitted!="boolean"?null:!!(K.endEmitted||D===!1&&K.ended===!0&&K.length===0)}function N(L){return L&&L[x]!=null?L[x]:typeof L?.readable!="boolean"?null:T(L)?!1:m(L)&&L.readable&&!k(L)}function Y(L){return L&&L[h]!=null?L[h]:typeof L?.writable!="boolean"?null:T(L)?!1:l(L)&&L.writable&&!_(L)}function z(L,D){return f(L)?T(L)?!0:!(D?.readable!==!1&&N(L)||D?.writable!==!1&&Y(L)):null}function W(L){var D,K;return f(L)?L.writableErrored?L.writableErrored:(D=(K=L._writableState)===null||K===void 0?void 0:K.errored)!==null&&D!==void 0?D:null:null}function G(L){var D,K;return f(L)?L.readableErrored?L.readableErrored:(D=(K=L._readableState)===null||K===void 0?void 0:K.errored)!==null&&D!==void 0?D:null:null}function $(L){if(!f(L))return null;if(typeof L.closed=="boolean")return L.closed;const D=L._writableState,K=L._readableState;return typeof D?.closed=="boolean"||typeof K?.closed=="boolean"?D?.closed||K?.closed:typeof L._closed=="boolean"&&ge(L)?L._closed:null}function ge(L){return typeof L._closed=="boolean"&&typeof L._defaultKeepAlive=="boolean"&&typeof L._removedConnection=="boolean"&&typeof L._removedContLen=="boolean"}function F(L){return typeof L._sent100=="boolean"&&ge(L)}function le(L){var D;return typeof L._consuming=="boolean"&&typeof L._dumped=="boolean"&&((D=L.req)===null||D===void 0?void 0:D.upgradeOrConnect)===void 0}function me(L){if(!f(L))return null;const D=L._writableState,K=L._readableState,ae=D||K;return!ae&&F(L)||!!(ae&&ae.autoDestroy&&ae.emitClose&&ae.closed===!1)}function H(L){var D;return!!(L&&((D=L[p])!==null&&D!==void 0?D:L.readableDidRead||L.readableAborted))}function pe(L){var D,K,ae,oe,ue,we,xe,se,Z,be;return!!(L&&((D=(K=(ae=(oe=(ue=(we=L[u])!==null&&we!==void 0?we:L.readableErrored)!==null&&ue!==void 0?ue:L.writableErrored)!==null&&oe!==void 0?oe:(xe=L._readableState)===null||xe===void 0?void 0:xe.errorEmitted)!==null&&ae!==void 0?ae:(se=L._writableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&K!==void 0?K:(Z=L._readableState)===null||Z===void 0?void 0:Z.errored)!==null&&D!==void 0?D:!((be=L._writableState)===null||be===void 0)&&be.errored))}return utils={isDestroyed:T,kIsDestroyed:i,isDisturbed:H,kIsDisturbed:p,isErrored:pe,kIsErrored:u,isReadable:N,kIsReadable:x,kIsClosedPromise:b,kControllerErrorFunction:c,kIsWritable:h,isClosed:$,isDuplexNodeStream:d,isFinished:z,isIterable:w,isReadableNodeStream:m,isReadableStream:S,isReadableEnded:I,isReadableFinished:k,isReadableErrored:G,isNodeStream:f,isWebStream:g,isWritable:Y,isWritableNodeStream:l,isWritableStream:y,isWritableEnded:_,isWritableFinished:A,isWritableErrored:W,isServerRequest:le,isServerResponse:F,willEmitClose:me,isTransformStream:E},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const r=requireBrowser$1(),{AbortError:a,codes:s}=requireErrors(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:u}=s,{kEmptyObject:x,once:h}=requireUtil(),{validateAbortSignal:p,validateFunction:b,validateObject:c,validateBoolean:m}=requireValidators(),{Promise:l,PromisePrototypeThen:d,SymbolDispose:f}=requirePrimordials(),{isClosed:S,isReadable:y,isReadableNodeStream:E,isReadableStream:g,isReadableFinished:w,isReadableErrored:T,isWritable:_,isWritableNodeStream:A,isWritableStream:I,isWritableFinished:k,isWritableErrored:N,isNodeStream:Y,willEmitClose:z,kIsClosedPromise:W}=requireUtils();let G;function $(H){return H.setHeader&&typeof H.abort=="function"}const ge=()=>{};function F(H,pe,L){var D,K;if(arguments.length===2?(L=pe,pe=x):pe==null?pe=x:c(pe,"options"),b(L,"callback"),p(pe.signal,"options.signal"),L=h(L),g(H)||I(H))return le(H,pe,L);if(!Y(H))throw new i("stream",["ReadableStream","WritableStream","Stream"],H);const ae=(D=pe.readable)!==null&&D!==void 0?D:E(H),oe=(K=pe.writable)!==null&&K!==void 0?K:A(H),ue=H._writableState,we=H._readableState,xe=()=>{H.writable||be()};let se=z(H)&&E(H)===ae&&A(H)===oe,Z=k(H,!1);const be=()=>{Z=!0,H.destroyed&&(se=!1),!(se&&(!H.readable||ae))&&(!ae||_e)&&L.call(H)};let _e=w(H,!1);const te=()=>{_e=!0,H.destroyed&&(se=!1),!(se&&(!H.writable||oe))&&(!oe||Z)&&L.call(H)},q=ee=>{L.call(H,ee)};let Q=S(H);const ce=()=>{Q=!0;const ee=N(H)||T(H);if(ee&&typeof ee!="boolean")return L.call(H,ee);if(ae&&!_e&&E(H,!0)&&!w(H,!1))return L.call(H,new u);if(oe&&!Z&&!k(H,!1))return L.call(H,new u);L.call(H)},Ee=()=>{Q=!0;const ee=N(H)||T(H);if(ee&&typeof ee!="boolean")return L.call(H,ee);L.call(H)},je=()=>{H.req.on("finish",be)};$(H)?(H.on("complete",be),se||H.on("abort",ce),H.req?je():H.on("request",je)):oe&&!ue&&(H.on("end",xe),H.on("close",xe)),!se&&typeof H.aborted=="boolean"&&H.on("aborted",ce),H.on("end",te),H.on("finish",be),pe.error!==!1&&H.on("error",q),H.on("close",ce),Q?r.nextTick(ce):ue!=null&&ue.errorEmitted||we!=null&&we.errorEmitted?se||r.nextTick(Ee):(!ae&&(!se||y(H))&&(Z||_(H)===!1)||!oe&&(!se||_(H))&&(_e||y(H)===!1)||we&&H.req&&H.aborted)&&r.nextTick(Ee);const Ce=()=>{L=ge,H.removeListener("aborted",ce),H.removeListener("complete",be),H.removeListener("abort",ce),H.removeListener("request",je),H.req&&H.req.removeListener("finish",be),H.removeListener("end",xe),H.removeListener("close",xe),H.removeListener("finish",be),H.removeListener("end",te),H.removeListener("error",q),H.removeListener("close",ce)};if(pe.signal&&!Q){const ee=()=>{const Se=L;Ce(),Se.call(H,new a(void 0,{cause:pe.signal.reason}))};if(pe.signal.aborted)r.nextTick(ee);else{G=G||requireUtil().addAbortListener;const Se=G(pe.signal,ee),Te=L;L=h((...ye)=>{Se[f](),Te.apply(H,ye)})}}return Ce}function le(H,pe,L){let D=!1,K=ge;if(pe.signal)if(K=()=>{D=!0,L.call(H,new a(void 0,{cause:pe.signal.reason}))},pe.signal.aborted)r.nextTick(K);else{G=G||requireUtil().addAbortListener;const oe=G(pe.signal,K),ue=L;L=h((...we)=>{oe[f](),ue.apply(H,we)})}const ae=(...oe)=>{D||r.nextTick(()=>L.apply(H,oe))};return d(H[W].promise,ae,ae),ge}function me(H,pe){var L;let D=!1;return pe===null&&(pe=x),(L=pe)!==null&&L!==void 0&&L.cleanup&&(m(pe.cleanup,"cleanup"),D=pe.cleanup),new l((K,ae)=>{const oe=F(H,pe,ue=>{D&&oe(),ue?ae(ue):K()})})}return endOfStream.exports=F,endOfStream.exports.finished=me,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const r=requireBrowser$1(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:i}=requireErrors(),{Symbol:u}=requirePrimordials(),{kIsDestroyed:x,isDestroyed:h,isFinished:p,isServerRequest:b}=requireUtils(),c=u("kDestroy"),m=u("kConstruct");function l(z,W,G){z&&(z.stack,W&&!W.errored&&(W.errored=z),G&&!G.errored&&(G.errored=z))}function d(z,W){const G=this._readableState,$=this._writableState,ge=$||G;return $!=null&&$.destroyed||G!=null&&G.destroyed?(typeof W=="function"&&W(),this):(l(z,$,G),$&&($.destroyed=!0),G&&(G.destroyed=!0),ge.constructed?f(this,z,W):this.once(c,function(F){f(this,a(F,z),W)}),this)}function f(z,W,G){let $=!1;function ge(F){if($)return;$=!0;const le=z._readableState,me=z._writableState;l(F,me,le),me&&(me.closed=!0),le&&(le.closed=!0),typeof G=="function"&&G(F),F?r.nextTick(S,z,F):r.nextTick(y,z)}try{z._destroy(W||null,ge)}catch(F){ge(F)}}function S(z,W){E(z,W),y(z)}function y(z){const W=z._readableState,G=z._writableState;G&&(G.closeEmitted=!0),W&&(W.closeEmitted=!0),(G!=null&&G.emitClose||W!=null&&W.emitClose)&&z.emit("close")}function E(z,W){const G=z._readableState,$=z._writableState;$!=null&&$.errorEmitted||G!=null&&G.errorEmitted||($&&($.errorEmitted=!0),G&&(G.errorEmitted=!0),z.emit("error",W))}function g(){const z=this._readableState,W=this._writableState;z&&(z.constructed=!0,z.closed=!1,z.closeEmitted=!1,z.destroyed=!1,z.errored=null,z.errorEmitted=!1,z.reading=!1,z.ended=z.readable===!1,z.endEmitted=z.readable===!1),W&&(W.constructed=!0,W.destroyed=!1,W.closed=!1,W.closeEmitted=!1,W.errored=null,W.errorEmitted=!1,W.finalCalled=!1,W.prefinished=!1,W.ended=W.writable===!1,W.ending=W.writable===!1,W.finished=W.writable===!1)}function w(z,W,G){const $=z._readableState,ge=z._writableState;if(ge!=null&&ge.destroyed||$!=null&&$.destroyed)return this;$!=null&&$.autoDestroy||ge!=null&&ge.autoDestroy?z.destroy(W):W&&(W.stack,ge&&!ge.errored&&(ge.errored=W),$&&!$.errored&&($.errored=W),G?r.nextTick(E,z,W):E(z,W))}function T(z,W){if(typeof z._construct!="function")return;const G=z._readableState,$=z._writableState;G&&(G.constructed=!1),$&&($.constructed=!1),z.once(m,W),!(z.listenerCount(m)>1)&&r.nextTick(_,z)}function _(z){let W=!1;function G($){if(W){w(z,$??new s);return}W=!0;const ge=z._readableState,F=z._writableState,le=F||ge;ge&&(ge.constructed=!0),F&&(F.constructed=!0),le.destroyed?z.emit(c,$):$?w(z,$,!0):r.nextTick(A,z)}try{z._construct($=>{r.nextTick(G,$)})}catch($){r.nextTick(G,$)}}function A(z){z.emit(m)}function I(z){return z?.setHeader&&typeof z.abort=="function"}function k(z){z.emit("close")}function N(z,W){z.emit("error",W),r.nextTick(k,z)}function Y(z,W){!z||h(z)||(!W&&!p(z)&&(W=new i),b(z)?(z.socket=null,z.destroy(W)):I(z)?z.abort():I(z.req)?z.req.abort():typeof z.destroy=="function"?z.destroy(W):typeof z.close=="function"?z.close():W?r.nextTick(N,z,W):r.nextTick(k,z),z.destroyed||(z[x]=!0))}return destroy_1={construct:T,destroyer:Y,destroy:d,undestroy:g,errorOrDestroy:w},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:a}=requirePrimordials(),{EventEmitter:s}=requireEvents();function i(x){s.call(this,x)}a(i.prototype,s.prototype),a(i,s),i.prototype.pipe=function(x,h){const p=this;function b(y){x.writable&&x.write(y)===!1&&p.pause&&p.pause()}p.on("data",b);function c(){p.readable&&p.resume&&p.resume()}x.on("drain",c),!x._isStdio&&(!h||h.end!==!1)&&(p.on("end",l),p.on("close",d));let m=!1;function l(){m||(m=!0,x.end())}function d(){m||(m=!0,typeof x.destroy=="function"&&x.destroy())}function f(y){S(),s.listenerCount(this,"error")===0&&this.emit("error",y)}u(p,"error",f),u(x,"error",f);function S(){p.removeListener("data",b),x.removeListener("drain",c),p.removeListener("end",l),p.removeListener("close",d),p.removeListener("error",f),x.removeListener("error",f),p.removeListener("end",S),p.removeListener("close",S),x.removeListener("close",S)}return p.on("end",S),p.on("close",S),x.on("close",S),x.emit("pipe",p),x};function u(x,h,p){if(typeof x.prependListener=="function")return x.prependListener(h,p);!x._events||!x._events[h]?x.on(h,p):r(x._events[h])?x._events[h].unshift(p):x._events[h]=[p,x._events[h]]}return legacy={Stream:i,prependListener:u},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(r){const{SymbolDispose:a}=requirePrimordials(),{AbortError:s,codes:i}=requireErrors(),{isNodeStream:u,isWebStream:x,kControllerErrorFunction:h}=requireUtils(),p=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:b}=i;let c;const m=(l,d)=>{if(typeof l!="object"||!("aborted"in l))throw new b(d,"AbortSignal",l)};r.exports.addAbortSignal=function(d,f){if(m(d,"signal"),!u(f)&&!x(f))throw new b("stream",["ReadableStream","WritableStream","Stream"],f);return r.exports.addAbortSignalNoValidate(d,f)},r.exports.addAbortSignalNoValidate=function(l,d){if(typeof l!="object"||!("aborted"in l))return d;const f=u(d)?()=>{d.destroy(new s(void 0,{cause:l.reason}))}:()=>{d[h](new s(void 0,{cause:l.reason}))};if(l.aborted)f();else{c=c||requireUtil().addAbortListener;const S=c(l,f);p(d,S[a])}return d}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:r,SymbolIterator:a,TypedArrayPrototypeSet:s,Uint8Array:i}=requirePrimordials(),{Buffer:u}=requireBuffer(),{inspect:x}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(p){const b={data:p,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}unshift(p){const b={data:p,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}shift(){if(this.length===0)return;const p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}clear(){this.head=this.tail=null,this.length=0}join(p){if(this.length===0)return"";let b=this.head,c=""+b.data;for(;(b=b.next)!==null;)c+=p+b.data;return c}concat(p){if(this.length===0)return u.alloc(0);const b=u.allocUnsafe(p>>>0);let c=this.head,m=0;for(;c;)s(b,c.data,m),m+=c.data.length,c=c.next;return b}consume(p,b){const c=this.head.data;if(p<c.length){const m=c.slice(0,p);return this.head.data=c.slice(p),m}return p===c.length?this.shift():b?this._getString(p):this._getBuffer(p)}first(){return this.head.data}*[a](){for(let p=this.head;p;p=p.next)yield p.data}_getString(p){let b="",c=this.head,m=0;do{const l=c.data;if(p>l.length)b+=l,p-=l.length;else{p===l.length?(b+=l,++m,c.next?this.head=c.next:this.head=this.tail=null):(b+=r(l,0,p),this.head=c,c.data=r(l,p));break}++m}while((c=c.next)!==null);return this.length-=m,b}_getBuffer(p){const b=u.allocUnsafe(p),c=p;let m=this.head,l=0;do{const d=m.data;if(p>d.length)s(b,d,c-p),p-=d.length;else{p===d.length?(s(b,d,c-p),++l,m.next?this.head=m.next:this.head=this.tail=null):(s(b,new i(d.buffer,d.byteOffset,p),c-p),this.head=m,m.data=d.slice(p));break}++l}while((m=m.next)!==null);return this.length-=l,b}[Symbol.for("nodejs.util.inspect.custom")](p,b){return x(this,{...b,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:r,NumberIsInteger:a}=requirePrimordials(),{validateInteger:s}=requireValidators(),{ERR_INVALID_ARG_VALUE:i}=requireErrors().codes;let u=16*1024,x=16;function h(m,l,d){return m.highWaterMark!=null?m.highWaterMark:l?m[d]:null}function p(m){return m?x:u}function b(m,l){s(l,"value",0),m?x=l:u=l}function c(m,l,d,f){const S=h(l,f,d);if(S!=null){if(!a(S)||S<0){const y=f?`options.${d}`:"options.highWaterMark";throw new i(y,S)}return r(S)}return p(m.objectMode)}return state={getHighWaterMark:c,getDefaultHighWaterMark:p,setDefaultHighWaterMark:b},state}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(r,a){var s=requireBuffer(),i=s.Buffer;function u(h,p){for(var b in h)p[b]=h[b]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=s:(u(s,a),a.Buffer=x);function x(h,p,b){return i(h,p,b)}x.prototype=Object.create(i.prototype),u(i,x),x.from=function(h,p,b){if(typeof h=="number")throw new TypeError("Argument must not be a number");return i(h,p,b)},x.alloc=function(h,p,b){if(typeof h!="number")throw new TypeError("Argument must be a number");var c=i(h);return p!==void 0?typeof b=="string"?c.fill(p,b):c.fill(p):c.fill(0),c},x.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return i(h)},x.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(h)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var r=requireSafeBuffer().Buffer,a=r.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(g){if(!g)return"utf8";for(var w;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(w)return;g=(""+g).toLowerCase(),w=!0}}function i(g){var w=s(g);if(typeof w!="string"&&(r.isEncoding===a||!a(g)))throw new Error("Unknown encoding: "+g);return w||g}string_decoder.StringDecoder=u;function u(g){this.encoding=i(g);var w;switch(this.encoding){case"utf16le":this.text=l,this.end=d,w=4;break;case"utf8":this.fillLast=b,w=4;break;case"base64":this.text=f,this.end=S,w=3;break;default:this.write=y,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(w)}u.prototype.write=function(g){if(g.length===0)return"";var w,T;if(this.lastNeed){if(w=this.fillLast(g),w===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<g.length?w?w+this.text(g,T):this.text(g,T):w||""},u.prototype.end=m,u.prototype.text=c,u.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function x(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function h(g,w,T){var _=w.length-1;if(_<T)return 0;var A=x(w[_]);return A>=0?(A>0&&(g.lastNeed=A-1),A):--_<T||A===-2?0:(A=x(w[_]),A>=0?(A>0&&(g.lastNeed=A-2),A):--_<T||A===-2?0:(A=x(w[_]),A>=0?(A>0&&(A===2?A=0:g.lastNeed=A-3),A):0))}function p(g,w,T){if((w[0]&192)!==128)return g.lastNeed=0,"";if(g.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return g.lastNeed=1,"";if(g.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return g.lastNeed=2,""}}function b(g){var w=this.lastTotal-this.lastNeed,T=p(this,g);if(T!==void 0)return T;if(this.lastNeed<=g.length)return g.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,w,0,g.length),this.lastNeed-=g.length}function c(g,w){var T=h(this,g,w);if(!this.lastNeed)return g.toString("utf8",w);this.lastTotal=T;var _=g.length-(T-this.lastNeed);return g.copy(this.lastChar,0,_),g.toString("utf8",w,_)}function m(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+"":w}function l(g,w){if((g.length-w)%2===0){var T=g.toString("utf16le",w);if(T){var _=T.charCodeAt(T.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",w,g.length-1)}function d(g){var w=g&&g.length?this.write(g):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,T)}return w}function f(g,w){var T=(g.length-w)%3;return T===0?g.toString("base64",w):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",w,g.length-T))}function S(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function y(g){return g.toString(this.encoding)}function E(g){return g&&g.length?this.write(g):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const r=requireBrowser$1(),{PromisePrototypeThen:a,SymbolAsyncIterator:s,SymbolIterator:i}=requirePrimordials(),{Buffer:u}=requireBuffer(),{ERR_INVALID_ARG_TYPE:x,ERR_STREAM_NULL_VALUES:h}=requireErrors().codes;function p(b,c,m){let l;if(typeof c=="string"||c instanceof u)return new b({objectMode:!0,...m,read(){this.push(c),this.push(null)}});let d;if(c&&c[s])d=!0,l=c[s]();else if(c&&c[i])d=!1,l=c[i]();else throw new x("iterable",["Iterable"],c);const f=new b({objectMode:!0,highWaterMark:1,...m});let S=!1;f._read=function(){S||(S=!0,E())},f._destroy=function(g,w){a(y(g),()=>r.nextTick(w,g),T=>r.nextTick(w,T||g))};async function y(g){const w=g!=null,T=typeof l.throw=="function";if(w&&T){const{value:_,done:A}=await l.throw(g);if(await _,A)return}if(typeof l.return=="function"){const{value:_}=await l.return();await _}}async function E(){for(;;){try{const{value:g,done:w}=d?await l.next():l.next();if(w)f.push(null);else{const T=g&&typeof g.then=="function"?await g:g;if(T===null)throw S=!1,new h;if(f.push(T))continue;S=!1}}catch(g){f.destroy(g)}break}}return f}return from_1=p,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const r=requireBrowser$1(),{ArrayPrototypeIndexOf:a,NumberIsInteger:s,NumberIsNaN:i,NumberParseInt:u,ObjectDefineProperties:x,ObjectKeys:h,ObjectSetPrototypeOf:p,Promise:b,SafeSet:c,SymbolAsyncDispose:m,SymbolAsyncIterator:l,Symbol:d}=requirePrimordials();readable=ye,ye.ReadableState=Te;const{EventEmitter:f}=requireEvents(),{Stream:S,prependListener:y}=requireLegacy(),{Buffer:E}=requireBuffer(),{addAbortSignal:g}=requireAddAbortSignal(),w=requireEndOfStream();let T=requireUtil().debuglog("stream",B=>{T=B});const _=requireBuffer_list(),A=requireDestroy(),{getHighWaterMark:I,getDefaultHighWaterMark:k}=requireState(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:Y,ERR_METHOD_NOT_IMPLEMENTED:z,ERR_OUT_OF_RANGE:W,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$},AbortError:ge}=requireErrors(),{validateObject:F}=requireValidators(),le=d("kPaused"),{StringDecoder:me}=requireString_decoder(),H=requireFrom();p(ye.prototype,S.prototype),p(ye,S);const pe=()=>{},{errorOrDestroy:L}=A,D=1,K=2,ae=4,oe=8,ue=16,we=32,xe=64,se=128,Z=256,be=512,_e=1024,te=2048,q=4096,Q=8192,ce=16384,Ee=32768,je=65536,Ce=1<<17,ee=1<<18;function Se(B){return{enumerable:!1,get(){return(this.state&B)!==0},set(O){O?this.state|=B:this.state&=~B}}}x(Te.prototype,{objectMode:Se(D),ended:Se(K),endEmitted:Se(ae),reading:Se(oe),constructed:Se(ue),sync:Se(we),needReadable:Se(xe),emittedReadable:Se(se),readableListening:Se(Z),resumeScheduled:Se(be),errorEmitted:Se(_e),emitClose:Se(te),autoDestroy:Se(q),destroyed:Se(Q),closed:Se(ce),closeEmitted:Se(Ee),multiAwaitDrain:Se(je),readingMore:Se(Ce),dataEmitted:Se(ee)});function Te(B,O,Re){typeof Re!="boolean"&&(Re=O instanceof requireDuplex()),this.state=te|q|ue|we,B&&B.objectMode&&(this.state|=D),Re&&B&&B.readableObjectMode&&(this.state|=D),this.highWaterMark=B?I(this,B,"readableHighWaterMark",Re):k(!1),this.buffer=new _,this.length=0,this.pipes=[],this.flowing=null,this[le]=null,B&&B.emitClose===!1&&(this.state&=~te),B&&B.autoDestroy===!1&&(this.state&=~q),this.errored=null,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,B&&B.encoding&&(this.decoder=new me(B.encoding),this.encoding=B.encoding)}function ye(B){if(!(this instanceof ye))return new ye(B);const O=this instanceof requireDuplex();this._readableState=new Te(B,this,O),B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&!O&&g(B.signal,this)),S.call(this,B),A.construct(this,()=>{this._readableState.needReadable&&ne(this,this._readableState)})}ye.prototype.destroy=A.destroy,ye.prototype._undestroy=A.undestroy,ye.prototype._destroy=function(B,O){O(B)},ye.prototype[f.captureRejectionSymbol]=function(B){this.destroy(B)},ye.prototype[m]=function(){let B;return this.destroyed||(B=this.readableEnded?null:new ge,this.destroy(B)),new b((O,Re)=>w(this,Ae=>Ae&&Ae!==B?Re(Ae):O(null)))},ye.prototype.push=function(B,O){return Ie(this,B,O,!1)},ye.prototype.unshift=function(B,O){return Ie(this,B,O,!0)};function Ie(B,O,Re,Ae){T("readableAddChunk",O);const J=B._readableState;let Me;if((J.state&D)===0&&(typeof O=="string"?(Re=Re||J.defaultEncoding,J.encoding!==Re&&(Ae&&J.encoding?O=E.from(O,Re).toString(J.encoding):(O=E.from(O,Re),Re=""))):O instanceof E?Re="":S._isUint8Array(O)?(O=S._uint8ArrayToBuffer(O),Re=""):O!=null&&(Me=new Y("chunk",["string","Buffer","Uint8Array"],O))),Me)L(B,Me);else if(O===null)J.state&=~oe,R(B,J);else if((J.state&D)!==0||O&&O.length>0)if(Ae)if((J.state&ae)!==0)L(B,new $);else{if(J.destroyed||J.errored)return!1;He(B,J,O,!0)}else if(J.ended)L(B,new G);else{if(J.destroyed||J.errored)return!1;J.state&=~oe,J.decoder&&!Re?(O=J.decoder.write(O),J.objectMode||O.length!==0?He(B,J,O,!1):ne(B,J)):He(B,J,O,!1)}else Ae||(J.state&=~oe,ne(B,J));return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function He(B,O,Re,Ae){O.flowing&&O.length===0&&!O.sync&&B.listenerCount("data")>0?((O.state&je)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,B.emit("data",Re)):(O.length+=O.objectMode?1:Re.length,Ae?O.buffer.unshift(Re):O.buffer.push(Re),(O.state&xe)!==0&&C(B)),ne(B,O)}ye.prototype.isPaused=function(){const B=this._readableState;return B[le]===!0||B.flowing===!1},ye.prototype.setEncoding=function(B){const O=new me(B);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const Re=this._readableState.buffer;let Ae="";for(const J of Re)Ae+=O.write(J);return Re.clear(),Ae!==""&&Re.push(Ae),this._readableState.length=Ae.length,this};const Ke=1073741824;function Je(B){if(B>Ke)throw new W("size","<= 1GiB",B);return B--,B|=B>>>1,B|=B>>>2,B|=B>>>4,B|=B>>>8,B|=B>>>16,B++,B}function M(B,O){return B<=0||O.length===0&&O.ended?0:(O.state&D)!==0?1:i(B)?O.flowing&&O.length?O.buffer.first().length:O.length:B<=O.length?B:O.ended?O.length:0}ye.prototype.read=function(B){T("read",B),B===void 0?B=NaN:s(B)||(B=u(B,10));const O=this._readableState,Re=B;if(B>O.highWaterMark&&(O.highWaterMark=Je(B)),B!==0&&(O.state&=~se),B===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return T("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?bt(this):C(this),null;if(B=M(B,O),B===0&&O.ended)return O.length===0&&bt(this),null;let Ae=(O.state&xe)!==0;if(T("need readable",Ae),(O.length===0||O.length-B<O.highWaterMark)&&(Ae=!0,T("length less than watermark",Ae)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)Ae=!1,T("reading, ended or constructing",Ae);else if(Ae){T("do read"),O.state|=oe|we,O.length===0&&(O.state|=xe);try{this._read(O.highWaterMark)}catch(Me){L(this,Me)}O.state&=~we,O.reading||(B=M(Re,O))}let J;return B>0?J=Ut(B,O):J=null,J===null?(O.needReadable=O.length<=O.highWaterMark,B=0):(O.length-=B,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),Re!==B&&O.ended&&bt(this)),J!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",J)),J};function R(B,O){if(T("onEofChunk"),!O.ended){if(O.decoder){const Re=O.decoder.end();Re&&Re.length&&(O.buffer.push(Re),O.length+=O.objectMode?1:Re.length)}O.ended=!0,O.sync?C(B):(O.needReadable=!1,O.emittedReadable=!0,U(B))}}function C(B){const O=B._readableState;T("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(T("emitReadable",O.flowing),O.emittedReadable=!0,r.nextTick(U,B))}function U(B){const O=B._readableState;T("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(B.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,Ze(B)}function ne(B,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,r.nextTick(fe,B,O))}function fe(B,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const Re=O.length;if(T("maybeReadMore read 0"),B.read(0),Re===O.length)break}O.readingMore=!1}ye.prototype._read=function(B){throw new z("_read()")},ye.prototype.pipe=function(B,O){const Re=this,Ae=this._readableState;Ae.pipes.length===1&&(Ae.multiAwaitDrain||(Ae.multiAwaitDrain=!0,Ae.awaitDrainWriters=new c(Ae.awaitDrainWriters?[Ae.awaitDrainWriters]:[]))),Ae.pipes.push(B),T("pipe count=%d opts=%j",Ae.pipes.length,O);const Me=(!O||O.end!==!1)&&B!==r.stdout&&B!==r.stderr?Fe:st;Ae.endEmitted?r.nextTick(Me):Re.once("end",Me),B.on("unpipe",ze);function ze(Dt,nt){T("onunpipe"),Dt===Re&&nt&&nt.hasUnpiped===!1&&(nt.hasUnpiped=!0,pt())}function Fe(){T("onend"),B.end()}let Ye,lt=!1;function pt(){T("cleanup"),B.removeListener("close",ut),B.removeListener("finish",Wt),Ye&&B.removeListener("drain",Ye),B.removeListener("error",It),B.removeListener("unpipe",ze),Re.removeListener("end",Fe),Re.removeListener("end",st),Re.removeListener("data",qt),lt=!0,Ye&&Ae.awaitDrainWriters&&(!B._writableState||B._writableState.needDrain)&&Ye()}function ir(){lt||(Ae.pipes.length===1&&Ae.pipes[0]===B?(T("false write response, pause",0),Ae.awaitDrainWriters=B,Ae.multiAwaitDrain=!1):Ae.pipes.length>1&&Ae.pipes.includes(B)&&(T("false write response, pause",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.add(B)),Re.pause()),Ye||(Ye=ke(Re,B),B.on("drain",Ye))}Re.on("data",qt);function qt(Dt){T("ondata");const nt=B.write(Dt);T("dest.write",nt),nt===!1&&ir()}function It(Dt){if(T("onerror",Dt),st(),B.removeListener("error",It),B.listenerCount("error")===0){const nt=B._writableState||B._readableState;nt&&!nt.errorEmitted?L(B,Dt):B.emit("error",Dt)}}y(B,"error",It);function ut(){B.removeListener("finish",Wt),st()}B.once("close",ut);function Wt(){T("onfinish"),B.removeListener("close",ut),st()}B.once("finish",Wt);function st(){T("unpipe"),Re.unpipe(B)}return B.emit("pipe",Re),B.writableNeedDrain===!0?ir():Ae.flowing||(T("pipe resume"),Re.resume()),B};function ke(B,O){return function(){const Ae=B._readableState;Ae.awaitDrainWriters===O?(T("pipeOnDrain",1),Ae.awaitDrainWriters=null):Ae.multiAwaitDrain&&(T("pipeOnDrain",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.delete(O)),(!Ae.awaitDrainWriters||Ae.awaitDrainWriters.size===0)&&B.listenerCount("data")&&B.resume()}}ye.prototype.unpipe=function(B){const O=this._readableState,Re={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!B){const J=O.pipes;O.pipes=[],this.pause();for(let Me=0;Me<J.length;Me++)J[Me].emit("unpipe",this,{hasUnpiped:!1});return this}const Ae=a(O.pipes,B);return Ae===-1?this:(O.pipes.splice(Ae,1),O.pipes.length===0&&this.pause(),B.emit("unpipe",this,Re),this)},ye.prototype.on=function(B,O){const Re=S.prototype.on.call(this,B,O),Ae=this._readableState;return B==="data"?(Ae.readableListening=this.listenerCount("readable")>0,Ae.flowing!==!1&&this.resume()):B==="readable"&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,T("on readable",Ae.length,Ae.reading),Ae.length?C(this):Ae.reading||r.nextTick(tt,this)),Re},ye.prototype.addListener=ye.prototype.on,ye.prototype.removeListener=function(B,O){const Re=S.prototype.removeListener.call(this,B,O);return B==="readable"&&r.nextTick(Ve,this),Re},ye.prototype.off=ye.prototype.removeListener,ye.prototype.removeAllListeners=function(B){const O=S.prototype.removeAllListeners.apply(this,arguments);return(B==="readable"||B===void 0)&&r.nextTick(Ve,this),O};function Ve(B){const O=B._readableState;O.readableListening=B.listenerCount("readable")>0,O.resumeScheduled&&O[le]===!1?O.flowing=!0:B.listenerCount("data")>0?B.resume():O.readableListening||(O.flowing=null)}function tt(B){T("readable nexttick read 0"),B.read(0)}ye.prototype.resume=function(){const B=this._readableState;return B.flowing||(T("resume"),B.flowing=!B.readableListening,et(this,B)),B[le]=!1,this};function et(B,O){O.resumeScheduled||(O.resumeScheduled=!0,r.nextTick(rt,B,O))}function rt(B,O){T("resume",O.reading),O.reading||B.read(0),O.resumeScheduled=!1,B.emit("resume"),Ze(B),O.flowing&&!O.reading&&B.read(0)}ye.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function Ze(B){const O=B._readableState;for(T("flow",O.flowing);O.flowing&&B.read()!==null;);}ye.prototype.wrap=function(B){let O=!1;B.on("data",Ae=>{!this.push(Ae)&&B.pause&&(O=!0,B.pause())}),B.on("end",()=>{this.push(null)}),B.on("error",Ae=>{L(this,Ae)}),B.on("close",()=>{this.destroy()}),B.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&B.resume&&(O=!1,B.resume())};const Re=h(B);for(let Ae=1;Ae<Re.length;Ae++){const J=Re[Ae];this[J]===void 0&&typeof B[J]=="function"&&(this[J]=B[J].bind(B))}return this},ye.prototype[l]=function(){return Mt(this)},ye.prototype.iterator=function(B){return B!==void 0&&F(B,"options"),Mt(this,B)};function Mt(B,O){typeof B.read!="function"&&(B=ye.wrap(B,{objectMode:!0}));const Re=wt(B,O);return Re.stream=B,Re}async function*wt(B,O){let Re=pe;function Ae(ze){this===B?(Re(),Re=pe):Re=ze}B.on("readable",Ae);let J;const Me=w(B,{writable:!1},ze=>{J=ze?N(J,ze):null,Re(),Re=pe});try{for(;;){const ze=B.destroyed?null:B.read();if(ze!==null)yield ze;else{if(J)throw J;if(J===null)return;await new b(Ae)}}}catch(ze){throw J=N(J,ze),J}finally{(J||O?.destroyOnReturn!==!1)&&(J===void 0||B._readableState.autoDestroy)?A.destroyer(B,null):(B.off("readable",Ae),Me())}}x(ye.prototype,{readable:{__proto__:null,get(){const B=this._readableState;return!!B&&B.readable!==!1&&!B.destroyed&&!B.errorEmitted&&!B.endEmitted},set(B){this._readableState&&(this._readableState.readable=!!B)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(B){this._readableState&&(this._readableState.destroyed=B)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),x(Te.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(B){this[le]=!!B}}}),ye._fromList=Ut;function Ut(B,O){if(O.length===0)return null;let Re;return O.objectMode?Re=O.buffer.shift():!B||B>=O.length?(O.decoder?Re=O.buffer.join(""):O.buffer.length===1?Re=O.buffer.first():Re=O.buffer.concat(O.length),O.buffer.clear()):Re=O.buffer.consume(B,O.decoder),Re}function bt(B){const O=B._readableState;T("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,r.nextTick(nr,O,B))}function nr(B,O){if(T("endReadableNT",B.endEmitted,B.length),!B.errored&&!B.closeEmitted&&!B.endEmitted&&B.length===0){if(B.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)r.nextTick(Vt,O);else if(B.autoDestroy){const Re=O._writableState;(!Re||Re.autoDestroy&&(Re.finished||Re.writable===!1))&&O.destroy()}}}function Vt(B){B.writable&&!B.writableEnded&&!B.destroyed&&B.end()}ye.from=function(B,O){return H(ye,B,O)};let Ct;function Ne(){return Ct===void 0&&(Ct={}),Ct}return ye.fromWeb=function(B,O){return Ne().newStreamReadableFromReadableStream(B,O)},ye.toWeb=function(B,O){return Ne().newReadableStreamFromStreamReadable(B,O)},ye.wrap=function(B,O){var Re,Ae;return new ye({objectMode:(Re=(Ae=B.readableObjectMode)!==null&&Ae!==void 0?Ae:B.objectMode)!==null&&Re!==void 0?Re:!0,...O,destroy(J,Me){A.destroyer(B,J),Me(J)}}).wrap(B)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const r=requireBrowser$1(),{ArrayPrototypeSlice:a,Error:s,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:u,ObjectDefineProperties:x,ObjectSetPrototypeOf:h,StringPrototypeToLowerCase:p,Symbol:b,SymbolHasInstance:c}=requirePrimordials();writable=F,F.WritableState=$;const{EventEmitter:m}=requireEvents(),l=requireLegacy().Stream,{Buffer:d}=requireBuffer(),f=requireDestroy(),{addAbortSignal:S}=requireAddAbortSignal(),{getHighWaterMark:y,getDefaultHighWaterMark:E}=requireState(),{ERR_INVALID_ARG_TYPE:g,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:_,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:Y}=requireErrors().codes,{errorOrDestroy:z}=f;h(F.prototype,l.prototype),h(F,l);function W(){}const G=b("kOnFinished");function $(q,Q,ce){typeof ce!="boolean"&&(ce=Q instanceof requireDuplex()),this.objectMode=!!(q&&q.objectMode),ce&&(this.objectMode=this.objectMode||!!(q&&q.writableObjectMode)),this.highWaterMark=q?y(this,q,"writableHighWaterMark",ce):E(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ee=!!(q&&q.decodeStrings===!1);this.decodeStrings=!Ee,this.defaultEncoding=q&&q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=L.bind(void 0,Q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ge(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!q||q.emitClose!==!1,this.autoDestroy=!q||q.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function ge(q){q.buffered=[],q.bufferedIndex=0,q.allBuffers=!0,q.allNoop=!0}$.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},u($.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function F(q){const Q=this instanceof requireDuplex();if(!Q&&!i(F,this))return new F(q);this._writableState=new $(q,this,Q),q&&(typeof q.write=="function"&&(this._write=q.write),typeof q.writev=="function"&&(this._writev=q.writev),typeof q.destroy=="function"&&(this._destroy=q.destroy),typeof q.final=="function"&&(this._final=q.final),typeof q.construct=="function"&&(this._construct=q.construct),q.signal&&S(q.signal,this)),l.call(this,q),f.construct(this,()=>{const ce=this._writableState;ce.writing||oe(this,ce),se(this,ce)})}u(F,c,{__proto__:null,value:function(q){return i(this,q)?!0:this!==F?!1:q&&q._writableState instanceof $}}),F.prototype.pipe=function(){z(this,new _)};function le(q,Q,ce,Ee){const je=q._writableState;if(typeof ce=="function")Ee=ce,ce=je.defaultEncoding;else{if(!ce)ce=je.defaultEncoding;else if(ce!=="buffer"&&!d.isEncoding(ce))throw new Y(ce);typeof Ee!="function"&&(Ee=W)}if(Q===null)throw new k;if(!je.objectMode)if(typeof Q=="string")je.decodeStrings!==!1&&(Q=d.from(Q,ce),ce="buffer");else if(Q instanceof d)ce="buffer";else if(l._isUint8Array(Q))Q=l._uint8ArrayToBuffer(Q),ce="buffer";else throw new g("chunk",["string","Buffer","Uint8Array"],Q);let Ce;return je.ending?Ce=new N:je.destroyed&&(Ce=new A("write")),Ce?(r.nextTick(Ee,Ce),z(q,Ce,!0),Ce):(je.pendingcb++,me(q,je,Q,ce,Ee))}F.prototype.write=function(q,Q,ce){return le(this,q,Q,ce)===!0},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){const q=this._writableState;q.corked&&(q.corked--,q.writing||oe(this,q))},F.prototype.setDefaultEncoding=function(Q){if(typeof Q=="string"&&(Q=p(Q)),!d.isEncoding(Q))throw new Y(Q);return this._writableState.defaultEncoding=Q,this};function me(q,Q,ce,Ee,je){const Ce=Q.objectMode?1:ce.length;Q.length+=Ce;const ee=Q.length<Q.highWaterMark;return ee||(Q.needDrain=!0),Q.writing||Q.corked||Q.errored||!Q.constructed?(Q.buffered.push({chunk:ce,encoding:Ee,callback:je}),Q.allBuffers&&Ee!=="buffer"&&(Q.allBuffers=!1),Q.allNoop&&je!==W&&(Q.allNoop=!1)):(Q.writelen=Ce,Q.writecb=je,Q.writing=!0,Q.sync=!0,q._write(ce,Ee,Q.onwrite),Q.sync=!1),ee&&!Q.errored&&!Q.destroyed}function H(q,Q,ce,Ee,je,Ce,ee){Q.writelen=Ee,Q.writecb=ee,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new A("write")):ce?q._writev(je,Q.onwrite):q._write(je,Ce,Q.onwrite),Q.sync=!1}function pe(q,Q,ce,Ee){--Q.pendingcb,Ee(ce),ae(Q),z(q,ce)}function L(q,Q){const ce=q._writableState,Ee=ce.sync,je=ce.writecb;if(typeof je!="function"){z(q,new T);return}ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0,Q?(Q.stack,ce.errored||(ce.errored=Q),q._readableState&&!q._readableState.errored&&(q._readableState.errored=Q),Ee?r.nextTick(pe,q,ce,Q,je):pe(q,ce,Q,je)):(ce.buffered.length>ce.bufferedIndex&&oe(q,ce),Ee?ce.afterWriteTickInfo!==null&&ce.afterWriteTickInfo.cb===je?ce.afterWriteTickInfo.count++:(ce.afterWriteTickInfo={count:1,cb:je,stream:q,state:ce},r.nextTick(D,ce.afterWriteTickInfo)):K(q,ce,1,je))}function D({stream:q,state:Q,count:ce,cb:Ee}){return Q.afterWriteTickInfo=null,K(q,Q,ce,Ee)}function K(q,Q,ce,Ee){for(!Q.ending&&!q.destroyed&&Q.length===0&&Q.needDrain&&(Q.needDrain=!1,q.emit("drain"));ce-- >0;)Q.pendingcb--,Ee();Q.destroyed&&ae(Q),se(q,Q)}function ae(q){if(q.writing)return;for(let je=q.bufferedIndex;je<q.buffered.length;++je){var Q;const{chunk:Ce,callback:ee}=q.buffered[je],Se=q.objectMode?1:Ce.length;q.length-=Se,ee((Q=q.errored)!==null&&Q!==void 0?Q:new A("write"))}const ce=q[G].splice(0);for(let je=0;je<ce.length;je++){var Ee;ce[je]((Ee=q.errored)!==null&&Ee!==void 0?Ee:new A("end"))}ge(q)}function oe(q,Q){if(Q.corked||Q.bufferProcessing||Q.destroyed||!Q.constructed)return;const{buffered:ce,bufferedIndex:Ee,objectMode:je}=Q,Ce=ce.length-Ee;if(!Ce)return;let ee=Ee;if(Q.bufferProcessing=!0,Ce>1&&q._writev){Q.pendingcb-=Ce-1;const Se=Q.allNoop?W:ye=>{for(let Ie=ee;Ie<ce.length;++Ie)ce[Ie].callback(ye)},Te=Q.allNoop&&ee===0?ce:a(ce,ee);Te.allBuffers=Q.allBuffers,H(q,Q,!0,Q.length,Te,"",Se),ge(Q)}else{do{const{chunk:Se,encoding:Te,callback:ye}=ce[ee];ce[ee++]=null;const Ie=je?1:Se.length;H(q,Q,!1,Ie,Se,Te,ye)}while(ee<ce.length&&!Q.writing);ee===ce.length?ge(Q):ee>256?(ce.splice(0,ee),Q.bufferedIndex=0):Q.bufferedIndex=ee}Q.bufferProcessing=!1}F.prototype._write=function(q,Q,ce){if(this._writev)this._writev([{chunk:q,encoding:Q}],ce);else throw new w("_write()")},F.prototype._writev=null,F.prototype.end=function(q,Q,ce){const Ee=this._writableState;typeof q=="function"?(ce=q,q=null,Q=null):typeof Q=="function"&&(ce=Q,Q=null);let je;if(q!=null){const Ce=le(this,q,Q);Ce instanceof s&&(je=Ce)}return Ee.corked&&(Ee.corked=1,this.uncork()),je||(!Ee.errored&&!Ee.ending?(Ee.ending=!0,se(this,Ee,!0),Ee.ended=!0):Ee.finished?je=new I("end"):Ee.destroyed&&(je=new A("end"))),typeof ce=="function"&&(je||Ee.finished?r.nextTick(ce,je):Ee[G].push(ce)),this};function ue(q){return q.ending&&!q.destroyed&&q.constructed&&q.length===0&&!q.errored&&q.buffered.length===0&&!q.finished&&!q.writing&&!q.errorEmitted&&!q.closeEmitted}function we(q,Q){let ce=!1;function Ee(je){if(ce){z(q,je??T());return}if(ce=!0,Q.pendingcb--,je){const Ce=Q[G].splice(0);for(let ee=0;ee<Ce.length;ee++)Ce[ee](je);z(q,je,Q.sync)}else ue(Q)&&(Q.prefinished=!0,q.emit("prefinish"),Q.pendingcb++,r.nextTick(Z,q,Q))}Q.sync=!0,Q.pendingcb++;try{q._final(Ee)}catch(je){Ee(je)}Q.sync=!1}function xe(q,Q){!Q.prefinished&&!Q.finalCalled&&(typeof q._final=="function"&&!Q.destroyed?(Q.finalCalled=!0,we(q,Q)):(Q.prefinished=!0,q.emit("prefinish")))}function se(q,Q,ce){ue(Q)&&(xe(q,Q),Q.pendingcb===0&&(ce?(Q.pendingcb++,r.nextTick((Ee,je)=>{ue(je)?Z(Ee,je):je.pendingcb--},q,Q)):ue(Q)&&(Q.pendingcb++,Z(q,Q))))}function Z(q,Q){Q.pendingcb--,Q.finished=!0;const ce=Q[G].splice(0);for(let Ee=0;Ee<ce.length;Ee++)ce[Ee]();if(q.emit("finish"),Q.autoDestroy){const Ee=q._readableState;(!Ee||Ee.autoDestroy&&(Ee.endEmitted||Ee.readable===!1))&&q.destroy()}}x(F.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(q){this._writableState&&(this._writableState.destroyed=q)}},writable:{__proto__:null,get(){const q=this._writableState;return!!q&&q.writable!==!1&&!q.destroyed&&!q.errored&&!q.ending&&!q.ended},set(q){this._writableState&&(this._writableState.writable=!!q)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const q=this._writableState;return q?!q.destroyed&&!q.ending&&q.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const be=f.destroy;F.prototype.destroy=function(q,Q){const ce=this._writableState;return!ce.destroyed&&(ce.bufferedIndex<ce.buffered.length||ce[G].length)&&r.nextTick(ae,ce),be.call(this,q,Q),this},F.prototype._undestroy=f.undestroy,F.prototype._destroy=function(q,Q){Q(q)},F.prototype[m.captureRejectionSymbol]=function(q){this.destroy(q)};let _e;function te(){return _e===void 0&&(_e={}),_e}return F.fromWeb=function(q,Q){return te().newStreamWritableFromWritableStream(q,Q)},F.toWeb=function(q){return te().newWritableStreamFromStreamWritable(q)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const r=requireBrowser$1(),a=requireBuffer(),{isReadable:s,isWritable:i,isIterable:u,isNodeStream:x,isReadableNodeStream:h,isWritableNodeStream:p,isDuplexNodeStream:b,isReadableStream:c,isWritableStream:m}=requireUtils(),l=requireEndOfStream(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:S}}=requireErrors(),{destroyer:y}=requireDestroy(),E=requireDuplex(),g=requireReadable(),w=requireWritable(),{createDeferredPromise:T}=requireUtil(),_=requireFrom(),A=globalThis.Blob||a.Blob,I=typeof A<"u"?function($){return $ instanceof A}:function($){return!1},k=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:N}=requirePrimordials();class Y extends E{constructor($){super($),$?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),$?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function G($,ge){if(b($))return $;if(h($))return W({readable:$});if(p($))return W({writable:$});if(x($))return W({writable:!1,readable:!1});if(c($))return W({readable:g.fromWeb($)});if(m($))return W({writable:w.fromWeb($)});if(typeof $=="function"){const{value:le,write:me,final:H,destroy:pe}=z($);if(u(le))return _(Y,le,{objectMode:!0,write:me,final:H,destroy:pe});const L=le?.then;if(typeof L=="function"){let D;const K=N(L,le,ae=>{if(ae!=null)throw new S("nully","body",ae)},ae=>{y(D,ae)});return D=new Y({objectMode:!0,readable:!1,write:me,final(ae){H(async()=>{try{await K,r.nextTick(ae,null)}catch(oe){r.nextTick(ae,oe)}})},destroy:pe})}throw new S("Iterable, AsyncIterable or AsyncFunction",ge,le)}if(I($))return G($.arrayBuffer());if(u($))return _(Y,$,{objectMode:!0,writable:!1});if(c($?.readable)&&m($?.writable))return Y.fromWeb($);if(typeof $?.writable=="object"||typeof $?.readable=="object"){const le=$!=null&&$.readable?h($?.readable)?$?.readable:G($.readable):void 0,me=$!=null&&$.writable?p($?.writable)?$?.writable:G($.writable):void 0;return W({readable:le,writable:me})}const F=$?.then;if(typeof F=="function"){let le;return N(F,$,me=>{me!=null&&le.push(me),le.push(null)},me=>{y(le,me)}),le=new Y({objectMode:!0,writable:!1,read(){}})}throw new f(ge,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],$)};function z(G){let{promise:$,resolve:ge}=T();const F=new k,le=F.signal;return{value:G((async function*(){for(;;){const H=$;$=null;const{chunk:pe,done:L,cb:D}=await H;if(r.nextTick(D),L)return;if(le.aborted)throw new d(void 0,{cause:le.reason});({promise:$,resolve:ge}=T()),yield pe}})(),{signal:le}),write(H,pe,L){const D=ge;ge=null,D({chunk:H,done:!1,cb:L})},final(H){const pe=ge;ge=null,pe({done:!0,cb:H})},destroy(H,pe){F.abort(),pe(H)}}}function W(G){const $=G.readable&&typeof G.readable.read!="function"?g.wrap(G.readable):G.readable,ge=G.writable;let F=!!s($),le=!!i(ge),me,H,pe,L,D;function K(ae){const oe=L;L=null,oe?oe(ae):ae&&D.destroy(ae)}return D=new Y({readableObjectMode:!!($!=null&&$.readableObjectMode),writableObjectMode:!!(ge!=null&&ge.writableObjectMode),readable:F,writable:le}),le&&(l(ge,ae=>{le=!1,ae&&y($,ae),K(ae)}),D._write=function(ae,oe,ue){ge.write(ae,oe)?ue():me=ue},D._final=function(ae){ge.end(),H=ae},ge.on("drain",function(){if(me){const ae=me;me=null,ae()}}),ge.on("finish",function(){if(H){const ae=H;H=null,ae()}})),F&&(l($,ae=>{F=!1,ae&&y($,ae),K(ae)}),$.on("readable",function(){if(pe){const ae=pe;pe=null,ae()}}),$.on("end",function(){D.push(null)}),D._read=function(){for(;;){const ae=$.read();if(ae===null){pe=D._read;return}if(!D.push(ae))return}}),D._destroy=function(ae,oe){!ae&&L!==null&&(ae=new d),pe=null,me=null,H=null,L===null?oe(ae):(L=oe,y(ge,ae),y($,ae))},D}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:s,ObjectSetPrototypeOf:i}=requirePrimordials();duplex=h;const u=requireReadable(),x=requireWritable();i(h.prototype,u.prototype),i(h,u);{const m=s(x.prototype);for(let l=0;l<m.length;l++){const d=m[l];h.prototype[d]||(h.prototype[d]=x.prototype[d])}}function h(m){if(!(this instanceof h))return new h(m);u.call(this,m),x.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(h.prototype,{writable:{__proto__:null,...a(x.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(x.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(x.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(x.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(x.prototype,"writableLength")},writableFinished:{__proto__:null,...a(x.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(x.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(x.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(x.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});let p;function b(){return p===void 0&&(p={}),p}h.fromWeb=function(m,l){return b().newStreamDuplexFromReadableWritablePair(m,l)},h.toWeb=function(m){return b().newReadableWritablePairFromDuplex(m)};let c;return h.from=function(m){return c||(c=requireDuplexify()),c(m,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:r,Symbol:a}=requirePrimordials();transform=h;const{ERR_METHOD_NOT_IMPLEMENTED:s}=requireErrors().codes,i=requireDuplex(),{getHighWaterMark:u}=requireState();r(h.prototype,i.prototype),r(h,i);const x=a("kCallback");function h(c){if(!(this instanceof h))return new h(c);const m=c?u(this,c,"readableHighWaterMark",!0):null;m===0&&(c={...c,highWaterMark:null,readableHighWaterMark:m,writableHighWaterMark:c.writableHighWaterMark||0}),i.call(this,c),this._readableState.sync=!1,this[x]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",b)}function p(c){typeof this._flush=="function"&&!this.destroyed?this._flush((m,l)=>{if(m){c?c(m):this.destroy(m);return}l!=null&&this.push(l),this.push(null),c&&c()}):(this.push(null),c&&c())}function b(){this._final!==p&&p.call(this)}return h.prototype._final=p,h.prototype._transform=function(c,m,l){throw new s("_transform()")},h.prototype._write=function(c,m,l){const d=this._readableState,f=this._writableState,S=d.length;this._transform(c,m,(y,E)=>{if(y){l(y);return}E!=null&&this.push(E),f.ended||S===d.length||d.length<d.highWaterMark?l():this[x]=l})},h.prototype._read=function(){if(this[x]){const c=this[x];this[x]=null,c()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:r}=requirePrimordials();passthrough=s;const a=requireTransform();r(s.prototype,a.prototype),r(s,a);function s(i){if(!(this instanceof s))return new s(i);a.call(this,i)}return s.prototype._transform=function(i,u,x){x(null,i)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const r=requireBrowser$1(),{ArrayIsArray:a,Promise:s,SymbolAsyncIterator:i,SymbolDispose:u}=requirePrimordials(),x=requireEndOfStream(),{once:h}=requireUtil(),p=requireDestroy(),b=requireDuplex(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:l,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:f,ERR_STREAM_PREMATURE_CLOSE:S},AbortError:y}=requireErrors(),{validateFunction:E,validateAbortSignal:g}=requireValidators(),{isIterable:w,isReadable:T,isReadableNodeStream:_,isNodeStream:A,isTransformStream:I,isWebStream:k,isReadableStream:N,isReadableFinished:Y}=requireUtils(),z=globalThis.AbortController||requireBrowser$2().AbortController;let W,G,$;function ge(ae,oe,ue){let we=!1;ae.on("close",()=>{we=!0});const xe=x(ae,{readable:oe,writable:ue},se=>{we=!se});return{destroy:se=>{we||(we=!0,p.destroyer(ae,se||new f("pipe")))},cleanup:xe}}function F(ae){return E(ae[ae.length-1],"streams[stream.length - 1]"),ae.pop()}function le(ae){if(w(ae))return ae;if(_(ae))return me(ae);throw new m("val",["Readable","Iterable","AsyncIterable"],ae)}async function*me(ae){G||(G=requireReadable()),yield*G.prototype[i].call(ae)}async function H(ae,oe,ue,{end:we}){let xe,se=null;const Z=te=>{if(te&&(xe=te),se){const q=se;se=null,q()}},be=()=>new s((te,q)=>{xe?q(xe):se=()=>{xe?q(xe):te()}});oe.on("drain",Z);const _e=x(oe,{readable:!1},Z);try{oe.writableNeedDrain&&await be();for await(const te of ae)oe.write(te)||await be();we&&(oe.end(),await be()),ue()}catch(te){ue(xe!==te?c(xe,te):te)}finally{_e(),oe.off("drain",Z)}}async function pe(ae,oe,ue,{end:we}){I(oe)&&(oe=oe.writable);const xe=oe.getWriter();try{for await(const se of ae)await xe.ready,xe.write(se).catch(()=>{});await xe.ready,we&&await xe.close(),ue()}catch(se){try{await xe.abort(se),ue(se)}catch(Z){ue(Z)}}}function L(...ae){return D(ae,h(F(ae)))}function D(ae,oe,ue){if(ae.length===1&&a(ae[0])&&(ae=ae[0]),ae.length<2)throw new d("streams");const we=new z,xe=we.signal,se=ue?.signal,Z=[];g(se,"options.signal");function be(){je(new y)}$=$||requireUtil().addAbortListener;let _e;se&&(_e=$(se,be));let te,q;const Q=[];let ce=0;function Ee(ye){je(ye,--ce===0)}function je(ye,Ie){var He;if(ye&&(!te||te.code==="ERR_STREAM_PREMATURE_CLOSE")&&(te=ye),!(!te&&!Ie)){for(;Q.length;)Q.shift()(te);(He=_e)===null||He===void 0||He[u](),we.abort(),Ie&&(te||Z.forEach(Ke=>Ke()),r.nextTick(oe,te,q))}}let Ce;for(let ye=0;ye<ae.length;ye++){const Ie=ae[ye],He=ye<ae.length-1,Ke=ye>0,Je=He||ue?.end!==!1,M=ye===ae.length-1;if(A(Ie)){let R=function(C){C&&C.name!=="AbortError"&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ee(C)};var Te=R;if(Je){const{destroy:C,cleanup:U}=ge(Ie,He,Ke);Q.push(C),T(Ie)&&M&&Z.push(U)}Ie.on("error",R),T(Ie)&&M&&Z.push(()=>{Ie.removeListener("error",R)})}if(ye===0)if(typeof Ie=="function"){if(Ce=Ie({signal:xe}),!w(Ce))throw new l("Iterable, AsyncIterable or Stream","source",Ce)}else w(Ie)||_(Ie)||I(Ie)?Ce=Ie:Ce=b.from(Ie);else if(typeof Ie=="function"){if(I(Ce)){var ee;Ce=le((ee=Ce)===null||ee===void 0?void 0:ee.readable)}else Ce=le(Ce);if(Ce=Ie(Ce,{signal:xe}),He){if(!w(Ce,!0))throw new l("AsyncIterable",`transform[${ye-1}]`,Ce)}else{var Se;W||(W=requirePassthrough());const R=new W({objectMode:!0}),C=(Se=Ce)===null||Se===void 0?void 0:Se.then;if(typeof C=="function")ce++,C.call(Ce,fe=>{q=fe,fe!=null&&R.write(fe),Je&&R.end(),r.nextTick(Ee)},fe=>{R.destroy(fe),r.nextTick(Ee,fe)});else if(w(Ce,!0))ce++,H(Ce,R,Ee,{end:Je});else if(N(Ce)||I(Ce)){const fe=Ce.readable||Ce;ce++,H(fe,R,Ee,{end:Je})}else throw new l("AsyncIterable or Promise","destination",Ce);Ce=R;const{destroy:U,cleanup:ne}=ge(Ce,!1,!0);Q.push(U),M&&Z.push(ne)}}else if(A(Ie)){if(_(Ce)){ce+=2;const R=K(Ce,Ie,Ee,{end:Je});T(Ie)&&M&&Z.push(R)}else if(I(Ce)||N(Ce)){const R=Ce.readable||Ce;ce++,H(R,Ie,Ee,{end:Je})}else if(w(Ce))ce++,H(Ce,Ie,Ee,{end:Je});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ce);Ce=Ie}else if(k(Ie)){if(_(Ce))ce++,pe(le(Ce),Ie,Ee,{end:Je});else if(N(Ce)||w(Ce))ce++,pe(Ce,Ie,Ee,{end:Je});else if(I(Ce))ce++,pe(Ce.readable,Ie,Ee,{end:Je});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ce);Ce=Ie}else Ce=b.from(Ie)}return(xe!=null&&xe.aborted||se!=null&&se.aborted)&&r.nextTick(be),Ce}function K(ae,oe,ue,{end:we}){let xe=!1;if(oe.on("close",()=>{xe||ue(new S)}),ae.pipe(oe,{end:!1}),we){let Z=function(){xe=!0,oe.end()};var se=Z;Y(ae)?r.nextTick(Z):ae.once("end",Z)}else ue();return x(ae,{readable:!0,writable:!1},Z=>{const be=ae._readableState;Z&&Z.code==="ERR_STREAM_PREMATURE_CLOSE"&&be&&be.ended&&!be.errored&&!be.errorEmitted?ae.once("end",ue).once("error",ue):ue(Z)}),x(oe,{readable:!1,writable:!0},ue)}return pipeline_1={pipelineImpl:D,pipeline:L},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:r}=requirePipeline(),a=requireDuplex(),{destroyer:s}=requireDestroy(),{isNodeStream:i,isReadable:u,isWritable:x,isWebStream:h,isTransformStream:p,isWritableStream:b,isReadableStream:c}=requireUtils(),{AbortError:m,codes:{ERR_INVALID_ARG_VALUE:l,ERR_MISSING_ARGS:d}}=requireErrors(),f=requireEndOfStream();return compose=function(...y){if(y.length===0)throw new d("streams");if(y.length===1)return a.from(y[0]);const E=[...y];if(typeof y[0]=="function"&&(y[0]=a.from(y[0])),typeof y[y.length-1]=="function"){const W=y.length-1;y[W]=a.from(y[W])}for(let W=0;W<y.length;++W)if(!(!i(y[W])&&!h(y[W]))){if(W<y.length-1&&!(u(y[W])||c(y[W])||p(y[W])))throw new l(`streams[${W}]`,E[W],"must be readable");if(W>0&&!(x(y[W])||b(y[W])||p(y[W])))throw new l(`streams[${W}]`,E[W],"must be writable")}let g,w,T,_,A;function I(W){const G=_;_=null,G?G(W):W?A.destroy(W):!z&&!Y&&A.destroy()}const k=y[0],N=r(y,I),Y=!!(x(k)||b(k)||p(k)),z=!!(u(N)||c(N)||p(N));if(A=new a({writableObjectMode:!!(k!=null&&k.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:Y,readable:z}),Y){if(i(k))A._write=function(G,$,ge){k.write(G,$)?ge():g=ge},A._final=function(G){k.end(),w=G},k.on("drain",function(){if(g){const G=g;g=null,G()}});else if(h(k)){const $=(p(k)?k.writable:k).getWriter();A._write=async function(ge,F,le){try{await $.ready,$.write(ge).catch(()=>{}),le()}catch(me){le(me)}},A._final=async function(ge){try{await $.ready,$.close().catch(()=>{}),w=ge}catch(F){ge(F)}}}const W=p(N)?N.readable:N;f(W,()=>{if(w){const G=w;w=null,G()}})}if(z){if(i(N))N.on("readable",function(){if(T){const W=T;T=null,W()}}),N.on("end",function(){A.push(null)}),A._read=function(){for(;;){const W=N.read();if(W===null){T=A._read;return}if(!A.push(W))return}};else if(h(N)){const G=(p(N)?N.readable:N).getReader();A._read=async function(){for(;;)try{const{value:$,done:ge}=await G.read();if(!A.push($))return;if(ge){A.push(null);return}}catch{return}}}}return A._destroy=function(W,G){!W&&_!==null&&(W=new m),T=null,g=null,w=null,_===null?G(W):(_=G,i(N)&&s(N,W))},A},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const r=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:u},AbortError:x}=requireErrors(),{validateAbortSignal:h,validateInteger:p,validateObject:b}=requireValidators(),c=requirePrimordials().Symbol("kWeak"),m=requirePrimordials().Symbol("kResistStopPropagation"),{finished:l}=requireEndOfStream(),d=requireCompose(),{addAbortSignalNoValidate:f}=requireAddAbortSignal(),{isWritable:S,isNodeStream:y}=requireUtils(),{deprecate:E}=requireUtil(),{ArrayPrototypePush:g,Boolean:w,MathFloor:T,Number:_,NumberIsNaN:A,Promise:I,PromiseReject:k,PromiseResolve:N,PromisePrototypeThen:Y,Symbol:z}=requirePrimordials(),W=z("kEmpty"),G=z("kEof");function $(se,Z){if(Z!=null&&b(Z,"options"),Z?.signal!=null&&h(Z.signal,"options.signal"),y(se)&&!S(se))throw new a("stream",se,"must be writable");const be=d(this,se);return Z!=null&&Z.signal&&f(Z.signal,be),be}function ge(se,Z){if(typeof se!="function")throw new s("fn",["Function","AsyncFunction"],se);Z!=null&&b(Z,"options"),Z?.signal!=null&&h(Z.signal,"options.signal");let be=1;Z?.concurrency!=null&&(be=T(Z.concurrency));let _e=be-1;return Z?.highWaterMark!=null&&(_e=T(Z.highWaterMark)),p(be,"options.concurrency",1),p(_e,"options.highWaterMark",0),_e+=be,async function*(){const q=requireUtil().AbortSignalAny([Z?.signal].filter(w)),Q=this,ce=[],Ee={signal:q};let je,Ce,ee=!1,Se=0;function Te(){ee=!0,ye()}function ye(){Se-=1,Ie()}function Ie(){Ce&&!ee&&Se<be&&ce.length<_e&&(Ce(),Ce=null)}async function He(){try{for await(let Ke of Q){if(ee)return;if(q.aborted)throw new x;try{if(Ke=se(Ke,Ee),Ke===W)continue;Ke=N(Ke)}catch(Je){Ke=k(Je)}Se+=1,Y(Ke,ye,Te),ce.push(Ke),je&&(je(),je=null),!ee&&(ce.length>=_e||Se>=be)&&await new I(Je=>{Ce=Je})}ce.push(G)}catch(Ke){const Je=k(Ke);Y(Je,ye,Te),ce.push(Je)}finally{ee=!0,je&&(je(),je=null)}}He();try{for(;;){for(;ce.length>0;){const Ke=await ce[0];if(Ke===G)return;if(q.aborted)throw new x;Ke!==W&&(yield Ke),ce.shift(),Ie()}await new I(Ke=>{je=Ke})}}finally{ee=!0,Ce&&(Ce(),Ce=null)}}.call(this)}function F(se=void 0){return se!=null&&b(se,"options"),se?.signal!=null&&h(se.signal,"options.signal"),async function*(){let be=0;for await(const te of this){var _e;if(se!=null&&(_e=se.signal)!==null&&_e!==void 0&&_e.aborted)throw new x({cause:se.signal.reason});yield[be++,te]}}.call(this)}async function le(se,Z=void 0){for await(const be of L.call(this,se,Z))return!0;return!1}async function me(se,Z=void 0){if(typeof se!="function")throw new s("fn",["Function","AsyncFunction"],se);return!await le.call(this,async(...be)=>!await se(...be),Z)}async function H(se,Z){for await(const be of L.call(this,se,Z))return be}async function pe(se,Z){if(typeof se!="function")throw new s("fn",["Function","AsyncFunction"],se);async function be(_e,te){return await se(_e,te),W}for await(const _e of ge.call(this,be,Z));}function L(se,Z){if(typeof se!="function")throw new s("fn",["Function","AsyncFunction"],se);async function be(_e,te){return await se(_e,te)?_e:W}return ge.call(this,be,Z)}class D extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function K(se,Z,be){var _e;if(typeof se!="function")throw new s("reducer",["Function","AsyncFunction"],se);be!=null&&b(be,"options"),be?.signal!=null&&h(be.signal,"options.signal");let te=arguments.length>1;if(be!=null&&(_e=be.signal)!==null&&_e!==void 0&&_e.aborted){const je=new x(void 0,{cause:be.signal.reason});throw this.once("error",()=>{}),await l(this.destroy(je)),je}const q=new r,Q=q.signal;if(be!=null&&be.signal){const je={once:!0,[c]:this,[m]:!0};be.signal.addEventListener("abort",()=>q.abort(),je)}let ce=!1;try{for await(const je of this){var Ee;if(ce=!0,be!=null&&(Ee=be.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new x;te?Z=await se(Z,je,{signal:Q}):(Z=je,te=!0)}if(!ce&&!te)throw new D}finally{q.abort()}return Z}async function ae(se){se!=null&&b(se,"options"),se?.signal!=null&&h(se.signal,"options.signal");const Z=[];for await(const _e of this){var be;if(se!=null&&(be=se.signal)!==null&&be!==void 0&&be.aborted)throw new x(void 0,{cause:se.signal.reason});g(Z,_e)}return Z}function oe(se,Z){const be=ge.call(this,se,Z);return async function*(){for await(const te of be)yield*te}.call(this)}function ue(se){if(se=_(se),A(se))return 0;if(se<0)throw new u("number",">= 0",se);return se}function we(se,Z=void 0){return Z!=null&&b(Z,"options"),Z?.signal!=null&&h(Z.signal,"options.signal"),se=ue(se),async function*(){var _e;if(Z!=null&&(_e=Z.signal)!==null&&_e!==void 0&&_e.aborted)throw new x;for await(const q of this){var te;if(Z!=null&&(te=Z.signal)!==null&&te!==void 0&&te.aborted)throw new x;se--<=0&&(yield q)}}.call(this)}function xe(se,Z=void 0){return Z!=null&&b(Z,"options"),Z?.signal!=null&&h(Z.signal,"options.signal"),se=ue(se),async function*(){var _e;if(Z!=null&&(_e=Z.signal)!==null&&_e!==void 0&&_e.aborted)throw new x;for await(const q of this){var te;if(Z!=null&&(te=Z.signal)!==null&&te!==void 0&&te.aborted)throw new x;if(se-- >0&&(yield q),se<=0)return}}.call(this)}return operators.streamReturningOperators={asIndexedPairs:E(F,"readable.asIndexedPairs will be removed in a future version."),drop:we,filter:L,flatMap:oe,map:ge,take:xe,compose:$},operators.promiseReturningOperators={every:me,forEach:pe,reduce:K,toArray:ae,some:le,find:H},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:r,Promise:a}=requirePrimordials(),{isIterable:s,isNodeStream:i,isWebStream:u}=requireUtils(),{pipelineImpl:x}=requirePipeline(),{finished:h}=requireEndOfStream();requireStream();function p(...b){return new a((c,m)=>{let l,d;const f=b[b.length-1];if(f&&typeof f=="object"&&!i(f)&&!s(f)&&!u(f)){const S=r(b);l=S.signal,d=S.end}x(b,(S,y)=>{S?m(S):c(y)},{signal:l,end:d})})}return promises={finished:h,pipeline:p},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:r}=requireBuffer(),{ObjectDefineProperty:a,ObjectKeys:s,ReflectApply:i}=requirePrimordials(),{promisify:{custom:u}}=requireUtil(),{streamReturningOperators:x,promiseReturningOperators:h}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:p}}=requireErrors(),b=requireCompose(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:m}=requireState(),{pipeline:l}=requirePipeline(),{destroyer:d}=requireDestroy(),f=requireEndOfStream(),S=requirePromises(),y=requireUtils(),E=stream.exports=requireLegacy().Stream;E.isDestroyed=y.isDestroyed,E.isDisturbed=y.isDisturbed,E.isErrored=y.isErrored,E.isReadable=y.isReadable,E.isWritable=y.isWritable,E.Readable=requireReadable();for(const T of s(x)){let A=function(...I){if(new.target)throw p();return E.Readable.from(i(_,this,I))};var w=A;const _=x[T];a(A,"name",{__proto__:null,value:_.name}),a(A,"length",{__proto__:null,value:_.length}),a(E.Readable.prototype,T,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const T of s(h)){let A=function(...k){if(new.target)throw p();return i(_,this,k)};var w=A;const _=h[T];a(A,"name",{__proto__:null,value:_.name}),a(A,"length",{__proto__:null,value:_.length}),a(E.Readable.prototype,T,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}E.Writable=requireWritable(),E.Duplex=requireDuplex(),E.Transform=requireTransform(),E.PassThrough=requirePassthrough(),E.pipeline=l;const{addAbortSignal:g}=requireAddAbortSignal();return E.addAbortSignal=g,E.finished=f,E.destroy=d,E.compose=b,E.setDefaultHighWaterMark=c,E.getDefaultHighWaterMark=m,a(E,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S}}),a(l,u,{__proto__:null,enumerable:!0,get(){return S.pipeline}}),a(f,u,{__proto__:null,enumerable:!0,get(){return S.finished}}),E.Stream=E,E._isUint8Array=function(_){return _ instanceof Uint8Array},E._uint8ArrayToBuffer=function(_){return r.from(_.buffer,_.byteOffset,_.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(r){const a=requireStream(),s=requirePromises(),i=a.Readable.destroy;r.exports=a.Readable,r.exports._uint8ArrayToBuffer=a._uint8ArrayToBuffer,r.exports._isUint8Array=a._isUint8Array,r.exports.isDisturbed=a.isDisturbed,r.exports.isErrored=a.isErrored,r.exports.isReadable=a.isReadable,r.exports.Readable=a.Readable,r.exports.Writable=a.Writable,r.exports.Duplex=a.Duplex,r.exports.Transform=a.Transform,r.exports.PassThrough=a.PassThrough,r.exports.addAbortSignal=a.addAbortSignal,r.exports.finished=a.finished,r.exports.destroy=a.destroy,r.exports.destroy=i,r.exports.pipeline=a.pipeline,r.exports.compose=a.compose,Object.defineProperty(a,"promises",{configurable:!0,enumerable:!0,get(){return s}}),r.exports.Stream=a.Stream,r.exports.default=r.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const r=requireBrowser();class a extends r.Readable{constructor(i){super(),this.bytesRead=0,this.released=!1,this.reader=i.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(i=>{delete this.pendingRead,i.done||this.released?this.push(null):(this.bytesRead+=i.value.length,this.push(i.value))}).catch(i=>{this.destroy(i)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=a,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchFromUrl=r.parseBlob=r.parseReadableStream=r.parseNodeStream=r.selectCover=r.ratingToStars=r.orderTags=r.parseFromTokenizer=r.parseBuffer=void 0;const a=requireBrowser$3(),s=requireCore(),i=requireLib$1(),u=a("music-metadata-browser:main");var x=requireCore();Object.defineProperty(r,"parseBuffer",{enumerable:!0,get:function(){return x.parseBuffer}}),Object.defineProperty(r,"parseFromTokenizer",{enumerable:!0,get:function(){return x.parseFromTokenizer}}),Object.defineProperty(r,"orderTags",{enumerable:!0,get:function(){return x.orderTags}}),Object.defineProperty(r,"ratingToStars",{enumerable:!0,get:function(){return x.ratingToStars}}),Object.defineProperty(r,"selectCover",{enumerable:!0,get:function(){return x.selectCover}}),r.parseNodeStream=s.parseStream;async function h(m,l,d){const f=new i.ReadableWebToNodeStream(m),S=await(0,r.parseNodeStream)(f,typeof l=="string"?{mimeType:l}:l,d);return await f.close(),S}r.parseReadableStream=h;async function p(m,l){m.type,m.size,m instanceof File&&m.name;const d=m.stream?m.stream():b(m);return h(d,{mimeType:m.type,size:m.size},l)}r.parseBlob=p;function b(m){const l=new FileReader;return new ReadableStream({start(d){l.onloadend=f=>{let S=f.target.result;S instanceof ArrayBuffer&&(S=new Uint8Array(S)),d.enqueue(S),d.close()},l.onerror=f=>{d.close()},l.onabort=f=>{d.close()},l.readAsArrayBuffer(m)}})}async function c(m,l){const d=await fetch(m),f={size:parseInt(d.headers.get("Content-Length"),10),mimeType:d.headers.get("Content-Type")};if(d.ok)if(d.body){const S=await h(d.body,f,l);return u("Closing HTTP-readable-stream..."),d.body.locked||await d.body.cancel(),u("HTTP-readable-stream closed."),S}else return p(await d.blob(),l);else throw new Error(`HTTP error status=${d.status}: ${d.statusText}`)}r.fetchFromUrl=c})(lib$3)),lib$3}var libExports=requireLib();const index=_mergeNamespaces({__proto__:null},[libExports]);function roundKHz(r){if(!r)return;const a=r/1e3;return Math.round(a*10)/10}function extFromName(r){if(!r)return;const a=r.split("?")[0].split("#")[0],s=a.lastIndexOf(".");if(s!==-1)return a.substring(s+1).toLowerCase()}function labelFromMimeOrExt(r,a){const s=(r||"").toLowerCase(),i=(a||"").toLowerCase(),u={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",mpeg:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"};if(s.includes("flac"))return"FLAC";if(s.includes("x-wav")||s.includes("wav"))return"WAV";if(s.includes("aiff"))return"AIFF";if(s.includes("mpeg"))return"MP3";if(s.includes("aac"))return"AAC";if(s.includes("alac"))return"ALAC";if(s.includes("mp4")||s.includes("m4a"))return"M4A";if(s.includes("ogg")&&s.includes("opus"))return"OPUS";if(s.includes("ogg"))return"OGG";if(s.includes("webm"))return"WEBM";if(i&&u[i])return u[i]}function normalizeCodec(r,a,s,i){const u=(r||"").toLowerCase(),x=(a||"").toLowerCase();return x.includes("flac")?"FLAC":x.includes("alac")||x.includes("apple lossless")?"ALAC":x.includes("aac")?"AAC":x.includes("mp3")||x.includes("mpeg")?"MP3":x.includes("opus")?"OPUS":x.includes("vorbis")?"OGG":x.includes("pcm")&&(u.includes("wav")||u.includes("wave"))?"WAV":x.includes("aiff")||u.includes("aiff")?"AIFF":u.includes("wave")||u.includes("wav")?"WAV":u.includes("flac")?"FLAC":u.includes("mp4")?"M4A":u.includes("ogg")?"OGG":u.includes("webm")?"WEBM":labelFromMimeOrExt(s,i)}async function extractAudioMeta(r){let a;r instanceof File?a=labelFromMimeOrExt(r.type,extFromName(r.name)):typeof r=="string"&&(a=labelFromMimeOrExt(void 0,extFromName(r)));try{if(r instanceof File){const i=(await libExports.parseBlob(r)).format;return{bitDepth:i.bitsPerSample||void 0,sampleRate:roundKHz(i.sampleRate),bitrateKbps:i.bitrate?Math.round(i.bitrate/1e3):void 0,codecLabel:normalizeCodec(i.container,i.codec,r.type,extFromName(r.name))||a}}else if(typeof r=="string"){const s=await fetch(r,{mode:"cors"}),i=await s.arrayBuffer(),u=s.headers.get("Content-Type")||void 0,h=(await libExports.parseBuffer(new Uint8Array(i),{mimeType:u,size:i.byteLength})).format;return{bitDepth:h.bitsPerSample||void 0,sampleRate:roundKHz(h.sampleRate),bitrateKbps:h.bitrate?Math.round(h.bitrate/1e3):void 0,codecLabel:normalizeCodec(h.container,h.codec,u,extFromName(r))||a}}}catch{}return new Promise(s=>{let i=new Audio;typeof r=="string"?i.src=r:i.src=URL.createObjectURL(r),i.preload="metadata",i.addEventListener("loadedmetadata",()=>{let u,x;try{const h=window.AudioContext||window.webkitAudioContext;if(!h){s({sampleRate:u,bitrateKbps:x,codecLabel:a});return}const p=new h,b=new XMLHttpRequest;b.open("GET",i.src,!0),b.responseType="arraybuffer",b.onload=function(){p.decodeAudioData(b.response,()=>{u=void 0,r instanceof File&&i.duration>0&&(x=Math.round(r.size/i.duration*8/1e3)),s({sampleRate:u,bitrateKbps:x,codecLabel:a})},()=>{s({sampleRate:u,bitrateKbps:x,codecLabel:a})})},b.onerror=function(){s({sampleRate:u,bitrateKbps:x,codecLabel:a})},b.send()}catch{s({sampleRate:u,bitrateKbps:x,codecLabel:a})}}),i.addEventListener("error",()=>s({codecLabel:a}))})}const audioMetadata=Object.freeze(Object.defineProperty({__proto__:null,extractAudioMeta},Symbol.toStringTag,{value:"Module"})),normalizeNumber=r=>{if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"){const a=r.replace(/[^0-9.]/g,"");if(!a)return;const s=Number(a);return Number.isFinite(s)?s:void 0}},normalizeSampleRate=r=>{const a=normalizeNumber(r);if(a)return a>1e3?Math.round(a/1e3*10)/10:a},needsExtraction=r=>r?!r.bitDepth||!r.sampleRate||!r.bitrateKbps||!r.codecLabel:!0,mergeMeta=(r,a)=>({bitDepth:r?.bitDepth??a.bitDepth,sampleRate:r?.sampleRate??a.sampleRate,bitrateKbps:r?.bitrateKbps??a.bitrateKbps,codecLabel:r?.codecLabel??a.codecLabel});function useTrackAudioMeta(r){const a=reactExports.useMemo(()=>{if(!r)return null;const u=normalizeNumber(r.bitDepth??null),x=normalizeSampleRate(r.sampleRate??null),h=normalizeNumber(r.bitrateKbps??null),p=inferCodecLabel({file:r.file,url:r.audioUrl,qualityHint:r.quality,codecLabel:r.codecLabel});return!u&&!x&&!h&&!p?null:{bitDepth:u||void 0,sampleRate:x||void 0,bitrateKbps:h||void 0,codecLabel:p||void 0}},[r]),[s,i]=reactExports.useState(a);return reactExports.useEffect(()=>{i(a)},[a]),reactExports.useEffect(()=>{if(!r||!r.file&&!r.audioUrl||!needsExtraction(s))return;let u=!1;const x=r.file??r.audioUrl;return(async()=>{try{const p=await extractAudioMeta(x);if(u||!p)return;i(b=>mergeMeta(b,p))}catch(p){console.warn("Failed to extract audio metadata:",p)}})(),()=>{u=!0}},[r,s]),s}const WALL_WARNING_TIME_SECONDS=310,WALL_COLLAPSE_TIME_SECONDS=313,WALL_REQUIRED_COMPLETED_TRACKS=24,WALL_TRACK_SEQUENCE=[{title:"In The Flesh?",aliases:["In the Flesh"]},{title:"The Thin Ice"},{title:"Another Brick In The Wall, Part 1",aliases:["Another Brick in the Wall Part 1"]},{title:"The Happiest Days Of Our Lives",aliases:["The Happiest Days of Our Lives"]},{title:"Another Brick In The Wall, Part 2",aliases:["Another Brick in the Wall Part 2"]},{title:"Mother"},{title:"Goodbye Blue Sky"},{title:"Empty Spaces"},{title:"Young Lust"},{title:"One Of My Turns",aliases:["One of My Turns"]},{title:"Don't Leave Me Now",aliases:["Dont Leave Me Now"]},{title:"Another Brick In The Wall, Part 3",aliases:["Another Brick in the Wall Part 3"]},{title:"Goodbye Cruel World"},{title:"Hey You"},{title:"Is There Anybody Out There?",aliases:["Is There Anybody Out There"]},{title:"Nobody Home"},{title:"Vera"},{title:"Bring The Boys Back Home",aliases:["Bring the Boys Back Home"]},{title:"Comfortably Numb"},{title:"The Show Must Go On"},{title:"In The Flesh",aliases:["In the Flesh (Reprise)","In the Flesh? (Reprise)"]},{title:"Run Like Hell"},{title:"Waiting For The Worms",aliases:["Waiting for the Worms"]},{title:"Stop"},{title:"The Trial"},{title:"Outside The Wall",aliases:["Outside the Wall"]}],stripKnownPrefixes=r=>{let a=r;return a=a.replace(/^[\s._-]*(disc|cd)\s*\d+\s*/g,""),a=a.replace(/^[\s._-]*\d+\s*(?:-|\.|:|\/)\s*/g,""),a=a.replace(/^[\s._-]*\d+\s+/g,""),a=a.replace(/^pink\s+floyd\s*[-:_]?\s*/,""),a=a.replace(/^the\s+wall\s*[-:_]?\s*/,""),a=a.replace(/^[\s._-]+/,""),a},normalizeTitle=r=>{if(!r)return"";let a=r.toLowerCase();return a=a.replace(/\((disc|cd)\s*\d+\)/g," "),a=a.replace(/\[(disc|cd)\s*\d+\]/g," "),a=a.replace(/\b(disc|cd)\s*\d+\b/g," "),a=a.replace(/pink\s+floyd/g," "),a=a.replace(/the\s+wall/g," "),a=stripKnownPrefixes(a),a=a.replace(/[^a-z0-9\s]/g," "),a=a.replace(/\s+/g," "),a.trim()},normalizedWallTrackMap=new Map;WALL_TRACK_SEQUENCE.forEach((r,a)=>{normalizedWallTrackMap.set(normalizeTitle(r.title),a),r.aliases?.forEach(s=>{normalizedWallTrackMap.set(normalizeTitle(s),a)})});const normalizedTrialTitle=normalizeTitle("The Trial"),normalizedOutsideTitle=normalizeTitle("Outside The Wall"),resolveOrderFromNormalized=r=>{if(!r)return null;const a=normalizedWallTrackMap.get(r);if(typeof a=="number")return a;for(const[s,i]of normalizedWallTrackMap.entries())if(s&&(r.includes(s)||s.includes(r)))return i;return null},isPinkFloyd=r=>!!r?.artist&&r.artist.toLowerCase().includes("pink floyd"),isTheWallAlbum=r=>!!r?.album&&r.album.toLowerCase().includes("the wall"),isWallAlbumTrack=r=>isPinkFloyd(r)&&isTheWallAlbum(r),getWallTrackOrder=r=>{if(!r)return null;const a=r.title||r.name;if(!a)return null;const s=normalizeTitle(a);return resolveOrderFromNormalized(s)},isTheTrialTrack=r=>getWallTrackOrder(r)===THE_TRIAL_ORDER_INDEX,THE_TRIAL_ORDER_INDEX=normalizedWallTrackMap.get(normalizedTrialTitle)??WALL_TRACK_SEQUENCE.length-2;normalizedWallTrackMap.get(normalizedOutsideTitle)??WALL_TRACK_SEQUENCE.length-1;const LONG_PAUSE_RESET_MS=600*1e3;function useTheWallTracker({currentTrack:r,currentTime:a,isPlaying:s}){const{startWarning:i,cancelWarning:u,triggerCollapse:x,pinkTierUnlocked:h}=useWall(),[p,b]=reactExports.useState(0),c=reactExports.useRef(0),m=reactExports.useRef(null),l=reactExports.useRef(!1),d=reactExports.useRef(!1),f=reactExports.useRef(null),S=reactExports.useCallback(()=>{f.current&&(typeof window<"u"&&window.clearTimeout(f.current),f.current=null)},[]),y=reactExports.useCallback(T=>{(c.current!==0||l.current)&&u(),c.current=0,m.current=null,l.current=!1,d.current=!1,b(0)},[u]),E=reactExports.useCallback(T=>{h||y(T)},[h,y]),g=reactExports.useCallback(T=>{if(h)return;if(!T){E("missing-track");return}if(!isWallAlbumTrack(T)){E("non-wall");return}const _=getWallTrackOrder(T);if(_===null){E("unknown-order");return}const A=(m.current??-1)+1;if(_===0&&c.current===0){m.current=0,c.current=1,b(1);return}if(_===A){m.current=_;const I=_+1;c.current=I,b(I);return}if(_===0){m.current=0,c.current=1,b(1),l.current=!1,d.current=!1,u();return}E("out-of-order")},[u,E,h]);return reactExports.useEffect(()=>{if(!(h||typeof window>"u"))return s?S():f.current||(f.current=window.setTimeout(()=>{E("long-pause"),f.current=null},LONG_PAUSE_RESET_MS)),()=>{S()}},[s,E,S,h]),reactExports.useEffect(()=>{if(h)return;if(!r){l.current=!1,d.current=!1,u();return}if(!isWallAlbumTrack(r)){c.current>0&&E("switched-album");return}if(!isTheTrialTrack(r)){l.current&&(l.current=!1,u()),d.current=!1;return}if(!(c.current>=WALL_REQUIRED_COMPLETED_TRACKS)){l.current&&(l.current=!1,u());return}a>=WALL_WARNING_TIME_SECONDS&&a<WALL_COLLAPSE_TIME_SECONDS&&!l.current&&(i(),l.current=!0),a<WALL_WARNING_TIME_SECONDS&&l.current&&(l.current=!1,u()),a>=WALL_COLLAPSE_TIME_SECONDS&&!d.current&&(d.current=!0,x())},[r,a,u,E,h,i,x]),reactExports.useMemo(()=>({consecutiveTracks:p,registerNaturalCompletion:g,invalidateSession:E}),[p,g,E])}const FALLBACK_AUDIO_URL="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3";function MusicPlayer({currentTrack:r,playlist:a,onTrackChange:s,onPlayPause:i,isVisible:u=!0,onControlsReady:x,sidebarCollapsed:h=!1,externalIsPlaying:p,onExpandPlayer:b,onCreatePlaylist:c}){const m=useTrackAudioMeta(r??null),l=reactExports.useRef(null),d=reactExports.useRef(null),[f,S]=reactExports.useState(!1),[y,E]=reactExports.useState(!1),[g,w]=reactExports.useState(0),[T,_]=reactExports.useState(0),[A,I]=reactExports.useState(!1),[k,N]=reactExports.useState(null),[Y,z]=reactExports.useState(1),[W,G]=reactExports.useState(!1),[$,ge]=reactExports.useState(!1),[F,le]=reactExports.useState(!1),[me,H]=reactExports.useState(!1),[pe,L]=reactExports.useState(!1),[D,K]=reactExports.useState(!1),[ae,oe]=reactExports.useState(!1),[ue,we]=reactExports.useState({bass:0,mid:0,treble:0}),[xe,se]=reactExports.useState({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200}),Z={display:"inline-block",color:"#a0a0a0",fontSize:"0.55rem",padding:"1px 2px",backgroundColor:"rgba(255,255,255,0.04)",border:"1px solid #2d2d2d",borderRadius:"4px",lineHeight:"1",whiteSpace:"nowrap"},be=reactExports.useRef(a),_e=reactExports.useRef(s),te=reactExports.useRef(i),q=reactExports.useRef({repeatAll:!1,repeatOne:!1}),Q=reactExports.useRef(!1),ce=reactExports.useRef(null),Ee=reactExports.useRef(0),je=reactExports.useRef(p??!0),Ce=reactExports.useRef(!1),ee=reactExports.useRef(0),Se=reactExports.useRef(null),Te=reactExports.useRef(()=>{}),ye=reactExports.useRef(r),Ie=reactExports.useRef(Y);reactExports.useEffect(()=>{Ie.current=Y},[Y]);const He=useTheWallTracker({currentTrack:r,currentTime:g,isPlaying:y}),Ke=reactExports.useRef(He.registerNaturalCompletion),Je=reactExports.useRef(He.invalidateSession);reactExports.useEffect(()=>{Ke.current=He.registerNaturalCompletion},[He.registerNaturalCompletion]),reactExports.useEffect(()=>{Je.current=He.invalidateSession},[He.invalidateSession]),reactExports.useEffect(()=>{be.current=a},[a]),reactExports.useEffect(()=>{_e.current=s},[s]),reactExports.useEffect(()=>{te.current=i},[i]),reactExports.useEffect(()=>{q.current={repeatAll:$,repeatOne:F}},[$,F]),reactExports.useEffect(()=>{Q.current=me},[me]),reactExports.useEffect(()=>{p!==void 0&&(je.current=p)},[p]),reactExports.useEffect(()=>{ye.current=r},[r]);const M=reactExports.useCallback(Ne=>Ne?.audioUrl&&typeof Ne.audioUrl=="string"&&Ne.audioUrl.trim().length>0?Ne.audioUrl:FALLBACK_AUDIO_URL,[]),R=reactExports.useCallback(Ne=>{const B=typeof Ne.duration=="number"?Ne.duration:0,O=Ne.bitrateKbps??(Ne.quality==="FLAC"?900:320),Re=B>0?O*1e3/8*B/(1024*1024):0;return B>=900||Re>=80},[]),C=reactExports.useCallback(async(Ne,B,O)=>{const Re=d.current??(d.current=new Audio);if(S(!0),Re.src=Ne,Re.currentTime=0,Re.muted=!1,Re.volume=Ie.current,Re.onended=()=>Te.current?.("auto"),Re.ontimeupdate=()=>{w(Re.currentTime),_(Re.duration||T)},Re.onloadedmetadata=()=>{_(Re.duration||T)},ne(B),O)try{await Re.play(),E(!0),te.current?.(!0)}catch(Ae){console.error("HTML audio play failed:",Ae),je.current=!1,E(!1),te.current?.(!1)}else Re.pause(),E(!1),te.current?.(!1)},[T]),U=reactExports.useCallback(Ne=>{if(!l.current||Q.current||q.current.repeatOne)return;const B=be.current;if(!B.length)return;const O=B.findIndex(Me=>Me.id===Ne);if(O===-1)return;let Re=O+1;if(Re>=B.length){if(!q.current.repeatAll)return;Re=0}if(Re===O)return;const Ae=B[Re];if(!Ae)return;const J=M(Ae);J&&l.current.preloadNextTrack({url:J,id:Ae.id})},[]),ne=Ne=>{const B=M(Ne);addRecentlyPlayedTrack({trackId:Ne.id,trackTitle:Ne.title||Ne.name||"Untitled",artistName:Ne.artist,coverArt:Ne.coverImage||Ne.coverArt||"",audioUrl:B,playedAt:Date.now(),album:Ne.album,quality:Ne.quality,codecLabel:Ne.codecLabel,bitDepth:Ne.bitDepth,sampleRate:Ne.sampleRate,bitrateKbps:Ne.bitrateKbps,durationSeconds:typeof Ne.duration=="number"?Ne.duration:void 0}).catch(O=>console.error("Failed to track recently played:",O))};reactExports.useEffect(()=>(l.current||(l.current=new GaplessAudioEngine,l.current.setCallbacks({onStateChange:Ne=>{Ne.isPlaying!==void 0&&(E(Ne.isPlaying),te.current?.(Ne.isPlaying)),Ne.currentTime!==void 0&&w(Ne.currentTime),Ne.duration!==void 0&&_(Ne.duration),Ne.volume!==void 0&&z(Ne.volume),Ne.isMuted!==void 0&&G(Ne.isMuted)},onTrackEnd:()=>{Ke.current?.(ye.current),q.current.repeatOne?(console.log("Looping current track"),l.current?.seek(0),l.current?.play()):Te.current?.("auto")},onTrackChange:Ne=>{console.log("Gapless transition to track:",Ne),ce.current=Ne,U(Ne);const B=be.current.find(O=>O.id===Ne);B&&_e.current&&_e.current(B)}}),l.current.setVolume(1)),()=>{l.current?.destroy(),l.current=null}),[U]),reactExports.useEffect(()=>{l.current&&l.current.setEQ(ue.bass,ue.mid,ue.treble)},[ue]),reactExports.useEffect(()=>{const Ne=l.current;if(!r||(S(!1),d.current&&(d.current.pause(),d.current.src=""),!Ne))return;if(ce.current===r.id){ce.current=null,ne(r);return}const B=M(r),O=je.current;if(R(r)){Ne.pause(),C(B,r,O);return}if(Ne.usePreloadedTrack(r.id,O)){console.log("Used preloaded buffer for track:",r.id),Ce.current=!1,ne(r),U(r.id);const J=Se.current;if(Se.current=null,J==="next")Te.current?.("auto");else if(J==="prev"){const Me=be.current,Fe=(Me.findIndex(Ye=>Ye.id===r.id)-1+Me.length)%Me.length;_e.current?.(Me[Fe])}return}const Re=++Ee.current;Ce.current=!0,console.log("Loading new track:",r.title||r.name,"requestId:",Re,"url:",B),Ne.pause();const Ae=async(J,Me)=>{try{if(ne(r),await Ne.loadTrack({url:J,id:r.id}),Ee.current!==Re)return;Ce.current=!1,console.log("Track loaded successfully, starting playback"),Ne.seek(0),je.current?Ne.play():Ne.pause(),U(r.id)}catch(ze){if(Ee.current!==Re)return;if(console.error("Failed to load track URL, allowFallback=",Me,"err=",ze),Me&&J!==FALLBACK_AUDIO_URL){console.warn("Retrying with fallback audio URL"),await Ae(FALLBACK_AUDIO_URL,!1);return}Ce.current=!1;const Fe=d.current??(d.current=new Audio);S(!0),Fe.src=J,Fe.currentTime=0,Fe.muted=!1,Fe.volume=Y,Fe.onended=()=>Te.current?.("auto"),Fe.ontimeupdate=()=>{w(Fe.currentTime),_(Fe.duration||T)},Fe.onloadedmetadata=()=>{_(Fe.duration||T)},je.current?Fe.play().then(()=>{E(!0),te.current?.(!0)}).catch(Ye=>{console.error("HTML audio play failed after gapless fallback:",Ye),je.current=!1,E(!1),te.current?.(!1)}):(E(!1),te.current?.(!1))}};Ae(B,!0)},[r,M,U]);const fe=reactExports.useCallback(()=>{const Ne=l.current,B=d.current,O=!je.current;if(je.current=O,f&&B){O?B.play().catch(Re=>console.error("HTML audio play failed:",Re)):B.pause(),E(O),te.current?.(O);return}Ne&&(Ce.current||(O?Ne.play():Ne.pause()))},[f]),ke=reactExports.useCallback(Ne=>{const B=l.current;if(!B)return;const O=Math.max(0,Math.min(1,Ne));B.setVolume(O),B.setMuted(O===0),d.current&&(d.current.volume=O,d.current.muted=O===0)},[]),Ve=reactExports.useCallback(Ne=>{we(Ne)},[we]),tt=reactExports.useCallback((Ne="manual")=>{const B=Date.now();if(Ne==="manual"){if(Je.current?.("manual-next"),B-ee.current<300)return;ee.current=B}if(Ce.current){Se.current="next";return}const O=l.current,Re=be.current,Ae=ye.current;if(!Ae||!Re.length)return;console.log("Skipping to next track");const J=Re.findIndex(Fe=>Fe.id===Ae.id);let Me=J;if(me){if(Re.length===1){console.log("Only one track available, restarting current track"),O?.seek(0),je.current&&O?.play();return}do Me=Math.floor(Math.random()*Re.length);while(Me===J)}else if(Me=J===-1?0:J+1,Me>=Re.length)if($)Me=0;else{console.log("End of playlist reached, stopping playback"),O?.pause(),je.current=!1,E(!1),te.current?.(!1);return}const ze=Re[Me];if(!ze){console.warn("No track found for next index",Me);return}if(ze.id===Ae.id){console.log("Next track resolved to current track, restarting"),O?.seek(0),je.current&&O?.play();return}O?.pause(),console.log(`Current index: ${J}, Next index: ${Me}`),_e.current?.(ze)},[me,$]);reactExports.useEffect(()=>{Te.current=tt},[tt]);const et=reactExports.useCallback(()=>{Je.current?.("manual-prev");const Ne=Date.now();if(Ce.current){Se.current="prev";return}if(Ne-ee.current<300)return;ee.current=Ne;const B=l.current,O=be.current,Re=ye.current;if(!Re||!O.length||!B)return;if(console.log("Skipping to previous track"),g>3){console.log("Restarting current track (>3s)"),B.seek(0);return}const Ae=O.findIndex(Me=>Me.id===Re.id);if(Ae===-1){console.warn("Current track not found in playlist");return}let J;if(me&&O.length>1)do J=Math.floor(Math.random()*O.length);while(J===Ae);else J=(Ae-1+O.length)%O.length;console.log(`Current index: ${Ae}, Previous index: ${J}`),B.pause(),_e.current?.(O[J])},[me]),rt=reactExports.useCallback(Ne=>{const O=Number.isFinite(T)&&T>0?Math.max(0,Math.min(Ne,T)):Math.max(0,Ne);if(Je.current?.("seek"),f&&d.current){d.current.currentTime=O,w(O);return}l.current&&l.current.seek(O)},[T,f]),Ze=Ne=>{const B=parseFloat(Ne.target.value);N(B),A||rt(B)},Mt=()=>{I(!0)},wt=()=>{k!==null&&rt(k),I(!1),N(null)},Ut=Ne=>{const B=parseFloat(Ne.target.value);if(f&&d.current){d.current.volume=B,d.current.muted=B===0,z(B),G(B===0);return}l.current&&(l.current.setVolume(B),l.current.setMuted(B===0))},bt=()=>{const Ne=!W;if(f&&d.current){d.current.muted=Ne,G(Ne);return}l.current&&l.current.setMuted(Ne)},nr=reactExports.useCallback(()=>{b?.()},[b]),Vt=Ne=>{if(isNaN(Ne))return"0:00";const B=Math.floor(Ne/60),O=Math.floor(Ne%60);return`${B}:${O.toString().padStart(2,"0")}`},Ct=A&&k!==null?k:g;return reactExports.useEffect(()=>{x&&x({gaplessEngine:l.current,isPlaying:y,togglePlayPause:fe,handleNext:tt,handlePrevious:et,currentTime:g,duration:T,formatTime:Vt,volume:Y,setVolume:ke,eqBands:ue,setEqBands:Ve,invalidateWallSession:He.invalidateSession,wallSessionCount:He.consecutiveTracks,usingHtmlAudio:f})},[y,g,T,Y,ue,x,fe,tt,et,ke,Ve,He.consecutiveTracks,He.invalidateSession,f]),reactExports.useEffect(()=>{const Ne=setInterval(()=>{const B=l.current;if(f&&d.current){w(d.current.currentTime),Number.isFinite(d.current.duration)&&d.current.duration>0&&_(d.current.duration);return}if(!B)return;const O=B.getCurrentTime(),Re=B.getDuration();w(Ae=>Number.isFinite(O)?O:Ae),Number.isFinite(Re)&&Re>0&&_(Re)},250);return()=>clearInterval(Ne)},[f]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:u&&jsxRuntimeExports.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-xl transition-all duration-300",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",borderTop:"1px solid #333333"},children:[jsxRuntimeExports.jsx("div",{className:"max-w-screen-2xl mr-auto px-4 py-2",children:r?jsxRuntimeExports.jsx("div",{className:"mr-auto",style:{maxWidth:"1500px",width:"100%"},children:jsxRuntimeExports.jsxs("div",{className:"player-bottom-row",children:[jsxRuntimeExports.jsxs("div",{className:"player-bottom-left flex items-center gap-3 w-full",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Open full player",onClick:nr,className:"flex-shrink-0 rounded-lg overflow-hidden focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#d32f2f]",style:{lineHeight:0},children:jsxRuntimeExports.jsx(ImageWithFallback,{src:r.coverImage||r.coverArt,alt:r.title||r.name||"Track",className:"w-14 h-14 object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1 mb-1",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:nr,className:"text-left truncate mono hover:text-[#d32f2f] transition-colors",style:{color:"#e0e0e0",fontSize:"0.9rem",margin:0,lineHeight:"1.2",fontWeight:700},title:r.title||r.name||"Untitled",children:r.title||r.name||"Untitled"})}),jsxRuntimeExports.jsx("p",{className:"truncate mono",style:{color:"#a0a0a0",fontSize:"0.75rem",marginTop:"0px",lineHeight:"1.2"},children:r.artist}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-2",children:[m?.codecLabel&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0,minWidth:"88px"},children:m.codecLabel}),(m?.bitDepth||m?.sampleRate)&&jsxRuntimeExports.jsxs("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",minWidth:"132px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",padding:"0 8px",fontSize:"0.72rem",flexShrink:0},children:[jsxRuntimeExports.jsx("span",{style:{color:m?.bitDepth===24?"#c6a700":"#a0a0a0"},children:m?.bitDepth?`${m.bitDepth}-bit`:""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:m?.sampleRate?`${m.sampleRate}kHz`:""})]}),m?.bitrateKbps&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0},children:formatBitrate(m.bitrateKbps)})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-center flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Create playlist",onClick:()=>c&&c(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},title:"Create Playlist",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":me?"Disable shuffle":"Enable shuffle",onClick:()=>H(!me),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:me?"#d32f2f":"#a0a0a0"},children:jsxRuntimeExports.jsx(Shuffle,{size:16})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Previous track",onClick:et,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipBack,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":y?"Pause":"Play",onClick:fe,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:"#d32f2f"},children:y?jsxRuntimeExports.jsx(Pause,{size:20,fill:"#ffffff",color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:20,fill:"#ffffff",color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Next track",onClick:()=>tt("manual"),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipForward,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{!$&&!F?(ge(!0),le(!1)):$&&!F?(ge(!1),le(!0)):(ge(!1),le(!1))},className:"p-2 rounded-lg transition-all duration-200 hover:scale-110 relative",style:{color:$||F?"#d32f2f":"#a0a0a0"},title:F?"Repeat One":$?"Repeat Playlist":"Repeat Off",children:[jsxRuntimeExports.jsx(Repeat,{size:16}),F&&jsxRuntimeExports.jsx("span",{className:"absolute",style:{fontSize:"0.5rem",fontWeight:"bold",color:"#d32f2f",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",style:{maxWidth:"500px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},children:Vt(Ct)}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:T||0,value:Ct,onChange:Ze,onPointerDown:Mt,onPointerUp:wt,onPointerCancel:wt,className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${T>0?Ct/T*100:0}%, #333333 ${T>0?Ct/T*100:0}%)`,appearance:"none",cursor:"pointer"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},"aria-live":"polite",children:Vt(T)})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-right flex items-center gap-3 justify-end relative w-full md:ml-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":D?"Hide equalizer":"Show equalizer",onClick:()=>K(!D),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:D?"#d32f2f":"#a0a0a0"},title:"Equalizer",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"14",x2:"6",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"10",y1:"8",x2:"14",y2:"8"}),jsxRuntimeExports.jsx("line",{x1:"18",y1:"16",x2:"22",y2:"16"})]})}),D&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-full right-0 mb-2 p-4 rounded-lg backdrop-blur-xl",style:{backgroundColor:"rgba(26, 26, 26, 0.98)",border:"1px solid #333333",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",width:"240px"},role:"group","aria-label":"Equalizer controls",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":ae?"Hide advanced EQ":"Show advanced EQ",onClick:()=>oe(!ae),className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:ae?"#d32f2f":"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)",border:ae?"1px solid #d32f2f":"none"},children:"Adv"}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Reset equalizer",onClick:()=>{we({bass:0,mid:0,treble:0}),se({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200})},className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:"Reset"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ue.bass,onChange:Ne=>we({...ue,bass:parseFloat(Ne.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ue.bass+12)/24*100}%, #333333 ${(ue.bass+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ue.bass,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:Z,children:[ue.bass>0?"+":"",ue.bass," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ue.mid,onChange:Ne=>we({...ue,mid:parseFloat(Ne.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ue.mid+12)/24*100}%, #333333 ${(ue.mid+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ue.mid,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:Z,children:[ue.mid>0?"+":"",ue.mid," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ue.treble,onChange:Ne=>we({...ue,treble:parseFloat(Ne.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ue.treble+12)/24*100}%, #333333 ${(ue.treble+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ue.treble,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:Z,children:[ue.treble>0?"+":"",ue.treble," dB"]})]}),ae&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"my-2",style:{height:"1px",backgroundColor:"#333333"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:"Frequency Controls"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Bass Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"20",max:"500",step:"10",value:xe.bassFreq,onChange:Ne=>{const B=parseFloat(Ne.target.value);se({...xe,bassFreq:B}),l.current?.setAdvancedEQ(B,xe.midFreq,xe.midQ,xe.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(xe.bassFreq-20)/480*100}%, #333333 ${(xe.bassFreq-20)/480*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass frequency","aria-valuemin":20,"aria-valuemax":500,"aria-valuenow":xe.bassFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:xe.bassFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"200",max:"5000",step:"100",value:xe.midFreq,onChange:Ne=>{const B=parseFloat(Ne.target.value);se({...xe,midFreq:B}),l.current?.setAdvancedEQ(xe.bassFreq,B,xe.midQ,xe.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(xe.midFreq-200)/4800*100}%, #333333 ${(xe.midFreq-200)/4800*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid frequency","aria-valuemin":200,"aria-valuemax":5e3,"aria-valuenow":xe.midFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:xe.midFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Q"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:xe.midQ,onChange:Ne=>{const B=parseFloat(Ne.target.value);se({...xe,midQ:B}),l.current?.setAdvancedEQ(xe.bassFreq,xe.midFreq,B,xe.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(xe.midQ-.1)/9.9*100}%, #333333 ${(xe.midQ-.1)/9.9*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid Q","aria-valuemin":.1,"aria-valuemax":10,"aria-valuenow":xe.midQ,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:xe.midQ.toFixed(1)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Treble Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"2000",max:"16000",step:"100",value:xe.trebleFreq,onChange:Ne=>{const B=parseFloat(Ne.target.value);se({...xe,trebleFreq:B}),l.current?.setAdvancedEQ(xe.bassFreq,xe.midFreq,xe.midQ,B)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(xe.trebleFreq-2e3)/14e3*100}%, #333333 ${(xe.trebleFreq-2e3)/14e3*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble frequency","aria-valuemin":2e3,"aria-valuemax":16e3,"aria-valuenow":xe.trebleFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:xe.trebleFreq})]})]})]})})]}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":W?"Unmute":"Mute",onClick:bt,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",children:W?jsxRuntimeExports.jsx(VolumeX,{size:18,color:"#a0a0a0"}):jsxRuntimeExports.jsx(Volume2,{size:18,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:W?0:Y,onChange:Ut,className:"w-20 md:w-24",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(W?0:Y)*100}%, #333333 ${(W?0:Y)*100}%)`,appearance:"none",cursor:"pointer"}})]})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"48px"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.9rem"},children:"No track playing"})})}),jsxRuntimeExports.jsx("style",{children:`
            input[type="range"]::-webkit-slider-thumb {
              appearance: none;
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
            }
            input[type="range"]::-moz-range-thumb {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
              border: none;
            }
          `})]})})}const BRICK_COLUMNS=8,BRICK_ROWS=6,TOTAL_BRICKS=BRICK_COLUMNS*BRICK_ROWS,FORCED_OVERLAY_STATES=new Set(["SHAKING","COLLAPSED","REBUILDING"]);function WallOverlay({enabled:r=!0}){const{wallState:a}=useWall();if(!(r||FORCED_OVERLAY_STATES.has(a)))return null;const i=reactExports.useMemo(()=>Array.from({length:TOTAL_BRICKS}).map((u,x)=>{const h=Math.floor(x/BRICK_COLUMNS),p=x%BRICK_COLUMNS;return{id:`wall-brick-${x}`,row:h,column:p,jitter:(Math.random()-.5)*4}}),[]);return jsxRuntimeExports.jsx("div",{className:`wall-overlay wall-overlay--${a.toLowerCase()}`,"aria-hidden":"true",children:i.map(u=>{const x={"--wall-row":`${u.row}`,"--wall-column":`${u.column}`,"--wall-jitter":`${u.jitter}px`};return jsxRuntimeExports.jsx("div",{className:"wall-overlay__brick",style:x},u.id)})})}const buttonBaseStyle={border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.5)",color:"#f5f5f5",fontSize:"0.75rem",letterSpacing:"0.08em",textTransform:"uppercase",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",transition:"background 0.2s ease, transform 0.2s ease"};function WallDebugPanel({isPinkEnabled:r,onPinkOverride:a}){const[s,i]=reactExports.useState(!1),[u,x]=reactExports.useState(!1),h=reactExports.useRef(null),{wallState:p,pinkTierUnlocked:b,themeEnabled:c,setThemeEnabled:m,startWarning:l,cancelWarning:d,triggerCollapse:f,resetToSecure:S}=useWall();reactExports.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.getItem("brick_wall_debug")==="true"&&x(!0)}catch{}},[]),reactExports.useEffect(()=>{if(!(typeof window>"u"))return window.brickWallDebug={enable:()=>{x(!0);try{window.localStorage.setItem("brick_wall_debug","true")}catch{}},disable:()=>{x(!1),i(!1);try{window.localStorage.removeItem("brick_wall_debug")}catch{}}},()=>{window.brickWallDebug&&delete window.brickWallDebug}},[]),reactExports.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=null)},[]);const y=reactExports.useMemo(()=>{const w=(WALL_COLLAPSE_TIME_SECONDS-WALL_WARNING_TIME_SECONDS)*1e3;return Math.max(w,1500)},[]),E=reactExports.useMemo(()=>[{label:"Wall State",value:p},{label:"Pink Tier",value:b?"Unlocked":"Locked"},{label:"Overlay",value:r?"Forced On":"Auto"},{label:"Theme",value:c?"Enabled":"Hidden"}],[r,b,c,p]),g=()=>{d(),S(),l(),h.current&&window.clearTimeout(h.current),h.current=window.setTimeout(()=>{f(),h.current=null},y)};return u?jsxRuntimeExports.jsxs("div",{style:{position:"fixed",bottom:"96px",right:"24px",zIndex:80,pointerEvents:"none"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i(w=>!w),style:{...buttonBaseStyle,pointerEvents:"auto",background:s?"rgba(255,0,204,0.2)":"rgba(0,0,0,0.6)",borderColor:s?"rgba(255,0,204,0.7)":"rgba(255,255,255,0.2)",boxShadow:s?"0 0 12px rgba(255,0,204,0.4)":"none"},children:s?"Close Wall Debug":"Wall Debug"}),s&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px",width:"320px",maxWidth:"calc(100vw - 32px)",background:"rgba(8,8,8,0.92)",border:"1px solid rgba(255,0,204,0.35)",borderRadius:"12px",padding:"16px",boxShadow:"0 16px 40px rgba(0,0,0,0.45)",pointerEvents:"auto",backdropFilter:"blur(18px)"},children:[jsxRuntimeExports.jsx("p",{style:{marginBottom:"12px",fontSize:"0.75rem",color:"rgba(255,255,255,0.75)",letterSpacing:"0.04em",textTransform:"uppercase"},children:'Simulate "The Trial" without replaying the entire album. Actions below call the same hooks that the easter egg uses.'}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gap:"6px",marginBottom:"12px"},children:E.map(w=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"rgba(255,255,255,0.85)",letterSpacing:"0.05em"},children:[jsxRuntimeExports.jsx("span",{style:{color:"rgba(255,255,255,0.55)"},children:w.label}),jsxRuntimeExports.jsx("span",{children:w.value})]},w.label))}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:S,children:"Reset Secure"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:l,children:"Shake Wall"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:d,children:"Cancel Shake"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:f,children:"Collapse Now"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:{...buttonBaseStyle,background:"rgba(255,0,204,0.15)",borderColor:"rgba(255,0,204,0.5)"},onClick:g,children:"Simulate Trial Hit"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>m(!c),children:c?"Hide Pink Theme":"Show Pink Theme"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>a(!r),children:r?"Disable Overlay":"Force Overlay"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>{window.brickWallDebug?.disable()},children:"Hide Debugger"})]}),jsxRuntimeExports.jsxs("p",{style:{marginTop:"12px",fontSize:"0.65rem",color:"rgba(255,255,255,0.5)",letterSpacing:"0.04em"},children:["Tip: run ",jsxRuntimeExports.jsx("code",{children:"window.brickWallDebug.enable()"})," in the console to re-open this panel outside dev builds."]})]})]}):null}class LastFmService{apiKey;baseUrl="https://ws.audioscrobbler.com/2.0/";constructor(a){this.apiKey=a}async makeRequest(a){const s=new URLSearchParams({...a,api_key:this.apiKey,format:"json"}),i=await fetch(`${this.baseUrl}?${s}`);if(!i.ok)throw new Error(`Last.fm API error: ${i.status}`);return i.json()}async getTrackInfo(a,s){try{const i=await this.makeRequest({method:"track.getInfo",artist:a,track:s});return i.track?{name:i.track.name,artist:i.track.artist.name,album:i.track.album?.title,duration:i.track.duration?Math.floor(parseInt(i.track.duration)/1e3).toString():void 0}:null}catch(i){return console.error("Error fetching track info:",i),null}}async getArtistInfo(a){try{const s=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(a)}`);if(s.ok){const u=await s.json();if(u.extract&&u.extract.length>100)return{name:a,bio:u.extract,image:u.thumbnail?.source,similar:[]}}const i=await this.makeRequest({method:"artist.getInfo",artist:a});return i.artist?{name:i.artist.name,bio:i.artist.bio?.summary||i.artist.bio?.content,image:i.artist.image?.find(u=>u.size==="large")?.["#text"],similar:i.artist.similar?.artist?.map(u=>u.name)||[]}:null}catch(s){return console.error("Error fetching artist info:",s),null}}async getLyrics(a,s){try{const i=await fetch(`https://api.genius.com/search?q=${encodeURIComponent(`${a} ${s}`)}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(i.ok){const x=await i.json();if(x.response?.hits?.[0]?.result?.id){const h=x.response.hits[0].result.id,p=await fetch(`https://api.genius.com/songs/${h}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(p.ok){const b=await p.json();if(b.response?.song?.lyrics?.plain)return b.response.song.lyrics.plain}}}const u=await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(a)}/${encodeURIComponent(s)}`);if(u.ok){const x=await u.json();if(x.lyrics)return x.lyrics}return console.log(`Lyrics not found for ${a} - ${s}`),null}catch(i){return console.error("Error fetching lyrics:",i),null}}sanitizeTitle(a){return a?a.replace(/\s*\([^)]*\)/g,"").replace(/\s*\[[^\]]*\]/g,"").replace(/\s+-\s+.*$/g,"").trim():""}splitArtists(a){if(!a)return[];const s=/(feat\.|featuring|ft\.|with|&|,|;|\+| x )/i;return a.split(s).map(i=>i.trim()).filter(i=>i&&!s.test(i)).map(i=>i.replace(/^and\s+/i,"").trim())}async getAlbumInfoLoose(a,s,i){const u=this.splitArtists(a)[0]||a,x=this.sanitizeTitle(s),h=i?this.sanitizeTitle(i):void 0,p=async(c,m)=>{if(!c||!m)return null;try{const l=await this.makeRequest({method:"album.getInfo",artist:c,album:m});if(l?.album)return{title:l.album.name,artist:l.album.artist,summary:l.album.wiki?.summary,image:l.album.image?.find(d=>d.size==="extralarge")?.["#text"]||l.album.image?.[0]?.["#text"],tracks:Array.isArray(l.album.tracks?.track)?l.album.tracks.track.map(d=>({name:d.name,duration:Number(d.duration)||void 0})):void 0}}catch(l){console.warn("album.getInfo failed",c,m,l)}return null};let b=await p(u,x||s);if(b||(b=await p(u,s),b)||h&&(b=await p(u,h),b))return b;try{const c=[`${x||s} (${u} album)`,`${s} (${u} album)`,x||s].filter(Boolean);for(const m of c){const l=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(m)}`);if(l.ok){const d=await l.json();if(d?.title&&d.extract)return{title:d.title,artist:u,summary:d.extract,image:d.thumbnail?.source}}}}catch(c){console.error("Wikipedia album fallback failed",c)}return null}}const lastFmService=new LastFmService("YOUR_LASTFM_API_KEY_HERE"),parseLRC=r=>{const a=r.split(`
`),s=[];for(const i of a){const u=i.trim(),x=new RegExp("\\[(\\d{2}):(\\d{2})(?:\\.(\\d{2,3}))?\\]","g"),h=[...u.matchAll(x)];if(h.length===0)continue;const p=u.replace(x,"").trim();h.forEach(b=>{const c=parseInt(b[1],10),m=parseInt(b[2],10),l=b[3]?parseInt(b[3],10):0,d=b[3]?.length===3?1e3:100,f=c*60+m+l/d;s.push({time:f,text:p})})}return s.sort((i,u)=>i.time-u.time)},fetchWikipediaAlbumSummary=async(r,a)=>{if(!a)return null;const i=(typeof lastFmService.sanitizeTitle=="function"?lastFmService.sanitizeTitle.bind(lastFmService):p=>p)(a),u=r?.trim(),x=[a,i,i?`${i} (album)`:"",i&&u?`${i} (${u} album)`:""].filter(p=>!!(p&&p.trim())),h=new Set;for(const p of x){const b=p.toLowerCase();if(!h.has(b)){h.add(b);try{const c=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(p)}`);if(!c.ok)continue;const m=await c.json();if(m?.extract)return{title:typeof m.title=="string"?m.title:p,summary:m.extract,image:m.thumbnail?.source}}catch(c){console.error("Wikipedia album summary fetch failed:",c)}}}return null};function PlayerApple({track:r,isPlaying:a,onPlayPause:s,onClose:i,onArtistClick:u,onNext:x,onPrevious:h,currentTime:p=0,duration:b=0,formatTime:c=S=>"0:00",onVolumeChange:m,onEqChange:l,volumeLevel:d=1,eqBands:f}){const[S,y]=reactExports.useState("cover"),[E,g]=reactExports.useState(a),w=useTrackAudioMeta(r),[T,_]=reactExports.useState([]),[A,I]=reactExports.useState(null),[k,N]=reactExports.useState(!1),[Y,z]=reactExports.useState(!1),[W,G]=reactExports.useState(null),[$,ge]=reactExports.useState(!1),[F,le]=reactExports.useState(!1),me=reactExports.useRef(null),[H,pe]=reactExports.useState(Math.round(Math.max(0,Math.min(1,d))*100)),[L,D]=reactExports.useState({low:f?.low??0,mid:f?.mid??0,high:f?.high??0}),[K,ae]=reactExports.useState(!1),[oe,ue]=reactExports.useState(!1);reactExports.useEffect(()=>g(a),[a]),reactExports.useEffect(()=>{pe(Math.round(Math.max(0,Math.min(1,d))*100))},[d]),reactExports.useEffect(()=>{f&&D({low:f.low??0,mid:f.mid??0,high:f.high??0})},[f]),reactExports.useEffect(()=>{const _e=async()=>{const Q=lastFmService.splitArtists(r.artist||"")||[];if(Q.length!==0){N(!0);try{const ce=await Promise.all(Q.map(Ee=>lastFmService.getArtistInfo(Ee)));_(ce.filter(Ee=>!!Ee))}catch(ce){console.error("Failed to fetch artist info:",ce)}finally{N(!1)}}},te=async()=>{const Q=r.album;if(!r.artist||!Q){I(null);return}z(!0);try{const ce=await lastFmService.getAlbumInfoLoose(r.artist,Q,r.title);if(ce){I(ce);return}const Ee=await fetchWikipediaAlbumSummary(r.artist,Q);if(Ee){I({title:Ee.title||Q,artist:r.artist,summary:Ee.summary,image:Ee.image});return}I(null)}finally{z(!1)}},q=async()=>{if(!(!r.artist||!r.title)){le(!0),G(null),ge(!1);try{const Q=r.duration||(b>0?b:0);let ce=`https://lrclib.net/api/get?artist_name=${encodeURIComponent(r.artist)}&track_name=${encodeURIComponent(r.title)}`;Q>0&&(ce+=`&duration=${Math.round(Q)}`);const Ee=await fetch(ce);if(Ee.ok){const je=await Ee.json();je.syncedLyrics?(G(je.syncedLyrics),ge(!0)):je.plainLyrics?(G(je.plainLyrics),ge(!1)):G(null)}}catch(Q){console.error("Failed to fetch lyrics from LRCLIB:",Q),G(null)}finally{le(!1)}}};_e(),te(),q()},[r.artist,r.title,r,b]);const we=reactExports.useMemo(()=>!W||!$?[]:parseLRC(W),[W,$]),xe=reactExports.useMemo(()=>!$||we.length===0?-1:we.findIndex((_e,te)=>{const q=we[te+1];return p>=_e.time&&(!q||p<q.time)}),[p,we,$]);reactExports.useEffect(()=>{S==="lyrics"&&me.current&&me.current.scrollIntoView({behavior:"smooth",block:"center"})},[xe,S]);const se=`In the depths of concrete walls
Where the echoes softly call
Building dreams from brick and stone
Finding strength we've always known

Industrial soundscapes fill the air
Melodies beyond compare`,Z="No artist bio available.",be=_e=>y(_e);return jsxRuntimeExports.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(8px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{width:"92%",maxWidth:"980px",height:"85vh",background:"#111",borderRadius:"16px",border:"1px solid #333",color:"#e0e0e0",fontFamily:"'Inter', 'Plus Jakarta Sans', sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",padding:"16px",display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"center",gap:"24px",flex:"0 0 auto"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("span",{"aria-hidden":!0,style:{display:"inline-flex",alignItems:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M4 9v6h4l5 4V5L8 9H4z",fill:"#bbb"})})}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,value:H,onChange:_e=>{const te=Number(_e.target.value);pe(te),m?.(te/100)},style:{width:"180px",maxWidth:"45vw",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"0.85rem",color:"#bbb",whiteSpace:"nowrap"},children:[Math.round(H),"%"]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"16px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:h,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipBack,{size:22,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{g(!E),s()},style:{background:"#d32f2f",border:"none",borderRadius:"50%",width:"72px",height:"72px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(211,47,47,0.4)"},children:E?jsxRuntimeExports.jsx(Pause,{size:30,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:30,color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{onClick:x,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipForward,{size:22,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"14px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>ae(!K),title:K?"Hide equalizer":"Show equalizer",style:{background:"none",border:K?"1px solid #d32f2f":"1px solid #444",color:K?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:jsxRuntimeExports.jsx(SlidersVertical,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(!oe),title:oe?"Disable Loop":"Enable Loop",style:{background:"none",border:oe?"1px solid #d32f2f":"1px solid #444",color:oe?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsx(Repeat,{size:16})})]}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:16,top:16,display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer"},title:"Close",children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>be("album"),style:{background:"none",border:"none",cursor:"pointer"},title:"Minimize",children:jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M5 12h14",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round"})})})]})]}),K&&jsxRuntimeExports.jsx("div",{style:{position:"relative",flex:"0 0 auto"},children:jsxRuntimeExports.jsxs("div",{style:{margin:"0 24px 8px",background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.35)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const _e={low:0,mid:0,high:0};D(_e),l?.(_e)},style:{background:"none",border:"1px solid #444",color:"#a0a0a0",borderRadius:"10px",padding:"4px 8px",cursor:"pointer"},children:"Reset"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:L.low,onChange:_e=>{const te=Number(_e.target.value),q={...L,low:te};D(q),l?.(q)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[L.low," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:L.mid,onChange:_e=>{const te=Number(_e.target.value),q={...L,mid:te};D(q),l?.(q)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[L.mid," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:L.high,onChange:_e=>{const te=Number(_e.target.value),q={...L,high:te};D(q),l?.(q)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[L.high," dB"]})]})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"240px 1fr",gap:"24px",padding:"16px",overflow:"hidden",flex:"1 1 auto"},children:[jsxRuntimeExports.jsx("div",{style:{width:"240px",height:"240px",borderRadius:"16px",overflow:"hidden",background:"#222",boxShadow:"0 20px 60px rgba(0,0,0,0.4)"},children:jsxRuntimeExports.jsx("img",{src:r.coverArt||r.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:r.album||"Cover",style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",minHeight:0},children:[jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"2rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.title||r.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:u,style:{background:"none",border:"none",color:"#aaa",cursor:"pointer",fontSize:"1.1rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.artist}),jsxRuntimeExports.jsx("p",{style:{marginTop:"4px",color:"#888",fontFamily:"'Syne', 'Inter', sans-serif",fontWeight:500,letterSpacing:"-0.02em"},children:r.album||""}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginTop:"8px"},children:[w?.codecLabel&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",color:"#e0e0e0",fontFamily:"JetBrains Mono, Space Mono, monospace"},children:String(w.codecLabel).toUpperCase()}),(w?.bitDepth||w?.sampleRate)&&jsxRuntimeExports.jsxs("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"6px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",padding:"0 10px",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:w?.bitDepth===24?"#c6a700":"#a0a0a0"},children:w?.bitDepth?String(w.bitDepth)+"-bit":""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:w?.sampleRate?String(w.sampleRate)+"kHz":""})]}),w?.bitrateKbps&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:formatBitrate(w.bitrateKbps)})]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto"},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"2px",marginBottom:"6px"},children:jsxRuntimeExports.jsx("div",{style:{height:"4px",backgroundColor:"#d32f2f",borderRadius:"2px",width:String(b>0?p/b*100:0)+"%",transition:"width 0.3s ease"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:"#a0a0a0"},children:[jsxRuntimeExports.jsx("span",{children:c(p)}),jsxRuntimeExports.jsx("span",{children:c(b)})]})]}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",minHeight:"320px",overflowY:"auto",padding:"1rem",animation:"fadeIn 0.3s ease-out",flex:"1 1 auto"},children:[S==="bio"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",overflow:"hidden",marginBottom:"1rem",boxShadow:"0 16px 32px rgba(0,0,0,0.3)"},children:jsxRuntimeExports.jsx("img",{src:T[0]?.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:r.artist,style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,color:"#e0e0e0",marginBottom:"0.75rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:(lastFmService.splitArtists(r.artist||"")||[r.artist]).join("  ")}),jsxRuntimeExports.jsx("div",{style:{color:"#a0a0a0",fontSize:"1rem",lineHeight:1.75,textAlign:"left"},children:k?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):T.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:T.map(_e=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{margin:"0 0 0.25rem",color:"#e0e0e0",fontWeight:500},children:_e.name}),jsxRuntimeExports.jsx("p",{style:{textAlign:"left",margin:0},children:_e.bio||Z})]},_e.name))}):jsxRuntimeExports.jsx("p",{style:{textAlign:"left"},children:Z})})]}),S==="cover"&&jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.75rem"},children:jsxRuntimeExports.jsxs("div",{style:{width:"100%",maxWidth:"720px",textAlign:"left"},children:[jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,margin:"0.25rem 0",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:A?.title||String(r.album||"Album").replace(/[\(\[].*?[\)\]]/g,"").trim()}),Y?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}})]}):A?.summary?jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:A.summary}):jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No album details available."})]})}),S==="lyrics"&&jsxRuntimeExports.jsxs("div",{style:{color:"#a0a0a0",fontSize:"1.125rem",lineHeight:1.75,textAlign:"left",minHeight:"300px",paddingBottom:"3rem"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:500,color:"#e0e0e0",marginBottom:"0.25rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.title||r.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:u,style:{fontSize:"1rem",color:"#a0a0a0",background:"none",border:"none",cursor:"pointer",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.artist})]}),F?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$&&we.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:we.map((_e,te)=>{const q=te===xe;return jsxRuntimeExports.jsx("div",{ref:q?me:null,style:{color:q?"#ffffff":"#555555",transition:"all 0.3s",opacity:q?1:.6,fontWeight:q?500:300},children:_e.text||""},te)})}):jsxRuntimeExports.jsx("pre",{style:{whiteSpace:"pre-wrap",textAlign:"left",fontWeight:300},children:W||se})})]})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",paddingBottom:"0.5rem",flex:"0 0 auto"},children:["bio","cover","lyrics"].map(_e=>jsxRuntimeExports.jsx("button",{onClick:()=>be(_e),style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:S===_e?"#ffffff":"rgba(255,255,255,0.4)",border:"none",cursor:"pointer",transition:"all 0.3s",transform:S===_e?"scale(1.25)":"scale(1)"}},_e))})]})]})]})})}function Navigation({activeTab:r,onTabChange:a,activeFilter:s,onFilterChange:i,onSettingsClick:u,isPinkMode:x=!1,notifications:h,onNotificationsViewed:p,onNotificationDismiss:b,pinkTierLabel:c,pinkTierUnlocked:m,pinkUnlockTimestamp:l}){const[d,f]=reactExports.useState(!0),[S,y]=reactExports.useState(!1),{theme:E,toggleTheme:g,colors:w}=useTheme$1(),{pinkTierUnlocked:T}=useWall(),_=h??[],A=reactExports.useMemo(()=>m??T?{id:"pink-tier-alert",title:"Pink Badge Activated",message:c?`You've received the ${c} badge.`:"You've received the Pink badge.",timestamp:l??Date.now(),unread:!1,system:!0}:null,[T,c,m,l]),I=reactExports.useMemo(()=>!A||_.some($=>$.id===A.id)?_:[A,..._],[_,A]),k=I.filter(G=>G.unread).length,N=()=>{y(G=>{const $=!G;return!G&&$&&k>0&&p?.(),$})},Y=G=>{try{return new Date(G).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}catch{return""}},z=[{id:"home",label:"Foundation",icon:House},{id:"radar",label:"Radar",icon:Target},{id:"profile",label:"My Wall",icon:Grid3x3},{id:"vault",label:"Vault",icon:Lock}],W=[{id:"all",label:"All"},{id:"payroll",label:"Payroll"},{id:"network",label:"Network"},{id:"recent",label:"Recent"},{id:"feed",label:"Feed"}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:flex fixed left-0 top-0 bottom-0 z-50 flex-col nav-rail",style:{width:"var(--rail-left-width)",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderRight:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"4px 0 20px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b",style:{borderColor:w.border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{style:{color:w.text.primary,fontSize:"1.25rem",letterSpacing:"0.08em"},children:"BRICK"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:N,className:`flex items-center justify-center rounded-full transition-all duration-300 relative overflow-hidden group ${k>0?"animate-pulse":""}`,style:{width:"36px",height:"36px",border:"1px solid rgba(255,255,255,0.12)",background:k>0?"linear-gradient(135deg, rgba(211,47,47,0.15), rgba(198,166,0,0.1), rgba(84,110,122,0.1))":"linear-gradient(135deg, rgba(30,30,30,0.8), rgba(20,20,20,0.9))",boxShadow:k>0?"0 0 20px rgba(211,47,47,0.3), inset 0 1px 0 rgba(255,255,255,0.1)":"inset 0 1px 0 rgba(255,255,255,0.08), 0 2px 8px rgba(0,0,0,0.3)",backdropFilter:"blur(10px)"},title:"Notifications",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),jsxRuntimeExports.jsx(Bell,{size:16,color:k>0?"#ff6b6b":w.text.primary,strokeWidth:k>0?2.5:2,className:"relative z-10 transition-all duration-300"}),k>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center rounded-full text-[0.55rem] font-bold animate-bounce",style:{width:"18px",height:"18px",background:"linear-gradient(135deg, #ff00cc, #ff6b6b)",color:"#ffffff",boxShadow:"0 0 12px rgba(255,0,204,0.6), 0 2px 4px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)",animation:"pulse 2s infinite"},children:k>9?"9+":k})]}),S&&jsxRuntimeExports.jsxs("div",{className:"absolute mt-3 rounded-xl shadow-2xl border",style:{width:"380px",maxHeight:"280px",right:"-200px",backgroundColor:"rgba(18, 18, 18, 0.96)",backdropFilter:"blur(20px)",borderColor:"rgba(198, 167, 0, 0.15)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(198, 167, 0, 0.08), inset 0 -1px 0 rgba(0, 0, 0, 0.3)",zIndex:60},children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b flex items-center justify-between",style:{borderColor:"rgba(198, 167, 0, 0.1)",background:"linear-gradient(180deg, rgba(198, 167, 0, 0.04), rgba(198, 167, 0, 0.01))"},children:[jsxRuntimeExports.jsx("p",{className:"mono text-[0.65rem] tracking-[0.3em] font-medium",style:{color:"rgba(198, 167, 0, 0.8)"},children:"ALERTS"}),jsxRuntimeExports.jsx("button",{onClick:()=>y(!1),className:"rounded-full p-1 hover:bg-white/5 transition-all duration-200","aria-label":"Close notifications",style:{color:"rgba(255,255,255,0.5)"},children:jsxRuntimeExports.jsx(X,{size:14,strokeWidth:2})})]}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"232px"},children:[I.length===0&&jsxRuntimeExports.jsx("div",{className:"px-4 py-6 text-xs text-center",style:{color:"rgba(255,255,255,0.5)"},children:"You're all caught up."}),I.map((G,$)=>{const ge=!!G.system,F=$===I.length-1;return jsxRuntimeExports.jsxs("div",{className:`px-4 py-2 flex items-center gap-2 transition-colors duration-200 hover:bg-white/2 ${F?"":"border-b"}`,style:{borderColor:"rgba(255, 255, 255, 0.03)",background:G.unread?"rgba(198, 167, 0, 0.02)":"transparent"},children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold truncate",style:{color:ge?"rgba(198, 167, 0, 0.95)":"#e0e0e0",letterSpacing:"-0.01em"},children:G.title}),jsxRuntimeExports.jsx("p",{className:"text-[0.7rem] truncate",style:{color:"rgba(255,255,255,0.55)"},children:G.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[jsxRuntimeExports.jsx("span",{className:"text-[0.6rem]",style:{color:"rgba(255,255,255,0.4)"},children:Y(G.timestamp)}),!ge&&jsxRuntimeExports.jsx("button",{onClick:()=>b?.(G.id),className:"p-0.5 rounded hover:bg-white/10 transition-colors","aria-label":"Dismiss notification",style:{color:"rgba(255,255,255,0.4)"},children:jsxRuntimeExports.jsx(X,{size:12,strokeWidth:2})})]})]},G.id)})]})]})]})]})}),r==="home"&&s&&i&&jsxRuntimeExports.jsxs("div",{className:"px-3 py-3 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"FILTERS"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:W.map(G=>{const $=s===G.id;return jsxRuntimeExports.jsx("button",{onClick:()=>{i(G.id),f(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:$?"rgba(211, 47, 47, 0.1)":"transparent"},children:jsxRuntimeExports.jsx("span",{style:{fontSize:"0.82rem",color:$?"#d32f2f":"#a0a0a0",fontWeight:$?600:400},children:G.label})},G.id)})})]}),jsxRuntimeExports.jsxs("nav",{className:"flex-1 px-3 py-3 overflow-y-auto",style:{paddingBottom:"120px"},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:w.text.tertiary,fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NAVIGATE"}),z.map(G=>{const $=G.icon,ge=r===G.id,le=G.id==="profile"&&x,me=`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1.5 transition-all duration-200 hover:opacity-80 ${le?pinkStyles.navPinkButton:""}`,H=`${le?pinkStyles.navPinkLabel:""}`;return jsxRuntimeExports.jsxs("button",{onClick:()=>{a(G.id),f(!1)},style:{backgroundColor:le?"transparent":ge?"rgba(211, 47, 47, 0.1)":"transparent"},className:me,children:[jsxRuntimeExports.jsx($,{size:18,strokeWidth:2,color:le?"#ffffff":ge?w.accent:w.text.secondary,className:"transition-colors"}),jsxRuntimeExports.jsx("span",{className:H,style:{fontSize:le?"1rem":"0.82rem",color:le?"#ffffff":ge?w.accent:w.text.secondary,fontWeight:le?500:ge?600:400},children:G.label})]},G.id)})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-[#333333] space-y-2",style:{position:"sticky",bottom:"96px",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("button",{onClick:u,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.05)"},children:[jsxRuntimeExports.jsx(Settings,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Settings"})]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.1)"},children:E==="dark"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sun,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Light Mode"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Moon,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Dark Mode"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden fixed bottom-20 right-4 z-40",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:w.bg.secondary,border:`1px solid ${w.border}`},title:E==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:E==="dark"?jsxRuntimeExports.jsx(Sun,{size:20,color:w.accent,strokeWidth:2}):jsxRuntimeExports.jsx(Moon,{size:20,color:w.accent,strokeWidth:2})})}),d&&jsxRuntimeExports.jsx("div",{className:"hidden md:block fixed inset-0 bg-black/40 z-40",onClick:()=>f(!1)}),jsxRuntimeExports.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto px-6 py-3",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around items-center",children:z.map(G=>{const $=G.icon,ge=r===G.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>a(G.id),className:"flex flex-col items-center gap-1 py-2 px-4 transition-all",children:[jsxRuntimeExports.jsx($,{size:24,strokeWidth:2,color:ge?"#d32f2f":"#a0a0a0",className:"transition-colors"}),jsxRuntimeExports.jsx("span",{className:"mono transition-colors",style:{fontSize:"0.65rem",color:ge?"#d32f2f":"#a0a0a0"},children:G.label})]},G.id)})})})})]})}function ConnectionAuditModal({isOpen:r,onClose:a,userName:s,userAvatar:i,matchScore:u,mutualArtists:x,diversityScore:h=85,onConnect:p,onConnectSuccess:b}){if(!r)return null;const c=h<30,m=()=>{p(),a(),b()};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:a,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsxs("div",{onClick:l=>l.stopPropagation(),className:"relative w-full max-w-md bg-[#252525] rounded-t-2xl md:rounded-2xl overflow-hidden animate-slide-up",style:{boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Connection Audit"}),jsxRuntimeExports.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-[#333333] transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:i,alt:s,className:"w-16 h-16 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:s}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:["Architect  Diversity: ",h,"/100"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"120",height:"120",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#1a1a1a",strokeWidth:"10",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#546e7a",strokeWidth:"10",fill:"none",strokeDasharray:`${u/100*314} 314`,strokeLinecap:"round"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:[u,"%"]})})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"STRUCTURAL INTEGRITY"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"SHARED TASTE ANALYSIS"}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}})]}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:[x.length," Mutual Artists"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((l,d)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"#252525",color:"#e0e0e0",fontSize:"0.75rem"},children:l},d))})]})]}),c&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:20,color:"#d32f2f",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:jsxRuntimeExports.jsx("strong",{children:"Warning: High Repetition Detected"})}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Potential stream farm. Low diversity score indicates repetitive listening."})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:m,className:"flex-1 py-3 rounded-full transition-all hover:scale-[1.02]",style:{backgroundColor:"#546e7a",color:"#e0e0e0",boxShadow:"0 4px 12px rgba(84, 110, 122, 0.3)"},children:"Send Connection Request"})]})]})]})]})}function ConnectionSuccessModal({isOpen:r,onClose:a,userName:s,userAvatar:i}){if(!r)return null;const u=[{icon:Music,title:"Unlock Playlists",description:"Access their curated collections"},{icon:Shield,title:"Ad-Free Listening",description:"No ads when playing their bricks"},{icon:Zap,title:"Live Updates",description:"See their new bricks in your feed"}];return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:a}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",boxShadow:"0 8px 30px rgba(211, 47, 47, 0.5)"},children:jsxRuntimeExports.jsx(Check,{size:40,color:"#e0e0e0",strokeWidth:3})}),jsxRuntimeExports.jsx("img",{src:i,alt:s,className:"w-16 h-16 rounded-full mx-auto mb-3 border-2",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:["Connected to ",s]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"CONNECTION ESTABLISHED"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:u.map((x,h)=>{const p=x.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsx(p,{size:18,color:"#546e7a"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:x.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:x.description})]})]},h)})}),jsxRuntimeExports.jsx("button",{onClick:a,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",color:"#e0e0e0",boxShadow:"0 4px 20px rgba(211, 47, 47, 0.4)"},children:"Start Exploring"})]})]})}function PatronageLockModal({isOpen:r,onClose:a,artistName:s,daysRemaining:i,onPayEarlyUnlock:u}){if(!r)return null;const x=5;return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:a}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{backgroundColor:"rgba(198, 167, 0, 0.2)",border:"2px solid #c6a700"},children:jsxRuntimeExports.jsx(Lock,{size:36,color:"#c6a700"})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Patronage Slot Locked"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You're currently supporting another artist"})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(Clock,{size:20,color:"#546e7a"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Time Until Unlock"}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.25rem"},children:[i," Days"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-2",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full",style:{width:`${(30-i)/30*100}%`,background:"linear-gradient(to right, #546e7a, #d32f2f)"}})})]}),jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(26, 26, 26, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",lineHeight:"1.6"},children:"Brick encourages long-term support. Your monthly patronage slots unlock every 30 days, ensuring artists receive stable, committed support."})}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{background:"linear-gradient(135deg, rgba(198, 167, 0, 0.1), rgba(198, 167, 0, 0.05))",border:"1px solid rgba(198, 167, 0, 0.3)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[jsxRuntimeExports.jsx(DollarSign,{size:20,color:"#c6a700",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#c6a700"},children:"Early Unlock Available"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:"Switch your patronage immediately for a one-time fee"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Early Unlock Fee"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#c6a700",fontSize:"1.25rem"},children:["$",x.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{u(),a()},className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #c6a700, #a08700)",color:"#1a1a1a",fontWeight:600,boxShadow:"0 4px 20px rgba(198, 167, 0, 0.4)"},children:["Pay $",x.toFixed(2)," to Switch Now"]}),jsxRuntimeExports.jsxs("button",{onClick:a,className:"w-full py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:["Wait ",i," Days"]})]}),jsxRuntimeExports.jsxs("p",{className:"mono text-center mt-4",style:{color:"#666666",fontSize:"0.65rem"},children:["80% OF FEE GOES TO ",s.toUpperCase()]})]})]})}function UserSettingsModal({isOpen:r,onClose:a,userName:s="User",userAvatar:i="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100"}){const[u,x]=reactExports.useState(()=>{const p=localStorage.getItem("userSettings");return p?JSON.parse(p):{monthlySupport:!1,plan:"Sketcher"}});reactExports.useEffect(()=>{localStorage.setItem("userSettings",JSON.stringify(u))},[u]);const h=async()=>{try{const b=(await openPlaylistDB$1()).transaction(["playlists"],"readonly"),c=await new Promise(y=>{const E=b.objectStore("playlists").getAll();E.onsuccess=()=>y(E.result)}),m={exportDate:new Date().toISOString(),userPlan:u.plan,monthlySupport:u.monthlySupport,playlistsCount:c.length,playlists:c.map(y=>({name:y.name,artist:y.artist,trackCount:y.tracks.length,structuralIntegrity:y.structuralIntegrity,createdDate:new Date(parseInt(y.id)).toISOString()}))},l=JSON.stringify(m,null,2),d=new Blob([l],{type:"application/json"}),f=URL.createObjectURL(d),S=document.createElement("a");S.href=f,S.download=`brick-listening-data-${Date.now()}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(f)}catch(p){console.error("Failed to export data:",p),alert("Failed to export listening data")}};return r?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-lg p-6 relative",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[jsxRuntimeExports.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 hover:bg-[#2a2a2a] rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:i,alt:s,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{style:{color:"#e0e0e0"},className:"text-xl font-bold",children:s}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},className:"text-sm",children:"Settings"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},className:"font-semibold mb-3",children:"Plan"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Sketcher","Mason","Architect"].map(p=>jsxRuntimeExports.jsx("button",{onClick:()=>x({...u,plan:p}),className:"p-3 rounded-lg transition-all text-sm font-medium",style:{backgroundColor:u.plan===p?"rgba(211, 47, 47, 0.15)":"#252525",color:u.plan===p?"#d32f2f":"#a0a0a0",border:u.plan===p?"1px solid #d32f2f":"1px solid #333333"},children:p},p))}),jsxRuntimeExports.jsxs("p",{style:{color:"#666666"},className:"text-xs mt-2",children:[u.plan==="Sketcher"&&"Basic features, up to 10 playlists",u.plan==="Mason"&&"Advanced features, up to 50 playlists",u.plan==="Architect"&&"Premium features, unlimited playlists"]})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg",style:{backgroundColor:"#252525"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>x({...u,monthlySupport:!u.monthlySupport}),className:"w-full flex items-center justify-between cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Heart,{size:18,color:u.monthlySupport?"#d32f2f":"#a0a0a0",fill:u.monthlySupport?"#d32f2f":"none"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"font-medium",children:"Monthly Support"}),jsxRuntimeExports.jsxs("p",{style:{color:"#666666"},className:"text-xs",children:["$",u.monthlySupport?"9.99":"0","/month"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-6 rounded-full flex items-center px-1 transition-colors",style:{backgroundColor:u.monthlySupport?"#d32f2f":"#444444"},children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full bg-white transition-transform",style:{transform:u.monthlySupport?"translateX(16px)":"translateX(0)"}})})]})}),jsxRuntimeExports.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg mb-4 transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"#252525",color:"#e0e0e0",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export Listening Data"]}),jsxRuntimeExports.jsx("p",{style:{color:"#666666"},className:"text-xs text-center",children:"Your settings are saved locally. Monthly support is for creators."})]})}):null}const openPlaylistDB$1=()=>openBrickDB(),DB_NAME="BrickAuthDB",DB_VERSION=1,USERS_STORE="users",CURRENT_USER_KEY="currentUser",openAuthDB=()=>new Promise((r,a)=>{const s=indexedDB.open(DB_NAME,DB_VERSION);s.onerror=()=>a(s.error),s.onsuccess=()=>r(s.result),s.onupgradeneeded=i=>{const u=i.target.result;u.objectStoreNames.contains(USERS_STORE)||u.createObjectStore(USERS_STORE,{keyPath:"id"}).createIndex("email","email",{unique:!0})}}),generateAvatar=r=>{const a=r.split("").reduce((s,i)=>s+i.charCodeAt(0),0)%360;return`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=${a.toString(16).padStart(6,"0")}&color=fff&size=400`},hashPassword=async r=>{const s=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(i)).map(x=>x.toString(16).padStart(2,"0")).join("")},registerUser=async(r,a,s)=>{try{const i=await openAuthDB(),h=i.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email");if(await new Promise(S=>{const y=h.get(r);y.onsuccess=()=>S(y.result),y.onerror=()=>S(void 0)}))throw new Error("User already exists with this email");const b=await hashPassword(a),m={id:`user-${Date.now()}`,email:r,password:b,name:s,avatar:generateAvatar(s),diversityScore:0,connectionsUsed:0,connectionsMax:20,tier:"Foundation",createdAt:Date.now()},d=i.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((S,y)=>{const E=d.add(m);E.onsuccess=()=>S(),E.onerror=()=>y(E.error)});const f={id:m.id,name:m.name,avatar:m.avatar,bio:m.bio,diversityScore:m.diversityScore,connectionsUsed:m.connectionsUsed,connectionsMax:m.connectionsMax,tier:m.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(f)),f}catch(i){throw console.error("Registration error:",i),i}},loginUser=async(r,a)=>{try{const x=(await openAuthDB()).transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email"),h=await new Promise(c=>{const m=x.get(r);m.onsuccess=()=>c(m.result),m.onerror=()=>c(void 0)});if(!h)throw new Error("User not found");const p=await hashPassword(a);if(h.password!==p)throw new Error("Invalid password");const b={id:h.id,name:h.name,avatar:h.avatar,bio:h.bio,diversityScore:h.diversityScore,connectionsUsed:h.connectionsUsed,connectionsMax:h.connectionsMax,tier:h.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(b)),b}catch(s){throw console.error("Login error:",s),s}},getCurrentUser=()=>{try{const r=localStorage.getItem(CURRENT_USER_KEY);return r?JSON.parse(r):null}catch(r){return console.error("Error getting current user:",r),null}},logoutUser=()=>{localStorage.removeItem(CURRENT_USER_KEY)},updateUser=async r=>{try{const a=await openAuthDB(),i=a.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE),u=await new Promise(b=>{const c=i.get(r.id);c.onsuccess=()=>b(c.result),c.onerror=()=>b(void 0)});if(!u)throw new Error("User not found in database");const x={...u,name:r.name,avatar:r.avatar,bio:r.bio,diversityScore:r.diversityScore,connectionsUsed:r.connectionsUsed,connectionsMax:r.connectionsMax,tier:r.tier},p=a.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((b,c)=>{const m=p.put(x);m.onsuccess=()=>b(),m.onerror=()=>c(m.error)}),localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(r))}catch(a){throw console.error("Error updating user:",a),a}},auth=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser,loginUser,logoutUser,registerUser,updateUser},Symbol.toStringTag,{value:"Module"}));function App(){const{colors:r}=useTheme$1(),{wallState:a,pinkTierUnlocked:s,pinkUnlockTimestamp:i,themeEnabled:u,setThemeEnabled:x}=useWall(),h=`app-shell brick-shell wall-state-${a.toLowerCase()}`,p=J=>{if(typeof J=="string"){if(J.includes(":"))return J;const Me=parseFloat(J);if(isNaN(Me))return"0:00";const ze=Math.floor(Me/60),Fe=Math.floor(Me%60);return`${ze}:${Fe.toString().padStart(2,"0")}`}else{if(isNaN(J))return"0:00";const Me=Math.floor(J/60),ze=Math.floor(J%60);return`${Me}:${ze.toString().padStart(2,"0")}`}},b=J=>J.split(/\s+/).filter(Boolean).map(Me=>Me.charAt(0).toUpperCase()+Me.slice(1).toLowerCase()).join(" ")||"Foundation",[c,m]=reactExports.useState("login"),[l,d]=reactExports.useState(null);reactExports.useEffect(()=>{document.title="Brick",(async()=>{const{getCurrentUser:Me}=await __vitePreload(async()=>{const{getCurrentUser:Fe}=await Promise.resolve().then(()=>auth);return{getCurrentUser:Fe}},void 0),ze=Me();ze&&(d(ze),m("authenticated"))})()},[]);const[f,S]=reactExports.useState("home"),[y,E]=reactExports.useState("all"),[g,w]=reactExports.useState(!1),[T,_]=reactExports.useState(!1),[A,I]=reactExports.useState(null),[k,N]=reactExports.useState(null),[Y,z]=reactExports.useState([]),[W,G]=reactExports.useState(null),[$,ge]=reactExports.useState(!1),F=A??k,le=useTrackAudioMeta(F),me=le?.codecLabel??F?.codecLabel??F?.quality?.toUpperCase(),H=le?.bitDepth??F?.bitDepth,pe=le?.sampleRate??F?.sampleRate,L=le?.bitrateKbps??F?.bitrateKbps,D=!!(F?.file||F?.audioUrl&&!String(F.audioUrl).startsWith("http"));reactExports.useEffect(()=>{if(!s){$&&ge(!1),u&&x(!1);return}u!==$&&ge(u)},[$,s,u,x]);const K=J=>{s&&(ge(J),x(J))},ae=J=>{W?.invalidateWallSession?.(J)},[oe,ue]=reactExports.useState(!1),[we,xe]=reactExports.useState(null),[se,Z]=reactExports.useState(!1),[be,_e]=reactExports.useState(!1),[te,q]=reactExports.useState(null),[Q,ce]=reactExports.useState(!1),[Ee,je]=reactExports.useState(!1),[Ce,ee]=reactExports.useState(!1),[Se,Te]=reactExports.useState(!1),[ye,Ie]=reactExports.useState(!1),He=J=>{d(J),m("authenticated")},Ke=()=>{(async()=>{const{getCurrentUser:Me}=await __vitePreload(async()=>{const{getCurrentUser:Fe}=await Promise.resolve().then(()=>auth);return{getCurrentUser:Fe}},void 0),ze=Me();ze&&d(ze)})(),m("import")},Je=J=>{console.log("Importing from:",J),m("authenticated")},M=()=>{m("authenticated")},R=async J=>{ae("playlist-start");try{const Fe=await openPlaylistDB(),lt=Fe.transaction(["playlists"],"readonly").objectStore("playlists"),pt=await new Promise(ir=>{const qt=lt.get(J);qt.onsuccess=()=>ir(qt.result),qt.onerror=()=>ir(void 0)});if(pt){if(!pt.tracks||pt.tracks.length===0){console.error("Local playlist has no tracks");return}const qt=Fe.transaction(["localTracks"],"readonly").objectStore("localTracks"),It=await Promise.all(pt.tracks.map(async st=>{let Dt=st.audioUrl,nt=st.file,kt=st.bitDepth,Bt=st.sampleRate,At=st.bitrateKbps,Gt=st.codecLabel;if(!Dt||!Dt.startsWith("http"))try{const ar=await new Promise(mt=>{const Dn=qt.get(st.id);Dn.onsuccess=()=>mt(Dn.result),Dn.onerror=()=>mt(null)});ar&&ar.file&&(Dt=URL.createObjectURL(ar.file),nt=ar.file,kt=kt??ar.bitDepth,Bt=Bt??ar.sampleRate,At=At??ar.bitrateKbps,Gt=Gt??ar.codecLabel,console.log("Recreated blob URL for track:",st.title))}catch(ar){console.error("Failed to load local track:",ar)}return{id:st.id,title:st.title,name:st.title,artist:st.artist,album:st.album,coverImage:st.coverArt,coverArt:st.coverArt,audioUrl:Dt||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:st.quality,duration:st.duration,bitDepth:kt,sampleRate:Bt,bitrateKbps:At,codecLabel:Gt,file:nt}}));console.log("Loaded local playlist with tracks:",It),z(It),N(It[0]),console.log("Adding local playlist to recently played:",pt.name),addRecentlyPlayedPlaylist({playlistId:pt.id,playlistName:pt.name,coverImage:pt.coverImage,creatorName:typeof pt.creator=="string"?pt.creator:pt.creator?.name||"Your Collection",trackCount:pt.trackCount,structuralIntegrity:pt.structuralIntegrity}).then(()=>{console.log("Successfully added local playlist to recently played")}).catch(st=>console.error("Failed to track recently played playlist:",st));const ut=It[0],Wt={id:ut.id,title:ut.name,artist:ut.artist,album:ut.album,coverArt:ut.coverImage,audioUrl:ut.audioUrl,quality:ut.quality,duration:"0:00",isPatronage:!1,bitDepth:ut.bitDepth,sampleRate:ut.sampleRate,bitrateKbps:ut.bitrateKbps,codecLabel:ut.codecLabel,file:ut.file};I(Wt),w(!0),_(!0);return}}catch(Fe){console.error("Error loading playlist from IndexedDB:",Fe)}const Me=mockPlaylists.find(Fe=>Fe.id===J);if(!Me||!Me.tracks||Me.tracks.length===0){console.error("Playlist not found or has no tracks");return}console.log("Adding online playlist to recently played:",Me.name),addRecentlyPlayedPlaylist({playlistId:Me.id,playlistName:Me.name,coverImage:Me.coverImage,creatorName:typeof Me.creator=="string"?Me.creator:Me.creator?.name||"Your Collection",trackCount:Me.trackCount,structuralIntegrity:Me.structuralIntegrity}).then(()=>{console.log("Successfully added online playlist to recently played")}).catch(Fe=>console.error("Failed to track recently played playlist:",Fe));const ze=Me.tracks.map(Fe=>({id:Fe.id,name:Fe.title,artist:Fe.artist,album:Fe.album,coverImage:Fe.coverArt,audioUrl:Fe.audioUrl||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:Fe.quality,bitDepth:Fe.bitDepth,sampleRate:Fe.sampleRate,bitrateKbps:Fe.bitrateKbps,codecLabel:Fe.codecLabel,file:Fe.file}));z(ze),N(ze[0]),I(ze[0]),w(!0),_(!0)},C=J=>{ae("local-track"),console.log("Playing local track:",J),addRecentlyPlayedTrack({trackId:J.id,trackTitle:J.name,artistName:J.artist||"Unknown Artist",coverArt:J.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:J.url,playedAt:Date.now(),album:J.album,quality:J.format,codecLabel:J.codecLabel,bitDepth:J.bitDepth,sampleRate:J.sampleRate,bitrateKbps:J.bitrateKbps,durationSeconds:typeof J.duration=="number"?J.duration:void 0}).catch(Fe=>console.error("Failed to track recently played track:",Fe));const Me={id:J.id,title:J.name,name:J.name,artist:J.artist||"Unknown Artist",album:J.album||"Unknown Album",coverImage:J.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:J.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:J.url,quality:J.format,duration:J.duration,bitDepth:J.bitDepth,sampleRate:J.sampleRate,bitrateKbps:J.bitrateKbps,codecLabel:J.codecLabel,file:J.file},ze={id:J.id,title:J.name,name:J.name,artist:J.artist||"Unknown Artist",album:J.album||"Unknown Album",coverArt:J.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:J.url,quality:J.format,duration:p(J.duration),isPatronage:!1,bitDepth:J.bitDepth,sampleRate:J.sampleRate,bitrateKbps:J.bitrateKbps,codecLabel:J.codecLabel,file:J.file};z([Me]),N(Me),I(ze),w(!0),_(!0)},U=J=>{ae("local-album"),console.log("Playing local album with",J.length,"tracks");const Me=J.map(Ye=>({id:Ye.id,title:Ye.name,name:Ye.name,artist:Ye.artist||"Unknown Artist",album:Ye.album||"Unknown Album",coverImage:Ye.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:Ye.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:Ye.url,quality:Ye.format,duration:Ye.duration,bitDepth:Ye.bitDepth,sampleRate:Ye.sampleRate,bitrateKbps:Ye.bitrateKbps,codecLabel:Ye.codecLabel,file:Ye.file})),ze=J[0],Fe={id:ze.id,title:ze.name,name:ze.name,artist:ze.artist||"Unknown Artist",album:ze.album||"Unknown Album",coverArt:ze.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ze.url,quality:ze.format,duration:ze.duration.toString(),isPatronage:!1,bitDepth:ze.bitDepth,sampleRate:ze.sampleRate,bitrateKbps:ze.bitrateKbps,codecLabel:ze.codecLabel,file:ze.file};z(Me),N(Me[0]),I(Fe),w(!0),_(!0)},ne=J=>{N(J);const Me={id:J.id,title:J.name,artist:J.artist,album:J.album||"Unknown Album",coverArt:J.coverImage,audioUrl:J.audioUrl,quality:J.quality||"MP3",duration:J.duration||"3:45",isPatronage:J.isPatronage||!1,bitDepth:J.bitDepth,sampleRate:J.sampleRate,bitrateKbps:J.bitrateKbps,codecLabel:J.codecLabel,file:J.file};I(Me),console.log("Track changed to:",Me.title)},fe=J=>{xe(J),ue(!0)},ke=()=>{const J=mockArtists.find(Me=>Me.name===A?.artist);J&&(w(!1),xe(J.id),ue(!0))},Ve=J=>{q(J),_e(!0)},tt=()=>{console.log("Connection request sent"),_e(!1),ce(!0)},et=async(J,Me)=>{console.log("Playlist published:",J,Me);const ze=sessionStorage.getItem("playlistCustomCover");sessionStorage.removeItem("playlistCustomCover");const Fe={id:Date.now().toString(),name:J,coverImage:ze||Me[0]?.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",customCoverImage:ze||void 0,trackCount:Me.length,creator:l?.id||"user-1",likes:0,isLocked:!1,structuralIntegrity:Math.round(rt(Me)),tracks:Me};try{const pt=(await openPlaylistDB()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise((ir,qt)=>{const It=pt.add(Fe);It.onsuccess=()=>ir(),It.onerror=()=>qt(It.error)}),console.log("Playlist saved successfully to IndexedDB")}catch(Ye){console.error("Failed to save playlist:",Ye),alert("Failed to save playlist. Please try again.");return}Z(!1),S("profile"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("switchToLocalWall"))},100)},rt=J=>{if(J.length===0)return 0;if(J.length===1)return 100;const Me={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],indie_adjacent:["indie","indie rock","alternative rock","shoegaze","post-rock","dream pop"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},ze=nt=>{if(!nt)return"unknown";const kt=nt.toLowerCase().trim();for(const[Bt,At]of Object.entries(Me))for(const Gt of At)if(kt.includes(Gt)||Gt.includes(kt))return Gt;return kt},Fe=J.map(nt=>ze(nt.genre)),Ye=Fe.filter(nt=>nt==="unknown").length;if(Ye===J.length)return 50;const lt=Ye/J.length*20,pt=Fe.map(nt=>{const kt=[];return Object.entries(Me).forEach(([Bt,At])=>{At.includes(nt)&&kt.push(Bt)}),{genre:nt,groups:kt}}),ir=Fe.filter(nt=>nt!=="unknown"),qt=new Set(ir);if(qt.size===1&&Ye===0)return 100;if(qt.size===1&&Ye>0)return Math.max(50,100-lt);let It=0,ut=0;const Wt={indie:{indie:100,"indie rock":95,"alternative rock":85,shoegaze:75,"dream pop":70,"post-rock":65,"alt-rock":90,alternative:85,"indie pop":90,punk:60,"psychedelic rock":60,rap:10,"hip hop":10,trap:5,metal:15,"heavy metal":10,country:20},shoegaze:{shoegaze:100,indie:75,"indie rock":80,"dream pop":85,"post-rock":80,ambient:75,"alternative rock":70,ethereal:90,"noise rock":70,rap:5,"hip hop":5,country:10,metal:10},"post-rock":{"post-rock":100,indie:65,shoegaze:80,ambient:80,"alternative rock":75,"dream pop":75,"progressive rock":80,"art rock":85,rap:10,"hip hop":10,metal:20,pop:15},rock:{rock:100,"alternative rock":90,"indie rock":85,"hard rock":85,punk:80,"garage rock":85,"psychedelic rock":85,"art rock":80,"progressive rock":80,rap:20,"hip hop":15,country:30},metal:{metal:100,"heavy metal":95,"thrash metal":90,"death metal":90,"black metal":90,metalcore:90,"doom metal":95,"progressive metal":85,"nu metal":85,rock:50,punk:40,rap:15,"hip hop":10},electronic:{electronic:100,house:95,techno:95,ambient:85,idm:85,downtempo:80,edm:90,trance:90,dubstep:80,"synth pop":75,dance:90,pop:60,indie:50,rap:40},"hip hop":{"hip hop":100,rap:95,trap:90,drill:85,grime:85,"r&b":85,rnb:85,pop:50,indie:15,rock:20,country:10},pop:{pop:100,"synth pop":95,"indie pop":90,electropop:90,"k-pop":85,electronic:70,"hip hop":40,indie:60,rock:40}};for(let nt=0;nt<pt.length;nt++)for(let kt=nt+1;kt<pt.length;kt++){if(Fe[nt]==="unknown"||Fe[kt]==="unknown")continue;ut++;const Bt=Fe[nt],At=Fe[kt];let Gt=50;Wt[Bt]&&Wt[Bt][At]!==void 0?Gt=Wt[Bt][At]:Wt[At]&&Wt[At][Bt]!==void 0?Gt=Wt[At][Bt]:Bt===At&&(Gt=100),It+=Gt}if(ut===0)return 50;let Dt=It/ut-lt;return Math.max(0,Math.round(Dt))},Ze=J=>{J==="feed"?S("feed"):E(J)},Mt=mockArtists.find(J=>J.id===we),wt=mockConnections$1.find(J=>J.user.id===te),Ut=l?.name||"Guest",bt=(l?.tier||"Foundation").trim(),nr=b(bt),Vt=`Pink ${nr}`,Ct=$?Vt:nr.toUpperCase(),B={home:"HOME GRID",radar:"RADAR SCAN",profile:"PERSONAL WALL",vault:"VAULT",feed:"NEIGHBORHOOD"}[f],O=f==="feed"?"home":f,Re=[{label:"OPERATOR",value:Ut},{label:"TIER",value:Ct,isPink:$},{label:"CURRENT PAGE",value:B},{label:"SYSTEM",value:"NO ALERT"}],Ae=(J,Me)=>{console.log("Playing track from radar:",J.title),ae("radar-play"),z(Me),N(J),I(J),w(!0),_(!0)};return c==="login"?jsxRuntimeExports.jsx(LoginScreen,{onLogin:He,onSignup:Ke}):c==="import"?jsxRuntimeExports.jsx(ImportScreen,{onImport:Je,onSkip:M}):jsxRuntimeExports.jsxs("div",{className:h,style:{backgroundColor:r.bg.primary},children:[jsxRuntimeExports.jsx(WallOverlay,{enabled:$}),jsxRuntimeExports.jsx(WallDebugPanel,{isPinkEnabled:$,onPinkOverride:K}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-x-hidden pb-32 app-main-rails",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto responsive-main-shell",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 mb-4 px-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center justify-center rounded-[4px] border px-6 py-2 command-bar",style:{background:"linear-gradient(135deg, rgba(18,18,18,0.92), rgba(28,18,18,0.85))",borderColor:"rgba(211,47,47,0.25)",backdropFilter:"blur(18px)",boxShadow:"0 8px 24px rgba(0,0,0,0.45), 0 0 30px rgba(161,24,24,0.35)",width:"calc(100% + 40px)",marginLeft:"-20px",marginRight:"-20px"},children:Re.map((J,Me)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center uppercase command-bar-item",children:[jsxRuntimeExports.jsxs("span",{className:"mono command-bar-label",children:[J.label,":"]}),jsxRuntimeExports.jsx("span",{className:`mono command-bar-value ${J.isPink?pinkStyles.pinkBadgeText:""}`,children:J.value}),Me<Re.length-1&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#444444",letterSpacing:"0"},children:""})]},`${J.label}-${Me}`))})}),f==="home"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(HomeScreenV2,{onPlaylistClick:R,onArtistPress:fe,onFeedClick:()=>S("feed"),activeFilter:y,onFilterChange:Ze,onLocalTrackPlay:C,onLocalAlbumPlay:U},"home-screen-stable")}),f==="radar"&&jsxRuntimeExports.jsx(RadarScreen,{onUserClick:Ve,onTrackClick:Ae}),f==="profile"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ProfileScreen,{onPlaylistClick:R,onCreatePlaylist:()=>Z(!0),currentUser:l,isPinkMode:$,onPinkToggle:K,pinkTierUnlocked:s})}),f==="vault"&&jsxRuntimeExports.jsx(VaultScreen,{onOpenConnectionManagement:()=>ee(!0),onSignOut:()=>{try{logoutUser()}catch{}d(null),m("login"),S("home")}})]})}),(k||!k)&&jsxRuntimeExports.jsx("div",{className:"hidden md:flex md:flex-col border-l overflow-hidden fixed right-0 top-0 bottom-0 z-30 now-playing-rail",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.05)",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 flex flex-col items-center",style:{width:"100%",maxWidth:"min(320px, 100%)",minWidth:0},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-2 text-center",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NOW PLAYING"}),k?jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg overflow-hidden mx-auto cursor-pointer transition-all duration-200 hover:scale-105",style:{width:"180px",height:"180px",maxWidth:"180px",minWidth:"180px",boxShadow:"0 4px 16px rgba(211, 47, 47, 0.15)"},onClick:()=>w(!0),children:jsxRuntimeExports.jsx(ImageWithFallback,{src:k.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",alt:k.name,className:"w-full h-full object-cover"})}):jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg mx-auto flex items-center justify-center",style:{width:"180px",height:"180px",border:"1px dashed rgba(255,255,255,0.1)",backgroundColor:"rgba(26,26,26,0.6)"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#888888",fontSize:"0.8rem"},children:"No track playing"})}),k&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center px-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[me&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem",minWidth:"72px"},children:String(me).toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded flex items-center gap-1",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[D?jsxRuntimeExports.jsx(HardDrive,{size:12,color:"#e0e0e0"}):jsxRuntimeExports.jsx(Cloud,{size:12,color:"#e0e0e0"}),D?"Local":"Cloud"]}),(H||pe)&&jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[H?`${H}-bit`:"",H&&pe?" / ":"",pe?`${pe}kHz`:""]}),L&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:formatBitrate(L)})]}),jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"text-sm font-bold mb-2 truncate w-full min-w-0 cursor-pointer hover:text-[#d32f2f] transition-colors",onClick:()=>w(!0),title:k.name,children:k.name}),jsxRuntimeExports.jsx("p",{style:{color:"#888888"},className:"text-xs truncate w-full min-w-0 mb-3",title:k.artist,children:k.artist}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-1 mb-2 cursor-pointer",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${W?.duration?W.currentTime/W.duration*100:0}%`,background:"linear-gradient(to right, #d32f2f, #b71c1c)",boxShadow:"0 0 10px rgba(211, 47, 47, 0.5)"}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[jsxRuntimeExports.jsx("span",{children:W?.formatTime?W.formatTime(W.currentTime):"0:00"}),jsxRuntimeExports.jsx("span",{children:W?.formatTime?W.formatTime(W.duration):"0:00"})]})]})]}),Y.length>1&&jsxRuntimeExports.jsxs("div",{className:"mt-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"px-4 mb-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, transparent, rgba(211, 47, 47, 0.3), transparent)"}}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.6rem",letterSpacing:"0.15em",fontWeight:700,textTransform:"uppercase",textShadow:"0 0 10px rgba(211, 47, 47, 0.3)"},children:"Up Next"}),jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, rgba(211, 47, 47, 0.3), transparent)"}})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 flex flex-col gap-0 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[(()=>{const J=Y.findIndex(ze=>ze.id===k?.id),Me=Y.slice(J+1,J+4);return Me.map((ze,Fe)=>jsxRuntimeExports.jsxs("div",{className:"w-full min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"py-2.5 px-2 transition-all duration-300 cursor-pointer group w-full min-w-0 rounded",style:{backgroundColor:"transparent",border:"1px solid transparent"},onMouseEnter:Ye=>{Ye.currentTarget.style.backgroundColor="rgba(211, 47, 47, 0.05)",Ye.currentTarget.style.borderColor="rgba(211, 47, 47, 0.2)"},onMouseLeave:Ye=>{Ye.currentTarget.style.backgroundColor="transparent",Ye.currentTarget.style.borderColor="transparent"},onClick:()=>{const Ye=Y.findIndex(lt=>lt.id===ze.id);if(Ye!==-1){const lt=Y[Ye];ae("queue-jump"),N(lt),I({id:lt.id,title:lt.title||lt.name||"Untitled",name:lt.name||lt.title,artist:lt.artist,album:lt.album||"Unknown Album",coverArt:lt.coverArt||lt.coverImage,audioUrl:lt.audioUrl,quality:lt.quality||"MP3",duration:"0:00",isPatronage:!1})}},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full min-w-0 max-w-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center mono",style:{backgroundColor:"rgba(211, 47, 47, 0.08)",border:"1px solid rgba(211, 47, 47, 0.2)",color:"#d32f2f",fontSize:"0.7rem",fontWeight:700,letterSpacing:"0.05em",clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)",textShadow:"0 0 8px rgba(211, 47, 47, 0.2)"},children:String(J+Fe+2).padStart(2,"0")}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e8e8e8",fontSize:"0.825rem",fontWeight:600,letterSpacing:"0.02em",lineHeight:"1.2",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"truncate w-full min-w-0 group-hover:text-[#d32f2f] transition-colors",title:ze.name,children:ze.name}),jsxRuntimeExports.jsx("p",{style:{color:"#7a7a7a",fontSize:"0.7rem",fontWeight:500,letterSpacing:"0.03em",lineHeight:"1.3",marginTop:"2px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"truncate w-full min-w-0",title:ze.artist,children:ze.artist})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#d32f2f",strokeWidth:"2",children:jsxRuntimeExports.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"#d32f2f"})})})]})}),Fe<Me.length-1&&jsxRuntimeExports.jsx("div",{className:"mx-10 my-1.5",style:{height:"1px",background:"linear-gradient(to right, transparent, rgba(255, 255, 255, 0.06), transparent)"}})]},`${ze.id}-${Fe}`))})(),(()=>{const J=Y.findIndex(ze=>ze.id===k?.id),Me=Y.length-J-4;return Me>0&&jsxRuntimeExports.jsx("div",{className:"py-3 w-full mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.08em",fontWeight:600},children:["+",Me," more"]}),jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}})]})})})()]})]})]})}),f==="feed"&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 border-b",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",borderColor:r.border},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"The Neighborhood"}),jsxRuntimeExports.jsx("button",{onClick:()=>S("home"),className:"px-4 py-2 rounded-full transition-colors hover:bg-[#2a2a2a]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",color:"#a0a0a0"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:"Close"})})]}),jsxRuntimeExports.jsx(FeedScreen,{currentUser:l})]})}),jsxRuntimeExports.jsx(Navigation,{activeTab:O,onTabChange:J=>S(J),activeFilter:f==="home"?y:void 0,onFilterChange:f==="home"?Ze:void 0,onSettingsClick:()=>Te(!0),isPinkMode:$,pinkTierLabel:Vt,pinkTierUnlocked:s,pinkUnlockTimestamp:i}),g&&W&&A&&jsxRuntimeExports.jsx(PlayerApple,{track:A,connectionName:"Jordan Rivera",isPlaying:W.isPlaying,onPlayPause:W.togglePlayPause,onNext:W.handleNext,onPrevious:W.handlePrevious,currentTime:W.currentTime,duration:W.duration,formatTime:W.formatTime,volumeLevel:W.volume,onVolumeChange:W.setVolume,eqBands:W.eqBands?{low:W.eqBands.bass,mid:W.eqBands.mid,high:W.eqBands.treble}:void 0,onEqChange:W.setEqBands?J=>W.setEqBands({bass:J.low,mid:J.mid,treble:J.high}):void 0,onClose:()=>w(!1),isPatronageUnlock:!1,onArtistClick:ke}),oe&&Mt&&jsxRuntimeExports.jsx(ArtistProfileScreenV2,{artist:Mt,onClose:()=>ue(!1),onShowPatronageLock:()=>je(!0)}),se&&jsxRuntimeExports.jsx(PlaylistCreationScreen,{onClose:()=>Z(!1),onPublish:et}),be&&wt&&jsxRuntimeExports.jsx(ConnectionAuditModal,{isOpen:be,onClose:()=>_e(!1),userName:wt.user.name,userAvatar:wt.user.avatar,matchScore:wt.matchScore,mutualArtists:wt.mutualArtists,onConnect:tt,onConnectSuccess:()=>ce(!0)}),Q&&wt&&jsxRuntimeExports.jsx(ConnectionSuccessModal,{isOpen:Q,onClose:()=>ce(!1),userName:wt.user.name,userAvatar:wt.user.avatar}),Ee&&Mt&&jsxRuntimeExports.jsx(PatronageLockModal,{isOpen:Ee,onClose:()=>je(!1),artistName:Mt.name,daysRemaining:18,onPayEarlyUnlock:()=>{console.log("Early unlock paid"),je(!1)}}),Ce&&jsxRuntimeExports.jsx(ConnectionManagementScreen,{isOpen:Ce,onClose:()=>ee(!1)}),jsxRuntimeExports.jsx(UserSettingsModal,{isOpen:Se,onClose:()=>Te(!1),userName:l?.name||"Guest",userAvatar:l?.avatar||""}),jsxRuntimeExports.jsx(MusicPlayer,{currentTrack:k,playlist:Y,onTrackChange:ne,isVisible:!0,onControlsReady:G,sidebarCollapsed:ye,externalIsPlaying:T,onCreatePlaylist:()=>Z(!0),onExpandPlayer:()=>{!A&&k&&I({id:k.id,title:k.title||k.name||"Untitled",name:k.name||k.title,artist:k.artist,album:k.album||"Unknown Album",coverArt:k.coverArt||k.coverImage,audioUrl:k.audioUrl,quality:k.quality||"MP3",duration:"0:00",isPatronage:!1}),w(!0)}})]})}const openPlaylistDB=()=>openBrickDB();clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(WallProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
