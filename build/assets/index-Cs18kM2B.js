(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(l){if(l.ep)return;l.ep=!0;const f=o(l);fetch(l.href,f)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),d=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.iterator;function h(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function S(D,G,ae){this.props=D,this.context=G,this.refs=w,this.updater=ae||m}S.prototype.isReactComponent={},S.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=S.prototype;function T(D,G,ae){this.props=D,this.context=G,this.refs=w,this.updater=ae||m}var C=T.prototype=new j;C.constructor=T,E(C,S.prototype),C.isPureReactComponent=!0;var B=Array.isArray,L=Object.prototype.hasOwnProperty,_={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function P(D,G,ae){var ne,fe={},xe=null,ke=null;if(G!=null)for(ne in G.ref!==void 0&&(ke=G.ref),G.key!==void 0&&(xe=""+G.key),G)L.call(G,ne)&&!R.hasOwnProperty(ne)&&(fe[ne]=G[ne]);var te=arguments.length-2;if(te===1)fe.children=ae;else if(1<te){for(var ie=Array(te),be=0;be<te;be++)ie[be]=arguments[be+2];fe.children=ie}if(D&&D.defaultProps)for(ne in te=D.defaultProps,te)fe[ne]===void 0&&(fe[ne]=te[ne]);return{$$typeof:r,type:D,key:xe,ref:ke,props:fe,_owner:_.current}}function le(D,G){return{$$typeof:r,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function W(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function V(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return G[ae]})}var se=/\/+/g;function Q(D,G){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):G.toString(36)}function J(D,G,ae,ne,fe){var xe=typeof D;(xe==="undefined"||xe==="boolean")&&(D=null);var ke=!1;if(D===null)ke=!0;else switch(xe){case"string":case"number":ke=!0;break;case"object":switch(D.$$typeof){case r:case s:ke=!0}}if(ke)return ke=D,fe=fe(ke),D=ne===""?"."+Q(ke,0):ne,B(fe)?(ae="",D!=null&&(ae=D.replace(se,"$&/")+"/"),J(fe,G,ae,"",function(be){return be})):fe!=null&&(W(fe)&&(fe=le(fe,ae+(!fe.key||ke&&ke.key===fe.key?"":(""+fe.key).replace(se,"$&/")+"/")+D)),G.push(fe)),1;if(ke=0,ne=ne===""?".":ne+":",B(D))for(var te=0;te<D.length;te++){xe=D[te];var ie=ne+Q(xe,te);ke+=J(xe,G,ae,ie,fe)}else if(ie=h(D),typeof ie=="function")for(D=ie.call(D),te=0;!(xe=D.next()).done;)xe=xe.value,ie=ne+Q(xe,te++),ke+=J(xe,G,ae,ie,fe);else if(xe==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ke}function ge(D,G,ae){if(D==null)return D;var ne=[],fe=0;return J(D,ne,"","",function(xe){return G.call(ae,xe,fe++)}),ne}function we(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var Pe={current:null},q={transition:null},me={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:q,ReactCurrentOwner:_};function A(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:ge,forEach:function(D,G,ae){ge(D,function(){G.apply(this,arguments)},ae)},count:function(D){var G=0;return ge(D,function(){G++}),G},toArray:function(D){return ge(D,function(G){return G})||[]},only:function(D){if(!W(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},react_production_min.Component=S,react_production_min.Fragment=o,react_production_min.Profiler=l,react_production_min.PureComponent=T,react_production_min.StrictMode=i,react_production_min.Suspense=y,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,react_production_min.act=A,react_production_min.cloneElement=function(D,G,ae){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ne=E({},D.props),fe=D.key,xe=D.ref,ke=D._owner;if(G!=null){if(G.ref!==void 0&&(xe=G.ref,ke=_.current),G.key!==void 0&&(fe=""+G.key),D.type&&D.type.defaultProps)var te=D.type.defaultProps;for(ie in G)L.call(G,ie)&&!R.hasOwnProperty(ie)&&(ne[ie]=G[ie]===void 0&&te!==void 0?te[ie]:G[ie])}var ie=arguments.length-2;if(ie===1)ne.children=ae;else if(1<ie){te=Array(ie);for(var be=0;be<ie;be++)te[be]=arguments[be+2];ne.children=te}return{$$typeof:r,type:D.type,key:fe,ref:xe,props:ne,_owner:ke}},react_production_min.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:f,_context:D},D.Consumer=D},react_production_min.createElement=P,react_production_min.createFactory=function(D){var G=P.bind(null,D);return G.type=D,G},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(D){return{$$typeof:c,render:D}},react_production_min.isValidElement=W,react_production_min.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:we}},react_production_min.memo=function(D,G){return{$$typeof:u,type:D,compare:G===void 0?null:G}},react_production_min.startTransition=function(D){var G=q.transition;q.transition={};try{D()}finally{q.transition=G}},react_production_min.unstable_act=A,react_production_min.useCallback=function(D,G){return Pe.current.useCallback(D,G)},react_production_min.useContext=function(D){return Pe.current.useContext(D)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(D){return Pe.current.useDeferredValue(D)},react_production_min.useEffect=function(D,G){return Pe.current.useEffect(D,G)},react_production_min.useId=function(){return Pe.current.useId()},react_production_min.useImperativeHandle=function(D,G,ae){return Pe.current.useImperativeHandle(D,G,ae)},react_production_min.useInsertionEffect=function(D,G){return Pe.current.useInsertionEffect(D,G)},react_production_min.useLayoutEffect=function(D,G){return Pe.current.useLayoutEffect(D,G)},react_production_min.useMemo=function(D,G){return Pe.current.useMemo(D,G)},react_production_min.useReducer=function(D,G,ae){return Pe.current.useReducer(D,G,ae)},react_production_min.useRef=function(D){return Pe.current.useRef(D)},react_production_min.useState=function(D){return Pe.current.useState(D)},react_production_min.useSyncExternalStore=function(D,G,ae){return Pe.current.useSyncExternalStore(D,G,ae)},react_production_min.useTransition=function(){return Pe.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var r=requireReact(),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function d(c,y,u){var x,g={},h=null,m=null;u!==void 0&&(h=""+u),y.key!==void 0&&(h=""+y.key),y.ref!==void 0&&(m=y.ref);for(x in y)i.call(y,x)&&!f.hasOwnProperty(x)&&(g[x]=y[x]);if(c&&c.defaultProps)for(x in y=c.defaultProps,y)g[x]===void 0&&(g[x]=y[x]);return{$$typeof:s,type:c,key:h,ref:m,props:g,_owner:l.current}}return reactJsxRuntime_production_min.Fragment=o,reactJsxRuntime_production_min.jsx=d,reactJsxRuntime_production_min.jsxs=d,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(r){function s(q,me){var A=q.length;q.push(me);e:for(;0<A;){var D=A-1>>>1,G=q[D];if(0<l(G,me))q[D]=me,q[A]=G,A=D;else break e}}function o(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var me=q[0],A=q.pop();if(A!==me){q[0]=A;e:for(var D=0,G=q.length,ae=G>>>1;D<ae;){var ne=2*(D+1)-1,fe=q[ne],xe=ne+1,ke=q[xe];if(0>l(fe,A))xe<G&&0>l(ke,fe)?(q[D]=ke,q[xe]=A,D=xe):(q[D]=fe,q[ne]=A,D=ne);else if(xe<G&&0>l(ke,A))q[D]=ke,q[xe]=A,D=xe;else break e}}return me}function l(q,me){var A=q.sortIndex-me.sortIndex;return A!==0?A:q.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var d=Date,c=d.now();r.unstable_now=function(){return d.now()-c}}var y=[],u=[],x=1,g=null,h=3,m=!1,E=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var me=o(u);me!==null;){if(me.callback===null)i(u);else if(me.startTime<=q)i(u),me.sortIndex=me.expirationTime,s(y,me);else break;me=o(u)}}function B(q){if(w=!1,C(q),!E)if(o(y)!==null)E=!0,we(L);else{var me=o(u);me!==null&&Pe(B,me.startTime-q)}}function L(q,me){E=!1,w&&(w=!1,j(P),P=-1),m=!0;var A=h;try{for(C(me),g=o(y);g!==null&&(!(g.expirationTime>me)||q&&!V());){var D=g.callback;if(typeof D=="function"){g.callback=null,h=g.priorityLevel;var G=D(g.expirationTime<=me);me=r.unstable_now(),typeof G=="function"?g.callback=G:g===o(y)&&i(y),C(me)}else i(y);g=o(y)}if(g!==null)var ae=!0;else{var ne=o(u);ne!==null&&Pe(B,ne.startTime-me),ae=!1}return ae}finally{g=null,h=A,m=!1}}var _=!1,R=null,P=-1,le=5,W=-1;function V(){return!(r.unstable_now()-W<le)}function se(){if(R!==null){var q=r.unstable_now();W=q;var me=!0;try{me=R(!0,q)}finally{me?Q():(_=!1,R=null)}}else _=!1}var Q;if(typeof T=="function")Q=function(){T(se)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ge=J.port2;J.port1.onmessage=se,Q=function(){ge.postMessage(null)}}else Q=function(){S(se,0)};function we(q){R=q,_||(_=!0,Q())}function Pe(q,me){P=S(function(){q(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){E||m||(E=!0,we(L))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return h},r.unstable_getFirstCallbackNode=function(){return o(y)},r.unstable_next=function(q){switch(h){case 1:case 2:case 3:var me=3;break;default:me=h}var A=h;h=me;try{return q()}finally{h=A}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,me){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var A=h;h=q;try{return me()}finally{h=A}},r.unstable_scheduleCallback=function(q,me,A){var D=r.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?D+A:D):A=D,q){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=A+G,q={id:x++,callback:me,priorityLevel:q,startTime:A,expirationTime:G,sortIndex:-1},A>D?(q.sortIndex=A,s(u,q),o(y)===null&&q===o(u)&&(w?(j(P),P=-1):w=!0,Pe(B,A-D))):(q.sortIndex=G,s(y,q),E||m||(E=!0,we(L))),q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(q){var me=h;return function(){var A=h;h=me;try{return q.apply(this,arguments)}finally{h=A}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var r=requireReact(),s=requireScheduler();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function f(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},g={};function h(e){return y.call(g,e)?!0:y.call(x,e)?!1:u.test(e)?g[e]=!0:(x[e]=!0,!1)}function m(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,n,a){if(t===null||typeof t>"u"||m(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function w(e,t,n,a,p,v,I){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=p,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=v,this.removeEmptyString=I}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){S[e]=new w(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];S[t]=new w(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){S[e]=new w(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){S[e]=new w(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){S[e]=new w(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){S[e]=new w(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){S[e]=new w(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){S[e]=new w(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){S[e]=new w(e,5,!1,e.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j,T);S[t]=new w(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j,T);S[t]=new w(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j,T);S[t]=new w(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){S[e]=new w(e,1,!1,e.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){S[e]=new w(e,1,!1,e.toLowerCase(),null,!0,!0)});function C(e,t,n,a){var p=S.hasOwnProperty(t)?S[t]:null;(p!==null?p.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,n,p,a)&&(n=null),a||p===null?h(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):p.mustUseProperty?e[p.propertyName]=n===null?p.type===3?!1:"":n:(t=p.attributeName,a=p.attributeNamespace,n===null?e.removeAttribute(t):(p=p.type,n=p===3||p===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var B=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),_=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),V=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),q=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,D;function G(e){if(D===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return`
`+D+e}var ae=!1;function ne(e,t){if(!e||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(pe){var a=pe}Reflect.construct(e,[],t)}else{try{t.call()}catch(pe){a=pe}e.call(t.prototype)}else{try{throw Error()}catch(pe){a=pe}e()}}catch(pe){if(pe&&a&&typeof pe.stack=="string"){for(var p=pe.stack.split(`
`),v=a.stack.split(`
`),I=p.length-1,$=v.length-1;1<=I&&0<=$&&p[I]!==v[$];)$--;for(;1<=I&&0<=$;I--,$--)if(p[I]!==v[$]){if(I!==1||$!==1)do if(I--,$--,0>$||p[I]!==v[$]){var Y=`
`+p[I].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=I&&0<=$);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function fe(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=ne(e.type,!1),e;case 11:return e=ne(e.type.render,!1),e;case 1:return e=ne(e.type,!0),e;default:return""}}function xe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case _:return"Portal";case le:return"Profiler";case P:return"StrictMode";case Q:return"Suspense";case J:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case se:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ge:return t=e.displayName||null,t!==null?t:xe(e.type)||"Memo";case we:t=e._payload,e=e._init;try{return xe(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function te(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ie(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function be(e){var t=ie(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var p=n.get,v=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(I){a=""+I,v.call(this,I)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(I){a=""+I},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ie(e){e._valueTracker||(e._valueTracker=be(e))}function ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ie(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function F(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H(e,t){var n=t.checked;return A({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oe(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=te(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function he(e,t){t=t.checked,t!=null&&C(e,"checked",t,!1)}function Se(e,t){he(e,t);var n=te(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?K(e,t.type,n):t.hasOwnProperty("defaultValue")&&K(e,t.type,te(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function K(e,t,n){(t!=="number"||F(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ye=Array.isArray;function Ne(e,t,n,a){if(e=e.options,t){t={};for(var p=0;p<n.length;p++)t["$"+n[p]]=!0;for(n=0;n<e.length;n++)p=t.hasOwnProperty("$"+e[n].value),e[n].selected!==p&&(e[n].selected=p),p&&a&&(e[n].defaultSelected=!0)}else{for(n=""+te(n),t=null,p=0;p<e.length;p++){if(e[p].value===n){e[p].selected=!0,a&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function Ee(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return A({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function De(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(o(92));if(ye(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:te(n)}}function Je(e,t){var n=te(t.value),a=te(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function Ye(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var b,k=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,p){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,p)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(b=b||document.createElement("div"),b.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=b.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function z(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var U={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z=["Webkit","ms","Moz","O"];Object.keys(U).forEach(function(e){Z.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),U[t]=U[e]})});function de(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||U.hasOwnProperty(e)&&U[e]?(""+t).trim():t+"px"}function Fe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,p=de(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,p):e[n]=p}}var $e=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xe(e,t){if(t){if($e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function Qe(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function xr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gr=null,nr=null,$t=null;function on(e){if(e=Xn(e)){if(typeof Gr!="function")throw Error(o(280));var t=e.stateNode;t&&(t=Ni(t),Gr(e.stateNode,e.type,t))}}function ve(e){nr?$t?$t.push(e):$t=[e]:nr=e}function qe(){if(nr){var e=nr,t=$t;if($t=nr=null,on(e),t)for(e=0;e<t.length;e++)on(t[e])}}function He(e,t){return e(t)}function M(){}var O=!1;function Te(e,t,n){if(O)return e(t,n);O=!0;try{return He(e,t,n)}finally{O=!1,(nr!==null||$t!==null)&&(M(),qe())}}function je(e,t){var n=e.stateNode;if(n===null)return null;var a=Ni(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Be=!1;if(c)try{var et={};Object.defineProperty(et,"passive",{get:function(){Be=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Be=!1}function at(e,t,n,a,p,v,I,$,Y){var pe=Array.prototype.slice.call(arguments,3);try{t.apply(n,pe)}catch(Ce){this.onError(Ce)}}var ct=!1,gt=null,st=!1,Kt=null,ut={onError:function(e){ct=!0,gt=e}};function vt(e,t,n,a,p,v,I,$,Y){ct=!1,gt=null,at.apply(ut,arguments)}function wt(e,t,n,a,p,v,I,$,Y){if(vt.apply(this,arguments),ct){if(ct){var pe=gt;ct=!1,gt=null}else throw Error(o(198));st||(st=!0,Kt=pe)}}function ot(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kt(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function St(e){if(ot(e)!==e)throw Error(o(188))}function Yt(e){var t=e.alternate;if(!t){if(t=ot(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var p=n.return;if(p===null)break;var v=p.alternate;if(v===null){if(a=p.return,a!==null){n=a;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===n)return St(p),e;if(v===a)return St(p),t;v=v.sibling}throw Error(o(188))}if(n.return!==a.return)n=p,a=v;else{for(var I=!1,$=p.child;$;){if($===n){I=!0,n=p,a=v;break}if($===a){I=!0,a=p,n=v;break}$=$.sibling}if(!I){for($=v.child;$;){if($===n){I=!0,n=v,a=p;break}if($===a){I=!0,a=v,n=p;break}$=$.sibling}if(!I)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function At(e){return e=Yt(e),e!==null?to(e):null}function to(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=to(e);if(t!==null)return t;e=e.sibling}return null}var ro=s.unstable_scheduleCallback,no=s.unstable_cancelCallback,Pc=s.unstable_shouldYield,Mc=s.unstable_requestPaint,yt=s.unstable_now,Dc=s.unstable_getCurrentPriorityLevel,gs=s.unstable_ImmediatePriority,io=s.unstable_UserBlockingPriority,di=s.unstable_NormalPriority,Bc=s.unstable_LowPriority,so=s.unstable_IdlePriority,pi=null,dr=null;function Lc(e){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(pi,e,void 0,(e.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:Oc,Fc=Math.log,zc=Math.LN2;function Oc(e){return e>>>=0,e===0?32:31-(Fc(e)/zc|0)|0}var fi=64,mi=4194304;function In(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hi(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,p=e.suspendedLanes,v=e.pingedLanes,I=n&268435455;if(I!==0){var $=I&~p;$!==0?a=In($):(v&=I,v!==0&&(a=In(v)))}else I=n&~p,I!==0?a=In(I):v!==0&&(a=In(v));if(a===0)return 0;if(t!==0&&t!==a&&(t&p)===0&&(p=a&-a,v=t&-t,p>=v||p===16&&(v&4194240)!==0))return t;if((a&4)!==0&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-ir(t),p=1<<n,a|=e[n],t&=~p;return a}function Uc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,p=e.expirationTimes,v=e.pendingLanes;0<v;){var I=31-ir(v),$=1<<I,Y=p[I];Y===-1?(($&n)===0||($&a)!==0)&&(p[I]=Uc($,t)):Y<=t&&(e.expiredLanes|=$),v&=~$}}function ys(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ao(){var e=fi;return fi<<=1,(fi&4194240)===0&&(fi=64),e}function bs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ir(t),e[t]=n}function Wc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var p=31-ir(n),v=1<<p;t[p]=0,a[p]=-1,e[p]=-1,n&=~v}}function vs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ir(n),p=1<<a;p&t|e[a]&t&&(e[a]|=t),n&=~p}}var it=0;function oo(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var lo,Es,co,uo,po,ws=!1,xi=[],Tr=null,_r=null,Cr=null,An=new Map,Pn=new Map,Ir=[],$c="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fo(e,t){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(t.pointerId)}}function Mn(e,t,n,a,p,v){return e===null||e.nativeEvent!==v?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:v,targetContainers:[p]},t!==null&&(t=Xn(t),t!==null&&Es(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function Hc(e,t,n,a,p){switch(t){case"focusin":return Tr=Mn(Tr,e,t,n,a,p),!0;case"dragenter":return _r=Mn(_r,e,t,n,a,p),!0;case"mouseover":return Cr=Mn(Cr,e,t,n,a,p),!0;case"pointerover":var v=p.pointerId;return An.set(v,Mn(An.get(v)||null,e,t,n,a,p)),!0;case"gotpointercapture":return v=p.pointerId,Pn.set(v,Mn(Pn.get(v)||null,e,t,n,a,p)),!0}return!1}function mo(e){var t=Xr(e.target);if(t!==null){var n=ot(t);if(n!==null){if(t=n.tag,t===13){if(t=kt(n),t!==null){e.blockedOn=t,po(e.priority,function(){co(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ss(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ze=a,n.target.dispatchEvent(a),Ze=null}else return t=Xn(n),t!==null&&Es(t),e.blockedOn=n,!1;t.shift()}return!0}function ho(e,t,n){gi(e)&&n.delete(t)}function Vc(){ws=!1,Tr!==null&&gi(Tr)&&(Tr=null),_r!==null&&gi(_r)&&(_r=null),Cr!==null&&gi(Cr)&&(Cr=null),An.forEach(ho),Pn.forEach(ho)}function Dn(e,t){e.blockedOn===t&&(e.blockedOn=null,ws||(ws=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vc)))}function Bn(e){function t(p){return Dn(p,e)}if(0<xi.length){Dn(xi[0],e);for(var n=1;n<xi.length;n++){var a=xi[n];a.blockedOn===e&&(a.blockedOn=null)}}for(Tr!==null&&Dn(Tr,e),_r!==null&&Dn(_r,e),Cr!==null&&Dn(Cr,e),An.forEach(t),Pn.forEach(t),n=0;n<Ir.length;n++)a=Ir[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)mo(n),n.blockedOn===null&&Ir.shift()}var ln=B.ReactCurrentBatchConfig,yi=!0;function Gc(e,t,n,a){var p=it,v=ln.transition;ln.transition=null;try{it=1,ks(e,t,n,a)}finally{it=p,ln.transition=v}}function Xc(e,t,n,a){var p=it,v=ln.transition;ln.transition=null;try{it=4,ks(e,t,n,a)}finally{it=p,ln.transition=v}}function ks(e,t,n,a){if(yi){var p=Ss(e,t,n,a);if(p===null)Us(e,t,a,bi,n),fo(e,a);else if(Hc(p,e,t,n,a))a.stopPropagation();else if(fo(e,a),t&4&&-1<$c.indexOf(e)){for(;p!==null;){var v=Xn(p);if(v!==null&&lo(v),v=Ss(e,t,n,a),v===null&&Us(e,t,a,bi,n),v===p)break;p=v}p!==null&&a.stopPropagation()}else Us(e,t,a,null,n)}}var bi=null;function Ss(e,t,n,a){if(bi=null,e=xr(a),e=Xr(e),e!==null)if(t=ot(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kt(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bi=e,null}function xo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dc()){case gs:return 1;case io:return 4;case di:case Bc:return 16;case so:return 536870912;default:return 16}default:return 16}}var Nr=null,Rs=null,vi=null;function go(){if(vi)return vi;var e,t=Rs,n=t.length,a,p="value"in Nr?Nr.value:Nr.textContent,v=p.length;for(e=0;e<n&&t[e]===p[e];e++);var I=n-e;for(a=1;a<=I&&t[n-a]===p[v-a];a++);return vi=p.slice(e,1<a?1-a:void 0)}function Ei(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wi(){return!0}function yo(){return!1}function Ht(e){function t(n,a,p,v,I){this._reactName=n,this._targetInst=p,this.type=a,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var $ in e)e.hasOwnProperty($)&&(n=e[$],this[$]=n?n(v):v[$]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?wi:yo,this.isPropagationStopped=yo,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),t}var cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Ht(cn),Ln=A({},cn,{view:0,detail:0}),Kc=Ht(Ln),Ts,_s,Fn,ki=A({},Ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fn&&(Fn&&e.type==="mousemove"?(Ts=e.screenX-Fn.screenX,_s=e.screenY-Fn.screenY):_s=Ts=0,Fn=e),Ts)},movementY:function(e){return"movementY"in e?e.movementY:_s}}),bo=Ht(ki),Yc=A({},ki,{dataTransfer:0}),Qc=Ht(Yc),Zc=A({},Ln,{relatedTarget:0}),Cs=Ht(Zc),Jc=A({},cn,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=Ht(Jc),tu=A({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ru=Ht(tu),nu=A({},cn,{data:0}),vo=Ht(nu),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ou(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=au[e])?!!t[e]:!1}function Is(){return ou}var lu=A({},Ln,{key:function(e){if(e.key){var t=iu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?su[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(e){return e.type==="keypress"?Ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cu=Ht(lu),uu=A({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eo=Ht(uu),du=A({},Ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),pu=Ht(du),fu=A({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mu=Ht(fu),hu=A({},ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=Ht(hu),gu=[9,13,27,32],Ns=c&&"CompositionEvent"in window,zn=null;c&&"documentMode"in document&&(zn=document.documentMode);var yu=c&&"TextEvent"in window&&!zn,wo=c&&(!Ns||zn&&8<zn&&11>=zn),ko=" ",So=!1;function Ro(e,t){switch(e){case"keyup":return gu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var un=!1;function bu(e,t){switch(e){case"compositionend":return jo(t);case"keypress":return t.which!==32?null:(So=!0,ko);case"textInput":return e=t.data,e===ko&&So?null:e;default:return null}}function vu(e,t){if(un)return e==="compositionend"||!Ns&&Ro(e,t)?(e=go(),vi=Rs=Nr=null,un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wo&&t.locale!=="ko"?null:t.data;default:return null}}var Eu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function To(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Eu[e.type]:t==="textarea"}function _o(e,t,n,a){ve(a),t=_i(t,"onChange"),0<t.length&&(n=new js("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var On=null,Un=null;function wu(e){Vo(e,0)}function Si(e){var t=hn(e);if(ee(t))return e}function ku(e,t){if(e==="change")return t}var Co=!1;if(c){var As;if(c){var Ps="oninput"in document;if(!Ps){var Io=document.createElement("div");Io.setAttribute("oninput","return;"),Ps=typeof Io.oninput=="function"}As=Ps}else As=!1;Co=As&&(!document.documentMode||9<document.documentMode)}function No(){On&&(On.detachEvent("onpropertychange",Ao),Un=On=null)}function Ao(e){if(e.propertyName==="value"&&Si(Un)){var t=[];_o(t,Un,e,xr(e)),Te(wu,t)}}function Su(e,t,n){e==="focusin"?(No(),On=t,Un=n,On.attachEvent("onpropertychange",Ao)):e==="focusout"&&No()}function Ru(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Si(Un)}function ju(e,t){if(e==="click")return Si(t)}function Tu(e,t){if(e==="input"||e==="change")return Si(t)}function _u(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sr=typeof Object.is=="function"?Object.is:_u;function qn(e,t){if(sr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var p=n[a];if(!y.call(t,p)||!sr(e[p],t[p]))return!1}return!0}function Po(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mo(e,t){var n=Po(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Po(n)}}function Do(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Do(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bo(){for(var e=window,t=F();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=F(e.document)}return t}function Ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cu(e){var t=Bo(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Do(n.ownerDocument.documentElement,n)){if(a!==null&&Ms(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var p=n.textContent.length,v=Math.min(a.start,p);a=a.end===void 0?v:Math.min(a.end,p),!e.extend&&v>a&&(p=a,a=v,v=p),p=Mo(n,v);var I=Mo(n,a);p&&I&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&(t=t.createRange(),t.setStart(p.node,p.offset),e.removeAllRanges(),v>a?(e.addRange(t),e.extend(I.node,I.offset)):(t.setEnd(I.node,I.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iu=c&&"documentMode"in document&&11>=document.documentMode,dn=null,Ds=null,Wn=null,Bs=!1;function Lo(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bs||dn==null||dn!==F(a)||(a=dn,"selectionStart"in a&&Ms(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wn&&qn(Wn,a)||(Wn=a,a=_i(Ds,"onSelect"),0<a.length&&(t=new js("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=dn)))}function Ri(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pn={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},Ls={},Fo={};c&&(Fo=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function ji(e){if(Ls[e])return Ls[e];if(!pn[e])return e;var t=pn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fo)return Ls[e]=t[n];return e}var zo=ji("animationend"),Oo=ji("animationiteration"),Uo=ji("animationstart"),qo=ji("transitionend"),Wo=new Map,$o="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Wo.set(e,t),f(t,[e])}for(var Fs=0;Fs<$o.length;Fs++){var zs=$o[Fs],Nu=zs.toLowerCase(),Au=zs[0].toUpperCase()+zs.slice(1);Ar(Nu,"on"+Au)}Ar(zo,"onAnimationEnd"),Ar(Oo,"onAnimationIteration"),Ar(Uo,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(qo,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pu=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function Ho(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,wt(a,t,void 0,e),e.currentTarget=null}function Vo(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],p=a.event;a=a.listeners;e:{var v=void 0;if(t)for(var I=a.length-1;0<=I;I--){var $=a[I],Y=$.instance,pe=$.currentTarget;if($=$.listener,Y!==v&&p.isPropagationStopped())break e;Ho(p,$,pe),v=Y}else for(I=0;I<a.length;I++){if($=a[I],Y=$.instance,pe=$.currentTarget,$=$.listener,Y!==v&&p.isPropagationStopped())break e;Ho(p,$,pe),v=Y}}}if(st)throw e=Kt,st=!1,Kt=null,e}function dt(e,t){var n=t[Gs];n===void 0&&(n=t[Gs]=new Set);var a=e+"__bubble";n.has(a)||(Go(t,e,2,!1),n.add(a))}function Os(e,t,n){var a=0;t&&(a|=4),Go(n,e,a,t)}var Ti="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[Ti]){e[Ti]=!0,i.forEach(function(n){n!=="selectionchange"&&(Pu.has(n)||Os(n,!1,e),Os(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ti]||(t[Ti]=!0,Os("selectionchange",!1,t))}}function Go(e,t,n,a){switch(xo(t)){case 1:var p=Gc;break;case 4:p=Xc;break;default:p=ks}n=p.bind(null,t,n,e),p=void 0,!Be||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),a?p!==void 0?e.addEventListener(t,n,{capture:!0,passive:p}):e.addEventListener(t,n,!0):p!==void 0?e.addEventListener(t,n,{passive:p}):e.addEventListener(t,n,!1)}function Us(e,t,n,a,p){var v=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var I=a.tag;if(I===3||I===4){var $=a.stateNode.containerInfo;if($===p||$.nodeType===8&&$.parentNode===p)break;if(I===4)for(I=a.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&(Y=I.stateNode.containerInfo,Y===p||Y.nodeType===8&&Y.parentNode===p))return;I=I.return}for(;$!==null;){if(I=Xr($),I===null)return;if(Y=I.tag,Y===5||Y===6){a=v=I;continue e}$=$.parentNode}}a=a.return}Te(function(){var pe=v,Ce=xr(n),Ae=[];e:{var _e=Wo.get(e);if(_e!==void 0){var Le=js,Oe=e;switch(e){case"keypress":if(Ei(n)===0)break e;case"keydown":case"keyup":Le=cu;break;case"focusin":Oe="focus",Le=Cs;break;case"focusout":Oe="blur",Le=Cs;break;case"beforeblur":case"afterblur":Le=Cs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=pu;break;case zo:case Oo:case Uo:Le=eu;break;case qo:Le=mu;break;case"scroll":Le=Kc;break;case"wheel":Le=xu;break;case"copy":case"cut":case"paste":Le=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Eo}var Ue=(t&4)!==0,bt=!Ue&&e==="scroll",ce=Ue?_e!==null?_e+"Capture":null:_e;Ue=[];for(var re=pe,ue;re!==null;){ue=re;var Me=ue.stateNode;if(ue.tag===5&&Me!==null&&(ue=Me,ce!==null&&(Me=je(re,ce),Me!=null&&Ue.push(Vn(re,Me,ue)))),bt)break;re=re.return}0<Ue.length&&(_e=new Le(_e,Oe,null,n,Ce),Ae.push({event:_e,listeners:Ue}))}}if((t&7)===0){e:{if(_e=e==="mouseover"||e==="pointerover",Le=e==="mouseout"||e==="pointerout",_e&&n!==Ze&&(Oe=n.relatedTarget||n.fromElement)&&(Xr(Oe)||Oe[gr]))break e;if((Le||_e)&&(_e=Ce.window===Ce?Ce:(_e=Ce.ownerDocument)?_e.defaultView||_e.parentWindow:window,Le?(Oe=n.relatedTarget||n.toElement,Le=pe,Oe=Oe?Xr(Oe):null,Oe!==null&&(bt=ot(Oe),Oe!==bt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Le=null,Oe=pe),Le!==Oe)){if(Ue=bo,Me="onMouseLeave",ce="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=Eo,Me="onPointerLeave",ce="onPointerEnter",re="pointer"),bt=Le==null?_e:hn(Le),ue=Oe==null?_e:hn(Oe),_e=new Ue(Me,re+"leave",Le,n,Ce),_e.target=bt,_e.relatedTarget=ue,Me=null,Xr(Ce)===pe&&(Ue=new Ue(ce,re+"enter",Oe,n,Ce),Ue.target=ue,Ue.relatedTarget=bt,Me=Ue),bt=Me,Le&&Oe)t:{for(Ue=Le,ce=Oe,re=0,ue=Ue;ue;ue=fn(ue))re++;for(ue=0,Me=ce;Me;Me=fn(Me))ue++;for(;0<re-ue;)Ue=fn(Ue),re--;for(;0<ue-re;)ce=fn(ce),ue--;for(;re--;){if(Ue===ce||ce!==null&&Ue===ce.alternate)break t;Ue=fn(Ue),ce=fn(ce)}Ue=null}else Ue=null;Le!==null&&Xo(Ae,_e,Le,Ue,!1),Oe!==null&&bt!==null&&Xo(Ae,bt,Oe,Ue,!0)}}e:{if(_e=pe?hn(pe):window,Le=_e.nodeName&&_e.nodeName.toLowerCase(),Le==="select"||Le==="input"&&_e.type==="file")var We=ku;else if(To(_e))if(Co)We=Tu;else{We=Ru;var Ve=Su}else(Le=_e.nodeName)&&Le.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(We=ju);if(We&&(We=We(e,pe))){_o(Ae,We,n,Ce);break e}Ve&&Ve(e,_e,pe),e==="focusout"&&(Ve=_e._wrapperState)&&Ve.controlled&&_e.type==="number"&&K(_e,"number",_e.value)}switch(Ve=pe?hn(pe):window,e){case"focusin":(To(Ve)||Ve.contentEditable==="true")&&(dn=Ve,Ds=pe,Wn=null);break;case"focusout":Wn=Ds=dn=null;break;case"mousedown":Bs=!0;break;case"contextmenu":case"mouseup":case"dragend":Bs=!1,Lo(Ae,n,Ce);break;case"selectionchange":if(Iu)break;case"keydown":case"keyup":Lo(Ae,n,Ce)}var Ge;if(Ns)e:{switch(e){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else un?Ro(e,n)&&(Ke="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ke="onCompositionStart");Ke&&(wo&&n.locale!=="ko"&&(un||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&un&&(Ge=go()):(Nr=Ce,Rs="value"in Nr?Nr.value:Nr.textContent,un=!0)),Ve=_i(pe,Ke),0<Ve.length&&(Ke=new vo(Ke,e,null,n,Ce),Ae.push({event:Ke,listeners:Ve}),Ge?Ke.data=Ge:(Ge=jo(n),Ge!==null&&(Ke.data=Ge)))),(Ge=yu?bu(e,n):vu(e,n))&&(pe=_i(pe,"onBeforeInput"),0<pe.length&&(Ce=new vo("onBeforeInput","beforeinput",null,n,Ce),Ae.push({event:Ce,listeners:pe}),Ce.data=Ge))}Vo(Ae,t)})}function Vn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _i(e,t){for(var n=t+"Capture",a=[];e!==null;){var p=e,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=je(e,n),v!=null&&a.unshift(Vn(e,v,p)),v=je(e,t),v!=null&&a.push(Vn(e,v,p))),e=e.return}return a}function fn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xo(e,t,n,a,p){for(var v=t._reactName,I=[];n!==null&&n!==a;){var $=n,Y=$.alternate,pe=$.stateNode;if(Y!==null&&Y===a)break;$.tag===5&&pe!==null&&($=pe,p?(Y=je(n,v),Y!=null&&I.unshift(Vn(n,Y,$))):p||(Y=je(n,v),Y!=null&&I.push(Vn(n,Y,$)))),n=n.return}I.length!==0&&e.push({event:t,listeners:I})}var Mu=/\r\n?/g,Du=/\u0000|\uFFFD/g;function Ko(e){return(typeof e=="string"?e:""+e).replace(Mu,`
`).replace(Du,"")}function Ci(e,t,n){if(t=Ko(t),Ko(e)!==t&&n)throw Error(o(425))}function Ii(){}var qs=null,Ws=null;function $s(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hs=typeof setTimeout=="function"?setTimeout:void 0,Bu=typeof clearTimeout=="function"?clearTimeout:void 0,Yo=typeof Promise=="function"?Promise:void 0,Lu=typeof queueMicrotask=="function"?queueMicrotask:typeof Yo<"u"?function(e){return Yo.resolve(null).then(e).catch(Fu)}:Hs;function Fu(e){setTimeout(function(){throw e})}function Vs(e,t){var n=t,a=0;do{var p=n.nextSibling;if(e.removeChild(n),p&&p.nodeType===8)if(n=p.data,n==="/$"){if(a===0){e.removeChild(p),Bn(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=p}while(n);Bn(t)}function Pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mn=Math.random().toString(36).slice(2),pr="__reactFiber$"+mn,Gn="__reactProps$"+mn,gr="__reactContainer$"+mn,Gs="__reactEvents$"+mn,zu="__reactListeners$"+mn,Ou="__reactHandles$"+mn;function Xr(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[pr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qo(e);e!==null;){if(n=e[pr])return n;e=Qo(e)}return t}e=n,n=e.parentNode}return null}function Xn(e){return e=e[pr]||e[gr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Ni(e){return e[Gn]||null}var Xs=[],xn=-1;function Mr(e){return{current:e}}function pt(e){0>xn||(e.current=Xs[xn],Xs[xn]=null,xn--)}function lt(e,t){xn++,Xs[xn]=e.current,e.current=t}var Dr={},Pt=Mr(Dr),zt=Mr(!1),Kr=Dr;function gn(e,t){var n=e.type.contextTypes;if(!n)return Dr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in n)p[v]=t[v];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=p),p}function Ot(e){return e=e.childContextTypes,e!=null}function Ai(){pt(zt),pt(Pt)}function Zo(e,t,n){if(Pt.current!==Dr)throw Error(o(168));lt(Pt,t),lt(zt,n)}function Jo(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var p in a)if(!(p in t))throw Error(o(108,ke(e)||"Unknown",p));return A({},n,a)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Kr=Pt.current,lt(Pt,e),lt(zt,zt.current),!0}function el(e,t,n){var a=e.stateNode;if(!a)throw Error(o(169));n?(e=Jo(e,t,Kr),a.__reactInternalMemoizedMergedChildContext=e,pt(zt),pt(Pt),lt(Pt,e)):pt(zt),lt(zt,n)}var yr=null,Mi=!1,Ks=!1;function tl(e){yr===null?yr=[e]:yr.push(e)}function Uu(e){Mi=!0,tl(e)}function Br(){if(!Ks&&yr!==null){Ks=!0;var e=0,t=it;try{var n=yr;for(it=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}yr=null,Mi=!1}catch(p){throw yr!==null&&(yr=yr.slice(e+1)),ro(gs,Br),p}finally{it=t,Ks=!1}}return null}var yn=[],bn=0,Di=null,Bi=0,Qt=[],Zt=0,Yr=null,br=1,vr="";function Qr(e,t){yn[bn++]=Bi,yn[bn++]=Di,Di=e,Bi=t}function rl(e,t,n){Qt[Zt++]=br,Qt[Zt++]=vr,Qt[Zt++]=Yr,Yr=e;var a=br;e=vr;var p=32-ir(a)-1;a&=~(1<<p),n+=1;var v=32-ir(t)+p;if(30<v){var I=p-p%5;v=(a&(1<<I)-1).toString(32),a>>=I,p-=I,br=1<<32-ir(t)+p|n<<p|a,vr=v+e}else br=1<<v|n<<p|a,vr=e}function Ys(e){e.return!==null&&(Qr(e,1),rl(e,1,0))}function Qs(e){for(;e===Di;)Di=yn[--bn],yn[bn]=null,Bi=yn[--bn],yn[bn]=null;for(;e===Yr;)Yr=Qt[--Zt],Qt[Zt]=null,vr=Qt[--Zt],Qt[Zt]=null,br=Qt[--Zt],Qt[Zt]=null}var Vt=null,Gt=null,ft=!1,ar=null;function nl(e,t){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function il(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Gt=Pr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yr!==null?{id:br,overflow:vr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vt=e,Gt=null,!0):!1;default:return!1}}function Zs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Js(e){if(ft){var t=Gt;if(t){var n=t;if(!il(e,t)){if(Zs(e))throw Error(o(418));t=Pr(n.nextSibling);var a=Vt;t&&il(e,t)?nl(a,n):(e.flags=e.flags&-4097|2,ft=!1,Vt=e)}}else{if(Zs(e))throw Error(o(418));e.flags=e.flags&-4097|2,ft=!1,Vt=e}}}function sl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function Li(e){if(e!==Vt)return!1;if(!ft)return sl(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$s(e.type,e.memoizedProps)),t&&(t=Gt)){if(Zs(e))throw al(),Error(o(418));for(;t;)nl(e,t),t=Pr(t.nextSibling)}if(sl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gt=Pr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Vt?Pr(e.stateNode.nextSibling):null;return!0}function al(){for(var e=Gt;e;)e=Pr(e.nextSibling)}function vn(){Gt=Vt=null,ft=!1}function ea(e){ar===null?ar=[e]:ar.push(e)}var qu=B.ReactCurrentBatchConfig;function Kn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var a=n.stateNode}if(!a)throw Error(o(147,e));var p=a,v=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===v?t.ref:(t=function(I){var $=p.refs;I===null?delete $[v]:$[v]=I},t._stringRef=v,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Fi(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ol(e){var t=e._init;return t(e._payload)}function ll(e){function t(ce,re){if(e){var ue=ce.deletions;ue===null?(ce.deletions=[re],ce.flags|=16):ue.push(re)}}function n(ce,re){if(!e)return null;for(;re!==null;)t(ce,re),re=re.sibling;return null}function a(ce,re){for(ce=new Map;re!==null;)re.key!==null?ce.set(re.key,re):ce.set(re.index,re),re=re.sibling;return ce}function p(ce,re){return ce=$r(ce,re),ce.index=0,ce.sibling=null,ce}function v(ce,re,ue){return ce.index=ue,e?(ue=ce.alternate,ue!==null?(ue=ue.index,ue<re?(ce.flags|=2,re):ue):(ce.flags|=2,re)):(ce.flags|=1048576,re)}function I(ce){return e&&ce.alternate===null&&(ce.flags|=2),ce}function $(ce,re,ue,Me){return re===null||re.tag!==6?(re=Ha(ue,ce.mode,Me),re.return=ce,re):(re=p(re,ue),re.return=ce,re)}function Y(ce,re,ue,Me){var We=ue.type;return We===R?Ce(ce,re,ue.props.children,Me,ue.key):re!==null&&(re.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===we&&ol(We)===re.type)?(Me=p(re,ue.props),Me.ref=Kn(ce,re,ue),Me.return=ce,Me):(Me=ls(ue.type,ue.key,ue.props,null,ce.mode,Me),Me.ref=Kn(ce,re,ue),Me.return=ce,Me)}function pe(ce,re,ue,Me){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=Va(ue,ce.mode,Me),re.return=ce,re):(re=p(re,ue.children||[]),re.return=ce,re)}function Ce(ce,re,ue,Me,We){return re===null||re.tag!==7?(re=an(ue,ce.mode,Me,We),re.return=ce,re):(re=p(re,ue),re.return=ce,re)}function Ae(ce,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Ha(""+re,ce.mode,ue),re.return=ce,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case L:return ue=ls(re.type,re.key,re.props,null,ce.mode,ue),ue.ref=Kn(ce,null,re),ue.return=ce,ue;case _:return re=Va(re,ce.mode,ue),re.return=ce,re;case we:var Me=re._init;return Ae(ce,Me(re._payload),ue)}if(ye(re)||me(re))return re=an(re,ce.mode,ue,null),re.return=ce,re;Fi(ce,re)}return null}function _e(ce,re,ue,Me){var We=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return We!==null?null:$(ce,re,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:return ue.key===We?Y(ce,re,ue,Me):null;case _:return ue.key===We?pe(ce,re,ue,Me):null;case we:return We=ue._init,_e(ce,re,We(ue._payload),Me)}if(ye(ue)||me(ue))return We!==null?null:Ce(ce,re,ue,Me,null);Fi(ce,ue)}return null}function Le(ce,re,ue,Me,We){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ce=ce.get(ue)||null,$(re,ce,""+Me,We);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case L:return ce=ce.get(Me.key===null?ue:Me.key)||null,Y(re,ce,Me,We);case _:return ce=ce.get(Me.key===null?ue:Me.key)||null,pe(re,ce,Me,We);case we:var Ve=Me._init;return Le(ce,re,ue,Ve(Me._payload),We)}if(ye(Me)||me(Me))return ce=ce.get(ue)||null,Ce(re,ce,Me,We,null);Fi(re,Me)}return null}function Oe(ce,re,ue,Me){for(var We=null,Ve=null,Ge=re,Ke=re=0,Ct=null;Ge!==null&&Ke<ue.length;Ke++){Ge.index>Ke?(Ct=Ge,Ge=null):Ct=Ge.sibling;var nt=_e(ce,Ge,ue[Ke],Me);if(nt===null){Ge===null&&(Ge=Ct);break}e&&Ge&&nt.alternate===null&&t(ce,Ge),re=v(nt,re,Ke),Ve===null?We=nt:Ve.sibling=nt,Ve=nt,Ge=Ct}if(Ke===ue.length)return n(ce,Ge),ft&&Qr(ce,Ke),We;if(Ge===null){for(;Ke<ue.length;Ke++)Ge=Ae(ce,ue[Ke],Me),Ge!==null&&(re=v(Ge,re,Ke),Ve===null?We=Ge:Ve.sibling=Ge,Ve=Ge);return ft&&Qr(ce,Ke),We}for(Ge=a(ce,Ge);Ke<ue.length;Ke++)Ct=Le(Ge,ce,Ke,ue[Ke],Me),Ct!==null&&(e&&Ct.alternate!==null&&Ge.delete(Ct.key===null?Ke:Ct.key),re=v(Ct,re,Ke),Ve===null?We=Ct:Ve.sibling=Ct,Ve=Ct);return e&&Ge.forEach(function(Hr){return t(ce,Hr)}),ft&&Qr(ce,Ke),We}function Ue(ce,re,ue,Me){var We=me(ue);if(typeof We!="function")throw Error(o(150));if(ue=We.call(ue),ue==null)throw Error(o(151));for(var Ve=We=null,Ge=re,Ke=re=0,Ct=null,nt=ue.next();Ge!==null&&!nt.done;Ke++,nt=ue.next()){Ge.index>Ke?(Ct=Ge,Ge=null):Ct=Ge.sibling;var Hr=_e(ce,Ge,nt.value,Me);if(Hr===null){Ge===null&&(Ge=Ct);break}e&&Ge&&Hr.alternate===null&&t(ce,Ge),re=v(Hr,re,Ke),Ve===null?We=Hr:Ve.sibling=Hr,Ve=Hr,Ge=Ct}if(nt.done)return n(ce,Ge),ft&&Qr(ce,Ke),We;if(Ge===null){for(;!nt.done;Ke++,nt=ue.next())nt=Ae(ce,nt.value,Me),nt!==null&&(re=v(nt,re,Ke),Ve===null?We=nt:Ve.sibling=nt,Ve=nt);return ft&&Qr(ce,Ke),We}for(Ge=a(ce,Ge);!nt.done;Ke++,nt=ue.next())nt=Le(Ge,ce,Ke,nt.value,Me),nt!==null&&(e&&nt.alternate!==null&&Ge.delete(nt.key===null?Ke:nt.key),re=v(nt,re,Ke),Ve===null?We=nt:Ve.sibling=nt,Ve=nt);return e&&Ge.forEach(function(Ed){return t(ce,Ed)}),ft&&Qr(ce,Ke),We}function bt(ce,re,ue,Me){if(typeof ue=="object"&&ue!==null&&ue.type===R&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:e:{for(var We=ue.key,Ve=re;Ve!==null;){if(Ve.key===We){if(We=ue.type,We===R){if(Ve.tag===7){n(ce,Ve.sibling),re=p(Ve,ue.props.children),re.return=ce,ce=re;break e}}else if(Ve.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===we&&ol(We)===Ve.type){n(ce,Ve.sibling),re=p(Ve,ue.props),re.ref=Kn(ce,Ve,ue),re.return=ce,ce=re;break e}n(ce,Ve);break}else t(ce,Ve);Ve=Ve.sibling}ue.type===R?(re=an(ue.props.children,ce.mode,Me,ue.key),re.return=ce,ce=re):(Me=ls(ue.type,ue.key,ue.props,null,ce.mode,Me),Me.ref=Kn(ce,re,ue),Me.return=ce,ce=Me)}return I(ce);case _:e:{for(Ve=ue.key;re!==null;){if(re.key===Ve)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){n(ce,re.sibling),re=p(re,ue.children||[]),re.return=ce,ce=re;break e}else{n(ce,re);break}else t(ce,re);re=re.sibling}re=Va(ue,ce.mode,Me),re.return=ce,ce=re}return I(ce);case we:return Ve=ue._init,bt(ce,re,Ve(ue._payload),Me)}if(ye(ue))return Oe(ce,re,ue,Me);if(me(ue))return Ue(ce,re,ue,Me);Fi(ce,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,re!==null&&re.tag===6?(n(ce,re.sibling),re=p(re,ue),re.return=ce,ce=re):(n(ce,re),re=Ha(ue,ce.mode,Me),re.return=ce,ce=re),I(ce)):n(ce,re)}return bt}var En=ll(!0),cl=ll(!1),zi=Mr(null),Oi=null,wn=null,ta=null;function ra(){ta=wn=Oi=null}function na(e){var t=zi.current;pt(zi),e._currentValue=t}function ia(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function kn(e,t){Oi=e,ta=wn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ut=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(ta!==e)if(e={context:e,memoizedValue:t,next:null},wn===null){if(Oi===null)throw Error(o(308));wn=e,Oi.dependencies={lanes:0,firstContext:e}}else wn=wn.next=e;return t}var Zr=null;function sa(e){Zr===null?Zr=[e]:Zr.push(e)}function ul(e,t,n,a){var p=t.interleaved;return p===null?(n.next=n,sa(t)):(n.next=p.next,p.next=n),t.interleaved=n,Er(e,a)}function Er(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lr=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(tt&2)!==0){var p=a.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),a.pending=t,Er(e,n)}return p=a.interleaved,p===null?(t.next=t,sa(a)):(t.next=p.next,p.next=t),a.interleaved=t,Er(e,n)}function Ui(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,vs(e,n)}}function pl(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var p=null,v=null;if(n=n.firstBaseUpdate,n!==null){do{var I={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};v===null?p=v=I:v=v.next=I,n=n.next}while(n!==null);v===null?p=v=t:v=v.next=t}else p=v=t;n={baseState:a.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,a){var p=e.updateQueue;Lr=!1;var v=p.firstBaseUpdate,I=p.lastBaseUpdate,$=p.shared.pending;if($!==null){p.shared.pending=null;var Y=$,pe=Y.next;Y.next=null,I===null?v=pe:I.next=pe,I=Y;var Ce=e.alternate;Ce!==null&&(Ce=Ce.updateQueue,$=Ce.lastBaseUpdate,$!==I&&($===null?Ce.firstBaseUpdate=pe:$.next=pe,Ce.lastBaseUpdate=Y))}if(v!==null){var Ae=p.baseState;I=0,Ce=pe=Y=null,$=v;do{var _e=$.lane,Le=$.eventTime;if((a&_e)===_e){Ce!==null&&(Ce=Ce.next={eventTime:Le,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Oe=e,Ue=$;switch(_e=t,Le=n,Ue.tag){case 1:if(Oe=Ue.payload,typeof Oe=="function"){Ae=Oe.call(Le,Ae,_e);break e}Ae=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ue.payload,_e=typeof Oe=="function"?Oe.call(Le,Ae,_e):Oe,_e==null)break e;Ae=A({},Ae,_e);break e;case 2:Lr=!0}}$.callback!==null&&$.lane!==0&&(e.flags|=64,_e=p.effects,_e===null?p.effects=[$]:_e.push($))}else Le={eventTime:Le,lane:_e,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ce===null?(pe=Ce=Le,Y=Ae):Ce=Ce.next=Le,I|=_e;if($=$.next,$===null){if($=p.shared.pending,$===null)break;_e=$,$=_e.next,_e.next=null,p.lastBaseUpdate=_e,p.shared.pending=null}}while(!0);if(Ce===null&&(Y=Ae),p.baseState=Y,p.firstBaseUpdate=pe,p.lastBaseUpdate=Ce,t=p.shared.interleaved,t!==null){p=t;do I|=p.lane,p=p.next;while(p!==t)}else v===null&&(p.shared.lanes=0);tn|=I,e.lanes=I,e.memoizedState=Ae}}function fl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],p=a.callback;if(p!==null){if(a.callback=null,a=n,typeof p!="function")throw Error(o(191,p));p.call(a)}}}var Yn={},fr=Mr(Yn),Qn=Mr(Yn),Zn=Mr(Yn);function Jr(e){if(e===Yn)throw Error(o(174));return e}function oa(e,t){switch(lt(Zn,t),lt(Qn,e),lt(fr,Yn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:N(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=N(t,e)}pt(fr),lt(fr,t)}function Sn(){pt(fr),pt(Qn),pt(Zn)}function ml(e){Jr(Zn.current);var t=Jr(fr.current),n=N(t,e.type);t!==n&&(lt(Qn,e),lt(fr,n))}function la(e){Qn.current===e&&(pt(fr),pt(Qn))}var mt=Mr(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var $i=B.ReactCurrentDispatcher,da=B.ReactCurrentBatchConfig,en=0,ht=null,Rt=null,Tt=null,Hi=!1,Jn=!1,ei=0,Wu=0;function Mt(){throw Error(o(321))}function pa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function fa(e,t,n,a,p,v){if(en=v,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$i.current=e===null||e.memoizedState===null?Gu:Xu,e=n(a,p),Jn){v=0;do{if(Jn=!1,ei=0,25<=v)throw Error(o(301));v+=1,Tt=Rt=null,t.updateQueue=null,$i.current=Ku,e=n(a,p)}while(Jn)}if($i.current=Xi,t=Rt!==null&&Rt.next!==null,en=0,Tt=Rt=ht=null,Hi=!1,t)throw Error(o(300));return e}function ma(){var e=ei!==0;return ei=0,e}function mr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?ht.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function er(){if(Rt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Rt.next;var t=Tt===null?ht.memoizedState:Tt.next;if(t!==null)Tt=t,Rt=e;else{if(e===null)throw Error(o(310));Rt=e,e={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Tt===null?ht.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function ti(e,t){return typeof t=="function"?t(e):t}function ha(e){var t=er(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=Rt,p=a.baseQueue,v=n.pending;if(v!==null){if(p!==null){var I=p.next;p.next=v.next,v.next=I}a.baseQueue=p=v,n.pending=null}if(p!==null){v=p.next,a=a.baseState;var $=I=null,Y=null,pe=v;do{var Ce=pe.lane;if((en&Ce)===Ce)Y!==null&&(Y=Y.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),a=pe.hasEagerState?pe.eagerState:e(a,pe.action);else{var Ae={lane:Ce,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};Y===null?($=Y=Ae,I=a):Y=Y.next=Ae,ht.lanes|=Ce,tn|=Ce}pe=pe.next}while(pe!==null&&pe!==v);Y===null?I=a:Y.next=$,sr(a,t.memoizedState)||(Ut=!0),t.memoizedState=a,t.baseState=I,t.baseQueue=Y,n.lastRenderedState=a}if(e=n.interleaved,e!==null){p=e;do v=p.lane,ht.lanes|=v,tn|=v,p=p.next;while(p!==e)}else p===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=er(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,p=n.pending,v=t.memoizedState;if(p!==null){n.pending=null;var I=p=p.next;do v=e(v,I.action),I=I.next;while(I!==p);sr(v,t.memoizedState)||(Ut=!0),t.memoizedState=v,t.baseQueue===null&&(t.baseState=v),n.lastRenderedState=v}return[v,a]}function hl(){}function xl(e,t){var n=ht,a=er(),p=t(),v=!sr(a.memoizedState,p);if(v&&(a.memoizedState=p,Ut=!0),a=a.queue,ga(bl.bind(null,n,a,e),[e]),a.getSnapshot!==t||v||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,ri(9,yl.bind(null,n,a,p,t),void 0,null),_t===null)throw Error(o(349));(en&30)!==0||gl(n,t,p)}return p}function gl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yl(e,t,n,a){t.value=n,t.getSnapshot=a,vl(t)&&El(e)}function bl(e,t,n){return n(function(){vl(t)&&El(e)})}function vl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch{return!0}}function El(e){var t=Er(e,1);t!==null&&ur(t,e,1,-1)}function wl(e){var t=mr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:e},t.queue=e,e=e.dispatch=Vu.bind(null,ht,e),[t.memoizedState,e]}function ri(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function kl(){return er().memoizedState}function Vi(e,t,n,a){var p=mr();ht.flags|=e,p.memoizedState=ri(1|t,n,void 0,a===void 0?null:a)}function Gi(e,t,n,a){var p=er();a=a===void 0?null:a;var v=void 0;if(Rt!==null){var I=Rt.memoizedState;if(v=I.destroy,a!==null&&pa(a,I.deps)){p.memoizedState=ri(t,n,v,a);return}}ht.flags|=e,p.memoizedState=ri(1|t,n,v,a)}function Sl(e,t){return Vi(8390656,8,e,t)}function ga(e,t){return Gi(2048,8,e,t)}function Rl(e,t){return Gi(4,2,e,t)}function jl(e,t){return Gi(4,4,e,t)}function Tl(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _l(e,t,n){return n=n!=null?n.concat([e]):null,Gi(4,4,Tl.bind(null,t,e),n)}function ya(){}function Cl(e,t){var n=er();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&pa(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Il(e,t){var n=er();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&pa(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Nl(e,t,n){return(en&21)===0?(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=n):(sr(n,t)||(n=ao(),ht.lanes|=n,tn|=n,e.baseState=!0),t)}function $u(e,t){var n=it;it=n!==0&&4>n?n:4,e(!0);var a=da.transition;da.transition={};try{e(!1),t()}finally{it=n,da.transition=a}}function Al(){return er().memoizedState}function Hu(e,t,n){var a=qr(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Pl(e))Ml(t,n);else if(n=ul(e,t,n,a),n!==null){var p=Ft();ur(n,e,a,p),Dl(n,t,a)}}function Vu(e,t,n){var a=qr(e),p={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pl(e))Ml(t,p);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var I=t.lastRenderedState,$=v(I,n);if(p.hasEagerState=!0,p.eagerState=$,sr($,I)){var Y=t.interleaved;Y===null?(p.next=p,sa(t)):(p.next=Y.next,Y.next=p),t.interleaved=p;return}}catch{}finally{}n=ul(e,t,p,a),n!==null&&(p=Ft(),ur(n,e,a,p),Dl(n,t,a))}}function Pl(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function Ml(e,t){Jn=Hi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dl(e,t,n){if((n&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,vs(e,n)}}var Xi={readContext:Jt,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Gu={readContext:Jt,useCallback:function(e,t){return mr().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Sl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vi(4194308,4,Tl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vi(4,2,e,t)},useMemo:function(e,t){var n=mr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=mr();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Hu.bind(null,ht,e),[a.memoizedState,e]},useRef:function(e){var t=mr();return e={current:e},t.memoizedState=e},useState:wl,useDebugValue:ya,useDeferredValue:function(e){return mr().memoizedState=e},useTransition:function(){var e=wl(!1),t=e[0];return e=$u.bind(null,e[1]),mr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ht,p=mr();if(ft){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),_t===null)throw Error(o(349));(en&30)!==0||gl(a,t,n)}p.memoizedState=n;var v={value:n,getSnapshot:t};return p.queue=v,Sl(bl.bind(null,a,v,e),[e]),a.flags|=2048,ri(9,yl.bind(null,a,v,n,t),void 0,null),n},useId:function(){var e=mr(),t=_t.identifierPrefix;if(ft){var n=vr,a=br;n=(a&~(1<<32-ir(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=ei++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Wu++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xu={readContext:Jt,useCallback:Cl,useContext:Jt,useEffect:ga,useImperativeHandle:_l,useInsertionEffect:Rl,useLayoutEffect:jl,useMemo:Il,useReducer:ha,useRef:kl,useState:function(){return ha(ti)},useDebugValue:ya,useDeferredValue:function(e){var t=er();return Nl(t,Rt.memoizedState,e)},useTransition:function(){var e=ha(ti)[0],t=er().memoizedState;return[e,t]},useMutableSource:hl,useSyncExternalStore:xl,useId:Al,unstable_isNewReconciler:!1},Ku={readContext:Jt,useCallback:Cl,useContext:Jt,useEffect:ga,useImperativeHandle:_l,useInsertionEffect:Rl,useLayoutEffect:jl,useMemo:Il,useReducer:xa,useRef:kl,useState:function(){return xa(ti)},useDebugValue:ya,useDeferredValue:function(e){var t=er();return Rt===null?t.memoizedState=e:Nl(t,Rt.memoizedState,e)},useTransition:function(){var e=xa(ti)[0],t=er().memoizedState;return[e,t]},useMutableSource:hl,useSyncExternalStore:xl,useId:Al,unstable_isNewReconciler:!1};function or(e,t){if(e&&e.defaultProps){t=A({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ba(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:A({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ki={isMounted:function(e){return(e=e._reactInternals)?ot(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Ft(),p=qr(e),v=wr(a,p);v.payload=t,n!=null&&(v.callback=n),t=Fr(e,v,p),t!==null&&(ur(t,e,p,a),Ui(t,e,p))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Ft(),p=qr(e),v=wr(a,p);v.tag=1,v.payload=t,n!=null&&(v.callback=n),t=Fr(e,v,p),t!==null&&(ur(t,e,p,a),Ui(t,e,p))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),a=qr(e),p=wr(n,a);p.tag=2,t!=null&&(p.callback=t),t=Fr(e,p,a),t!==null&&(ur(t,e,a,n),Ui(t,e,a))}};function Bl(e,t,n,a,p,v,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,v,I):t.prototype&&t.prototype.isPureReactComponent?!qn(n,a)||!qn(p,v):!0}function Ll(e,t,n){var a=!1,p=Dr,v=t.contextType;return typeof v=="object"&&v!==null?v=Jt(v):(p=Ot(t)?Kr:Pt.current,a=t.contextTypes,v=(a=a!=null)?gn(e,p):Dr),t=new t(n,v),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ki,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=v),t}function Fl(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Ki.enqueueReplaceState(t,t.state,null)}function va(e,t,n,a){var p=e.stateNode;p.props=n,p.state=e.memoizedState,p.refs={},aa(e);var v=t.contextType;typeof v=="object"&&v!==null?p.context=Jt(v):(v=Ot(t)?Kr:Pt.current,p.context=gn(e,v)),p.state=e.memoizedState,v=t.getDerivedStateFromProps,typeof v=="function"&&(ba(e,t,v,n),p.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(t=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),t!==p.state&&Ki.enqueueReplaceState(p,p.state,null),qi(e,n,p,a),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function Rn(e,t){try{var n="",a=t;do n+=fe(a),a=a.return;while(a);var p=n}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:t,stack:p,digest:null}}function Ea(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yu=typeof WeakMap=="function"?WeakMap:Map;function zl(e,t,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){rs||(rs=!0,La=a),wa(e,t)},n}function Ol(e,t,n){n=wr(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var p=t.value;n.payload=function(){return a(p)},n.callback=function(){wa(e,t)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){wa(e,t),typeof a!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var I=t.stack;this.componentDidCatch(t.value,{componentStack:I!==null?I:""})}),n}function Ul(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Yu;var p=new Set;a.set(t,p)}else p=a.get(t),p===void 0&&(p=new Set,a.set(t,p));p.has(n)||(p.add(n),e=ud.bind(null,e,t,n),t.then(e,e))}function ql(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wl(e,t,n,a,p){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wr(-1,1),t.tag=2,Fr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Qu=B.ReactCurrentOwner,Ut=!1;function Lt(e,t,n,a){t.child=e===null?cl(t,null,n,a):En(t,e.child,n,a)}function $l(e,t,n,a,p){n=n.render;var v=t.ref;return kn(t,p),a=fa(e,t,n,a,v,p),n=ma(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,kr(e,t,p)):(ft&&n&&Ys(t),t.flags|=1,Lt(e,t,a,p),t.child)}function Hl(e,t,n,a,p){if(e===null){var v=n.type;return typeof v=="function"&&!$a(v)&&v.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=v,Vl(e,t,v,a,p)):(e=ls(n.type,null,a,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(v=e.child,(e.lanes&p)===0){var I=v.memoizedProps;if(n=n.compare,n=n!==null?n:qn,n(I,a)&&e.ref===t.ref)return kr(e,t,p)}return t.flags|=1,e=$r(v,a),e.ref=t.ref,e.return=t,t.child=e}function Vl(e,t,n,a,p){if(e!==null){var v=e.memoizedProps;if(qn(v,a)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=a=v,(e.lanes&p)!==0)(e.flags&131072)!==0&&(Ut=!0);else return t.lanes=e.lanes,kr(e,t,p)}return ka(e,t,n,a,p)}function Gl(e,t,n){var a=t.pendingProps,p=a.children,v=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Tn,Xt),Xt|=n;else{if((n&1073741824)===0)return e=v!==null?v.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lt(Tn,Xt),Xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=v!==null?v.baseLanes:n,lt(Tn,Xt),Xt|=a}else v!==null?(a=v.baseLanes|n,t.memoizedState=null):a=n,lt(Tn,Xt),Xt|=a;return Lt(e,t,p,n),t.child}function Xl(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,a,p){var v=Ot(n)?Kr:Pt.current;return v=gn(t,v),kn(t,p),n=fa(e,t,n,a,v,p),a=ma(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,kr(e,t,p)):(ft&&a&&Ys(t),t.flags|=1,Lt(e,t,n,p),t.child)}function Kl(e,t,n,a,p){if(Ot(n)){var v=!0;Pi(t)}else v=!1;if(kn(t,p),t.stateNode===null)Qi(e,t),Ll(t,n,a),va(t,n,a,p),a=!0;else if(e===null){var I=t.stateNode,$=t.memoizedProps;I.props=$;var Y=I.context,pe=n.contextType;typeof pe=="object"&&pe!==null?pe=Jt(pe):(pe=Ot(n)?Kr:Pt.current,pe=gn(t,pe));var Ce=n.getDerivedStateFromProps,Ae=typeof Ce=="function"||typeof I.getSnapshotBeforeUpdate=="function";Ae||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==a||Y!==pe)&&Fl(t,I,a,pe),Lr=!1;var _e=t.memoizedState;I.state=_e,qi(t,a,I,p),Y=t.memoizedState,$!==a||_e!==Y||zt.current||Lr?(typeof Ce=="function"&&(ba(t,n,Ce,a),Y=t.memoizedState),($=Lr||Bl(t,n,$,a,_e,Y,pe))?(Ae||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(t.flags|=4194308)):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=Y),I.props=a,I.state=Y,I.context=pe,a=$):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{I=t.stateNode,dl(e,t),$=t.memoizedProps,pe=t.type===t.elementType?$:or(t.type,$),I.props=pe,Ae=t.pendingProps,_e=I.context,Y=n.contextType,typeof Y=="object"&&Y!==null?Y=Jt(Y):(Y=Ot(n)?Kr:Pt.current,Y=gn(t,Y));var Le=n.getDerivedStateFromProps;(Ce=typeof Le=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||($!==Ae||_e!==Y)&&Fl(t,I,a,Y),Lr=!1,_e=t.memoizedState,I.state=_e,qi(t,a,I,p);var Oe=t.memoizedState;$!==Ae||_e!==Oe||zt.current||Lr?(typeof Le=="function"&&(ba(t,n,Le,a),Oe=t.memoizedState),(pe=Lr||Bl(t,n,pe,a,_e,Oe,Y)||!1)?(Ce||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(a,Oe,Y),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(a,Oe,Y)),typeof I.componentDidUpdate=="function"&&(t.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof I.componentDidUpdate!="function"||$===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Oe),I.props=a,I.state=Oe,I.context=Y,a=pe):(typeof I.componentDidUpdate!="function"||$===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),a=!1)}return Sa(e,t,n,a,v,p)}function Sa(e,t,n,a,p,v){Xl(e,t);var I=(t.flags&128)!==0;if(!a&&!I)return p&&el(t,n,!1),kr(e,t,v);a=t.stateNode,Qu.current=t;var $=I&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&I?(t.child=En(t,e.child,null,v),t.child=En(t,null,$,v)):Lt(e,t,$,v),t.memoizedState=a.state,p&&el(t,n,!0),t.child}function Yl(e){var t=e.stateNode;t.pendingContext?Zo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zo(e,t.context,!1),oa(e,t.containerInfo)}function Ql(e,t,n,a,p){return vn(),ea(p),t.flags|=256,Lt(e,t,n,a),t.child}var Ra={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zl(e,t,n){var a=t.pendingProps,p=mt.current,v=!1,I=(t.flags&128)!==0,$;if(($=I)||($=e!==null&&e.memoizedState===null?!1:(p&2)!==0),$?(v=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),lt(mt,p&1),e===null)return Js(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(I=a.children,e=a.fallback,v?(a=t.mode,v=t.child,I={mode:"hidden",children:I},(a&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=I):v=cs(I,a,0,null),e=an(e,a,n,null),v.return=t,e.return=t,v.sibling=e,t.child=v,t.child.memoizedState=ja(n),t.memoizedState=Ra,e):Ta(t,I));if(p=e.memoizedState,p!==null&&($=p.dehydrated,$!==null))return Zu(e,t,I,a,$,p,n);if(v){v=a.fallback,I=t.mode,p=e.child,$=p.sibling;var Y={mode:"hidden",children:a.children};return(I&1)===0&&t.child!==p?(a=t.child,a.childLanes=0,a.pendingProps=Y,t.deletions=null):(a=$r(p,Y),a.subtreeFlags=p.subtreeFlags&14680064),$!==null?v=$r($,v):(v=an(v,I,n,null),v.flags|=2),v.return=t,a.return=t,a.sibling=v,t.child=a,a=v,v=t.child,I=e.child.memoizedState,I=I===null?ja(n):{baseLanes:I.baseLanes|n,cachePool:null,transitions:I.transitions},v.memoizedState=I,v.childLanes=e.childLanes&~n,t.memoizedState=Ra,a}return v=e.child,e=v.sibling,a=$r(v,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ta(e,t){return t=cs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yi(e,t,n,a){return a!==null&&ea(a),En(t,e.child,null,n),e=Ta(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zu(e,t,n,a,p,v,I){if(n)return t.flags&256?(t.flags&=-257,a=Ea(Error(o(422))),Yi(e,t,I,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(v=a.fallback,p=t.mode,a=cs({mode:"visible",children:a.children},p,0,null),v=an(v,p,I,null),v.flags|=2,a.return=t,v.return=t,a.sibling=v,t.child=a,(t.mode&1)!==0&&En(t,e.child,null,I),t.child.memoizedState=ja(I),t.memoizedState=Ra,v);if((t.mode&1)===0)return Yi(e,t,I,null);if(p.data==="$!"){if(a=p.nextSibling&&p.nextSibling.dataset,a)var $=a.dgst;return a=$,v=Error(o(419)),a=Ea(v,a,void 0),Yi(e,t,I,a)}if($=(I&e.childLanes)!==0,Ut||$){if(a=_t,a!==null){switch(I&-I){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(a.suspendedLanes|I))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,Er(e,p),ur(a,e,p,-1))}return Wa(),a=Ea(Error(o(421))),Yi(e,t,I,a)}return p.data==="$?"?(t.flags|=128,t.child=e.child,t=dd.bind(null,e),p._reactRetry=t,null):(e=v.treeContext,Gt=Pr(p.nextSibling),Vt=t,ft=!0,ar=null,e!==null&&(Qt[Zt++]=br,Qt[Zt++]=vr,Qt[Zt++]=Yr,br=e.id,vr=e.overflow,Yr=t),t=Ta(t,a.children),t.flags|=4096,t)}function Jl(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ia(e.return,t,n)}function _a(e,t,n,a,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:p}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=n,v.tailMode=p)}function ec(e,t,n){var a=t.pendingProps,p=a.revealOrder,v=a.tail;if(Lt(e,t,a.children,n),a=mt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jl(e,n,t);else if(e.tag===19)Jl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(lt(mt,a),(t.mode&1)===0)t.memoizedState=null;else switch(p){case"forwards":for(n=t.child,p=null;n!==null;)e=n.alternate,e!==null&&Wi(e)===null&&(p=n),n=n.sibling;n=p,n===null?(p=t.child,t.child=null):(p=n.sibling,n.sibling=null),_a(t,!1,p,n,v);break;case"backwards":for(n=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&Wi(e)===null){t.child=p;break}e=p.sibling,p.sibling=n,n=p,p=e}_a(t,!0,n,null,v);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=$r(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$r(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ju(e,t,n){switch(t.tag){case 3:Yl(t),vn();break;case 5:ml(t);break;case 1:Ot(t.type)&&Pi(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,p=t.memoizedProps.value;lt(zi,a._currentValue),a._currentValue=p;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(lt(mt,mt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Zl(e,t,n):(lt(mt,mt.current&1),e=kr(e,t,n),e!==null?e.sibling:null);lt(mt,mt.current&1);break;case 19:if(a=(n&t.childLanes)!==0,(e.flags&128)!==0){if(a)return ec(e,t,n);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),lt(mt,mt.current),a)break;return null;case 22:case 23:return t.lanes=0,Gl(e,t,n)}return kr(e,t,n)}var tc,Ca,rc,nc;tc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ca=function(){},rc=function(e,t,n,a){var p=e.memoizedProps;if(p!==a){e=t.stateNode,Jr(fr.current);var v=null;switch(n){case"input":p=H(e,p),a=H(e,a),v=[];break;case"select":p=A({},p,{value:void 0}),a=A({},a,{value:void 0}),v=[];break;case"textarea":p=Ee(e,p),a=Ee(e,a),v=[];break;default:typeof p.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Ii)}Xe(n,a);var I;n=null;for(pe in p)if(!a.hasOwnProperty(pe)&&p.hasOwnProperty(pe)&&p[pe]!=null)if(pe==="style"){var $=p[pe];for(I in $)$.hasOwnProperty(I)&&(n||(n={}),n[I]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(l.hasOwnProperty(pe)?v||(v=[]):(v=v||[]).push(pe,null));for(pe in a){var Y=a[pe];if($=p?.[pe],a.hasOwnProperty(pe)&&Y!==$&&(Y!=null||$!=null))if(pe==="style")if($){for(I in $)!$.hasOwnProperty(I)||Y&&Y.hasOwnProperty(I)||(n||(n={}),n[I]="");for(I in Y)Y.hasOwnProperty(I)&&$[I]!==Y[I]&&(n||(n={}),n[I]=Y[I])}else n||(v||(v=[]),v.push(pe,n)),n=Y;else pe==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,$=$?$.__html:void 0,Y!=null&&$!==Y&&(v=v||[]).push(pe,Y)):pe==="children"?typeof Y!="string"&&typeof Y!="number"||(v=v||[]).push(pe,""+Y):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(l.hasOwnProperty(pe)?(Y!=null&&pe==="onScroll"&&dt("scroll",e),v||$===Y||(v=[])):(v=v||[]).push(pe,Y))}n&&(v=v||[]).push("style",n);var pe=v;(t.updateQueue=pe)&&(t.flags|=4)}},nc=function(e,t,n,a){n!==a&&(t.flags|=4)};function ni(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var p=e.child;p!==null;)n|=p.lanes|p.childLanes,a|=p.subtreeFlags&14680064,a|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)n|=p.lanes|p.childLanes,a|=p.subtreeFlags,a|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function ed(e,t,n){var a=t.pendingProps;switch(Qs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Ot(t.type)&&Ai(),Dt(t),null;case 3:return a=t.stateNode,Sn(),pt(zt),pt(Pt),ua(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ar!==null&&(Oa(ar),ar=null))),Ca(e,t),Dt(t),null;case 5:la(t);var p=Jr(Zn.current);if(n=t.type,e!==null&&t.stateNode!=null)rc(e,t,n,a,p),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Dt(t),null}if(e=Jr(fr.current),Li(t)){a=t.stateNode,n=t.type;var v=t.memoizedProps;switch(a[pr]=t,a[Gn]=v,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",a),dt("close",a);break;case"iframe":case"object":case"embed":dt("load",a);break;case"video":case"audio":for(p=0;p<$n.length;p++)dt($n[p],a);break;case"source":dt("error",a);break;case"img":case"image":case"link":dt("error",a),dt("load",a);break;case"details":dt("toggle",a);break;case"input":oe(a,v),dt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!v.multiple},dt("invalid",a);break;case"textarea":De(a,v),dt("invalid",a)}Xe(n,v),p=null;for(var I in v)if(v.hasOwnProperty(I)){var $=v[I];I==="children"?typeof $=="string"?a.textContent!==$&&(v.suppressHydrationWarning!==!0&&Ci(a.textContent,$,e),p=["children",$]):typeof $=="number"&&a.textContent!==""+$&&(v.suppressHydrationWarning!==!0&&Ci(a.textContent,$,e),p=["children",""+$]):l.hasOwnProperty(I)&&$!=null&&I==="onScroll"&&dt("scroll",a)}switch(n){case"input":Ie(a),Re(a,v,!0);break;case"textarea":Ie(a),Ye(a);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(a.onclick=Ii)}a=p,t.updateQueue=a,a!==null&&(t.flags|=4)}else{I=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rt(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=I.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=I.createElement(n,{is:a.is}):(e=I.createElement(n),n==="select"&&(I=e,a.multiple?I.multiple=!0:a.size&&(I.size=a.size))):e=I.createElementNS(e,n),e[pr]=t,e[Gn]=a,tc(e,t,!1,!1),t.stateNode=e;e:{switch(I=Qe(n,a),n){case"dialog":dt("cancel",e),dt("close",e),p=a;break;case"iframe":case"object":case"embed":dt("load",e),p=a;break;case"video":case"audio":for(p=0;p<$n.length;p++)dt($n[p],e);p=a;break;case"source":dt("error",e),p=a;break;case"img":case"image":case"link":dt("error",e),dt("load",e),p=a;break;case"details":dt("toggle",e),p=a;break;case"input":oe(e,a),p=H(e,a),dt("invalid",e);break;case"option":p=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},p=A({},a,{value:void 0}),dt("invalid",e);break;case"textarea":De(e,a),p=Ee(e,a),dt("invalid",e);break;default:p=a}Xe(n,p),$=p;for(v in $)if($.hasOwnProperty(v)){var Y=$[v];v==="style"?Fe(e,Y):v==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&k(e,Y)):v==="children"?typeof Y=="string"?(n!=="textarea"||Y!=="")&&z(e,Y):typeof Y=="number"&&z(e,""+Y):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?Y!=null&&v==="onScroll"&&dt("scroll",e):Y!=null&&C(e,v,Y,I))}switch(n){case"input":Ie(e),Re(e,a,!1);break;case"textarea":Ie(e),Ye(e);break;case"option":a.value!=null&&e.setAttribute("value",""+te(a.value));break;case"select":e.multiple=!!a.multiple,v=a.value,v!=null?Ne(e,!!a.multiple,v,!1):a.defaultValue!=null&&Ne(e,!!a.multiple,a.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=Ii)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)nc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(n=Jr(Zn.current),Jr(fr.current),Li(t)){if(a=t.stateNode,n=t.memoizedProps,a[pr]=t,(v=a.nodeValue!==n)&&(e=Vt,e!==null))switch(e.tag){case 3:Ci(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ci(a.nodeValue,n,(e.mode&1)!==0)}v&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[pr]=t,t.stateNode=a}return Dt(t),null;case 13:if(pt(mt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&Gt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)al(),vn(),t.flags|=98560,v=!1;else if(v=Li(t),a!==null&&a.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=t.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[pr]=t}else vn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Dt(t),v=!1}else ar!==null&&(Oa(ar),ar=null),v=!0;if(!v)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(mt.current&1)!==0?jt===0&&(jt=3):Wa())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return Sn(),Ca(e,t),e===null&&Hn(t.stateNode.containerInfo),Dt(t),null;case 10:return na(t.type._context),Dt(t),null;case 17:return Ot(t.type)&&Ai(),Dt(t),null;case 19:if(pt(mt),v=t.memoizedState,v===null)return Dt(t),null;if(a=(t.flags&128)!==0,I=v.rendering,I===null)if(a)ni(v,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(I=Wi(e),I!==null){for(t.flags|=128,ni(v,!1),a=I.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)v=n,e=a,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,e=I.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lt(mt,mt.current&1|2),t.child}e=e.sibling}v.tail!==null&&yt()>_n&&(t.flags|=128,a=!0,ni(v,!1),t.lanes=4194304)}else{if(!a)if(e=Wi(I),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ni(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!ft)return Dt(t),null}else 2*yt()-v.renderingStartTime>_n&&n!==1073741824&&(t.flags|=128,a=!0,ni(v,!1),t.lanes=4194304);v.isBackwards?(I.sibling=t.child,t.child=I):(n=v.last,n!==null?n.sibling=I:t.child=I,v.last=I)}return v.tail!==null?(t=v.tail,v.rendering=t,v.tail=t.sibling,v.renderingStartTime=yt(),t.sibling=null,n=mt.current,lt(mt,a?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return qa(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Xt&1073741824)!==0&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function td(e,t){switch(Qs(t),t.tag){case 1:return Ot(t.type)&&Ai(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sn(),pt(zt),pt(Pt),ua(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return la(t),null;case 13:if(pt(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));vn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pt(mt),null;case 4:return Sn(),null;case 10:return na(t.type._context),null;case 22:case 23:return qa(),null;case 24:return null;default:return null}}var Zi=!1,Bt=!1,rd=typeof WeakSet=="function"?WeakSet:Set,ze=null;function jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){xt(e,t,a)}else n.current=null}function Ia(e,t,n){try{n()}catch(a){xt(e,t,a)}}var ic=!1;function nd(e,t){if(qs=yi,e=Bo(),Ms(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var p=a.anchorOffset,v=a.focusNode;a=a.focusOffset;try{n.nodeType,v.nodeType}catch{n=null;break e}var I=0,$=-1,Y=-1,pe=0,Ce=0,Ae=e,_e=null;t:for(;;){for(var Le;Ae!==n||p!==0&&Ae.nodeType!==3||($=I+p),Ae!==v||a!==0&&Ae.nodeType!==3||(Y=I+a),Ae.nodeType===3&&(I+=Ae.nodeValue.length),(Le=Ae.firstChild)!==null;)_e=Ae,Ae=Le;for(;;){if(Ae===e)break t;if(_e===n&&++pe===p&&($=I),_e===v&&++Ce===a&&(Y=I),(Le=Ae.nextSibling)!==null)break;Ae=_e,_e=Ae.parentNode}Ae=Le}n=$===-1||Y===-1?null:{start:$,end:Y}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ws={focusedElem:e,selectionRange:n},yi=!1,ze=t;ze!==null;)if(t=ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ze=e;else for(;ze!==null;){t=ze;try{var Oe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ue=Oe.memoizedProps,bt=Oe.memoizedState,ce=t.stateNode,re=ce.getSnapshotBeforeUpdate(t.elementType===t.type?Ue:or(t.type,Ue),bt);ce.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ue=t.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Me){xt(t,t.return,Me)}if(e=t.sibling,e!==null){e.return=t.return,ze=e;break}ze=t.return}return Oe=ic,ic=!1,Oe}function ii(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&e)===e){var v=p.destroy;p.destroy=void 0,v!==void 0&&Ia(t,n,v)}p=p.next}while(p!==a)}}function Ji(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function Na(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sc(e){var t=e.alternate;t!==null&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pr],delete t[Gn],delete t[Gs],delete t[zu],delete t[Ou])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return e.tag===5||e.tag===3||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Aa(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ii));else if(a!==4&&(e=e.child,e!==null))for(Aa(e,t,n),e=e.sibling;e!==null;)Aa(e,t,n),e=e.sibling}function Pa(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Pa(e,t,n),e=e.sibling;e!==null;)Pa(e,t,n),e=e.sibling}var It=null,lr=!1;function zr(e,t,n){for(n=n.child;n!==null;)lc(e,t,n),n=n.sibling}function lc(e,t,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(pi,n)}catch{}switch(n.tag){case 5:Bt||jn(n,t);case 6:var a=It,p=lr;It=null,zr(e,t,n),It=a,lr=p,It!==null&&(lr?(e=It,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(lr?(e=It,n=n.stateNode,e.nodeType===8?Vs(e.parentNode,n):e.nodeType===1&&Vs(e,n),Bn(e)):Vs(It,n.stateNode));break;case 4:a=It,p=lr,It=n.stateNode.containerInfo,lr=!0,zr(e,t,n),It=a,lr=p;break;case 0:case 11:case 14:case 15:if(!Bt&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){p=a=a.next;do{var v=p,I=v.destroy;v=v.tag,I!==void 0&&((v&2)!==0||(v&4)!==0)&&Ia(n,t,I),p=p.next}while(p!==a)}zr(e,t,n);break;case 1:if(!Bt&&(jn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch($){xt(n,t,$)}zr(e,t,n);break;case 21:zr(e,t,n);break;case 22:n.mode&1?(Bt=(a=Bt)||n.memoizedState!==null,zr(e,t,n),Bt=a):zr(e,t,n);break;default:zr(e,t,n)}}function cc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rd),t.forEach(function(a){var p=pd.bind(null,e,a);n.has(a)||(n.add(a),a.then(p,p))})}}function cr(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var p=n[a];try{var v=e,I=t,$=I;e:for(;$!==null;){switch($.tag){case 5:It=$.stateNode,lr=!1;break e;case 3:It=$.stateNode.containerInfo,lr=!0;break e;case 4:It=$.stateNode.containerInfo,lr=!0;break e}$=$.return}if(It===null)throw Error(o(160));lc(v,I,p),It=null,lr=!1;var Y=p.alternate;Y!==null&&(Y.return=null),p.return=null}catch(pe){xt(p,t,pe)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uc(t,e),t=t.sibling}function uc(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cr(t,e),hr(e),a&4){try{ii(3,e,e.return),Ji(3,e)}catch(Ue){xt(e,e.return,Ue)}try{ii(5,e,e.return)}catch(Ue){xt(e,e.return,Ue)}}break;case 1:cr(t,e),hr(e),a&512&&n!==null&&jn(n,n.return);break;case 5:if(cr(t,e),hr(e),a&512&&n!==null&&jn(n,n.return),e.flags&32){var p=e.stateNode;try{z(p,"")}catch(Ue){xt(e,e.return,Ue)}}if(a&4&&(p=e.stateNode,p!=null)){var v=e.memoizedProps,I=n!==null?n.memoizedProps:v,$=e.type,Y=e.updateQueue;if(e.updateQueue=null,Y!==null)try{$==="input"&&v.type==="radio"&&v.name!=null&&he(p,v),Qe($,I);var pe=Qe($,v);for(I=0;I<Y.length;I+=2){var Ce=Y[I],Ae=Y[I+1];Ce==="style"?Fe(p,Ae):Ce==="dangerouslySetInnerHTML"?k(p,Ae):Ce==="children"?z(p,Ae):C(p,Ce,Ae,pe)}switch($){case"input":Se(p,v);break;case"textarea":Je(p,v);break;case"select":var _e=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var Le=v.value;Le!=null?Ne(p,!!v.multiple,Le,!1):_e!==!!v.multiple&&(v.defaultValue!=null?Ne(p,!!v.multiple,v.defaultValue,!0):Ne(p,!!v.multiple,v.multiple?[]:"",!1))}p[Gn]=v}catch(Ue){xt(e,e.return,Ue)}}break;case 6:if(cr(t,e),hr(e),a&4){if(e.stateNode===null)throw Error(o(162));p=e.stateNode,v=e.memoizedProps;try{p.nodeValue=v}catch(Ue){xt(e,e.return,Ue)}}break;case 3:if(cr(t,e),hr(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(Ue){xt(e,e.return,Ue)}break;case 4:cr(t,e),hr(e);break;case 13:cr(t,e),hr(e),p=e.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Ba=yt())),a&4&&cc(e);break;case 22:if(Ce=n!==null&&n.memoizedState!==null,e.mode&1?(Bt=(pe=Bt)||Ce,cr(t,e),Bt=pe):cr(t,e),hr(e),a&8192){if(pe=e.memoizedState!==null,(e.stateNode.isHidden=pe)&&!Ce&&(e.mode&1)!==0)for(ze=e,Ce=e.child;Ce!==null;){for(Ae=ze=Ce;ze!==null;){switch(_e=ze,Le=_e.child,_e.tag){case 0:case 11:case 14:case 15:ii(4,_e,_e.return);break;case 1:jn(_e,_e.return);var Oe=_e.stateNode;if(typeof Oe.componentWillUnmount=="function"){a=_e,n=_e.return;try{t=a,Oe.props=t.memoizedProps,Oe.state=t.memoizedState,Oe.componentWillUnmount()}catch(Ue){xt(a,n,Ue)}}break;case 5:jn(_e,_e.return);break;case 22:if(_e.memoizedState!==null){fc(Ae);continue}}Le!==null?(Le.return=_e,ze=Le):fc(Ae)}Ce=Ce.sibling}e:for(Ce=null,Ae=e;;){if(Ae.tag===5){if(Ce===null){Ce=Ae;try{p=Ae.stateNode,pe?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):($=Ae.stateNode,Y=Ae.memoizedProps.style,I=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,$.style.display=de("display",I))}catch(Ue){xt(e,e.return,Ue)}}}else if(Ae.tag===6){if(Ce===null)try{Ae.stateNode.nodeValue=pe?"":Ae.memoizedProps}catch(Ue){xt(e,e.return,Ue)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===e)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===e)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===e)break e;Ce===Ae&&(Ce=null),Ae=Ae.return}Ce===Ae&&(Ce=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:cr(t,e),hr(e),a&4&&cc(e);break;case 21:break;default:cr(t,e),hr(e)}}function hr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ac(n)){var a=n;break e}n=n.return}throw Error(o(160))}switch(a.tag){case 5:var p=a.stateNode;a.flags&32&&(z(p,""),a.flags&=-33);var v=oc(e);Pa(e,v,p);break;case 3:case 4:var I=a.stateNode.containerInfo,$=oc(e);Aa(e,$,I);break;default:throw Error(o(161))}}catch(Y){xt(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function id(e,t,n){ze=e,dc(e)}function dc(e,t,n){for(var a=(e.mode&1)!==0;ze!==null;){var p=ze,v=p.child;if(p.tag===22&&a){var I=p.memoizedState!==null||Zi;if(!I){var $=p.alternate,Y=$!==null&&$.memoizedState!==null||Bt;$=Zi;var pe=Bt;if(Zi=I,(Bt=Y)&&!pe)for(ze=p;ze!==null;)I=ze,Y=I.child,I.tag===22&&I.memoizedState!==null?mc(p):Y!==null?(Y.return=I,ze=Y):mc(p);for(;v!==null;)ze=v,dc(v),v=v.sibling;ze=p,Zi=$,Bt=pe}pc(e)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ze=v):pc(e)}}function pc(e){for(;ze!==null;){var t=ze;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Bt||Ji(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Bt)if(n===null)a.componentDidMount();else{var p=t.elementType===t.type?n.memoizedProps:or(t.type,n.memoizedProps);a.componentDidUpdate(p,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var v=t.updateQueue;v!==null&&fl(t,v,a);break;case 3:var I=t.updateQueue;if(I!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fl(t,I,n)}break;case 5:var $=t.stateNode;if(n===null&&t.flags&4){n=$;var Y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&n.focus();break;case"img":Y.src&&(n.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var pe=t.alternate;if(pe!==null){var Ce=pe.memoizedState;if(Ce!==null){var Ae=Ce.dehydrated;Ae!==null&&Bn(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Bt||t.flags&512&&Na(t)}catch(_e){xt(t,t.return,_e)}}if(t===e){ze=null;break}if(n=t.sibling,n!==null){n.return=t.return,ze=n;break}ze=t.return}}function fc(e){for(;ze!==null;){var t=ze;if(t===e){ze=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ze=n;break}ze=t.return}}function mc(e){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ji(4,t)}catch(Y){xt(t,n,Y)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var p=t.return;try{a.componentDidMount()}catch(Y){xt(t,p,Y)}}var v=t.return;try{Na(t)}catch(Y){xt(t,v,Y)}break;case 5:var I=t.return;try{Na(t)}catch(Y){xt(t,I,Y)}}}catch(Y){xt(t,t.return,Y)}if(t===e){ze=null;break}var $=t.sibling;if($!==null){$.return=t.return,ze=$;break}ze=t.return}}var sd=Math.ceil,es=B.ReactCurrentDispatcher,Ma=B.ReactCurrentOwner,tr=B.ReactCurrentBatchConfig,tt=0,_t=null,Et=null,Nt=0,Xt=0,Tn=Mr(0),jt=0,si=null,tn=0,ts=0,Da=0,ai=null,qt=null,Ba=0,_n=1/0,Sr=null,rs=!1,La=null,Or=null,ns=!1,Ur=null,is=0,oi=0,Fa=null,ss=-1,as=0;function Ft(){return(tt&6)!==0?yt():ss!==-1?ss:ss=yt()}function qr(e){return(e.mode&1)===0?1:(tt&2)!==0&&Nt!==0?Nt&-Nt:qu.transition!==null?(as===0&&(as=ao()),as):(e=it,e!==0||(e=window.event,e=e===void 0?16:xo(e.type)),e)}function ur(e,t,n,a){if(50<oi)throw oi=0,Fa=null,Error(o(185));Nn(e,n,a),((tt&2)===0||e!==_t)&&(e===_t&&((tt&2)===0&&(ts|=n),jt===4&&Wr(e,Nt)),Wt(e,a),n===1&&tt===0&&(t.mode&1)===0&&(_n=yt()+500,Mi&&Br()))}function Wt(e,t){var n=e.callbackNode;qc(e,t);var a=hi(e,e===_t?Nt:0);if(a===0)n!==null&&no(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&no(n),t===1)e.tag===0?Uu(xc.bind(null,e)):tl(xc.bind(null,e)),Lu(function(){(tt&6)===0&&Br()}),n=null;else{switch(oo(a)){case 1:n=gs;break;case 4:n=io;break;case 16:n=di;break;case 536870912:n=so;break;default:n=di}n=Sc(n,hc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hc(e,t){if(ss=-1,as=0,(tt&6)!==0)throw Error(o(327));var n=e.callbackNode;if(Cn()&&e.callbackNode!==n)return null;var a=hi(e,e===_t?Nt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=os(e,a);else{t=a;var p=tt;tt|=2;var v=yc();(_t!==e||Nt!==t)&&(Sr=null,_n=yt()+500,nn(e,t));do try{ld();break}catch($){gc(e,$)}while(!0);ra(),es.current=v,tt=p,Et!==null?t=0:(_t=null,Nt=0,t=jt)}if(t!==0){if(t===2&&(p=ys(e),p!==0&&(a=p,t=za(e,p))),t===1)throw n=si,nn(e,0),Wr(e,a),Wt(e,yt()),n;if(t===6)Wr(e,a);else{if(p=e.current.alternate,(a&30)===0&&!ad(p)&&(t=os(e,a),t===2&&(v=ys(e),v!==0&&(a=v,t=za(e,v))),t===1))throw n=si,nn(e,0),Wr(e,a),Wt(e,yt()),n;switch(e.finishedWork=p,e.finishedLanes=a,t){case 0:case 1:throw Error(o(345));case 2:sn(e,qt,Sr);break;case 3:if(Wr(e,a),(a&130023424)===a&&(t=Ba+500-yt(),10<t)){if(hi(e,0)!==0)break;if(p=e.suspendedLanes,(p&a)!==a){Ft(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=Hs(sn.bind(null,e,qt,Sr),t);break}sn(e,qt,Sr);break;case 4:if(Wr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,p=-1;0<a;){var I=31-ir(a);v=1<<I,I=t[I],I>p&&(p=I),a&=~v}if(a=p,a=yt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*sd(a/1960))-a,10<a){e.timeoutHandle=Hs(sn.bind(null,e,qt,Sr),a);break}sn(e,qt,Sr);break;case 5:sn(e,qt,Sr);break;default:throw Error(o(329))}}}return Wt(e,yt()),e.callbackNode===n?hc.bind(null,e):null}function za(e,t){var n=ai;return e.current.memoizedState.isDehydrated&&(nn(e,t).flags|=256),e=os(e,t),e!==2&&(t=qt,qt=n,t!==null&&Oa(t)),e}function Oa(e){qt===null?qt=e:qt.push.apply(qt,e)}function ad(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var p=n[a],v=p.getSnapshot;p=p.value;try{if(!sr(v(),p))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wr(e,t){for(t&=~Da,t&=~ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ir(t),a=1<<n;e[n]=-1,t&=~a}}function xc(e){if((tt&6)!==0)throw Error(o(327));Cn();var t=hi(e,0);if((t&1)===0)return Wt(e,yt()),null;var n=os(e,t);if(e.tag!==0&&n===2){var a=ys(e);a!==0&&(t=a,n=za(e,a))}if(n===1)throw n=si,nn(e,0),Wr(e,t),Wt(e,yt()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sn(e,qt,Sr),Wt(e,yt()),null}function Ua(e,t){var n=tt;tt|=1;try{return e(t)}finally{tt=n,tt===0&&(_n=yt()+500,Mi&&Br())}}function rn(e){Ur!==null&&Ur.tag===0&&(tt&6)===0&&Cn();var t=tt;tt|=1;var n=tr.transition,a=it;try{if(tr.transition=null,it=1,e)return e()}finally{it=a,tr.transition=n,tt=t,(tt&6)===0&&Br()}}function qa(){Xt=Tn.current,pt(Tn)}function nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Bu(n)),Et!==null)for(n=Et.return;n!==null;){var a=n;switch(Qs(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ai();break;case 3:Sn(),pt(zt),pt(Pt),ua();break;case 5:la(a);break;case 4:Sn();break;case 13:pt(mt);break;case 19:pt(mt);break;case 10:na(a.type._context);break;case 22:case 23:qa()}n=n.return}if(_t=e,Et=e=$r(e.current,null),Nt=Xt=t,jt=0,si=null,Da=ts=tn=0,qt=ai=null,Zr!==null){for(t=0;t<Zr.length;t++)if(n=Zr[t],a=n.interleaved,a!==null){n.interleaved=null;var p=a.next,v=n.pending;if(v!==null){var I=v.next;v.next=p,a.next=I}n.pending=a}Zr=null}return e}function gc(e,t){do{var n=Et;try{if(ra(),$i.current=Xi,Hi){for(var a=ht.memoizedState;a!==null;){var p=a.queue;p!==null&&(p.pending=null),a=a.next}Hi=!1}if(en=0,Tt=Rt=ht=null,Jn=!1,ei=0,Ma.current=null,n===null||n.return===null){jt=1,si=t,Et=null;break}e:{var v=e,I=n.return,$=n,Y=t;if(t=Nt,$.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pe=Y,Ce=$,Ae=Ce.tag;if((Ce.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var _e=Ce.alternate;_e?(Ce.updateQueue=_e.updateQueue,Ce.memoizedState=_e.memoizedState,Ce.lanes=_e.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Le=ql(I);if(Le!==null){Le.flags&=-257,Wl(Le,I,$,v,t),Le.mode&1&&Ul(v,pe,t),t=Le,Y=pe;var Oe=t.updateQueue;if(Oe===null){var Ue=new Set;Ue.add(Y),t.updateQueue=Ue}else Oe.add(Y);break e}else{if((t&1)===0){Ul(v,pe,t),Wa();break e}Y=Error(o(426))}}else if(ft&&$.mode&1){var bt=ql(I);if(bt!==null){(bt.flags&65536)===0&&(bt.flags|=256),Wl(bt,I,$,v,t),ea(Rn(Y,$));break e}}v=Y=Rn(Y,$),jt!==4&&(jt=2),ai===null?ai=[v]:ai.push(v),v=I;do{switch(v.tag){case 3:v.flags|=65536,t&=-t,v.lanes|=t;var ce=zl(v,Y,t);pl(v,ce);break e;case 1:$=Y;var re=v.type,ue=v.stateNode;if((v.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Or===null||!Or.has(ue)))){v.flags|=65536,t&=-t,v.lanes|=t;var Me=Ol(v,$,t);pl(v,Me);break e}}v=v.return}while(v!==null)}vc(n)}catch(We){t=We,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function yc(){var e=es.current;return es.current=Xi,e===null?Xi:e}function Wa(){(jt===0||jt===3||jt===2)&&(jt=4),_t===null||(tn&268435455)===0&&(ts&268435455)===0||Wr(_t,Nt)}function os(e,t){var n=tt;tt|=2;var a=yc();(_t!==e||Nt!==t)&&(Sr=null,nn(e,t));do try{od();break}catch(p){gc(e,p)}while(!0);if(ra(),tt=n,es.current=a,Et!==null)throw Error(o(261));return _t=null,Nt=0,jt}function od(){for(;Et!==null;)bc(Et)}function ld(){for(;Et!==null&&!Pc();)bc(Et)}function bc(e){var t=kc(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,t===null?vc(e):Et=t,Ma.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=ed(n,t,Xt),n!==null){Et=n;return}}else{if(n=td(n,t),n!==null){n.flags&=32767,Et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jt=6,Et=null;return}}if(t=t.sibling,t!==null){Et=t;return}Et=t=e}while(t!==null);jt===0&&(jt=5)}function sn(e,t,n){var a=it,p=tr.transition;try{tr.transition=null,it=1,cd(e,t,n,a)}finally{tr.transition=p,it=a}return null}function cd(e,t,n,a){do Cn();while(Ur!==null);if((tt&6)!==0)throw Error(o(327));n=e.finishedWork;var p=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var v=n.lanes|n.childLanes;if(Wc(e,v),e===_t&&(Et=_t=null,Nt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ns||(ns=!0,Sc(di,function(){return Cn(),null})),v=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||v){v=tr.transition,tr.transition=null;var I=it;it=1;var $=tt;tt|=4,Ma.current=null,nd(e,n),uc(n,e),Cu(Ws),yi=!!qs,Ws=qs=null,e.current=n,id(n),Mc(),tt=$,it=I,tr.transition=v}else e.current=n;if(ns&&(ns=!1,Ur=e,is=p),v=e.pendingLanes,v===0&&(Or=null),Lc(n.stateNode),Wt(e,yt()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)p=t[n],a(p.value,{componentStack:p.stack,digest:p.digest});if(rs)throw rs=!1,e=La,La=null,e;return(is&1)!==0&&e.tag!==0&&Cn(),v=e.pendingLanes,(v&1)!==0?e===Fa?oi++:(oi=0,Fa=e):oi=0,Br(),null}function Cn(){if(Ur!==null){var e=oo(is),t=tr.transition,n=it;try{if(tr.transition=null,it=16>e?16:e,Ur===null)var a=!1;else{if(e=Ur,Ur=null,is=0,(tt&6)!==0)throw Error(o(331));var p=tt;for(tt|=4,ze=e.current;ze!==null;){var v=ze,I=v.child;if((ze.flags&16)!==0){var $=v.deletions;if($!==null){for(var Y=0;Y<$.length;Y++){var pe=$[Y];for(ze=pe;ze!==null;){var Ce=ze;switch(Ce.tag){case 0:case 11:case 15:ii(8,Ce,v)}var Ae=Ce.child;if(Ae!==null)Ae.return=Ce,ze=Ae;else for(;ze!==null;){Ce=ze;var _e=Ce.sibling,Le=Ce.return;if(sc(Ce),Ce===pe){ze=null;break}if(_e!==null){_e.return=Le,ze=_e;break}ze=Le}}}var Oe=v.alternate;if(Oe!==null){var Ue=Oe.child;if(Ue!==null){Oe.child=null;do{var bt=Ue.sibling;Ue.sibling=null,Ue=bt}while(Ue!==null)}}ze=v}}if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,ze=I;else e:for(;ze!==null;){if(v=ze,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ii(9,v,v.return)}var ce=v.sibling;if(ce!==null){ce.return=v.return,ze=ce;break e}ze=v.return}}var re=e.current;for(ze=re;ze!==null;){I=ze;var ue=I.child;if((I.subtreeFlags&2064)!==0&&ue!==null)ue.return=I,ze=ue;else e:for(I=re;ze!==null;){if($=ze,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Ji(9,$)}}catch(We){xt($,$.return,We)}if($===I){ze=null;break e}var Me=$.sibling;if(Me!==null){Me.return=$.return,ze=Me;break e}ze=$.return}}if(tt=p,Br(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(pi,e)}catch{}a=!0}return a}finally{it=n,tr.transition=t}}return!1}function Ec(e,t,n){t=Rn(n,t),t=zl(e,t,1),e=Fr(e,t,1),t=Ft(),e!==null&&(Nn(e,1,t),Wt(e,t))}function xt(e,t,n){if(e.tag===3)Ec(e,e,n);else for(;t!==null;){if(t.tag===3){Ec(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Or===null||!Or.has(a))){e=Rn(n,e),e=Ol(t,e,1),t=Fr(t,e,1),e=Ft(),t!==null&&(Nn(t,1,e),Wt(t,e));break}}t=t.return}}function ud(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=Ft(),e.pingedLanes|=e.suspendedLanes&n,_t===e&&(Nt&n)===n&&(jt===4||jt===3&&(Nt&130023424)===Nt&&500>yt()-Ba?nn(e,0):Da|=n),Wt(e,t)}function wc(e,t){t===0&&((e.mode&1)===0?t=1:(t=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var n=Ft();e=Er(e,t),e!==null&&(Nn(e,t,n),Wt(e,n))}function dd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wc(e,n)}function pd(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,p=e.memoizedState;p!==null&&(n=p.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(t),wc(e,n)}var kc;kc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Ut=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Ut=!1,Ju(e,t,n);Ut=(e.flags&131072)!==0}else Ut=!1,ft&&(t.flags&1048576)!==0&&rl(t,Bi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Qi(e,t),e=t.pendingProps;var p=gn(t,Pt.current);kn(t,n),p=fa(null,t,a,e,p,n);var v=ma();return t.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ot(a)?(v=!0,Pi(t)):v=!1,t.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,aa(t),p.updater=Ki,t.stateNode=p,p._reactInternals=t,va(t,a,e,n),t=Sa(null,t,a,!0,v,n)):(t.tag=0,ft&&v&&Ys(t),Lt(null,t,p,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Qi(e,t),e=t.pendingProps,p=a._init,a=p(a._payload),t.type=a,p=t.tag=md(a),e=or(a,e),p){case 0:t=ka(null,t,a,e,n);break e;case 1:t=Kl(null,t,a,e,n);break e;case 11:t=$l(null,t,a,e,n);break e;case 14:t=Hl(null,t,a,or(a.type,e),n);break e}throw Error(o(306,a,""))}return t;case 0:return a=t.type,p=t.pendingProps,p=t.elementType===a?p:or(a,p),ka(e,t,a,p,n);case 1:return a=t.type,p=t.pendingProps,p=t.elementType===a?p:or(a,p),Kl(e,t,a,p,n);case 3:e:{if(Yl(t),e===null)throw Error(o(387));a=t.pendingProps,v=t.memoizedState,p=v.element,dl(e,t),qi(t,a,null,n);var I=t.memoizedState;if(a=I.element,v.isDehydrated)if(v={element:a,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},t.updateQueue.baseState=v,t.memoizedState=v,t.flags&256){p=Rn(Error(o(423)),t),t=Ql(e,t,a,n,p);break e}else if(a!==p){p=Rn(Error(o(424)),t),t=Ql(e,t,a,n,p);break e}else for(Gt=Pr(t.stateNode.containerInfo.firstChild),Vt=t,ft=!0,ar=null,n=cl(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vn(),a===p){t=kr(e,t,n);break e}Lt(e,t,a,n)}t=t.child}return t;case 5:return ml(t),e===null&&Js(t),a=t.type,p=t.pendingProps,v=e!==null?e.memoizedProps:null,I=p.children,$s(a,p)?I=null:v!==null&&$s(a,v)&&(t.flags|=32),Xl(e,t),Lt(e,t,I,n),t.child;case 6:return e===null&&Js(t),null;case 13:return Zl(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=En(t,null,a,n):Lt(e,t,a,n),t.child;case 11:return a=t.type,p=t.pendingProps,p=t.elementType===a?p:or(a,p),$l(e,t,a,p,n);case 7:return Lt(e,t,t.pendingProps,n),t.child;case 8:return Lt(e,t,t.pendingProps.children,n),t.child;case 12:return Lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,p=t.pendingProps,v=t.memoizedProps,I=p.value,lt(zi,a._currentValue),a._currentValue=I,v!==null)if(sr(v.value,I)){if(v.children===p.children&&!zt.current){t=kr(e,t,n);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var $=v.dependencies;if($!==null){I=v.child;for(var Y=$.firstContext;Y!==null;){if(Y.context===a){if(v.tag===1){Y=wr(-1,n&-n),Y.tag=2;var pe=v.updateQueue;if(pe!==null){pe=pe.shared;var Ce=pe.pending;Ce===null?Y.next=Y:(Y.next=Ce.next,Ce.next=Y),pe.pending=Y}}v.lanes|=n,Y=v.alternate,Y!==null&&(Y.lanes|=n),ia(v.return,n,t),$.lanes|=n;break}Y=Y.next}}else if(v.tag===10)I=v.type===t.type?null:v.child;else if(v.tag===18){if(I=v.return,I===null)throw Error(o(341));I.lanes|=n,$=I.alternate,$!==null&&($.lanes|=n),ia(I,n,t),I=v.sibling}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===t){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}Lt(e,t,p.children,n),t=t.child}return t;case 9:return p=t.type,a=t.pendingProps.children,kn(t,n),p=Jt(p),a=a(p),t.flags|=1,Lt(e,t,a,n),t.child;case 14:return a=t.type,p=or(a,t.pendingProps),p=or(a.type,p),Hl(e,t,a,p,n);case 15:return Vl(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,p=t.pendingProps,p=t.elementType===a?p:or(a,p),Qi(e,t),t.tag=1,Ot(a)?(e=!0,Pi(t)):e=!1,kn(t,n),Ll(t,a,p),va(t,a,p,n),Sa(null,t,a,!0,e,n);case 19:return ec(e,t,n);case 22:return Gl(e,t,n)}throw Error(o(156,t.tag))};function Sc(e,t){return ro(e,t)}function fd(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(e,t,n,a){return new fd(e,t,n,a)}function $a(e){return e=e.prototype,!(!e||!e.isReactComponent)}function md(e){if(typeof e=="function")return $a(e)?1:0;if(e!=null){if(e=e.$$typeof,e===se)return 11;if(e===ge)return 14}return 2}function $r(e,t){var n=e.alternate;return n===null?(n=rr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ls(e,t,n,a,p,v){var I=2;if(a=e,typeof e=="function")$a(e)&&(I=1);else if(typeof e=="string")I=5;else e:switch(e){case R:return an(n.children,p,v,t);case P:I=8,p|=8;break;case le:return e=rr(12,n,t,p|2),e.elementType=le,e.lanes=v,e;case Q:return e=rr(13,n,t,p),e.elementType=Q,e.lanes=v,e;case J:return e=rr(19,n,t,p),e.elementType=J,e.lanes=v,e;case Pe:return cs(n,p,v,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:I=10;break e;case V:I=9;break e;case se:I=11;break e;case ge:I=14;break e;case we:I=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=rr(I,n,t,p),t.elementType=e,t.type=a,t.lanes=v,t}function an(e,t,n,a){return e=rr(7,e,a,t),e.lanes=n,e}function cs(e,t,n,a){return e=rr(22,e,a,t),e.elementType=Pe,e.lanes=n,e.stateNode={isHidden:!1},e}function Ha(e,t,n){return e=rr(6,e,null,t),e.lanes=n,e}function Va(e,t,n){return t=rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hd(e,t,n,a,p){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=a,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Ga(e,t,n,a,p,v,I,$,Y){return e=new hd(e,t,n,$,Y),t===1?(t=1,v===!0&&(t|=8)):t=0,v=rr(3,null,null,t),e.current=v,v.stateNode=e,v.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(v),e}function xd(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Rc(e){if(!e)return Dr;e=e._reactInternals;e:{if(ot(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(Ot(n))return Jo(e,n,t)}return t}function jc(e,t,n,a,p,v,I,$,Y){return e=Ga(n,a,!0,e,p,v,I,$,Y),e.context=Rc(null),n=e.current,a=Ft(),p=qr(n),v=wr(a,p),v.callback=t??null,Fr(n,v,p),e.current.lanes=p,Nn(e,p,a),Wt(e,a),e}function us(e,t,n,a){var p=t.current,v=Ft(),I=qr(p);return n=Rc(n),t.context===null?t.context=n:t.pendingContext=n,t=wr(v,I),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Fr(p,t,I),e!==null&&(ur(e,p,I,v),Ui(e,p,I)),I}function ds(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xa(e,t){Tc(e,t),(e=e.alternate)&&Tc(e,t)}function gd(){return null}var _c=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ka(e){this._internalRoot=e}ps.prototype.render=Ka.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));us(e,t,null,null)},ps.prototype.unmount=Ka.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){us(null,e,null,null)}),t[gr]=null}};function ps(e){this._internalRoot=e}ps.prototype.unstable_scheduleHydration=function(e){if(e){var t=uo();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ir.length&&t!==0&&t<Ir[n].priority;n++);Ir.splice(n,0,e),n===0&&mo(e)}};function Ya(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function yd(e,t,n,a,p){if(p){if(typeof a=="function"){var v=a;a=function(){var pe=ds(I);v.call(pe)}}var I=jc(t,a,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=I,e[gr]=I.current,Hn(e.nodeType===8?e.parentNode:e),rn(),I}for(;p=e.lastChild;)e.removeChild(p);if(typeof a=="function"){var $=a;a=function(){var pe=ds(Y);$.call(pe)}}var Y=Ga(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=Y,e[gr]=Y.current,Hn(e.nodeType===8?e.parentNode:e),rn(function(){us(t,Y,n,a)}),Y}function hs(e,t,n,a,p){var v=n._reactRootContainer;if(v){var I=v;if(typeof p=="function"){var $=p;p=function(){var Y=ds(I);$.call(Y)}}us(t,I,e,p)}else I=yd(n,t,e,p,a);return ds(I)}lo=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=In(t.pendingLanes);n!==0&&(vs(t,n|1),Wt(t,yt()),(tt&6)===0&&(_n=yt()+500,Br()))}break;case 13:rn(function(){var a=Er(e,1);if(a!==null){var p=Ft();ur(a,e,1,p)}}),Xa(e,1)}},Es=function(e){if(e.tag===13){var t=Er(e,134217728);if(t!==null){var n=Ft();ur(t,e,134217728,n)}Xa(e,134217728)}},co=function(e){if(e.tag===13){var t=qr(e),n=Er(e,t);if(n!==null){var a=Ft();ur(n,e,t,a)}Xa(e,t)}},uo=function(){return it},po=function(e,t){var n=it;try{return it=e,t()}finally{it=n}},Gr=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var p=Ni(a);if(!p)throw Error(o(90));ee(a),Se(a,p)}}}break;case"textarea":Je(e,n);break;case"select":t=n.value,t!=null&&Ne(e,!!n.multiple,t,!1)}},He=Ua,M=rn;var bd={usingClientEntryPoint:!1,Events:[Xn,hn,Ni,ve,qe,Ua]},li={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vd={bundleType:li.bundleType,version:li.version,rendererPackageName:li.rendererPackageName,rendererConfig:li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=At(e),e===null?null:e.stateNode},findFiberByHostInstance:li.findFiberByHostInstance||gd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xs.isDisabled&&xs.supportsFiber)try{pi=xs.inject(vd),dr=xs}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bd,reactDom_production_min.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ya(t))throw Error(o(200));return xd(e,t,null,n)},reactDom_production_min.createRoot=function(e,t){if(!Ya(e))throw Error(o(299));var n=!1,a="",p=_c;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Ga(e,1,!1,null,null,n,!1,a,p),e[gr]=t.current,Hn(e.nodeType===8?e.parentNode:e),new Ka(t)},reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=At(t),e=e===null?null:e.stateNode,e},reactDom_production_min.flushSync=function(e){return rn(e)},reactDom_production_min.hydrate=function(e,t,n){if(!fs(t))throw Error(o(200));return hs(null,e,t,!0,n)},reactDom_production_min.hydrateRoot=function(e,t,n){if(!Ya(e))throw Error(o(405));var a=n!=null&&n.hydratedSources||null,p=!1,v="",I=_c;if(n!=null&&(n.unstable_strictMode===!0&&(p=!0),n.identifierPrefix!==void 0&&(v=n.identifierPrefix),n.onRecoverableError!==void 0&&(I=n.onRecoverableError)),t=jc(t,null,e,1,n??null,p,!1,v,I),e[gr]=t.current,Hn(e),a)for(e=0;e<a.length;e++)n=a[e],p=n._getVersion,p=p(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,p]:t.mutableSourceEagerHydrationData.push(n,p);return new ps(t)},reactDom_production_min.render=function(e,t,n){if(!fs(t))throw Error(o(200));return hs(null,e,t,!1,n)},reactDom_production_min.unmountComponentAtNode=function(e){if(!fs(e))throw Error(o(40));return e._reactRootContainer?(rn(function(){hs(null,null,e,!1,function(){e._reactRootContainer=null,e[gr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Ua,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!fs(n))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return hs(e,t,n,!1,a)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var r=requireReactDom();return client.createRoot=r.createRoot,client.hydrateRoot=r.hydrateRoot,client}var clientExports=requireClient();const scriptRel="modulepreload",assetsURL=function(r){return"/"+r},seen={},__vitePreload=function(s,o,i){let l=Promise.resolve();if(o&&o.length>0){let d=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),y=c?.nonce||c?.getAttribute("nonce");l=d(o.map(u=>{if(u=assetsURL(u),u in seen)return;seen[u]=!0;const x=u.endsWith(".css"),g=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${g}`))return;const h=document.createElement("link");if(h.rel=x?"stylesheet":scriptRel,x||(h.as="script"),h.crossOrigin="",h.href=u,y&&h.setAttribute("nonce",y),document.head.appendChild(h),x)return new Promise((m,E)=>{h.addEventListener("load",m),h.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function f(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return l.then(d=>{for(const c of d||[])c.status==="rejected"&&f(c.reason);return s().catch(f)})};var reactExports=requireReact();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,o,i)=>i?i.toUpperCase():o.toLowerCase()),toPascalCase=r=>{const s=toCamelCase(r);return s.charAt(0).toUpperCase()+s.slice(1)},mergeClasses=(...r)=>r.filter((s,o,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===o).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:f,iconNode:d,...c},y)=>reactExports.createElement("svg",{ref:y,...defaultAttributes,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:mergeClasses("lucide",l),...c},[...d.map(([u,x])=>reactExports.createElement(u,x)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(r,s)=>{const o=reactExports.forwardRef(({className:i,...l},f)=>reactExports.createElement(Icon,{ref:f,iconNode:s,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(r))}`,`lucide-${r}`,i),...l}));return o.displayName=toPascalCase(r),o};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]],Album=createLucideIcon("album",__iconNode$L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$G);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Cloud=createLucideIcon("cloud",__iconNode$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("download",__iconNode$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Grid3x3=createLucideIcon("grid-3x3",__iconNode$A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Hammer=createLucideIcon("hammer",__iconNode$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],HardDrive=createLucideIcon("hard-drive",__iconNode$x);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("heart",__iconNode$w);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image=createLucideIcon("image",__iconNode$u);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$t);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ListMusic=createLucideIcon("list-music",__iconNode$s);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Music=createLucideIcon("music",__iconNode$p);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]],Orbit=createLucideIcon("orbit",__iconNode$o);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pause=createLucideIcon("pause",__iconNode$n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$m);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$l);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Search=createLucideIcon("search",__iconNode$j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$i);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$h);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Shuffle=createLucideIcon("shuffle",__iconNode$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],SkipBack=createLucideIcon("skip-back",__iconNode$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],SlidersVertical=createLucideIcon("sliders-vertical",__iconNode$c);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$a);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserMinus=createLucideIcon("user-minus",__iconNode$5);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Users=createLucideIcon("users",__iconNode$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],VolumeX=createLucideIcon("volume-x",__iconNode$2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:r}){const[s,o]=reactExports.useState(()=>{const d=localStorage.getItem("brick-theme");return d||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=s==="dark",l=i?{bg:{primary:"#1a1a1a",secondary:"#252525",tertiary:"#2a2a2a"},text:{primary:"#e0e0e0",secondary:"#a0a0a0",tertiary:"#666666"},accent:"#d32f2f",border:"#333333"}:{bg:{primary:"#ffffff",secondary:"#f8f8f8",tertiary:"#e8e8e8"},text:{primary:"#1a1a1a",secondary:"#666666",tertiary:"#999999"},accent:"#d32f2f",border:"#cccccc"};reactExports.useEffect(()=>{localStorage.setItem("brick-theme",s),document.documentElement.setAttribute("data-theme",s)},[s]);const f=()=>{o(d=>d==="dark"?"light":"dark")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:s,toggleTheme:f,isDark:i,colors:l},children:r})}function useTheme$1(){const r=reactExports.useContext(ThemeContext);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r}const PinkTierStorageKey="pink_tier_unlocked",ThemeEnabledStorageKey="pink_theme_enabled",PinkUnlockTimestampStorageKey="pink_unlock_ts",stateClassnames={SECURE:"wall-secure",SHAKING:"wall-shaking",COLLAPSED:"wall-collapsed",REBUILDING:"wall-rebuilding",CRACKED:"wall-cracked"},WallContext=reactExports.createContext(void 0),WallProvider=({children:r})=>{const[s,o]=reactExports.useState("SECURE"),[i,l]=reactExports.useState(!1),[f,d]=reactExports.useState(null),[c,y]=reactExports.useState(!0),u=reactExports.useRef([]),x=reactExports.useRef(!1),g=reactExports.useCallback(()=>{u.current.forEach(C=>window.clearTimeout(C)),u.current=[]},[]);reactExports.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.getItem(PinkTierStorageKey)==="true"&&(l(!0),o("CRACKED")),localStorage.getItem(ThemeEnabledStorageKey)==="false"&&y(!1)}catch(C){console.warn("Unable to read wall theme flags:",C)}},[]);const h=reactExports.useCallback(C=>{y(C);try{localStorage.setItem(ThemeEnabledStorageKey,C?"true":"false")}catch(B){console.warn("Unable to persist wall theme preference:",B)}},[]);reactExports.useEffect(()=>{if(typeof document>"u")return;const C=document.body,B=Object.values(stateClassnames);C.classList.remove(...B),C.classList.add(stateClassnames[s]);const L=c&&(i||s==="CRACKED");C.classList.toggle("theme-cracked",L)},[s,i,c]);const m=reactExports.useCallback(()=>{i||(g(),x.current=!1,o("SECURE"))},[g,i]),E=reactExports.useCallback(()=>{i||x.current||o(C=>C==="SECURE"?"SHAKING":C)},[i]),w=reactExports.useCallback(()=>{i||x.current||o(C=>C==="SHAKING"?"SECURE":C)},[i]),S=reactExports.useCallback(()=>{g(),x.current=!1,o("CRACKED"),l(!0);const C=Date.now();d(C),h(!0);try{localStorage.setItem(PinkTierStorageKey,"true"),localStorage.setItem(PinkUnlockTimestampStorageKey,String(C))}catch(B){console.warn("Unable to persist pink tier unlock flag:",B)}},[g,h]),j=reactExports.useCallback(()=>{if(i||x.current)return;x.current=!0,g(),o("COLLAPSED");const C=window.setTimeout(()=>{o("REBUILDING")},5e3),B=window.setTimeout(()=>{S()},8e3);u.current=[C,B]},[g,S,i]);reactExports.useEffect(()=>()=>g(),[g]);const T=reactExports.useMemo(()=>({wallState:s,pinkTierUnlocked:i,pinkUnlockTimestamp:f,themeEnabled:c,setThemeEnabled:h,startWarning:E,cancelWarning:w,triggerCollapse:j,resetToSecure:m}),[s,i,f,c,h,E,w,j,m]);return jsxRuntimeExports.jsx(WallContext.Provider,{value:T,children:r})},useWall=()=>{const r=reactExports.useContext(WallContext);if(!r)throw new Error("useWall must be used within a WallProvider");return r};function HeroCarousel({artists:r,onArtistPress:s}){const[o,i]=reactExports.useState(0),[l,f]=reactExports.useState(0),[d,c]=reactExports.useState(0),y=g=>{f(g.touches[0].clientX)},u=g=>{c(g.touches[0].clientX)},x=()=>{l-d>75&&i(g=>(g+1)%r.length),l-d<-75&&i(g=>(g-1+r.length)%r.length)};return r[o],jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden",style:{height:"40vh",minHeight:"320px",maxHeight:"450px"},onTouchStart:y,onTouchMove:u,onTouchEnd:x,children:[jsxRuntimeExports.jsx("div",{className:"flex h-full transition-transform duration-500 ease-out",style:{transform:`translateX(-${o*100}%)`},children:r.map(g=>jsxRuntimeExports.jsxs("div",{className:"w-full flex-shrink-0 relative cursor-pointer",onClick:()=>s(g.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-transform duration-700",style:{transform:`scale(${o===r.indexOf(g)?1:1.1})`},children:jsxRuntimeExports.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover",style:{filter:"grayscale(20%) brightness(0.5)"}})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 70%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",border:"1px solid #d32f2f",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx(Crown,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"CHOSEN ARTIST"})]})}),jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:g.name}),jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#cccccc",fontSize:"1rem"},children:g.genre}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#d32f2f",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6), 0 0 40px rgba(211, 47, 47, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#ffffff"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ffffff",fontSize:"0.8rem",fontWeight:600,letterSpacing:"0.05em"},children:"80% REVENUE SHARE ACTIVE"})]})}),jsxRuntimeExports.jsx("p",{className:"mono mt-3",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"TAP TO PLAY ESSENTIALS  HOLD TO VIEW PROFILE"})]})]},g.id))}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center gap-2",children:r.map((g,h)=>jsxRuntimeExports.jsx("button",{onClick:()=>i(h),className:"transition-all duration-200",style:{width:o===h?"24px":"8px",height:"8px",borderRadius:"4px",backgroundColor:o===h?"#e0e0e0":"rgba(224, 224, 224, 0.3)"}},h))})]})}function NetworkStories({connections:r,onStoryClick:s}){return jsxRuntimeExports.jsxs("div",{className:"px-6 py-4",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:r.map(o=>jsxRuntimeExports.jsxs("button",{onClick:()=>s(o.id),className:"flex flex-col items-center gap-2 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #546e7a, #d32f2f)",padding:"3px"},children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full",style:{backgroundColor:"#1a1a1a"}})}),jsxRuntimeExports.jsx("img",{src:o.user.avatar,alt:o.user.name,className:"relative w-16 h-16 rounded-full object-cover",style:{border:"3px solid #1a1a1a"}}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 rounded-full border-2",style:{backgroundColor:"#d32f2f",borderColor:"#1a1a1a"}})]}),jsxRuntimeExports.jsx("span",{className:"text-center max-w-[70px] truncate",style:{color:"#cccccc",fontSize:"0.75rem"},children:o.user.name.split(" ")[0]})]},o.id))}),jsxRuntimeExports.jsx("style",{children:`
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `})]})}const ERROR_IMG_SRC="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ImageWithFallback(r){const[s,o]=reactExports.useState(!1),i=()=>{o(!0)},{src:l,alt:f,style:d,className:c,...y}=r;return s?jsxRuntimeExports.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${c??""}`,style:d,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-full",children:jsxRuntimeExports.jsx("img",{src:ERROR_IMG_SRC,alt:"Error loading image",...y,"data-original-url":l})})}):jsxRuntimeExports.jsx("img",{src:l,alt:f,className:c,style:d,...y,onError:i})}function BrickCard({playlist:r,isLocked:s=!1,onClick:o,onDelete:i,onCancelDelete:l,onConfirmDelete:f,size:d="medium",compact:c=!1,canDelete:y=!1,timeUntilDeletion:u}){const x={small:"w-full",medium:"w-full",large:"w-full col-span-2"},g=r.deletionQueuedAt!==void 0;return jsxRuntimeExports.jsxs("div",{onClick:o,className:`${x[d]} bg-[#252525] rounded-lg overflow-hidden cursor-pointer transition-all duration-200 hover:bg-[#2a2a2a] group relative`,style:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative w-full aspect-square",children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:r.customCoverImage||r.coverImage,alt:r.name,className:`w-full h-full object-cover ${s?"blur-xl":""}`}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 60%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute top-3 left-3 right-3 flex justify-between items-start",children:[r.hiRes&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#c6a700] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#c6a700",fontSize:"0.7rem"},children:"Hi-Res"})}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),!r.isPublic&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#a0a0a0] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Draft"})})]}),s&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{size:48,color:"#a0a0a0",strokeWidth:1.5})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-3 left-3",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem"},children:[r.trackCount," tracks"]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mb-1 truncate",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:r.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[r.creator&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:r.creator.avatar,alt:r.creator.name,className:"w-4 h-4 rounded-full"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:r.creator.name})]}),!r.creator&&jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"Your Collection"})]}),r.structuralIntegrity!==void 0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem"},children:"Structural Integrity"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:r.structuralIntegrity>=70?"#4caf50":"#d32f2f",fontSize:"0.7rem"},children:[r.structuralIntegrity,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-[#1a1a1a] rounded-full h-1",children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${r.structuralIntegrity}%`,background:r.structuralIntegrity>=70?"linear-gradient(to right, #4caf50, #8bc34a)":"linear-gradient(to right, #d32f2f, #b71c1c)"}})})]}),g&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:[jsxRuntimeExports.jsx("p",{className:"mono text-center text-sm mb-2",style:{color:"#d32f2f",fontSize:"0.7rem"},children:u}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:h=>{h.stopPropagation(),l?.(r.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #a0a0a0",color:"#a0a0a0"},children:"Cancel"}),y&&jsxRuntimeExports.jsx("button",{onClick:h=>{h.stopPropagation(),f?.(r.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#d32f2f",color:"#e0e0e0"},children:"Delete Now"})]})]}),!g&&i&&jsxRuntimeExports.jsxs("button",{onClick:h=>{h.stopPropagation(),i(r.id)},className:"w-full mt-3 py-2 px-3 rounded flex items-center justify-center gap-2 transition-all hover:bg-red-900/20",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f",color:"#d32f2f"},children:[jsxRuntimeExports.jsx(Trash2,{size:14}),jsxRuntimeExports.jsx("span",{className:"mono text-xs",children:"Delete Brick"})]})]})]})}const DB_NAME$3="BrickMusicDB",STORE_NAME$2="localTracks",DB_VERSION$1=4,openDB=()=>new Promise((r,s)=>{const o=indexedDB.open(DB_NAME$3,DB_VERSION$1);o.onerror=()=>{console.error("Failed to open LocalMusicUploader DB:",o.error),s(o.error)},o.onsuccess=()=>{console.log("Successfully opened LocalMusicUploader DB"),r(o.result)},o.onupgradeneeded=i=>{console.log("Upgrading LocalMusicUploader DB to version",DB_VERSION$1);const l=i.target.result;l.objectStoreNames.contains(STORE_NAME$2)||(console.log("Creating localTracks object store"),l.createObjectStore(STORE_NAME$2,{keyPath:"id"})),l.objectStoreNames.contains("playlists")||(console.log("Creating playlists object store"),l.createObjectStore("playlists",{keyPath:"id"})),l.objectStoreNames.contains("recentlyPlayedPlaylists")||(console.log("Creating recentlyPlayedPlaylists object store"),l.createObjectStore("recentlyPlayedPlaylists",{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1})),l.objectStoreNames.contains("recentlyPlayedTracks")||(console.log("Creating recentlyPlayedTracks object store"),l.createObjectStore("recentlyPlayedTracks",{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1}))}}),saveTrackToDB=async r=>{try{console.log("Saving track to DB:",r.id,r.name);const l=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).put(r);return new Promise((f,d)=>{l.onsuccess=()=>{console.log("Successfully saved track to IndexedDB:",r.id),f()},l.onerror=()=>{console.error("Error saving track to IndexedDB:",l.error),d(l.error)}})}catch(s){throw console.error("Error saving track:",s),s}},getAllTracksFromDB=async()=>{const r=await openDB();return new Promise((s,o)=>{const f=r.transaction([STORE_NAME$2],"readonly").objectStore(STORE_NAME$2).getAll();f.onsuccess=()=>s(f.result),f.onerror=()=>o(f.error)})},deleteTrackFromDB=async r=>{const s=await openDB();return new Promise((o,i)=>{const d=s.transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).delete(r);d.onsuccess=()=>o(),d.onerror=()=>i(d.error)})};function LocalMusicUploader({onPlayTrack:r,onPlayAlbum:s,currentPlayingId:o,isPlaying:i}){const[l,f]=reactExports.useState([]),[d,c]=reactExports.useState(!1),[y,u]=reactExports.useState(!0),[x,g]=reactExports.useState("tracks"),h=reactExports.useRef(null);reactExports.useEffect(()=>{const T=document.createElement("script");return T.src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js",T.async=!0,document.body.appendChild(T),()=>{document.body.removeChild(T)}},[]),reactExports.useEffect(()=>((async()=>{try{console.log("Starting to load tracks from IndexedDB..."),localStorage.getItem("brick_local_tracks")&&(console.log("Migrating from localStorage to IndexedDB..."),localStorage.removeItem("brick_local_tracks"));const C=await getAllTracksFromDB();console.log("Retrieved tracks from IndexedDB:",C.length);const B=C.map(L=>{try{console.log("Processing track:",L.id,L.name);const _=URL.createObjectURL(L.file);return console.log("Successfully created blob URL for track:",L.id),{...L,url:_}}catch(_){return console.error("Failed to process track:",L.id,_),null}}).filter(Boolean);console.log("Successfully loaded tracks:",B.length),f(B)}catch(C){console.error("Error loading local tracks from IndexedDB:",C)}finally{u(!1)}})(),()=>{l.forEach(C=>{C.url.startsWith("blob:")&&URL.revokeObjectURL(C.url)})}),[]);const m=async T=>{const C=T.target.files;if(!C)return;console.log("Processing",C.length,"files...");const B=[];for(let L=0;L<C.length;L++){const _=C[L],R=_.name.split(".").pop()?.toUpperCase()||"UNKNOWN",P=URL.createObjectURL(_);console.log("Processing file:",_.name,"size:",_.size);const le=await new Promise(V=>{typeof window.jsmediatags<"u"?window.jsmediatags.read(_,{onSuccess:se=>V(se),onError:()=>V(null)}):V(null)}),W=new Audio(P);await new Promise(V=>{W.addEventListener("loadedmetadata",()=>{const se=le?.tags||{};let Q;if(se.picture){const{data:ge,format:we}=se.picture;let Pe="";for(let q=0;q<ge.length;q++)Pe+=String.fromCharCode(ge[q]);Q=`data:${we};base64,${btoa(Pe)}`}const J=`local-${Date.now()}-${L}`;console.log("Created track with ID:",J),B.push({id:J,name:se.title||_.name.replace(/\.(flac|wav|mp3)$/i,""),artist:se.artist||"Unknown Artist",album:se.album||"Unknown Album",albumArtist:se.album_artist,year:se.year,trackNumber:se.track?parseInt(se.track):void 0,discNumber:se.disc?parseInt(se.disc):void 0,genre:se.genre,file:_,url:P,duration:W.duration,format:R,size:_.size,coverArt:Q}),V(null)})})}console.log("Adding",B.length,"new tracks to state"),f([...l,...B]),c(!0),h.current&&(h.current.value=""),console.log("Saving tracks to database...");for(const L of B)try{await saveTrackToDB(L)}catch(_){console.error("Failed to save track:",L.id,_)}console.log("Finished saving tracks to database")},E=async T=>{console.log("Deleting track:",T);const C=l.find(B=>B.id===T);C&&C.url.startsWith("blob:")&&URL.revokeObjectURL(C.url),f(l.filter(B=>B.id!==T));try{await deleteTrackFromDB(T),console.log("Successfully deleted track:",T)}catch(B){console.error("Error deleting track from IndexedDB:",B)}},w=T=>{const C=Math.floor(T/60),B=Math.floor(T%60);return`${C}:${B.toString().padStart(2,"0")}`},S=l.reduce((T,C)=>{const B=`${C.album}:::${C.albumArtist||C.artist}`;return T[B]||(T[B]=[]),T[B].push(C),T},{});Object.keys(S).forEach(T=>{S[T].sort((C,B)=>C.discNumber!==B.discNumber?(C.discNumber||0)-(B.discNumber||0):(C.trackNumber||0)-(B.trackNumber||0))});const j=Object.entries(S).map(([T,C])=>{const[B,L]=T.split(":::");return{name:B,artist:L,tracks:C,coverArt:C.find(_=>_.coverArt)?.coverArt,year:C.find(_=>_.year)?.year,totalDuration:C.reduce((_,R)=>_+R.duration,0)}});return jsxRuntimeExports.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer",onClick:()=>c(!d),style:{borderBottom:d?"1px solid #333333":"none"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.95rem"},children:"Local Vault"}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[l.length," ",l.length===1?"track":"tracks","  Private only"]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:T=>{T.stopPropagation(),h.current?.click()},className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:[jsxRuntimeExports.jsx(Upload,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.8rem"},children:"Import"})]}),jsxRuntimeExports.jsx("input",{ref:h,type:"file",accept:".flac,.wav,.mp3,audio/flac,audio/wav,audio/mpeg",multiple:!0,onChange:m,className:"hidden"})]}),d&&jsxRuntimeExports.jsxs("div",{className:"p-4",children:[y?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.85rem"},children:"Loading tracks..."})]}):l.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.85rem"},children:"No local tracks imported yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:"Import FLAC, WAV, or MP3 files to play privately"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("tracks"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:x==="tracks"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="tracks"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(ListMusic,{size:14,color:x==="tracks"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:x==="tracks"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Tracks"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>g("albums"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:x==="albums"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="albums"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Album,{size:14,color:x==="albums"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:x==="albums"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Albums"})]})]}),x==="tracks"?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.map(T=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center gap-4 p-3 rounded-lg transition-all duration-200",style:{backgroundColor:o===T.id?"rgba(211, 47, 47, 0.1)":"#252525",border:`1px solid ${o===T.id?"#d32f2f":"#333333"}`},children:[T.coverArt?jsxRuntimeExports.jsx("img",{src:T.coverArt,alt:T.album,className:"flex-shrink-0 w-12 h-12 rounded object-cover"}):jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded flex items-center justify-center",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:20,color:"#666666"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem"},children:T.name}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[T.artist,"  ",T.album]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{backgroundColor:"#1a1a1a",color:"#d32f2f",fontSize:"0.65rem"},children:T.format}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:w(T.duration)})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>r(T),className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:o===T.id?"#d32f2f":"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:o===T.id&&i?jsxRuntimeExports.jsx(Pause,{size:16,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:16,color:o===T.id?"#ffffff":"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>E(T.id),className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#d32f2f"})})]},T.id))}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:j.map((T,C)=>jsxRuntimeExports.jsxs("div",{className:"group rounded-lg overflow-hidden transition-all duration-200 hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"relative aspect-square",children:[T.coverArt?jsxRuntimeExports.jsx("img",{src:T.coverArt,alt:T.name,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx(Album,{size:48,color:"#666666"})}),jsxRuntimeExports.jsx("button",{onClick:()=>s?.(T.tracks),className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:24,color:"#ffffff"})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem"},children:T.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:T.artist}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.year&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:T.year}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:[T.tracks.length," tracks"]})]})]})]},C))})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.05)",border:"1px solid rgba(211, 47, 47, 0.2)"},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:" Local files are stored in your browser and only playable on this device. They cannot be shared or accessed by others."})})]})]})}const mockCurrentUser={name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400",connectionsUsed:12,connectionsMax:20,tier:"Mason"},mockArtists=[{id:"artist-1",name:"Pink Floyd",image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800",globalChosenUsers:234567,genre:"Progressive Rock"},{id:"artist-2",name:"David Bowie",image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",globalChosenUsers:198432,genre:"Art Rock"},{id:"artist-3",name:"Luna Chen",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",globalChosenUsers:15203,genre:"Jazz Fusion"},{id:"artist-4",name:"Broken Compass",image:"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400",globalChosenUsers:6892,genre:"Post-Rock"}],mockTracks=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"},{id:"track-4",title:"Cement Horizon",artist:"Broken Compass",album:"The Wall",duration:"6:12",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"}],mockPlaylists=[{id:"playlist-1",name:"Foundation Mix",coverImage:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",trackCount:24,isPublic:!0,hiRes:!0,creator:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},structuralIntegrity:85,tracks:[mockTracks[0],mockTracks[1],mockTracks[2],mockTracks[3]]},{id:"playlist-2",name:"Industrial Lounge",coverImage:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",trackCount:18,isPublic:!0,hiRes:!0,creator:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},structuralIntegrity:92,tracks:[mockTracks[1],mockTracks[2],mockTracks[3],mockTracks[0]]},{id:"playlist-3",name:"Night Builds",coverImage:"https://images.unsplash.com/photo-1690013429722-87852aae164b?w=400",trackCount:32,isPublic:!0,hiRes:!1,creator:{id:"user-1",name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400"},structuralIntegrity:78,tracks:[mockTracks[2],mockTracks[3],mockTracks[0],mockTracks[1]]},{id:"playlist-4",name:"Concrete Soul",coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",trackCount:15,isPublic:!0,hiRes:!0,creator:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},structuralIntegrity:88,tracks:[mockTracks[3],mockTracks[0],mockTracks[1],mockTracks[2]]},{id:"playlist-5",name:"Mortar Sessions",coverImage:"https://images.unsplash.com/photo-1620456029959-f27e9935cbb9?w=400",trackCount:21,isPublic:!0,hiRes:!0,creator:{id:"user-5",name:"Casey Wu",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"},structuralIntegrity:95,tracks:[mockTracks[0],mockTracks[2],mockTracks[1],mockTracks[3]]}],mockConnections$1=[{id:"conn-1",user:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},matchScore:88,mutualArtists:["Nora Vex","Luna Chen","Broken Compass"],connectedDate:"2025-10-15"},{id:"conn-2",user:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},matchScore:82,mutualArtists:["The Midnight Architects","Luna Chen"],connectedDate:"2025-11-02"},{id:"conn-3",user:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},matchScore:76,mutualArtists:["Nora Vex","Broken Compass"],connectedDate:"2025-11-10"}],mockFeedEvents=[{id:"event-1",type:"playlist_created",timestamp:"2025-11-22T14:30:00Z",data:{user:mockConnections$1[0].user,playlist:mockPlaylists[0]}},{id:"event-2",type:"connection_formed",timestamp:"2025-11-21T09:15:00Z",data:{userA:mockConnections$1[1].user,userB:{id:"user-6",name:"Riley Martinez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"},matchScore:84}},{id:"event-3",type:"patronage_update",timestamp:"2025-11-20T18:45:00Z",data:{user:mockConnections$1[0].user,artist:mockArtists[0]}},{id:"event-4",type:"playlist_created",timestamp:"2025-11-19T11:20:00Z",data:{user:mockConnections$1[2].user,playlist:mockPlaylists[3]}}],DB_NAME$2="BrickMusicDB",STORE_NAME$1="recentlyPlayedTracks";async function openRecentlyPlayedDB(){return console.log("Opening recently played tracks DB, version 4"),new Promise((r,s)=>{const o=indexedDB.open(DB_NAME$2,4);o.onerror=()=>{console.error("Failed to open recently played tracks DB:",o.error),s(o.error)},o.onsuccess=()=>{console.log("Successfully opened recently played tracks DB"),r(o.result)},o.onupgradeneeded=i=>{console.log("Upgrading recently played tracks DB");const l=i.target.result;l.objectStoreNames.contains(STORE_NAME$1)||(console.log("Creating recentlyPlayedTracks object store"),l.createObjectStore(STORE_NAME$1,{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1}))}})}async function addRecentlyPlayedTrack(r){console.log("addRecentlyPlayedTrack called with:",r);const i=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readwrite").objectStore(STORE_NAME$1);return new Promise((l,f)=>{const d=i.put({...r,playedAt:Date.now()});d.onsuccess=()=>{console.log("Successfully added track to recently played:",r.trackTitle),l()},d.onerror=()=>{console.error("Failed to add track to recently played:",d.error),f(d.error)}})}async function getRecentlyPlayedTracks(r=10){console.log("getRecentlyPlayedTracks called with limit:",r);const l=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readonly").objectStore(STORE_NAME$1).index("playedAt");return new Promise((f,d)=>{const c=l.getAll();c.onsuccess=()=>{const y=c.result;console.log("Retrieved tracks from DB:",y);const u=y.sort((x,g)=>g.playedAt-x.playedAt).slice(0,r);if(console.log("Sorted and limited tracks:",u),u.length===0){console.log("No recently played tracks found, adding test data...");const x=[{trackId:"test-track-1",trackTitle:"Test Track 1",artistName:"Test Artist",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",playedAt:Date.now()-1e3},{trackId:"test-track-2",trackTitle:"Test Track 2",artistName:"Another Artist",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",playedAt:Date.now()-2e3}];f(x),x.forEach(g=>addRecentlyPlayedTrack(g).catch(console.error))}else f(u)},c.onerror=()=>{console.error("Failed to get recently played tracks:",c.error),d(c.error)}})}const DB_NAME$1="BrickMusicDB",STORE_NAME="recentlyPlayedPlaylists";async function openRecentlyPlayedPlaylistsDB(){return console.log("Opening recently played playlists DB, version 4"),new Promise((r,s)=>{const o=indexedDB.open(DB_NAME$1,4);o.onerror=()=>{console.error("Failed to open recently played playlists DB:",o.error),s(o.error)},o.onsuccess=()=>{console.log("Successfully opened recently played playlists DB"),r(o.result)},o.onupgradeneeded=i=>{console.log("Upgrading recently played playlists DB");const l=i.target.result;l.objectStoreNames.contains(STORE_NAME)||(console.log("Creating recentlyPlayedPlaylists object store"),l.createObjectStore(STORE_NAME,{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1}))}})}async function addRecentlyPlayedPlaylist(r){const i=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME);return new Promise((l,f)=>{const d=i.put({...r,playedAt:Date.now()});d.onsuccess=()=>l(),d.onerror=()=>f(d.error)})}async function getRecentlyPlayedPlaylists(r=10){const l=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).index("playedAt");return new Promise((f,d)=>{const c=l.getAll();c.onsuccess=()=>{const u=c.result.sort((x,g)=>(g.playedAt||0)-(x.playedAt||0)).slice(0,r);f(u)},c.onerror=()=>d(c.error)})}function HomeScreenV2({onPlaylistClick:r,onArtistPress:s,onFeedClick:o,activeFilter:i,onFilterChange:l,onLocalTrackPlay:f,onLocalAlbumPlay:d}){const[c,y]=reactExports.useState("all"),[u,x]=reactExports.useState(null),[g,h]=reactExports.useState(null),[m,E]=reactExports.useState(!1),[w,S]=reactExports.useState("brick"),[j,T]=reactExports.useState([]),[C,B]=reactExports.useState([]),[L,_]=reactExports.useState(!0),R=i!==void 0?i:c;reactExports.useEffect(()=>{console.log("HomeScreenV2 useEffect triggered - loading recent items");let J=!0;return(async()=>{try{console.log("Starting sequential loading of recent items..."),_(!0),console.log("Loading recently played playlists...");const we=await getRecentlyPlayedPlaylists(3);if(console.log("Successfully loaded playlists:",we),!J){console.log("Component unmounted during playlist loading, aborting");return}console.log("Loading recently played tracks...");const Pe=await getRecentlyPlayedTracks(3);if(console.log("Successfully loaded tracks:",Pe),!J){console.log("Component unmounted during track loading, aborting");return}console.log("Setting recent items state"),T(we),B(Pe),console.log("Recent items state updated successfully")}catch(we){console.error("Failed to load recent items:",we),J&&(T([]),B([]))}finally{J&&(_(!1),console.log("Loading recent items completed"))}})(),()=>{console.log("HomeScreenV2 useEffect cleanup - component unmounting"),J=!1}},[]);const P=mockArtists.slice(0,2),le=mockPlaylists.slice(0,5),W=J=>{if(u&&(u.pause(),u.currentTime=0),g?.id===J.id){m?(u?.pause(),E(!1)):(u?.play(),E(!0));return}const ge=new Audio(J.url);ge.addEventListener("ended",()=>{E(!1)}),ge.play(),x(ge),h(J),E(!0),f&&f(J)},V=J=>J?J>=85?"large":J>=70?"medium":"small":"medium",se=J=>{const ge=[...J].sort((we,Pe)=>(Pe.structuralIntegrity||0)-(we.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:"#151515",border:"1px solid #333333"},children:[[150,300,450].map((we,Pe)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${we}px`,height:`${we}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},Pe)),ge[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>r(ge[0].id),children:[jsxRuntimeExports.jsx("img",{src:ge[0].coverImage,alt:ge[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:ge[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[ge[0].structuralIntegrity,"% Integrity"]})]})]}),ge.slice(1).map((we,Pe)=>{const q=we.structuralIntegrity||50,me=q>=85?100:q>=70?80:60,A=ge.length-1,D=Pe/A*Math.PI*2,G=q>=85?150:q>=70?220:290,ae=50+Math.cos(D)*(G/8),ne=50+Math.sin(D)*(G/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${ae}%`,top:`${ne}%`,transform:"translate(-50%, -50%)"},onClick:()=>r(we.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${me}px`,height:`${me}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:we.coverImage,alt:we.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${me}px`,height:`${me}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:we.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[q,"% Integrity"]})]})]},we.id)})]})},Q=()=>{if(R==="feed")return null;if(R==="all")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:P,onArtistPress:s}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8",children:jsxRuntimeExports.jsx(LocalMusicUploader,{onPlayTrack:W,onPlayAlbum:d,currentPlayingId:g?.id,isPlaying:m})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Materials"}),L?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Loading recent materials..."})}):jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[j.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>r(J.playlistId),className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:J.coverImage,alt:J.playlistName,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:J.playlistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[typeof J.creatorName=="string"?J.creatorName:"Your Collection","  ",J.trackCount," tracks"]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`playlist-${J.playlistId}`)),C.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>{f&&f({id:J.trackId,name:J.trackTitle,artist:J.artistName,coverArt:J.coverArt,url:J.audioUrl,duration:"0:00",format:"MP3"})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:J.coverArt,alt:J.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:J.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:J.artistName})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${J.trackId}`)),j.length===0&&C.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recent materials yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})]})]});if(R==="payroll")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:P,onArtistPress:s}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8 pb-24",children:jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{backgroundColor:"rgba(30, 30, 30, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-2",style:{color:"#e0e0e0"},children:"Your Monthly Support"}),jsxRuntimeExports.jsxs("p",{className:"mono mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:["You're directly supporting ",P.length," artists this month"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-8",children:P.map(J=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"1.5rem"},children:"$8.00"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:J.name})]},J.id))})]})})]});if(R==="network")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NetworkStories,{connections:mockConnections$1,onStoryClick:J=>console.log("Story clicked:",J)}),jsxRuntimeExports.jsxs("div",{className:"px-6 pt-4 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"From Your Connections"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>S("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:w==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${w==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:w==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>S("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:w==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${w==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:w==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),w==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:le.sort((J,ge)=>(ge.structuralIntegrity||0)-(J.structuralIntegrity||0)).map(J=>{const ge=V(J.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:ge==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:J,onClick:()=>r(J.id),size:"small"})},J.id)})}):se(le)]})]});if(R==="recent")return jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Recently Played"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>S("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:w==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${w==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:w==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>S("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:w==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${w==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:w==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),C.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Tracks"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:C.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>{f&&f({id:J.trackId,name:J.trackTitle,artist:J.artistName,coverArt:J.coverArt,url:J.audioUrl,duration:"0:00",format:"MP3"})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:J.coverArt,alt:J.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:J.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:J.artistName})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${J.trackId}`))})]}),j.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Playlists"}),w==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:j.sort((J,ge)=>(ge.structuralIntegrity||0)-(J.structuralIntegrity||0)).map(J=>{const ge={id:J.playlistId,name:J.playlistName,coverImage:J.coverImage,creator:J.creatorName,trackCount:J.trackCount,structuralIntegrity:J.structuralIntegrity||50},we=V(J.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:we==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:ge,onClick:()=>r(J.playlistId),size:"small"})},J.playlistId)})}):se(j.map(J=>({id:J.playlistId,name:J.playlistName,coverImage:J.coverImage,structuralIntegrity:J.structuralIntegrity||50})))]}),j.length===0&&C.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recently played items yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})};return jsxRuntimeExports.jsx("div",{className:`min-h-screen ${R==="network"||R==="recent"||R==="feed"?"pt-6 md:pt-16":""}`,children:Q()})}const mockConnections=[{user:{id:"user1",name:"Alina R.",avatar:"https://placehold.co/40x40/4f46e5/ffffff?text=AR"},matchScore:85,x:25,y:75},{user:{id:"user2",name:"Ben C.",avatar:"https://placehold.co/40x40/10b981/ffffff?text=BC"},matchScore:72,x:70,y:20},{user:{id:"user3",name:"Cathy L.",avatar:"https://placehold.co/40x40/f97316/ffffff?text=CL"},matchScore:91,x:45,y:55},{user:{id:"user4",name:"David M.",avatar:"https://placehold.co/40x40/ef4444/ffffff?text=DM"},matchScore:65,x:10,y:30}],useTheme=()=>({colors:{bg:{primary:"#1a1a1a",secondary:"#252525"},text:{primary:"#e0e0e0",secondary:"#a0aaae"},border:"#333333",accent:"#d32f2f"}}),IA_METADATA_BASE_URL="https://archive.org/metadata",IA_SEARCH_BASE_URL="https://archive.org/advancedsearch.php",IA_COVER_IMAGE_BASE_URL="https://archive.org/services/img",formatDuration=r=>{if(!r)return"N/A";const s=parseFloat(r);if(isNaN(s))return r;const o=Math.floor(s/60),i=Math.floor(s%60);return`${o}:${i.toString().padStart(2,"0")}`},fetchWithRetry=async(r,s=3)=>{for(let o=0;o<s;o++)try{const i=await fetch(r);if(!i.ok)throw i.status===404||i.status===403?new Error(`Item not found or forbidden (Status: ${i.status})`):new Error(`HTTP error! status: ${i.status}`);const l=i.headers.get("content-type");return l&&l.indexOf("application/json")!==-1?i.json():i.text()}catch(i){if(o<s-1){const l=2**o*1e3;await new Promise(f=>setTimeout(f,l))}else throw i}};function RadarScreen({onUserClick:r,onTrackClick:s}){const{colors:o}=useTheme(),[i,l]=reactExports.useState(null),[f,d]=reactExports.useState(""),[c,y]=reactExports.useState("all"),[u,x]=reactExports.useState("users"),[g,h]=reactExports.useState({artists:[],tracks:[]}),[m,E]=reactExports.useState(!1),[w,S]=reactExports.useState(null);reactExports.useEffect(()=>{h({artists:[],tracks:[]}),S(null),y("all")},[u]);const j=[...mockConnections].sort((_,R)=>R.matchScore-_.matchScore),C=j.map((_,R)=>{const P=40-_.matchScore/100*35,le=R/j.length*Math.PI*2;return{..._,x:50+Math.cos(le)*P,y:50+Math.sin(le)*P}}).filter(_=>_.user.name.toLowerCase().includes(f.toLowerCase())),B=reactExports.useCallback(async _=>{if(S(null),u==="music"&&_.length>2){E(!0),h({artists:[],tracks:[]});try{const P=`${_.replace(/[()]/g,"").trim()} AND mediatype:(audio OR etree)`,le=`${IA_SEARCH_BASE_URL}?q=${encodeURIComponent(P)}&sort[]=downloads+desc&fl[]=identifier&output=json&rows=15`,W=await fetchWithRetry(le),se=(typeof W=="string"?JSON.parse(W):W).response?.docs?.map(q=>q.identifier).filter(Boolean)||[];if(se.length===0){S("No matching items found on Internet Archive."),E(!1);return}const Q=[],J=new Map,ge=se.map(async q=>{try{const me=`${IA_METADATA_BASE_URL}/${q}`,A=await fetchWithRetry(me),D=Array.isArray(A.metadata.creator)?A.metadata.creator[0]:A.metadata.creator||"Unknown Artist",G=`${IA_COVER_IMAGE_BASE_URL}/${q}`,ae=Array.isArray(A.metadata.title)?A.metadata.title[0]:A.metadata.title;J.has(D)||J.set(D,{id:`artist-${q}`,name:D,genre:A.metadata.mediatype||"Audio",globalChosenUsers:Math.floor(Math.random()*1e3)+100,image:G}),A.files&&A.files.filter(ne=>ne.source==="original"&&ne.format&&ne.format.includes("MP3")).forEach(ne=>{const fe=ne.title||ne.name.replace(/\.(mp3|flac|ogg)$/i,"").replace(/_/g," "),xe=formatDuration(ne.length),ke=ne.bitrate?`${ne.bitrate} kbps`:"N/A",te=`https://archive.org/download/${q}/${ne.name}`,ie=ne.artist||ne.creator||D;Q.push({id:`${q}-${ne.name}`,title:fe,artist:ie,album:ae,coverArt:G,duration:xe,bitrate:ke,downloadUrl:te})})}catch(me){console.warn(`Failed to fetch metadata for item ${q}:`,me)}});await Promise.allSettled(ge);const we=Array.from(new Map(Q.map(q=>[q.id,q])).values()),Pe=Array.from(J.values());h({artists:Pe,tracks:we})}catch(R){console.error("Internet Archive search failed:",R),S("A critical error occurred while searching the Archive.")}finally{E(!1)}}else h({artists:[],tracks:[]})},[u]),L=reactExports.useCallback(_=>{d(_),window.searchTimer&&clearTimeout(window.searchTimer),window.searchTimer=setTimeout(()=>{B(_)},500)},[B]);return jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6 md:pt-16 min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{letterSpacing:"-0.02em",color:o.text.primary},children:"The Radar"}),jsxRuntimeExports.jsx("p",{style:{color:o.text.secondary,fontSize:"0.95rem"},children:"Discover users with compatible taste."})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 focus-within:ring-2 focus-within:ring-[#d32f2f] focus-within:ring-opacity-30",style:{backgroundColor:o.bg.secondary,border:`1px solid ${o.border}`},children:[jsxRuntimeExports.jsx(Search,{size:20,color:o.text.secondary}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:u==="users"?"Search for Materials (Architects, Genres, Bricks)...":"Search the Archive for songs, artists, albums...",value:f,onChange:_=>L(_.target.value),className:"flex-1 bg-transparent outline-none",style:{color:o.text.primary,fontSize:"0.95rem"}})]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>x("users"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:u==="users"?o.accent:o.bg.secondary,color:u==="users"?"#ffffff":o.text.secondary,border:"1px solid",borderColor:u==="users"?o.accent:o.border,boxShadow:u==="users"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Users,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:u==="users"?600:400},children:"USERS"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>x("music"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:u==="music"?o.accent:o.bg.secondary,color:u==="music"?"#ffffff":o.text.secondary,border:"1px solid",borderColor:u==="music"?o.accent:o.border,boxShadow:u==="music"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Music,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:u==="music"?600:400},children:"MUSIC"})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto",children:u==="users"?[{id:"all",label:"All"},{id:"architects",label:"Architects Only"},{id:"local",label:"Local"},{id:"global",label:"Global"}].map(_=>jsxRuntimeExports.jsx("button",{onClick:()=>y(_.id),className:"px-4 py-2.5 rounded-xl whitespace-nowrap transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:c===_.id?o.accent:o.bg.secondary,color:c===_.id?"#ffffff":o.text.secondary,border:"1px solid",borderColor:c===_.id?o.accent:o.border,boxShadow:c===_.id?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:c===_.id?600:400},children:_.label})},_.id)):[{id:"all",label:"All"},{id:"tracks",label:"Tracks"},{id:"artists",label:"Artists"}].map(_=>jsxRuntimeExports.jsx("button",{onClick:()=>y(_.id),className:"px-4 py-2.5 rounded-xl whitespace-nowrap transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:c===_.id?o.accent:o.bg.secondary,color:c===_.id?"#ffffff":o.text.secondary,border:"1px solid",borderColor:c===_.id?o.accent:o.border,boxShadow:c===_.id?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:c===_.id?600:400},children:_.label})},_.id))}),u==="users"&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:o.text.secondary,fontSize:"0.8rem",letterSpacing:"0.05em"},children:[C.length," COMPATIBLE USERS FOUND"]})}),u==="music"&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:m?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-[#d32f2f] border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"SEARCHING INTERNET ARCHIVE..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[w&&jsxRuntimeExports.jsx("div",{className:"p-3 mb-4 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("p",{className:"mono text-sm",style:{color:"#d32f2f"},children:["Error: ",w]})}),g.artists.length>0&&(c==="all"||c==="artists")&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[g.artists.length," ARTISTS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:g.artists.map(_=>jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg transition-all hover:bg-[#333333]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:_.image,alt:_.name,className:"w-10 h-10 rounded object-cover",onError:R=>{R.currentTarget.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:_.name}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[_.genre,"  ",_.globalChosenUsers," users"]})]})]})},_.id))})]}),g.tracks.length>0&&(c==="all"||c==="tracks")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[g.tracks.length," TRACKS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:g.tracks.map(_=>jsxRuntimeExports.jsx("div",{onClick:()=>s&&s(_,g.tracks),className:"block p-3 rounded-lg transition-all hover:bg-[#333333] cursor-pointer active:scale-[0.99]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:_.coverArt,alt:_.album,className:"w-10 h-10 rounded object-cover flex-shrink-0",onError:R=>{R.currentTarget.src="https://placehold.co/40x40/252525/ffffff?text=IA"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:_.title||"Unknown Title"}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[_.artist,"  ",_.album,"  ",_.bitrate]})]}),jsxRuntimeExports.jsx("span",{className:"mono text-xs flex-shrink-0",style:{color:"#546e7a"},children:_.duration})]})},_.id))})]}),g.artists.length===0&&g.tracks.length===0&&f.length>2&&!w&&jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"NO RESULTS FOUND"})]})}),u==="users"&&jsxRuntimeExports.jsx("div",{className:"relative rounded-lg mb-6 overflow-hidden",style:{backgroundColor:o.bg.primary,height:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",border:`1px solid ${o.border}`},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative",style:{width:"100%",height:"100%"},children:[[100,200,300].map((_,R)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${_}px`,height:`${_}px`,border:"1px solid rgba(84, 110, 122, 0.2)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},R)),jsxRuntimeExports.jsx("div",{className:"absolute w-4 h-4 rounded-full",style:{backgroundColor:"#d32f2f",left:"50%",top:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6)"}}),C.map((_,R)=>jsxRuntimeExports.jsxs("div",{onClick:()=>r(_.user.id),className:"absolute cursor-pointer group",style:{left:`${_.x}%`,top:`${_.y}%`,transform:"translate(-50%, -50%)"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full animate-ping",style:{backgroundColor:"rgba(84, 110, 122, 0.4)",width:"32px",height:"32px",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:_.user.avatar,alt:_.user.name,className:"relative w-8 h-8 rounded-full border-2 group-hover:scale-125 transition-transform",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:_.user.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[_.matchScore,"% Match"]})]})]},R))]})})}),u==="users"&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:o.bg.secondary,border:`1px solid ${o.border}`},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:o.text.secondary,fontSize:"0.75rem"},children:"Tap a dot to view Structural Integrity. Closer dots = Higher compatibility."})})]})}function VaultScreen({onOpenConnectionManagement:r,onSignOut:s}){const o="Mason",i=[{name:"Sketcher",price:"Free",priceValue:0,icon:Layers,color:"#546e7a",features:["10 Bond Slots","320kbps Audio Quality","2 Artist Patronage Slots","Basic Blueprint Creation"],isCurrent:o==="Sketcher"},{name:"Mason",price:"$4.99/mo",priceValue:4.99,icon:Hammer,color:"#d32f2f",features:["25 Bond Slots","Hi-Res Audio (FLAC)","2 Artist Patronage Slots","Advanced Analytics","Priority Support"],isCurrent:o==="Mason"},{name:"Architect",price:"$9.99/mo",priceValue:9.99,icon:Crown,color:"#c6a700",features:["50 Bond Slots","Hi-Res Audio (24-bit)","3 Artist Patronage Slots","Advanced Analytics","Priority Artist Payouts","Early Access to New Artists","Exclusive Content"],isCurrent:o==="Architect"}];return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-6 md:pt-16",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",children:"Account Blueprints"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Configure your foundation settings."})]}),jsxRuntimeExports.jsxs("section",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Membership Tiers"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:i.map(l=>{const f=l.icon;return jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl relative overflow-hidden transition-all duration-200",style:{backgroundColor:l.isCurrent?"rgba(37, 37, 37, 0.8)":"rgba(37, 37, 37, 0.4)",border:l.isCurrent?`2px solid ${l.color}`:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:l.isCurrent?`0 8px 24px ${l.color}33`:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[l.isCurrent&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full",style:{backgroundColor:`${l.color}20`,border:`1px solid ${l.color}`},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:l.color,fontSize:"0.65rem"},children:"CURRENT"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${l.color}20`,border:`1px solid ${l.color}`},children:jsxRuntimeExports.jsx(f,{size:24,color:l.color})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:l.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:l.color,fontSize:"1.125rem"},children:l.price})]})]}),jsxRuntimeExports.jsx("ul",{className:"mb-6 space-y-2",children:l.features.map((d,c)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0",style:{backgroundColor:l.color}}),jsxRuntimeExports.jsx("span",{style:{color:"#cccccc",fontSize:"0.875rem"},children:d})]},c))}),!l.isCurrent&&jsxRuntimeExports.jsx("button",{className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:l.name==="Sketcher"?"transparent":`linear-gradient(to bottom, ${l.color}, ${l.color}dd)`,color:l.name==="Sketcher"?l.color:"#1a1a1a",border:l.name==="Sketcher"?`1px solid ${l.color}`:"none",boxShadow:l.name==="Sketcher"?"none":`0 4px 16px ${l.color}40`,fontWeight:600},children:l.name==="Sketcher"?"Downgrade":`Upgrade to ${l.name}`})]},l.name)})})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Audio Quality"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{size:20,color:"#e0e0e0"}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Force Hi-Res on Cellular"})]}),jsxRuntimeExports.jsx("div",{className:"relative w-12 h-6 rounded-full cursor-pointer transition-colors",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full transition-all",style:{backgroundColor:"#e0e0e0"}})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"QUALITY SELECTOR"}),[{label:"Gravel",value:"128kbps",active:!1},{label:"Stone",value:"320kbps",active:!1},{label:"Marble",value:"FLAC",active:!0}].map(l=>jsxRuntimeExports.jsx("button",{className:"w-full p-3 rounded-lg text-left transition-all",style:{backgroundColor:l.active?"#333333":"transparent",border:"1px solid",borderColor:l.active?"#d32f2f":"#333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{style:{color:"#e0e0e0"},children:l.label}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:l.value})]})},l.value))]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Data Ownership"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You own your listening history. Download it as .CSV at any time."}),jsxRuntimeExports.jsxs("button",{className:"w-full py-3 rounded-full flex items-center justify-center gap-2 transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export My Data"]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Account"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Privacy Settings"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:r,children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Bond Management"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:s,children:jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f"},children:"Sign Out"})})]})]})]})}const wallHeader="_wallHeader_1vcia_33",wallTitle="_wallTitle_1vcia_51",pinkWallTitle="_pinkWallTitle_1vcia_69",toggleStack="_toggleStack_1vcia_87",toggleShell="_toggleShell_1vcia_101",toggleLabel="_toggleLabel_1vcia_113",toggleControl="_toggleControl_1vcia_129",toggleControlActive="_toggleControlActive_1vcia_157",toggleThumb="_toggleThumb_1vcia_169",toggleThumbActive="_toggleThumbActive_1vcia_187",toggleHint="_toggleHint_1vcia_199",pinkBadgeText="_pinkBadgeText_1vcia_213",navPinkButton="_navPinkButton_1vcia_223",navPinkLabel="_navPinkLabel_1vcia_237",pinkStyles={wallHeader,wallTitle,pinkWallTitle,toggleStack,toggleShell,toggleLabel,toggleControl,toggleControlActive,toggleThumb,toggleThumbActive,toggleHint,pinkBadgeText,navPinkButton,navPinkLabel};function ProfileScreen({onPlaylistClick:r,onCreatePlaylist:s,currentUser:o,isPinkMode:i=!1,onPinkToggle:l,pinkTierUnlocked:f=!1}){const{colors:d}=useTheme$1(),c=mockPlaylists,[y,u]=reactExports.useState("brick"),[x,g]=reactExports.useState("online"),[h,m]=reactExports.useState([]),[E,w]=reactExports.useState(0);reactExports.useEffect(()=>{const ne=x==="online"?c:[];if(ne.length>0){const fe=ne.reduce((ke,te)=>ke+(te.structuralIntegrity||0),0),xe=Math.round(fe/ne.length);w(xe),o&&xe!==o.diversityScore&&__vitePreload(async()=>{const{updateUser:ke}=await Promise.resolve().then(()=>auth);return{updateUser:ke}},void 0).then(({updateUser:ke})=>{ke({...o,diversityScore:xe}).catch(console.error)})}else w(0)},[c,x,o]),reactExports.useEffect(()=>{S();const ne=()=>{g("local"),S()};return window.addEventListener("switchToLocalWall",ne),()=>{window.removeEventListener("switchToLocalWall",ne)}},[]);const S=async()=>{try{const xe=(await j()).transaction(["playlists"],"readonly").objectStore("playlists"),ke=await new Promise((te,ie)=>{const be=xe.getAll();be.onsuccess=()=>te(be.result),be.onerror=()=>ie(be.error)});m(ke),console.log("Loaded playlists from IndexedDB:",ke)}catch(ne){console.error("Failed to load playlists:",ne),m([])}},j=()=>new Promise((ne,fe)=>{const xe=indexedDB.open("BrickMusicDB",4);xe.onerror=()=>fe(xe.error),xe.onsuccess=()=>ne(xe.result),xe.onupgradeneeded=ke=>{const te=ke.target.result;te.objectStoreNames.contains("localTracks")||te.createObjectStore("localTracks",{keyPath:"id"}),te.objectStoreNames.contains("playlists")||te.createObjectStore("playlists",{keyPath:"id"}),te.objectStoreNames.contains("recentlyPlayedPlaylists")||te.createObjectStore("recentlyPlayedPlaylists",{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1}),te.objectStoreNames.contains("recentlyPlayedTracks")||te.createObjectStore("recentlyPlayedTracks",{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1})}}),T=ne=>ne?ne>=85?"large":ne>=70?"medium":"small":"medium",C=24,B=ne=>{if(!ne.deletionQueuedAt)return!0;const fe=Date.now(),xe=ne.deletionScheduledFor||0;return fe>=xe},L=ne=>{if(!ne.deletionScheduledFor)return"";const fe=Date.now(),xe=ne.deletionScheduledFor-fe;if(xe<=0)return"Ready to delete";const ke=Math.floor(xe/(1e3*60*60)),te=Math.floor(xe%(1e3*60*60)/(1e3*60));return ke>0?`Delete in ${ke}h ${te}m`:`Delete in ${te}m`},_=async ne=>{try{const ke=(await j()).transaction(["playlists"],"readwrite").objectStore("playlists"),te=ke.get(ne);te.onsuccess=()=>{const ie=te.result;if(ie){const be=Date.now();ie.deletionQueuedAt=be,ie.deletionScheduledFor=be+C*60*60*1e3;const Ie=ke.put(ie);Ie.onsuccess=()=>{S()}}}}catch(fe){console.error("Failed to queue playlist deletion:",fe)}},R=async ne=>{try{const ke=(await j()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise(te=>{const ie=ke.delete(ne);ie.onsuccess=()=>te()}),S()}catch(fe){console.error("Failed to delete playlist:",fe)}},P=async ne=>{try{const ke=(await j()).transaction(["playlists"],"readwrite").objectStore("playlists"),te=ke.get(ne);te.onsuccess=()=>{const ie=te.result;if(ie){ie.deletionQueuedAt=void 0,ie.deletionScheduledFor=void 0;const be=ke.put(ie);be.onsuccess=()=>{S()}}}}catch(fe){console.error("Failed to cancel deletion:",fe)}},le=ne=>{const fe=[...ne].sort((xe,ke)=>(ke.structuralIntegrity||0)-(xe.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:d.bg.primary,border:`1px solid ${d.border}`},children:[[150,300,450].map((xe,ke)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${xe}px`,height:`${xe}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},ke)),fe[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>r(fe[0].id),children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:fe[0].coverImage,alt:fe[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:fe[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[fe[0].structuralIntegrity,"% Integrity"]})]})]}),fe.slice(1).map((xe,ke)=>{const te=xe.structuralIntegrity||50,ie=te>=85?100:te>=70?80:60,be=fe.length-1,Ie=ke/be*Math.PI*2,ee=te>=85?150:te>=70?220:290,F=50+Math.cos(Ie)*(ee/8),H=50+Math.sin(Ie)*(ee/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${F}%`,top:`${H}%`,transform:"translate(-50%, -50%)"},onClick:()=>r(xe.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${ie}px`,height:`${ie}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx(ImageWithFallback,{src:xe.coverImage,alt:xe.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${ie}px`,height:`${ie}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:xe.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[te,"% Integrity"]})]})]},xe.id)})]})},W=o||mockCurrentUser,[V,se]=reactExports.useState(!1),[Q,J]=reactExports.useState(!1),[ge,we]=reactExports.useState(null),[Pe,q]=reactExports.useState(W.bio||""),me=reactExports.useRef(null),A=ne=>{const fe=ne.target.files?.[0];fe&&fe.type.startsWith("image/")&&we(fe)},D=async()=>{if(!(!o||!ge))try{const ne=new FileReader;ne.onloadend=async()=>{const fe=ne.result,{updateUser:xe}=await __vitePreload(async()=>{const{updateUser:ke}=await Promise.resolve().then(()=>auth);return{updateUser:ke}},void 0);await xe({...o,avatar:fe}),window.location.reload()},ne.readAsDataURL(ge)}catch(ne){console.error("Failed to update avatar:",ne)}},G=async()=>{if(o)try{const{updateUser:ne}=await __vitePreload(async()=>{const{updateUser:fe}=await Promise.resolve().then(()=>auth);return{updateUser:fe}},void 0);await ne({...o,bio:Pe}),window.location.reload()}catch(ne){console.error("Failed to update bio:",ne)}},ae=()=>{!f||!l||l(!i)};return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-10",children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.wallHeader,children:[jsxRuntimeExports.jsx("h1",{className:`${pinkStyles.wallTitle} ${i?pinkStyles.pinkWallTitle:""}`,children:"MY WALL"}),f&&jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleStack,children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleShell,children:[jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleLabel,children:"THE WALL THEME"}),jsxRuntimeExports.jsx("button",{type:"button","aria-pressed":i,onClick:ae,className:`${pinkStyles.toggleControl} ${i?pinkStyles.toggleControlActive:""}`,children:jsxRuntimeExports.jsx("span",{className:`${pinkStyles.toggleThumb} ${i?pinkStyles.toggleThumbActive:""}`})})]}),jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleHint,children:i?"Pink Tier engaged":"Industrial base coat"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative inline-block",children:jsxRuntimeExports.jsx("img",{src:W.avatar,alt:W.name,onClick:()=>o&&se(!V),className:"w-24 h-24 rounded-full mx-auto mb-4 cursor-pointer hover:opacity-80 transition-opacity",style:{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.4)"}})}),V&&o&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:A,className:"hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>me.current?.click(),className:"px-4 py-2 rounded",style:{backgroundColor:d.bg.secondary,border:`1px solid ${d.border}`,color:d.text.primary},children:ge?ge.name:"Choose Image"}),ge&&jsxRuntimeExports.jsx("button",{onClick:D,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:d.text.primary},children:"Upload & Save"})]}),jsxRuntimeExports.jsx("h2",{className:"mb-1",style:{color:d.text.primary},children:W.name}),jsxRuntimeExports.jsxs("p",{style:{color:d.text.secondary},children:[W.tier," Tier"]}),jsxRuntimeExports.jsx("div",{className:"mt-4 max-w-md mx-auto",children:Q&&o?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:Pe,onChange:ne=>q(ne.target.value),placeholder:"Tell us about yourself...",className:"px-3 py-2 rounded resize-none",rows:3,style:{backgroundColor:d.bg.secondary,border:`1px solid ${d.border}`,color:d.text.primary}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:G,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:d.text.primary},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 rounded",style:{backgroundColor:d.bg.tertiary,color:d.text.secondary},children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm italic",style:{color:d.text.secondary},children:W.bio||"No bio yet"}),o&&jsxRuntimeExports.jsx("button",{onClick:()=>{q(W.bio||""),J(!0)},className:"text-xs px-2 py-1 rounded",style:{backgroundColor:d.bg.secondary,color:d.text.secondary},children:"Edit"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"80",height:"80",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"#1a1a1a",strokeWidth:"8",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"url(#diversity-gradient)",strokeWidth:"8",fill:"none",strokeDasharray:`${E/100*220} 220`,strokeLinecap:"round"}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"diversity-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#4caf50"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#546e7a"})]})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:d.text.primary,fontSize:"1.5rem"},children:E})})]}),jsxRuntimeExports.jsx("h4",{style:{color:d.text.primary},children:"Authenticity"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:d.text.secondary,fontSize:"0.75rem"},children:"Diversity Score"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:d.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${d.border}`},children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:W.connectionsUsed}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"1.2rem"},children:["/",W.connectionsMax]})]}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Connections"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-1 mt-2",children:Array.from({length:W.connectionsMax}).map((ne,fe)=>jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:fe<W.connectionsUsed?"#546e7a":"#1a1a1a"}},fe))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h3",{style:{color:d.text.primary},children:"The Wall"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("online"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:x==="online"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="online"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Music,{size:14,color:x==="online"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:x==="online"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:"Online"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>g("local"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:x==="local"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="local"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:x==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:x==="local"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:["Local (",h.length,")"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>s&&s(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},title:"Create Playlist",children:jsxRuntimeExports.jsx(Plus,{size:18,color:"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>u("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:y==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>u("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:y==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${y==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:y==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),x==="local"&&h.length===0?jsxRuntimeExports.jsxs("div",{className:"p-12 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:[jsxRuntimeExports.jsx(HardDrive,{size:48,color:"#666666",className:"mx-auto mb-4"}),jsxRuntimeExports.jsx("h4",{style:{color:"#a0a0a0",marginBottom:"8px"},children:"No Local Blueprints Yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:'Create your first playlist from the "+" button'})]}):y==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:(x==="online"?c:h).sort((ne,fe)=>(fe.structuralIntegrity||0)-(ne.structuralIntegrity||0)).map(ne=>{const fe=T(ne.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:fe==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:ne,onClick:()=>r(ne.id),size:"small",onDelete:x==="local"?_:void 0,onCancelDelete:x==="local"?P:void 0,onConfirmDelete:x==="local"?R:void 0,canDelete:B(ne),timeUntilDeletion:L(ne)})},ne.id)})}):le(x==="online"?c:h)]})]})}function FeedScreen({currentUser:r}){const{colors:s}=useTheme$1(),[o,i]=reactExports.useState(""),[l,f]=reactExports.useState([]),d=()=>{if(!o.trim())return;const u={id:Date.now().toString(),content:o,user:{name:r?.name||"You",avatar:r?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100"},timestamp:new Date().toISOString(),likes:0};f([u,...l]),i("")},c=u=>{const x=new Date(u),h=new Date().getTime()-x.getTime(),m=Math.floor(h/(1e3*60*60));return m<1?"Just now":m<24?`${m}h ago`:`${Math.floor(m/24)}d ago`},y=[...mockFeedEvents,{id:"feed-7",type:"listening_milestone",timestamp:new Date(Date.now()-1e3*60*60*5).toISOString(),data:{user:mockConnections$1[0].user,hours:100}},{id:"feed-8",type:"new_favorite",timestamp:new Date(Date.now()-1e3*60*60*8).toISOString(),data:{user:mockConnections$1[1].user,track:{title:"Architectural Daydreams",artist:mockArtists[2].name,coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400"},playCount:42}},{id:"feed-9",type:"playlist_created",timestamp:new Date(Date.now()-1e3*60*60*12).toISOString(),data:{user:mockConnections$1[2].user,playlist:{name:"Midnight Foundations",trackCount:28,coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}}},{id:"feed-10",type:"connection_formed",timestamp:new Date(Date.now()-1e3*60*60*18).toISOString(),data:{userA:mockConnections$1[0].user,userB:mockConnections$1[1].user,matchScore:87}}];return jsxRuntimeExports.jsx("div",{className:"pb-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 pt-6",children:[jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg mb-6",style:{backgroundColor:s.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${s.border}`},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:r?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100",alt:`${r?.name||"Your"} avatar`,className:"w-10 h-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("textarea",{value:o,onChange:u=>i(u.target.value),placeholder:"Share your thoughts on The Neighbourhood...",className:"w-full bg-[#1a1a1a] text-[#e0e0e0] rounded-lg p-3 resize-none focus:outline-none focus:ring-2 focus:ring-[#d32f2f] placeholder-[#555555]",rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i(""),className:"px-4 py-2 rounded-lg transition-colors hover:opacity-80",style:{color:s.text.secondary,backgroundColor:s.bg.primary},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:d,disabled:!o.trim(),className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.trim()?s.accent:s.text.tertiary,color:"#e0e0e0",fontWeight:600},children:[jsxRuntimeExports.jsx(Send,{size:16}),"Post"]})]})]})]})}),l.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:l.map(u=>{const x=new Date,g=new Date(u.timestamp),h=x.getTime()-g.getTime(),m=Math.floor(h/(1e3*60*60)),E=m<1?"Just now":m<24?`${m}h ago`:`${Math.floor(m/24)}d ago`;return jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:u.user.avatar,alt:u.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("p",{style:{color:s.text.primary},className:"font-semibold",children:u.user.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:s.text.tertiary,fontSize:"0.7rem"},children:E})]}),jsxRuntimeExports.jsx("p",{style:{color:s.text.primary},className:"mb-3 leading-relaxed",children:u.content}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const w=l.map(S=>S.id===u.id?{...S,likes:S.likes+1}:S);f(w)},className:"flex items-center gap-2 px-3 py-1 rounded-lg transition-colors hover:bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:u.likes>0?"#d32f2f":"none",color:u.likes>0?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:u.likes>0?u.likes:"Like"})]})]})]})},u.id)})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:y.map(u=>u.type==="playlist_created"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:u.data.user.avatar,alt:u.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:u.data.user.name})," created a new brick"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:c(u.timestamp)})]}),jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-3",style:{color:"#e0e0e0"},children:u.data.playlist.name}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((x,g)=>jsxRuntimeExports.jsx("img",{src:u.data.playlist.coverImage,alt:"",className:"w-full aspect-square object-cover rounded"},g))}),jsxRuntimeExports.jsxs("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[u.data.playlist.trackCount," tracks"]})]})]},u.id):u.type==="connection_formed"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("img",{src:u.data.userA.avatar,alt:u.data.userA.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"}),jsxRuntimeExports.jsx("img",{src:u.data.userB.avatar,alt:u.data.userB.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:u.data.userA.name})," connected with"," ",jsxRuntimeExports.jsx("strong",{children:u.data.userB.name})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:c(u.timestamp)})]}),jsxRuntimeExports.jsx(Users,{size:20,color:"#546e7a"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg text-center",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.5rem"},children:[u.data.matchScore,"%"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"STRUCTURAL INTEGRITY"})]})]},u.id):u.type==="patronage_update"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:u.data.user.avatar,alt:u.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:u.data.user.name})," chose a new artist for November"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:c(u.timestamp)})]}),jsxRuntimeExports.jsx(Crown,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:u.data.artist.image,alt:u.data.artist.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:u.data.artist.name}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:u.data.artist.genre})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen Ad-Free via ",u.data.user.name]})})]},u.id):u.type==="listening_milestone"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:u.data.user.avatar,alt:u.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:u.data.user.name})," reached ",u.data.hours," hours of listening"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:c(u.timestamp)})]}),jsxRuntimeExports.jsx(TrendingUp,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:u.data.user.avatar,alt:u.data.user.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:u.data.user.name}),jsxRuntimeExports.jsxs("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[u.data.hours," hours of listening"]})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Celebrate with ",u.data.user.name]})})]},u.id):u.type==="new_favorite"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:u.data.user.avatar,alt:u.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:u.data.user.name})," added a new favorite track"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:c(u.timestamp)})]}),jsxRuntimeExports.jsx(Heart,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:u.data.track.coverArt,alt:u.data.track.title,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:u.data.track.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:u.data.track.artist})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen to ",u.data.track.title]})})]},u.id):null)}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx("button",{className:"px-6 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#a0a0a0"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:"Load More"})})})]})})}function PlaylistCreationScreen({onClose:r,onPublish:s}){const[o,i]=reactExports.useState(""),[l,f]=reactExports.useState([]),[d,c]=reactExports.useState(0),[y,u]=reactExports.useState([]),[x,g]=reactExports.useState("platform"),[h,m]=reactExports.useState(""),[E,w]=reactExports.useState(!0),[S,j]=reactExports.useState(null),[T,C]=reactExports.useState(null),B=reactExports.useRef(null),[L,_]=reactExports.useState(25),[R,P]=reactExports.useState(1);reactExports.useEffect(()=>{le()},[]);const le=async()=>{try{const H=(await W()).transaction(["localTracks"],"readonly").objectStore("localTracks"),he=(await new Promise((Se,Re)=>{const K=H.getAll();K.onsuccess=()=>Se(K.result),K.onerror=()=>Re(K.error)})).map(Se=>{try{const Re=URL.createObjectURL(Se.file);return{...Se,url:Re}}catch(Re){return console.error("Failed to create URL for track:",Se.id,Re),null}}).filter(Boolean);u(he),w(!1)}catch(ee){console.error("Failed to load local tracks:",ee),w(!1)}},W=()=>new Promise((ee,F)=>{const H=indexedDB.open("BrickMusicDB",4);H.onerror=()=>F(H.error),H.onsuccess=()=>ee(H.result),H.onupgradeneeded=oe=>{const he=oe.target.result;he.objectStoreNames.contains("localTracks")||he.createObjectStore("localTracks",{keyPath:"id"}),he.objectStoreNames.contains("playlists")||he.createObjectStore("playlists",{keyPath:"id"}),he.objectStoreNames.contains("recentlyPlayedPlaylists")||he.createObjectStore("recentlyPlayedPlaylists",{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1}),he.objectStoreNames.contains("recentlyPlayedTracks")||he.createObjectStore("recentlyPlayedTracks",{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1})}}),V=ee=>{const F=Math.floor(ee/60),H=Math.floor(ee%60);return`${F}:${H.toString().padStart(2,"0")}`},se={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],shoegaze:["shoegaze","dream pop","ambient","post-rock","noise rock","ethereal","atmospheric"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},Q=ee=>{if(!ee)return"unknown";const F=ee.toLowerCase().trim();for(const[H,oe]of Object.entries(se))for(const he of oe)if(F.includes(he)||he.includes(F))return he;return F},J=ee=>{if(ee.length===0)return 0;if(ee.length===1)return 100;const F=ee.map(De=>Q(De.genre)),H=F.filter(De=>De==="unknown").length;if(H===ee.length)return 50;const oe=H/ee.length*20,he=F.map(De=>{const Je=[];return Object.entries(se).forEach(([Ye,rt])=>{rt.includes(De)&&Je.push(Ye)}),{genre:De,groups:Je}}),Se=F.filter(De=>De!=="unknown"),Re=new Set(Se);if(Re.size===1&&H===0)return 100;if(Re.size===1&&H>0)return Math.max(50,100-oe);let K=0,ye=0;for(let De=0;De<he.length;De++)for(let Je=De+1;Je<he.length;Je++){if(F[De]==="unknown"||F[Je]==="unknown")continue;ye++;const Ye=he[De].groups,rt=he[Je].groups;Ye.some(b=>rt.includes(b))&&K++}if(ye===0)return 50;const Ne=K/ye;let Ee;return Ne>=.9?Ee=95:Ne>=.7?Ee=80:Ne>=.5?Ee=60:Ne>=.3?Ee=40:Ee=Math.round(Ne*100),Math.max(0,Math.round(Ee-oe))},ge=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",isPatronage:!1,genre:"shoegaze"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",isPatronage:!1,genre:"post-rock"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",isPatronage:!1,genre:"indie rock"},{id:"track-4",title:"Digital Breakdown",artist:"Marcus Flow",album:"Urban Chronicles",duration:"3:22",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",isPatronage:!1,genre:"hip hop"},{id:"track-5",title:"Steel Resonance",artist:"Iron Assembly",album:"Forge",duration:"5:45",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400",isPatronage:!1,genre:"metal"}],we=ee=>{const F=[...l,ee];f(F);const H=J(F);c(H)},Pe=ee=>{console.log("Adding local track:",ee),console.log("Local track genre:",ee.genre);const F={id:ee.id,title:ee.name,artist:ee.artist,album:ee.album,duration:V(ee.duration),quality:ee.format,coverArt:ee.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ee.url,isPatronage:!1,genre:ee.genre,bitDepth:ee.bitDepth,sampleRate:ee.sampleRate,bitrateKbps:ee.bitrateKbps,codecLabel:ee.codecLabel,file:ee.file};console.log("Converted track:",F),we(F)},q=ee=>{const F=l.filter(oe=>oe.id!==ee);f(F);const H=J(F);c(H)},me=(ee,F)=>{const H=l.findIndex(Re=>Re.id===ee),oe=l.findIndex(Re=>Re.id===F);if(H===-1||oe===-1||H===oe)return;const he=[...l],Se=he[H];he.splice(H,1),he.splice(oe,0,Se),f(he)},A=ee=>{j(ee)},D=ee=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move"},G=ee=>{S&&S!==ee&&me(S,ee),j(null)},ae=()=>{j(null)},ne=ee=>{const F=ee.target.files?.[0];if(F){const H=new FileReader;H.onload=oe=>{const he=oe.target?.result;C(he)},H.readAsDataURL(F)}},fe=()=>{B.current?.click()},xe=o.length>0&&l.length>0&&d>=50,ke=h.trim().toLowerCase(),te=ke.length>0,ie=ee=>!te||!ee?!1:ee.toLowerCase().includes(ke),be=te?ge.filter(ee=>ie(ee.title)||ie(ee.name)||ie(ee.artist)||ie(ee.album)||ie(ee.genre)):ge,Ie=te?y.filter(ee=>ie(ee.name)||ie(ee.artist)||ie(ee.album)||ie(ee.genre)||ie(ee.format)):y;return reactExports.useEffect(()=>{console.log("=== Fire Brick Debug ==="),console.log("Playlist Name:",o),console.log("Tracks Count:",l.length),console.log("Structural Integrity:",d),console.log("Can Publish:",xe),console.log("Track Genres:",l.map(ee=>({title:ee.title,genre:ee.genre}))),console.log("========================")},[o,l,d,xe]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto pb-24",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-[#333333]",style:{backgroundColor:"#252525",backdropFilter:"blur(20px)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:r,className:"p-2",children:jsxRuntimeExports.jsx(X,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Drawing New Blueprints"}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"mono mb-2 block",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"BRICK NAME"}),jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:ee=>i(ee.target.value),placeholder:"Enter playlist name...",className:"w-full px-4 py-3 rounded-lg outline-none",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0"}})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"mono mb-2 block",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"BRICK COVER IMAGE"}),jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg border-2 border-dashed cursor-pointer transition-all hover:border-[#d32f2f]",style:{backgroundColor:"#252525",borderColor:T?"#d32f2f":"#333333"},onClick:fe,children:T?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:T,alt:"Custom cover",className:"w-16 h-16 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Custom image selected"}),jsxRuntimeExports.jsx("p",{className:"mono text-xs",style:{color:"#a0a0a0"},children:"Click to change"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[jsxRuntimeExports.jsx(Image,{size:32,color:"#546e7a",className:"mb-2"}),jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Upload custom cover image"}),jsxRuntimeExports.jsx("p",{className:"mono text-xs",style:{color:"#a0a0a0"},children:"or drag and drop"})]})}),jsxRuntimeExports.jsx("input",{ref:B,type:"file",accept:"image/*",onChange:ne,style:{display:"none"}}),T&&jsxRuntimeExports.jsx("button",{onClick:()=>C(null),className:"mt-2 w-full py-2 rounded text-xs transition-all",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333",color:"#a0a0a0"},children:"Remove custom image"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h4",{className:"mb-3",children:["The Batch (",l.length," tracks)"]}),l.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No tracks added yet"})}):jsxRuntimeExports.jsx("div",{className:"rounded-lg overflow-hidden",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:l.map((ee,F)=>jsxRuntimeExports.jsxs("div",{draggable:!0,onDragStart:()=>A(ee.id),onDragOver:D,onDrop:()=>G(ee.id),onDragEnd:ae,className:`flex items-center gap-3 p-3 border-b border-[#333333] last:border-b-0 transition-colors ${S===ee.id?"opacity-50":""}`,style:{backgroundColor:S===ee.id?"rgba(211, 47, 47, 0.1)":F%2===0?"#252525":"#222222",cursor:"grab"},children:[jsxRuntimeExports.jsx(GripVertical,{size:16,color:"#a0a0a0",className:"cursor-grab flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:ee.title}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[ee.artist,"  ",ee.duration," ",ee.genre&&jsxRuntimeExports.jsxs("span",{style:{color:"#546e7a"},children:[" ",ee.genre]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>q(ee.id),className:"p-1 hover:bg-[#333333] rounded transition-colors flex-shrink-0",children:jsxRuntimeExports.jsx(X,{size:16,color:"#a0a0a0"})})]},ee.id))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h4",{children:"Available Tracks"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("platform"),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:x==="platform"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="platform"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Music,{size:14,color:x==="platform"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:x==="platform"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:"Platform"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>g("local"),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:x==="local"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${x==="local"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:x==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:x==="local"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:["Local (",y.length,")"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-4",style:{position:"relative"},children:[jsxRuntimeExports.jsx(Search,{size:16,color:"#546e7a",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"}}),jsxRuntimeExports.jsx("input",{type:"search",value:h,onChange:ee=>m(ee.target.value),placeholder:"Search by title, artist, or album...","aria-label":"Search tracks",className:"w-full py-2 px-4 rounded-lg outline-none",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",paddingLeft:"38px",paddingRight:"34px"}}),h&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>m(""),"aria-label":"Clear track search",style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#a0a0a0",cursor:"pointer"},children:jsxRuntimeExports.jsx(X,{size:14})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:L,onChange:ee=>{_(parseInt(ee.target.value,10)||25),P(1)},className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),x==="platform"?be.length===0?jsxRuntimeExports.jsx("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:te?"No tracks match your search.":"No platform tracks available right now."})}):(()=>{const ee=be.length,F=(R-1)*L,H=Math.min(F+L,ee);return be.slice(F,H)})().map(ee=>{const F=l.some(H=>H.id===ee.id);return jsxRuntimeExports.jsxs("button",{onClick:()=>!F&&we(ee),disabled:F,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all",style:{backgroundColor:F?"#1a1a1a":"#252525",border:"1px solid #333333",opacity:F?.5:1,cursor:F?"not-allowed":"pointer"},children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:ee.coverArt,alt:ee.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0"},children:ee.title||ee.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:ee.artist})]}),!F&&jsxRuntimeExports.jsx(Plus,{size:20,color:"#546e7a"})]},ee.id)}):E?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Loading local tracks..."})}):y.length===0?jsxRuntimeExports.jsxs("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:[jsxRuntimeExports.jsx(HardDrive,{size:32,color:"#666666",className:"mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",marginBottom:"8px"},children:"No local tracks available"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:"Upload tracks from the home screen to add them here"})]}):Ie.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No local tracks match your search."})}):(()=>{const ee=Ie.length,F=(R-1)*L,H=Math.min(F+L,ee);return Ie.slice(F,H)})().map(ee=>{const F=l.some(H=>H.id===ee.id);return jsxRuntimeExports.jsxs("button",{onClick:()=>!F&&Pe(ee),disabled:F,className:"w-full flex items-center gap-3 p-3 rounded-lg text-left transition-all",style:{backgroundColor:F?"#1a1a1a":"#252525",border:"1px solid #333333",opacity:F?.5:1,cursor:F?"not-allowed":"pointer"},children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:ee.coverArt,alt:ee.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#e0e0e0"},children:ee.name}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[ee.artist," ",ee.genre&&jsxRuntimeExports.jsxs("span",{style:{color:"#546e7a"},children:[" ",ee.genre]})]})]}),!F&&jsxRuntimeExports.jsx(Plus,{size:20,color:"#546e7a"})]},ee.id)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>P(ee=>Math.max(1,ee-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:R}),jsxRuntimeExports.jsx("button",{onClick:()=>P(ee=>ee+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Next"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg mb-6",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Structural Integrity"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:d>=50?"#4caf50":"#d32f2f",fontSize:"1.25rem"},children:[d,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-[#1a1a1a] rounded-full h-2 mb-3",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${d}%`,background:d>=50?"linear-gradient(to right, #4caf50, #8bc34a)":"linear-gradient(to right, #d32f2f, #b71c1c)"}})}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:d<50?"Genre clash detected. Mix compatible genres to strengthen this Brick.":"Genre uniformity maintained. This Brick has strong structural integrity."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(xe){const ee=l.map(F=>({id:F.id,title:F.title,artist:F.artist,album:F.album,duration:F.duration,quality:F.quality,coverArt:F.coverArt,audioUrl:F.audioUrl?.startsWith("blob:")?void 0:F.audioUrl,isPatronage:F.isPatronage,genre:F.genre}));console.log("Publishing cleaned tracks:",ee),console.log("Custom cover image:",T?"Present":"None"),T&&sessionStorage.setItem("playlistCustomCover",T),s(o,ee)}},disabled:!xe,className:"w-full py-4 rounded-full transition-all mb-6",style:{background:xe?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:xe?"#e0e0e0":"#666666",boxShadow:xe?"0 4px 12px rgba(211, 47, 47, 0.3)":"none",cursor:xe?"pointer":"not-allowed"},children:"Fire Brick (Publish)"})]})]})}function LoginScreen({onLogin:r,onSignup:s}){const[o,i]=reactExports.useState("initial"),[l,f]=reactExports.useState(""),[d,c]=reactExports.useState(""),[y,u]=reactExports.useState(""),[x,g]=reactExports.useState(""),[h,m]=reactExports.useState(!1),E=async()=>{if(!l||!d){g("Please fill in all fields");return}m(!0),g("");try{const{loginUser:T}=await __vitePreload(async()=>{const{loginUser:B}=await Promise.resolve().then(()=>auth);return{loginUser:B}},void 0),C=await T(l,d);r(C)}catch(T){g(T instanceof Error?T.message:"Login failed")}finally{m(!1)}},w=async()=>{if(!l||!d||!y){g("Please fill in all fields");return}if(d.length<6){g("Password must be at least 6 characters");return}m(!0),g("");try{const{registerUser:T}=await __vitePreload(async()=>{const{registerUser:B}=await Promise.resolve().then(()=>auth);return{registerUser:B}},void 0),C=await T(l,d,y);s()}catch(T){g(T instanceof Error?T.message:"Registration failed")}finally{m(!1)}},S=()=>{l&&i("login")},j=()=>{l&&i("register")};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%)"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`repeating-linear-gradient(
              0deg,
              transparent,
              transparent 2px,
              rgba(255, 255, 255, 0.03) 2px,
              rgba(255, 255, 255, 0.03) 4px
            )`,animation:"slow-shift 20s linear infinite"}})}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes slow-shift {
          from {
            transform: translateY(0);
          }
          to {
            transform: translateY(40px);
          }
        }
      `}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16 fade-in",children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"4rem",letterSpacing:"0.2em",color:"#e0e0e0",textTransform:"uppercase",fontWeight:900},children:"BRICK"}),jsxRuntimeExports.jsx("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.75rem",letterSpacing:"0.1em"},children:"BUILD ON SOLID GROUND"})]}),jsxRuntimeExports.jsxs("div",{className:"spring-in rounded-2xl p-8 overflow-hidden",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)"},children:[o==="initial"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"mb-6 text-center",style:{color:"#e0e0e0"},children:"Lay Your First Brick"}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:l,onChange:T=>{f(T.target.value),g("")},onKeyDown:T=>T.key==="Enter"&&l&&S(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid",borderColor:l?"#e0e0e0":"#333333",fontSize:"1rem"}})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:S,disabled:!l,className:"w-full py-3 rounded-full transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid #e0e0e0",color:"#e0e0e0",opacity:l?1:.5,cursor:l?"pointer":"not-allowed"},children:"Enter (Log In)"}),jsxRuntimeExports.jsx("button",{onClick:j,disabled:!l,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:l?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:l?"#e0e0e0":"#666666",boxShadow:l?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:l?"pointer":"not-allowed"},children:"Begin Construction (Sign Up)"})]})]}),o==="login"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{i("initial"),c(""),g("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Log In"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:l,onChange:T=>{f(T.target.value),g("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:T=>{c(T.target.value),g("")},onKeyDown:T=>T.key==="Enter"&&l&&d&&E(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),x&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:x})}),jsxRuntimeExports.jsx("button",{onClick:E,disabled:!l||!d||h,className:"w-full py-3 rounded-full transition-all duration-200",style:{background:l&&d?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:l&&d?"#e0e0e0":"#666666",boxShadow:l&&d?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:l&&d&&!h?"pointer":"not-allowed"},children:h?"Logging in...":"Enter"})]}),o==="register"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{i("initial"),c(""),u(""),g("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Sign Up"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Your name",value:y,onChange:T=>{u(T.target.value),g("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:l,onChange:T=>{f(T.target.value),g("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:d,onChange:T=>{c(T.target.value),g("")},onKeyDown:T=>T.key==="Enter"&&l&&d&&y&&w(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),x&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:x})}),jsxRuntimeExports.jsx("button",{onClick:w,disabled:!l||!d||!y||h,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:l&&d&&y?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:l&&d&&y?"#e0e0e0":"#666666",boxShadow:l&&d&&y?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:l&&d&&y&&!h?"pointer":"not-allowed"},children:h?"Creating account...":"Begin Construction"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem"},children:"BY CONTINUING, YOU AGREE TO BRICK'S TERMS"})})]})]})}function ImportScreen({onImport:r,onSkip:s}){const[o,i]=reactExports.useState(null),[l,f]=reactExports.useState(!1),d=[{id:"spotify",name:"Spotify",icon:""},{id:"apple",name:"Apple Music",icon:""},{id:"tidal",name:"Tidal",icon:""}],c=y=>{i(y),f(!0),setTimeout(()=>{r(y)},3e3)};return l?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center fade-in",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",animation:"pulse 2s ease-in-out infinite"},children:jsxRuntimeExports.jsx(Music,{size:32,color:"#e0e0e0"})})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Connecting..."}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Analyzing Audio Quality..."}),jsxRuntimeExports.jsx("div",{className:"mt-6 mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:jsxRuntimeExports.jsx("p",{className:"animate-pulse",children:"Importing library..."})})]}),jsxRuntimeExports.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.05);
              opacity: 0.8;
            }
          }
        `})]}):jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12 fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"mb-3",style:{color:"#e0e0e0"},children:"Do you have existing materials?"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Import your library to upgrade to lossless quality."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:d.map((y,u)=>jsxRuntimeExports.jsxs("button",{onClick:()=>c(y.id),className:"spring-in p-8 rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)",animationDelay:`${u*.1}s`},children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4 opacity-80",style:{filter:"grayscale(1) brightness(1.5)"},children:y.icon}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:y.name})]},y.id))}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:s,className:"transition-all duration-200 hover:opacity-70",style:{color:"#a0a0a0",fontSize:"0.875rem",textDecoration:"underline"},children:"No, I'm starting fresh"})})]})})}function ConnectionManagementScreen({onClose:r}){const[s,o]=reactExports.useState(""),[i,l]=reactExports.useState("active"),f=mockConnections$1.slice(0,8),d=mockConnections$1.slice(8,10),c=mockConnections$1.slice(10,11),y=f.filter(h=>h.user.name.toLowerCase().includes(s.toLowerCase())),u=f.length,x=mockCurrentUser.connectionsMax,g=x-u;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-[#333333]",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"mb-0",children:"Bond Management"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all hover:scale-110",style:{backgroundColor:"rgba(37, 37, 37, 0.8)"},children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{size:18,color:"#546e7a"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:"BOND CAPACITY"})]}),jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:g<=2?"#d32f2f":"#c6a700"},children:u}),"/",x]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${u/x*100}%`,backgroundColor:g<=2?"#d32f2f":"#c6a700"}})}),g<=2&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:g===0?"Connection capacity reached. Remove connections or upgrade tier.":`Only ${g} slot${g===1?"":"s"} remaining.`})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-4",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18,color:"#a0a0a0"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search connections...",value:s,onChange:h=>o(h.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg transition-all",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",outline:"none"}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>l("active"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="active"?"#d32f2f":"transparent",color:i==="active"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="active"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["ACTIVE (",f.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>l("pending"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="pending"?"#d32f2f":"transparent",color:i==="pending"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="pending"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["PENDING (",d.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>l("blocked"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:i==="blocked"?"#d32f2f":"transparent",color:i==="blocked"?"#e0e0e0":"#a0a0a0",border:`1px solid ${i==="blocked"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["BLOCKED (",c.length,")"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 pb-24",children:[i==="active"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:y.map(h=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:h.user.avatar,alt:h.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:h.user.name}),jsxRuntimeExports.jsx("div",{className:"px-2 py-0.5 rounded",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[h.matchScore,"% MATCH"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Activity,{size:14,color:"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[h.mutualArtists," mutual artists"]})]}),jsxRuntimeExports.jsxs("span",{style:{color:"#666666",fontSize:"0.75rem"},children:["Connected ",Math.floor(Math.random()*90+10)," days ago"]})]})]}),jsxRuntimeExports.jsx("button",{className:"p-2 rounded-lg transition-all hover:bg-[#333333]",style:{color:"#d32f2f"},children:jsxRuntimeExports.jsx(UserMinus,{size:18})})]})},h.user.id))}),i==="pending"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:d.map(h=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(198, 167, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:h.user.avatar,alt:h.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:h.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#c6a700",fontSize:"0.75rem"},children:"Awaiting their acceptance"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #666666",color:"#a0a0a0",fontSize:"0.75rem"},children:"Cancel"})]})},h.user.id))}),i==="blocked"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:c.map(h=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:h.user.avatar,alt:h.user.name,className:"w-14 h-14 rounded-full object-cover opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:h.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Blocked user"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a",fontSize:"0.75rem"},children:"Unblock"})]})},h.user.id))})]})]})})}function ArtistProfileScreenV2({artist:r,onClose:s,onShowPatronageLock:o}){const[i,l]=reactExports.useState(0),[f,d]=reactExports.useState(!1),[c,y]=reactExports.useState(!0),u=reactExports.useRef(null);reactExports.useEffect(()=>{const w=()=>{u.current&&l(u.current.scrollTop)},S=u.current;if(S)return S.addEventListener("scroll",w),()=>S.removeEventListener("scroll",w)},[]);const x=Math.min(i/200,1),g=1+i/2e3,h=Math.min(i/20,20),m=[{id:1,name:"Industrial Soundscapes",year:2024,image:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400"},{id:2,name:"Concrete Dreams",year:2023,image:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400"},{id:3,name:"The Foundation",year:2022,image:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}],E=()=>{if(c&&o){o();return}d(!f),navigator.vibrate&&navigator.vibrate(50)};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 transition-opacity duration-300",style:{opacity:x,pointerEvents:x>.5?"auto":"none"},children:jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("button",{onClick:s,className:"p-2 -ml-2",children:jsxRuntimeExports.jsx(ArrowLeft,{size:24,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:r.name}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsxs("div",{ref:u,className:"h-full overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-96 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-all duration-100",style:{transform:`scale(${g}) translateY(${i*.5}px)`,filter:`grayscale(40%) brightness(0.6) blur(${h}px)`},children:jsxRuntimeExports.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, #1a1a1a 0%, transparent 60%)"}}),jsxRuntimeExports.jsx("button",{onClick:s,className:"absolute top-6 left-6 w-10 h-10 rounded-full flex items-center justify-center transition-opacity duration-300",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",opacity:1-x},children:jsxRuntimeExports.jsx(ArrowLeft,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-8 left-6 right-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:r.name}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"1.125rem"},children:r.genre})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6 -mt-6",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:"Monthly Support"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:f?"$8.00/month  80% to artist":"Support this artist directly"})]}),jsxRuntimeExports.jsx("button",{onClick:E,className:"relative transition-all duration-300",style:{width:"60px",height:"32px",borderRadius:"16px",backgroundColor:f?"#d32f2f":"#333333",boxShadow:f?"0 0 20px rgba(211, 47, 47, 0.4)":"none"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 transition-all duration-300",style:{left:f?"calc(100% - 28px)":"4px",width:"24px",height:"24px",borderRadius:"12px",backgroundColor:"#e0e0e0"}})})]}),f&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg spring-in",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Crown,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:"Payment Allocated  Support Active"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Revenue Dashboard"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Users,{size:16,color:"#c6a700"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"GLOBAL PATRONS"})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:r.globalChosenUsers.toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"YOUR CONTRIBUTION"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:f?"$8.00":"$0.00"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Essential Albums"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:jsxRuntimeExports.jsx("div",{className:"flex gap-4",style:{width:"max-content"},children:m.map(w=>jsxRuntimeExports.jsxs("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",style:{width:"180px"},children:[jsxRuntimeExports.jsx("img",{src:w.image,alt:w.name,className:"w-full aspect-square rounded-xl mb-3 object-cover"}),jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:w.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:w.year})]},w.id))})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Top Bricks"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mockPlaylists.slice(0,4).map(w=>jsxRuntimeExports.jsx(BrickCard,{playlist:w,size:"medium"},w.id))})]})]})]})]})}const EXTENSION_TABLE={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"},QUALITY_KEYWORDS=[["FLAC","FLAC"],["ALAC","ALAC"],["AAC","AAC"],["AIFF","AIFF"],["WAV","WAV"],["MP3","MP3"],["320KBPS","MP3"],["256KBPS","AAC"],["M4A","M4A"],["OGG","OGG"],["OPUS","OPUS"],["LOSSLESS","FLAC"]],MIME_KEYWORDS=[["flac","FLAC"],["x-wav","WAV"],["wav","WAV"],["wave","WAV"],["aiff","AIFF"],["aac","AAC"],["alac","ALAC"],["mp4","M4A"],["m4a","M4A"],["mpeg","MP3"],["mp3","MP3"],["ogg","OGG"],["opus","OPUS"],["webm","WEBM"]],matchKeyword=(r,s)=>{if(!r)return;const o=r.toUpperCase();for(const[i,l]of s)if(o.includes(i))return l},matchMime=r=>{if(!r)return;const s=r.toLowerCase();for(const[o,i]of MIME_KEYWORDS)if(s.includes(o))return i},extFromName$1=r=>{if(!r)return;const s=r.split("?")[0].split("#")[0],o=s.lastIndexOf(".");if(o!==-1)return s.substring(o+1).toLowerCase()},labelFromExtension=r=>{const s=extFromName$1(r);return s?EXTENSION_TABLE[s]:void 0};function inferCodecLabel(r){if(r.codecLabel)return r.codecLabel;const s=matchKeyword(r.qualityHint,QUALITY_KEYWORDS);if(s)return s;if(r.file){const o=matchMime(r.file.type);if(o)return o;const i=labelFromExtension(r.file.name);if(i)return i}if(r.url){const o=labelFromExtension(r.url);if(o)return o}}function formatBitrate(r){return r?`${Math.round(r).toLocaleString()} kbps`:null}class GaplessAudioEngine{audioContext;gainNode;currentSource=null;nextSource=null;currentBuffer=null;nextBuffer=null;currentTrack=null;nextTrack=null;isPlaying=!1;volume=1;isMuted=!1;playbackStartTime=0;pausedAt=0;scheduledNextTrack=!1;preloadTimeoutId=null;swapTimeoutId=null;bassFilter;midFilter;trebleFilter;onStateChange=null;onTrackEnd=null;onTrackChange=null;rafId=null;suppressOnEnded=!1;constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.bassFilter=this.audioContext.createBiquadFilter(),this.bassFilter.type="lowshelf",this.bassFilter.frequency.value=200,this.midFilter=this.audioContext.createBiquadFilter(),this.midFilter.type="peaking",this.midFilter.frequency.value=1e3,this.midFilter.Q.value=1,this.trebleFilter=this.audioContext.createBiquadFilter(),this.trebleFilter.type="highshelf",this.trebleFilter.frequency.value=3200,this.gainNode.connect(this.bassFilter),this.bassFilter.connect(this.midFilter),this.midFilter.connect(this.trebleFilter),this.trebleFilter.connect(this.audioContext.destination),this.startTimeUpdates()}setCallbacks(s){this.onStateChange=s.onStateChange||null,this.onTrackEnd=s.onTrackEnd||null,this.onTrackChange=s.onTrackChange||null}async loadTrack(s){if(this.currentTrack=s,this.nextSource){try{this.nextSource.stop()}catch{}this.nextSource=null}this.nextBuffer=null,this.nextTrack=null,this.clearScheduledTransitions();try{const i=await(await fetch(s.url)).arrayBuffer(),l=await this.audioContext.decodeAudioData(i);this.currentBuffer=l,this.onTrackChange&&this.onTrackChange(s.id),this.notifyStateChange({duration:l.duration,currentTime:0})}catch(o){throw console.error("Error loading track:",o),o}}async preloadNextTrack(s){this.nextTrack=s;try{const i=await(await fetch(s.url)).arrayBuffer(),l=await this.audioContext.decodeAudioData(i);this.nextBuffer=l,console.log(`Preloaded next track: ${s.id}`),this.scheduleNextTrackPlayback()}catch(o){console.error("Error preloading next track:",o)}}play(){if(!this.currentBuffer){console.warn("No track loaded");return}if(this.audioContext.state==="suspended"&&this.audioContext.resume(),this.currentSource)try{this.currentSource.stop()}catch{}this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=this.currentBuffer,this.currentSource.connect(this.gainNode);const s=this.currentSource;s.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}s===this.currentSource&&(console.log("Current track ended"),this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))};const o=this.pausedAt;this.currentSource.start(0,o),this.playbackStartTime=this.audioContext.currentTime-o,this.isPlaying=!0,this.notifyStateChange({isPlaying:!0}),this.scheduleNextTrackPlayback()}performGaplessTransition(s){if(!this.nextBuffer||!this.nextTrack||!this.nextSource)return;console.log("Executing gapless transition"),this.currentBuffer=this.nextBuffer,this.currentTrack=this.nextTrack;const o=this.nextSource;if(o){const i=o;o.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}i===this.currentSource&&(console.log("Track ended naturally"),this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))}}this.currentSource=o,this.nextBuffer=null,this.nextTrack=null,this.nextSource=null,this.scheduledNextTrack=!1,this.pausedAt=0,this.playbackStartTime=s,this.onTrackChange&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer.duration,currentTime:0})}pause(){if(this.isPlaying){if(this.pausedAt=this.getCurrentTime(),this.isPlaying=!1,this.currentSource){try{this.suppressOnEnded=!0,this.currentSource.stop()}catch{}this.currentSource=null}if(this.nextSource)try{this.suppressOnEnded=!0,this.nextSource.stop()}catch{}this.scheduledNextTrack=!1,this.clearScheduledTransitions(),this.notifyStateChange({isPlaying:!1})}}usePreloadedTrack(s,o){if(!this.nextTrack||!this.nextBuffer||this.nextTrack.id!==s)return!1;if(this.currentSource){try{this.currentSource.stop()}catch{}this.currentSource=null}return this.clearScheduledTransitions(),this.currentTrack=this.nextTrack,this.currentBuffer=this.nextBuffer,this.nextTrack=null,this.nextBuffer=null,this.nextSource=null,this.pausedAt=0,this.scheduledNextTrack=!1,this.onTrackChange&&this.currentTrack&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer?.duration||0,currentTime:0}),o?this.play():(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1,currentTime:0})),!0}togglePlayPause(){this.isPlaying?this.pause():this.play()}seek(s){if(!this.currentBuffer)return;const o=this.isPlaying;this.isPlaying&&this.pause(),this.pausedAt=Math.max(0,Math.min(s,this.currentBuffer.duration)),this.notifyStateChange({currentTime:this.pausedAt}),o&&this.play()}setVolume(s){this.volume=Math.max(0,Math.min(1,s)),this.isMuted||this.gainNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.notifyStateChange({volume:this.volume})}setMuted(s){this.isMuted=s;const o=s?0:this.volume;this.gainNode.gain.setValueAtTime(o,this.audioContext.currentTime),this.notifyStateChange({isMuted:s})}setEQ(s,o,i){this.bassFilter.gain.value=s,this.midFilter.gain.value=o,this.trebleFilter.gain.value=i}setAdvancedEQ(s,o,i,l){this.bassFilter.frequency.value=s,this.midFilter.frequency.value=o,this.midFilter.Q.value=i,this.trebleFilter.frequency.value=l}getCurrentTime(){if(!this.currentBuffer)return 0;if(this.isPlaying){const s=this.audioContext.currentTime-this.playbackStartTime;return s<0?0:Math.min(s,this.currentBuffer.duration)}return this.pausedAt}getDuration(){return this.currentBuffer?.duration||0}getState(){return{isPlaying:this.isPlaying,currentTime:this.getCurrentTime(),duration:this.getDuration(),volume:this.volume,isMuted:this.isMuted}}startTimeUpdates(){const s=()=>{this.isPlaying&&this.notifyStateChange({currentTime:this.getCurrentTime()}),this.rafId=requestAnimationFrame(s)};s()}notifyStateChange(s){this.onStateChange&&this.onStateChange(s)}destroy(){if(this.rafId!==null&&cancelAnimationFrame(this.rafId),this.clearScheduledTransitions(),this.currentSource)try{this.suppressOnEnded=!0,this.currentSource.stop()}catch{}if(this.nextSource)try{this.suppressOnEnded=!0,this.nextSource.stop()}catch{}this.audioContext.close()}scheduleNextTrackPlayback(){if(!this.currentBuffer||!this.nextBuffer||!this.nextTrack||!this.currentSource||!this.isPlaying)return;this.clearScheduledTransitions();const s=this.currentBuffer.duration,o=2,i=this.audioContext.currentTime-this.playbackStartTime,l=s-i,f=Math.max(0,(l-o)*1e3);this.preloadTimeoutId=window.setTimeout(()=>{if(!this.isPlaying||this.scheduledNextTrack||!this.nextBuffer||!this.nextTrack)return;this.scheduledNextTrack=!0,console.log("Scheduling gapless transition for next track"),this.nextSource=this.audioContext.createBufferSource(),this.nextSource.buffer=this.nextBuffer,this.nextSource.connect(this.gainNode);const d=this.playbackStartTime+s;this.nextSource.start(d),console.log("Next track scheduled to start at:",d);const c=(d-this.audioContext.currentTime)*1e3-50;this.swapTimeoutId=window.setTimeout(()=>{this.isPlaying&&this.performGaplessTransition(d)},Math.max(0,c))},f)}clearScheduledTransitions(){this.preloadTimeoutId!==null&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),this.swapTimeoutId!==null&&(clearTimeout(this.swapTimeoutId),this.swapTimeoutId=null),this.scheduledNextTrack=!1}}var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,s=r*60,o=s*60,i=o*24,l=i*7,f=i*365.25;ms=function(x,g){g=g||{};var h=typeof x;if(h==="string"&&x.length>0)return d(x);if(h==="number"&&isFinite(x))return g.long?y(x):c(x);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(x))};function d(x){if(x=String(x),!(x.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(x);if(g){var h=parseFloat(g[1]),m=(g[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*f;case"weeks":case"week":case"w":return h*l;case"days":case"day":case"d":return h*i;case"hours":case"hour":case"hrs":case"hr":case"h":return h*o;case"minutes":case"minute":case"mins":case"min":case"m":return h*s;case"seconds":case"second":case"secs":case"sec":case"s":return h*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function c(x){var g=Math.abs(x);return g>=i?Math.round(x/i)+"d":g>=o?Math.round(x/o)+"h":g>=s?Math.round(x/s)+"m":g>=r?Math.round(x/r)+"s":x+"ms"}function y(x){var g=Math.abs(x);return g>=i?u(x,g,i,"day"):g>=o?u(x,g,o,"hour"):g>=s?u(x,g,s,"minute"):g>=r?u(x,g,r,"second"):x+" ms"}function u(x,g,h,m){var E=g>=h*1.5;return Math.round(x/h)+" "+m+(E?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function r(s){i.debug=i,i.default=i,i.coerce=u,i.disable=c,i.enable=f,i.enabled=y,i.humanize=requireMs(),i.destroy=x,Object.keys(s).forEach(g=>{i[g]=s[g]}),i.names=[],i.skips=[],i.formatters={};function o(g){let h=0;for(let m=0;m<g.length;m++)h=(h<<5)-h+g.charCodeAt(m),h|=0;return i.colors[Math.abs(h)%i.colors.length]}i.selectColor=o;function i(g){let h,m=null,E,w;function S(...j){if(!S.enabled)return;const T=S,C=Number(new Date),B=C-(h||C);T.diff=B,T.prev=h,T.curr=C,h=C,j[0]=i.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let L=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(R,P)=>{if(R==="%%")return"%";L++;const le=i.formatters[P];if(typeof le=="function"){const W=j[L];R=le.call(T,W),j.splice(L,1),L--}return R}),i.formatArgs.call(T,j),(T.log||i.log).apply(T,j)}return S.namespace=g,S.useColors=i.useColors(),S.color=i.selectColor(g),S.extend=l,S.destroy=i.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(E!==i.namespaces&&(E=i.namespaces,w=i.enabled(g)),w),set:j=>{m=j}}),typeof i.init=="function"&&i.init(S),S}function l(g,h){const m=i(this.namespace+(typeof h>"u"?":":h)+g);return m.log=this.log,m}function f(g){i.save(g),i.namespaces=g,i.names=[],i.skips=[];const h=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of h)m[0]==="-"?i.skips.push(m.slice(1)):i.names.push(m)}function d(g,h){let m=0,E=0,w=-1,S=0;for(;m<g.length;)if(E<h.length&&(h[E]===g[m]||h[E]==="*"))h[E]==="*"?(w=E,S=m,E++):(m++,E++);else if(w!==-1)E=w+1,S++,m=S;else return!1;for(;E<h.length&&h[E]==="*";)E++;return E===h.length}function c(){const g=[...i.names,...i.skips.map(h=>"-"+h)].join(",");return i.enable(""),g}function y(g){for(const h of i.skips)if(d(g,h))return!1;for(const h of i.names)if(d(g,h))return!0;return!1}function u(g){return g instanceof Error?g.stack||g.message:g}function x(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return common=r,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(r,s){var o={};s.formatArgs=l,s.save=f,s.load=d,s.useColors=i,s.storage=c(),s.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const x="color: "+this.color;u.splice(1,0,x,"color: inherit");let g=0,h=0;u[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(g++,m==="%c"&&(h=g))}),u.splice(h,0,x)}s.log=console.debug||console.log||(()=>{});function f(u){try{u?s.storage.setItem("debug",u):s.storage.removeItem("debug")}catch{}}function d(){let u;try{u=s.storage.getItem("debug")||s.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=o.DEBUG),u}function c(){try{return localStorage}catch{}}r.exports=requireCommon()(s);const{formatters:y}=r.exports;y.j=function(u){try{return JSON.stringify(u)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.EndOfStreamError=r.defaultMessages=void 0,r.defaultMessages="End-Of-Stream";class s extends Error{constructor(){super(r.defaultMessages)}}r.EndOfStreamError=s})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let r=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((o,i)=>{this.reject=i,this.resolve=o})}};return Deferred.Deferred=r,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;const s=requireEndOfFileStream(),o=requireDeferred();var i=requireEndOfFileStream();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});const l=1*1024*1024;class f{constructor(c){if(this.s=c,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!c.read||!c.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new s.EndOfStreamError)),this.s.once("error",y=>this.reject(y)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(c,y,u){const x=await this.read(c,y,u);return this.peekQueue.push(c.subarray(y,y+x)),x}async read(c,y,u){if(u===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new s.EndOfStreamError;let x=u,g=0;for(;this.peekQueue.length>0&&x>0;){const h=this.peekQueue.pop();if(!h)throw new Error("peekData should be defined");const m=Math.min(h.length,x);c.set(h.subarray(0,m),y+g),g+=m,x-=m,m<h.length&&this.peekQueue.push(h.subarray(m))}for(;x>0&&!this.endOfStream;){const h=Math.min(x,l),m=await this.readFromStream(c,y+g,h);if(g+=m,m<h)break;x-=m}return g}async readFromStream(c,y,u){const x=this.s.read(u);if(x)return c.set(x,y),x.length;{const g={buffer:c,offset:y,length:u,deferred:new o.Deferred};return this.deferred=g.deferred,this.s.once("readable",()=>{this.readDeferred(g)}),g.deferred.promise}}readDeferred(c){const y=this.s.read(c.length);y?(c.buffer.set(y,c.offset),c.deferred.resolve(y.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(c)})}reject(c){this.endOfStream=!0,this.deferred&&(this.deferred.reject(c),this.deferred=null)}}r.StreamReader=f})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamReader=r.EndOfStreamError=void 0;var s=requireEndOfFileStream();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});var o=requireStreamReader();Object.defineProperty(r,"StreamReader",{enumerable:!0,get:function(){return o.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const r=requireLib$3();let s=class{constructor(i){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=i||{}}async readToken(i,l=this.position){const f=Buffer.alloc(i.len);if(await this.readBuffer(f,{position:l})<i.len)throw new r.EndOfStreamError;return i.get(f,0)}async peekToken(i,l=this.position){const f=Buffer.alloc(i.len);if(await this.peekBuffer(f,{position:l})<i.len)throw new r.EndOfStreamError;return i.get(f,0)}async readNumber(i){if(await this.readBuffer(this.numBuffer,{length:i.len})<i.len)throw new r.EndOfStreamError;return i.get(this.numBuffer,0)}async peekNumber(i){if(await this.peekBuffer(this.numBuffer,{length:i.len})<i.len)throw new r.EndOfStreamError;return i.get(this.numBuffer,0)}async ignore(i){if(this.fileInfo.size!==void 0){const l=this.fileInfo.size-this.position;if(i>l)return this.position+=l,l}return this.position+=i,i}async close(){}normalizeOptions(i,l){if(l&&l.position!==void 0&&l.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return l?{mayBeLess:l.mayBeLess===!0,offset:l.offset?l.offset:0,length:l.length?l.length:i.length-(l.offset?l.offset:0),position:l.position?l.position:this.position}:{mayBeLess:!1,offset:0,length:i.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=s,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const r=requireAbstractTokenizer(),s=requireLib$3(),o=256e3;let i=class extends r.AbstractTokenizer{constructor(f,d){super(d),this.streamReader=new s.StreamReader(f)}async getFileInfo(){return this.fileInfo}async readBuffer(f,d){const c=this.normalizeOptions(f,d),y=c.position-this.position;if(y>0)return await this.ignore(y),this.readBuffer(f,d);if(y<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(c.length===0)return 0;const u=await this.streamReader.read(f,c.offset,c.length);if(this.position+=u,(!d||!d.mayBeLess)&&u<c.length)throw new s.EndOfStreamError;return u}async peekBuffer(f,d){const c=this.normalizeOptions(f,d);let y=0;if(c.position){const u=c.position-this.position;if(u>0){const x=new Uint8Array(c.length+u);return y=await this.peekBuffer(x,{mayBeLess:c.mayBeLess}),f.set(x.subarray(u),c.offset),y-u}else if(u<0)throw new Error("Cannot peek from a negative offset in a stream")}if(c.length>0){try{y=await this.streamReader.peek(f,c.offset,c.length)}catch(u){if(d&&d.mayBeLess&&u instanceof s.EndOfStreamError)return 0;throw u}if(!c.mayBeLess&&y<c.length)throw new s.EndOfStreamError}return y}async ignore(f){const d=Math.min(o,f),c=new Uint8Array(d);let y=0;for(;y<f;){const u=f-y,x=await this.readBuffer(c,{length:Math.min(d,u)});if(x<0)return x;y+=x}return y}};return ReadStreamTokenizer.ReadStreamTokenizer=i,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const r=requireLib$3(),s=requireAbstractTokenizer();let o=class extends s.AbstractTokenizer{constructor(l,f){super(f),this.uint8Array=l,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:l.length}async readBuffer(l,f){if(f&&f.position){if(f.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=f.position}const d=await this.peekBuffer(l,f);return this.position+=d,d}async peekBuffer(l,f){const d=this.normalizeOptions(l,f),c=Math.min(this.uint8Array.length-d.position,d.length);if(!d.mayBeLess&&c<d.length)throw new r.EndOfStreamError;return l.set(this.uint8Array.subarray(d.position,d.position+c),d.offset),c}async close(){}};return BufferTokenizer.BufferTokenizer=o,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fromBuffer=r.fromStream=r.EndOfStreamError=void 0;const s=requireReadStreamTokenizer(),o=requireBufferTokenizer();var i=requireLib$3();Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}});function l(d,c){return c=c||{},new s.ReadStreamTokenizer(d,c)}r.fromStream=l;function f(d,c){return new o.BufferTokenizer(d,c)}r.fromBuffer=f})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(r,s,o,i,l){var f,d,c=l*8-i-1,y=(1<<c)-1,u=y>>1,x=-7,g=o?l-1:0,h=o?-1:1,m=r[s+g];for(g+=h,f=m&(1<<-x)-1,m>>=-x,x+=c;x>0;f=f*256+r[s+g],g+=h,x-=8);for(d=f&(1<<-x)-1,f>>=-x,x+=i;x>0;d=d*256+r[s+g],g+=h,x-=8);if(f===0)f=1-u;else{if(f===y)return d?NaN:(m?-1:1)*(1/0);d=d+Math.pow(2,i),f=f-u}return(m?-1:1)*d*Math.pow(2,f-i)},ieee754.write=function(r,s,o,i,l,f){var d,c,y,u=f*8-l-1,x=(1<<u)-1,g=x>>1,h=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=i?0:f-1,E=i?1:-1,w=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(c=isNaN(s)?1:0,d=x):(d=Math.floor(Math.log(s)/Math.LN2),s*(y=Math.pow(2,-d))<1&&(d--,y*=2),d+g>=1?s+=h/y:s+=h*Math.pow(2,1-g),s*y>=2&&(d++,y/=2),d+g>=x?(c=0,d=x):d+g>=1?(c=(s*y-1)*Math.pow(2,l),d=d+g):(c=s*Math.pow(2,g-1)*Math.pow(2,l),d=0));l>=8;r[o+m]=c&255,m+=E,c/=256,l-=8);for(d=d<<l|c,u+=l;u>0;r[o+m]=d&255,m+=E,d/=256,u-=8);r[o+m-E]|=w*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AnsiStringType=r.StringType=r.BufferType=r.Uint8ArrayType=r.IgnoreType=r.Float80_LE=r.Float80_BE=r.Float64_LE=r.Float64_BE=r.Float32_LE=r.Float32_BE=r.Float16_LE=r.Float16_BE=r.INT64_BE=r.UINT64_BE=r.INT64_LE=r.UINT64_LE=r.INT32_LE=r.INT32_BE=r.INT24_BE=r.INT24_LE=r.INT16_LE=r.INT16_BE=r.INT8=r.UINT32_BE=r.UINT32_LE=r.UINT24_BE=r.UINT24_LE=r.UINT16_BE=r.UINT16_LE=r.UINT8=void 0;const s=requireIeee754();function o(y){return new DataView(y.buffer,y.byteOffset)}r.UINT8={len:1,get(y,u){return o(y).getUint8(u)},put(y,u,x){return o(y).setUint8(u,x),u+1}},r.UINT16_LE={len:2,get(y,u){return o(y).getUint16(u,!0)},put(y,u,x){return o(y).setUint16(u,x,!0),u+2}},r.UINT16_BE={len:2,get(y,u){return o(y).getUint16(u)},put(y,u,x){return o(y).setUint16(u,x),u+2}},r.UINT24_LE={len:3,get(y,u){const x=o(y);return x.getUint8(u)+(x.getUint16(u+1,!0)<<8)},put(y,u,x){const g=o(y);return g.setUint8(u,x&255),g.setUint16(u+1,x>>8,!0),u+3}},r.UINT24_BE={len:3,get(y,u){const x=o(y);return(x.getUint16(u)<<8)+x.getUint8(u+2)},put(y,u,x){const g=o(y);return g.setUint16(u,x>>8),g.setUint8(u+2,x&255),u+3}},r.UINT32_LE={len:4,get(y,u){return o(y).getUint32(u,!0)},put(y,u,x){return o(y).setUint32(u,x,!0),u+4}},r.UINT32_BE={len:4,get(y,u){return o(y).getUint32(u)},put(y,u,x){return o(y).setUint32(u,x),u+4}},r.INT8={len:1,get(y,u){return o(y).getInt8(u)},put(y,u,x){return o(y).setInt8(u,x),u+1}},r.INT16_BE={len:2,get(y,u){return o(y).getInt16(u)},put(y,u,x){return o(y).setInt16(u,x),u+2}},r.INT16_LE={len:2,get(y,u){return o(y).getInt16(u,!0)},put(y,u,x){return o(y).setInt16(u,x,!0),u+2}},r.INT24_LE={len:3,get(y,u){const x=r.UINT24_LE.get(y,u);return x>8388607?x-16777216:x},put(y,u,x){const g=o(y);return g.setUint8(u,x&255),g.setUint16(u+1,x>>8,!0),u+3}},r.INT24_BE={len:3,get(y,u){const x=r.UINT24_BE.get(y,u);return x>8388607?x-16777216:x},put(y,u,x){const g=o(y);return g.setUint16(u,x>>8),g.setUint8(u+2,x&255),u+3}},r.INT32_BE={len:4,get(y,u){return o(y).getInt32(u)},put(y,u,x){return o(y).setInt32(u,x),u+4}},r.INT32_LE={len:4,get(y,u){return o(y).getInt32(u,!0)},put(y,u,x){return o(y).setInt32(u,x,!0),u+4}},r.UINT64_LE={len:8,get(y,u){return o(y).getBigUint64(u,!0)},put(y,u,x){return o(y).setBigUint64(u,x,!0),u+8}},r.INT64_LE={len:8,get(y,u){return o(y).getBigInt64(u,!0)},put(y,u,x){return o(y).setBigInt64(u,x,!0),u+8}},r.UINT64_BE={len:8,get(y,u){return o(y).getBigUint64(u)},put(y,u,x){return o(y).setBigUint64(u,x),u+8}},r.INT64_BE={len:8,get(y,u){return o(y).getBigInt64(u)},put(y,u,x){return o(y).setBigInt64(u,x),u+8}},r.Float16_BE={len:2,get(y,u){return s.read(y,u,!1,10,this.len)},put(y,u,x){return s.write(y,x,u,!1,10,this.len),u+this.len}},r.Float16_LE={len:2,get(y,u){return s.read(y,u,!0,10,this.len)},put(y,u,x){return s.write(y,x,u,!0,10,this.len),u+this.len}},r.Float32_BE={len:4,get(y,u){return o(y).getFloat32(u)},put(y,u,x){return o(y).setFloat32(u,x),u+4}},r.Float32_LE={len:4,get(y,u){return o(y).getFloat32(u,!0)},put(y,u,x){return o(y).setFloat32(u,x,!0),u+4}},r.Float64_BE={len:8,get(y,u){return o(y).getFloat64(u)},put(y,u,x){return o(y).setFloat64(u,x),u+8}},r.Float64_LE={len:8,get(y,u){return o(y).getFloat64(u,!0)},put(y,u,x){return o(y).setFloat64(u,x,!0),u+8}},r.Float80_BE={len:10,get(y,u){return s.read(y,u,!1,63,this.len)},put(y,u,x){return s.write(y,x,u,!1,63,this.len),u+this.len}},r.Float80_LE={len:10,get(y,u){return s.read(y,u,!0,63,this.len)},put(y,u,x){return s.write(y,x,u,!0,63,this.len),u+this.len}};class i{constructor(u){this.len=u}get(u,x){}}r.IgnoreType=i;class l{constructor(u){this.len=u}get(u,x){return u.subarray(x,x+this.len)}}r.Uint8ArrayType=l;class f{constructor(u){this.len=u}get(u,x){return Buffer.from(u.subarray(x,x+this.len))}}r.BufferType=f;class d{constructor(u,x){this.len=u,this.encoding=x}get(u,x){return Buffer.from(u).toString(this.encoding,x,x+this.len)}}r.StringType=d;class c{constructor(u){this.len=u}static decode(u,x,g){let h="";for(let m=x;m<g;++m)h+=c.codePointToString(c.singleByteDecoder(u[m]));return h}static inRange(u,x,g){return x<=u&&u<=g}static codePointToString(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}static singleByteDecoder(u){if(c.inRange(u,0,127))return u;const x=c.windows1252[u-128];if(x===null)throw Error("invaliding encoding");return x}get(u,x=0){return c.decode(u,x,x+this.len)}}r.AnsiStringType=c,c.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=r=>[...r].map(s=>s.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(r,s=0)=>{const o=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(o))return!1;let i=256;for(let l=s;l<s+148;l++)i+=r[l];for(let l=s+156;l<s+512;l++)i+=r[l];return o===i},util$1.uint32SyncSafeToken={get:(r,s)=>r[s+3]&127|r[s+2]<<7|r[s+1]<<14|r[s]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(r){const s=await strtok3.fromStream(r);try{return await fromTokenizer(s)}finally{await s.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const s=r instanceof Buffer?r:Buffer.from(r);if(!(s&&s.length>1))return;const o=strtok3.fromBuffer(s);return fromTokenizer(o)}function _check(r,s,o){o={offset:0,...o};for(const[i,l]of s.entries())if(o.mask){if(l!==(o.mask[i]&r[i+o.offset]))return!1}else if(l!==r[i+o.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(s){if(!(s instanceof strtok3.EndOfStreamError))throw s}}async function _fromTokenizer(r){let s=Buffer.alloc(minimumBytes);const o=12,i=(f,d)=>_check(s,f,d),l=(f,d)=>i(stringToBytes(f),d);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(s,{length:o,mayBeLess:!0}),i([66,77]))return{ext:"bmp",mime:"image/bmp"};if(i([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(i([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(i([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(i([37,33]))return await r.peekBuffer(s,{length:24,mayBeLess:!0}),l("PS-Adobe-",{offset:2})&&l(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(i([31,160])||i([31,157]))return{ext:"Z",mime:"application/x-compress"};if(i([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(i([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(i([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(i([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(l("ID3")){await r.ignore(6);const f=await r.readToken(uint32SyncSafeToken);return r.position+f>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(f),fromTokenizer(r))}if(l("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((s[0]===67||s[0]===70)&&i([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(i([71,73,70]))return{ext:"gif",mime:"image/gif"};if(l("FLIF"))return{ext:"flif",mime:"image/flif"};if(l("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(l("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(l("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(l("FORM"))return{ext:"aif",mime:"audio/aiff"};if(l("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(i([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(s,{length:30});const f={compressedSize:s.readUInt32LE(18),uncompressedSize:s.readUInt32LE(22),filenameLength:s.readUInt16LE(26),extraFieldLength:s.readUInt16LE(28)};if(f.filename=await r.readToken(new Token.StringType(f.filenameLength,"utf-8")),await r.ignore(f.extraFieldLength),f.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(f.filename.endsWith(".rels")||f.filename.endsWith(".xml"))switch(f.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(f.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(f.filename.startsWith("3D/")&&f.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(f.filename==="mimetype"&&f.compressedSize===f.uncompressedSize)switch(await r.readToken(new Token.StringType(f.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(f.compressedSize===0){let d=-1;for(;d<0&&r.position<r.fileInfo.size;)await r.peekBuffer(s,{mayBeLess:!0}),d=s.indexOf("504B0304",0,"hex"),await r.ignore(d>=0?d:s.length)}else await r.ignore(f.compressedSize)}}catch(f){if(!(f instanceof strtok3.EndOfStreamError))throw f}return{ext:"zip",mime:"application/zip"}}if(l("OggS")){await r.ignore(28);const f=Buffer.alloc(8);return await r.readBuffer(f),_check(f,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(f,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(f,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(f,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(f,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(f,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(i([80,75])&&(s[2]===3||s[2]===5||s[2]===7)&&(s[3]===4||s[3]===6||s[3]===8))return{ext:"zip",mime:"application/zip"};if(l("ftyp",{offset:4})&&(s[8]&96)!==0){const f=s.toString("binary",8,12).replace("\0"," ").trim();switch(f){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return f.startsWith("3g")?f.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(l("MThd"))return{ext:"mid",mime:"audio/midi"};if(l("wOFF")&&(i([0,1,0,0],{offset:4})||l("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(l("wOF2")&&(i([0,1,0,0],{offset:4})||l("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(i([212,195,178,161])||i([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(l("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(l("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(l("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(i([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(l("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(l("%PDF")){await r.ignore(1350);const f=10*1024*1024,d=Buffer.alloc(Math.min(f,r.fileInfo.size));return await r.readBuffer(d,{mayBeLess:!0}),d.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(i([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(i([73,73,42,0]))return l("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:i([28,0,254,0],{offset:8})||i([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:i([8,0,0,0],{offset:4})&&(i([45,0,254,0],{offset:8})||i([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(s=Buffer.alloc(24),await r.peekBuffer(s),(i([16,251,134,1],{offset:4})||i([8,0,0,0],{offset:4}))&&i([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(i([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(l("MAC "))return{ext:"ape",mime:"audio/ape"};if(i([26,69,223,163])){async function f(){const x=await r.peekNumber(Token.UINT8);let g=128,h=0;for(;(x&g)===0&&g!==0;)++h,g>>=1;const m=Buffer.alloc(h+1);return await r.readBuffer(m),m}async function d(){const x=await f(),g=await f();g[0]^=128>>g.length-1;const h=Math.min(6,g.length);return{id:x.readUIntBE(0,x.length),len:g.readUIntBE(g.length-h,h)}}async function c(x,g){for(;g>0;){const h=await d();if(h.id===17026)return r.readToken(new Token.StringType(h.len,"utf-8"));await r.ignore(h.len),--g}}const y=await d();switch(await c(1,y.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(i([82,73,70,70])){if(i([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(i([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(i([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(l("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(i([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(l("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(l("MSCF")||l("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(i([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(i([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(i([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(i([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(l("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(l("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(i([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(l("IMPM"))return{ext:"it",mime:"audio/x-it"};if(l("-lh0-",{offset:2})||l("-lh1-",{offset:2})||l("-lh2-",{offset:2})||l("-lh3-",{offset:2})||l("-lh4-",{offset:2})||l("-lh5-",{offset:2})||l("-lh6-",{offset:2})||l("-lh7-",{offset:2})||l("-lzs-",{offset:2})||l("-lz4-",{offset:2})||l("-lz5-",{offset:2})||l("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(i([0,0,1,186])){if(i([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(i([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(l("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(i([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(l("<?xml "))return{ext:"xml",mime:"application/xml"};if(i([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(i([82,97,114,33,26,7])&&(s[6]===0||s[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(l("solid "))return{ext:"stl",mime:"model/stl"};if(l("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(l("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(i([137,80,78,71,13,10,26,10])){await r.ignore(8);async function f(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{const d=await f();if(d.length<0)return;switch(d.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(d.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(i([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(i([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(i([102,114,101,101],{offset:4})||i([109,100,97,116],{offset:4})||i([109,111,111,118],{offset:4})||i([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(i([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(l("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(i([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(i([48,38,178,117,142,102,207,17,166,217])){async function f(){const d=Buffer.alloc(16);return await r.readBuffer(d),{id:d,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){const d=await f();let c=d.size-24;if(_check(d.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const y=Buffer.alloc(16);if(c-=await r.readBuffer(y),_check(y,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(y,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(c)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(i([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((i([126,16,4])||i([126,24,4]))&&i([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(i([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(i([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(i([255,10])||i([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(i([0,0,1,186])||i([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(i([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(i([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(i([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(i([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(s,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),l("BEGIN:")){if(l("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(l("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(l("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(l("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(l("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(i([4,0,0,0])&&s.length>=16){const f=s.readUInt32LE(12);if(f>12&&s.length>=f+16)try{const d=s.slice(16,f+16).toString();if(JSON.parse(d).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(i([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(l("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(i([71],{offset:4})&&(i([71],{offset:192})||i([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(i([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(i([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(i([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(i([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(i([76,80],{offset:34})&&(i([0,0,1],{offset:8})||i([1,0,2],{offset:8})||i([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(i([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(s,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(s))return{ext:"tar",mime:"application/x-tar"};if(i([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(l("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(s.length>=2&&i([255,224],{offset:0,mask:[255,224]})){if(i([16],{offset:1,mask:[22]}))return i([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(i([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(i([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(i([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const r=new stream.PassThrough;let s;stream.pipeline?s=stream.pipeline(readableStream,r,()=>{}):s=readableStream.pipe(r);const o=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const i=await fromBuffer(o);r.fileType=i}catch(i){reject(i)}resolve(s)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,s=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,i=/\\([\u000b\u0020-\u00ff])/g,l=/([\\"])/g,f=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=d,contentType.parse=c;function d(g){if(!g||typeof g!="object")throw new TypeError("argument obj is required");var h=g.parameters,m=g.type;if(!m||!f.test(m))throw new TypeError("invalid type");var E=m;if(h&&typeof h=="object")for(var w,S=Object.keys(h).sort(),j=0;j<S.length;j++){if(w=S[j],!o.test(w))throw new TypeError("invalid parameter name");E+="; "+w+"="+u(h[w])}return E}function c(g){if(!g)throw new TypeError("argument string is required");var h=typeof g=="object"?y(g):g;if(typeof h!="string")throw new TypeError("argument string is required to be a string");var m=h.indexOf(";"),E=m!==-1?h.slice(0,m).trim():h.trim();if(!f.test(E))throw new TypeError("invalid media type");var w=new x(E.toLowerCase());if(m!==-1){var S,j,T;for(r.lastIndex=m;j=r.exec(h);){if(j.index!==m)throw new TypeError("invalid parameter format");m+=j[0].length,S=j[1].toLowerCase(),T=j[2],T.charCodeAt(0)===34&&(T=T.slice(1,-1),T.indexOf("\\")!==-1&&(T=T.replace(i,"$1"))),w.parameters[S]=T}if(m!==h.length)throw new TypeError("invalid parameter format")}return w}function y(g){var h;if(typeof g.getHeader=="function"?h=g.getHeader("content-type"):typeof g.headers=="object"&&(h=g.headers&&g.headers["content-type"]),typeof h!="string")throw new TypeError("content-type header is missing from object");return h}function u(g){var h=String(g);if(o.test(h))return h;if(h.length>0&&!s.test(h))throw new TypeError("invalid parameter value");return'"'+h.replace(l,"\\$1")+'"'}function x(g){this.parameters=Object.create(null),this.type=g}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,s=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,o=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=i,mediaTyper.parse=f,mediaTyper.test=l;function i(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var y=c.subtype,u=c.suffix,x=c.type;if(!x||!s.test(x))throw new TypeError("invalid type");if(!y||!r.test(y))throw new TypeError("invalid subtype");var g=x+"/"+y;if(u){if(!s.test(u))throw new TypeError("invalid suffix");g+="+"+u}return g}function l(c){if(!c)throw new TypeError("argument string is required");if(typeof c!="string")throw new TypeError("argument string is required to be a string");return o.test(c.toLowerCase())}function f(c){if(!c)throw new TypeError("argument string is required");if(typeof c!="string")throw new TypeError("argument string is required to be a string");var y=o.exec(c.toLowerCase());if(!y)throw new TypeError("invalid media type");var u=y[1],x=y[2],g,h=x.lastIndexOf("+");return h!==-1&&(g=x.substr(h+1),x=x.substr(0,h)),new d(u,x,g)}function d(c,y,u){this.type=c,this.subtype=y,this.suffix=u}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrackType=r.TargetType=r.DataType=void 0,(function(s){s[s.string=0]="string",s[s.uint=1]="uint",s[s.uid=2]="uid",s[s.bool=3]="bool",s[s.binary=4]="binary",s[s.float=5]="float"})(r.DataType||(r.DataType={})),(function(s){s[s.shot=10]="shot",s[s.scene=20]="scene",s[s.track=30]="track",s[s.part=40]="part",s[s.album=50]="album",s[s.edition=60]="edition",s[s.collection=70]="collection"})(r.TargetType||(r.TargetType={})),(function(s){s[s.video=1]="video",s[s.audio=2]="audio",s[s.complex=3]="complex",s[s.logo=4]="logo",s[s.subtitle=17]="subtitle",s[s.button=18]="button",s[s.control=32]="control"})(r.TrackType||(r.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TrackType=void 0;var s=requireTypes();Object.defineProperty(r,"TrackType",{enumerable:!0,get:function(){return s.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.isUnique=r.isSingleton=r.commonTags=void 0,r.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function s(i){return r.commonTags.hasOwnProperty(i)&&!r.commonTags[i].multiple}r.isSingleton=s;function o(i){return!r.commonTags[i].multiple||r.commonTags[i].unique}r.isUnique=o})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class r{static toIntOrNull(o){const i=parseInt(o,10);return isNaN(i)?null:i}static normalizeTrack(o){const i=o.toString().split("/");return{no:parseInt(i[0],10)||null,of:parseInt(i[1],10)||null}}constructor(o,i){this.tagTypes=o,this.tagMap=i}mapGenericTag(o,i){o={id:o.id,value:o.value},this.postMap(o,i);const l=this.getCommonName(o.id);return l?{id:l,value:o.value}:null}getCommonName(o){return this.tagMap[o]}postMap(o,i){}}return r.maxRatingScore=1,GenericTagMapper.CommonTagMapper=r,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const r=requireGenericTagMapper(),s={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class o extends r.CommonTagMapper{constructor(){super(["ID3v1"],s)}}return ID3v1TagMap.ID3v1TagMapper=o,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const r=requireGenericTagMapper();let s=class extends r.CommonTagMapper{constructor(i,l){const f={};for(const d of Object.keys(l))f[d.toUpperCase()]=l[d];super(i,f)}getCommonName(i){return this.tagMap[i.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=s,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function r(h,m,E){return(h[m]&1<<E)!==0}Util.getBit=r;function s(h,m,E,w){let S=m;if(w==="utf16le"){for(;h[S]!==0||h[S+1]!==0;){if(S>=E)return E;S+=2}return S}else{for(;h[S]!==0;){if(S>=E)return E;S++}return S}}Util.findZero=s;function o(h){const m=h.indexOf("\0");return m===-1?h:h.substr(0,m)}Util.trimRightNull=o;function i(h){const m=h.length;if((m&1)!==0)throw new Error("Buffer length must be even");for(let E=0;E<m;E+=2){const w=h[E];h[E]=h[E+1],h[E+1]=w}return h}function l(h,m){if(h[0]===255&&h[1]===254)return l(h.subarray(2),m);if(m==="utf16le"&&h[0]===254&&h[1]===255){if((h.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return l(i(h),m)}return Buffer.from(h).toString(m)}Util.decodeString=l;function f(h){return h=h.replace(/^\x00+/g,""),h=h.replace(/\x00+$/g,""),h}Util.stripNulls=f;function d(h,m,E,w){const S=m+~~(E/8),j=E%8;let T=h[S];T&=255>>j;const C=8-j,B=w-C;return B<0?T>>=8-j-w:B>0&&(T<<=B,T|=d(h,m,E+C,B)),T}Util.getBitAllignedNumber=d;function c(h,m,E){return d(h,m,E,1)===1}Util.isBitSet=c;function y(h){const m=[];for(let E=0,w=h.length;E<w;E++){const S=Number(h.charCodeAt(E)).toString(16);m.push(S.length===1?"0"+S:S)}return m.join(" ")}Util.a2hex=y;function u(h){return 10*Math.log10(h)}Util.ratioToDb=u;function x(h){return Math.pow(10,h/10)}Util.dbToRatio=x;function g(h){const m=h.split(" ").map(E=>E.trim().toLowerCase());if(m.length>=1){const E=parseFloat(m[0]);return m.length===2&&m[1]==="db"?{dB:E,ratio:x(E)}:{dB:u(E),ratio:E}}}return Util.toRatio=g,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const r=requireGenericTagMapper(),s=requireCaseInsensitiveTagMap(),o=requireUtil$1(),i={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let l=class Ic extends s.CaseInsensitiveTagMap{static toRating(d){return{source:d.email,rating:d.rating>0?(d.rating-1)/254*r.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],i)}postMap(d,c){switch(d.id){case"UFID":d.value.owner_identifier==="http://musicbrainz.org"&&(d.id+=":"+d.value.owner_identifier,d.value=o.decodeString(d.value.identifier,"latin1"));break;case"PRIV":switch(d.value.owner_identifier){case"AverageLevel":case"PeakValue":d.id+=":"+d.value.owner_identifier,d.value=d.value.data.length===4?d.value.data.readUInt32LE(0):null,d.value===null&&c.addWarning("Failed to parse PRIV:PeakValue");break;default:c.addWarning(`Unknown PRIV owner-identifier: ${d.value.owner_identifier}`)}break;case"COMM":d.value=d.value?d.value.text:null;break;case"POPM":d.value=Ic.toRating(d.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=l,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const r=requireGenericTagMapper(),s={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let o=class Nc extends r.CommonTagMapper{static toRating(l){return{rating:parseFloat(l+1)/5}}constructor(){super(["asf"],s)}postMap(l){switch(l.id){case"WM/SharedUserRating":const f=l.id.split(":");l.value=Nc.toRating(l.value),l.id=f[0];break}}};return AsfTagMapper.AsfTagMapper=o,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ID3v22TagMapper=r.id3v22TagMap=void 0;const s=requireCaseInsensitiveTagMap();r.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class o extends s.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],r.id3v22TagMap)}}r.ID3v22TagMapper=o})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const r=requireCaseInsensitiveTagMap(),s={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let o=class extends r.CaseInsensitiveTagMap{constructor(){super(["APEv2"],s)}};return APEv2TagMapper.APEv2TagMapper=o,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MP4TagMapper=r.tagType=void 0;const s=requireCaseInsensitiveTagMap(),o={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};r.tagType="iTunes";class i extends s.CaseInsensitiveTagMap{constructor(){super([r.tagType],o)}postMap(f,d){switch(f.id){case"rate":f.value={source:void 0,rating:parseFloat(f.value)/100};break}}}r.MP4TagMapper=i})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const r=requireGenericTagMapper(),s={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let o=class Qa extends r.CommonTagMapper{static toRating(l,f,d){return{source:l&&l.toLowerCase(),rating:parseFloat(f)/d*r.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],s)}postMap(l){if(l.id==="RATING")l.value=Qa.toRating(void 0,l.value,100);else if(l.id.indexOf("RATING:")===0){const f=l.id.split(":");l.value=Qa.toRating(f[1],l.value,1),l.id=f[0]}}};return VorbisTagMapper.VorbisTagMapper=o,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.RiffInfoTagMapper=r.riffInfoTagMap=void 0;const s=requireGenericTagMapper();r.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class o extends s.CommonTagMapper{constructor(){super(["exif"],r.riffInfoTagMap)}}r.RiffInfoTagMapper=o})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const r=requireCaseInsensitiveTagMap(),s={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let o=class extends r.CaseInsensitiveTagMap{constructor(){super(["matroska"],s)}};return MatroskaTagMapper.MatroskaTagMapper=o,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const r=requireGenericTagMapper(),s={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class o extends r.CommonTagMapper{constructor(){super(["AIFF"],s)}}return AiffTagMap.AiffTagMapper=o,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const r=requireID3v1TagMap(),s=requireID3v24TagMapper(),o=requireAsfTagMapper(),i=requireID3v22TagMapper(),l=requireAPEv2TagMapper(),f=requireMP4TagMapper(),d=requireVorbisTagMapper(),c=requireRiffInfoTagMap(),y=requireMatroskaTagMapper(),u=requireAiffTagMap();let x=class{constructor(){this.tagMappers={},[new r.ID3v1TagMapper,new i.ID3v22TagMapper,new s.ID3v24TagMapper,new f.MP4TagMapper,new f.MP4TagMapper,new d.VorbisTagMapper,new l.APEv2TagMapper,new o.AsfTagMapper,new c.RiffInfoTagMapper,new y.MatroskaTagMapper,new u.AiffTagMapper].forEach(h=>{this.registerTagMapper(h)})}mapTag(h,m,E){if(this.tagMappers[h])return this.tagMappers[h].mapGenericTag(m,E);throw new Error("No generic tag mapper defined for tag-format: "+h)}registerTagMapper(h){for(const m of h.tagTypes)this.tagMappers[m]=h}};return CombinedTagMapper.CombinedTagMapper=x,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const r=requireType(),s=requireBrowser$3(),o=requireGenericTagTypes(),i=requireCombinedTagMapper(),l=requireGenericTagMapper(),f=requireUtil$1(),d=requireCore$1(),c=(0,s.default)("music-metadata:collector"),y=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let u=class{constructor(h){this.opts=h,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new i.CombinedTagMapper;let m=1;for(const E of y)this.originPriority[E]=m++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(h){c(`streamInfo: type=${r.TrackType[h.type]}, codec=${h.codecName}`),this.format.trackInfo.push(h)}setFormat(h,m){c(`format: ${h} = ${m}`),this.format[h]=m,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:h,value:m}})}addTag(h,m,E){c(`tag ${h}.${m} = ${E}`),this.native[h]||(this.format.tagTypes.push(h),this.native[h]=[]),this.native[h].push({id:m,value:E}),this.toCommon(h,m,E)}addWarning(h){this.quality.warnings.push({message:h})}postMap(h,m){switch(m.id){case"artist":if(this.commonOrigin.artist===this.originPriority[h])return this.postMap("artificial",{id:"artists",value:m.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:m.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(m.value)===-1)){const j=(this.common.artists||[]).concat([m.value]),C={id:"artist",value:x(j)};this.setGenericTag("artificial",C)}break;case"picture":this.postFixPicture(m.value).then(j=>{j!==null&&(m.value=j,this.setGenericTag(h,m))});return;case"totaltracks":this.common.track.of=l.CommonTagMapper.toIntOrNull(m.value);return;case"totaldiscs":this.common.disk.of=l.CommonTagMapper.toIntOrNull(m.value);return;case"movementTotal":this.common.movementIndex.of=l.CommonTagMapper.toIntOrNull(m.value);return;case"track":case"disk":case"movementIndex":const E=this.common[m.id].of;this.common[m.id]=l.CommonTagMapper.normalizeTrack(m.value),this.common[m.id].of=E??this.common[m.id].of;return;case"bpm":case"year":case"originalyear":m.value=parseInt(m.value,10);break;case"date":const w=parseInt(m.value.substr(0,4),10);isNaN(w)||(this.common.year=w);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":m.value=typeof m.value=="string"?parseInt(m.value,10):m.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":m.value=(0,f.toRatio)(m.value);break;case"replaygain_track_minmax":m.value=m.value.split(",").map(j=>parseInt(j,10));break;case"replaygain_undo":const S=m.value.split(",").map(j=>parseInt(j,10));m.value={leftChannel:S[0],rightChannel:S[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":m.value=m.value==="1"||m.value===1;break;case"isrc":if(this.common[m.id]&&this.common[m.id].indexOf(m.value)!==-1)return;break}m.value!==null&&this.setGenericTag(h,m)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(h){if(h.data&&h.data.length>0){if(!h.format){const m=await d.fromBuffer(h.data);if(m)h.format=m.mime;else return null}switch(h.format=h.format.toLocaleLowerCase(),h.format){case"image/jpg":h.format="image/jpeg"}return h}return this.addWarning("Empty picture tag found"),null}toCommon(h,m,E){const w={id:m,value:E},S=this.tagMapper.mapTag(h,w,this);S&&this.postMap(h,S)}setGenericTag(h,m){c(`common.${m.id} = ${m.value}`);const E=this.commonOrigin[m.id]||1e3,w=this.originPriority[h];if((0,o.isSingleton)(m.id))if(w<=E)this.common[m.id]=m.value,this.commonOrigin[m.id]=w;else return c(`Ignore native tag (singleton): ${h}.${m.id} = ${m.value}`);else if(w===E)!(0,o.isUnique)(m.id)||this.common[m.id].indexOf(m.value)===-1?this.common[m.id].push(m.value):c(`Ignore duplicate value: ${h}.${m.id} = ${m.value}`);else if(w<E)this.common[m.id]=[m.value],this.commonOrigin[m.id]=w;else return c(`Ignore native tag (list): ${h}.${m.id} = ${m.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:m.id,value:m.value}})}};MetadataCollector.MetadataCollector=u;function x(g){return g.length>2?g.slice(0,g.length-1).join(", ")+" & "+g[g.length-1]:g.join(" & ")}return MetadataCollector.joinArtists=x,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.TextEncodingToken=r.ExtendedHeader=r.ID3v2Header=r.UINT32SYNCSAFE=r.AttachedPictureType=void 0;const s=requireLib$2(),o=requireUtil$1();(function(i){i[i.Other=0]="Other",i[i["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",i[i["Other file icon"]=2]="Other file icon",i[i["Cover (front)"]=3]="Cover (front)",i[i["Cover (back)"]=4]="Cover (back)",i[i["Leaflet page"]=5]="Leaflet page",i[i["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",i[i["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",i[i["Artist/performer"]=8]="Artist/performer",i[i.Conductor=9]="Conductor",i[i["Band/Orchestra"]=10]="Band/Orchestra",i[i.Composer=11]="Composer",i[i["Lyricist/text writer"]=12]="Lyricist/text writer",i[i["Recording Location"]=13]="Recording Location",i[i["During recording"]=14]="During recording",i[i["During performance"]=15]="During performance",i[i["Movie/video screen capture"]=16]="Movie/video screen capture",i[i["A bright coloured fish"]=17]="A bright coloured fish",i[i.Illustration=18]="Illustration",i[i["Band/artist logotype"]=19]="Band/artist logotype",i[i["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(r.AttachedPictureType||(r.AttachedPictureType={})),r.UINT32SYNCSAFE={get:(i,l)=>i[l+3]&127|i[l+2]<<7|i[l+1]<<14|i[l]<<21,len:4},r.ID3v2Header={len:10,get:(i,l)=>({fileIdentifier:new s.StringType(3,"ascii").get(i,l),version:{major:s.INT8.get(i,l+3),revision:s.INT8.get(i,l+4)},flags:{unsynchronisation:o.getBit(i,l+5,7),isExtendedHeader:o.getBit(i,l+5,6),expIndicator:o.getBit(i,l+5,5),footer:o.getBit(i,l+5,4)},size:r.UINT32SYNCSAFE.get(i,l+6)})},r.ExtendedHeader={len:10,get:(i,l)=>({size:s.UINT32_BE.get(i,l),extendedFlags:s.UINT16_BE.get(i,l+4),sizeOfPadding:s.UINT32_BE.get(i,l+6),crcDataPresent:o.getBit(i,l+4,31)})},r.TextEncodingToken={len:1,get:(i,l)=>{switch(i[l]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let r=class{init(o,i,l){return this.metadata=o,this.tokenizer=i,this.options=l,this}};return BasicParser.BasicParser=r,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FourCcToken=void 0;const s=requireUtil$1(),o=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;r.FourCcToken={len:4,get:(i,l)=>{const f=i.toString("binary",l,l+r.FourCcToken.len);if(!f.match(o))throw new Error(`FourCC contains invalid characters: ${s.a2hex(f)} "${f}"`);return f},put:(i,l,f)=>{const d=Buffer.from(f,"binary");if(d.length!==4)throw new Error("Invalid length");return d.copy(i,l)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBitSet=r.parseTagFlags=r.TagField=r.TagItemHeader=r.TagFooter=r.Header=r.DescriptorParser=r.DataType=void 0;const s=requireLib$2(),o=requireFourCC();(function(d){d[d.text_utf8=0]="text_utf8",d[d.binary=1]="binary",d[d.external_info=2]="external_info",d[d.reserved=3]="reserved"})(r.DataType||(r.DataType={})),r.DescriptorParser={len:52,get:(d,c)=>({ID:o.FourCcToken.get(d,c),version:s.UINT32_LE.get(d,c+4)/1e3,descriptorBytes:s.UINT32_LE.get(d,c+8),headerBytes:s.UINT32_LE.get(d,c+12),seekTableBytes:s.UINT32_LE.get(d,c+16),headerDataBytes:s.UINT32_LE.get(d,c+20),apeFrameDataBytes:s.UINT32_LE.get(d,c+24),apeFrameDataBytesHigh:s.UINT32_LE.get(d,c+28),terminatingDataBytes:s.UINT32_LE.get(d,c+32),fileMD5:new s.Uint8ArrayType(16).get(d,c+36)})},r.Header={len:24,get:(d,c)=>({compressionLevel:s.UINT16_LE.get(d,c),formatFlags:s.UINT16_LE.get(d,c+2),blocksPerFrame:s.UINT32_LE.get(d,c+4),finalFrameBlocks:s.UINT32_LE.get(d,c+8),totalFrames:s.UINT32_LE.get(d,c+12),bitsPerSample:s.UINT16_LE.get(d,c+16),channel:s.UINT16_LE.get(d,c+18),sampleRate:s.UINT32_LE.get(d,c+20)})},r.TagFooter={len:32,get:(d,c)=>({ID:new s.StringType(8,"ascii").get(d,c),version:s.UINT32_LE.get(d,c+8),size:s.UINT32_LE.get(d,c+12),fields:s.UINT32_LE.get(d,c+16),flags:l(s.UINT32_LE.get(d,c+20))})},r.TagItemHeader={len:8,get:(d,c)=>({size:s.UINT32_LE.get(d,c),flags:l(s.UINT32_LE.get(d,c+4))})};const i=d=>new s.Uint8ArrayType(d.size-r.TagFooter.len);r.TagField=i;function l(d){return{containsHeader:f(d,31),containsFooter:f(d,30),isHeader:f(d,31),readOnly:f(d,0),dataType:(d&6)>>1}}r.parseTagFlags=l;function f(d,c){return(d&1<<c)!==0}r.isBitSet=f})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const r=requireBrowser$3(),s=requireCore$2(),o=requireLib$2(),i=requireUtil$1(),l=requireBasicParser(),f=requireAPEv2Token(),d=(0,r.default)("music-metadata:parser:APEv2"),c="APEv2",y="APETAGEX";let u=class ci extends l.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(g,h,m){const E=new ci;return E.init(g,h,m),E.tryParseApeHeader()}static calculateDuration(g){let h=g.totalFrames>1?g.blocksPerFrame*(g.totalFrames-1):0;return h+=g.finalFrameBlocks,h/g.sampleRate}static async findApeFooterOffset(g,h){const m=Buffer.alloc(f.TagFooter.len);await g.randomRead(m,0,f.TagFooter.len,h-f.TagFooter.len);const E=f.TagFooter.get(m,0);if(E.ID==="APETAGEX")return d(`APE footer header at offset=${h}`),{footer:E,offset:h-E.size}}static parseTagFooter(g,h,m){const E=f.TagFooter.get(h,h.length-f.TagFooter.len);if(E.ID!==y)throw new Error("Unexpected APEv2 Footer ID preamble value.");s.fromBuffer(h);const w=new ci;return w.init(g,s.fromBuffer(h),m),w.parseTags(E)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<f.TagFooter.len){d("No APEv2 header found, end-of-file reached");return}const g=await this.tokenizer.peekToken(f.TagFooter);if(g.ID===y)return await this.tokenizer.ignore(f.TagFooter.len),this.parseTags(g);if(d(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const h=this.tokenizer.fileInfo.size-this.tokenizer.position,m=Buffer.alloc(h);return await this.tokenizer.readBuffer(m),ci.parseTagFooter(this.metadata,m,this.options)}}async parse(){const g=await this.tokenizer.readToken(f.DescriptorParser);if(g.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=g;const h=g.descriptorBytes-f.DescriptorParser.len,m=await(h>0?this.parseDescriptorExpansion(h):this.parseHeader());return await this.tokenizer.ignore(m.forwardBytes),this.tryParseApeHeader()}async parseTags(g){const h=Buffer.alloc(256);let m=g.size-f.TagFooter.len;d(`Parse APE tags at offset=${this.tokenizer.position}, size=${m}`);for(let E=0;E<g.fields;E++){if(m<f.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${g.fields-E} items remaining, but no more tag data to read.`);break}const w=await this.tokenizer.readToken(f.TagItemHeader);m-=f.TagItemHeader.len+w.size,await this.tokenizer.peekBuffer(h,{length:Math.min(h.length,m)});let S=i.findZero(h,0,h.length);const j=await this.tokenizer.readToken(new o.StringType(S,"ascii"));switch(await this.tokenizer.ignore(1),m-=j.length+1,w.flags.dataType){case f.DataType.text_utf8:{const C=(await this.tokenizer.readToken(new o.StringType(w.size,"utf8"))).split(/\x00/g);for(const B of C)this.metadata.addTag(c,j,B);break}case f.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(w.size);else{const T=Buffer.alloc(w.size);await this.tokenizer.readBuffer(T),S=i.findZero(T,0,T.length);const C=T.toString("utf8",0,S),B=Buffer.from(T.slice(S+1));this.metadata.addTag(c,j,{description:C,data:B})}break;case f.DataType.external_info:d(`Ignore external info ${j}`),await this.tokenizer.ignore(w.size);break;case f.DataType.reserved:d(`Ignore external info ${j}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${j}"`),await this.tokenizer.ignore(w.size);break}}}async parseDescriptorExpansion(g){return await this.tokenizer.ignore(g),this.parseHeader()}async parseHeader(){const g=await this.tokenizer.readToken(f.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",g.bitsPerSample),this.metadata.setFormat("sampleRate",g.sampleRate),this.metadata.setFormat("numberOfChannels",g.channel),this.metadata.setFormat("duration",ci.calculateDuration(g)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=u,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.hasID3v1Header=r.ID3v1Parser=r.Genres=void 0;const s=requireBrowser$3(),o=requireLib$2(),i=requireUtil$1(),l=requireBasicParser(),f=requireAPEv2Parser(),d=(0,s.default)("music-metadata:parser:ID3v1");r.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const c={len:128,get:(g,h)=>{const m=new y(3).get(g,h);return m==="TAG"?{header:m,title:new y(30).get(g,h+3),artist:new y(30).get(g,h+33),album:new y(30).get(g,h+63),year:new y(4).get(g,h+93),comment:new y(28).get(g,h+97),zeroByte:o.UINT8.get(g,h+127),track:o.UINT8.get(g,h+126),genre:o.UINT8.get(g,h+127)}:null}};class y extends o.StringType{constructor(h){super(h,"binary")}get(h,m){let E=super.get(h,m);return E=i.trimRightNull(E),E=E.trim(),E.length>0?E:void 0}}class u extends l.BasicParser{static getGenre(h){if(h<r.Genres.length)return r.Genres[h]}async parse(){if(!this.tokenizer.fileInfo.size){d("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const E=new f.APEv2Parser;E.init(this.metadata,this.tokenizer,this.options),await E.parseTags(this.options.apeHeader.footer)}const h=this.tokenizer.fileInfo.size-c.len;if(this.tokenizer.position>h){d("Already consumed the last 128 bytes");return}const m=await this.tokenizer.readToken(c,h);if(m){d("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-c.len);for(const w of["title","artist","album","comment","track","year"])m[w]&&m[w]!==""&&this.addTag(w,m[w]);const E=u.getGenre(m.genre);E&&this.addTag("genre",E)}else d("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-c.len)}addTag(h,m){this.metadata.addTag("ID3v1",h,m)}}r.ID3v1Parser=u;async function x(g){if(g.fileSize>=128){const h=Buffer.alloc(3);return await g.randomRead(h,0,h.length,g.fileSize-128),h.toString("binary")==="TAG"}return!1}r.hasID3v1Header=x})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const r=requireBrowser$3(),s=requireLib$2(),o=requireUtil$1(),i=requireID3v2Token(),l=requireID3v1Parser(),f=(0,r.default)("music-metadata:id3v2:frame-parser"),d="latin1";function c(x){const g=[];let h,m="";for(const E of x)if(typeof h=="string")if(E==="("&&h==="")m+="(",h=void 0;else if(E===")"){m!==""&&(g.push(m),m="");const w=y(h);w&&g.push(w),h=void 0}else h+=E;else E==="("?h="":m+=E;return m&&(g.length===0&&m.match(/^\d*$/)&&(m=l.Genres[m]),g.push(m)),g}FrameParser.parseGenre=c;function y(x){if(x==="RX")return"Remix";if(x==="CR")return"Cover";if(x.match(/^\d*$/))return l.Genres[x]}let u=class Rr{constructor(g,h){this.major=g,this.warningCollector=h}readData(g,h,m){if(g.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${h}`);return}const{encoding:E,bom:w}=i.TextEncodingToken.get(g,0),S=g.length;let j=0,T=[];const C=Rr.getNullTerminatorLength(E);let B;const L={};switch(f(`Parsing tag type=${h}, encoding=${E}, bom=${w}`),h!=="TXXX"&&h[0]==="T"?"T*":h){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let _;try{_=o.decodeString(g.slice(1),E).replace(/\x00+$/,"")}catch(le){this.warningCollector.addWarning(`id3v2.${this.major} type=${h} header has invalid string value: ${le.message}`)}switch(h){case"TMCL":case"TIPL":case"IPLS":T=this.splitValue(h,_),T=Rr.functionList(T);break;case"TRK":case"TRCK":case"TPOS":T=_;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":T=this.splitValue(h,_);break;case"TCO":case"TCON":T=this.splitValue(h,_).map(le=>c(le)).reduce((le,W)=>le.concat(W),[]);break;case"PCS":case"PCST":T=this.major>=4?this.splitValue(h,_):[_],T=Array.isArray(T)&&T[0]===""?1:0;break;default:T=this.major>=4?this.splitValue(h,_):[_]}break;case"TXXX":T=Rr.readIdentifierAndData(g,j+1,S,E),T={description:T.id,text:this.splitValue(h,o.decodeString(T.data,E).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(m){const le={};switch(j+=1,this.major){case 2:le.format=o.decodeString(g.slice(j,j+3),"latin1"),j+=3;break;case 3:case 4:B=o.findZero(g,j,S,d),le.format=o.decodeString(g.slice(j,B),d),j=B+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}le.format=Rr.fixPictureMimeType(le.format),le.type=i.AttachedPictureType[g[j]],j+=1,B=o.findZero(g,j,S,E),le.description=o.decodeString(g.slice(j,B),E),j=B+C,le.data=Buffer.from(g.slice(j,S)),T=le}break;case"CNT":case"PCNT":T=s.UINT32_BE.get(g,0);break;case"SYLT":for(j+=7,T=[];j<S;){const le=g.slice(j,j=o.findZero(g,j,S,E));j+=5,T.push(o.decodeString(le,E))}break;case"ULT":case"USLT":case"COM":case"COMM":j+=1,L.language=o.decodeString(g.slice(j,j+3),d),j+=3,B=o.findZero(g,j,S,E),L.description=o.decodeString(g.slice(j,B),E),j=B+C,L.text=o.decodeString(g.slice(j,S),E).replace(/\x00+$/,""),T=[L];break;case"UFID":T=Rr.readIdentifierAndData(g,j,S,d),T={owner_identifier:T.id,identifier:T.data};break;case"PRIV":T=Rr.readIdentifierAndData(g,j,S,d),T={owner_identifier:T.id,data:T.data};break;case"POPM":B=o.findZero(g,j,S,d);const R=o.decodeString(g.slice(j,B),d);j=B+1;const P=S-j;T={email:R,rating:s.UINT8.get(g,j),counter:P>=5?s.UINT32_BE.get(g,j+1):void 0};break;case"GEOB":{B=o.findZero(g,j+1,S,E);const le=o.decodeString(g.slice(j+1,B),d);j=B+1,B=o.findZero(g,j,S-j,E);const W=o.decodeString(g.slice(j,B),d);j=B+1,B=o.findZero(g,j,S-j,E);const V=o.decodeString(g.slice(j,B),d);T={type:le,filename:W,description:V,data:g.slice(j+1,S)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":T=o.decodeString(g.slice(j,B),d);break;case"WXXX":{B=o.findZero(g,j+1,S,E);const le=o.decodeString(g.slice(j+1,B),E);j=B+(E==="utf16le"?2:1),T={description:le,url:o.decodeString(g.slice(j,S),d)};break}case"WFD":case"WFED":T=o.decodeString(g.slice(j+1,o.findZero(g,j+1,S,E)),E);break;case"MCDI":{T=g.slice(0,S);break}default:f("Warning: unsupported id3v2-tag-type: "+h);break}return T}static fixPictureMimeType(g){switch(g=g.toLocaleLowerCase(),g){case"jpg":return"image/jpeg";case"png":return"image/png"}return g}static functionList(g){const h={};for(let m=0;m+1<g.length;m+=2){const E=g[m+1].split(",");h[g[m]]=h.hasOwnProperty(g[m])?h[g[m]].concat(E):E}return h}splitValue(g,h){let m;return this.major<4?(m=h.split(/\x00/g),m.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${g} uses non standard null-separator.`):m=h.split(/\//g)):m=h.split(/\x00/g),Rr.trimArray(m)}static trimArray(g){return g.map(h=>h.replace(/\x00+$/,"").trim())}static readIdentifierAndData(g,h,m,E){const w=o.findZero(g,h,m,E),S=o.decodeString(g.slice(h,w),E);return h=w+Rr.getNullTerminatorLength(E),{id:S,data:g.slice(h,m)}}static getNullTerminatorLength(g){return g==="utf16le"?2:1}};return FrameParser.FrameParser=u,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const r=requireLib$2(),s=requireUtil$1(),o=requireFrameParser(),i=requireID3v2Token();let l=class Vr{static removeUnsyncBytes(d){let c=0,y=0;for(;c<d.length-1;)c!==y&&(d[y]=d[c]),c+=d[c]===255&&d[c+1]===0?2:1,y++;return c<d.length&&(d[y++]=d[c]),d.slice(0,y)}static getFrameHeaderLength(d){switch(d){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(d){return{status:{tag_alter_preservation:s.getBit(d,0,6),file_alter_preservation:s.getBit(d,0,5),read_only:s.getBit(d,0,4)},format:{grouping_identity:s.getBit(d,1,7),compression:s.getBit(d,1,3),encryption:s.getBit(d,1,2),unsynchronisation:s.getBit(d,1,1),data_length_indicator:s.getBit(d,1,0)}}}static readFrameData(d,c,y,u,x){const g=new o.FrameParser(y,x);switch(y){case 2:return g.readData(d,c.id,u);case 3:case 4:return c.flags.format.unsynchronisation&&(d=Vr.removeUnsyncBytes(d)),c.flags.format.data_length_indicator&&(d=d.slice(4,d.length)),g.readData(d,c.id,u);default:throw new Error("Unexpected majorVer: "+y)}}static makeDescriptionTagName(d,c){return d+(c?":"+c:"")}async parse(d,c,y){this.tokenizer=c,this.metadata=d,this.options=y;const u=await this.tokenizer.readToken(i.ID3v2Header);if(u.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=u,this.headerType="ID3v2."+u.version.major,u.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(u.size)}async parseExtendedHeader(){const d=await this.tokenizer.readToken(i.ExtendedHeader),c=d.size-i.ExtendedHeader.len;return c>0?this.parseExtendedHeaderData(c,d.size):this.parseId3Data(this.id3Header.size-d.size)}async parseExtendedHeaderData(d,c){return await this.tokenizer.ignore(d),this.parseId3Data(this.id3Header.size-c)}async parseId3Data(d){const c=await this.tokenizer.readToken(new r.Uint8ArrayType(d));for(const y of this.parseMetadata(c))if(y.id==="TXXX"){if(y.value)for(const u of y.value.text)this.addTag(Vr.makeDescriptionTagName(y.id,y.value.description),u)}else if(y.id==="COM")for(const u of y.value)this.addTag(Vr.makeDescriptionTagName(y.id,u.description),u.text);else if(y.id==="COMM")for(const u of y.value)this.addTag(Vr.makeDescriptionTagName(y.id,u.description),u);else if(Array.isArray(y.value))for(const u of y.value)this.addTag(y.id,u);else this.addTag(y.id,y.value)}addTag(d,c){this.metadata.addTag(this.headerType,d,c)}parseMetadata(d){let c=0;const y=[];for(;c!==d.length;){const u=Vr.getFrameHeaderLength(this.id3Header.version.major);if(c+u>d.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const x=d.slice(c,c+=u),g=this.readFrameHeader(x,this.id3Header.version.major),h=d.slice(c,c+=g.length),m=Vr.readFrameData(h,g,this.id3Header.version.major,!this.options.skipCovers,this.metadata);m&&y.push({id:g.id,value:m})}return y}readFrameHeader(d,c){let y;switch(c){case 2:y={id:Buffer.from(d.slice(0,3)).toString("ascii"),length:r.UINT24_BE.get(d,3)},y.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${y.id}`);break;case 3:case 4:y={id:Buffer.from(d.slice(0,4)).toString("ascii"),length:(c===4?i.UINT32SYNCSAFE:r.UINT32_BE).get(d,4),flags:Vr.readFrameFlags(d.slice(8,10))},y.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${y.id}`);break;default:throw new Error("Unexpected majorVer: "+c)}return y}};return ID3v2Parser.ID3v2Parser=l,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const r=requireLib$2(),s=requireFourCC();class o{constructor(l,f){this.isAifc=f;const d=f?22:18;if(l.chunkSize<d)throw new Error(`COMMON CHUNK size should always be at least ${d}`);this.len=l.chunkSize}get(l,f){const d=l.readUInt16BE(f+8)-16398,c=l.readUInt16BE(f+8+2),y={numChannels:l.readUInt16BE(f),numSampleFrames:l.readUInt32BE(f+2),sampleSize:l.readUInt16BE(f+6),sampleRate:d<0?c>>Math.abs(d):c<<d};if(this.isAifc){if(y.compressionType=s.FourCcToken.get(l,f+18),this.len>22){const u=l.readInt8(f+22);if(u>0){const x=(u+1)%2;if(23+u+x===this.len)y.compressionName=new r.StringType(u,"binary").get(l,f+23);else throw new Error("Illegal pstring length")}else y.compressionName=void 0}}else y.compressionName="PCM";return y}}return AiffToken.Common=o,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const r=requireLib$2(),s=requireFourCC();return iff.Header={len:8,get:(o,i)=>({chunkID:s.FourCcToken.get(o,i),chunkSize:Number(BigInt(r.UINT32_BE.get(o,i+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireCore$2(),i=requireID3v2Parser(),l=requireFourCC(),f=requireBasicParser(),d=requireAiffToken(),c=requireIff(),y=(0,s.default)("music-metadata:parser:aiff"),u={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class x extends f.BasicParser{async parse(){if((await this.tokenizer.readToken(c.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const m=await this.tokenizer.readToken(l.FourCcToken);switch(m){case"AIFF":this.metadata.setFormat("container",m),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+m)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=c.Header.len;){y("Reading AIFF chunk at offset="+this.tokenizer.position);const E=await this.tokenizer.readToken(c.Header),w=2*Math.round(E.chunkSize/2),S=await this.readData(E);await this.tokenizer.ignore(w-S)}}catch(E){if(E instanceof o.EndOfStreamError)y("End-of-stream");else throw E}}async readData(h){var m;switch(h.chunkID){case"COMM":const E=await this.tokenizer.readToken(new d.Common(h,this.isCompressed));return this.metadata.setFormat("bitsPerSample",E.sampleSize),this.metadata.setFormat("sampleRate",E.sampleRate),this.metadata.setFormat("numberOfChannels",E.numChannels),this.metadata.setFormat("numberOfSamples",E.numSampleFrames),this.metadata.setFormat("duration",E.numSampleFrames/E.sampleRate),this.metadata.setFormat("codec",(m=E.compressionName)!==null&&m!==void 0?m:u[E.compressionType]),h.chunkSize;case"ID3 ":const w=await this.tokenizer.readToken(new r.Uint8ArrayType(h.chunkSize)),S=o.fromBuffer(w);return await new i.ID3v2Parser().parse(this.metadata,S,this.options),h.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*h.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(h);default:return y(`Ignore chunk id=${h.chunkID}, size=${h.chunkSize}`),0}}async readTextChunk(h){return(await this.tokenizer.readToken(new r.StringType(h.chunkSize,"ascii"))).split("\0").map(E=>E.trim()).filter(E=>E&&E.length>0).forEach(E=>{this.metadata.addTag("AIFF",h.chunkID,E.trim())}),h.chunkSize}}return AiffParser.AIFFParser=x,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let r=class jr{static fromBin(o,i=0){return new jr(this.decode(o,i))}static decode(o,i=0){return(o.readUInt32LE(i).toString(16)+"-"+o.readUInt16LE(i+4).toString(16)+"-"+o.readUInt16LE(i+6).toString(16)+"-"+o.readUInt16BE(i+8).toString(16)+"-"+o.slice(i+10,i+16).toString("hex")).toUpperCase()}static decodeMediaType(o){switch(o.str){case jr.AudioMedia.str:return"audio";case jr.VideoMedia.str:return"video";case jr.CommandMedia.str:return"command";case jr.Degradable_JPEG_Media.str:return"degradable-jpeg";case jr.FileTransferMedia.str:return"file-transfer";case jr.BinaryMedia.str:return"binary"}}static encode(o){const i=Buffer.alloc(16);return i.writeUInt32LE(parseInt(o.slice(0,8),16),0),i.writeUInt16LE(parseInt(o.slice(9,13),16),4),i.writeUInt16LE(parseInt(o.slice(14,18),16),6),Buffer.from(o.slice(19,23),"hex").copy(i,8),Buffer.from(o.slice(24),"hex").copy(i,10),i}constructor(o){this.str=o}equals(o){return this.str===o.str}toBin(){return jr.encode(this.str)}};return r.HeaderObject=new r("75B22630-668E-11CF-A6D9-00AA0062CE6C"),r.DataObject=new r("75B22636-668E-11CF-A6D9-00AA0062CE6C"),r.SimpleIndexObject=new r("33000890-E5B1-11CF-89F4-00A0C90349CB"),r.IndexObject=new r("D6E229D3-35DA-11D1-9034-00A0C90349BE"),r.MediaObjectIndexObject=new r("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),r.TimecodeIndexObject=new r("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),r.FilePropertiesObject=new r("8CABDCA1-A947-11CF-8EE4-00C00C205365"),r.StreamPropertiesObject=new r("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),r.HeaderExtensionObject=new r("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),r.CodecListObject=new r("86D15240-311D-11D0-A3A4-00A0C90348F6"),r.ScriptCommandObject=new r("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),r.MarkerObject=new r("F487CD01-A951-11CF-8EE6-00C00C205365"),r.BitrateMutualExclusionObject=new r("D6E229DC-35DA-11D1-9034-00A0C90349BE"),r.ErrorCorrectionObject=new r("75B22635-668E-11CF-A6D9-00AA0062CE6C"),r.ContentDescriptionObject=new r("75B22633-668E-11CF-A6D9-00AA0062CE6C"),r.ExtendedContentDescriptionObject=new r("D2D0A440-E307-11D2-97F0-00A0C95EA850"),r.ContentBrandingObject=new r("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),r.StreamBitratePropertiesObject=new r("7BF875CE-468D-11D1-8D82-006097C9A2B2"),r.ContentEncryptionObject=new r("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),r.ExtendedContentEncryptionObject=new r("298AE614-2622-4C17-B935-DAE07EE9289C"),r.DigitalSignatureObject=new r("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),r.PaddingObject=new r("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),r.ExtendedStreamPropertiesObject=new r("14E6A5CB-C672-4332-8399-A96952065B5A"),r.AdvancedMutualExclusionObject=new r("A08649CF-4775-4670-8A16-6E35357566CD"),r.GroupMutualExclusionObject=new r("D1465A40-5A79-4338-B71B-E36B8FD6C249"),r.StreamPrioritizationObject=new r("D4FED15B-88D3-454F-81F0-ED5C45999E24"),r.BandwidthSharingObject=new r("A69609E6-517B-11D2-B6AF-00C04FD908E9"),r.LanguageListObject=new r("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),r.MetadataObject=new r("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),r.MetadataLibraryObject=new r("44231C94-9498-49D1-A141-1D134E457054"),r.IndexParametersObject=new r("D6E229DF-35DA-11D1-9034-00A0C90349BE"),r.MediaObjectIndexParametersObject=new r("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),r.TimecodeIndexParametersObject=new r("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),r.CompatibilityObject=new r("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),r.AdvancedContentEncryptionObject=new r("43058533-6981-49E6-9B74-AD12CB86D58C"),r.AudioMedia=new r("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),r.VideoMedia=new r("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),r.CommandMedia=new r("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),r.JFIF_Media=new r("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),r.Degradable_JPEG_Media=new r("35907DE0-E415-11CF-A917-00805F5C442B"),r.FileTransferMedia=new r("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),r.BinaryMedia=new r("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),r.ASF_Index_Placeholder_Object=new r("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=r,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const r=requireLib$2(),s=requireUtil$1();let o=class Za{static getParserForAttr(l){return Za.attributeParsers[l]}static parseUnicodeAttr(l){return s.stripNulls(s.decodeString(l,"utf16le"))}static parseByteArrayAttr(l){return Buffer.from(l)}static parseBoolAttr(l,f=0){return Za.parseWordAttr(l,f)===1}static parseDWordAttr(l,f=0){return l.readUInt32LE(f)}static parseQWordAttr(l,f=0){return r.UINT64_LE.get(l,f)}static parseWordAttr(l,f=0){return l.readUInt16LE(f)}};return o.attributeParsers=[o.parseUnicodeAttr,o.parseByteArrayAttr,o.parseBoolAttr,o.parseDWordAttr,o.parseQWordAttr,o.parseWordAttr,o.parseByteArrayAttr],AsfUtil.AsfUtil=o,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WmPictureToken=r.MetadataLibraryObjectState=r.MetadataObjectState=r.ExtendedStreamPropertiesObjectState=r.ExtendedContentDescriptionObjectState=r.ContentDescriptionObjectState=r.readCodecEntries=r.HeaderExtensionObject=r.StreamPropertiesObject=r.FilePropertiesObject=r.IgnoreObjectState=r.State=r.HeaderObjectToken=r.TopLevelHeaderObjectToken=r.DataType=void 0;const s=requireUtil$1(),o=requireLib$2(),i=requireGUID(),l=requireAsfUtil(),f=requireID3v2Token();(function(_){_[_.UnicodeString=0]="UnicodeString",_[_.ByteArray=1]="ByteArray",_[_.Bool=2]="Bool",_[_.DWord=3]="DWord",_[_.QWord=4]="QWord",_[_.Word=5]="Word"})(r.DataType||(r.DataType={})),r.TopLevelHeaderObjectToken={len:30,get:(_,R)=>({objectId:i.default.fromBin(new o.BufferType(16).get(_,R)),objectSize:Number(o.UINT64_LE.get(_,R+16)),numberOfHeaderObjects:o.UINT32_LE.get(_,R+24)})},r.HeaderObjectToken={len:24,get:(_,R)=>({objectId:i.default.fromBin(new o.BufferType(16).get(_,R)),objectSize:Number(o.UINT64_LE.get(_,R+16))})};class d{constructor(R){this.len=Number(R.objectSize)-r.HeaderObjectToken.len}postProcessTag(R,P,le,W){if(P==="WM/Picture")R.push({id:P,value:L.fromBuffer(W)});else{const V=l.AsfUtil.getParserForAttr(le);if(!V)throw new Error("unexpected value headerType: "+le);R.push({id:P,value:V(W)})}}}r.State=d;class c extends d{constructor(R){super(R)}get(R,P){return null}}r.IgnoreObjectState=c;class y extends d{constructor(R){super(R)}get(R,P){return{fileId:i.default.fromBin(R,P),fileSize:o.UINT64_LE.get(R,P+16),creationDate:o.UINT64_LE.get(R,P+24),dataPacketsCount:o.UINT64_LE.get(R,P+32),playDuration:o.UINT64_LE.get(R,P+40),sendDuration:o.UINT64_LE.get(R,P+48),preroll:o.UINT64_LE.get(R,P+56),flags:{broadcast:s.getBit(R,P+64,24),seekable:s.getBit(R,P+64,25)},minimumDataPacketSize:o.UINT32_LE.get(R,P+68),maximumDataPacketSize:o.UINT32_LE.get(R,P+72),maximumBitrate:o.UINT32_LE.get(R,P+76)}}}y.guid=i.default.FilePropertiesObject,r.FilePropertiesObject=y;class u extends d{constructor(R){super(R)}get(R,P){return{streamType:i.default.decodeMediaType(i.default.fromBin(R,P)),errorCorrectionType:i.default.fromBin(R,P+8)}}}u.guid=i.default.StreamPropertiesObject,r.StreamPropertiesObject=u;class x{constructor(){this.len=22}get(R,P){return{reserved1:i.default.fromBin(R,P),reserved2:R.readUInt16LE(P+16),extensionDataSize:R.readUInt32LE(P+18)}}}x.guid=i.default.HeaderExtensionObject,r.HeaderExtensionObject=x;const g={len:20,get:(_,R)=>({entryCount:_.readUInt16LE(R+16)})};async function h(_){const R=await _.readNumber(o.UINT16_LE);return(await _.readToken(new o.StringType(R*2,"utf16le"))).replace("\0","")}async function m(_){const R=await _.readToken(g),P=[];for(let le=0;le<R.entryCount;++le)P.push(await w(_));return P}r.readCodecEntries=m;async function E(_){const R=await _.readNumber(o.UINT16_LE),P=Buffer.alloc(R);return await _.readBuffer(P),P}async function w(_){const R=await _.readNumber(o.UINT16_LE);return{type:{videoCodec:(R&1)===1,audioCodec:(R&2)===2},codecName:await h(_),description:await h(_),information:await E(_)}}class S extends d{constructor(R){super(R)}get(R,P){const le=[];let W=P+10;for(let V=0;V<S.contentDescTags.length;++V){const se=R.readUInt16LE(P+V*2);if(se>0){const Q=S.contentDescTags[V],J=W+se;le.push({id:Q,value:l.AsfUtil.parseUnicodeAttr(R.slice(W,J))}),W=J}}return le}}S.guid=i.default.ContentDescriptionObject,S.contentDescTags=["Title","Author","Copyright","Description","Rating"],r.ContentDescriptionObjectState=S;class j extends d{constructor(R){super(R)}get(R,P){const le=[],W=R.readUInt16LE(P);let V=P+2;for(let se=0;se<W;se+=1){const Q=R.readUInt16LE(V);V+=2;const J=l.AsfUtil.parseUnicodeAttr(R.slice(V,V+Q));V+=Q;const ge=R.readUInt16LE(V);V+=2;const we=R.readUInt16LE(V);V+=2;const Pe=R.slice(V,V+we);V+=we,this.postProcessTag(le,J,ge,Pe)}return le}}j.guid=i.default.ExtendedContentDescriptionObject,r.ExtendedContentDescriptionObjectState=j;class T extends d{constructor(R){super(R)}get(R,P){return{startTime:o.UINT64_LE.get(R,P),endTime:o.UINT64_LE.get(R,P+8),dataBitrate:R.readInt32LE(P+12),bufferSize:R.readInt32LE(P+16),initialBufferFullness:R.readInt32LE(P+20),alternateDataBitrate:R.readInt32LE(P+24),alternateBufferSize:R.readInt32LE(P+28),alternateInitialBufferFullness:R.readInt32LE(P+32),maximumObjectSize:R.readInt32LE(P+36),flags:{reliableFlag:s.getBit(R,P+40,0),seekableFlag:s.getBit(R,P+40,1),resendLiveCleanpointsFlag:s.getBit(R,P+40,2)},streamNumber:R.readInt16LE(P+42),streamLanguageId:R.readInt16LE(P+44),averageTimePerFrame:R.readInt32LE(P+52),streamNameCount:R.readInt32LE(P+54),payloadExtensionSystems:R.readInt32LE(P+56),streamNames:[],streamPropertiesObject:null}}}T.guid=i.default.ExtendedStreamPropertiesObject,r.ExtendedStreamPropertiesObjectState=T;class C extends d{constructor(R){super(R)}get(R,P){const le=[],W=Buffer.from(R),V=W.readUInt16LE(P);let se=P+2;for(let Q=0;Q<V;Q+=1){se+=4;const J=W.readUInt16LE(se);se+=2;const ge=W.readUInt16LE(se);se+=2;const we=W.readUInt32LE(se);se+=4;const Pe=l.AsfUtil.parseUnicodeAttr(W.slice(se,se+J));se+=J;const q=W.slice(se,se+we);se+=we,this.postProcessTag(le,Pe,ge,q)}return le}}C.guid=i.default.MetadataObject,r.MetadataObjectState=C;class B extends C{constructor(R){super(R)}}B.guid=i.default.MetadataLibraryObject,r.MetadataLibraryObjectState=B;class L{static fromBase64(R){return this.fromBuffer(Buffer.from(R,"base64"))}static fromBuffer(R){return new L(R.length).get(R,0)}constructor(R){this.len=R}get(R,P){const le=R.readUInt8(P++),W=R.readInt32LE(P);let V=5;for(;R.readUInt16BE(V)!==0;)V+=2;const se=R.slice(5,V).toString("utf16le");for(;R.readUInt16BE(V)!==0;)V+=2;const Q=R.slice(5,V).toString("utf16le");return{type:f.AttachedPictureType[le],format:se,description:Q,size:W,data:R.slice(V+4)}}}r.WmPictureToken=L})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const r=requireBrowser$3(),s=requireType(),o=requireGUID(),i=requireAsfObject(),l=requireBasicParser(),f=(0,r.default)("music-metadata:parser:ASF"),d="asf";let c=class extends l.BasicParser{async parse(){const u=await this.tokenizer.readToken(i.TopLevelHeaderObjectToken);if(!u.objectId.equals(o.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+u.objectId.str);try{await this.parseObjectHeader(u.numberOfHeaderObjects)}catch(x){f("Error while parsing ASF: %s",x)}}async parseObjectHeader(u){let x;do{const g=await this.tokenizer.readToken(i.HeaderObjectToken);switch(f("header GUID=%s",g.objectId.str),g.objectId.str){case i.FilePropertiesObject.guid.str:const h=await this.tokenizer.readToken(new i.FilePropertiesObject(g));this.metadata.setFormat("duration",Number(h.playDuration/BigInt(1e3))/1e4-Number(h.preroll)/1e3),this.metadata.setFormat("bitrate",h.maximumBitrate);break;case i.StreamPropertiesObject.guid.str:const m=await this.tokenizer.readToken(new i.StreamPropertiesObject(g));this.metadata.setFormat("container","ASF/"+m.streamType);break;case i.HeaderExtensionObject.guid.str:const E=await this.tokenizer.readToken(new i.HeaderExtensionObject);await this.parseExtensionObject(E.extensionDataSize);break;case i.ContentDescriptionObjectState.guid.str:x=await this.tokenizer.readToken(new i.ContentDescriptionObjectState(g)),this.addTags(x);break;case i.ExtendedContentDescriptionObjectState.guid.str:x=await this.tokenizer.readToken(new i.ExtendedContentDescriptionObjectState(g)),this.addTags(x);break;case o.default.CodecListObject.str:const w=await i.readCodecEntries(this.tokenizer);w.forEach(j=>{this.metadata.addStreamInfo({type:j.type.videoCodec?s.TrackType.video:s.TrackType.audio,codecName:j.codecName})});const S=w.filter(j=>j.type.audioCodec).map(j=>j.codecName).join("/");this.metadata.setFormat("codec",S);break;case o.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(g.objectSize-i.HeaderObjectToken.len);break;case o.default.PaddingObject.str:f("Padding: %s bytes",g.objectSize-i.HeaderObjectToken.len),await this.tokenizer.ignore(g.objectSize-i.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+g.objectId.str),f("Ignore ASF-Object-GUID: %s",g.objectId.str),await this.tokenizer.readToken(new i.IgnoreObjectState(g))}}while(--u)}addTags(u){u.forEach(x=>{this.metadata.addTag(d,x.id,x.value)})}async parseExtensionObject(u){do{const x=await this.tokenizer.readToken(i.HeaderObjectToken),g=x.objectSize-i.HeaderObjectToken.len;switch(x.objectId.str){case i.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new i.ExtendedStreamPropertiesObjectState(x));break;case i.MetadataObjectState.guid.str:const h=await this.tokenizer.readToken(new i.MetadataObjectState(x));this.addTags(h);break;case i.MetadataLibraryObjectState.guid.str:const m=await this.tokenizer.readToken(new i.MetadataLibraryObjectState(x));this.addTags(m);break;case o.default.PaddingObject.str:await this.tokenizer.ignore(g);break;case o.default.CompatibilityObject.str:this.tokenizer.ignore(g);break;case o.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(g);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+x.objectId.str),await this.tokenizer.readToken(new i.IgnoreObjectState(x));break}u-=x.objectSize}while(u>0)}};return AsfParser.AsfParser=c,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const r=requireLib$2(),s=requireID3v2Token();class o{static fromBase64(l){return this.fromBuffer(Buffer.from(l,"base64"))}static fromBuffer(l){return new o(l.length).get(l,0)}constructor(l){this.len=l}get(l,f){const d=s.AttachedPictureType[r.UINT32_BE.get(l,f)],c=r.UINT32_BE.get(l,f+=4),y=l.toString("utf-8",f+=4,f+c),u=r.UINT32_BE.get(l,f+=c),x=l.toString("utf-8",f+=4,f+u),g=r.UINT32_BE.get(l,f+=u),h=r.UINT32_BE.get(l,f+=4),m=r.UINT32_BE.get(l,f+=4),E=r.UINT32_BE.get(l,f+=4),w=r.UINT32_BE.get(l,f+=4),S=Buffer.from(l.slice(f+=4,f+w));return{type:d,format:y,description:x,width:g,height:h,colour_depth:m,indexed_color:E,data:S}}}return Vorbis.VorbisPictureToken=o,Vorbis.CommonHeader={len:7,get:(i,l)=>({packetType:i.readUInt8(l),vorbis:new r.StringType(6,"ascii").get(i,l+1)})},Vorbis.IdentificationHeader={len:23,get:(i,l)=>{const f=new DataView(i.buffer,i.byteOffset);return{version:f.getUint32(l+0,!0),channelMode:f.getUint8(l+4),sampleRate:f.getUint32(l+5,!0),bitrateMax:f.getUint32(l+9,!0),bitrateNominal:f.getUint32(l+13,!0),bitrateMin:f.getUint32(l+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const r=requireCore$2(),s=requireBrowser$3(),o=requireID3v2Token(),i=requireID3v2Parser(),l=requireID3v1Parser(),f=requireBasicParser(),d=(0,s.default)("music-metadata:parser:ID3");let c=class extends f.BasicParser{constructor(){super(...arguments),this.id3parser=new i.ID3v2Parser}static async startsWithID3v2Header(u){return(await u.peekToken(o.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(u){if(u instanceof r.EndOfStreamError)d("End-of-stream");else throw u}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),d("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new l.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(o.ID3v2Header)).fileIdentifier==="ID3")return d("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=c,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const r=requireLib$2();let s=class{constructor(i,l){this.data=i,this.offset=l}readInt32(){const i=r.UINT32_LE.get(this.data,this.offset);return this.offset+=4,i}readStringUtf8(){const i=this.readInt32(),l=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+i);return this.offset+=i,l}parseUserComment(){const i=this.offset,l=this.readStringUtf8(),f=l.indexOf("=");return{key:l.slice(0,f).toUpperCase(),value:l.slice(f+1),len:this.offset-i}}};return VorbisDecoder.VorbisDecoder=s,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireVorbisDecoder(),i=requireVorbis(),l=(0,s.default)("music-metadata:parser:ogg:vorbis1");let f=class{constructor(c,y){this.metadata=c,this.options=y,this.pageSegments=[]}parsePage(c,y){if(c.headerType.firstPage)this.parseFirstPage(c,y);else{if(c.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(y)}if(c.headerType.lastPage||!c.headerType.continued){if(this.pageSegments.length>0){const u=Buffer.concat(this.pageSegments);this.parseFullPage(u)}this.pageSegments=c.headerType.lastPage?[]:[y]}}c.headerType.lastPage&&this.calculateDuration(c)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(c,y){const x=new o.VorbisDecoder(c,y).parseUserComment();return this.addTag(x.key,x.value),x.len}addTag(c,y){if(c==="METADATA_BLOCK_PICTURE"&&typeof y=="string"){if(this.options.skipCovers){l("Ignore picture");return}y=i.VorbisPictureToken.fromBase64(y),l(`Push picture: id=${c}, format=${y.format}`)}else l(`Push tag: id=${c}, value=${y}`);this.metadata.addTag("vorbis",c,y)}calculateDuration(c){this.metadata.format.sampleRate&&c.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",c.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(c,y){this.metadata.setFormat("codec","Vorbis I"),l("Parse first page");const u=i.CommonHeader.get(y,0);if(u.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(u.packetType===1){const x=i.IdentificationHeader.get(y,i.CommonHeader.len);this.metadata.setFormat("sampleRate",x.sampleRate),this.metadata.setFormat("bitrate",x.bitrateNominal),this.metadata.setFormat("numberOfChannels",x.channelMode),l("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",x.sampleRate,x.bitrateNominal,x.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(c){const y=i.CommonHeader.get(c,0);switch(l("Parse full page: type=%s, byteLength=%s",y.packetType,c.byteLength),y.packetType){case 3:return this.parseUserCommentList(c,i.CommonHeader.len)}}parseUserCommentList(c,y){const u=r.UINT32_LE.get(c,y);y+=4,y+=u;let x=r.UINT32_LE.get(c,y);for(y+=4;x-- >0;)y+=this.parseUserComment(c,y)}};return VorbisParser.VorbisParser=f,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireUtil$1(),i=requireVorbis(),l=requireAbstractID3Parser(),f=requireFourCC(),d=requireVorbisParser(),c=requireVorbisDecoder(),y=(0,s.default)("music-metadata:parser:FLAC");var u;(function(h){h[h.STREAMINFO=0]="STREAMINFO",h[h.PADDING=1]="PADDING",h[h.APPLICATION=2]="APPLICATION",h[h.SEEKTABLE=3]="SEEKTABLE",h[h.VORBIS_COMMENT=4]="VORBIS_COMMENT",h[h.CUESHEET=5]="CUESHEET",h[h.PICTURE=6]="PICTURE"})(u||(u={}));let x=class extends l.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(m,E,w){return super.init(m,E,w),this.vorbisParser=new d.VorbisParser(m,w),this}async postId3v2Parse(){if((await this.tokenizer.readToken(f.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let E;do E=await this.tokenizer.readToken(g.BlockHeader),await this.parseDataBlock(E);while(!E.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const w=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*w/this.metadata.format.duration)}}parseDataBlock(m){switch(y(`blockHeader type=${m.type}, length=${m.length}`),m.type){case u.STREAMINFO:return this.parseBlockStreamInfo(m.length);case u.PADDING:this.padding+=m.length;break;case u.APPLICATION:break;case u.SEEKTABLE:break;case u.VORBIS_COMMENT:return this.parseComment(m.length);case u.CUESHEET:break;case u.PICTURE:return this.parsePicture(m.length).then();default:this.metadata.addWarning("Unknown block type: "+m.type)}return this.tokenizer.ignore(m.length).then()}async parseBlockStreamInfo(m){if(m!==g.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const E=await this.tokenizer.readToken(g.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",E.channels),this.metadata.setFormat("bitsPerSample",E.bitsPerSample),this.metadata.setFormat("sampleRate",E.sampleRate),E.totalSamples>0&&this.metadata.setFormat("duration",E.totalSamples/E.sampleRate)}async parseComment(m){const E=await this.tokenizer.readToken(new r.Uint8ArrayType(m)),w=new c.VorbisDecoder(E,0);w.readStringUtf8();const S=w.readInt32();for(let j=0;j<S;j++){const T=w.parseUserComment();this.vorbisParser.addTag(T.key,T.value)}}async parsePicture(m){if(this.options.skipCovers)return this.tokenizer.ignore(m);{const E=await this.tokenizer.readToken(new i.VorbisPictureToken(m));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",E)}}};FlacParser.FlacParser=x;class g{}return g.BlockHeader={len:4,get:(h,m)=>({lastBlock:o.getBit(h,m,7),type:o.getBitAllignedNumber(h,m,1,7),length:r.UINT24_BE.get(h,m+1)})},g.BlockStreamInfo={len:34,get:(h,m)=>({minimumBlockSize:r.UINT16_BE.get(h,m),maximumBlockSize:r.UINT16_BE.get(h,m+2)/1e3,minimumFrameSize:r.UINT24_BE.get(h,m+4),maximumFrameSize:r.UINT24_BE.get(h,m+7),sampleRate:r.UINT24_BE.get(h,m+10)>>4,channels:o.getBitAllignedNumber(h,m+12,4,3)+1,bitsPerSample:o.getBitAllignedNumber(h,m+12,7,5)+1,totalSamples:o.getBitAllignedNumber(h,m+13,4,36),fileMD5:new r.Uint8ArrayType(16).get(h,m+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChapterText=r.StcoAtom=r.StszAtom=r.StscAtom=r.SampleToChunkToken=r.SttsAtom=r.TimeToSampleToken=r.SoundSampleDescriptionV0=r.SoundSampleDescriptionVersion=r.StsdAtom=r.TrackHeaderAtom=r.NameAtom=r.DataAtom=r.MvhdAtom=r.MdhdAtom=r.FixedLengthAtom=r.mhdr=r.tkhd=r.ftyp=r.ExtendedSize=r.Header=void 0;const s=requireLib$2(),o=requireBrowser$3(),i=requireFourCC(),l=(0,o.default)("music-metadata:parser:MP4:atom");r.Header={len:8,get:(_,R)=>{const P=s.UINT32_BE.get(_,R);if(P<0)throw new Error("Invalid atom header length");return{length:BigInt(P),name:new s.StringType(4,"binary").get(_,R+4)}},put:(_,R,P)=>(s.UINT32_BE.put(_,R,Number(P.length)),i.FourCcToken.put(_,R+4,P.name))},r.ExtendedSize=s.UINT64_BE,r.ftyp={len:4,get:(_,R)=>({type:new s.StringType(4,"ascii").get(_,R)})},r.tkhd={len:4,get:(_,R)=>({type:new s.StringType(4,"ascii").get(_,R)})},r.mhdr={len:8,get:(_,R)=>({version:s.UINT8.get(_,R),flags:s.UINT24_BE.get(_,R+1),nextItemID:s.UINT32_BE.get(_,R+4)})};class f{constructor(R,P,le){if(this.len=R,R<P)throw new Error(`Atom ${le} expected to be ${P}, but specifies ${R} bytes long.`);R>P&&l(`Warning: atom ${le} expected to be ${P}, but was actually ${R} bytes long.`)}}r.FixedLengthAtom=f;const d={len:4,get:(_,R)=>{const P=s.UINT32_BE.get(_,R)-2082844800;return new Date(P*1e3)}};class c extends f{constructor(R){super(R,24,"mdhd"),this.len=R}get(R,P){return{version:s.UINT8.get(R,P+0),flags:s.UINT24_BE.get(R,P+1),creationTime:d.get(R,P+4),modificationTime:d.get(R,P+8),timeScale:s.UINT32_BE.get(R,P+12),duration:s.UINT32_BE.get(R,P+16),language:s.UINT16_BE.get(R,P+20),quality:s.UINT16_BE.get(R,P+22)}}}r.MdhdAtom=c;class y extends f{constructor(R){super(R,100,"mvhd"),this.len=R}get(R,P){return{version:s.UINT8.get(R,P),flags:s.UINT24_BE.get(R,P+1),creationTime:d.get(R,P+4),modificationTime:d.get(R,P+8),timeScale:s.UINT32_BE.get(R,P+12),duration:s.UINT32_BE.get(R,P+16),preferredRate:s.UINT32_BE.get(R,P+20),preferredVolume:s.UINT16_BE.get(R,P+24),previewTime:s.UINT32_BE.get(R,P+72),previewDuration:s.UINT32_BE.get(R,P+76),posterTime:s.UINT32_BE.get(R,P+80),selectionTime:s.UINT32_BE.get(R,P+84),selectionDuration:s.UINT32_BE.get(R,P+88),currentTime:s.UINT32_BE.get(R,P+92),nextTrackID:s.UINT32_BE.get(R,P+96)}}}r.MvhdAtom=y;class u{constructor(R){this.len=R}get(R,P){return{type:{set:s.UINT8.get(R,P+0),type:s.UINT24_BE.get(R,P+1)},locale:s.UINT24_BE.get(R,P+4),value:Buffer.from(new s.Uint8ArrayType(this.len-8).get(R,P+8))}}}r.DataAtom=u;class x{constructor(R){this.len=R}get(R,P){return{version:s.UINT8.get(R,P),flags:s.UINT24_BE.get(R,P+1),name:new s.StringType(this.len-4,"utf-8").get(R,P+4)}}}r.NameAtom=x;class g{constructor(R){this.len=R}get(R,P){return{version:s.UINT8.get(R,P),flags:s.UINT24_BE.get(R,P+1),creationTime:d.get(R,P+4),modificationTime:d.get(R,P+8),trackId:s.UINT32_BE.get(R,P+12),duration:s.UINT32_BE.get(R,P+20),layer:s.UINT16_BE.get(R,P+24),alternateGroup:s.UINT16_BE.get(R,P+26),volume:s.UINT16_BE.get(R,P+28)}}}r.TrackHeaderAtom=g;const h={len:8,get:(_,R)=>({version:s.UINT8.get(_,R),flags:s.UINT24_BE.get(_,R+1),numberOfEntries:s.UINT32_BE.get(_,R+4)})};class m{constructor(R){this.len=R}get(R,P){return{dataFormat:i.FourCcToken.get(R,P),dataReferenceIndex:s.UINT16_BE.get(R,P+10),description:new s.Uint8ArrayType(this.len-12).get(R,P+12)}}}class E{constructor(R){this.len=R}get(R,P){const le=h.get(R,P);P+=h.len;const W=[];for(let V=0;V<le.numberOfEntries;++V){const se=s.UINT32_BE.get(R,P);P+=s.UINT32_BE.len,W.push(new m(se).get(R,P)),P+=se}return{header:le,table:W}}}r.StsdAtom=E,r.SoundSampleDescriptionVersion={len:8,get(_,R){return{version:s.INT16_BE.get(_,R),revision:s.INT16_BE.get(_,R+2),vendor:s.INT32_BE.get(_,R+4)}}},r.SoundSampleDescriptionV0={len:12,get(_,R){return{numAudioChannels:s.INT16_BE.get(_,R+0),sampleSize:s.INT16_BE.get(_,R+2),compressionId:s.INT16_BE.get(_,R+4),packetSize:s.INT16_BE.get(_,R+6),sampleRate:s.UINT16_BE.get(_,R+8)+s.UINT16_BE.get(_,R+10)/1e4}}};class w{constructor(R,P){this.len=R,this.token=P}get(R,P){const le=s.INT32_BE.get(R,P+4);return{version:s.INT8.get(R,P+0),flags:s.INT24_BE.get(R,P+1),numberOfEntries:le,entries:L(R,this.token,P+8,this.len-8,le)}}}r.TimeToSampleToken={len:8,get(_,R){return{count:s.INT32_BE.get(_,R+0),duration:s.INT32_BE.get(_,R+4)}}};class S extends w{constructor(R){super(R,r.TimeToSampleToken),this.len=R}}r.SttsAtom=S,r.SampleToChunkToken={len:12,get(_,R){return{firstChunk:s.INT32_BE.get(_,R),samplesPerChunk:s.INT32_BE.get(_,R+4),sampleDescriptionId:s.INT32_BE.get(_,R+8)}}};class j extends w{constructor(R){super(R,r.SampleToChunkToken),this.len=R}}r.StscAtom=j;class T{constructor(R){this.len=R}get(R,P){const le=s.INT32_BE.get(R,P+8);return{version:s.INT8.get(R,P),flags:s.INT24_BE.get(R,P+1),sampleSize:s.INT32_BE.get(R,P+4),numberOfEntries:le,entries:L(R,s.INT32_BE,P+12,this.len-12,le)}}}r.StszAtom=T;class C extends w{constructor(R){super(R,s.INT32_BE),this.len=R}}r.StcoAtom=C;class B{constructor(R){this.len=R}get(R,P){const le=s.INT16_BE.get(R,P+0);return new s.StringType(le,"utf-8").get(R,P+2)}}r.ChapterText=B;function L(_,R,P,le,W){if(l(`remainingLen=${le}, numberOfEntries=${W} * token-len=${R.len}`),le===0)return[];if(le!==W*R.len)throw new Error("mismatch number-of-entries with remaining atom-length");const V=[];for(let se=0;se<W;++se)V.push(R.get(_,P)),P+=R.len;return V}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const r=requireBrowser$3(),s=requireAtomToken(),o=(0,r.default)("music-metadata:parser:MP4:Atom");let i=class Ja{static async readAtom(f,d,c,y){const u=f.position,x=await f.readToken(s.Header);x.length===BigInt(1)&&(x.length=await f.readToken(s.ExtendedSize));const h=new Ja(x,x.length===BigInt(1),c),m=h.getPayloadLength(y);return o(`parse atom name=${h.atomPath}, extended=${h.extended}, offset=${u}, len=${h.header.length}`),await h.readData(f,d,m),h}constructor(f,d,c){this.header=f,this.extended=d,this.parent=c,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(f){return(this.header.length===BigInt(0)?f:Number(this.header.length))-this.getHeaderLength()}async readAtoms(f,d,c){for(;c>0;){const y=await Ja.readAtom(f,d,this,c);this.children.push(y),c-=y.header.length===BigInt(0)?c:Number(y.header.length)}}async readData(f,d,c){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(f,d,this.getPayloadLength(c));case"meta":const u=(await f.peekToken(s.Header)).name==="hdlr"?0:4;return await f.ignore(u),this.readAtoms(f,d,this.getPayloadLength(c)-u);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return d(this,c)}}};return Atom.Atom=i,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const r=requireBrowser$3(),s=requireLib$2(),o=requireBasicParser(),i=requireID3v1Parser(),l=requireType(),f=requireAtom(),d=requireAtomToken(),c=(0,r.default)("music-metadata:parser:MP4"),y="iTunes",u={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function x(h,m,E){return E.indexOf(h)===m}let g=class eo extends o.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async m=>{const E=await this.tokenizer.readToken(new d.MvhdAtom(m));this.metadata.setFormat("creationTime",E.creationTime),this.metadata.setFormat("modificationTime",E.modificationTime)},mdhd:async m=>{const E=await this.tokenizer.readToken(new d.MdhdAtom(m)),w=this.getTrackDescription();w.creationTime=E.creationTime,w.modificationTime=E.modificationTime,w.timeScale=E.timeScale,w.duration=E.duration},chap:async m=>{const E=this.getTrackDescription(),w=[];for(;m>=s.UINT32_BE.len;)w.push(await this.tokenizer.readNumber(s.UINT32_BE)),m-=s.UINT32_BE.len;E.chapterList=w},tkhd:async m=>{const E=await this.tokenizer.readToken(new d.TrackHeaderAtom(m));this.tracks.push(E)},mdat:async m=>{if(this.audioLengthInBytes=m,this.calculateBitRate(),this.options.includeChapters){const E=this.tracks.filter(w=>w.chapterList);if(E.length===1){const w=E[0].chapterList,S=this.tracks.filter(j=>w.indexOf(j.trackId)!==-1);if(S.length===1)return this.parseChapterTrack(S[0],E[0],m)}}await this.tokenizer.ignore(m)},ftyp:async m=>{const E=[];for(;m>0;){const S=await this.tokenizer.readToken(d.ftyp);m-=d.ftyp.len;const j=S.type.replace(/\W/g,"");j.length>0&&E.push(j)}c(`ftyp: ${E.join("/")}`);const w=E.filter(x).join("/");this.metadata.setFormat("container",w)},stsd:async m=>{const E=await this.tokenizer.readToken(new d.StsdAtom(m)),w=this.getTrackDescription();w.soundSampleDescription=E.table.map(S=>this.parseSoundSampleDescription(S))},stsc:async m=>{const E=await this.tokenizer.readToken(new d.StscAtom(m));this.getTrackDescription().sampleToChunkTable=E.entries},stts:async m=>{const E=await this.tokenizer.readToken(new d.SttsAtom(m));this.getTrackDescription().timeToSampleTable=E.entries},stsz:async m=>{const E=await this.tokenizer.readToken(new d.StszAtom(m)),w=this.getTrackDescription();w.sampleSize=E.sampleSize,w.sampleSizeTable=E.entries},stco:async m=>{const E=await this.tokenizer.readToken(new d.StcoAtom(m));this.getTrackDescription().chunkOffsetTable=E.entries},date:async m=>{const E=await this.tokenizer.readToken(new s.StringType(m,"utf-8"));this.addTag("date",E)}}}static read_BE_Integer(m,E){const w=(E?"INT":"UINT")+m.length*8+(m.length>1?"_BE":""),S=s[w];if(!S)throw new Error('Token for integer type not found: "'+w+'"');return Number(S.get(m,0))}async parse(){this.tracks=[];let m=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||m>0;){try{if((await this.tokenizer.peekToken(d.Header)).name==="\0\0\0\0"){const T=`Error at offset=${this.tokenizer.position}: box.id=0`;c(T),this.addWarning(T);break}}catch(j){const T=`Error at offset=${this.tokenizer.position}: ${j.message}`;c(T),this.addWarning(T);break}const S=await f.Atom.readAtom(this.tokenizer,(j,T)=>this.handleAtom(j,T),null,m);m-=S.header.length===BigInt(0)?m:Number(S.header.length)}const E=[];this.tracks.forEach(S=>{const j=[];S.soundSampleDescription.forEach(T=>{const C={},B=u[T.dataFormat];if(B?(j.push(B.format),C.codecName=B.format):C.codecName=`<${T.dataFormat}>`,T.description){const{description:L}=T;L.sampleRate>0&&(C.type=l.TrackType.audio,C.audio={samplingFrequency:L.sampleRate,bitDepth:L.sampleSize,channels:L.numAudioChannels})}this.metadata.addStreamInfo(C)}),j.length>=1&&E.push(j.join("/"))}),E.length>0&&this.metadata.setFormat("codec",E.filter(x).join("+"));const w=this.tracks.filter(S=>S.soundSampleDescription.length>=1&&S.soundSampleDescription[0].description&&S.soundSampleDescription[0].description.numAudioChannels>0);if(w.length>=1){const S=w[0];if(S.timeScale>0){const C=S.duration/S.timeScale;this.metadata.setFormat("duration",C)}const j=S.soundSampleDescription[0];if(j.description&&(this.metadata.setFormat("sampleRate",j.description.sampleRate),this.metadata.setFormat("bitsPerSample",j.description.sampleSize),this.metadata.setFormat("numberOfChannels",j.description.numAudioChannels),S.timeScale===0&&S.timeToSampleTable.length>0)){const B=S.timeToSampleTable.map(L=>L.count*L.duration).reduce((L,_)=>L+_)/j.description.sampleRate;this.metadata.setFormat("duration",B)}const T=u[j.dataFormat];T&&this.metadata.setFormat("lossless",!T.lossy),this.calculateBitRate()}}async handleAtom(m,E){if(m.parent)switch(m.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(m)}if(this.atomParsers[m.header.name])return this.atomParsers[m.header.name](E);c(`No parser for atom path=${m.atomPath}, payload-len=${E}, ignoring atom`),await this.tokenizer.ignore(E)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(m,E){this.metadata.addTag(y,m,E)}addWarning(m){c("Warning: "+m),this.metadata.addWarning(m)}parseMetadataItemData(m){let E=m.header.name;return m.readAtoms(this.tokenizer,async(w,S)=>{const j=w.getPayloadLength(S);switch(w.header.name){case"data":return this.parseValueAtom(E,w);case"name":case"mean":case"rate":const T=await this.tokenizer.readToken(new d.NameAtom(j));E+=":"+T.name;break;default:const C=await this.tokenizer.readToken(new s.BufferType(j));this.addWarning("Unsupported meta-item: "+E+"["+w.header.name+"] => value="+C.toString("hex")+" ascii="+C.toString("ascii"))}},m.getPayloadLength(0))}async parseValueAtom(m,E){const w=await this.tokenizer.readToken(new d.DataAtom(Number(E.header.length)-d.Header.len));if(w.type.set!==0)throw new Error("Unsupported type-set != 0: "+w.type.set);switch(w.type.type){case 0:switch(m){case"trkn":case"disk":const S=s.UINT8.get(w.value,3),j=s.UINT8.get(w.value,5);this.addTag(m,S+"/"+j);break;case"gnre":const T=s.UINT8.get(w.value,1),C=i.Genres[T-1];this.addTag(m,C);break;case"rate":const B=w.value.toString("ascii");this.addTag(m,B);break;default:c("unknown proprietary value type for: "+E.atomPath)}break;case 1:case 18:this.addTag(m,w.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(m,{format:"image/jpeg",data:Buffer.from(w.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(m,{format:"image/png",data:Buffer.from(w.value)});break;case 21:this.addTag(m,eo.read_BE_Integer(w.value,!0));break;case 22:this.addTag(m,eo.read_BE_Integer(w.value,!1));break;case 65:this.addTag(m,w.value.readInt8(0));break;case 66:this.addTag(m,w.value.readInt16BE(0));break;case 67:this.addTag(m,w.value.readInt32BE(0));break;default:this.addWarning(`atom key=${m}, has unknown well-known-type (data-type): ${w.type.type}`)}}parseSoundSampleDescription(m){const E={dataFormat:m.dataFormat,dataReferenceIndex:m.dataReferenceIndex};let w=0;const S=d.SoundSampleDescriptionVersion.get(m.description,w);return w+=d.SoundSampleDescriptionVersion.len,S.version===0||S.version===1?E.description=d.SoundSampleDescriptionV0.get(m.description,w):c(`Warning: sound-sample-description ${S} not implemented`),E}async parseChapterTrack(m,E,w){if(!m.sampleSize&&m.chunkOffsetTable.length!==m.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const S=[];for(let j=0;j<m.chunkOffsetTable.length&&w>0;++j){const C=m.chunkOffsetTable[j]-this.tokenizer.position,B=m.sampleSize>0?m.sampleSize:m.sampleSizeTable[j];if(w-=C+B,w<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(C);const L=await this.tokenizer.readToken(new d.ChapterText(B));c(`Chapter ${j+1}: ${L}`);const _={title:L,sampleOffset:this.findSampleOffset(E,this.tokenizer.position)};c(`Chapter title=${_.title}, offset=${_.sampleOffset}/${this.tracks[0].duration}`),S.push(_)}this.metadata.setFormat("chapters",S),await this.tokenizer.ignore(w)}findSampleOffset(m,E){let w=0;m.timeToSampleTable.forEach(j=>{w+=j.count*j.duration}),c(`Total duration=${w}`);let S=0;for(;S<m.chunkOffsetTable.length&&m.chunkOffsetTable[S]<E;)++S;return this.getChunkDuration(S+1,m)}getChunkDuration(m,E){let w=0,S=E.timeToSampleTable[w].count,j=E.timeToSampleTable[w].duration,T=1,C=this.getSamplesPerChunk(T,E.sampleToChunkTable),B=0;for(;T<m;){const L=Math.min(S,C);B+=L*j,S-=L,C-=L,C===0?(++T,C=this.getSamplesPerChunk(T,E.sampleToChunkTable)):(++w,S=E.timeToSampleTable[w].count,j=E.timeToSampleTable[w].duration)}return B}getSamplesPerChunk(m,E){for(let w=0;w<E.length-1;++w)if(m>=E[w].firstChunk&&m<E[w+1].firstChunk)return E[w].samplesPerChunk;return E[E.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=g,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const r=requireUtil$1();var s;(function(i){i[i.not_set=0]="not_set",i[i.radio=1]="radio",i[i.audiophile=2]="audiophile"})(s||(s={}));var o;return(function(i){i[i.unspecified=0]="unspecified",i[i.engineer=1]="engineer",i[i.user=2]="user",i[i.automatic=3]="automatic",i[i.rms_average=4]="rms_average"})(o||(o={})),ReplayGainDataFormat.ReplayGain={len:2,get:(i,l)=>{const f=r.getBitAllignedNumber(i,l,0,3),d=r.getBitAllignedNumber(i,l,6,1),c=r.getBitAllignedNumber(i,l,7,9)/10;if(f>0)return{type:r.getBitAllignedNumber(i,l,0,3),origin:r.getBitAllignedNumber(i,l,3,3),adjustment:d?-c:c}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const r=requireLib$2(),s=requireUtil$1(),o=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(i,l)=>{const f=r.UINT32_BE.get(i,l+2);return{revision:s.getBitAllignedNumber(i,l,0,4),vbr_method:s.getBitAllignedNumber(i,l,4,4),lowpass_filter:100*r.UINT8.get(i,l+1),track_peak:f===0?void 0:f/Math.pow(2,23),track_gain:o.ReplayGain.get(i,6),album_gain:o.ReplayGain.get(i,8),music_length:r.UINT32_BE.get(i,l+20),music_crc:r.UINT8.get(i,l+24),header_crc:r.UINT16_BE.get(i,l+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.readXingHeader=r.XingHeaderFlags=r.LameEncoderVersion=r.InfoTagHeaderTag=void 0;const s=requireLib$2(),o=requireUtil$1(),i=requireExtendedLameHeader();r.InfoTagHeaderTag=new s.StringType(4,"ascii"),r.LameEncoderVersion=new s.StringType(6,"ascii"),r.XingHeaderFlags={len:4,get:(f,d)=>({frames:o.isBitSet(f,d,31),bytes:o.isBitSet(f,d,30),toc:o.isBitSet(f,d,29),vbrScale:o.isBitSet(f,d,28)})};async function l(f){const d=await f.readToken(r.XingHeaderFlags),c={};if(d.frames&&(c.numFrames=await f.readToken(s.UINT32_BE)),d.bytes&&(c.streamSize=await f.readToken(s.UINT32_BE)),d.toc&&(c.toc=Buffer.alloc(100),await f.readBuffer(c.toc)),d.vbrScale&&(c.vbrScale=await f.readToken(s.UINT32_BE)),await f.peekToken(new s.StringType(4,"ascii"))==="LAME"&&(await f.ignore(4),c.lame={version:await f.readToken(new s.StringType(5,"ascii"))},c.lame.version.match(/\d+.\d+/g))){const g=c.lame.version.match(/\d+.\d+/g)[0].split(".").map(h=>parseInt(h,10));g[0]>=3&&g[1]>=90&&(c.lame.extended=await f.readToken(i.ExtendedLameHeader))}return c}r.readXingHeader=l})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const r=requireLib$2(),s=requireCore$2(),o=requireBrowser$3(),i=requireUtil$1(),l=requireAbstractID3Parser(),f=requireXingTag(),d=(0,o.default)("music-metadata:parser:mpeg"),c=1024,y={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},u=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class x{constructor(w,S){this.versionIndex=i.getBitAllignedNumber(w,S+1,3,2),this.layer=x.LayerDescription[i.getBitAllignedNumber(w,S+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(w,S):this.parseMpegHeader(w,S),this.isProtectedByCRC=!i.isBitSet(w,S+1,7)}calcDuration(w){return w*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return x.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(w,S){this.container="MPEG",this.bitrateIndex=i.getBitAllignedNumber(w,S+2,0,4),this.sampRateFreqIndex=i.getBitAllignedNumber(w,S+2,4,2),this.padding=i.isBitSet(w,S+2,6),this.privateBit=i.isBitSet(w,S+2,7),this.channelModeIndex=i.getBitAllignedNumber(w,S+3,0,2),this.modeExtension=i.getBitAllignedNumber(w,S+3,2,2),this.isCopyrighted=i.isBitSet(w,S+3,4),this.isOriginalMedia=i.isBitSet(w,S+3,5),this.emphasis=i.getBitAllignedNumber(w,S+3,7,2),this.version=x.VersionID[this.versionIndex],this.channelMode=x.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const j=this.calcBitrate();if(!j)throw new Error("Cannot determine bit-rate");if(this.bitrate=j*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(w,S){d("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const j=i.getBitAllignedNumber(w,S+2,0,2);this.codec="AAC",this.codecProfile=y.AudioObjectTypes[j],d(`MPEG-4 audio-codec=${this.codec}`);const T=i.getBitAllignedNumber(w,S+2,2,4);this.samplingRate=y.SamplingFrequencies[T],d(`sampling-rate=${this.samplingRate}`);const C=i.getBitAllignedNumber(w,S+2,7,3);this.mp4ChannelConfig=u[C],d(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=i.getBitAllignedNumber(w,S+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const w=`${Math.floor(this.version)}${this.layer}`;return x.bitrate_index[this.bitrateIndex][w]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:x.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}x.SyncByte1=255,x.SyncByte2=224,x.VersionID=[2.5,null,2,1],x.LayerDescription=[0,3,2,1],x.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],x.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},x.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},x.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const g={len:4,get:(E,w)=>new x(E,w)};function h(E){return"V"+Math.floor((100-E)/10)}let m=class extends l.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(c),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let w=!1;for(;!w;)await this.sync(),w=await this.parseCommonMpegHeader()}catch(w){if(w instanceof s.EndOfStreamError){if(d("End-of-stream"),this.calculateEofDuration){const S=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",S);const j=S/this.metadata.format.sampleRate;d(`Calculate duration at EOF: ${j} sec.`,j),this.metadata.setFormat("duration",j)}}else throw w}}finalize(){const w=this.metadata.format,S=this.metadata.native.hasOwnProperty("ID3v1");if(w.duration&&this.tokenizer.fileInfo.size){const j=this.tokenizer.fileInfo.size-this.mpegOffset-(S?128:0);w.codecProfile&&w.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",j*8/w.duration)}else if(this.tokenizer.fileInfo.size&&w.codecProfile==="CBR"){const j=this.tokenizer.fileInfo.size-this.mpegOffset-(S?128:0),T=Math.round(j/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",T);const C=T/w.sampleRate;d("Calculate CBR duration based on file size: %s",C),this.metadata.setFormat("duration",C)}}async sync(){let w=!1;for(;;){let S=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:c,mayBeLess:!0}),this.syncPeek.len<=163)throw new s.EndOfStreamError;for(;;)if(w&&(this.syncPeek.buf[S]&224)===224){this.buf_frame_header[0]=x.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[S],await this.tokenizer.ignore(S),d(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(d(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(w=!1,S=this.syncPeek.buf.indexOf(x.SyncByte1,S),S===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new s.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++S,w=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let w;try{w=g.get(this.buf_frame_header,0)}catch(S){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+S.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",w.container),this.metadata.setFormat("codec",w.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",w.samplingRate),this.frameCount++,w.version>=2&&w.layer===0?this.parseAdts(w):this.parseAudioFrameHeader(w)}async parseAudioFrameHeader(w){this.metadata.setFormat("numberOfChannels",w.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",w.bitrate),this.frameCount<20*1e4&&d("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,w.layer,w.bitrate,w.samplingRate);const S=w.calcSlotSize();if(S===null)throw new Error("invalid slot_size");const j=w.calcSamplesPerFrame();d(`samples_per_frame=${j}`);const C=j/8*w.bitrate/w.samplingRate+(w.padding?S:0);if(this.frame_size=Math.floor(C),this.audioFrameHeader=w,this.bitrates.push(w.bitrate),this.frameCount===1)return this.offset=g.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=j,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=j,this.calculateEofDuration=!0),this.offset=4,w.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(w){const S=Buffer.alloc(3);await this.tokenizer.readBuffer(S),w.frameLength+=i.getBitAllignedNumber(S,0,0,11),this.totalDataLength+=w.frameLength,this.samplesPerFrame=1024;const j=w.samplingRate/this.samplesPerFrame,C=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*j+.5;if(this.metadata.setFormat("bitrate",C),d(`frame-count=${this.frameCount}, size=${w.frameLength} bytes, bit-rate=${C}`),await this.tokenizer.ignore(w.frameLength>7?w.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",w.codecProfile),w.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",w.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(r.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const w=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new r.Uint8ArrayType(w)),this.offset+=w,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const w=await this.tokenizer.readToken(f.InfoTagHeaderTag);switch(this.offset+=f.InfoTagHeaderTag.len,w){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const j=await this.readXingInfoHeader(),T=h(j.vbrScale);return this.metadata.setFormat("codecProfile",T),null;case"Xtra":break;case"LAME":const C=await this.tokenizer.readToken(f.LameEncoderVersion);if(this.frame_size>=this.offset+f.LameEncoderVersion.len)return this.offset+=f.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+C),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const S=this.frame_size-this.offset;return S<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(S),null}async readXingInfoHeader(){const w=this.tokenizer.position,S=await(0,f.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-w,S.lame&&(this.metadata.setFormat("tool","LAME "+i.stripNulls(S.lame.version)),S.lame.extended&&(this.metadata.setFormat("trackPeakLevel",S.lame.extended.track_peak),S.lame.extended.track_gain&&this.metadata.setFormat("trackGain",S.lame.extended.track_gain.adjustment),S.lame.extended.album_gain&&this.metadata.setFormat("albumGain",S.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",S.lame.extended.music_length/1e3))),S.streamSize){const T=this.audioFrameHeader.calcDuration(S.numFrames);return this.metadata.setFormat("duration",T),d("Get duration from Xing header: %s",this.metadata.format.duration),S}const j=this.frame_size-this.offset;return await this.skipFrameData(j),S}async skipFrameData(w){if(w<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(w),this.countSkipFrameData+=w}areAllSame(w){const S=w[0];return w.every(j=>j===S)}};return MpegParser.MpegParser=m,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireUtil$1(),i=(0,s.default)("music-metadata:parser:musepack:sv8"),l=new r.StringType(2,"binary"),f={len:5,get:(y,u)=>({crc:r.UINT32_LE.get(y,u),streamVersion:r.UINT8.get(y,u+4)})},d={len:2,get:(y,u)=>({sampleFrequency:[44100,48e3,37800,32e3][o.getBitAllignedNumber(y,u,0,3)],maxUsedBands:o.getBitAllignedNumber(y,u,3,5),channelCount:o.getBitAllignedNumber(y,u+1,0,4)+1,msUsed:o.isBitSet(y,u+1,4),audioBlockFrames:o.getBitAllignedNumber(y,u+1,5,3)})};class c{constructor(u){this.tokenizer=u}async readPacketHeader(){const u=await this.tokenizer.readToken(l),x=await this.readVariableSizeField();return{key:u,payloadLength:x.value-2-x.len}}async readStreamHeader(u){const x={};i(`Reading SH at offset=${this.tokenizer.position}`);const g=await this.tokenizer.readToken(f);u-=f.len,Object.assign(x,g),i(`SH.streamVersion = ${g.streamVersion}`);const h=await this.readVariableSizeField();u-=h.len,x.sampleCount=h.value;const m=await this.readVariableSizeField();u-=m.len,x.beginningOfSilence=m.value;const E=await this.tokenizer.readToken(d);return u-=d.len,Object.assign(x,E),await this.tokenizer.ignore(u),x}async readVariableSizeField(u=1,x=0){let g=await this.tokenizer.readNumber(r.UINT8);return(g&128)===0?{len:u,value:x+g}:(g&=127,g+=x,this.readVariableSizeField(u+1,g<<7))}}return StreamVersion8.StreamReader=c,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const r=requireBrowser$3(),s=requireBasicParser(),o=requireAPEv2Parser(),i=requireFourCC(),l=requireStreamVersion8(),f=(0,r.default)("music-metadata:parser:musepack");let d=class extends s.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(i.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const y=new l.StreamReader(this.tokenizer);do{const u=await y.readPacketHeader();switch(f(`packet-header key=${u.key}, payloadLength=${u.payloadLength}`),u.key){case"SH":const x=await y.readStreamHeader(u.payloadLength);this.metadata.setFormat("numberOfSamples",x.sampleCount),this.metadata.setFormat("sampleRate",x.sampleFrequency),this.metadata.setFormat("duration",x.sampleCount/x.sampleFrequency),this.metadata.setFormat("numberOfChannels",x.channelCount);break;case"AP":this.audioLength+=u.payloadLength,await this.tokenizer.ignore(u.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(u.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),o.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${u.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=d,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const r=requireLib$2();let s=class{constructor(i){this.tokenizer=i,this.pos=0,this.dword=void 0}async read(i){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(r.UINT32_LE);let l=this.dword;return this.pos+=i,this.pos<32?(l>>>=32-this.pos,l&(1<<i)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,l&(1<<i)-1):(this.dword=await this.tokenizer.readToken(r.UINT32_LE),this.pos&&(l<<=this.pos,l|=this.dword>>>32-this.pos),l&(1<<i)-1))}async ignore(i){if(this.pos>0){const d=32-this.pos;this.dword=void 0,i-=d,this.pos=0}const l=i%32,f=(i-l)/32;return await this.tokenizer.ignore(f*4),this.read(l)}};return BitReader.BitReader=s,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const r=requireLib$2(),s=requireUtil$1();return StreamVersion7.Header={len:24,get:(o,i)=>{const l={signature:Buffer.from(o).toString("latin1",i,i+3),streamMinorVersion:s.getBitAllignedNumber(o,i+3,0,4),streamMajorVersion:s.getBitAllignedNumber(o,i+3,4,4),frameCount:r.UINT32_LE.get(o,i+4),maxLevel:r.UINT16_LE.get(o,i+8),sampleFrequency:[44100,48e3,37800,32e3][s.getBitAllignedNumber(o,i+10,0,2)],link:s.getBitAllignedNumber(o,i+10,2,2),profile:s.getBitAllignedNumber(o,i+10,4,4),maxBand:s.getBitAllignedNumber(o,i+11,0,6),intensityStereo:s.isBitSet(o,i+11,6),midSideStereo:s.isBitSet(o,i+11,7),titlePeak:r.UINT16_LE.get(o,i+12),titleGain:r.UINT16_LE.get(o,i+14),albumPeak:r.UINT16_LE.get(o,i+16),albumGain:r.UINT16_LE.get(o,i+18),lastFrameLength:r.UINT32_LE.get(o,i+20)>>>20&2047,trueGapless:s.isBitSet(o,i+23,0)};return l.lastFrameLength=l.trueGapless?r.UINT32_LE.get(o,20)>>>20&2047:0,l}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const r=requireBrowser$3(),s=requireBasicParser(),o=requireAPEv2Parser(),i=requireBitReader(),l=requireStreamVersion7(),f=(0,r.default)("music-metadata:parser:musepack");let d=class extends s.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const y=await this.tokenizer.readToken(l.Header);if(y.signature!=="MP+")throw new Error("Unexpected magic number");f(`stream-version=${y.streamMajorVersion}.${y.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",y.sampleFrequency);const u=1152*(y.frameCount-1)+y.lastFrameLength;this.metadata.setFormat("numberOfSamples",u),this.duration=u/y.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new i.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",y.midSideStereo||y.intensityStereo?2:1);const x=await this.bitreader.read(8);return this.metadata.setFormat("codec",(x/100).toFixed(2)),await this.skipAudioData(y.frameCount),f(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),o.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(y){for(;y-- >0;){const x=await this.bitreader.read(20);this.audioLength+=20+x,await this.bitreader.ignore(x)}const u=await this.bitreader.read(11);this.audioLength+=u,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=d,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const r=requireBrowser$3(),s=requireLib$2(),o=requireAbstractID3Parser(),i=requireMpcSv8Parser(),l=requireMpcSv7Parser(),f=(0,r.default)("music-metadata:parser:musepack");class d extends o.AbstractID3Parser{async postId3v2Parse(){const y=await this.tokenizer.peekToken(new s.StringType(3,"binary"));let u;switch(y){case"MP+":{f("Musepack stream-version 7"),u=new l.MpcSv7Parser;break}case"MPC":{f("Musepack stream-version 8"),u=new i.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return u.init(this.metadata,this.tokenizer,this.options),u.parse()}}return musepack.default=d,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const r=requireLib$2();class s{constructor(i){if(this.len=i,i<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(i,l){return{magicSignature:new r.StringType(8,"ascii").get(i,l+0),version:i.readUInt8(l+8),channelCount:i.readUInt8(l+9),preSkip:i.readInt16LE(l+10),inputSampleRate:i.readInt32LE(l+12),outputGain:i.readInt16LE(l+16),channelMapping:i.readUInt8(l+18)}}}return Opus.IdHeader=s,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const r=requireLib$2(),s=requireVorbisParser(),o=requireOpus();let i=class extends s.VorbisParser{constructor(f,d,c){super(f,d),this.tokenizer=c,this.lastPos=-1}parseFirstPage(f,d){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new o.IdHeader(d.length).get(d,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(f){switch(new r.StringType(8,"ascii").get(f,0)){case"OpusTags":this.parseUserCommentList(f,8),this.lastPos=this.tokenizer.position-f.length;break}}calculateDuration(f){if(this.metadata.format.sampleRate&&f.absoluteGranulePosition>=0){const d=f.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",d),this.metadata.setFormat("duration",d/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const c=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*c/this.metadata.format.duration)}}}};return OpusParser.OpusParser=i,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const r=requireLib$2(),s=requireUtil$1();return Speex.Header={len:80,get:(o,i)=>({speex:new r.StringType(8,"ascii").get(o,i+0),version:s.trimRightNull(new r.StringType(20,"ascii").get(o,i+8)),version_id:o.readInt32LE(i+28),header_size:o.readInt32LE(i+32),rate:o.readInt32LE(i+36),mode:o.readInt32LE(i+40),mode_bitstream_version:o.readInt32LE(i+44),nb_channels:o.readInt32LE(i+48),bitrate:o.readInt32LE(i+52),frame_size:o.readInt32LE(i+56),vbr:o.readInt32LE(i+60),frames_per_packet:o.readInt32LE(i+64),extra_headers:o.readInt32LE(i+68),reserved1:o.readInt32LE(i+72),reserved2:o.readInt32LE(i+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const r=requireBrowser$3(),s=requireVorbisParser(),o=requireSpeex(),i=(0,r.default)("music-metadata:parser:ogg:speex");let l=class extends s.VorbisParser{constructor(d,c,y){super(d,c),this.tokenizer=y}parseFirstPage(d,c){i("First Ogg/Speex page");const y=o.Header.get(c,0);this.metadata.setFormat("codec",`Speex ${y.version}`),this.metadata.setFormat("numberOfChannels",y.nb_channels),this.metadata.setFormat("sampleRate",y.rate),y.bitrate!==-1&&this.metadata.setFormat("bitrate",y.bitrate)}};return SpeexParser.SpeexParser=l,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const r=requireLib$2();return Theora.IdentificationHeader={len:42,get:(s,o)=>({id:new r.StringType(7,"ascii").get(s,o),vmaj:s.readUInt8(o+7),vmin:s.readUInt8(o+8),vrev:s.readUInt8(o+9),vmbw:s.readUInt16BE(o+10),vmbh:s.readUInt16BE(o+17),nombr:r.UINT24_BE.get(s,o+37),nqual:s.readUInt8(o+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const r=requireBrowser$3(),s=requireTheora(),o=(0,r.default)("music-metadata:parser:ogg:theora");let i=class{constructor(f,d,c){this.metadata=f,this.tokenizer=c}parsePage(f,d){f.headerType.firstPage&&this.parseFirstPage(f,d)}flush(){o("flush")}calculateDuration(f){o("duration calculation not implemented")}parseFirstPage(f,d){o("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const c=s.IdentificationHeader.get(d,0);this.metadata.setFormat("bitrate",c.nombr)}};return TheoraParser.TheoraParser=i,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const r=requireLib$2(),s=requireCore$2(),o=requireBrowser$3(),i=requireUtil$1(),l=requireFourCC(),f=requireBasicParser(),d=requireVorbisParser(),c=requireOpusParser(),y=requireSpeexParser(),u=requireTheoraParser(),x=(0,o.default)("music-metadata:parser:ogg");class g{static sum(E,w,S){let j=0;for(let T=w;T<w+S;++T)j+=E[T];return j}constructor(E){this.len=E.page_segments}get(E,w){return{totalPageSize:g.sum(E,w,this.len)}}}OggParser.SegmentTable=g;let h=class Ac extends f.BasicParser{async parse(){x("pos=%s, parsePage()",this.tokenizer.position);try{let E;do{if(E=await this.tokenizer.readToken(Ac.Header),E.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=E,this.pageNumber=E.pageSequenceNo,x("page#=%s, Ogg.id=%s",E.pageSequenceNo,E.capturePattern);const w=await this.tokenizer.readToken(new g(E));x("totalPageSize=%s",w.totalPageSize);const S=await this.tokenizer.readToken(new r.Uint8ArrayType(w.totalPageSize));if(x("firstPage=%s, lastPage=%s, continued=%s",E.headerType.firstPage,E.headerType.lastPage,E.headerType.continued),E.headerType.firstPage){const j=new r.StringType(7,"ascii").get(Buffer.from(S),0);switch(j){case"vorbis":x("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new d.VorbisParser(this.metadata,this.options);break;case"OpusHea":x("Set page consumer to Ogg/Opus"),this.pageConsumer=new c.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":x("Set page consumer to Ogg/Speex"),this.pageConsumer=new y.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":x("Set page consumer to Ogg/Theora"),this.pageConsumer=new u.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+j+")")}}this.pageConsumer.parsePage(E,S)}while(!E.headerType.lastPage)}catch(E){if(E instanceof s.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),x("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(E.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw E}}};return h.Header={len:27,get:(m,E)=>({capturePattern:l.FourCcToken.get(m,E),version:r.UINT8.get(m,E+4),headerType:{continued:i.getBit(m,E+5,0),firstPage:i.getBit(m,E+5,1),lastPage:i.getBit(m,E+5,2)},absoluteGranulePosition:Number(r.UINT64_LE.get(m,E+6)),streamSerialNumber:r.UINT32_LE.get(m,E+14),pageSequenceNo:r.UINT32_LE.get(m,E+18),pageChecksum:r.UINT32_LE.get(m,E+22),page_segments:r.UINT8.get(m,E+26)})},OggParser.OggParser=h,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const r=requireLib$2();RiffChunk.Header={len:8,get:(o,i)=>({chunkID:o.toString("binary",i,i+4),chunkSize:r.UINT32_LE.get(o,4)})};class s{constructor(i){this.tagHeader=i,this.len=i.chunkSize,this.len+=this.len&1}get(i,l){return new r.StringType(this.tagHeader.chunkSize,"ascii").get(i,l)}}return RiffChunk.ListInfoTagValue=s,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FactChunk=r.Format=r.WaveFormat=void 0,(function(i){i[i.PCM=1]="PCM",i[i.ADPCM=2]="ADPCM",i[i.IEEE_FLOAT=3]="IEEE_FLOAT",i[i.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",i[i.MPEG_LOAS=5634]="MPEG_LOAS",i[i.RAW_AAC1=255]="RAW_AAC1",i[i.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",i[i.DVM=8192]="DVM",i[i.RAW_SPORT=576]="RAW_SPORT",i[i.ESST_AC3=577]="ESST_AC3",i[i.DRM=9]="DRM",i[i.DTS2=8193]="DTS2",i[i.MPEG=80]="MPEG"})(r.WaveFormat||(r.WaveFormat={}));class s{constructor(l){if(l.chunkSize<16)throw new Error("Invalid chunk size");this.len=l.chunkSize}get(l,f){return{wFormatTag:l.readUInt16LE(f),nChannels:l.readUInt16LE(f+2),nSamplesPerSec:l.readUInt32LE(f+4),nAvgBytesPerSec:l.readUInt32LE(f+8),nBlockAlign:l.readUInt16LE(f+12),wBitsPerSample:l.readUInt16LE(f+14)}}}r.Format=s;class o{constructor(l){if(l.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=l.chunkSize}get(l,f){return{dwSampleLength:l.readUInt32LE(f)}}}r.FactChunk=o})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const r=requireLib$2(),s=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(o,i)=>({description:(0,s.stripNulls)(new r.StringType(256,"ascii").get(o,i)).trim(),originator:(0,s.stripNulls)(new r.StringType(32,"ascii").get(o,i+256)).trim(),originatorReference:(0,s.stripNulls)(new r.StringType(32,"ascii").get(o,i+288)).trim(),originationDate:(0,s.stripNulls)(new r.StringType(10,"ascii").get(o,i+320)).trim(),originationTime:(0,s.stripNulls)(new r.StringType(8,"ascii").get(o,i+330)).trim(),timeReferenceLow:r.UINT32_LE.get(o,i+338),timeReferenceHigh:r.UINT32_LE.get(o,i+342),version:r.UINT16_LE.get(o,i+346),umid:new r.Uint8ArrayType(64).get(o,i+348),loudnessValue:r.UINT16_LE.get(o,i+412),maxTruePeakLevel:r.UINT16_LE.get(o,i+414),maxMomentaryLoudness:r.UINT16_LE.get(o,i+416),maxShortTermLoudness:r.UINT16_LE.get(o,i+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const r=requireCore$2(),s=requireLib$2(),o=requireBrowser$3(),i=requireRiffChunk(),l=requireWaveChunk(),f=requireID3v2Parser(),d=requireUtil$1(),c=requireFourCC(),y=requireBasicParser(),u=requireBwfChunk(),x=(0,o.default)("music-metadata:parser:RIFF");let g=class extends y.BasicParser{async parse(){const m=await this.tokenizer.readToken(i.Header);if(x(`pos=${this.tokenizer.position}, parse: chunkID=${m.chunkID}`),m.chunkID==="RIFF")return this.parseRiffChunk(m.chunkSize).catch(E=>{if(!(E instanceof r.EndOfStreamError))throw E})}async parseRiffChunk(m){const E=await this.tokenizer.readToken(c.FourCcToken);switch(this.metadata.setFormat("container",E),E){case"WAVE":return this.readWaveChunk(m-c.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${E}`)}}async readWaveChunk(m){for(;m>=i.Header.len;){const E=await this.tokenizer.readToken(i.Header);switch(m-=i.Header.len+E.chunkSize,E.chunkSize>m&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=E,x(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${E.chunkID}`),E.chunkID){case"LIST":await this.parseListTag(E);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new l.FactChunk(E));break;case"fmt ":const w=await this.tokenizer.readToken(new l.Format(E));let S=l.WaveFormat[w.wFormatTag];S||(x("WAVE/non-PCM format="+w.wFormatTag),S="non-PCM ("+w.wFormatTag+")"),this.metadata.setFormat("codec",S),this.metadata.setFormat("bitsPerSample",w.wBitsPerSample),this.metadata.setFormat("sampleRate",w.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",w.nChannels),this.metadata.setFormat("bitrate",w.nBlockAlign*w.nSamplesPerSec*8),this.blockAlign=w.nBlockAlign;break;case"id3 ":case"ID3 ":const j=await this.tokenizer.readToken(new s.Uint8ArrayType(E.chunkSize)),T=r.fromBuffer(j);await new f.ID3v2Parser().parse(this.metadata,T,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let C=E.chunkSize;if(this.tokenizer.fileInfo.size){const R=this.tokenizer.fileInfo.size-this.tokenizer.position;R<C&&(this.metadata.addWarning("data chunk length exceeding file length"),C=R)}const B=this.fact?this.fact.dwSampleLength:C===4294967295?void 0:C/this.blockAlign;B&&(this.metadata.setFormat("numberOfSamples",B),this.metadata.setFormat("duration",B/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(E.chunkSize);break;case"bext":const L=await this.tokenizer.readToken(u.BroadcastAudioExtensionChunk);Object.keys(L).forEach(R=>{this.metadata.addTag("exif","bext."+R,L[R])});const _=E.chunkSize-u.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(_);break;case"\0\0\0\0":x(`Ignore padding chunk: RIFF/${E.chunkID} of ${E.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+E.chunkID),await this.tokenizer.ignore(E.chunkSize);break;default:x(`Ignore chunk: RIFF/${E.chunkID} of ${E.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+E.chunkID),await this.tokenizer.ignore(E.chunkSize)}this.header.chunkSize%2===1&&(x("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(m){const E=await this.tokenizer.readToken(new s.StringType(4,"binary"));switch(x("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,E),E){case"INFO":return this.parseRiffInfoTags(m.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+E),x("Ignoring chunkID=RIFF/WAVE/LIST/"+E),this.tokenizer.ignore(m.chunkSize-4).then()}}async parseRiffInfoTags(m){for(;m>=8;){const E=await this.tokenizer.readToken(i.Header),w=new i.ListInfoTagValue(E),S=await this.tokenizer.readToken(w);this.addTag(E.chunkID,d.stripNulls(S)),m-=8+w.len}if(m!==0)throw Error("Illegal remaining size: "+m)}addTag(m,E){this.metadata.addTag("exif",m,E)}};return WaveParser.WaveParser=g,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const r=requireLib$2(),s=requireFourCC(),o=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class i{static isBitSet(f,d){return i.getBitAllignedNumber(f,d,1)===1}static getBitAllignedNumber(f,d,c){return f>>>d&4294967295>>>32-c}}return i.BlockHeaderToken={len:32,get:(l,f)=>{const d=r.UINT32_LE.get(l,f+24),c={BlockID:s.FourCcToken.get(l,f),blockSize:r.UINT32_LE.get(l,f+4),version:r.UINT16_LE.get(l,f+8),totalSamples:r.UINT32_LE.get(l,f+12),blockIndex:r.UINT32_LE.get(l,f+16),blockSamples:r.UINT32_LE.get(l,f+20),flags:{bitsPerSample:(1+i.getBitAllignedNumber(d,0,2))*8,isMono:i.isBitSet(d,2),isHybrid:i.isBitSet(d,3),isJointStereo:i.isBitSet(d,4),crossChannel:i.isBitSet(d,5),hybridNoiseShaping:i.isBitSet(d,6),floatingPoint:i.isBitSet(d,7),samplingRate:o[i.getBitAllignedNumber(d,23,4)],isDSD:i.isBitSet(d,31)},crc:new r.Uint8ArrayType(4).get(l,f+28)};return c.flags.isDSD&&(c.totalSamples*=8),c}},i.MetadataIdToken={len:1,get:(l,f)=>({functionId:i.getBitAllignedNumber(l[f],0,6),isOptional:i.isBitSet(l[f],5),isOddSize:i.isBitSet(l[f],6),largeBlock:i.isBitSet(l[f],7)})},WavPackToken.WavPack=i,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const r=requireLib$2(),s=requireAPEv2Parser(),o=requireFourCC(),i=requireBasicParser(),l=requireWavPackToken(),d=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let c=class extends i.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),s.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(o.FourCcToken)!=="wvpk")break;const x=await this.tokenizer.readToken(l.WavPack.BlockHeaderToken);if(x.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");d(`WavPack header blockIndex=${x.blockIndex}, len=${l.WavPack.BlockHeaderToken.len}`),x.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!x.flags.isHybrid),this.metadata.setFormat("bitsPerSample",x.flags.bitsPerSample),x.flags.isDSD||(this.metadata.setFormat("sampleRate",x.flags.samplingRate),this.metadata.setFormat("duration",x.totalSamples/x.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",x.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",x.totalSamples),this.metadata.setFormat("codec",x.flags.isDSD?"DSD":"PCM"));const g=x.blockSize-(l.WavPack.BlockHeaderToken.len-8);await(x.blockIndex===0?this.parseMetadataSubBlock(x,g):this.tokenizer.ignore(g)),x.blockSamples>0&&(this.audioDataSize+=x.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=l.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(u,x){for(;x>l.WavPack.MetadataIdToken.len;){const g=await this.tokenizer.readToken(l.WavPack.MetadataIdToken),h=await this.tokenizer.readNumber(g.largeBlock?r.UINT24_LE:r.UINT8),m=Buffer.alloc(h*2-(g.isOddSize?1:0));switch(await this.tokenizer.readBuffer(m),d(`Metadata Sub-Blocks functionId=0x${g.functionId.toString(16)}, id.largeBlock=${g.largeBlock},data-size=${m.length}`),g.functionId){case 0:break;case 14:d("ID_DSD_BLOCK");const E=1<<m.readUInt8(0),w=u.flags.samplingRate*E*8;if(!u.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",w),this.metadata.setFormat("duration",u.totalSamples/w);break;case 36:d("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",m);break;case 47:d(`ID_BLOCK_CHECKSUM: checksum=${m.toString("hex")}`);break;default:d(`Ignore unsupported meta-sub-block-id functionId=0x${g.functionId.toString(16)}`);break}x-=l.WavPack.MetadataIdToken.len+(g.largeBlock?r.UINT24_LE.len:r.UINT8.len)+h*2,d(`remainingLength=${x}`),g.isOddSize&&this.tokenizer.ignore(1)}if(x!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=c,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FormatChunk=r.ChannelType=r.DsdChunk=r.ChunkHeader=void 0;const s=requireLib$2(),o=requireFourCC();r.ChunkHeader={len:12,get:(i,l)=>({id:o.FourCcToken.get(i,l),size:s.UINT64_LE.get(i,l+4)})},r.DsdChunk={len:16,get:(i,l)=>({fileSize:s.INT64_LE.get(i,l),metadataPointer:s.INT64_LE.get(i,l+8)})},(function(i){i[i.mono=1]="mono",i[i.stereo=2]="stereo",i[i.channels=3]="channels",i[i.quad=4]="quad",i[i["4 channels"]=5]="4 channels",i[i["5 channels"]=6]="5 channels",i[i["5.1 channels"]=7]="5.1 channels"})(r.ChannelType||(r.ChannelType={})),r.FormatChunk={len:40,get:(i,l)=>({formatVersion:s.INT32_LE.get(i,l),formatID:s.INT32_LE.get(i,l+4),channelType:s.INT32_LE.get(i,l+8),channelNum:s.INT32_LE.get(i,l+12),samplingFrequency:s.INT32_LE.get(i,l+16),bitsPerSample:s.INT32_LE.get(i,l+20),sampleCount:s.INT64_LE.get(i,l+24),blockSizePerChannel:s.INT32_LE.get(i,l+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const r=requireBrowser$3(),s=requireAbstractID3Parser(),o=requireDsfChunk(),i=requireID3v2Parser(),l=(0,r.default)("music-metadata:parser:DSF");let f=class extends s.AbstractID3Parser{async postId3v2Parse(){const c=this.tokenizer.position,y=await this.tokenizer.readToken(o.ChunkHeader);if(y.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const u=await this.tokenizer.readToken(o.DsdChunk);if(u.metadataPointer===BigInt(0))l("No ID3v2 tag present");else return l(`expect ID3v2 at offset=${u.metadataPointer}`),await this.parseChunks(u.fileSize-y.size),await this.tokenizer.ignore(Number(u.metadataPointer)-this.tokenizer.position-c),new i.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(c){for(;c>=o.ChunkHeader.len;){const y=await this.tokenizer.readToken(o.ChunkHeader);switch(l(`Parsing chunk name=${y.id} size=${y.size}`),y.id){case"fmt ":const u=await this.tokenizer.readToken(o.FormatChunk);this.metadata.setFormat("numberOfChannels",u.channelNum),this.metadata.setFormat("sampleRate",u.samplingFrequency),this.metadata.setFormat("bitsPerSample",u.bitsPerSample),this.metadata.setFormat("numberOfSamples",u.sampleCount),this.metadata.setFormat("duration",Number(u.sampleCount)/u.samplingFrequency);const x=u.bitsPerSample*u.samplingFrequency*u.channelNum;this.metadata.setFormat("bitrate",x);return;default:this.tokenizer.ignore(Number(y.size)-o.ChunkHeader.len);break}c-=y.size}}};return DsfParser.DsfParser=f,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const r=requireLib$2(),s=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(o,i)=>({chunkID:s.FourCcToken.get(o,i),chunkSize:r.INT64_BE.get(o,i+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireCore$2(),i=requireFourCC(),l=requireBasicParser(),f=requireID3v2Parser(),d=requireDsdiffToken(),c=(0,s.default)("music-metadata:parser:aiff");let y=class extends l.BasicParser{async parse(){const x=await this.tokenizer.readToken(d.ChunkHeader64);if(x.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const g=(await this.tokenizer.readToken(i.FourCcToken)).trim();switch(g){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${g}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(x.chunkSize-BigInt(i.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${g}`)}}async readFmt8Chunks(x){for(;x>=d.ChunkHeader64.len;){const g=await this.tokenizer.readToken(d.ChunkHeader64);c(`Chunk id=${g.chunkID}`),await this.readData(g),x-=BigInt(d.ChunkHeader64.len)+g.chunkSize}}async readData(x){c(`Reading data of chunk[ID=${x.chunkID}, size=${x.chunkSize}]`);const g=this.tokenizer.position;switch(x.chunkID.trim()){case"FVER":const m=await this.tokenizer.readToken(r.UINT32_LE);c(`DSDIFF version=${m}`);break;case"PROP":if(await this.tokenizer.readToken(i.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(x.chunkSize-BigInt(i.FourCcToken.len));break;case"ID3":const w=await this.tokenizer.readToken(new r.Uint8ArrayType(Number(x.chunkSize))),S=o.fromBuffer(w);await new f.ID3v2Parser().parse(this.metadata,S,this.options);break;default:c(`Ignore chunk[ID=${x.chunkID}, size=${x.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(x.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const h=x.chunkSize-BigInt(this.tokenizer.position-g);h>0&&(c(`After Parsing chunk, remaining ${h} bytes`),await this.tokenizer.ignore(Number(h)))}async handleSoundPropertyChunks(x){for(c(`Parsing sound-property-chunks, remainingSize=${x}`);x>0;){const g=await this.tokenizer.readToken(d.ChunkHeader64);c(`Sound-property-chunk[ID=${g.chunkID}, size=${g.chunkSize}]`);const h=this.tokenizer.position;switch(g.chunkID.trim()){case"FS":const E=await this.tokenizer.readToken(r.UINT32_BE);this.metadata.setFormat("sampleRate",E);break;case"CHNL":const w=await this.tokenizer.readToken(r.UINT16_BE);this.metadata.setFormat("numberOfChannels",w),await this.handleChannelChunks(g.chunkSize-BigInt(r.UINT16_BE.len));break;case"CMPR":const S=(await this.tokenizer.readToken(i.FourCcToken)).trim(),j=await this.tokenizer.readToken(r.UINT8),T=await this.tokenizer.readToken(new r.StringType(j,"ascii"));S==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${S} (${T})`);break;case"ABSS":const C=await this.tokenizer.readToken(r.UINT16_BE),B=await this.tokenizer.readToken(r.UINT8),L=await this.tokenizer.readToken(r.UINT8),_=await this.tokenizer.readToken(r.UINT32_BE);c(`ABSS ${C}:${B}:${L}.${_}`);break;case"LSCO":const R=await this.tokenizer.readToken(r.UINT16_BE);c(`LSCO lsConfig=${R}`);break;case"COMT":default:c(`Unknown sound-property-chunk[ID=${g.chunkID}, size=${g.chunkSize}]`),await this.tokenizer.ignore(Number(g.chunkSize))}const m=g.chunkSize-BigInt(this.tokenizer.position-h);m>0&&(c(`After Parsing sound-property-chunk ${g.chunkSize}, remaining ${m} bytes`),await this.tokenizer.ignore(Number(m))),x-=BigInt(d.ChunkHeader64.len)+g.chunkSize,c(`Parsing sound-property-chunks, remainingSize=${x}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const g=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",g)}}async handleChannelChunks(x){c(`Parsing channel-chunks, remainingSize=${x}`);const g=[];for(;x>=i.FourCcToken.len;){const h=await this.tokenizer.readToken(i.FourCcToken);c(`Channel[ID=${h}]`),g.push(h),x-=BigInt(i.FourCcToken.len)}return c(`Channels: ${g.join(", ")}`),g}};return DsdiffParser.DsdiffParser=y,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const r=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:r.DataType.uint},17143:{name:"ebmlReadVersion",value:r.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:r.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:r.DataType.uint},17026:{name:"docType",value:r.DataType.string},17031:{name:"docTypeVersion",value:r.DataType.uint},17029:{name:"docTypeReadVersion",value:r.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:r.DataType.binary},21420:{name:"seekPosition",value:r.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:r.DataType.uid},29572:{name:"filename",value:r.DataType.string},3979555:{name:"prevUID",value:r.DataType.uid},3965867:{name:"prevFilename",value:r.DataType.string},4110627:{name:"nextUID",value:r.DataType.uid},4096955:{name:"nextFilename",value:r.DataType.string},2807729:{name:"timecodeScale",value:r.DataType.uint},17545:{name:"duration",value:r.DataType.float},17505:{name:"dateUTC",value:r.DataType.uint},31657:{name:"title",value:r.DataType.string},19840:{name:"muxingApp",value:r.DataType.string},22337:{name:"writingApp",value:r.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:r.DataType.uid},163:{name:"unknown",value:r.DataType.binary},167:{name:"position",value:r.DataType.uid},171:{name:"prevSize",value:r.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:r.DataType.uint},29637:{name:"uid",value:r.DataType.uid},131:{name:"trackType",value:r.DataType.uint},185:{name:"flagEnabled",value:r.DataType.bool},136:{name:"flagDefault",value:r.DataType.bool},21930:{name:"flagForced",value:r.DataType.bool},156:{name:"flagLacing",value:r.DataType.bool},28135:{name:"minCache",value:r.DataType.uint},28136:{name:"maxCache",value:r.DataType.uint},2352003:{name:"defaultDuration",value:r.DataType.uint},2306383:{name:"timecodeScale",value:r.DataType.float},21358:{name:"name",value:r.DataType.string},2274716:{name:"language",value:r.DataType.string},134:{name:"codecID",value:r.DataType.string},25506:{name:"codecPrivate",value:r.DataType.binary},2459272:{name:"codecName",value:r.DataType.string},3839639:{name:"codecSettings",value:r.DataType.string},3883072:{name:"codecInfoUrl",value:r.DataType.string},2536e3:{name:"codecDownloadUrl",value:r.DataType.string},170:{name:"codecDecodeAll",value:r.DataType.bool},28587:{name:"trackOverlay",value:r.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:r.DataType.bool},21432:{name:"stereoMode",value:r.DataType.uint},176:{name:"pixelWidth",value:r.DataType.uint},186:{name:"pixelHeight",value:r.DataType.uint},21680:{name:"displayWidth",value:r.DataType.uint},21690:{name:"displayHeight",value:r.DataType.uint},21683:{name:"aspectRatioType",value:r.DataType.uint},3061028:{name:"colourSpace",value:r.DataType.uint},3126563:{name:"gammaValue",value:r.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:r.DataType.float},30901:{name:"outputSamplingFrequency",value:r.DataType.float},159:{name:"channels",value:r.DataType.uint},148:{name:"channels",value:r.DataType.uint},32123:{name:"channelPositions",value:r.DataType.binary},25188:{name:"bitDepth",value:r.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:r.DataType.uint},20530:{name:"scope",value:r.DataType.bool},20531:{name:"type",value:r.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:r.DataType.uint},16981:{name:"contentCompSettings",value:r.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:r.DataType.uint},18402:{name:"contentEncKeyID",value:r.DataType.binary},18403:{name:"contentSignature ",value:r.DataType.binary},18404:{name:"ContentSigKeyID  ",value:r.DataType.binary},18405:{name:"contentSigAlgo ",value:r.DataType.uint},18406:{name:"contentSigHashAlgo ",value:r.DataType.uint}}},25188:{name:"bitDepth",value:r.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:r.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:r.DataType.uint},241:{name:"clusterPosition",value:r.DataType.uint},21368:{name:"blockNumber",value:r.DataType.uint},234:{name:"codecState",value:r.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:r.DataType.uint},151:{name:"cluster",value:r.DataType.uint},21343:{name:"number",value:r.DataType.uint},235:{name:"codecState",value:r.DataType.uint}}},240:{name:"relativePosition",value:r.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:r.DataType.string},18030:{name:"name",value:r.DataType.string},18016:{name:"mimeType",value:r.DataType.string},18012:{name:"data",value:r.DataType.binary},18094:{name:"uid",value:r.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:r.DataType.uid},145:{name:"timeStart",value:r.DataType.uint},146:{name:"timeEnd",value:r.DataType.uid},152:{name:"hidden",value:r.DataType.bool},17816:{name:"enabled",value:r.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:r.DataType.uid},128:{name:"display",container:{133:{name:"string",value:r.DataType.string},17276:{name:"language ",value:r.DataType.string},17278:{name:"country ",value:r.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:r.DataType.uid},25540:{name:"tagChapterUID",value:r.DataType.uint},25542:{name:"tagAttachmentUID",value:r.DataType.uid},25546:{name:"targetType",value:r.DataType.string},26826:{name:"targetTypeValue",value:r.DataType.uint},25545:{name:"tagEditionUID",value:r.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:r.DataType.string},17543:{name:"string",value:r.DataType.string},17541:{name:"binary",value:r.DataType.binary},17530:{name:"language",value:r.DataType.string},17531:{name:"languageIETF",value:r.DataType.string},17540:{name:"default",value:r.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const r=requireLib$2(),s=requireBrowser$3(),o=requireBasicParser(),i=requireTypes(),l=requireMatroskaDtd(),f=(0,s.default)("music-metadata:parser:matroska");let d=class extends o.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(i.DataType.uint,y=>this.readUint(y)),this.parserMap.set(i.DataType.string,y=>this.readString(y)),this.parserMap.set(i.DataType.binary,y=>this.readBuffer(y)),this.parserMap.set(i.DataType.uid,async y=>await this.readUint(y)===1),this.parserMap.set(i.DataType.bool,y=>this.readFlag(y)),this.parserMap.set(i.DataType.float,y=>this.readFloat(y))}init(y,u,x){return super.init(y,u,x),this}async parse(){const y=await this.parseContainer(l.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${y.ebml.docType}`),y.segment){const u=y.segment.info;if(u){const g=u.timecodeScale?u.timecodeScale:1e6;if(typeof u.duration=="number"){const h=u.duration*g/1e9;this.addTag("segment:title",u.title),this.metadata.setFormat("duration",h)}}const x=y.segment.tracks;if(x&&x.entries){x.entries.forEach(h=>{const m={codecName:h.codecID.replace("A_","").replace("V_",""),codecSettings:h.codecSettings,flagDefault:h.flagDefault,flagLacing:h.flagLacing,flagEnabled:h.flagEnabled,language:h.language,name:h.name,type:h.trackType,audio:h.audio,video:h.video};this.metadata.addStreamInfo(m)});const g=x.entries.filter(h=>h.trackType===i.TrackType.audio.valueOf()).reduce((h,m)=>!h||!h.flagDefault&&m.flagDefault||m.trackNumber&&m.trackNumber<h.trackNumber?m:h,null);g&&(this.metadata.setFormat("codec",g.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",g.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",g.audio.channels)),y.segment.tags&&y.segment.tags.tag.forEach(h=>{const m=h.target,E=m?.targetTypeValue?i.TargetType[m.targetTypeValue]:m?.targetType?m.targetType:"track";h.simpleTags.forEach(w=>{const S=w.string?w.string:w.binary;this.addTag(`${E}:${w.name}`,S)})}),y.segment.attachments&&y.segment.attachments.attachedFiles.filter(h=>h.mimeType.startsWith("image/")).map(h=>({data:h.data,format:h.mimeType,description:h.description,name:h.name})).forEach(h=>{this.addTag("picture",h)})}}}async parseContainer(y,u,x){const g={};for(;this.tokenizer.position<u;){let h;try{h=await this.readElement()}catch(E){if(E.message==="End-Of-Stream")break;throw E}const m=y[h.id];if(m)if(f(`Element: name=${m.name}, container=${!!m.container}`),m.container){const E=await this.parseContainer(m.container,h.len>=0?this.tokenizer.position+h.len:-1,x.concat([m.name]));m.multiple?(g[m.name]||(g[m.name]=[]),g[m.name].push(E)):g[m.name]=E}else g[m.name]=await this.parserMap.get(m.value)(h);else switch(h.id){case 236:this.padding+=h.len,await this.tokenizer.ignore(h.len);break;default:f(`parseEbml: path=${x.join("/")}, unknown element: id=${h.id.toString(16)}`),this.padding+=h.len,await this.tokenizer.ignore(h.len)}}return g}async readVintData(y){const u=await this.tokenizer.peekNumber(r.UINT8);let x=128,g=1;for(;(u&x)===0;){if(g>y)throw new Error("VINT value exceeding maximum size");++g,x>>=1}const h=Buffer.alloc(g);return await this.tokenizer.readBuffer(h),h}async readElement(){const y=await this.readVintData(this.ebmlMaxIDLength),u=await this.readVintData(this.ebmlMaxSizeLength);u[0]^=128>>u.length-1;const x=Math.min(6,u.length);return{id:y.readUIntBE(0,y.length),len:u.readUIntBE(u.length-x,x)}}isMaxValue(y){if(y.length===this.ebmlMaxSizeLength){for(let u=1;u<this.ebmlMaxSizeLength;++u)if(y[u]!==255)return!1;return!0}return!1}async readFloat(y){switch(y.len){case 0:return 0;case 4:return this.tokenizer.readNumber(r.Float32_BE);case 8:return this.tokenizer.readNumber(r.Float64_BE);case 10:return this.tokenizer.readNumber(r.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${y.len}`)}}async readFlag(y){return await this.readUint(y)===1}async readUint(y){const u=await this.readBuffer(y),x=Math.min(6,y.len);return u.readUIntBE(y.len-x,x)}async readString(y){return(await this.tokenizer.readToken(new r.StringType(y.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(y){const u=Buffer.alloc(y.len);return await this.tokenizer.readBuffer(u),u}addTag(y,u){this.metadata.addTag("matroska",y,u)}};return MatroskaParser.MatroskaParser=d,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const r=requireCore$1(),s=requireContentType(),o=requireMediaTyper(),i=requireBrowser$3(),l=requireMetadataCollector(),f=requireAiffParser(),d=requireAPEv2Parser(),c=requireAsfParser(),y=requireFlacParser(),u=requireMP4Parser(),x=requireMpegParser(),g=requireMusepack(),h=requireOggParser(),m=requireWaveParser(),E=requireWavPackParser(),w=requireDsfParser(),S=requireDsdiffParser(),j=requireMatroskaParser(),T=(0,i.default)("music-metadata:parser:factory");function C(_){const R=s.parse(_),P=o.parse(R.type);return{type:P.type,subtype:P.subtype,suffix:P.suffix,parameters:R.parameters}}ParserFactory.parseHttpContentType=C;async function B(_,R,P={}){const le=await L.loadParser(R),W=new l.MetadataCollector(P);return await le.init(W,_,P).parse(),W.toCommonMetadata()}let L=class ui{static async parseOnContentType(R,P){const{mimeType:le,path:W,url:V}=await R.fileInfo,se=ui.getParserIdForMimeType(le)||ui.getParserIdForExtension(W)||ui.getParserIdForExtension(V);return se||T("No parser found for MIME-type / extension: "+le),this.parse(R,se,P)}static async parse(R,P,le){if(!P){T("Guess parser on content...");const W=Buffer.alloc(4100);if(await R.peekBuffer(W,{mayBeLess:!0}),R.fileInfo.path&&(P=this.getParserIdForExtension(R.fileInfo.path)),!P){const V=await r.fromBuffer(W);if(!V)throw new Error("Failed to determine audio format");if(T(`Guessed file type is mime=${V.mime}, extension=${V.ext}`),P=ui.getParserIdForMimeType(V.mime),!P)throw new Error("Guessed MIME-type not supported: "+V.mime)}}return B(R,P,le)}static getParserIdForExtension(R){if(!R)return;switch(this.getExtension(R).toLocaleLowerCase()||R){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(R){switch(R){case"aiff":return new f.AIFFParser;case"adts":case"mpeg":return new x.MpegParser;case"apev2":return new d.APEv2Parser;case"asf":return new c.AsfParser;case"dsf":return new w.DsfParser;case"dsdiff":return new S.DsdiffParser;case"flac":return new y.FlacParser;case"mp4":return new u.MP4Parser;case"musepack":return new g.default;case"ogg":return new h.OggParser;case"riff":return new m.WaveParser;case"wavpack":return new E.WavPackParser;case"matroska":return new j.MatroskaParser;default:throw new Error(`Unknown parser type: ${R}`)}}static getExtension(R){const P=R.lastIndexOf(".");return P===-1?"":R.slice(P)}static getParserIdForMimeType(R){let P;try{P=C(R)}catch{T(`Invalid HTTP Content-Type header value: ${R}`);return}const le=P.subtype.indexOf("x-")===0?P.subtype.substring(2):P.subtype;switch(P.type){case"audio":switch(le){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(le){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(le){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=L,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let r=class{constructor(o){this.uint8Array=o,this.fileSize=o.length}async randomRead(o,i,l,f){return o.set(this.uint8Array.subarray(f,f+l),i),l}};return RandomUint8ArrayReader.RandomUint8ArrayReader=r,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getLyricsHeaderLength=r.endTag2=void 0,r.endTag2="LYRICS200";async function s(o){if(o.fileSize>=143){const i=Buffer.alloc(15);await o.randomRead(i,0,i.length,o.fileSize-143);const l=i.toString("binary");if(l.substr(6)===r.endTag2)return parseInt(l.substr(0,6),10)+15}return 0}r.getLyricsHeaderLength=s})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const r=requireCore$2(),s=requireParserFactory(),o=requireRandomUint8ArrayReader(),i=requireAPEv2Parser(),l=requireID3v1Parser(),f=requireLyrics3();function d(m,E,w={}){return y(r.fromStream(m,typeof E=="string"?{mimeType:E}:E),w)}core$2.parseStream=d;async function c(m,E,w={}){const S=new o.RandomUint8ArrayReader(m);await h(S,w);const j=r.fromBuffer(m,typeof E=="string"?{mimeType:E}:E);return y(j,w)}core$2.parseBuffer=c;function y(m,E){return s.ParserFactory.parseOnContentType(m,E)}core$2.parseFromTokenizer=y;function u(m){const E={};for(const w of m)(E[w.id]=E[w.id]||[]).push(w.value);return E}core$2.orderTags=u;function x(m){return m===void 0?0:1+Math.round(m*4)}core$2.ratingToStars=x;function g(m){return m?m.reduce((E,w)=>w.name&&w.name.toLowerCase()in["front","cover","cover (front)"]?w:E):null}core$2.selectCover=g;async function h(m,E={}){let w=m.fileSize;if(await(0,l.hasID3v1Header)(m)){w-=128;const S=await(0,f.getLyricsHeaderLength)(m);w-=S}E.apeHeader=await i.APEv2Parser.findApeFooterOffset(m,w)}return core$2.scanAppendingHeaders=h,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=c,base64Js.toByteArray=u,base64Js.fromByteArray=h;for(var r=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=i.length;l<f;++l)r[l]=i[l],s[i.charCodeAt(l)]=l;s[45]=62,s[95]=63;function d(m){var E=m.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=m.indexOf("=");w===-1&&(w=E);var S=w===E?0:4-w%4;return[w,S]}function c(m){var E=d(m),w=E[0],S=E[1];return(w+S)*3/4-S}function y(m,E,w){return(E+w)*3/4-w}function u(m){var E,w=d(m),S=w[0],j=w[1],T=new o(y(m,S,j)),C=0,B=j>0?S-4:S,L;for(L=0;L<B;L+=4)E=s[m.charCodeAt(L)]<<18|s[m.charCodeAt(L+1)]<<12|s[m.charCodeAt(L+2)]<<6|s[m.charCodeAt(L+3)],T[C++]=E>>16&255,T[C++]=E>>8&255,T[C++]=E&255;return j===2&&(E=s[m.charCodeAt(L)]<<2|s[m.charCodeAt(L+1)]>>4,T[C++]=E&255),j===1&&(E=s[m.charCodeAt(L)]<<10|s[m.charCodeAt(L+1)]<<4|s[m.charCodeAt(L+2)]>>2,T[C++]=E>>8&255,T[C++]=E&255),T}function x(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function g(m,E,w){for(var S,j=[],T=E;T<w;T+=3)S=(m[T]<<16&16711680)+(m[T+1]<<8&65280)+(m[T+2]&255),j.push(x(S));return j.join("")}function h(m){for(var E,w=m.length,S=w%3,j=[],T=16383,C=0,B=w-S;C<B;C+=T)j.push(g(m,C,C+T>B?B:C+T));return S===1?(E=m[w-1],j.push(r[E>>2]+r[E<<4&63]+"==")):S===2&&(E=(m[w-2]<<8)+m[w-1],j.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),j.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(r){const s=requireBase64Js(),o=requireIeee754(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=T,r.INSPECT_MAX_BYTES=50;const l=2147483647;r.kMaxLength=l,c.TYPED_ARRAY_SUPPORT=f(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const N=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(N,b),N.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function d(N){if(N>l)throw new RangeError('The value "'+N+'" is invalid for option "size"');const b=new Uint8Array(N);return Object.setPrototypeOf(b,c.prototype),b}function c(N,b,k){if(typeof N=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(N)}return y(N,b,k)}c.poolSize=8192;function y(N,b,k){if(typeof N=="string")return h(N,b);if(ArrayBuffer.isView(N))return E(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(Ee(N,ArrayBuffer)||N&&Ee(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(N,SharedArrayBuffer)||N&&Ee(N.buffer,SharedArrayBuffer)))return w(N,b,k);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=N.valueOf&&N.valueOf();if(z!=null&&z!==N)return c.from(z,b,k);const U=S(N);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return c.from(N[Symbol.toPrimitive]("string"),b,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}c.from=function(N,b,k){return y(N,b,k)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function u(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function x(N,b,k){return u(N),N<=0?d(N):b!==void 0?typeof k=="string"?d(N).fill(b,k):d(N).fill(b):d(N)}c.alloc=function(N,b,k){return x(N,b,k)};function g(N){return u(N),d(N<0?0:j(N)|0)}c.allocUnsafe=function(N){return g(N)},c.allocUnsafeSlow=function(N){return g(N)};function h(N,b){if((typeof b!="string"||b==="")&&(b="utf8"),!c.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const k=C(N,b)|0;let z=d(k);const U=z.write(N,b);return U!==k&&(z=z.slice(0,U)),z}function m(N){const b=N.length<0?0:j(N.length)|0,k=d(b);for(let z=0;z<b;z+=1)k[z]=N[z]&255;return k}function E(N){if(Ee(N,Uint8Array)){const b=new Uint8Array(N);return w(b.buffer,b.byteOffset,b.byteLength)}return m(N)}function w(N,b,k){if(b<0||N.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<b+(k||0))throw new RangeError('"length" is outside of buffer bounds');let z;return b===void 0&&k===void 0?z=new Uint8Array(N):k===void 0?z=new Uint8Array(N,b):z=new Uint8Array(N,b,k),Object.setPrototypeOf(z,c.prototype),z}function S(N){if(c.isBuffer(N)){const b=j(N.length)|0,k=d(b);return k.length===0||N.copy(k,0,0,b),k}if(N.length!==void 0)return typeof N.length!="number"||De(N.length)?d(0):m(N);if(N.type==="Buffer"&&Array.isArray(N.data))return m(N.data)}function j(N){if(N>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return N|0}function T(N){return+N!=N&&(N=0),c.alloc(+N)}c.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==c.prototype},c.compare=function(b,k){if(Ee(b,Uint8Array)&&(b=c.from(b,b.offset,b.byteLength)),Ee(k,Uint8Array)&&(k=c.from(k,k.offset,k.byteLength)),!c.isBuffer(b)||!c.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===k)return 0;let z=b.length,U=k.length;for(let Z=0,de=Math.min(z,U);Z<de;++Z)if(b[Z]!==k[Z]){z=b[Z],U=k[Z];break}return z<U?-1:U<z?1:0},c.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(b,k){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return c.alloc(0);let z;if(k===void 0)for(k=0,z=0;z<b.length;++z)k+=b[z].length;const U=c.allocUnsafe(k);let Z=0;for(z=0;z<b.length;++z){let de=b[z];if(Ee(de,Uint8Array))Z+de.length>U.length?(c.isBuffer(de)||(de=c.from(de)),de.copy(U,Z)):Uint8Array.prototype.set.call(U,de,Z);else if(c.isBuffer(de))de.copy(U,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=de.length}return U};function C(N,b){if(c.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||Ee(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const k=N.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&k===0)return 0;let U=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return Se(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return ye(N).length;default:if(U)return z?-1:Se(N).length;b=(""+b).toLowerCase(),U=!0}}c.byteLength=C;function B(N,b,k){let z=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,b>>>=0,k<=b))return"";for(N||(N="utf8");;)switch(N){case"hex":return me(this,b,k);case"utf8":case"utf-8":return J(this,b,k);case"ascii":return Pe(this,b,k);case"latin1":case"binary":return q(this,b,k);case"base64":return Q(this,b,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,b,k);default:if(z)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),z=!0}}c.prototype._isBuffer=!0;function L(N,b,k){const z=N[b];N[b]=N[k],N[k]=z}c.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<b;k+=2)L(this,k,k+1);return this},c.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<b;k+=4)L(this,k,k+3),L(this,k+1,k+2);return this},c.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<b;k+=8)L(this,k,k+7),L(this,k+1,k+6),L(this,k+2,k+5),L(this,k+3,k+4);return this},c.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?J(this,0,b):B.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(b){if(!c.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:c.compare(this,b)===0},c.prototype.inspect=function(){let b="";const k=r.INSPECT_MAX_BYTES;return b=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(b+=" ... "),"<Buffer "+b+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(b,k,z,U,Z){if(Ee(b,Uint8Array)&&(b=c.from(b,b.offset,b.byteLength)),!c.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(k===void 0&&(k=0),z===void 0&&(z=b?b.length:0),U===void 0&&(U=0),Z===void 0&&(Z=this.length),k<0||z>b.length||U<0||Z>this.length)throw new RangeError("out of range index");if(U>=Z&&k>=z)return 0;if(U>=Z)return-1;if(k>=z)return 1;if(k>>>=0,z>>>=0,U>>>=0,Z>>>=0,this===b)return 0;let de=Z-U,Fe=z-k;const $e=Math.min(de,Fe),Xe=this.slice(U,Z),Qe=b.slice(k,z);for(let Ze=0;Ze<$e;++Ze)if(Xe[Ze]!==Qe[Ze]){de=Xe[Ze],Fe=Qe[Ze];break}return de<Fe?-1:Fe<de?1:0};function _(N,b,k,z,U){if(N.length===0)return-1;if(typeof k=="string"?(z=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,De(k)&&(k=U?0:N.length-1),k<0&&(k=N.length+k),k>=N.length){if(U)return-1;k=N.length-1}else if(k<0)if(U)k=0;else return-1;if(typeof b=="string"&&(b=c.from(b,z)),c.isBuffer(b))return b.length===0?-1:R(N,b,k,z,U);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(N,b,k):Uint8Array.prototype.lastIndexOf.call(N,b,k):R(N,[b],k,z,U);throw new TypeError("val must be string, number or Buffer")}function R(N,b,k,z,U){let Z=1,de=N.length,Fe=b.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(N.length<2||b.length<2)return-1;Z=2,de/=2,Fe/=2,k/=2}function $e(Qe,Ze){return Z===1?Qe[Ze]:Qe.readUInt16BE(Ze*Z)}let Xe;if(U){let Qe=-1;for(Xe=k;Xe<de;Xe++)if($e(N,Xe)===$e(b,Qe===-1?0:Xe-Qe)){if(Qe===-1&&(Qe=Xe),Xe-Qe+1===Fe)return Qe*Z}else Qe!==-1&&(Xe-=Xe-Qe),Qe=-1}else for(k+Fe>de&&(k=de-Fe),Xe=k;Xe>=0;Xe--){let Qe=!0;for(let Ze=0;Ze<Fe;Ze++)if($e(N,Xe+Ze)!==$e(b,Ze)){Qe=!1;break}if(Qe)return Xe}return-1}c.prototype.includes=function(b,k,z){return this.indexOf(b,k,z)!==-1},c.prototype.indexOf=function(b,k,z){return _(this,b,k,z,!0)},c.prototype.lastIndexOf=function(b,k,z){return _(this,b,k,z,!1)};function P(N,b,k,z){k=Number(k)||0;const U=N.length-k;z?(z=Number(z),z>U&&(z=U)):z=U;const Z=b.length;z>Z/2&&(z=Z/2);let de;for(de=0;de<z;++de){const Fe=parseInt(b.substr(de*2,2),16);if(De(Fe))return de;N[k+de]=Fe}return de}function le(N,b,k,z){return Ne(Se(b,N.length-k),N,k,z)}function W(N,b,k,z){return Ne(Re(b),N,k,z)}function V(N,b,k,z){return Ne(ye(b),N,k,z)}function se(N,b,k,z){return Ne(K(b,N.length-k),N,k,z)}c.prototype.write=function(b,k,z,U){if(k===void 0)U="utf8",z=this.length,k=0;else if(z===void 0&&typeof k=="string")U=k,z=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(z)?(z=z>>>0,U===void 0&&(U="utf8")):(U=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-k;if((z===void 0||z>Z)&&(z=Z),b.length>0&&(z<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let de=!1;for(;;)switch(U){case"hex":return P(this,b,k,z);case"utf8":case"utf-8":return le(this,b,k,z);case"ascii":case"latin1":case"binary":return W(this,b,k,z);case"base64":return V(this,b,k,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,b,k,z);default:if(de)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),de=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(N,b,k){return b===0&&k===N.length?s.fromByteArray(N):s.fromByteArray(N.slice(b,k))}function J(N,b,k){k=Math.min(N.length,k);const z=[];let U=b;for(;U<k;){const Z=N[U];let de=null,Fe=Z>239?4:Z>223?3:Z>191?2:1;if(U+Fe<=k){let $e,Xe,Qe,Ze;switch(Fe){case 1:Z<128&&(de=Z);break;case 2:$e=N[U+1],($e&192)===128&&(Ze=(Z&31)<<6|$e&63,Ze>127&&(de=Ze));break;case 3:$e=N[U+1],Xe=N[U+2],($e&192)===128&&(Xe&192)===128&&(Ze=(Z&15)<<12|($e&63)<<6|Xe&63,Ze>2047&&(Ze<55296||Ze>57343)&&(de=Ze));break;case 4:$e=N[U+1],Xe=N[U+2],Qe=N[U+3],($e&192)===128&&(Xe&192)===128&&(Qe&192)===128&&(Ze=(Z&15)<<18|($e&63)<<12|(Xe&63)<<6|Qe&63,Ze>65535&&Ze<1114112&&(de=Ze))}}de===null?(de=65533,Fe=1):de>65535&&(de-=65536,z.push(de>>>10&1023|55296),de=56320|de&1023),z.push(de),U+=Fe}return we(z)}const ge=4096;function we(N){const b=N.length;if(b<=ge)return String.fromCharCode.apply(String,N);let k="",z=0;for(;z<b;)k+=String.fromCharCode.apply(String,N.slice(z,z+=ge));return k}function Pe(N,b,k){let z="";k=Math.min(N.length,k);for(let U=b;U<k;++U)z+=String.fromCharCode(N[U]&127);return z}function q(N,b,k){let z="";k=Math.min(N.length,k);for(let U=b;U<k;++U)z+=String.fromCharCode(N[U]);return z}function me(N,b,k){const z=N.length;(!b||b<0)&&(b=0),(!k||k<0||k>z)&&(k=z);let U="";for(let Z=b;Z<k;++Z)U+=Je[N[Z]];return U}function A(N,b,k){const z=N.slice(b,k);let U="";for(let Z=0;Z<z.length-1;Z+=2)U+=String.fromCharCode(z[Z]+z[Z+1]*256);return U}c.prototype.slice=function(b,k){const z=this.length;b=~~b,k=k===void 0?z:~~k,b<0?(b+=z,b<0&&(b=0)):b>z&&(b=z),k<0?(k+=z,k<0&&(k=0)):k>z&&(k=z),k<b&&(k=b);const U=this.subarray(b,k);return Object.setPrototypeOf(U,c.prototype),U};function D(N,b,k){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+b>k)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(b,k,z){b=b>>>0,k=k>>>0,z||D(b,k,this.length);let U=this[b],Z=1,de=0;for(;++de<k&&(Z*=256);)U+=this[b+de]*Z;return U},c.prototype.readUintBE=c.prototype.readUIntBE=function(b,k,z){b=b>>>0,k=k>>>0,z||D(b,k,this.length);let U=this[b+--k],Z=1;for(;k>0&&(Z*=256);)U+=this[b+--k]*Z;return U},c.prototype.readUint8=c.prototype.readUInt8=function(b,k){return b=b>>>0,k||D(b,1,this.length),this[b]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(b,k){return b=b>>>0,k||D(b,2,this.length),this[b]|this[b+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(b,k){return b=b>>>0,k||D(b,2,this.length),this[b]<<8|this[b+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(b,k){return b=b>>>0,k||D(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(b,k){return b=b>>>0,k||D(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},c.prototype.readBigUInt64LE=Ye(function(b){b=b>>>0,F(b,"offset");const k=this[b],z=this[b+7];(k===void 0||z===void 0)&&H(b,this.length-8);const U=k+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,Z=this[++b]+this[++b]*2**8+this[++b]*2**16+z*2**24;return BigInt(U)+(BigInt(Z)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ye(function(b){b=b>>>0,F(b,"offset");const k=this[b],z=this[b+7];(k===void 0||z===void 0)&&H(b,this.length-8);const U=k*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],Z=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+z;return(BigInt(U)<<BigInt(32))+BigInt(Z)}),c.prototype.readIntLE=function(b,k,z){b=b>>>0,k=k>>>0,z||D(b,k,this.length);let U=this[b],Z=1,de=0;for(;++de<k&&(Z*=256);)U+=this[b+de]*Z;return Z*=128,U>=Z&&(U-=Math.pow(2,8*k)),U},c.prototype.readIntBE=function(b,k,z){b=b>>>0,k=k>>>0,z||D(b,k,this.length);let U=k,Z=1,de=this[b+--U];for(;U>0&&(Z*=256);)de+=this[b+--U]*Z;return Z*=128,de>=Z&&(de-=Math.pow(2,8*k)),de},c.prototype.readInt8=function(b,k){return b=b>>>0,k||D(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},c.prototype.readInt16LE=function(b,k){b=b>>>0,k||D(b,2,this.length);const z=this[b]|this[b+1]<<8;return z&32768?z|4294901760:z},c.prototype.readInt16BE=function(b,k){b=b>>>0,k||D(b,2,this.length);const z=this[b+1]|this[b]<<8;return z&32768?z|4294901760:z},c.prototype.readInt32LE=function(b,k){return b=b>>>0,k||D(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},c.prototype.readInt32BE=function(b,k){return b=b>>>0,k||D(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},c.prototype.readBigInt64LE=Ye(function(b){b=b>>>0,F(b,"offset");const k=this[b],z=this[b+7];(k===void 0||z===void 0)&&H(b,this.length-8);const U=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+(z<<24);return(BigInt(U)<<BigInt(32))+BigInt(k+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),c.prototype.readBigInt64BE=Ye(function(b){b=b>>>0,F(b,"offset");const k=this[b],z=this[b+7];(k===void 0||z===void 0)&&H(b,this.length-8);const U=(k<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(U)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+z)}),c.prototype.readFloatLE=function(b,k){return b=b>>>0,k||D(b,4,this.length),o.read(this,b,!0,23,4)},c.prototype.readFloatBE=function(b,k){return b=b>>>0,k||D(b,4,this.length),o.read(this,b,!1,23,4)},c.prototype.readDoubleLE=function(b,k){return b=b>>>0,k||D(b,8,this.length),o.read(this,b,!0,52,8)},c.prototype.readDoubleBE=function(b,k){return b=b>>>0,k||D(b,8,this.length),o.read(this,b,!1,52,8)};function G(N,b,k,z,U,Z){if(!c.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>U||b<Z)throw new RangeError('"value" argument is out of bounds');if(k+z>N.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(b,k,z,U){if(b=+b,k=k>>>0,z=z>>>0,!U){const Fe=Math.pow(2,8*z)-1;G(this,b,k,z,Fe,0)}let Z=1,de=0;for(this[k]=b&255;++de<z&&(Z*=256);)this[k+de]=b/Z&255;return k+z},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(b,k,z,U){if(b=+b,k=k>>>0,z=z>>>0,!U){const Fe=Math.pow(2,8*z)-1;G(this,b,k,z,Fe,0)}let Z=z-1,de=1;for(this[k+Z]=b&255;--Z>=0&&(de*=256);)this[k+Z]=b/de&255;return k+z},c.prototype.writeUint8=c.prototype.writeUInt8=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,1,255,0),this[k]=b&255,k+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,2,65535,0),this[k]=b&255,this[k+1]=b>>>8,k+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,2,65535,0),this[k]=b>>>8,this[k+1]=b&255,k+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,4,4294967295,0),this[k+3]=b>>>24,this[k+2]=b>>>16,this[k+1]=b>>>8,this[k]=b&255,k+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,4,4294967295,0),this[k]=b>>>24,this[k+1]=b>>>16,this[k+2]=b>>>8,this[k+3]=b&255,k+4};function ae(N,b,k,z,U){ee(b,z,U,N,k,7);let Z=Number(b&BigInt(4294967295));N[k++]=Z,Z=Z>>8,N[k++]=Z,Z=Z>>8,N[k++]=Z,Z=Z>>8,N[k++]=Z;let de=Number(b>>BigInt(32)&BigInt(4294967295));return N[k++]=de,de=de>>8,N[k++]=de,de=de>>8,N[k++]=de,de=de>>8,N[k++]=de,k}function ne(N,b,k,z,U){ee(b,z,U,N,k,7);let Z=Number(b&BigInt(4294967295));N[k+7]=Z,Z=Z>>8,N[k+6]=Z,Z=Z>>8,N[k+5]=Z,Z=Z>>8,N[k+4]=Z;let de=Number(b>>BigInt(32)&BigInt(4294967295));return N[k+3]=de,de=de>>8,N[k+2]=de,de=de>>8,N[k+1]=de,de=de>>8,N[k]=de,k+8}c.prototype.writeBigUInt64LE=Ye(function(b,k=0){return ae(this,b,k,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ye(function(b,k=0){return ne(this,b,k,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(b,k,z,U){if(b=+b,k=k>>>0,!U){const $e=Math.pow(2,8*z-1);G(this,b,k,z,$e-1,-$e)}let Z=0,de=1,Fe=0;for(this[k]=b&255;++Z<z&&(de*=256);)b<0&&Fe===0&&this[k+Z-1]!==0&&(Fe=1),this[k+Z]=(b/de>>0)-Fe&255;return k+z},c.prototype.writeIntBE=function(b,k,z,U){if(b=+b,k=k>>>0,!U){const $e=Math.pow(2,8*z-1);G(this,b,k,z,$e-1,-$e)}let Z=z-1,de=1,Fe=0;for(this[k+Z]=b&255;--Z>=0&&(de*=256);)b<0&&Fe===0&&this[k+Z+1]!==0&&(Fe=1),this[k+Z]=(b/de>>0)-Fe&255;return k+z},c.prototype.writeInt8=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,1,127,-128),b<0&&(b=255+b+1),this[k]=b&255,k+1},c.prototype.writeInt16LE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,2,32767,-32768),this[k]=b&255,this[k+1]=b>>>8,k+2},c.prototype.writeInt16BE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,2,32767,-32768),this[k]=b>>>8,this[k+1]=b&255,k+2},c.prototype.writeInt32LE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,4,2147483647,-2147483648),this[k]=b&255,this[k+1]=b>>>8,this[k+2]=b>>>16,this[k+3]=b>>>24,k+4},c.prototype.writeInt32BE=function(b,k,z){return b=+b,k=k>>>0,z||G(this,b,k,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[k]=b>>>24,this[k+1]=b>>>16,this[k+2]=b>>>8,this[k+3]=b&255,k+4},c.prototype.writeBigInt64LE=Ye(function(b,k=0){return ae(this,b,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ye(function(b,k=0){return ne(this,b,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(N,b,k,z,U,Z){if(k+z>N.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function xe(N,b,k,z,U){return b=+b,k=k>>>0,U||fe(N,b,k,4),o.write(N,b,k,z,23,4),k+4}c.prototype.writeFloatLE=function(b,k,z){return xe(this,b,k,!0,z)},c.prototype.writeFloatBE=function(b,k,z){return xe(this,b,k,!1,z)};function ke(N,b,k,z,U){return b=+b,k=k>>>0,U||fe(N,b,k,8),o.write(N,b,k,z,52,8),k+8}c.prototype.writeDoubleLE=function(b,k,z){return ke(this,b,k,!0,z)},c.prototype.writeDoubleBE=function(b,k,z){return ke(this,b,k,!1,z)},c.prototype.copy=function(b,k,z,U){if(!c.isBuffer(b))throw new TypeError("argument should be a Buffer");if(z||(z=0),!U&&U!==0&&(U=this.length),k>=b.length&&(k=b.length),k||(k=0),U>0&&U<z&&(U=z),U===z||b.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),b.length-k<U-z&&(U=b.length-k+z);const Z=U-z;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,z,U):Uint8Array.prototype.set.call(b,this.subarray(z,U),k),Z},c.prototype.fill=function(b,k,z,U){if(typeof b=="string"){if(typeof k=="string"?(U=k,k=0,z=this.length):typeof z=="string"&&(U=z,z=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!c.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(b.length===1){const de=b.charCodeAt(0);(U==="utf8"&&de<128||U==="latin1")&&(b=de)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(k<0||this.length<k||this.length<z)throw new RangeError("Out of range index");if(z<=k)return this;k=k>>>0,z=z===void 0?this.length:z>>>0,b||(b=0);let Z;if(typeof b=="number")for(Z=k;Z<z;++Z)this[Z]=b;else{const de=c.isBuffer(b)?b:c.from(b,U),Fe=de.length;if(Fe===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(Z=0;Z<z-k;++Z)this[Z+k]=de[Z%Fe]}return this};const te={};function ie(N,b,k){te[N]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(N,b){return`The "${N}" argument must be of type number. Received type ${typeof b}`},TypeError),ie("ERR_OUT_OF_RANGE",function(N,b,k){let z=`The value of "${N}" is out of range.`,U=k;return Number.isInteger(k)&&Math.abs(k)>2**32?U=be(String(k)):typeof k=="bigint"&&(U=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(U=be(U)),U+="n"),z+=` It must be ${b}. Received ${U}`,z},RangeError);function be(N){let b="",k=N.length;const z=N[0]==="-"?1:0;for(;k>=z+4;k-=3)b=`_${N.slice(k-3,k)}${b}`;return`${N.slice(0,k)}${b}`}function Ie(N,b,k){F(b,"offset"),(N[b]===void 0||N[b+k]===void 0)&&H(b,N.length-(k+1))}function ee(N,b,k,z,U,Z){if(N>k||N<b){const de=typeof b=="bigint"?"n":"";let Fe;throw b===0||b===BigInt(0)?Fe=`>= 0${de} and < 2${de} ** ${(Z+1)*8}${de}`:Fe=`>= -(2${de} ** ${(Z+1)*8-1}${de}) and < 2 ** ${(Z+1)*8-1}${de}`,new te.ERR_OUT_OF_RANGE("value",Fe,N)}Ie(z,U,Z)}function F(N,b){if(typeof N!="number")throw new te.ERR_INVALID_ARG_TYPE(b,"number",N)}function H(N,b,k){throw Math.floor(N)!==N?(F(N,k),new te.ERR_OUT_OF_RANGE("offset","an integer",N)):b<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,N)}const oe=/[^+/0-9A-Za-z-_]/g;function he(N){if(N=N.split("=")[0],N=N.trim().replace(oe,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function Se(N,b){b=b||1/0;let k;const z=N.length;let U=null;const Z=[];for(let de=0;de<z;++de){if(k=N.charCodeAt(de),k>55295&&k<57344){if(!U){if(k>56319){(b-=3)>-1&&Z.push(239,191,189);continue}else if(de+1===z){(b-=3)>-1&&Z.push(239,191,189);continue}U=k;continue}if(k<56320){(b-=3)>-1&&Z.push(239,191,189),U=k;continue}k=(U-55296<<10|k-56320)+65536}else U&&(b-=3)>-1&&Z.push(239,191,189);if(U=null,k<128){if((b-=1)<0)break;Z.push(k)}else if(k<2048){if((b-=2)<0)break;Z.push(k>>6|192,k&63|128)}else if(k<65536){if((b-=3)<0)break;Z.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((b-=4)<0)break;Z.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return Z}function Re(N){const b=[];for(let k=0;k<N.length;++k)b.push(N.charCodeAt(k)&255);return b}function K(N,b){let k,z,U;const Z=[];for(let de=0;de<N.length&&!((b-=2)<0);++de)k=N.charCodeAt(de),z=k>>8,U=k%256,Z.push(U),Z.push(z);return Z}function ye(N){return s.toByteArray(he(N))}function Ne(N,b,k,z){let U;for(U=0;U<z&&!(U+k>=b.length||U>=N.length);++U)b[U+k]=N[U];return U}function Ee(N,b){return N instanceof b||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===b.name}function De(N){return N!==N}const Je=(function(){const N="0123456789abcdef",b=new Array(256);for(let k=0;k<16;++k){const z=k*16;for(let U=0;U<16;++U)b[z+U]=N[k]+N[U]}return b})();function Ye(N){return typeof BigInt>"u"?rt:N}function rt(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class r extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError(`Expected input to be an Array, got ${typeof o}`);let i="";for(let l=0;l<o.length;l++)i+=`    ${o[l].stack}
`;super(i),this.name="AggregateError",this.errors=o}}return primordials={AggregateError:r,ArrayIsArray(s){return Array.isArray(s)},ArrayPrototypeIncludes(s,o){return s.includes(o)},ArrayPrototypeIndexOf(s,o){return s.indexOf(o)},ArrayPrototypeJoin(s,o){return s.join(o)},ArrayPrototypeMap(s,o){return s.map(o)},ArrayPrototypePop(s,o){return s.pop(o)},ArrayPrototypePush(s,o){return s.push(o)},ArrayPrototypeSlice(s,o,i){return s.slice(o,i)},Error,FunctionPrototypeCall(s,o,...i){return s.call(o,...i)},FunctionPrototypeSymbolHasInstance(s,o){return Function.prototype[Symbol.hasInstance].call(s,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(s,o){return Object.defineProperties(s,o)},ObjectDefineProperty(s,o,i){return Object.defineProperty(s,o,i)},ObjectGetOwnPropertyDescriptor(s,o){return Object.getOwnPropertyDescriptor(s,o)},ObjectKeys(s){return Object.keys(s)},ObjectSetPrototypeOf(s,o){return Object.setPrototypeOf(s,o)},Promise,PromisePrototypeCatch(s,o){return s.catch(o)},PromisePrototypeThen(s,o,i){return s.then(o,i)},PromiseReject(s){return Promise.reject(s)},PromiseResolve(s){return Promise.resolve(s)},ReflectApply:Reflect.apply,RegExpPrototypeTest(s,o){return s.test(o)},SafeSet:Set,String,StringPrototypeSlice(s,o,i){return s.slice(o,i)},StringPrototypeToLowerCase(s){return s.toLowerCase()},StringPrototypeToUpperCase(s){return s.toUpperCase()},StringPrototypeTrim(s){return s.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(s,o,i){return s.set(o,i)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(r,...s){return r.replace(/%([sdifj])/g,function(...[o,i]){const l=s.shift();return i==="f"?l.toFixed(6):i==="j"?JSON.stringify(l):i==="s"&&typeof l=="object"?`${l.constructor!==Object?l.constructor.name:""} {}`.trim():l.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:r,inspect:s}=requireInspect(),{AggregateError:o}=requirePrimordials(),i=globalThis.AggregateError||o,l=Symbol("kIsNodeError"),f=["string","function","number","object","Function","Object","boolean","bigint","symbol"],d=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",y={};function u(S,j){if(!S)throw new y.ERR_INTERNAL_ASSERTION(j)}function x(S){let j="",T=S.length;const C=S[0]==="-"?1:0;for(;T>=C+4;T-=3)j=`_${S.slice(T-3,T)}${j}`;return`${S.slice(0,T)}${j}`}function g(S,j,T){if(typeof j=="function")return u(j.length<=T.length,`Code: ${S}; The provided arguments length (${T.length}) does not match the required ones (${j.length}).`),j(...T);const C=(j.match(/%[dfijoOs]/g)||[]).length;return u(C===T.length,`Code: ${S}; The provided arguments length (${T.length}) does not match the required ones (${C}).`),T.length===0?j:r(j,...T)}function h(S,j,T){T||(T=Error);class C extends T{constructor(...L){super(g(S,j,L))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(C.prototype,{name:{value:T.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),C.prototype.code=S,C.prototype[l]=!0,y[S]=C}function m(S){const j=c+S.name;return Object.defineProperty(S,"name",{value:j}),S}function E(S,j){if(S&&j&&S!==j){if(Array.isArray(j.errors))return j.errors.push(S),j;const T=new i([j,S],j.message);return T.code=j.code,T}return S||j}class w extends Error{constructor(j="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new y.ERR_INVALID_ARG_TYPE("options","Object",T);super(j,T),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(S,j,T)=>{u(typeof S=="string","'name' must be a string"),Array.isArray(j)||(j=[j]);let C="The ";S.endsWith(" argument")?C+=`${S} `:C+=`"${S}" ${S.includes(".")?"property":"argument"} `,C+="must be ";const B=[],L=[],_=[];for(const P of j)u(typeof P=="string","All expected entries have to be of type string"),f.includes(P)?B.push(P.toLowerCase()):d.test(P)?L.push(P):(u(P!=="object",'The value "object" should be written as "Object"'),_.push(P));if(L.length>0){const P=B.indexOf("object");P!==-1&&(B.splice(B,P,1),L.push("Object"))}if(B.length>0){switch(B.length){case 1:C+=`of type ${B[0]}`;break;case 2:C+=`one of type ${B[0]} or ${B[1]}`;break;default:{const P=B.pop();C+=`one of type ${B.join(", ")}, or ${P}`}}(L.length>0||_.length>0)&&(C+=" or ")}if(L.length>0){switch(L.length){case 1:C+=`an instance of ${L[0]}`;break;case 2:C+=`an instance of ${L[0]} or ${L[1]}`;break;default:{const P=L.pop();C+=`an instance of ${L.join(", ")}, or ${P}`}}_.length>0&&(C+=" or ")}switch(_.length){case 0:break;case 1:_[0].toLowerCase()!==_[0]&&(C+="an "),C+=`${_[0]}`;break;case 2:C+=`one of ${_[0]} or ${_[1]}`;break;default:{const P=_.pop();C+=`one of ${_.join(", ")}, or ${P}`}}if(T==null)C+=`. Received ${T}`;else if(typeof T=="function"&&T.name)C+=`. Received function ${T.name}`;else if(typeof T=="object"){var R;if((R=T.constructor)!==null&&R!==void 0&&R.name)C+=`. Received an instance of ${T.constructor.name}`;else{const P=s(T,{depth:-1});C+=`. Received ${P}`}}else{let P=s(T,{colors:!1});P.length>25&&(P=`${P.slice(0,25)}...`),C+=`. Received type ${typeof T} (${P})`}return C},TypeError),h("ERR_INVALID_ARG_VALUE",(S,j,T="is invalid")=>{let C=s(j);return C.length>128&&(C=C.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${T}. Received ${C}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(S,j,T)=>{var C;const B=T!=null&&(C=T.constructor)!==null&&C!==void 0&&C.name?`instance of ${T.constructor.name}`:`type ${typeof T}`;return`Expected ${S} to be returned from the "${j}" function but got ${B}.`},TypeError),h("ERR_MISSING_ARGS",(...S)=>{u(S.length>0,"At least one arg needs to be specified");let j;const T=S.length;switch(S=(Array.isArray(S)?S:[S]).map(C=>`"${C}"`).join(" or "),T){case 1:j+=`The ${S[0]} argument`;break;case 2:j+=`The ${S[0]} and ${S[1]} arguments`;break;default:{const C=S.pop();j+=`The ${S.join(", ")}, and ${C} arguments`}break}return`${j} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(S,j,T)=>{u(j,'Missing "range" argument');let C;if(Number.isInteger(T)&&Math.abs(T)>2**32)C=x(String(T));else if(typeof T=="bigint"){C=String(T);const B=BigInt(2)**BigInt(32);(T>B||T<-B)&&(C=x(C)),C+="n"}else C=s(T);return`The value of "${S}" is out of range. It must be ${j}. Received ${C}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:w,aggregateTwoErrors:m(E),hideStackFrames:m,codes:y},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:r,AbortSignal:s}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=r,browser$1.exports.AbortSignal=s,browser$1.exports.default=r,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var r=typeof Reflect=="object"?Reflect:null,s=r&&typeof r.apply=="function"?r.apply:function(L,_,R){return Function.prototype.apply.call(L,_,R)},o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:o=function(L){return Object.getOwnPropertyNames(L)};function i(B){console&&console.warn&&console.warn(B)}var l=Number.isNaN||function(L){return L!==L};function f(){f.init.call(this)}events.exports=f,events.exports.once=j,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var d=10;function c(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(B){if(typeof B!="number"||B<0||l(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");d=B}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||l(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function y(B){return B._maxListeners===void 0?f.defaultMaxListeners:B._maxListeners}f.prototype.getMaxListeners=function(){return y(this)},f.prototype.emit=function(L){for(var _=[],R=1;R<arguments.length;R++)_.push(arguments[R]);var P=L==="error",le=this._events;if(le!==void 0)P=P&&le.error===void 0;else if(!P)return!1;if(P){var W;if(_.length>0&&(W=_[0]),W instanceof Error)throw W;var V=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw V.context=W,V}var se=le[L];if(se===void 0)return!1;if(typeof se=="function")s(se,this,_);else for(var Q=se.length,J=E(se,Q),R=0;R<Q;++R)s(J[R],this,_);return!0};function u(B,L,_,R){var P,le,W;if(c(_),le=B._events,le===void 0?(le=B._events=Object.create(null),B._eventsCount=0):(le.newListener!==void 0&&(B.emit("newListener",L,_.listener?_.listener:_),le=B._events),W=le[L]),W===void 0)W=le[L]=_,++B._eventsCount;else if(typeof W=="function"?W=le[L]=R?[_,W]:[W,_]:R?W.unshift(_):W.push(_),P=y(B),P>0&&W.length>P&&!W.warned){W.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=B,V.type=L,V.count=W.length,i(V)}return B}f.prototype.addListener=function(L,_){return u(this,L,_,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(L,_){return u(this,L,_,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(B,L,_){var R={fired:!1,wrapFn:void 0,target:B,type:L,listener:_},P=x.bind(R);return P.listener=_,R.wrapFn=P,P}f.prototype.once=function(L,_){return c(_),this.on(L,g(this,L,_)),this},f.prototype.prependOnceListener=function(L,_){return c(_),this.prependListener(L,g(this,L,_)),this},f.prototype.removeListener=function(L,_){var R,P,le,W,V;if(c(_),P=this._events,P===void 0)return this;if(R=P[L],R===void 0)return this;if(R===_||R.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete P[L],P.removeListener&&this.emit("removeListener",L,R.listener||_));else if(typeof R!="function"){for(le=-1,W=R.length-1;W>=0;W--)if(R[W]===_||R[W].listener===_){V=R[W].listener,le=W;break}if(le<0)return this;le===0?R.shift():w(R,le),R.length===1&&(P[L]=R[0]),P.removeListener!==void 0&&this.emit("removeListener",L,V||_)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(L){var _,R,P;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[L]),this;if(arguments.length===0){var le=Object.keys(R),W;for(P=0;P<le.length;++P)W=le[P],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=R[L],typeof _=="function")this.removeListener(L,_);else if(_!==void 0)for(P=_.length-1;P>=0;P--)this.removeListener(L,_[P]);return this};function h(B,L,_){var R=B._events;if(R===void 0)return[];var P=R[L];return P===void 0?[]:typeof P=="function"?_?[P.listener||P]:[P]:_?S(P):E(P,P.length)}f.prototype.listeners=function(L){return h(this,L,!0)},f.prototype.rawListeners=function(L){return h(this,L,!1)},f.listenerCount=function(B,L){return typeof B.listenerCount=="function"?B.listenerCount(L):m.call(B,L)},f.prototype.listenerCount=m;function m(B){var L=this._events;if(L!==void 0){var _=L[B];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function E(B,L){for(var _=new Array(L),R=0;R<L;++R)_[R]=B[R];return _}function w(B,L){for(;L+1<B.length;L++)B[L]=B[L+1];B.pop()}function S(B){for(var L=new Array(B.length),_=0;_<L.length;++_)L[_]=B[_].listener||B[_];return L}function j(B,L){return new Promise(function(_,R){function P(W){B.removeListener(L,le),R(W)}function le(){typeof B.removeListener=="function"&&B.removeListener("error",P),_([].slice.call(arguments))}C(B,L,le,{once:!0}),L!=="error"&&T(B,P,{once:!0})})}function T(B,L,_){typeof B.on=="function"&&C(B,"error",L,_)}function C(B,L,_,R){if(typeof B.on=="function")R.once?B.once(L,_):B.on(L,_);else if(typeof B.addEventListener=="function")B.addEventListener(L,function P(le){R.once&&B.removeEventListener(L,P),_(le)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(r){const s=requireBuffer(),{format:o,inspect:i}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:l}}=requireErrors(),{kResistStopPropagation:f,AggregateError:d,SymbolDispose:c}=requirePrimordials(),y=globalThis.AbortSignal||requireBrowser$2().AbortSignal,u=globalThis.AbortController||requireBrowser$2().AbortController,x=Object.getPrototypeOf(async function(){}).constructor,g=globalThis.Blob||s.Blob,h=typeof g<"u"?function(S){return S instanceof g}:function(S){return!1},m=(w,S)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new l(S,"AbortSignal",w)},E=(w,S)=>{if(typeof w!="function")throw new l(S,"Function",w)};r.exports={AggregateError:d,kEmptyObject:Object.freeze({}),once(w){let S=!1;return function(...j){S||(S=!0,w.apply(this,j))}},createDeferredPromise:function(){let w,S;return{promise:new Promise((T,C)=>{w=T,S=C}),resolve:w,reject:S}},promisify(w){return new Promise((S,j)=>{w((T,...C)=>T?j(T):S(...C))})},debuglog(){return function(){}},format:o,inspect:i,types:{isAsyncFunction(w){return w instanceof x},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:h,deprecate(w,S){return w},addAbortListener:requireEvents().addAbortListener||function(S,j){if(S===void 0)throw new l("signal","AbortSignal",S);m(S,"signal"),E(j,"listener");let T;return S.aborted?queueMicrotask(()=>j()):(S.addEventListener("abort",j,{__proto__:null,once:!0,[f]:!0}),T=()=>{S.removeEventListener("abort",j)}),{__proto__:null,[c](){var C;(C=T)===null||C===void 0||C()}}},AbortSignalAny:y.any||function(S){if(S.length===1)return S[0];const j=new u,T=()=>j.abort();return S.forEach(C=>{m(C,"signals"),C.addEventListener("abort",T,{once:!0})}),j.signal.addEventListener("abort",()=>{S.forEach(C=>C.removeEventListener("abort",T))},{once:!0}),j.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:s,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:l,NumberIsNaN:f,NumberMAX_SAFE_INTEGER:d,NumberMIN_SAFE_INTEGER:c,NumberParseInt:y,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:x,String:g,StringPrototypeToUpperCase:h,StringPrototypeTrim:m}=requirePrimordials(),{hideStackFrames:E,codes:{ERR_SOCKET_BAD_PORT:w,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:j,ERR_OUT_OF_RANGE:T,ERR_UNKNOWN_SIGNAL:C}}=requireErrors(),{normalizeEncoding:B}=requireUtil(),{isAsyncFunction:L,isArrayBufferView:_}=requireUtil().types,R={};function P(K){return K===(K|0)}function le(K){return K===K>>>0}const W=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function se(K,ye,Ne){if(typeof K>"u"&&(K=Ne),typeof K=="string"){if(x(W,K)===null)throw new j(ye,K,V);K=y(K,8)}return ge(K,ye),K}const Q=E((K,ye,Ne=c,Ee=d)=>{if(typeof K!="number")throw new S(ye,"number",K);if(!l(K))throw new T(ye,"an integer",K);if(K<Ne||K>Ee)throw new T(ye,`>= ${Ne} && <= ${Ee}`,K)}),J=E((K,ye,Ne=-2147483648,Ee=2147483647)=>{if(typeof K!="number")throw new S(ye,"number",K);if(!l(K))throw new T(ye,"an integer",K);if(K<Ne||K>Ee)throw new T(ye,`>= ${Ne} && <= ${Ee}`,K)}),ge=E((K,ye,Ne=!1)=>{if(typeof K!="number")throw new S(ye,"number",K);if(!l(K))throw new T(ye,"an integer",K);const Ee=Ne?1:0,De=4294967295;if(K<Ee||K>De)throw new T(ye,`>= ${Ee} && <= ${De}`,K)});function we(K,ye){if(typeof K!="string")throw new S(ye,"string",K)}function Pe(K,ye,Ne=void 0,Ee){if(typeof K!="number")throw new S(ye,"number",K);if(Ne!=null&&K<Ne||Ee!=null&&K>Ee||(Ne!=null||Ee!=null)&&f(K))throw new T(ye,`${Ne!=null?`>= ${Ne}`:""}${Ne!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,K)}const q=E((K,ye,Ne)=>{if(!s(Ne,K)){const De="must be one of: "+o(i(Ne,Je=>typeof Je=="string"?`'${Je}'`:g(Je)),", ");throw new j(ye,K,De)}});function me(K,ye){if(typeof K!="boolean")throw new S(ye,"boolean",K)}function A(K,ye,Ne){return K==null||!u(K,ye)?Ne:K[ye]}const D=E((K,ye,Ne=null)=>{const Ee=A(Ne,"allowArray",!1),De=A(Ne,"allowFunction",!1);if(!A(Ne,"nullable",!1)&&K===null||!Ee&&r(K)||typeof K!="object"&&(!De||typeof K!="function"))throw new S(ye,"Object",K)}),G=E((K,ye)=>{if(K!=null&&typeof K!="object"&&typeof K!="function")throw new S(ye,"a dictionary",K)}),ae=E((K,ye,Ne=0)=>{if(!r(K))throw new S(ye,"Array",K);if(K.length<Ne){const Ee=`must be longer than ${Ne}`;throw new j(ye,K,Ee)}});function ne(K,ye){ae(K,ye);for(let Ne=0;Ne<K.length;Ne++)we(K[Ne],`${ye}[${Ne}]`)}function fe(K,ye){ae(K,ye);for(let Ne=0;Ne<K.length;Ne++)me(K[Ne],`${ye}[${Ne}]`)}function xe(K,ye){ae(K,ye);for(let Ne=0;Ne<K.length;Ne++){const Ee=K[Ne],De=`${ye}[${Ne}]`;if(Ee==null)throw new S(De,"AbortSignal",Ee);Ie(Ee,De)}}function ke(K,ye="signal"){if(we(K,ye),R[K]===void 0)throw R[h(K)]!==void 0?new C(K+" (signals must use all capital letters)"):new C(K)}const te=E((K,ye="buffer")=>{if(!_(K))throw new S(ye,["Buffer","TypedArray","DataView"],K)});function ie(K,ye){const Ne=B(ye),Ee=K.length;if(Ne==="hex"&&Ee%2!==0)throw new j("encoding",ye,`is invalid for data of length ${Ee}`)}function be(K,ye="Port",Ne=!0){if(typeof K!="number"&&typeof K!="string"||typeof K=="string"&&m(K).length===0||+K!==+K>>>0||K>65535||K===0&&!Ne)throw new w(ye,K,Ne);return K|0}const Ie=E((K,ye)=>{if(K!==void 0&&(K===null||typeof K!="object"||!("aborted"in K)))throw new S(ye,"AbortSignal",K)}),ee=E((K,ye)=>{if(typeof K!="function")throw new S(ye,"Function",K)}),F=E((K,ye)=>{if(typeof K!="function"||L(K))throw new S(ye,"Function",K)}),H=E((K,ye)=>{if(K!==void 0)throw new S(ye,"undefined",K)});function oe(K,ye,Ne){if(!s(Ne,K))throw new S(ye,`('${o(Ne,"|")}')`,K)}const he=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Se(K,ye){if(typeof K>"u"||!x(he,K))throw new j(ye,K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Re(K){if(typeof K=="string")return Se(K,"hints"),K;if(r(K)){const ye=K.length;let Ne="";if(ye===0)return Ne;for(let Ee=0;Ee<ye;Ee++){const De=K[Ee];Se(De,"hints"),Ne+=De,Ee!==ye-1&&(Ne+=", ")}return Ne}throw new j("hints",K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:P,isUint32:le,parseFileMode:se,validateArray:ae,validateStringArray:ne,validateBooleanArray:fe,validateAbortSignalArray:xe,validateBoolean:me,validateBuffer:te,validateDictionary:G,validateEncoding:ie,validateFunction:ee,validateInt32:J,validateInteger:Q,validateNumber:Pe,validateObject:D,validateOneOf:q,validatePlainFunction:F,validatePort:be,validateSignalName:ke,validateString:we,validateUint32:ge,validateUndefined:H,validateUnion:oe,validateAbortSignal:Ie,validateLinkHeaderValue:Re},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var r=browser.exports={},s,o;function i(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=i}catch{s=i}try{typeof clearTimeout=="function"?o=clearTimeout:o=l}catch{o=l}})();function f(w){if(s===setTimeout)return setTimeout(w,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(w,0);try{return s(w,0)}catch{try{return s.call(null,w,0)}catch{return s.call(this,w,0)}}}function d(w){if(o===clearTimeout)return clearTimeout(w);if((o===l||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(w);try{return o(w)}catch{try{return o.call(null,w)}catch{return o.call(this,w)}}}var c=[],y=!1,u,x=-1;function g(){!y||!u||(y=!1,u.length?c=u.concat(c):x=-1,c.length&&h())}function h(){if(!y){var w=f(g);y=!0;for(var S=c.length;S;){for(u=c,c=[];++x<S;)u&&u[x].run();x=-1,S=c.length}u=null,y=!1,d(w)}}r.nextTick=function(w){var S=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)S[j-1]=arguments[j];c.push(new m(w,S)),c.length===1&&!y&&f(h)};function m(w,S){this.fun=w,this.array=S}m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function E(){}return r.on=E,r.addListener=E,r.once=E,r.off=E,r.removeListener=E,r.removeAllListeners=E,r.emit=E,r.prependListener=E,r.prependOnceListener=E,r.listeners=function(w){return[]},r.binding=function(w){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(w){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:r,SymbolIterator:s,SymbolFor:o}=requirePrimordials(),i=o("nodejs.stream.destroyed"),l=o("nodejs.stream.errored"),f=o("nodejs.stream.readable"),d=o("nodejs.stream.writable"),c=o("nodejs.stream.disturbed"),y=o("nodejs.webstream.isClosedPromise"),u=o("nodejs.webstream.controllerErrorFunction");function x(A,D=!1){var G;return!!(A&&typeof A.pipe=="function"&&typeof A.on=="function"&&(!D||typeof A.pause=="function"&&typeof A.resume=="function")&&(!A._writableState||((G=A._readableState)===null||G===void 0?void 0:G.readable)!==!1)&&(!A._writableState||A._readableState))}function g(A){var D;return!!(A&&typeof A.write=="function"&&typeof A.on=="function"&&(!A._readableState||((D=A._writableState)===null||D===void 0?void 0:D.writable)!==!1))}function h(A){return!!(A&&typeof A.pipe=="function"&&A._readableState&&typeof A.on=="function"&&typeof A.write=="function")}function m(A){return A&&(A._readableState||A._writableState||typeof A.write=="function"&&typeof A.on=="function"||typeof A.pipe=="function"&&typeof A.on=="function")}function E(A){return!!(A&&!m(A)&&typeof A.pipeThrough=="function"&&typeof A.getReader=="function"&&typeof A.cancel=="function")}function w(A){return!!(A&&!m(A)&&typeof A.getWriter=="function"&&typeof A.abort=="function")}function S(A){return!!(A&&!m(A)&&typeof A.readable=="object"&&typeof A.writable=="object")}function j(A){return E(A)||w(A)||S(A)}function T(A,D){return A==null?!1:D===!0?typeof A[r]=="function":D===!1?typeof A[s]=="function":typeof A[r]=="function"||typeof A[s]=="function"}function C(A){if(!m(A))return null;const D=A._writableState,G=A._readableState,ae=D||G;return!!(A.destroyed||A[i]||ae!=null&&ae.destroyed)}function B(A){if(!g(A))return null;if(A.writableEnded===!0)return!0;const D=A._writableState;return D!=null&&D.errored?!1:typeof D?.ended!="boolean"?null:D.ended}function L(A,D){if(!g(A))return null;if(A.writableFinished===!0)return!0;const G=A._writableState;return G!=null&&G.errored?!1:typeof G?.finished!="boolean"?null:!!(G.finished||D===!1&&G.ended===!0&&G.length===0)}function _(A){if(!x(A))return null;if(A.readableEnded===!0)return!0;const D=A._readableState;return!D||D.errored?!1:typeof D?.ended!="boolean"?null:D.ended}function R(A,D){if(!x(A))return null;const G=A._readableState;return G!=null&&G.errored?!1:typeof G?.endEmitted!="boolean"?null:!!(G.endEmitted||D===!1&&G.ended===!0&&G.length===0)}function P(A){return A&&A[f]!=null?A[f]:typeof A?.readable!="boolean"?null:C(A)?!1:x(A)&&A.readable&&!R(A)}function le(A){return A&&A[d]!=null?A[d]:typeof A?.writable!="boolean"?null:C(A)?!1:g(A)&&A.writable&&!B(A)}function W(A,D){return m(A)?C(A)?!0:!(D?.readable!==!1&&P(A)||D?.writable!==!1&&le(A)):null}function V(A){var D,G;return m(A)?A.writableErrored?A.writableErrored:(D=(G=A._writableState)===null||G===void 0?void 0:G.errored)!==null&&D!==void 0?D:null:null}function se(A){var D,G;return m(A)?A.readableErrored?A.readableErrored:(D=(G=A._readableState)===null||G===void 0?void 0:G.errored)!==null&&D!==void 0?D:null:null}function Q(A){if(!m(A))return null;if(typeof A.closed=="boolean")return A.closed;const D=A._writableState,G=A._readableState;return typeof D?.closed=="boolean"||typeof G?.closed=="boolean"?D?.closed||G?.closed:typeof A._closed=="boolean"&&J(A)?A._closed:null}function J(A){return typeof A._closed=="boolean"&&typeof A._defaultKeepAlive=="boolean"&&typeof A._removedConnection=="boolean"&&typeof A._removedContLen=="boolean"}function ge(A){return typeof A._sent100=="boolean"&&J(A)}function we(A){var D;return typeof A._consuming=="boolean"&&typeof A._dumped=="boolean"&&((D=A.req)===null||D===void 0?void 0:D.upgradeOrConnect)===void 0}function Pe(A){if(!m(A))return null;const D=A._writableState,G=A._readableState,ae=D||G;return!ae&&ge(A)||!!(ae&&ae.autoDestroy&&ae.emitClose&&ae.closed===!1)}function q(A){var D;return!!(A&&((D=A[c])!==null&&D!==void 0?D:A.readableDidRead||A.readableAborted))}function me(A){var D,G,ae,ne,fe,xe,ke,te,ie,be;return!!(A&&((D=(G=(ae=(ne=(fe=(xe=A[l])!==null&&xe!==void 0?xe:A.readableErrored)!==null&&fe!==void 0?fe:A.writableErrored)!==null&&ne!==void 0?ne:(ke=A._readableState)===null||ke===void 0?void 0:ke.errorEmitted)!==null&&ae!==void 0?ae:(te=A._writableState)===null||te===void 0?void 0:te.errorEmitted)!==null&&G!==void 0?G:(ie=A._readableState)===null||ie===void 0?void 0:ie.errored)!==null&&D!==void 0?D:!((be=A._writableState)===null||be===void 0)&&be.errored))}return utils={isDestroyed:C,kIsDestroyed:i,isDisturbed:q,kIsDisturbed:c,isErrored:me,kIsErrored:l,isReadable:P,kIsReadable:f,kIsClosedPromise:y,kControllerErrorFunction:u,kIsWritable:d,isClosed:Q,isDuplexNodeStream:h,isFinished:W,isIterable:T,isReadableNodeStream:x,isReadableStream:E,isReadableEnded:_,isReadableFinished:R,isReadableErrored:se,isNodeStream:m,isWebStream:j,isWritable:le,isWritableNodeStream:g,isWritableStream:w,isWritableEnded:B,isWritableFinished:L,isWritableErrored:V,isServerRequest:we,isServerResponse:ge,willEmitClose:Pe,isTransformStream:S},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const r=requireBrowser$1(),{AbortError:s,codes:o}=requireErrors(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:l}=o,{kEmptyObject:f,once:d}=requireUtil(),{validateAbortSignal:c,validateFunction:y,validateObject:u,validateBoolean:x}=requireValidators(),{Promise:g,PromisePrototypeThen:h,SymbolDispose:m}=requirePrimordials(),{isClosed:E,isReadable:w,isReadableNodeStream:S,isReadableStream:j,isReadableFinished:T,isReadableErrored:C,isWritable:B,isWritableNodeStream:L,isWritableStream:_,isWritableFinished:R,isWritableErrored:P,isNodeStream:le,willEmitClose:W,kIsClosedPromise:V}=requireUtils();let se;function Q(q){return q.setHeader&&typeof q.abort=="function"}const J=()=>{};function ge(q,me,A){var D,G;if(arguments.length===2?(A=me,me=f):me==null?me=f:u(me,"options"),y(A,"callback"),c(me.signal,"options.signal"),A=d(A),j(q)||_(q))return we(q,me,A);if(!le(q))throw new i("stream",["ReadableStream","WritableStream","Stream"],q);const ae=(D=me.readable)!==null&&D!==void 0?D:S(q),ne=(G=me.writable)!==null&&G!==void 0?G:L(q),fe=q._writableState,xe=q._readableState,ke=()=>{q.writable||be()};let te=W(q)&&S(q)===ae&&L(q)===ne,ie=R(q,!1);const be=()=>{ie=!0,q.destroyed&&(te=!1),!(te&&(!q.readable||ae))&&(!ae||Ie)&&A.call(q)};let Ie=T(q,!1);const ee=()=>{Ie=!0,q.destroyed&&(te=!1),!(te&&(!q.writable||ne))&&(!ne||ie)&&A.call(q)},F=K=>{A.call(q,K)};let H=E(q);const oe=()=>{H=!0;const K=P(q)||C(q);if(K&&typeof K!="boolean")return A.call(q,K);if(ae&&!Ie&&S(q,!0)&&!T(q,!1))return A.call(q,new l);if(ne&&!ie&&!R(q,!1))return A.call(q,new l);A.call(q)},he=()=>{H=!0;const K=P(q)||C(q);if(K&&typeof K!="boolean")return A.call(q,K);A.call(q)},Se=()=>{q.req.on("finish",be)};Q(q)?(q.on("complete",be),te||q.on("abort",oe),q.req?Se():q.on("request",Se)):ne&&!fe&&(q.on("end",ke),q.on("close",ke)),!te&&typeof q.aborted=="boolean"&&q.on("aborted",oe),q.on("end",ee),q.on("finish",be),me.error!==!1&&q.on("error",F),q.on("close",oe),H?r.nextTick(oe):fe!=null&&fe.errorEmitted||xe!=null&&xe.errorEmitted?te||r.nextTick(he):(!ae&&(!te||w(q))&&(ie||B(q)===!1)||!ne&&(!te||B(q))&&(Ie||w(q)===!1)||xe&&q.req&&q.aborted)&&r.nextTick(he);const Re=()=>{A=J,q.removeListener("aborted",oe),q.removeListener("complete",be),q.removeListener("abort",oe),q.removeListener("request",Se),q.req&&q.req.removeListener("finish",be),q.removeListener("end",ke),q.removeListener("close",ke),q.removeListener("finish",be),q.removeListener("end",ee),q.removeListener("error",F),q.removeListener("close",oe)};if(me.signal&&!H){const K=()=>{const ye=A;Re(),ye.call(q,new s(void 0,{cause:me.signal.reason}))};if(me.signal.aborted)r.nextTick(K);else{se=se||requireUtil().addAbortListener;const ye=se(me.signal,K),Ne=A;A=d((...Ee)=>{ye[m](),Ne.apply(q,Ee)})}}return Re}function we(q,me,A){let D=!1,G=J;if(me.signal)if(G=()=>{D=!0,A.call(q,new s(void 0,{cause:me.signal.reason}))},me.signal.aborted)r.nextTick(G);else{se=se||requireUtil().addAbortListener;const ne=se(me.signal,G),fe=A;A=d((...xe)=>{ne[m](),fe.apply(q,xe)})}const ae=(...ne)=>{D||r.nextTick(()=>A.apply(q,ne))};return h(q[V].promise,ae,ae),J}function Pe(q,me){var A;let D=!1;return me===null&&(me=f),(A=me)!==null&&A!==void 0&&A.cleanup&&(x(me.cleanup,"cleanup"),D=me.cleanup),new g((G,ae)=>{const ne=ge(q,me,fe=>{D&&ne(),fe?ae(fe):G()})})}return endOfStream.exports=ge,endOfStream.exports.finished=Pe,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const r=requireBrowser$1(),{aggregateTwoErrors:s,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=requireErrors(),{Symbol:l}=requirePrimordials(),{kIsDestroyed:f,isDestroyed:d,isFinished:c,isServerRequest:y}=requireUtils(),u=l("kDestroy"),x=l("kConstruct");function g(W,V,se){W&&(W.stack,V&&!V.errored&&(V.errored=W),se&&!se.errored&&(se.errored=W))}function h(W,V){const se=this._readableState,Q=this._writableState,J=Q||se;return Q!=null&&Q.destroyed||se!=null&&se.destroyed?(typeof V=="function"&&V(),this):(g(W,Q,se),Q&&(Q.destroyed=!0),se&&(se.destroyed=!0),J.constructed?m(this,W,V):this.once(u,function(ge){m(this,s(ge,W),V)}),this)}function m(W,V,se){let Q=!1;function J(ge){if(Q)return;Q=!0;const we=W._readableState,Pe=W._writableState;g(ge,Pe,we),Pe&&(Pe.closed=!0),we&&(we.closed=!0),typeof se=="function"&&se(ge),ge?r.nextTick(E,W,ge):r.nextTick(w,W)}try{W._destroy(V||null,J)}catch(ge){J(ge)}}function E(W,V){S(W,V),w(W)}function w(W){const V=W._readableState,se=W._writableState;se&&(se.closeEmitted=!0),V&&(V.closeEmitted=!0),(se!=null&&se.emitClose||V!=null&&V.emitClose)&&W.emit("close")}function S(W,V){const se=W._readableState,Q=W._writableState;Q!=null&&Q.errorEmitted||se!=null&&se.errorEmitted||(Q&&(Q.errorEmitted=!0),se&&(se.errorEmitted=!0),W.emit("error",V))}function j(){const W=this._readableState,V=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function T(W,V,se){const Q=W._readableState,J=W._writableState;if(J!=null&&J.destroyed||Q!=null&&Q.destroyed)return this;Q!=null&&Q.autoDestroy||J!=null&&J.autoDestroy?W.destroy(V):V&&(V.stack,J&&!J.errored&&(J.errored=V),Q&&!Q.errored&&(Q.errored=V),se?r.nextTick(S,W,V):S(W,V))}function C(W,V){if(typeof W._construct!="function")return;const se=W._readableState,Q=W._writableState;se&&(se.constructed=!1),Q&&(Q.constructed=!1),W.once(x,V),!(W.listenerCount(x)>1)&&r.nextTick(B,W)}function B(W){let V=!1;function se(Q){if(V){T(W,Q??new o);return}V=!0;const J=W._readableState,ge=W._writableState,we=ge||J;J&&(J.constructed=!0),ge&&(ge.constructed=!0),we.destroyed?W.emit(u,Q):Q?T(W,Q,!0):r.nextTick(L,W)}try{W._construct(Q=>{r.nextTick(se,Q)})}catch(Q){r.nextTick(se,Q)}}function L(W){W.emit(x)}function _(W){return W?.setHeader&&typeof W.abort=="function"}function R(W){W.emit("close")}function P(W,V){W.emit("error",V),r.nextTick(R,W)}function le(W,V){!W||d(W)||(!V&&!c(W)&&(V=new i),y(W)?(W.socket=null,W.destroy(V)):_(W)?W.abort():_(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(V):typeof W.close=="function"?W.close():V?r.nextTick(P,W,V):r.nextTick(R,W),W.destroyed||(W[f]=!0))}return destroy_1={construct:C,destroyer:le,destroy:h,undestroy:j,errorOrDestroy:T},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:s}=requirePrimordials(),{EventEmitter:o}=requireEvents();function i(f){o.call(this,f)}s(i.prototype,o.prototype),s(i,o),i.prototype.pipe=function(f,d){const c=this;function y(w){f.writable&&f.write(w)===!1&&c.pause&&c.pause()}c.on("data",y);function u(){c.readable&&c.resume&&c.resume()}f.on("drain",u),!f._isStdio&&(!d||d.end!==!1)&&(c.on("end",g),c.on("close",h));let x=!1;function g(){x||(x=!0,f.end())}function h(){x||(x=!0,typeof f.destroy=="function"&&f.destroy())}function m(w){E(),o.listenerCount(this,"error")===0&&this.emit("error",w)}l(c,"error",m),l(f,"error",m);function E(){c.removeListener("data",y),f.removeListener("drain",u),c.removeListener("end",g),c.removeListener("close",h),c.removeListener("error",m),f.removeListener("error",m),c.removeListener("end",E),c.removeListener("close",E),f.removeListener("close",E)}return c.on("end",E),c.on("close",E),f.on("close",E),f.emit("pipe",c),f};function l(f,d,c){if(typeof f.prependListener=="function")return f.prependListener(d,c);!f._events||!f._events[d]?f.on(d,c):r(f._events[d])?f._events[d].unshift(c):f._events[d]=[c,f._events[d]]}return legacy={Stream:i,prependListener:l},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(r){const{SymbolDispose:s}=requirePrimordials(),{AbortError:o,codes:i}=requireErrors(),{isNodeStream:l,isWebStream:f,kControllerErrorFunction:d}=requireUtils(),c=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:y}=i;let u;const x=(g,h)=>{if(typeof g!="object"||!("aborted"in g))throw new y(h,"AbortSignal",g)};r.exports.addAbortSignal=function(h,m){if(x(h,"signal"),!l(m)&&!f(m))throw new y("stream",["ReadableStream","WritableStream","Stream"],m);return r.exports.addAbortSignalNoValidate(h,m)},r.exports.addAbortSignalNoValidate=function(g,h){if(typeof g!="object"||!("aborted"in g))return h;const m=l(h)?()=>{h.destroy(new o(void 0,{cause:g.reason}))}:()=>{h[d](new o(void 0,{cause:g.reason}))};if(g.aborted)m();else{u=u||requireUtil().addAbortListener;const E=u(g,m);c(h,E[s])}return h}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:r,SymbolIterator:s,TypedArrayPrototypeSet:o,Uint8Array:i}=requirePrimordials(),{Buffer:l}=requireBuffer(),{inspect:f}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(c){const y={data:c,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}unshift(c){const y={data:c,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}shift(){if(this.length===0)return;const c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}clear(){this.head=this.tail=null,this.length=0}join(c){if(this.length===0)return"";let y=this.head,u=""+y.data;for(;(y=y.next)!==null;)u+=c+y.data;return u}concat(c){if(this.length===0)return l.alloc(0);const y=l.allocUnsafe(c>>>0);let u=this.head,x=0;for(;u;)o(y,u.data,x),x+=u.data.length,u=u.next;return y}consume(c,y){const u=this.head.data;if(c<u.length){const x=u.slice(0,c);return this.head.data=u.slice(c),x}return c===u.length?this.shift():y?this._getString(c):this._getBuffer(c)}first(){return this.head.data}*[s](){for(let c=this.head;c;c=c.next)yield c.data}_getString(c){let y="",u=this.head,x=0;do{const g=u.data;if(c>g.length)y+=g,c-=g.length;else{c===g.length?(y+=g,++x,u.next?this.head=u.next:this.head=this.tail=null):(y+=r(g,0,c),this.head=u,u.data=r(g,c));break}++x}while((u=u.next)!==null);return this.length-=x,y}_getBuffer(c){const y=l.allocUnsafe(c),u=c;let x=this.head,g=0;do{const h=x.data;if(c>h.length)o(y,h,u-c),c-=h.length;else{c===h.length?(o(y,h,u-c),++g,x.next?this.head=x.next:this.head=this.tail=null):(o(y,new i(h.buffer,h.byteOffset,c),u-c),this.head=x,x.data=h.slice(c));break}++g}while((x=x.next)!==null);return this.length-=g,y}[Symbol.for("nodejs.util.inspect.custom")](c,y){return f(this,{...y,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:r,NumberIsInteger:s}=requirePrimordials(),{validateInteger:o}=requireValidators(),{ERR_INVALID_ARG_VALUE:i}=requireErrors().codes;let l=16*1024,f=16;function d(x,g,h){return x.highWaterMark!=null?x.highWaterMark:g?x[h]:null}function c(x){return x?f:l}function y(x,g){o(g,"value",0),x?f=g:l=g}function u(x,g,h,m){const E=d(g,m,h);if(E!=null){if(!s(E)||E<0){const w=m?`options.${h}`:"options.highWaterMark";throw new i(w,E)}return r(E)}return c(x.objectMode)}return state={getHighWaterMark:u,getDefaultHighWaterMark:c,setDefaultHighWaterMark:y},state}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(r,s){var o=requireBuffer(),i=o.Buffer;function l(d,c){for(var y in d)c[y]=d[y]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=o:(l(o,s),s.Buffer=f);function f(d,c,y){return i(d,c,y)}f.prototype=Object.create(i.prototype),l(i,f),f.from=function(d,c,y){if(typeof d=="number")throw new TypeError("Argument must not be a number");return i(d,c,y)},f.alloc=function(d,c,y){if(typeof d!="number")throw new TypeError("Argument must be a number");var u=i(d);return c!==void 0?typeof y=="string"?u.fill(c,y):u.fill(c):u.fill(0),u},f.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return i(d)},f.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(d)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var r=requireSafeBuffer().Buffer,s=r.isEncoding||function(j){switch(j=""+j,j&&j.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(j){if(!j)return"utf8";for(var T;;)switch(j){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return j;default:if(T)return;j=(""+j).toLowerCase(),T=!0}}function i(j){var T=o(j);if(typeof T!="string"&&(r.isEncoding===s||!s(j)))throw new Error("Unknown encoding: "+j);return T||j}string_decoder.StringDecoder=l;function l(j){this.encoding=i(j);var T;switch(this.encoding){case"utf16le":this.text=g,this.end=h,T=4;break;case"utf8":this.fillLast=y,T=4;break;case"base64":this.text=m,this.end=E,T=3;break;default:this.write=w,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(T)}l.prototype.write=function(j){if(j.length===0)return"";var T,C;if(this.lastNeed){if(T=this.fillLast(j),T===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<j.length?T?T+this.text(j,C):this.text(j,C):T||""},l.prototype.end=x,l.prototype.text=u,l.prototype.fillLast=function(j){if(this.lastNeed<=j.length)return j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,j.length),this.lastNeed-=j.length};function f(j){return j<=127?0:j>>5===6?2:j>>4===14?3:j>>3===30?4:j>>6===2?-1:-2}function d(j,T,C){var B=T.length-1;if(B<C)return 0;var L=f(T[B]);return L>=0?(L>0&&(j.lastNeed=L-1),L):--B<C||L===-2?0:(L=f(T[B]),L>=0?(L>0&&(j.lastNeed=L-2),L):--B<C||L===-2?0:(L=f(T[B]),L>=0?(L>0&&(L===2?L=0:j.lastNeed=L-3),L):0))}function c(j,T,C){if((T[0]&192)!==128)return j.lastNeed=0,"";if(j.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return j.lastNeed=1,"";if(j.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return j.lastNeed=2,""}}function y(j){var T=this.lastTotal-this.lastNeed,C=c(this,j);if(C!==void 0)return C;if(this.lastNeed<=j.length)return j.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,T,0,j.length),this.lastNeed-=j.length}function u(j,T){var C=d(this,j,T);if(!this.lastNeed)return j.toString("utf8",T);this.lastTotal=C;var B=j.length-(C-this.lastNeed);return j.copy(this.lastChar,0,B),j.toString("utf8",T,B)}function x(j){var T=j&&j.length?this.write(j):"";return this.lastNeed?T+"":T}function g(j,T){if((j.length-T)%2===0){var C=j.toString("utf16le",T);if(C){var B=C.charCodeAt(C.length-1);if(B>=55296&&B<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=j[j.length-1],j.toString("utf16le",T,j.length-1)}function h(j){var T=j&&j.length?this.write(j):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,C)}return T}function m(j,T){var C=(j.length-T)%3;return C===0?j.toString("base64",T):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=j[j.length-1]:(this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1]),j.toString("base64",T,j.length-C))}function E(j){var T=j&&j.length?this.write(j):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function w(j){return j.toString(this.encoding)}function S(j){return j&&j.length?this.write(j):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const r=requireBrowser$1(),{PromisePrototypeThen:s,SymbolAsyncIterator:o,SymbolIterator:i}=requirePrimordials(),{Buffer:l}=requireBuffer(),{ERR_INVALID_ARG_TYPE:f,ERR_STREAM_NULL_VALUES:d}=requireErrors().codes;function c(y,u,x){let g;if(typeof u=="string"||u instanceof l)return new y({objectMode:!0,...x,read(){this.push(u),this.push(null)}});let h;if(u&&u[o])h=!0,g=u[o]();else if(u&&u[i])h=!1,g=u[i]();else throw new f("iterable",["Iterable"],u);const m=new y({objectMode:!0,highWaterMark:1,...x});let E=!1;m._read=function(){E||(E=!0,S())},m._destroy=function(j,T){s(w(j),()=>r.nextTick(T,j),C=>r.nextTick(T,C||j))};async function w(j){const T=j!=null,C=typeof g.throw=="function";if(T&&C){const{value:B,done:L}=await g.throw(j);if(await B,L)return}if(typeof g.return=="function"){const{value:B}=await g.return();await B}}async function S(){for(;;){try{const{value:j,done:T}=h?await g.next():g.next();if(T)m.push(null);else{const C=j&&typeof j.then=="function"?await j:j;if(C===null)throw E=!1,new d;if(m.push(C))continue;E=!1}}catch(j){m.destroy(j)}break}}return m}return from_1=c,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const r=requireBrowser$1(),{ArrayPrototypeIndexOf:s,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:l,ObjectDefineProperties:f,ObjectKeys:d,ObjectSetPrototypeOf:c,Promise:y,SafeSet:u,SymbolAsyncDispose:x,SymbolAsyncIterator:g,Symbol:h}=requirePrimordials();readable=Ee,Ee.ReadableState=Ne;const{EventEmitter:m}=requireEvents(),{Stream:E,prependListener:w}=requireLegacy(),{Buffer:S}=requireBuffer(),{addAbortSignal:j}=requireAddAbortSignal(),T=requireEndOfStream();let C=requireUtil().debuglog("stream",M=>{C=M});const B=requireBuffer_list(),L=requireDestroy(),{getHighWaterMark:_,getDefaultHighWaterMark:R}=requireState(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_OUT_OF_RANGE:V,ERR_STREAM_PUSH_AFTER_EOF:se,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Q},AbortError:J}=requireErrors(),{validateObject:ge}=requireValidators(),we=h("kPaused"),{StringDecoder:Pe}=requireString_decoder(),q=requireFrom();c(Ee.prototype,E.prototype),c(Ee,E);const me=()=>{},{errorOrDestroy:A}=L,D=1,G=2,ae=4,ne=8,fe=16,xe=32,ke=64,te=128,ie=256,be=512,Ie=1024,ee=2048,F=4096,H=8192,oe=16384,he=32768,Se=65536,Re=1<<17,K=1<<18;function ye(M){return{enumerable:!1,get(){return(this.state&M)!==0},set(O){O?this.state|=M:this.state&=~M}}}f(Ne.prototype,{objectMode:ye(D),ended:ye(G),endEmitted:ye(ae),reading:ye(ne),constructed:ye(fe),sync:ye(xe),needReadable:ye(ke),emittedReadable:ye(te),readableListening:ye(ie),resumeScheduled:ye(be),errorEmitted:ye(Ie),emitClose:ye(ee),autoDestroy:ye(F),destroyed:ye(H),closed:ye(oe),closeEmitted:ye(he),multiAwaitDrain:ye(Se),readingMore:ye(Re),dataEmitted:ye(K)});function Ne(M,O,Te){typeof Te!="boolean"&&(Te=O instanceof requireDuplex()),this.state=ee|F|fe|xe,M&&M.objectMode&&(this.state|=D),Te&&M&&M.readableObjectMode&&(this.state|=D),this.highWaterMark=M?_(this,M,"readableHighWaterMark",Te):R(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[we]=null,M&&M.emitClose===!1&&(this.state&=~ee),M&&M.autoDestroy===!1&&(this.state&=~F),this.errored=null,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,M&&M.encoding&&(this.decoder=new Pe(M.encoding),this.encoding=M.encoding)}function Ee(M){if(!(this instanceof Ee))return new Ee(M);const O=this instanceof requireDuplex();this._readableState=new Ne(M,this,O),M&&(typeof M.read=="function"&&(this._read=M.read),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&!O&&j(M.signal,this)),E.call(this,M),L.construct(this,()=>{this._readableState.needReadable&&U(this,this._readableState)})}Ee.prototype.destroy=L.destroy,Ee.prototype._undestroy=L.undestroy,Ee.prototype._destroy=function(M,O){O(M)},Ee.prototype[m.captureRejectionSymbol]=function(M){this.destroy(M)},Ee.prototype[x]=function(){let M;return this.destroyed||(M=this.readableEnded?null:new J,this.destroy(M)),new y((O,Te)=>T(this,je=>je&&je!==M?Te(je):O(null)))},Ee.prototype.push=function(M,O){return De(this,M,O,!1)},Ee.prototype.unshift=function(M,O){return De(this,M,O,!0)};function De(M,O,Te,je){C("readableAddChunk",O);const Be=M._readableState;let et;if((Be.state&D)===0&&(typeof O=="string"?(Te=Te||Be.defaultEncoding,Be.encoding!==Te&&(je&&Be.encoding?O=S.from(O,Te).toString(Be.encoding):(O=S.from(O,Te),Te=""))):O instanceof S?Te="":E._isUint8Array(O)?(O=E._uint8ArrayToBuffer(O),Te=""):O!=null&&(et=new le("chunk",["string","Buffer","Uint8Array"],O))),et)A(M,et);else if(O===null)Be.state&=~ne,b(M,Be);else if((Be.state&D)!==0||O&&O.length>0)if(je)if((Be.state&ae)!==0)A(M,new Q);else{if(Be.destroyed||Be.errored)return!1;Je(M,Be,O,!0)}else if(Be.ended)A(M,new se);else{if(Be.destroyed||Be.errored)return!1;Be.state&=~ne,Be.decoder&&!Te?(O=Be.decoder.write(O),Be.objectMode||O.length!==0?Je(M,Be,O,!1):U(M,Be)):Je(M,Be,O,!1)}else je||(Be.state&=~ne,U(M,Be));return!Be.ended&&(Be.length<Be.highWaterMark||Be.length===0)}function Je(M,O,Te,je){O.flowing&&O.length===0&&!O.sync&&M.listenerCount("data")>0?((O.state&Se)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,M.emit("data",Te)):(O.length+=O.objectMode?1:Te.length,je?O.buffer.unshift(Te):O.buffer.push(Te),(O.state&ke)!==0&&k(M)),U(M,O)}Ee.prototype.isPaused=function(){const M=this._readableState;return M[we]===!0||M.flowing===!1},Ee.prototype.setEncoding=function(M){const O=new Pe(M);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const Te=this._readableState.buffer;let je="";for(const Be of Te)je+=O.write(Be);return Te.clear(),je!==""&&Te.push(je),this._readableState.length=je.length,this};const Ye=1073741824;function rt(M){if(M>Ye)throw new V("size","<= 1GiB",M);return M--,M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,M|=M>>>16,M++,M}function N(M,O){return M<=0||O.length===0&&O.ended?0:(O.state&D)!==0?1:i(M)?O.flowing&&O.length?O.buffer.first().length:O.length:M<=O.length?M:O.ended?O.length:0}Ee.prototype.read=function(M){C("read",M),M===void 0?M=NaN:o(M)||(M=l(M,10));const O=this._readableState,Te=M;if(M>O.highWaterMark&&(O.highWaterMark=rt(M)),M!==0&&(O.state&=~te),M===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return C("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?$t(this):k(this),null;if(M=N(M,O),M===0&&O.ended)return O.length===0&&$t(this),null;let je=(O.state&ke)!==0;if(C("need readable",je),(O.length===0||O.length-M<O.highWaterMark)&&(je=!0,C("length less than watermark",je)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)je=!1,C("reading, ended or constructing",je);else if(je){C("do read"),O.state|=ne|xe,O.length===0&&(O.state|=ke);try{this._read(O.highWaterMark)}catch(et){A(this,et)}O.state&=~xe,O.reading||(M=N(Te,O))}let Be;return M>0?Be=nr(M,O):Be=null,Be===null?(O.needReadable=O.length<=O.highWaterMark,M=0):(O.length-=M,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),Te!==M&&O.ended&&$t(this)),Be!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",Be)),Be};function b(M,O){if(C("onEofChunk"),!O.ended){if(O.decoder){const Te=O.decoder.end();Te&&Te.length&&(O.buffer.push(Te),O.length+=O.objectMode?1:Te.length)}O.ended=!0,O.sync?k(M):(O.needReadable=!1,O.emittedReadable=!0,z(M))}}function k(M){const O=M._readableState;C("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(C("emitReadable",O.flowing),O.emittedReadable=!0,r.nextTick(z,M))}function z(M){const O=M._readableState;C("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(M.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,Ze(M)}function U(M,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,r.nextTick(Z,M,O))}function Z(M,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const Te=O.length;if(C("maybeReadMore read 0"),M.read(0),Te===O.length)break}O.readingMore=!1}Ee.prototype._read=function(M){throw new W("_read()")},Ee.prototype.pipe=function(M,O){const Te=this,je=this._readableState;je.pipes.length===1&&(je.multiAwaitDrain||(je.multiAwaitDrain=!0,je.awaitDrainWriters=new u(je.awaitDrainWriters?[je.awaitDrainWriters]:[]))),je.pipes.push(M),C("pipe count=%d opts=%j",je.pipes.length,O);const et=(!O||O.end!==!1)&&M!==r.stdout&&M!==r.stderr?ct:St;je.endEmitted?r.nextTick(et):Te.once("end",et),M.on("unpipe",at);function at(Yt,At){C("onunpipe"),Yt===Te&&At&&At.hasUnpiped===!1&&(At.hasUnpiped=!0,Kt())}function ct(){C("onend"),M.end()}let gt,st=!1;function Kt(){C("cleanup"),M.removeListener("close",ot),M.removeListener("finish",kt),gt&&M.removeListener("drain",gt),M.removeListener("error",wt),M.removeListener("unpipe",at),Te.removeListener("end",ct),Te.removeListener("end",St),Te.removeListener("data",vt),st=!0,gt&&je.awaitDrainWriters&&(!M._writableState||M._writableState.needDrain)&&gt()}function ut(){st||(je.pipes.length===1&&je.pipes[0]===M?(C("false write response, pause",0),je.awaitDrainWriters=M,je.multiAwaitDrain=!1):je.pipes.length>1&&je.pipes.includes(M)&&(C("false write response, pause",je.awaitDrainWriters.size),je.awaitDrainWriters.add(M)),Te.pause()),gt||(gt=de(Te,M),M.on("drain",gt))}Te.on("data",vt);function vt(Yt){C("ondata");const At=M.write(Yt);C("dest.write",At),At===!1&&ut()}function wt(Yt){if(C("onerror",Yt),St(),M.removeListener("error",wt),M.listenerCount("error")===0){const At=M._writableState||M._readableState;At&&!At.errorEmitted?A(M,Yt):M.emit("error",Yt)}}w(M,"error",wt);function ot(){M.removeListener("finish",kt),St()}M.once("close",ot);function kt(){C("onfinish"),M.removeListener("close",ot),St()}M.once("finish",kt);function St(){C("unpipe"),Te.unpipe(M)}return M.emit("pipe",Te),M.writableNeedDrain===!0?ut():je.flowing||(C("pipe resume"),Te.resume()),M};function de(M,O){return function(){const je=M._readableState;je.awaitDrainWriters===O?(C("pipeOnDrain",1),je.awaitDrainWriters=null):je.multiAwaitDrain&&(C("pipeOnDrain",je.awaitDrainWriters.size),je.awaitDrainWriters.delete(O)),(!je.awaitDrainWriters||je.awaitDrainWriters.size===0)&&M.listenerCount("data")&&M.resume()}}Ee.prototype.unpipe=function(M){const O=this._readableState,Te={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!M){const Be=O.pipes;O.pipes=[],this.pause();for(let et=0;et<Be.length;et++)Be[et].emit("unpipe",this,{hasUnpiped:!1});return this}const je=s(O.pipes,M);return je===-1?this:(O.pipes.splice(je,1),O.pipes.length===0&&this.pause(),M.emit("unpipe",this,Te),this)},Ee.prototype.on=function(M,O){const Te=E.prototype.on.call(this,M,O),je=this._readableState;return M==="data"?(je.readableListening=this.listenerCount("readable")>0,je.flowing!==!1&&this.resume()):M==="readable"&&!je.endEmitted&&!je.readableListening&&(je.readableListening=je.needReadable=!0,je.flowing=!1,je.emittedReadable=!1,C("on readable",je.length,je.reading),je.length?k(this):je.reading||r.nextTick($e,this)),Te},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(M,O){const Te=E.prototype.removeListener.call(this,M,O);return M==="readable"&&r.nextTick(Fe,this),Te},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(M){const O=E.prototype.removeAllListeners.apply(this,arguments);return(M==="readable"||M===void 0)&&r.nextTick(Fe,this),O};function Fe(M){const O=M._readableState;O.readableListening=M.listenerCount("readable")>0,O.resumeScheduled&&O[we]===!1?O.flowing=!0:M.listenerCount("data")>0?M.resume():O.readableListening||(O.flowing=null)}function $e(M){C("readable nexttick read 0"),M.read(0)}Ee.prototype.resume=function(){const M=this._readableState;return M.flowing||(C("resume"),M.flowing=!M.readableListening,Xe(this,M)),M[we]=!1,this};function Xe(M,O){O.resumeScheduled||(O.resumeScheduled=!0,r.nextTick(Qe,M,O))}function Qe(M,O){C("resume",O.reading),O.reading||M.read(0),O.resumeScheduled=!1,M.emit("resume"),Ze(M),O.flowing&&!O.reading&&M.read(0)}Ee.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[we]=!0,this};function Ze(M){const O=M._readableState;for(C("flow",O.flowing);O.flowing&&M.read()!==null;);}Ee.prototype.wrap=function(M){let O=!1;M.on("data",je=>{!this.push(je)&&M.pause&&(O=!0,M.pause())}),M.on("end",()=>{this.push(null)}),M.on("error",je=>{A(this,je)}),M.on("close",()=>{this.destroy()}),M.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&M.resume&&(O=!1,M.resume())};const Te=d(M);for(let je=1;je<Te.length;je++){const Be=Te[je];this[Be]===void 0&&typeof M[Be]=="function"&&(this[Be]=M[Be].bind(M))}return this},Ee.prototype[g]=function(){return xr(this)},Ee.prototype.iterator=function(M){return M!==void 0&&ge(M,"options"),xr(this,M)};function xr(M,O){typeof M.read!="function"&&(M=Ee.wrap(M,{objectMode:!0}));const Te=Gr(M,O);return Te.stream=M,Te}async function*Gr(M,O){let Te=me;function je(at){this===M?(Te(),Te=me):Te=at}M.on("readable",je);let Be;const et=T(M,{writable:!1},at=>{Be=at?P(Be,at):null,Te(),Te=me});try{for(;;){const at=M.destroyed?null:M.read();if(at!==null)yield at;else{if(Be)throw Be;if(Be===null)return;await new y(je)}}}catch(at){throw Be=P(Be,at),Be}finally{(Be||O?.destroyOnReturn!==!1)&&(Be===void 0||M._readableState.autoDestroy)?L.destroyer(M,null):(M.off("readable",je),et())}}f(Ee.prototype,{readable:{__proto__:null,get(){const M=this._readableState;return!!M&&M.readable!==!1&&!M.destroyed&&!M.errorEmitted&&!M.endEmitted},set(M){this._readableState&&(this._readableState.readable=!!M)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(M){this._readableState&&(this._readableState.flowing=M)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(M){this._readableState&&(this._readableState.destroyed=M)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),f(Ne.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[we]!==!1},set(M){this[we]=!!M}}}),Ee._fromList=nr;function nr(M,O){if(O.length===0)return null;let Te;return O.objectMode?Te=O.buffer.shift():!M||M>=O.length?(O.decoder?Te=O.buffer.join(""):O.buffer.length===1?Te=O.buffer.first():Te=O.buffer.concat(O.length),O.buffer.clear()):Te=O.buffer.consume(M,O.decoder),Te}function $t(M){const O=M._readableState;C("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,r.nextTick(on,O,M))}function on(M,O){if(C("endReadableNT",M.endEmitted,M.length),!M.errored&&!M.closeEmitted&&!M.endEmitted&&M.length===0){if(M.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)r.nextTick(ve,O);else if(M.autoDestroy){const Te=O._writableState;(!Te||Te.autoDestroy&&(Te.finished||Te.writable===!1))&&O.destroy()}}}function ve(M){M.writable&&!M.writableEnded&&!M.destroyed&&M.end()}Ee.from=function(M,O){return q(Ee,M,O)};let qe;function He(){return qe===void 0&&(qe={}),qe}return Ee.fromWeb=function(M,O){return He().newStreamReadableFromReadableStream(M,O)},Ee.toWeb=function(M,O){return He().newReadableStreamFromStreamReadable(M,O)},Ee.wrap=function(M,O){var Te,je;return new Ee({objectMode:(Te=(je=M.readableObjectMode)!==null&&je!==void 0?je:M.objectMode)!==null&&Te!==void 0?Te:!0,...O,destroy(Be,et){L.destroyer(M,Be),et(Be)}}).wrap(M)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const r=requireBrowser$1(),{ArrayPrototypeSlice:s,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:l,ObjectDefineProperties:f,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:c,Symbol:y,SymbolHasInstance:u}=requirePrimordials();writable=ge,ge.WritableState=Q;const{EventEmitter:x}=requireEvents(),g=requireLegacy().Stream,{Buffer:h}=requireBuffer(),m=requireDestroy(),{addAbortSignal:E}=requireAddAbortSignal(),{getHighWaterMark:w,getDefaultHighWaterMark:S}=requireState(),{ERR_INVALID_ARG_TYPE:j,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:C,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:_,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:P,ERR_UNKNOWN_ENCODING:le}=requireErrors().codes,{errorOrDestroy:W}=m;d(ge.prototype,g.prototype),d(ge,g);function V(){}const se=y("kOnFinished");function Q(F,H,oe){typeof oe!="boolean"&&(oe=H instanceof requireDuplex()),this.objectMode=!!(F&&F.objectMode),oe&&(this.objectMode=this.objectMode||!!(F&&F.writableObjectMode)),this.highWaterMark=F?w(this,F,"writableHighWaterMark",oe):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const he=!!(F&&F.decodeStrings===!1);this.decodeStrings=!he,this.defaultEncoding=F&&F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=A.bind(void 0,H),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,J(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!F||F.emitClose!==!1,this.autoDestroy=!F||F.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[se]=[]}function J(F){F.buffered=[],F.bufferedIndex=0,F.allBuffers=!0,F.allNoop=!0}Q.prototype.getBuffer=function(){return s(this.buffered,this.bufferedIndex)},l(Q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ge(F){const H=this instanceof requireDuplex();if(!H&&!i(ge,this))return new ge(F);this._writableState=new Q(F,this,H),F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final),typeof F.construct=="function"&&(this._construct=F.construct),F.signal&&E(F.signal,this)),g.call(this,F),m.construct(this,()=>{const oe=this._writableState;oe.writing||ne(this,oe),te(this,oe)})}l(ge,u,{__proto__:null,value:function(F){return i(this,F)?!0:this!==ge?!1:F&&F._writableState instanceof Q}}),ge.prototype.pipe=function(){W(this,new B)};function we(F,H,oe,he){const Se=F._writableState;if(typeof oe=="function")he=oe,oe=Se.defaultEncoding;else{if(!oe)oe=Se.defaultEncoding;else if(oe!=="buffer"&&!h.isEncoding(oe))throw new le(oe);typeof he!="function"&&(he=V)}if(H===null)throw new R;if(!Se.objectMode)if(typeof H=="string")Se.decodeStrings!==!1&&(H=h.from(H,oe),oe="buffer");else if(H instanceof h)oe="buffer";else if(g._isUint8Array(H))H=g._uint8ArrayToBuffer(H),oe="buffer";else throw new j("chunk",["string","Buffer","Uint8Array"],H);let Re;return Se.ending?Re=new P:Se.destroyed&&(Re=new L("write")),Re?(r.nextTick(he,Re),W(F,Re,!0),Re):(Se.pendingcb++,Pe(F,Se,H,oe,he))}ge.prototype.write=function(F,H,oe){return we(this,F,H,oe)===!0},ge.prototype.cork=function(){this._writableState.corked++},ge.prototype.uncork=function(){const F=this._writableState;F.corked&&(F.corked--,F.writing||ne(this,F))},ge.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=c(H)),!h.isEncoding(H))throw new le(H);return this._writableState.defaultEncoding=H,this};function Pe(F,H,oe,he,Se){const Re=H.objectMode?1:oe.length;H.length+=Re;const K=H.length<H.highWaterMark;return K||(H.needDrain=!0),H.writing||H.corked||H.errored||!H.constructed?(H.buffered.push({chunk:oe,encoding:he,callback:Se}),H.allBuffers&&he!=="buffer"&&(H.allBuffers=!1),H.allNoop&&Se!==V&&(H.allNoop=!1)):(H.writelen=Re,H.writecb=Se,H.writing=!0,H.sync=!0,F._write(oe,he,H.onwrite),H.sync=!1),K&&!H.errored&&!H.destroyed}function q(F,H,oe,he,Se,Re,K){H.writelen=he,H.writecb=K,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new L("write")):oe?F._writev(Se,H.onwrite):F._write(Se,Re,H.onwrite),H.sync=!1}function me(F,H,oe,he){--H.pendingcb,he(oe),ae(H),W(F,oe)}function A(F,H){const oe=F._writableState,he=oe.sync,Se=oe.writecb;if(typeof Se!="function"){W(F,new C);return}oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0,H?(H.stack,oe.errored||(oe.errored=H),F._readableState&&!F._readableState.errored&&(F._readableState.errored=H),he?r.nextTick(me,F,oe,H,Se):me(F,oe,H,Se)):(oe.buffered.length>oe.bufferedIndex&&ne(F,oe),he?oe.afterWriteTickInfo!==null&&oe.afterWriteTickInfo.cb===Se?oe.afterWriteTickInfo.count++:(oe.afterWriteTickInfo={count:1,cb:Se,stream:F,state:oe},r.nextTick(D,oe.afterWriteTickInfo)):G(F,oe,1,Se))}function D({stream:F,state:H,count:oe,cb:he}){return H.afterWriteTickInfo=null,G(F,H,oe,he)}function G(F,H,oe,he){for(!H.ending&&!F.destroyed&&H.length===0&&H.needDrain&&(H.needDrain=!1,F.emit("drain"));oe-- >0;)H.pendingcb--,he();H.destroyed&&ae(H),te(F,H)}function ae(F){if(F.writing)return;for(let Se=F.bufferedIndex;Se<F.buffered.length;++Se){var H;const{chunk:Re,callback:K}=F.buffered[Se],ye=F.objectMode?1:Re.length;F.length-=ye,K((H=F.errored)!==null&&H!==void 0?H:new L("write"))}const oe=F[se].splice(0);for(let Se=0;Se<oe.length;Se++){var he;oe[Se]((he=F.errored)!==null&&he!==void 0?he:new L("end"))}J(F)}function ne(F,H){if(H.corked||H.bufferProcessing||H.destroyed||!H.constructed)return;const{buffered:oe,bufferedIndex:he,objectMode:Se}=H,Re=oe.length-he;if(!Re)return;let K=he;if(H.bufferProcessing=!0,Re>1&&F._writev){H.pendingcb-=Re-1;const ye=H.allNoop?V:Ee=>{for(let De=K;De<oe.length;++De)oe[De].callback(Ee)},Ne=H.allNoop&&K===0?oe:s(oe,K);Ne.allBuffers=H.allBuffers,q(F,H,!0,H.length,Ne,"",ye),J(H)}else{do{const{chunk:ye,encoding:Ne,callback:Ee}=oe[K];oe[K++]=null;const De=Se?1:ye.length;q(F,H,!1,De,ye,Ne,Ee)}while(K<oe.length&&!H.writing);K===oe.length?J(H):K>256?(oe.splice(0,K),H.bufferedIndex=0):H.bufferedIndex=K}H.bufferProcessing=!1}ge.prototype._write=function(F,H,oe){if(this._writev)this._writev([{chunk:F,encoding:H}],oe);else throw new T("_write()")},ge.prototype._writev=null,ge.prototype.end=function(F,H,oe){const he=this._writableState;typeof F=="function"?(oe=F,F=null,H=null):typeof H=="function"&&(oe=H,H=null);let Se;if(F!=null){const Re=we(this,F,H);Re instanceof o&&(Se=Re)}return he.corked&&(he.corked=1,this.uncork()),Se||(!he.errored&&!he.ending?(he.ending=!0,te(this,he,!0),he.ended=!0):he.finished?Se=new _("end"):he.destroyed&&(Se=new L("end"))),typeof oe=="function"&&(Se||he.finished?r.nextTick(oe,Se):he[se].push(oe)),this};function fe(F){return F.ending&&!F.destroyed&&F.constructed&&F.length===0&&!F.errored&&F.buffered.length===0&&!F.finished&&!F.writing&&!F.errorEmitted&&!F.closeEmitted}function xe(F,H){let oe=!1;function he(Se){if(oe){W(F,Se??C());return}if(oe=!0,H.pendingcb--,Se){const Re=H[se].splice(0);for(let K=0;K<Re.length;K++)Re[K](Se);W(F,Se,H.sync)}else fe(H)&&(H.prefinished=!0,F.emit("prefinish"),H.pendingcb++,r.nextTick(ie,F,H))}H.sync=!0,H.pendingcb++;try{F._final(he)}catch(Se){he(Se)}H.sync=!1}function ke(F,H){!H.prefinished&&!H.finalCalled&&(typeof F._final=="function"&&!H.destroyed?(H.finalCalled=!0,xe(F,H)):(H.prefinished=!0,F.emit("prefinish")))}function te(F,H,oe){fe(H)&&(ke(F,H),H.pendingcb===0&&(oe?(H.pendingcb++,r.nextTick((he,Se)=>{fe(Se)?ie(he,Se):Se.pendingcb--},F,H)):fe(H)&&(H.pendingcb++,ie(F,H))))}function ie(F,H){H.pendingcb--,H.finished=!0;const oe=H[se].splice(0);for(let he=0;he<oe.length;he++)oe[he]();if(F.emit("finish"),H.autoDestroy){const he=F._readableState;(!he||he.autoDestroy&&(he.endEmitted||he.readable===!1))&&F.destroy()}}f(ge.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(F){this._writableState&&(this._writableState.destroyed=F)}},writable:{__proto__:null,get(){const F=this._writableState;return!!F&&F.writable!==!1&&!F.destroyed&&!F.errored&&!F.ending&&!F.ended},set(F){this._writableState&&(this._writableState.writable=!!F)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const F=this._writableState;return F?!F.destroyed&&!F.ending&&F.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const be=m.destroy;ge.prototype.destroy=function(F,H){const oe=this._writableState;return!oe.destroyed&&(oe.bufferedIndex<oe.buffered.length||oe[se].length)&&r.nextTick(ae,oe),be.call(this,F,H),this},ge.prototype._undestroy=m.undestroy,ge.prototype._destroy=function(F,H){H(F)},ge.prototype[x.captureRejectionSymbol]=function(F){this.destroy(F)};let Ie;function ee(){return Ie===void 0&&(Ie={}),Ie}return ge.fromWeb=function(F,H){return ee().newStreamWritableFromWritableStream(F,H)},ge.toWeb=function(F){return ee().newWritableStreamFromStreamWritable(F)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const r=requireBrowser$1(),s=requireBuffer(),{isReadable:o,isWritable:i,isIterable:l,isNodeStream:f,isReadableNodeStream:d,isWritableNodeStream:c,isDuplexNodeStream:y,isReadableStream:u,isWritableStream:x}=requireUtils(),g=requireEndOfStream(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:E}}=requireErrors(),{destroyer:w}=requireDestroy(),S=requireDuplex(),j=requireReadable(),T=requireWritable(),{createDeferredPromise:C}=requireUtil(),B=requireFrom(),L=globalThis.Blob||s.Blob,_=typeof L<"u"?function(Q){return Q instanceof L}:function(Q){return!1},R=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:P}=requirePrimordials();class le extends S{constructor(Q){super(Q),Q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function se(Q,J){if(y(Q))return Q;if(d(Q))return V({readable:Q});if(c(Q))return V({writable:Q});if(f(Q))return V({writable:!1,readable:!1});if(u(Q))return V({readable:j.fromWeb(Q)});if(x(Q))return V({writable:T.fromWeb(Q)});if(typeof Q=="function"){const{value:we,write:Pe,final:q,destroy:me}=W(Q);if(l(we))return B(le,we,{objectMode:!0,write:Pe,final:q,destroy:me});const A=we?.then;if(typeof A=="function"){let D;const G=P(A,we,ae=>{if(ae!=null)throw new E("nully","body",ae)},ae=>{w(D,ae)});return D=new le({objectMode:!0,readable:!1,write:Pe,final(ae){q(async()=>{try{await G,r.nextTick(ae,null)}catch(ne){r.nextTick(ae,ne)}})},destroy:me})}throw new E("Iterable, AsyncIterable or AsyncFunction",J,we)}if(_(Q))return se(Q.arrayBuffer());if(l(Q))return B(le,Q,{objectMode:!0,writable:!1});if(u(Q?.readable)&&x(Q?.writable))return le.fromWeb(Q);if(typeof Q?.writable=="object"||typeof Q?.readable=="object"){const we=Q!=null&&Q.readable?d(Q?.readable)?Q?.readable:se(Q.readable):void 0,Pe=Q!=null&&Q.writable?c(Q?.writable)?Q?.writable:se(Q.writable):void 0;return V({readable:we,writable:Pe})}const ge=Q?.then;if(typeof ge=="function"){let we;return P(ge,Q,Pe=>{Pe!=null&&we.push(Pe),we.push(null)},Pe=>{w(we,Pe)}),we=new le({objectMode:!0,writable:!1,read(){}})}throw new m(J,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Q)};function W(se){let{promise:Q,resolve:J}=C();const ge=new R,we=ge.signal;return{value:se((async function*(){for(;;){const q=Q;Q=null;const{chunk:me,done:A,cb:D}=await q;if(r.nextTick(D),A)return;if(we.aborted)throw new h(void 0,{cause:we.reason});({promise:Q,resolve:J}=C()),yield me}})(),{signal:we}),write(q,me,A){const D=J;J=null,D({chunk:q,done:!1,cb:A})},final(q){const me=J;J=null,me({done:!0,cb:q})},destroy(q,me){ge.abort(),me(q)}}}function V(se){const Q=se.readable&&typeof se.readable.read!="function"?j.wrap(se.readable):se.readable,J=se.writable;let ge=!!o(Q),we=!!i(J),Pe,q,me,A,D;function G(ae){const ne=A;A=null,ne?ne(ae):ae&&D.destroy(ae)}return D=new le({readableObjectMode:!!(Q!=null&&Q.readableObjectMode),writableObjectMode:!!(J!=null&&J.writableObjectMode),readable:ge,writable:we}),we&&(g(J,ae=>{we=!1,ae&&w(Q,ae),G(ae)}),D._write=function(ae,ne,fe){J.write(ae,ne)?fe():Pe=fe},D._final=function(ae){J.end(),q=ae},J.on("drain",function(){if(Pe){const ae=Pe;Pe=null,ae()}}),J.on("finish",function(){if(q){const ae=q;q=null,ae()}})),ge&&(g(Q,ae=>{ge=!1,ae&&w(Q,ae),G(ae)}),Q.on("readable",function(){if(me){const ae=me;me=null,ae()}}),Q.on("end",function(){D.push(null)}),D._read=function(){for(;;){const ae=Q.read();if(ae===null){me=D._read;return}if(!D.push(ae))return}}),D._destroy=function(ae,ne){!ae&&A!==null&&(ae=new h),me=null,Pe=null,q=null,A===null?ne(ae):(A=ne,w(J,ae),w(Q,ae))},D}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:s,ObjectKeys:o,ObjectSetPrototypeOf:i}=requirePrimordials();duplex=d;const l=requireReadable(),f=requireWritable();i(d.prototype,l.prototype),i(d,l);{const x=o(f.prototype);for(let g=0;g<x.length;g++){const h=x[g];d.prototype[h]||(d.prototype[h]=f.prototype[h])}}function d(x){if(!(this instanceof d))return new d(x);l.call(this,x),f.call(this,x),x?(this.allowHalfOpen=x.allowHalfOpen!==!1,x.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),x.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(d.prototype,{writable:{__proto__:null,...s(f.prototype,"writable")},writableHighWaterMark:{__proto__:null,...s(f.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...s(f.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...s(f.prototype,"writableBuffer")},writableLength:{__proto__:null,...s(f.prototype,"writableLength")},writableFinished:{__proto__:null,...s(f.prototype,"writableFinished")},writableCorked:{__proto__:null,...s(f.prototype,"writableCorked")},writableEnded:{__proto__:null,...s(f.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...s(f.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(x){this._readableState&&this._writableState&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}}});let c;function y(){return c===void 0&&(c={}),c}d.fromWeb=function(x,g){return y().newStreamDuplexFromReadableWritablePair(x,g)},d.toWeb=function(x){return y().newReadableWritablePairFromDuplex(x)};let u;return d.from=function(x){return u||(u=requireDuplexify()),u(x,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:r,Symbol:s}=requirePrimordials();transform=d;const{ERR_METHOD_NOT_IMPLEMENTED:o}=requireErrors().codes,i=requireDuplex(),{getHighWaterMark:l}=requireState();r(d.prototype,i.prototype),r(d,i);const f=s("kCallback");function d(u){if(!(this instanceof d))return new d(u);const x=u?l(this,u,"readableHighWaterMark",!0):null;x===0&&(u={...u,highWaterMark:null,readableHighWaterMark:x,writableHighWaterMark:u.writableHighWaterMark||0}),i.call(this,u),this._readableState.sync=!1,this[f]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",y)}function c(u){typeof this._flush=="function"&&!this.destroyed?this._flush((x,g)=>{if(x){u?u(x):this.destroy(x);return}g!=null&&this.push(g),this.push(null),u&&u()}):(this.push(null),u&&u())}function y(){this._final!==c&&c.call(this)}return d.prototype._final=c,d.prototype._transform=function(u,x,g){throw new o("_transform()")},d.prototype._write=function(u,x,g){const h=this._readableState,m=this._writableState,E=h.length;this._transform(u,x,(w,S)=>{if(w){g(w);return}S!=null&&this.push(S),m.ended||E===h.length||h.length<h.highWaterMark?g():this[f]=g})},d.prototype._read=function(){if(this[f]){const u=this[f];this[f]=null,u()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:r}=requirePrimordials();passthrough=o;const s=requireTransform();r(o.prototype,s.prototype),r(o,s);function o(i){if(!(this instanceof o))return new o(i);s.call(this,i)}return o.prototype._transform=function(i,l,f){f(null,i)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const r=requireBrowser$1(),{ArrayIsArray:s,Promise:o,SymbolAsyncIterator:i,SymbolDispose:l}=requirePrimordials(),f=requireEndOfStream(),{once:d}=requireUtil(),c=requireDestroy(),y=requireDuplex(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:x,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:E},AbortError:w}=requireErrors(),{validateFunction:S,validateAbortSignal:j}=requireValidators(),{isIterable:T,isReadable:C,isReadableNodeStream:B,isNodeStream:L,isTransformStream:_,isWebStream:R,isReadableStream:P,isReadableFinished:le}=requireUtils(),W=globalThis.AbortController||requireBrowser$2().AbortController;let V,se,Q;function J(ae,ne,fe){let xe=!1;ae.on("close",()=>{xe=!0});const ke=f(ae,{readable:ne,writable:fe},te=>{xe=!te});return{destroy:te=>{xe||(xe=!0,c.destroyer(ae,te||new m("pipe")))},cleanup:ke}}function ge(ae){return S(ae[ae.length-1],"streams[stream.length - 1]"),ae.pop()}function we(ae){if(T(ae))return ae;if(B(ae))return Pe(ae);throw new x("val",["Readable","Iterable","AsyncIterable"],ae)}async function*Pe(ae){se||(se=requireReadable()),yield*se.prototype[i].call(ae)}async function q(ae,ne,fe,{end:xe}){let ke,te=null;const ie=ee=>{if(ee&&(ke=ee),te){const F=te;te=null,F()}},be=()=>new o((ee,F)=>{ke?F(ke):te=()=>{ke?F(ke):ee()}});ne.on("drain",ie);const Ie=f(ne,{readable:!1},ie);try{ne.writableNeedDrain&&await be();for await(const ee of ae)ne.write(ee)||await be();xe&&(ne.end(),await be()),fe()}catch(ee){fe(ke!==ee?u(ke,ee):ee)}finally{Ie(),ne.off("drain",ie)}}async function me(ae,ne,fe,{end:xe}){_(ne)&&(ne=ne.writable);const ke=ne.getWriter();try{for await(const te of ae)await ke.ready,ke.write(te).catch(()=>{});await ke.ready,xe&&await ke.close(),fe()}catch(te){try{await ke.abort(te),fe(te)}catch(ie){fe(ie)}}}function A(...ae){return D(ae,d(ge(ae)))}function D(ae,ne,fe){if(ae.length===1&&s(ae[0])&&(ae=ae[0]),ae.length<2)throw new h("streams");const xe=new W,ke=xe.signal,te=fe?.signal,ie=[];j(te,"options.signal");function be(){Se(new w)}Q=Q||requireUtil().addAbortListener;let Ie;te&&(Ie=Q(te,be));let ee,F;const H=[];let oe=0;function he(Ee){Se(Ee,--oe===0)}function Se(Ee,De){var Je;if(Ee&&(!ee||ee.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ee=Ee),!(!ee&&!De)){for(;H.length;)H.shift()(ee);(Je=Ie)===null||Je===void 0||Je[l](),xe.abort(),De&&(ee||ie.forEach(Ye=>Ye()),r.nextTick(ne,ee,F))}}let Re;for(let Ee=0;Ee<ae.length;Ee++){const De=ae[Ee],Je=Ee<ae.length-1,Ye=Ee>0,rt=Je||fe?.end!==!1,N=Ee===ae.length-1;if(L(De)){let b=function(k){k&&k.name!=="AbortError"&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"&&he(k)};var Ne=b;if(rt){const{destroy:k,cleanup:z}=J(De,Je,Ye);H.push(k),C(De)&&N&&ie.push(z)}De.on("error",b),C(De)&&N&&ie.push(()=>{De.removeListener("error",b)})}if(Ee===0)if(typeof De=="function"){if(Re=De({signal:ke}),!T(Re))throw new g("Iterable, AsyncIterable or Stream","source",Re)}else T(De)||B(De)||_(De)?Re=De:Re=y.from(De);else if(typeof De=="function"){if(_(Re)){var K;Re=we((K=Re)===null||K===void 0?void 0:K.readable)}else Re=we(Re);if(Re=De(Re,{signal:ke}),Je){if(!T(Re,!0))throw new g("AsyncIterable",`transform[${Ee-1}]`,Re)}else{var ye;V||(V=requirePassthrough());const b=new V({objectMode:!0}),k=(ye=Re)===null||ye===void 0?void 0:ye.then;if(typeof k=="function")oe++,k.call(Re,Z=>{F=Z,Z!=null&&b.write(Z),rt&&b.end(),r.nextTick(he)},Z=>{b.destroy(Z),r.nextTick(he,Z)});else if(T(Re,!0))oe++,q(Re,b,he,{end:rt});else if(P(Re)||_(Re)){const Z=Re.readable||Re;oe++,q(Z,b,he,{end:rt})}else throw new g("AsyncIterable or Promise","destination",Re);Re=b;const{destroy:z,cleanup:U}=J(Re,!1,!0);H.push(z),N&&ie.push(U)}}else if(L(De)){if(B(Re)){oe+=2;const b=G(Re,De,he,{end:rt});C(De)&&N&&ie.push(b)}else if(_(Re)||P(Re)){const b=Re.readable||Re;oe++,q(b,De,he,{end:rt})}else if(T(Re))oe++,q(Re,De,he,{end:rt});else throw new x("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Re);Re=De}else if(R(De)){if(B(Re))oe++,me(we(Re),De,he,{end:rt});else if(P(Re)||T(Re))oe++,me(Re,De,he,{end:rt});else if(_(Re))oe++,me(Re.readable,De,he,{end:rt});else throw new x("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Re);Re=De}else Re=y.from(De)}return(ke!=null&&ke.aborted||te!=null&&te.aborted)&&r.nextTick(be),Re}function G(ae,ne,fe,{end:xe}){let ke=!1;if(ne.on("close",()=>{ke||fe(new E)}),ae.pipe(ne,{end:!1}),xe){let ie=function(){ke=!0,ne.end()};var te=ie;le(ae)?r.nextTick(ie):ae.once("end",ie)}else fe();return f(ae,{readable:!0,writable:!1},ie=>{const be=ae._readableState;ie&&ie.code==="ERR_STREAM_PREMATURE_CLOSE"&&be&&be.ended&&!be.errored&&!be.errorEmitted?ae.once("end",fe).once("error",fe):fe(ie)}),f(ne,{readable:!1,writable:!0},fe)}return pipeline_1={pipelineImpl:D,pipeline:A},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:r}=requirePipeline(),s=requireDuplex(),{destroyer:o}=requireDestroy(),{isNodeStream:i,isReadable:l,isWritable:f,isWebStream:d,isTransformStream:c,isWritableStream:y,isReadableStream:u}=requireUtils(),{AbortError:x,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:h}}=requireErrors(),m=requireEndOfStream();return compose=function(...w){if(w.length===0)throw new h("streams");if(w.length===1)return s.from(w[0]);const S=[...w];if(typeof w[0]=="function"&&(w[0]=s.from(w[0])),typeof w[w.length-1]=="function"){const V=w.length-1;w[V]=s.from(w[V])}for(let V=0;V<w.length;++V)if(!(!i(w[V])&&!d(w[V]))){if(V<w.length-1&&!(l(w[V])||u(w[V])||c(w[V])))throw new g(`streams[${V}]`,S[V],"must be readable");if(V>0&&!(f(w[V])||y(w[V])||c(w[V])))throw new g(`streams[${V}]`,S[V],"must be writable")}let j,T,C,B,L;function _(V){const se=B;B=null,se?se(V):V?L.destroy(V):!W&&!le&&L.destroy()}const R=w[0],P=r(w,_),le=!!(f(R)||y(R)||c(R)),W=!!(l(P)||u(P)||c(P));if(L=new s({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(P!=null&&P.readableObjectMode),writable:le,readable:W}),le){if(i(R))L._write=function(se,Q,J){R.write(se,Q)?J():j=J},L._final=function(se){R.end(),T=se},R.on("drain",function(){if(j){const se=j;j=null,se()}});else if(d(R)){const Q=(c(R)?R.writable:R).getWriter();L._write=async function(J,ge,we){try{await Q.ready,Q.write(J).catch(()=>{}),we()}catch(Pe){we(Pe)}},L._final=async function(J){try{await Q.ready,Q.close().catch(()=>{}),T=J}catch(ge){J(ge)}}}const V=c(P)?P.readable:P;m(V,()=>{if(T){const se=T;T=null,se()}})}if(W){if(i(P))P.on("readable",function(){if(C){const V=C;C=null,V()}}),P.on("end",function(){L.push(null)}),L._read=function(){for(;;){const V=P.read();if(V===null){C=L._read;return}if(!L.push(V))return}};else if(d(P)){const se=(c(P)?P.readable:P).getReader();L._read=async function(){for(;;)try{const{value:Q,done:J}=await se.read();if(!L.push(Q))return;if(J){L.push(null);return}}catch{return}}}}return L._destroy=function(V,se){!V&&B!==null&&(V=new x),C=null,j=null,T=null,B===null?se(V):(B=se,i(P)&&o(P,V))},L},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const r=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:s,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:l},AbortError:f}=requireErrors(),{validateAbortSignal:d,validateInteger:c,validateObject:y}=requireValidators(),u=requirePrimordials().Symbol("kWeak"),x=requirePrimordials().Symbol("kResistStopPropagation"),{finished:g}=requireEndOfStream(),h=requireCompose(),{addAbortSignalNoValidate:m}=requireAddAbortSignal(),{isWritable:E,isNodeStream:w}=requireUtils(),{deprecate:S}=requireUtil(),{ArrayPrototypePush:j,Boolean:T,MathFloor:C,Number:B,NumberIsNaN:L,Promise:_,PromiseReject:R,PromiseResolve:P,PromisePrototypeThen:le,Symbol:W}=requirePrimordials(),V=W("kEmpty"),se=W("kEof");function Q(te,ie){if(ie!=null&&y(ie,"options"),ie?.signal!=null&&d(ie.signal,"options.signal"),w(te)&&!E(te))throw new s("stream",te,"must be writable");const be=h(this,te);return ie!=null&&ie.signal&&m(ie.signal,be),be}function J(te,ie){if(typeof te!="function")throw new o("fn",["Function","AsyncFunction"],te);ie!=null&&y(ie,"options"),ie?.signal!=null&&d(ie.signal,"options.signal");let be=1;ie?.concurrency!=null&&(be=C(ie.concurrency));let Ie=be-1;return ie?.highWaterMark!=null&&(Ie=C(ie.highWaterMark)),c(be,"options.concurrency",1),c(Ie,"options.highWaterMark",0),Ie+=be,async function*(){const F=requireUtil().AbortSignalAny([ie?.signal].filter(T)),H=this,oe=[],he={signal:F};let Se,Re,K=!1,ye=0;function Ne(){K=!0,Ee()}function Ee(){ye-=1,De()}function De(){Re&&!K&&ye<be&&oe.length<Ie&&(Re(),Re=null)}async function Je(){try{for await(let Ye of H){if(K)return;if(F.aborted)throw new f;try{if(Ye=te(Ye,he),Ye===V)continue;Ye=P(Ye)}catch(rt){Ye=R(rt)}ye+=1,le(Ye,Ee,Ne),oe.push(Ye),Se&&(Se(),Se=null),!K&&(oe.length>=Ie||ye>=be)&&await new _(rt=>{Re=rt})}oe.push(se)}catch(Ye){const rt=R(Ye);le(rt,Ee,Ne),oe.push(rt)}finally{K=!0,Se&&(Se(),Se=null)}}Je();try{for(;;){for(;oe.length>0;){const Ye=await oe[0];if(Ye===se)return;if(F.aborted)throw new f;Ye!==V&&(yield Ye),oe.shift(),De()}await new _(Ye=>{Se=Ye})}}finally{K=!0,Re&&(Re(),Re=null)}}.call(this)}function ge(te=void 0){return te!=null&&y(te,"options"),te?.signal!=null&&d(te.signal,"options.signal"),async function*(){let be=0;for await(const ee of this){var Ie;if(te!=null&&(Ie=te.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new f({cause:te.signal.reason});yield[be++,ee]}}.call(this)}async function we(te,ie=void 0){for await(const be of A.call(this,te,ie))return!0;return!1}async function Pe(te,ie=void 0){if(typeof te!="function")throw new o("fn",["Function","AsyncFunction"],te);return!await we.call(this,async(...be)=>!await te(...be),ie)}async function q(te,ie){for await(const be of A.call(this,te,ie))return be}async function me(te,ie){if(typeof te!="function")throw new o("fn",["Function","AsyncFunction"],te);async function be(Ie,ee){return await te(Ie,ee),V}for await(const Ie of J.call(this,be,ie));}function A(te,ie){if(typeof te!="function")throw new o("fn",["Function","AsyncFunction"],te);async function be(Ie,ee){return await te(Ie,ee)?Ie:V}return J.call(this,be,ie)}class D extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function G(te,ie,be){var Ie;if(typeof te!="function")throw new o("reducer",["Function","AsyncFunction"],te);be!=null&&y(be,"options"),be?.signal!=null&&d(be.signal,"options.signal");let ee=arguments.length>1;if(be!=null&&(Ie=be.signal)!==null&&Ie!==void 0&&Ie.aborted){const Se=new f(void 0,{cause:be.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(Se)),Se}const F=new r,H=F.signal;if(be!=null&&be.signal){const Se={once:!0,[u]:this,[x]:!0};be.signal.addEventListener("abort",()=>F.abort(),Se)}let oe=!1;try{for await(const Se of this){var he;if(oe=!0,be!=null&&(he=be.signal)!==null&&he!==void 0&&he.aborted)throw new f;ee?ie=await te(ie,Se,{signal:H}):(ie=Se,ee=!0)}if(!oe&&!ee)throw new D}finally{F.abort()}return ie}async function ae(te){te!=null&&y(te,"options"),te?.signal!=null&&d(te.signal,"options.signal");const ie=[];for await(const Ie of this){var be;if(te!=null&&(be=te.signal)!==null&&be!==void 0&&be.aborted)throw new f(void 0,{cause:te.signal.reason});j(ie,Ie)}return ie}function ne(te,ie){const be=J.call(this,te,ie);return async function*(){for await(const ee of be)yield*ee}.call(this)}function fe(te){if(te=B(te),L(te))return 0;if(te<0)throw new l("number",">= 0",te);return te}function xe(te,ie=void 0){return ie!=null&&y(ie,"options"),ie?.signal!=null&&d(ie.signal,"options.signal"),te=fe(te),async function*(){var Ie;if(ie!=null&&(Ie=ie.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new f;for await(const F of this){var ee;if(ie!=null&&(ee=ie.signal)!==null&&ee!==void 0&&ee.aborted)throw new f;te--<=0&&(yield F)}}.call(this)}function ke(te,ie=void 0){return ie!=null&&y(ie,"options"),ie?.signal!=null&&d(ie.signal,"options.signal"),te=fe(te),async function*(){var Ie;if(ie!=null&&(Ie=ie.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new f;for await(const F of this){var ee;if(ie!=null&&(ee=ie.signal)!==null&&ee!==void 0&&ee.aborted)throw new f;if(te-- >0&&(yield F),te<=0)return}}.call(this)}return operators.streamReturningOperators={asIndexedPairs:S(ge,"readable.asIndexedPairs will be removed in a future version."),drop:xe,filter:A,flatMap:ne,map:J,take:ke,compose:Q},operators.promiseReturningOperators={every:Pe,forEach:me,reduce:G,toArray:ae,some:we,find:q},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:r,Promise:s}=requirePrimordials(),{isIterable:o,isNodeStream:i,isWebStream:l}=requireUtils(),{pipelineImpl:f}=requirePipeline(),{finished:d}=requireEndOfStream();requireStream();function c(...y){return new s((u,x)=>{let g,h;const m=y[y.length-1];if(m&&typeof m=="object"&&!i(m)&&!o(m)&&!l(m)){const E=r(y);g=E.signal,h=E.end}f(y,(E,w)=>{E?x(E):u(w)},{signal:g,end:h})})}return promises={finished:d,pipeline:c},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:r}=requireBuffer(),{ObjectDefineProperty:s,ObjectKeys:o,ReflectApply:i}=requirePrimordials(),{promisify:{custom:l}}=requireUtil(),{streamReturningOperators:f,promiseReturningOperators:d}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=requireErrors(),y=requireCompose(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:x}=requireState(),{pipeline:g}=requirePipeline(),{destroyer:h}=requireDestroy(),m=requireEndOfStream(),E=requirePromises(),w=requireUtils(),S=stream.exports=requireLegacy().Stream;S.isDestroyed=w.isDestroyed,S.isDisturbed=w.isDisturbed,S.isErrored=w.isErrored,S.isReadable=w.isReadable,S.isWritable=w.isWritable,S.Readable=requireReadable();for(const C of o(f)){let L=function(..._){if(new.target)throw c();return S.Readable.from(i(B,this,_))};var T=L;const B=f[C];s(L,"name",{__proto__:null,value:B.name}),s(L,"length",{__proto__:null,value:B.length}),s(S.Readable.prototype,C,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}for(const C of o(d)){let L=function(...R){if(new.target)throw c();return i(B,this,R)};var T=L;const B=d[C];s(L,"name",{__proto__:null,value:B.name}),s(L,"length",{__proto__:null,value:B.length}),s(S.Readable.prototype,C,{__proto__:null,value:L,enumerable:!1,configurable:!0,writable:!0})}S.Writable=requireWritable(),S.Duplex=requireDuplex(),S.Transform=requireTransform(),S.PassThrough=requirePassthrough(),S.pipeline=g;const{addAbortSignal:j}=requireAddAbortSignal();return S.addAbortSignal=j,S.finished=m,S.destroy=h,S.compose=y,S.setDefaultHighWaterMark=u,S.getDefaultHighWaterMark=x,s(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return E}}),s(g,l,{__proto__:null,enumerable:!0,get(){return E.pipeline}}),s(m,l,{__proto__:null,enumerable:!0,get(){return E.finished}}),S.Stream=S,S._isUint8Array=function(B){return B instanceof Uint8Array},S._uint8ArrayToBuffer=function(B){return r.from(B.buffer,B.byteOffset,B.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(r){const s=requireStream(),o=requirePromises(),i=s.Readable.destroy;r.exports=s.Readable,r.exports._uint8ArrayToBuffer=s._uint8ArrayToBuffer,r.exports._isUint8Array=s._isUint8Array,r.exports.isDisturbed=s.isDisturbed,r.exports.isErrored=s.isErrored,r.exports.isReadable=s.isReadable,r.exports.Readable=s.Readable,r.exports.Writable=s.Writable,r.exports.Duplex=s.Duplex,r.exports.Transform=s.Transform,r.exports.PassThrough=s.PassThrough,r.exports.addAbortSignal=s.addAbortSignal,r.exports.finished=s.finished,r.exports.destroy=s.destroy,r.exports.destroy=i,r.exports.pipeline=s.pipeline,r.exports.compose=s.compose,Object.defineProperty(s,"promises",{configurable:!0,enumerable:!0,get(){return o}}),r.exports.Stream=s.Stream,r.exports.default=r.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const r=requireBrowser();class s extends r.Readable{constructor(i){super(),this.bytesRead=0,this.released=!1,this.reader=i.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(i=>{delete this.pendingRead,i.done||this.released?this.push(null):(this.bytesRead+=i.value.length,this.push(i.value))}).catch(i=>{this.destroy(i)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=s,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchFromUrl=r.parseBlob=r.parseReadableStream=r.parseNodeStream=r.selectCover=r.ratingToStars=r.orderTags=r.parseFromTokenizer=r.parseBuffer=void 0;const s=requireBrowser$3(),o=requireCore(),i=requireLib$1(),l=s("music-metadata-browser:main");var f=requireCore();Object.defineProperty(r,"parseBuffer",{enumerable:!0,get:function(){return f.parseBuffer}}),Object.defineProperty(r,"parseFromTokenizer",{enumerable:!0,get:function(){return f.parseFromTokenizer}}),Object.defineProperty(r,"orderTags",{enumerable:!0,get:function(){return f.orderTags}}),Object.defineProperty(r,"ratingToStars",{enumerable:!0,get:function(){return f.ratingToStars}}),Object.defineProperty(r,"selectCover",{enumerable:!0,get:function(){return f.selectCover}}),r.parseNodeStream=o.parseStream;async function d(x,g,h){const m=new i.ReadableWebToNodeStream(x),E=await(0,r.parseNodeStream)(m,typeof g=="string"?{mimeType:g}:g,h);return await m.close(),E}r.parseReadableStream=d;async function c(x,g){x.type,x.size,x instanceof File&&x.name;const h=x.stream?x.stream():y(x);return d(h,{mimeType:x.type,size:x.size},g)}r.parseBlob=c;function y(x){const g=new FileReader;return new ReadableStream({start(h){g.onloadend=m=>{let E=m.target.result;E instanceof ArrayBuffer&&(E=new Uint8Array(E)),h.enqueue(E),h.close()},g.onerror=m=>{h.close()},g.onabort=m=>{h.close()},g.readAsArrayBuffer(x)}})}async function u(x,g){const h=await fetch(x),m={size:parseInt(h.headers.get("Content-Length"),10),mimeType:h.headers.get("Content-Type")};if(h.ok)if(h.body){const E=await d(h.body,m,g);return l("Closing HTTP-readable-stream..."),h.body.locked||await h.body.cancel(),l("HTTP-readable-stream closed."),E}else return c(await h.blob(),g);else throw new Error(`HTTP error status=${h.status}: ${h.statusText}`)}r.fetchFromUrl=u})(lib$3)),lib$3}var libExports=requireLib();function roundKHz(r){if(!r)return;const s=r/1e3;return Math.round(s*10)/10}function extFromName(r){if(!r)return;const s=r.split("?")[0].split("#")[0],o=s.lastIndexOf(".");if(o!==-1)return s.substring(o+1).toLowerCase()}function labelFromMimeOrExt(r,s){const o=(r||"").toLowerCase(),i=(s||"").toLowerCase(),l={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",mpeg:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"};if(o.includes("flac"))return"FLAC";if(o.includes("x-wav")||o.includes("wav"))return"WAV";if(o.includes("aiff"))return"AIFF";if(o.includes("mpeg"))return"MP3";if(o.includes("aac"))return"AAC";if(o.includes("alac"))return"ALAC";if(o.includes("mp4")||o.includes("m4a"))return"M4A";if(o.includes("ogg")&&o.includes("opus"))return"OPUS";if(o.includes("ogg"))return"OGG";if(o.includes("webm"))return"WEBM";if(i&&l[i])return l[i]}function normalizeCodec(r,s,o,i){const l=(r||"").toLowerCase(),f=(s||"").toLowerCase();return f.includes("flac")?"FLAC":f.includes("alac")||f.includes("apple lossless")?"ALAC":f.includes("aac")?"AAC":f.includes("mp3")||f.includes("mpeg")?"MP3":f.includes("opus")?"OPUS":f.includes("vorbis")?"OGG":f.includes("pcm")&&(l.includes("wav")||l.includes("wave"))?"WAV":f.includes("aiff")||l.includes("aiff")?"AIFF":l.includes("wave")||l.includes("wav")?"WAV":l.includes("flac")?"FLAC":l.includes("mp4")?"M4A":l.includes("ogg")?"OGG":l.includes("webm")?"WEBM":labelFromMimeOrExt(o,i)}async function extractAudioMeta(r){let s;r instanceof File?s=labelFromMimeOrExt(r.type,extFromName(r.name)):typeof r=="string"&&(s=labelFromMimeOrExt(void 0,extFromName(r)));try{if(r instanceof File){const i=(await libExports.parseBlob(r)).format;return{bitDepth:i.bitsPerSample||void 0,sampleRate:roundKHz(i.sampleRate),bitrateKbps:i.bitrate?Math.round(i.bitrate/1e3):void 0,codecLabel:normalizeCodec(i.container,i.codec,r.type,extFromName(r.name))||s}}else if(typeof r=="string"){const o=await fetch(r,{mode:"cors"}),i=await o.arrayBuffer(),l=o.headers.get("Content-Type")||void 0,d=(await libExports.parseBuffer(new Uint8Array(i),{mimeType:l,size:i.byteLength})).format;return{bitDepth:d.bitsPerSample||void 0,sampleRate:roundKHz(d.sampleRate),bitrateKbps:d.bitrate?Math.round(d.bitrate/1e3):void 0,codecLabel:normalizeCodec(d.container,d.codec,l,extFromName(r))||s}}}catch{}return new Promise(o=>{let i=new Audio;typeof r=="string"?i.src=r:i.src=URL.createObjectURL(r),i.preload="metadata",i.addEventListener("loadedmetadata",()=>{let l,f;try{const d=window.AudioContext||window.webkitAudioContext;if(!d){o({sampleRate:l,bitrateKbps:f,codecLabel:s});return}const c=new d,y=new XMLHttpRequest;y.open("GET",i.src,!0),y.responseType="arraybuffer",y.onload=function(){c.decodeAudioData(y.response,()=>{l=void 0,r instanceof File&&i.duration>0&&(f=Math.round(r.size/i.duration*8/1e3)),o({sampleRate:l,bitrateKbps:f,codecLabel:s})},()=>{o({sampleRate:l,bitrateKbps:f,codecLabel:s})})},y.onerror=function(){o({sampleRate:l,bitrateKbps:f,codecLabel:s})},y.send()}catch{o({sampleRate:l,bitrateKbps:f,codecLabel:s})}}),i.addEventListener("error",()=>o({codecLabel:s}))})}const normalizeNumber=r=>{if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"){const s=r.replace(/[^0-9.]/g,"");if(!s)return;const o=Number(s);return Number.isFinite(o)?o:void 0}},normalizeSampleRate=r=>{const s=normalizeNumber(r);if(s)return s>1e3?Math.round(s/1e3*10)/10:s},needsExtraction=r=>r?!r.bitDepth||!r.sampleRate||!r.bitrateKbps||!r.codecLabel:!0,mergeMeta=(r,s)=>({bitDepth:r?.bitDepth??s.bitDepth,sampleRate:r?.sampleRate??s.sampleRate,bitrateKbps:r?.bitrateKbps??s.bitrateKbps,codecLabel:r?.codecLabel??s.codecLabel});function useTrackAudioMeta(r){const s=reactExports.useMemo(()=>{if(!r)return null;const l=normalizeNumber(r.bitDepth??null),f=normalizeSampleRate(r.sampleRate??null),d=normalizeNumber(r.bitrateKbps??null),c=inferCodecLabel({file:r.file,url:r.audioUrl,qualityHint:r.quality,codecLabel:r.codecLabel});return!l&&!f&&!d&&!c?null:{bitDepth:l||void 0,sampleRate:f||void 0,bitrateKbps:d||void 0,codecLabel:c||void 0}},[r]),[o,i]=reactExports.useState(s);return reactExports.useEffect(()=>{i(s)},[s]),reactExports.useEffect(()=>{if(!r||!r.file&&!r.audioUrl||!needsExtraction(o))return;let l=!1;const f=r.file??r.audioUrl;return(async()=>{try{const c=await extractAudioMeta(f);if(l||!c)return;i(y=>mergeMeta(y,c))}catch(c){console.warn("Failed to extract audio metadata:",c)}})(),()=>{l=!0}},[r,o]),o}const WALL_WARNING_TIME_SECONDS=310,WALL_COLLAPSE_TIME_SECONDS=313,WALL_REQUIRED_COMPLETED_TRACKS=24,WALL_TRACK_SEQUENCE=[{title:"In The Flesh?",aliases:["In the Flesh"]},{title:"The Thin Ice"},{title:"Another Brick In The Wall, Part 1",aliases:["Another Brick in the Wall Part 1"]},{title:"The Happiest Days Of Our Lives",aliases:["The Happiest Days of Our Lives"]},{title:"Another Brick In The Wall, Part 2",aliases:["Another Brick in the Wall Part 2"]},{title:"Mother"},{title:"Goodbye Blue Sky"},{title:"Empty Spaces"},{title:"Young Lust"},{title:"One Of My Turns",aliases:["One of My Turns"]},{title:"Don't Leave Me Now",aliases:["Dont Leave Me Now"]},{title:"Another Brick In The Wall, Part 3",aliases:["Another Brick in the Wall Part 3"]},{title:"Goodbye Cruel World"},{title:"Hey You"},{title:"Is There Anybody Out There?",aliases:["Is There Anybody Out There"]},{title:"Nobody Home"},{title:"Vera"},{title:"Bring The Boys Back Home",aliases:["Bring the Boys Back Home"]},{title:"Comfortably Numb"},{title:"The Show Must Go On"},{title:"In The Flesh",aliases:["In the Flesh (Reprise)","In the Flesh? (Reprise)"]},{title:"Run Like Hell"},{title:"Waiting For The Worms",aliases:["Waiting for the Worms"]},{title:"Stop"},{title:"The Trial"},{title:"Outside The Wall",aliases:["Outside the Wall"]}],stripKnownPrefixes=r=>{let s=r;return s=s.replace(/^[\s._-]*(disc|cd)\s*\d+\s*/g,""),s=s.replace(/^[\s._-]*\d+\s*(?:-|\.|:|\/)\s*/g,""),s=s.replace(/^[\s._-]*\d+\s+/g,""),s=s.replace(/^pink\s+floyd\s*[-:_]?\s*/,""),s=s.replace(/^the\s+wall\s*[-:_]?\s*/,""),s=s.replace(/^[\s._-]+/,""),s},normalizeTitle=r=>{if(!r)return"";let s=r.toLowerCase();return s=s.replace(/\((disc|cd)\s*\d+\)/g," "),s=s.replace(/\[(disc|cd)\s*\d+\]/g," "),s=s.replace(/\b(disc|cd)\s*\d+\b/g," "),s=s.replace(/pink\s+floyd/g," "),s=s.replace(/the\s+wall/g," "),s=stripKnownPrefixes(s),s=s.replace(/[^a-z0-9\s]/g," "),s=s.replace(/\s+/g," "),s.trim()},normalizedWallTrackMap=new Map;WALL_TRACK_SEQUENCE.forEach((r,s)=>{normalizedWallTrackMap.set(normalizeTitle(r.title),s),r.aliases?.forEach(o=>{normalizedWallTrackMap.set(normalizeTitle(o),s)})});const normalizedTrialTitle=normalizeTitle("The Trial"),normalizedOutsideTitle=normalizeTitle("Outside The Wall"),resolveOrderFromNormalized=r=>{if(!r)return null;const s=normalizedWallTrackMap.get(r);if(typeof s=="number")return s;for(const[o,i]of normalizedWallTrackMap.entries())if(o&&(r.includes(o)||o.includes(r)))return i;return null},isPinkFloyd=r=>!!r?.artist&&r.artist.toLowerCase().includes("pink floyd"),isTheWallAlbum=r=>!!r?.album&&r.album.toLowerCase().includes("the wall"),isWallAlbumTrack=r=>isPinkFloyd(r)&&isTheWallAlbum(r),getWallTrackOrder=r=>{if(!r)return null;const s=r.title||r.name;if(!s)return null;const o=normalizeTitle(s);return resolveOrderFromNormalized(o)},isTheTrialTrack=r=>getWallTrackOrder(r)===THE_TRIAL_ORDER_INDEX,THE_TRIAL_ORDER_INDEX=normalizedWallTrackMap.get(normalizedTrialTitle)??WALL_TRACK_SEQUENCE.length-2;normalizedWallTrackMap.get(normalizedOutsideTitle)??WALL_TRACK_SEQUENCE.length-1;const LONG_PAUSE_RESET_MS=600*1e3;function useTheWallTracker({currentTrack:r,currentTime:s,isPlaying:o}){const{startWarning:i,cancelWarning:l,triggerCollapse:f,pinkTierUnlocked:d}=useWall(),[c,y]=reactExports.useState(0),u=reactExports.useRef(0),x=reactExports.useRef(null),g=reactExports.useRef(!1),h=reactExports.useRef(!1),m=reactExports.useRef(null),E=reactExports.useCallback(()=>{m.current&&(typeof window<"u"&&window.clearTimeout(m.current),m.current=null)},[]),w=reactExports.useCallback(C=>{(u.current!==0||g.current)&&l(),u.current=0,x.current=null,g.current=!1,h.current=!1,y(0)},[l]),S=reactExports.useCallback(C=>{d||w(C)},[d,w]),j=reactExports.useCallback(C=>{if(d)return;if(!C){S("missing-track");return}if(!isWallAlbumTrack(C)){S("non-wall");return}const B=getWallTrackOrder(C);if(B===null){S("unknown-order");return}const L=(x.current??-1)+1;if(B===0&&u.current===0){x.current=0,u.current=1,y(1);return}if(B===L){x.current=B;const _=B+1;u.current=_,y(_);return}if(B===0){x.current=0,u.current=1,y(1),g.current=!1,h.current=!1,l();return}S("out-of-order")},[l,S,d]);return reactExports.useEffect(()=>{if(!(d||typeof window>"u"))return o?E():m.current||(m.current=window.setTimeout(()=>{S("long-pause"),m.current=null},LONG_PAUSE_RESET_MS)),()=>{E()}},[o,S,E,d]),reactExports.useEffect(()=>{if(d)return;if(!r){g.current=!1,h.current=!1,l();return}if(!isWallAlbumTrack(r)){u.current>0&&S("switched-album");return}if(!isTheTrialTrack(r)){g.current&&(g.current=!1,l()),h.current=!1;return}if(!(u.current>=WALL_REQUIRED_COMPLETED_TRACKS)){g.current&&(g.current=!1,l());return}s>=WALL_WARNING_TIME_SECONDS&&s<WALL_COLLAPSE_TIME_SECONDS&&!g.current&&(i(),g.current=!0),s<WALL_WARNING_TIME_SECONDS&&g.current&&(g.current=!1,l()),s>=WALL_COLLAPSE_TIME_SECONDS&&!h.current&&(h.current=!0,f())},[r,s,l,S,d,i,f]),reactExports.useMemo(()=>({consecutiveTracks:c,registerNaturalCompletion:j,invalidateSession:S}),[c,j,S])}function MusicPlayer({currentTrack:r,playlist:s,onTrackChange:o,onPlayPause:i,isVisible:l=!0,onControlsReady:f,sidebarCollapsed:d=!1,externalIsPlaying:c,onExpandPlayer:y,onCreatePlaylist:u}){const x=useTrackAudioMeta(r??null),g=reactExports.useRef(null),[h,m]=reactExports.useState(!1),[E,w]=reactExports.useState(0),[S,j]=reactExports.useState(0),[T,C]=reactExports.useState(1),[B,L]=reactExports.useState(!1),[_,R]=reactExports.useState(!1),[P,le]=reactExports.useState(!1),[W,V]=reactExports.useState(!1),[se,Q]=reactExports.useState(!1),[J,ge]=reactExports.useState(!1),[we,Pe]=reactExports.useState(!1),[q,me]=reactExports.useState({bass:0,mid:0,treble:0}),[A,D]=reactExports.useState({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200}),G={display:"inline-block",color:"#a0a0a0",fontSize:"0.55rem",padding:"1px 2px",backgroundColor:"rgba(255,255,255,0.04)",border:"1px solid #2d2d2d",borderRadius:"4px",lineHeight:"1",whiteSpace:"nowrap"},ae=reactExports.useRef(s),ne=reactExports.useRef(o),fe=reactExports.useRef(i),xe=reactExports.useRef({repeatAll:!1,repeatOne:!1}),ke=reactExports.useRef(!1),te=reactExports.useRef(null),ie=reactExports.useRef(0),be=reactExports.useRef(c??!0),Ie=reactExports.useRef(!1),ee=reactExports.useRef(0),F=reactExports.useRef(null),H=reactExports.useRef(()=>{}),oe=reactExports.useRef(r),he=useTheWallTracker({currentTrack:r,currentTime:E,isPlaying:h}),Se=reactExports.useRef(he.registerNaturalCompletion),Re=reactExports.useRef(he.invalidateSession);reactExports.useEffect(()=>{Se.current=he.registerNaturalCompletion},[he.registerNaturalCompletion]),reactExports.useEffect(()=>{Re.current=he.invalidateSession},[he.invalidateSession]),reactExports.useEffect(()=>{ae.current=s},[s]),reactExports.useEffect(()=>{ne.current=o},[o]),reactExports.useEffect(()=>{fe.current=i},[i]),reactExports.useEffect(()=>{xe.current={repeatAll:_,repeatOne:P}},[_,P]),reactExports.useEffect(()=>{ke.current=W},[W]),reactExports.useEffect(()=>{c!==void 0&&(be.current=c)},[c]),reactExports.useEffect(()=>{oe.current=r},[r]);const K=reactExports.useCallback(U=>{if(!g.current||ke.current||xe.current.repeatOne)return;const Z=ae.current;if(!Z.length)return;const de=Z.findIndex(Xe=>Xe.id===U);if(de===-1)return;let Fe=de+1;if(Fe>=Z.length){if(!xe.current.repeatAll)return;Fe=0}if(Fe===de)return;const $e=Z[Fe];!$e||!$e.audioUrl||g.current.preloadNextTrack({url:$e.audioUrl,id:$e.id})},[]),ye=U=>{addRecentlyPlayedTrack({trackId:U.id,trackTitle:U.title||U.name||"Untitled",artistName:U.artist,coverArt:U.coverImage||U.coverArt||"",audioUrl:U.audioUrl||"",playedAt:Date.now()}).catch(Z=>console.error("Failed to track recently played:",Z))};reactExports.useEffect(()=>(g.current||(g.current=new GaplessAudioEngine,g.current.setCallbacks({onStateChange:U=>{U.isPlaying!==void 0&&(m(U.isPlaying),fe.current?.(U.isPlaying)),U.currentTime!==void 0&&w(U.currentTime),U.duration!==void 0&&j(U.duration),U.volume!==void 0&&C(U.volume),U.isMuted!==void 0&&L(U.isMuted)},onTrackEnd:()=>{Se.current?.(oe.current),xe.current.repeatOne?(console.log("Looping current track"),g.current?.seek(0),g.current?.play()):H.current?.("auto")},onTrackChange:U=>{console.log("Gapless transition to track:",U),te.current=U,K(U);const Z=ae.current.find(de=>de.id===U);Z&&ne.current&&ne.current(Z)}}),g.current.setVolume(1)),()=>{g.current?.destroy(),g.current=null}),[K]),reactExports.useEffect(()=>{g.current&&g.current.setEQ(q.bass,q.mid,q.treble)},[q]),reactExports.useEffect(()=>{const U=g.current;if(!r||!U)return;if(te.current===r.id){te.current=null,ye(r);return}if(!r.audioUrl){console.warn("No audioUrl for current track");return}const Z=be.current;if(U.usePreloadedTrack(r.id,Z)){console.log("Used preloaded buffer for track:",r.id),Ie.current=!1,ye(r),K(r.id);const Fe=F.current;if(F.current=null,Fe==="next")H.current?.("auto");else if(Fe==="prev"){const $e=ae.current,Qe=($e.findIndex(Ze=>Ze.id===r.id)-1+$e.length)%$e.length;ne.current?.($e[Qe])}return}const de=++ie.current;Ie.current=!0,console.log("Loading new track:",r.title,"requestId:",de),U.pause(),ye(r),U.loadTrack({url:r.audioUrl,id:r.id}).then(()=>{ie.current===de&&(Ie.current=!1,console.log("Track loaded successfully, starting playback"),U.seek(0),be.current?U.play():U.pause(),K(r.id))}).catch(Fe=>{ie.current===de&&(Ie.current=!1,console.error("Failed to load track:",Fe),be.current=!1,m(!1),fe.current?.(!1))})},[r,K]);const Ne=reactExports.useCallback(()=>{const U=g.current;if(!U)return;const Z=!be.current;be.current=Z,!Ie.current&&(Z?U.play():U.pause())},[]),Ee=reactExports.useCallback(U=>{const Z=g.current;if(!Z)return;const de=Math.max(0,Math.min(1,U));Z.setVolume(de),Z.setMuted(de===0)},[]),De=reactExports.useCallback(U=>{me(U)},[me]),Je=reactExports.useCallback((U="manual")=>{const Z=Date.now();if(U==="manual"){if(Re.current?.("manual-next"),Z-ee.current<300)return;ee.current=Z}if(Ie.current){F.current="next";return}const de=g.current,Fe=ae.current,$e=oe.current;if(!$e||!Fe.length)return;console.log("Skipping to next track");const Xe=Fe.findIndex(xr=>xr.id===$e.id);let Qe=Xe;if(W){if(Fe.length===1){console.log("Only one track available, restarting current track"),de?.seek(0),be.current&&de?.play();return}do Qe=Math.floor(Math.random()*Fe.length);while(Qe===Xe)}else if(Qe=Xe===-1?0:Xe+1,Qe>=Fe.length)if(_)Qe=0;else{console.log("End of playlist reached, stopping playback"),de?.pause(),be.current=!1,m(!1),fe.current?.(!1);return}const Ze=Fe[Qe];if(!Ze){console.warn("No track found for next index",Qe);return}if(Ze.id===$e.id){console.log("Next track resolved to current track, restarting"),de?.seek(0),be.current&&de?.play();return}de?.pause(),console.log(`Current index: ${Xe}, Next index: ${Qe}`),ne.current?.(Ze)},[W,_]);reactExports.useEffect(()=>{H.current=Je},[Je]);const Ye=reactExports.useCallback(()=>{Re.current?.("manual-prev");const U=Date.now();if(Ie.current){F.current="prev";return}if(U-ee.current<300)return;ee.current=U;const Z=g.current,de=ae.current,Fe=oe.current;if(!Fe||!de.length||!Z)return;if(console.log("Skipping to previous track"),E>3){console.log("Restarting current track (>3s)"),Z.seek(0);return}const $e=de.findIndex(Qe=>Qe.id===Fe.id);if($e===-1){console.warn("Current track not found in playlist");return}let Xe;if(W&&de.length>1)do Xe=Math.floor(Math.random()*de.length);while(Xe===$e);else Xe=($e-1+de.length)%de.length;console.log(`Current index: ${$e}, Previous index: ${Xe}`),Z.pause(),ne.current?.(de[Xe])},[W]),rt=U=>{if(!g.current)return;Re.current?.("seek");const Z=parseFloat(U.target.value);g.current.seek(Z)},N=U=>{if(!g.current)return;const Z=parseFloat(U.target.value);g.current.setVolume(Z),g.current.setMuted(Z===0)},b=()=>{if(!g.current)return;const U=!B;g.current.setMuted(U)},k=reactExports.useCallback(()=>{y?.()},[y]),z=U=>{if(isNaN(U))return"0:00";const Z=Math.floor(U/60),de=Math.floor(U%60);return`${Z}:${de.toString().padStart(2,"0")}`};return reactExports.useEffect(()=>{f&&f({gaplessEngine:g.current,isPlaying:h,togglePlayPause:Ne,handleNext:Je,handlePrevious:Ye,currentTime:E,duration:S,formatTime:z,volume:T,setVolume:Ee,eqBands:q,setEqBands:De,invalidateWallSession:he.invalidateSession,wallSessionCount:he.consecutiveTracks})},[h,E,S,T,q,f,Ne,Je,Ye,Ee,De,he.consecutiveTracks,he.invalidateSession]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l&&jsxRuntimeExports.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-xl transition-all duration-300",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",borderTop:"1px solid #333333"},children:[jsxRuntimeExports.jsx("div",{className:"max-w-screen-2xl mr-auto px-4 py-2",children:r?jsxRuntimeExports.jsx("div",{className:"mr-auto",style:{maxWidth:"1500px",width:"100%"},children:jsxRuntimeExports.jsxs("div",{className:"player-bottom-row",children:[jsxRuntimeExports.jsxs("div",{className:"player-bottom-left flex items-center gap-3 w-full",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Open full player",onClick:k,className:"flex-shrink-0 rounded-lg overflow-hidden focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#d32f2f]",style:{lineHeight:0},children:jsxRuntimeExports.jsx(ImageWithFallback,{src:r.coverImage||r.coverArt,alt:r.title||r.name||"Track",className:"w-14 h-14 object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1 mb-1",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:k,className:"text-left truncate mono hover:text-[#d32f2f] transition-colors",style:{color:"#e0e0e0",fontSize:"0.9rem",margin:0,lineHeight:"1.2",fontWeight:700},title:r.title||r.name||"Untitled",children:r.title||r.name||"Untitled"})}),jsxRuntimeExports.jsx("p",{className:"truncate mono",style:{color:"#a0a0a0",fontSize:"0.75rem",marginTop:"0px",lineHeight:"1.2"},children:r.artist}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-2",children:[x?.codecLabel&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0,minWidth:"88px"},children:x.codecLabel}),(x?.bitDepth||x?.sampleRate)&&jsxRuntimeExports.jsxs("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",minWidth:"132px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",padding:"0 8px",fontSize:"0.72rem",flexShrink:0},children:[jsxRuntimeExports.jsx("span",{style:{color:x?.bitDepth===24?"#c6a700":"#a0a0a0"},children:x?.bitDepth?`${x.bitDepth}-bit`:""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:x?.sampleRate?`${x.sampleRate}kHz`:""})]}),x?.bitrateKbps&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0},children:formatBitrate(x.bitrateKbps)})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-center flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Create playlist",onClick:()=>u&&u(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},title:"Create Playlist",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":W?"Disable shuffle":"Enable shuffle",onClick:()=>V(!W),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:W?"#d32f2f":"#a0a0a0"},children:jsxRuntimeExports.jsx(Shuffle,{size:16})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Previous track",onClick:Ye,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipBack,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":h?"Pause":"Play",onClick:Ne,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:"#d32f2f"},children:h?jsxRuntimeExports.jsx(Pause,{size:20,fill:"#ffffff",color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:20,fill:"#ffffff",color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Next track",onClick:()=>Je("manual"),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipForward,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{!_&&!P?(R(!0),le(!1)):_&&!P?(R(!1),le(!0)):(R(!1),le(!1))},className:"p-2 rounded-lg transition-all duration-200 hover:scale-110 relative",style:{color:_||P?"#d32f2f":"#a0a0a0"},title:P?"Repeat One":_?"Repeat Playlist":"Repeat Off",children:[jsxRuntimeExports.jsx(Repeat,{size:16}),P&&jsxRuntimeExports.jsx("span",{className:"absolute",style:{fontSize:"0.5rem",fontWeight:"bold",color:"#d32f2f",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",style:{maxWidth:"500px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},children:z(E)}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:S||0,value:E,onChange:rt,className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${S>0?E/S*100:0}%, #333333 ${S>0?E/S*100:0}%)`,appearance:"none",cursor:"pointer"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},"aria-live":"polite",children:z(S)})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-right flex items-center gap-3 justify-end relative w-full md:ml-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":J?"Hide equalizer":"Show equalizer",onClick:()=>ge(!J),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:J?"#d32f2f":"#a0a0a0"},title:"Equalizer",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"14",x2:"6",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"10",y1:"8",x2:"14",y2:"8"}),jsxRuntimeExports.jsx("line",{x1:"18",y1:"16",x2:"22",y2:"16"})]})}),J&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-full right-0 mb-2 p-4 rounded-lg backdrop-blur-xl",style:{backgroundColor:"rgba(26, 26, 26, 0.98)",border:"1px solid #333333",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",width:"240px"},role:"group","aria-label":"Equalizer controls",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":we?"Hide advanced EQ":"Show advanced EQ",onClick:()=>Pe(!we),className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:we?"#d32f2f":"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)",border:we?"1px solid #d32f2f":"none"},children:"Adv"}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Reset equalizer",onClick:()=>{me({bass:0,mid:0,treble:0}),D({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200})},className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:"Reset"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:q.bass,onChange:U=>me({...q,bass:parseFloat(U.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(q.bass+12)/24*100}%, #333333 ${(q.bass+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":q.bass,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:G,children:[q.bass>0?"+":"",q.bass," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:q.mid,onChange:U=>me({...q,mid:parseFloat(U.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(q.mid+12)/24*100}%, #333333 ${(q.mid+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":q.mid,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:G,children:[q.mid>0?"+":"",q.mid," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:q.treble,onChange:U=>me({...q,treble:parseFloat(U.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(q.treble+12)/24*100}%, #333333 ${(q.treble+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":q.treble,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:G,children:[q.treble>0?"+":"",q.treble," dB"]})]}),we&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"my-2",style:{height:"1px",backgroundColor:"#333333"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:"Frequency Controls"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Bass Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"20",max:"500",step:"10",value:A.bassFreq,onChange:U=>{const Z=parseFloat(U.target.value);D({...A,bassFreq:Z}),g.current?.setAdvancedEQ(Z,A.midFreq,A.midQ,A.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(A.bassFreq-20)/480*100}%, #333333 ${(A.bassFreq-20)/480*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass frequency","aria-valuemin":20,"aria-valuemax":500,"aria-valuenow":A.bassFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:A.bassFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"200",max:"5000",step:"100",value:A.midFreq,onChange:U=>{const Z=parseFloat(U.target.value);D({...A,midFreq:Z}),g.current?.setAdvancedEQ(A.bassFreq,Z,A.midQ,A.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(A.midFreq-200)/4800*100}%, #333333 ${(A.midFreq-200)/4800*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid frequency","aria-valuemin":200,"aria-valuemax":5e3,"aria-valuenow":A.midFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:A.midFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Q"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:A.midQ,onChange:U=>{const Z=parseFloat(U.target.value);D({...A,midQ:Z}),g.current?.setAdvancedEQ(A.bassFreq,A.midFreq,Z,A.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(A.midQ-.1)/9.9*100}%, #333333 ${(A.midQ-.1)/9.9*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid Q","aria-valuemin":.1,"aria-valuemax":10,"aria-valuenow":A.midQ,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:A.midQ.toFixed(1)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Treble Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"2000",max:"16000",step:"100",value:A.trebleFreq,onChange:U=>{const Z=parseFloat(U.target.value);D({...A,trebleFreq:Z}),g.current?.setAdvancedEQ(A.bassFreq,A.midFreq,A.midQ,Z)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(A.trebleFreq-2e3)/14e3*100}%, #333333 ${(A.trebleFreq-2e3)/14e3*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble frequency","aria-valuemin":2e3,"aria-valuemax":16e3,"aria-valuenow":A.trebleFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:A.trebleFreq})]})]})]})})]}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":B?"Unmute":"Mute",onClick:b,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",children:B?jsxRuntimeExports.jsx(VolumeX,{size:18,color:"#a0a0a0"}):jsxRuntimeExports.jsx(Volume2,{size:18,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:B?0:T,onChange:N,className:"w-20 md:w-24",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(B?0:T)*100}%, #333333 ${(B?0:T)*100}%)`,appearance:"none",cursor:"pointer"}})]})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"48px"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.9rem"},children:"No track playing"})})}),jsxRuntimeExports.jsx("style",{children:`
            input[type="range"]::-webkit-slider-thumb {
              appearance: none;
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
            }
            input[type="range"]::-moz-range-thumb {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
              border: none;
            }
          `})]})})}const BRICK_COLUMNS=8,BRICK_ROWS=6,TOTAL_BRICKS=BRICK_COLUMNS*BRICK_ROWS,FORCED_OVERLAY_STATES=new Set(["SHAKING","COLLAPSED","REBUILDING"]);function WallOverlay({enabled:r=!0}){const{wallState:s}=useWall();if(!(r||FORCED_OVERLAY_STATES.has(s)))return null;const i=reactExports.useMemo(()=>Array.from({length:TOTAL_BRICKS}).map((l,f)=>{const d=Math.floor(f/BRICK_COLUMNS),c=f%BRICK_COLUMNS;return{id:`wall-brick-${f}`,row:d,column:c,jitter:(Math.random()-.5)*4}}),[]);return jsxRuntimeExports.jsx("div",{className:`wall-overlay wall-overlay--${s.toLowerCase()}`,"aria-hidden":"true",children:i.map(l=>{const f={"--wall-row":`${l.row}`,"--wall-column":`${l.column}`,"--wall-jitter":`${l.jitter}px`};return jsxRuntimeExports.jsx("div",{className:"wall-overlay__brick",style:f},l.id)})})}class LastFmService{apiKey;baseUrl="https://ws.audioscrobbler.com/2.0/";constructor(s){this.apiKey=s}async makeRequest(s){const o=new URLSearchParams({...s,api_key:this.apiKey,format:"json"}),i=await fetch(`${this.baseUrl}?${o}`);if(!i.ok)throw new Error(`Last.fm API error: ${i.status}`);return i.json()}async getTrackInfo(s,o){try{const i=await this.makeRequest({method:"track.getInfo",artist:s,track:o});return i.track?{name:i.track.name,artist:i.track.artist.name,album:i.track.album?.title,duration:i.track.duration?Math.floor(parseInt(i.track.duration)/1e3).toString():void 0}:null}catch(i){return console.error("Error fetching track info:",i),null}}async getArtistInfo(s){try{const o=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(s)}`);if(o.ok){const l=await o.json();if(l.extract&&l.extract.length>100)return{name:s,bio:l.extract,image:l.thumbnail?.source,similar:[]}}const i=await this.makeRequest({method:"artist.getInfo",artist:s});return i.artist?{name:i.artist.name,bio:i.artist.bio?.summary||i.artist.bio?.content,image:i.artist.image?.find(l=>l.size==="large")?.["#text"],similar:i.artist.similar?.artist?.map(l=>l.name)||[]}:null}catch(o){return console.error("Error fetching artist info:",o),null}}async getLyrics(s,o){try{const i=await fetch(`https://api.genius.com/search?q=${encodeURIComponent(`${s} ${o}`)}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(i.ok){const f=await i.json();if(f.response?.hits?.[0]?.result?.id){const d=f.response.hits[0].result.id,c=await fetch(`https://api.genius.com/songs/${d}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(c.ok){const y=await c.json();if(y.response?.song?.lyrics?.plain)return y.response.song.lyrics.plain}}}const l=await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(s)}/${encodeURIComponent(o)}`);if(l.ok){const f=await l.json();if(f.lyrics)return f.lyrics}return console.log(`Lyrics not found for ${s} - ${o}`),null}catch(i){return console.error("Error fetching lyrics:",i),null}}}const lastFmService=new LastFmService("YOUR_LASTFM_API_KEY_HERE"),parseLRC=r=>{const s=r.split(`
`),o=[];for(const i of s){const l=i.trim(),f=new RegExp("\\[(\\d{2}):(\\d{2})(?:\\.(\\d{2,3}))?\\]","g"),d=[...l.matchAll(f)];if(d.length===0)continue;const c=l.replace(f,"").trim();d.forEach(y=>{const u=parseInt(y[1],10),x=parseInt(y[2],10),g=y[3]?parseInt(y[3],10):0,h=y[3]?.length===3?1e3:100,m=u*60+x+g/h;o.push({time:m,text:c})})}return o.sort((i,l)=>i.time-l.time)},fetchWikipediaAlbumSummary=async(r,s)=>{if(!s)return null;const i=(typeof lastFmService.sanitizeTitle=="function"?lastFmService.sanitizeTitle.bind(lastFmService):c=>c)(s),l=r?.trim(),f=[s,i,i?`${i} (album)`:"",i&&l?`${i} (${l} album)`:""].filter(c=>!!(c&&c.trim())),d=new Set;for(const c of f){const y=c.toLowerCase();if(!d.has(y)){d.add(y);try{const u=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(c)}`);if(!u.ok)continue;const x=await u.json();if(x?.extract)return{title:typeof x.title=="string"?x.title:c,summary:x.extract,image:x.thumbnail?.source}}catch(u){console.error("Wikipedia album summary fetch failed:",u)}}}return null};function PlayerApple({track:r,isPlaying:s,onPlayPause:o,onClose:i,onArtistClick:l,onNext:f,onPrevious:d,currentTime:c=0,duration:y=0,formatTime:u=E=>"0:00",onVolumeChange:x,onEqChange:g,volumeLevel:h=1,eqBands:m}){const[E,w]=reactExports.useState("cover"),[S,j]=reactExports.useState(s),T=useTrackAudioMeta(r),[C,B]=reactExports.useState(null),[L,_]=reactExports.useState(null),[R,P]=reactExports.useState(!1),[le,W]=reactExports.useState(!1),[V,se]=reactExports.useState(null),[Q,J]=reactExports.useState(!1),[ge,we]=reactExports.useState(!1),Pe=reactExports.useRef(null),[q,me]=reactExports.useState(Math.round(Math.max(0,Math.min(1,h))*100)),[A,D]=reactExports.useState({low:m?.low??0,mid:m?.mid??0,high:m?.high??0}),[G,ae]=reactExports.useState(!1),[ne,fe]=reactExports.useState(!1);reactExports.useEffect(()=>j(s),[s]),reactExports.useEffect(()=>{me(Math.round(Math.max(0,Math.min(1,h))*100))},[h]),reactExports.useEffect(()=>{m&&D({low:m.low??0,mid:m.mid??0,high:m.high??0})},[m]),reactExports.useEffect(()=>{const Ie=async()=>{if(r.artist){P(!0);try{const H=await lastFmService.getArtistInfo(r.artist);B(H)}catch(H){console.error("Failed to fetch artist info:",H)}finally{P(!1)}}},ee=async()=>{const H=r.album;if(!r.artist||!H){_(null);return}W(!0);try{let oe=null;try{oe=await lastFmService.getAlbumInfoLoose(r.artist,H,r.title)}catch(Se){console.error("Failed to fetch album info:",Se)}if(oe?.summary){_(oe);return}const he=await fetchWikipediaAlbumSummary(r.artist,H);if(he){_({title:oe?.title||he.title||H,artist:oe?.artist||r.artist,summary:he.summary,image:oe?.image||he.image,tracks:oe?.tracks});return}_(oe)}finally{W(!1)}},F=async()=>{if(!(!r.artist||!r.title)){we(!0),se(null),J(!1);try{const H=r.duration||(y>0?y:0);let oe=`https://lrclib.net/api/get?artist_name=${encodeURIComponent(r.artist)}&track_name=${encodeURIComponent(r.title)}`;H>0&&(oe+=`&duration=${Math.round(H)}`);const he=await fetch(oe);if(he.ok){const Se=await he.json();Se.syncedLyrics?(se(Se.syncedLyrics),J(!0)):Se.plainLyrics?(se(Se.plainLyrics),J(!1)):se(null)}}catch(H){console.error("Failed to fetch lyrics from LRCLIB:",H),se(null)}finally{we(!1)}}};Ie(),ee(),F()},[r.artist,r.title,r,y]);const xe=reactExports.useMemo(()=>!V||!Q?[]:parseLRC(V),[V,Q]),ke=reactExports.useMemo(()=>!Q||xe.length===0?-1:xe.findIndex((Ie,ee)=>{const F=xe[ee+1];return c>=Ie.time&&(!F||c<F.time)}),[c,xe,Q]);reactExports.useEffect(()=>{E==="lyrics"&&Pe.current&&Pe.current.scrollIntoView({behavior:"smooth",block:"center"})},[ke,E]);const te=`In the depths of concrete walls
Where the echoes softly call
Building dreams from brick and stone
Finding strength we've always known

Industrial soundscapes fill the air
Melodies beyond compare`,ie="No artist bio available.",be=Ie=>w(Ie);return jsxRuntimeExports.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(8px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{width:"92%",maxWidth:"980px",height:"85vh",background:"#111",borderRadius:"16px",border:"1px solid #333",color:"#e0e0e0",fontFamily:"'Inter', 'Plus Jakarta Sans', sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",padding:"16px",display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"center",gap:"24px",flex:"0 0 auto"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx(Volume2,{size:16,color:"#bbb"}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,value:q,onChange:Ie=>{const ee=Number(Ie.target.value);me(ee),x?.(ee/100)},style:{width:"180px",maxWidth:"45vw",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"0.85rem",color:"#bbb",whiteSpace:"nowrap"},children:[Math.round(q),"%"]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"16px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:d,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipBack,{size:22,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{j(!S),o()},style:{background:"#d32f2f",border:"none",borderRadius:"50%",width:"72px",height:"72px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(211,47,47,0.4)"},children:S?jsxRuntimeExports.jsx(Pause,{size:30,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:30,color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{onClick:f,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipForward,{size:22,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"14px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>ae(!G),title:G?"Hide equalizer":"Show equalizer",style:{background:"none",border:G?"1px solid #d32f2f":"1px solid #444",color:G?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:jsxRuntimeExports.jsx(SlidersVertical,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>fe(!ne),title:ne?"Disable Loop":"Enable Loop",style:{background:"none",border:ne?"1px solid #d32f2f":"1px solid #444",color:ne?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsx(Repeat,{size:16})})]}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:12,top:12,display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer"},title:"Minimize",children:jsxRuntimeExports.jsx(ChevronDown,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:i,style:{background:"none",border:"none",cursor:"pointer"},title:"Close",children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})})]})]}),G&&jsxRuntimeExports.jsx("div",{style:{position:"relative",flex:"0 0 auto"},children:jsxRuntimeExports.jsxs("div",{style:{margin:"0 24px 8px",background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.35)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Ie={low:0,mid:0,high:0};D(Ie),g?.(Ie)},style:{background:"none",border:"1px solid #444",color:"#a0a0a0",borderRadius:"10px",padding:"4px 8px",cursor:"pointer"},children:"Reset"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:A.low,onChange:Ie=>{const ee=Number(Ie.target.value),F={...A,low:ee};D(F),g?.(F)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[A.low," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:A.mid,onChange:Ie=>{const ee=Number(Ie.target.value),F={...A,mid:ee};D(F),g?.(F)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[A.mid," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:A.high,onChange:Ie=>{const ee=Number(Ie.target.value),F={...A,high:ee};D(F),g?.(F)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[A.high," dB"]})]})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"240px 1fr",gap:"24px",padding:"16px",overflow:"hidden",flex:"1 1 auto"},children:[jsxRuntimeExports.jsx("div",{style:{width:"240px",height:"240px",borderRadius:"16px",overflow:"hidden",background:"#222",boxShadow:"0 20px 60px rgba(0,0,0,0.4)"},children:jsxRuntimeExports.jsx("img",{src:r.coverArt||r.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:r.album||"Cover",style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",minHeight:0},children:[jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"2rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.title||r.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:l,style:{background:"none",border:"none",color:"#aaa",cursor:"pointer",fontSize:"1.1rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.artist}),jsxRuntimeExports.jsx("p",{style:{marginTop:"4px",color:"#888",fontFamily:"'Syne', 'Inter', sans-serif",fontWeight:500,letterSpacing:"-0.02em"},children:r.album||""}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginTop:"8px"},children:[T?.codecLabel&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",color:"#e0e0e0",fontFamily:"JetBrains Mono, Space Mono, monospace"},children:String(T.codecLabel).toUpperCase()}),(T?.bitDepth||T?.sampleRate)&&jsxRuntimeExports.jsxs("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"6px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",padding:"0 10px",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:T?.bitDepth===24?"#c6a700":"#a0a0a0"},children:T?.bitDepth?String(T.bitDepth)+"-bit":""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:T?.sampleRate?String(T.sampleRate)+"kHz":""})]}),T?.bitrateKbps&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:formatBitrate(T.bitrateKbps)})]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto"},children:[jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"2px",marginBottom:"6px"},children:jsxRuntimeExports.jsx("div",{style:{height:"4px",backgroundColor:"#d32f2f",borderRadius:"2px",width:String(y>0?c/y*100:0)+"%",transition:"width 0.3s ease"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:"#a0a0a0"},children:[jsxRuntimeExports.jsx("span",{children:u(c)}),jsxRuntimeExports.jsx("span",{children:u(y)})]})]}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",minHeight:"320px",overflowY:"auto",padding:"1rem",animation:"fadeIn 0.3s ease-out",flex:"1 1 auto"},children:[E==="bio"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",overflow:"hidden",marginBottom:"1rem",boxShadow:"0 16px 32px rgba(0,0,0,0.3)"},children:jsxRuntimeExports.jsx("img",{src:C?.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:r.artist,style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,color:"#e0e0e0",marginBottom:"0.75rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.artist}),jsxRuntimeExports.jsx("div",{style:{color:"#a0a0a0",fontSize:"1rem",lineHeight:1.75,textAlign:"left"},children:R?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):jsxRuntimeExports.jsx("p",{style:{textAlign:"left"},children:C?.bio||ie})})]}),E==="cover"&&jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.75rem"},children:jsxRuntimeExports.jsxs("div",{style:{width:"100%",maxWidth:"720px",textAlign:"left"},children:[jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,margin:"0.25rem 0",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:L?.title||String(r.album||"Album").replace(/[\(\[].*?[\)\]]/g,"").trim()}),le?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}})]}):L?.summary?jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:L.summary}):jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No album details available."})]})}),E==="lyrics"&&jsxRuntimeExports.jsxs("div",{style:{color:"#a0a0a0",fontSize:"1.125rem",lineHeight:1.75,textAlign:"left",minHeight:"300px",paddingBottom:"3rem"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:500,color:"#e0e0e0",marginBottom:"0.25rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.title||r.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:l,style:{fontSize:"1rem",color:"#a0a0a0",background:"none",border:"none",cursor:"pointer",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:r.artist})]}),ge?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Q&&xe.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:xe.map((Ie,ee)=>{const F=ee===ke;return jsxRuntimeExports.jsx("div",{ref:F?Pe:null,style:{color:F?"#ffffff":"#555555",transition:"all 0.3s",opacity:F?1:.6,fontWeight:F?500:300},children:Ie.text||""},ee)})}):jsxRuntimeExports.jsx("pre",{style:{whiteSpace:"pre-wrap",textAlign:"left",fontWeight:300},children:V||te})})]})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",paddingBottom:"0.5rem",flex:"0 0 auto"},children:["bio","cover","lyrics"].map(Ie=>jsxRuntimeExports.jsx("button",{onClick:()=>be(Ie),style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:E===Ie?"#ffffff":"rgba(255,255,255,0.4)",border:"none",cursor:"pointer",transition:"all 0.3s",transform:E===Ie?"scale(1.25)":"scale(1)"}},Ie))})]})]})]})})}function Navigation({activeTab:r,onTabChange:s,activeFilter:o,onFilterChange:i,onSettingsClick:l,isPinkMode:f=!1,notifications:d,onNotificationsViewed:c,onNotificationDismiss:y}){const[u,x]=reactExports.useState(!0),[g,h]=reactExports.useState(!1),{theme:m,toggleTheme:E,colors:w}=useTheme$1(),S=d??[],j=S.filter(_=>_.unread).length,T=()=>{h(_=>{const R=!_;return!_&&R&&j>0&&c?.(),R})},C=_=>{try{return new Date(_).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}catch{return""}},B=[{id:"home",label:"Foundation",icon:House},{id:"radar",label:"Radar",icon:Target},{id:"profile",label:"My Wall",icon:Grid3x3},{id:"vault",label:"Vault",icon:Lock}],L=[{id:"all",label:"All"},{id:"payroll",label:"Payroll"},{id:"network",label:"Network"},{id:"recent",label:"Recent"},{id:"feed",label:"Feed"}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:flex fixed left-0 top-0 bottom-0 z-50 flex-col nav-rail",style:{width:"var(--rail-left-width)",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderRight:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"4px 0 20px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b",style:{borderColor:w.border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{style:{color:w.text.primary,fontSize:"1.25rem",letterSpacing:"0.08em"},children:"BRICK"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:T,className:"flex items-center justify-center rounded-full transition-colors relative",style:{width:"36px",height:"36px",border:"1px solid rgba(255,255,255,0.08)",backgroundColor:"rgba(0,0,0,0.2)"},title:"Notifications",children:[jsxRuntimeExports.jsx(Bell,{size:16,color:w.text.primary,strokeWidth:2}),j>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center rounded-full text-[0.55rem] font-semibold",style:{width:"16px",height:"16px",backgroundColor:"#ff00cc",color:"#0c0c0c"},children:j>9?"9+":j})]}),g&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 w-72 rounded-2xl shadow-2xl border border-white/10",style:{backgroundColor:"rgba(10, 10, 10, 0.95)",backdropFilter:"blur(14px)",zIndex:60},children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-b border-white/5 flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"mono text-[0.65rem] tracking-[0.3em] text-white/70",children:"ALERTS"}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!1),className:"rounded-full p-1 hover:bg-white/5 transition-colors","aria-label":"Close notifications",children:jsxRuntimeExports.jsx(X,{size:14,strokeWidth:2,color:"rgba(255,255,255,0.6)"})})]}),jsxRuntimeExports.jsxs("div",{className:"max-h-72 overflow-y-auto divide-y divide-white/5",children:[S.length===0&&jsxRuntimeExports.jsx("div",{className:"px-4 py-5 text-sm text-white/60",children:"You're all caught up."}),S.map(_=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 flex flex-col gap-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",style:{color:"#ffffff"},children:_.title}),jsxRuntimeExports.jsx("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.7)"},children:_.message})]}),jsxRuntimeExports.jsx("button",{onClick:()=>y?.(_.id),className:"p-1 rounded-full hover:bg-white/5 transition-colors","aria-label":"Dismiss notification",children:jsxRuntimeExports.jsx(X,{size:12,strokeWidth:2,color:"rgba(255,255,255,0.4)"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[0.65rem] uppercase tracking-widest",style:{color:"rgba(255,255,255,0.4)"},children:[jsxRuntimeExports.jsx("span",{children:C(_.timestamp)}),_.unread&&jsxRuntimeExports.jsx("span",{style:{color:"#ff00cc"},children:"NEW"})]})]},_.id))]})]})]})]})}),r==="home"&&o&&i&&jsxRuntimeExports.jsxs("div",{className:"px-3 py-3 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"FILTERS"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:L.map(_=>{const R=o===_.id;return jsxRuntimeExports.jsx("button",{onClick:()=>{i(_.id),x(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:R?"rgba(211, 47, 47, 0.1)":"transparent"},children:jsxRuntimeExports.jsx("span",{style:{fontSize:"0.82rem",color:R?"#d32f2f":"#a0a0a0",fontWeight:R?600:400},children:_.label})},_.id)})})]}),jsxRuntimeExports.jsxs("nav",{className:"flex-1 px-3 py-3 overflow-y-auto",style:{paddingBottom:"120px"},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:w.text.tertiary,fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NAVIGATE"}),B.map(_=>{const R=_.icon,P=r===_.id,W=_.id==="profile"&&f,V=`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1.5 transition-all duration-200 hover:opacity-80 ${W?pinkStyles.navPinkButton:""}`,se=`${W?pinkStyles.navPinkLabel:""}`;return jsxRuntimeExports.jsxs("button",{onClick:()=>{s(_.id),x(!1)},style:{backgroundColor:W?"transparent":P?"rgba(211, 47, 47, 0.1)":"transparent"},className:V,children:[jsxRuntimeExports.jsx(R,{size:18,strokeWidth:2,color:W?"#ffffff":P?w.accent:w.text.secondary,className:"transition-colors"}),jsxRuntimeExports.jsx("span",{className:se,style:{fontSize:W?"1rem":"0.82rem",color:W?"#ffffff":P?w.accent:w.text.secondary,fontWeight:W?500:P?600:400},children:_.label})]},_.id)})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-[#333333] space-y-2",style:{position:"sticky",bottom:"96px",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("button",{onClick:l,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.05)"},children:[jsxRuntimeExports.jsx(Settings,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Settings"})]}),jsxRuntimeExports.jsx("button",{onClick:E,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.1)"},children:m==="dark"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sun,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Light Mode"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Moon,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Dark Mode"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden fixed bottom-20 right-4 z-40",children:jsxRuntimeExports.jsx("button",{onClick:E,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:w.bg.secondary,border:`1px solid ${w.border}`},title:m==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:m==="dark"?jsxRuntimeExports.jsx(Sun,{size:20,color:w.accent,strokeWidth:2}):jsxRuntimeExports.jsx(Moon,{size:20,color:w.accent,strokeWidth:2})})}),u&&jsxRuntimeExports.jsx("div",{className:"hidden md:block fixed inset-0 bg-black/40 z-40",onClick:()=>x(!1)}),jsxRuntimeExports.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto px-6 py-3",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around items-center",children:B.map(_=>{const R=_.icon,P=r===_.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>s(_.id),className:"flex flex-col items-center gap-1 py-2 px-4 transition-all",children:[jsxRuntimeExports.jsx(R,{size:24,strokeWidth:2,color:P?"#d32f2f":"#a0a0a0",className:"transition-colors"}),jsxRuntimeExports.jsx("span",{className:"mono transition-colors",style:{fontSize:"0.65rem",color:P?"#d32f2f":"#a0a0a0"},children:_.label})]},_.id)})})})})]})}function ConnectionAuditModal({isOpen:r,onClose:s,userName:o,userAvatar:i,matchScore:l,mutualArtists:f,diversityScore:d=85,onConnect:c,onConnectSuccess:y}){if(!r)return null;const u=d<30,x=()=>{c(),s(),y()};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:s,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsxs("div",{onClick:g=>g.stopPropagation(),className:"relative w-full max-w-md bg-[#252525] rounded-t-2xl md:rounded-2xl overflow-hidden animate-slide-up",style:{boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Connection Audit"}),jsxRuntimeExports.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-[#333333] transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:i,alt:o,className:"w-16 h-16 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:o}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:["Architect  Diversity: ",d,"/100"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"120",height:"120",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#1a1a1a",strokeWidth:"10",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#546e7a",strokeWidth:"10",fill:"none",strokeDasharray:`${l/100*314} 314`,strokeLinecap:"round"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:[l,"%"]})})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"STRUCTURAL INTEGRITY"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"SHARED TASTE ANALYSIS"}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}})]}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:[f.length," Mutual Artists"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((g,h)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"#252525",color:"#e0e0e0",fontSize:"0.75rem"},children:g},h))})]})]}),u&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:20,color:"#d32f2f",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:jsxRuntimeExports.jsx("strong",{children:"Warning: High Repetition Detected"})}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Potential stream farm. Low diversity score indicates repetitive listening."})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:s,className:"flex-1 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:x,className:"flex-1 py-3 rounded-full transition-all hover:scale-[1.02]",style:{backgroundColor:"#546e7a",color:"#e0e0e0",boxShadow:"0 4px 12px rgba(84, 110, 122, 0.3)"},children:"Send Connection Request"})]})]})]})]})}function ConnectionSuccessModal({isOpen:r,onClose:s,userName:o,userAvatar:i}){if(!r)return null;const l=[{icon:Music,title:"Unlock Playlists",description:"Access their curated collections"},{icon:Shield,title:"Ad-Free Listening",description:"No ads when playing their bricks"},{icon:Zap,title:"Live Updates",description:"See their new bricks in your feed"}];return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:s}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",boxShadow:"0 8px 30px rgba(211, 47, 47, 0.5)"},children:jsxRuntimeExports.jsx(Check,{size:40,color:"#e0e0e0",strokeWidth:3})}),jsxRuntimeExports.jsx("img",{src:i,alt:o,className:"w-16 h-16 rounded-full mx-auto mb-3 border-2",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:["Connected to ",o]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"CONNECTION ESTABLISHED"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:l.map((f,d)=>{const c=f.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsx(c,{size:18,color:"#546e7a"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:f.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:f.description})]})]},d)})}),jsxRuntimeExports.jsx("button",{onClick:s,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",color:"#e0e0e0",boxShadow:"0 4px 20px rgba(211, 47, 47, 0.4)"},children:"Start Exploring"})]})]})}function PatronageLockModal({isOpen:r,onClose:s,artistName:o,daysRemaining:i,onPayEarlyUnlock:l}){if(!r)return null;const f=5;return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:s}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{backgroundColor:"rgba(198, 167, 0, 0.2)",border:"2px solid #c6a700"},children:jsxRuntimeExports.jsx(Lock,{size:36,color:"#c6a700"})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Patronage Slot Locked"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You're currently supporting another artist"})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(Clock,{size:20,color:"#546e7a"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Time Until Unlock"}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.25rem"},children:[i," Days"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-2",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full",style:{width:`${(30-i)/30*100}%`,background:"linear-gradient(to right, #546e7a, #d32f2f)"}})})]}),jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(26, 26, 26, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",lineHeight:"1.6"},children:"Brick encourages long-term support. Your monthly patronage slots unlock every 30 days, ensuring artists receive stable, committed support."})}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{background:"linear-gradient(135deg, rgba(198, 167, 0, 0.1), rgba(198, 167, 0, 0.05))",border:"1px solid rgba(198, 167, 0, 0.3)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[jsxRuntimeExports.jsx(DollarSign,{size:20,color:"#c6a700",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#c6a700"},children:"Early Unlock Available"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:"Switch your patronage immediately for a one-time fee"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Early Unlock Fee"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#c6a700",fontSize:"1.25rem"},children:["$",f.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{l(),s()},className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #c6a700, #a08700)",color:"#1a1a1a",fontWeight:600,boxShadow:"0 4px 20px rgba(198, 167, 0, 0.4)"},children:["Pay $",f.toFixed(2)," to Switch Now"]}),jsxRuntimeExports.jsxs("button",{onClick:s,className:"w-full py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:["Wait ",i," Days"]})]}),jsxRuntimeExports.jsxs("p",{className:"mono text-center mt-4",style:{color:"#666666",fontSize:"0.65rem"},children:["80% OF FEE GOES TO ",o.toUpperCase()]})]})]})}function UserSettingsModal({isOpen:r,onClose:s,userName:o="User",userAvatar:i="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100"}){const[l,f]=reactExports.useState(()=>{const c=localStorage.getItem("userSettings");return c?JSON.parse(c):{monthlySupport:!1,plan:"Sketcher"}});reactExports.useEffect(()=>{localStorage.setItem("userSettings",JSON.stringify(l))},[l]);const d=async()=>{try{const y=(await openPlaylistDB$1()).transaction(["playlists","localTracks","recentlyPlayed"],"readonly"),u=await new Promise(w=>{const S=y.objectStore("playlists").getAll();S.onsuccess=()=>w(S.result)}),x={exportDate:new Date().toISOString(),userPlan:l.plan,monthlySupport:l.monthlySupport,playlistsCount:u.length,playlists:u.map(w=>({name:w.name,artist:w.artist,trackCount:w.tracks.length,structuralIntegrity:w.structuralIntegrity,createdDate:new Date(parseInt(w.id)).toISOString()}))},g=JSON.stringify(x,null,2),h=new Blob([g],{type:"application/json"}),m=URL.createObjectURL(h),E=document.createElement("a");E.href=m,E.download=`brick-listening-data-${Date.now()}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(m)}catch(c){console.error("Failed to export data:",c),alert("Failed to export listening data")}};return r?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-lg p-6 relative",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[jsxRuntimeExports.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 hover:bg-[#2a2a2a] rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:i,alt:o,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{style:{color:"#e0e0e0"},className:"text-xl font-bold",children:o}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},className:"text-sm",children:"Settings"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},className:"font-semibold mb-3",children:"Plan"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Sketcher","Mason","Architect"].map(c=>jsxRuntimeExports.jsx("button",{onClick:()=>f({...l,plan:c}),className:"p-3 rounded-lg transition-all text-sm font-medium",style:{backgroundColor:l.plan===c?"rgba(211, 47, 47, 0.15)":"#252525",color:l.plan===c?"#d32f2f":"#a0a0a0",border:l.plan===c?"1px solid #d32f2f":"1px solid #333333"},children:c},c))}),jsxRuntimeExports.jsxs("p",{style:{color:"#666666"},className:"text-xs mt-2",children:[l.plan==="Sketcher"&&"Basic features, up to 10 playlists",l.plan==="Mason"&&"Advanced features, up to 50 playlists",l.plan==="Architect"&&"Premium features, unlimited playlists"]})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg",style:{backgroundColor:"#252525"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>f({...l,monthlySupport:!l.monthlySupport}),className:"w-full flex items-center justify-between cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Heart,{size:18,color:l.monthlySupport?"#d32f2f":"#a0a0a0",fill:l.monthlySupport?"#d32f2f":"none"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"font-medium",children:"Monthly Support"}),jsxRuntimeExports.jsxs("p",{style:{color:"#666666"},className:"text-xs",children:["$",l.monthlySupport?"9.99":"0","/month"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-6 rounded-full flex items-center px-1 transition-colors",style:{backgroundColor:l.monthlySupport?"#d32f2f":"#444444"},children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full bg-white transition-transform",style:{transform:l.monthlySupport?"translateX(16px)":"translateX(0)"}})})]})}),jsxRuntimeExports.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg mb-4 transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"#252525",color:"#e0e0e0",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export Listening Data"]}),jsxRuntimeExports.jsx("p",{style:{color:"#666666"},className:"text-xs text-center",children:"Your settings are saved locally. Monthly support is for creators."})]})}):null}const openPlaylistDB$1=()=>new Promise((r,s)=>{const o=indexedDB.open("BrickMusicDB",2);o.onerror=()=>s(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=i=>{const l=i.target.result;l.objectStoreNames.contains("localTracks")||l.createObjectStore("localTracks",{keyPath:"id"}),l.objectStoreNames.contains("playlists")||l.createObjectStore("playlists",{keyPath:"id"})}}),DB_NAME="BrickAuthDB",DB_VERSION=1,USERS_STORE="users",CURRENT_USER_KEY="currentUser",openAuthDB=()=>new Promise((r,s)=>{const o=indexedDB.open(DB_NAME,DB_VERSION);o.onerror=()=>s(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=i=>{const l=i.target.result;l.objectStoreNames.contains(USERS_STORE)||l.createObjectStore(USERS_STORE,{keyPath:"id"}).createIndex("email","email",{unique:!0})}}),generateAvatar=r=>{const s=r.split("").reduce((o,i)=>o+i.charCodeAt(0),0)%360;return`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=${s.toString(16).padStart(6,"0")}&color=fff&size=400`},hashPassword=async r=>{const o=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(i)).map(f=>f.toString(16).padStart(2,"0")).join("")},registerUser=async(r,s,o)=>{try{const i=await openAuthDB(),d=i.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email");if(await new Promise(E=>{const w=d.get(r);w.onsuccess=()=>E(w.result),w.onerror=()=>E(void 0)}))throw new Error("User already exists with this email");const y=await hashPassword(s),x={id:`user-${Date.now()}`,email:r,password:y,name:o,avatar:generateAvatar(o),diversityScore:0,connectionsUsed:0,connectionsMax:20,tier:"Foundation",createdAt:Date.now()},h=i.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((E,w)=>{const S=h.add(x);S.onsuccess=()=>E(),S.onerror=()=>w(S.error)});const m={id:x.id,name:x.name,avatar:x.avatar,bio:x.bio,diversityScore:x.diversityScore,connectionsUsed:x.connectionsUsed,connectionsMax:x.connectionsMax,tier:x.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(m)),m}catch(i){throw console.error("Registration error:",i),i}},loginUser=async(r,s)=>{try{const f=(await openAuthDB()).transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email"),d=await new Promise(u=>{const x=f.get(r);x.onsuccess=()=>u(x.result),x.onerror=()=>u(void 0)});if(!d)throw new Error("User not found");const c=await hashPassword(s);if(d.password!==c)throw new Error("Invalid password");const y={id:d.id,name:d.name,avatar:d.avatar,bio:d.bio,diversityScore:d.diversityScore,connectionsUsed:d.connectionsUsed,connectionsMax:d.connectionsMax,tier:d.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(y)),y}catch(o){throw console.error("Login error:",o),o}},getCurrentUser=()=>{try{const r=localStorage.getItem(CURRENT_USER_KEY);return r?JSON.parse(r):null}catch(r){return console.error("Error getting current user:",r),null}},logoutUser=()=>{localStorage.removeItem(CURRENT_USER_KEY)},updateUser=async r=>{try{const s=await openAuthDB(),i=s.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE),l=await new Promise(y=>{const u=i.get(r.id);u.onsuccess=()=>y(u.result),u.onerror=()=>y(void 0)});if(!l)throw new Error("User not found in database");const f={...l,name:r.name,avatar:r.avatar,bio:r.bio,diversityScore:r.diversityScore,connectionsUsed:r.connectionsUsed,connectionsMax:r.connectionsMax,tier:r.tier},c=s.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((y,u)=>{const x=c.put(f);x.onsuccess=()=>y(),x.onerror=()=>u(x.error)}),localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(r))}catch(s){throw console.error("Error updating user:",s),s}},auth=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser,loginUser,logoutUser,registerUser,updateUser},Symbol.toStringTag,{value:"Module"}));function App(){const{colors:r}=useTheme$1(),{wallState:s,pinkTierUnlocked:o}=useWall(),i=`app-shell brick-shell wall-state-${s.toLowerCase()}`,l=ve=>{if(typeof ve=="string"){if(ve.includes(":"))return ve;const qe=parseFloat(ve);if(isNaN(qe))return"0:00";const He=Math.floor(qe/60),M=Math.floor(qe%60);return`${He}:${M.toString().padStart(2,"0")}`}else{if(isNaN(ve))return"0:00";const qe=Math.floor(ve/60),He=Math.floor(ve%60);return`${qe}:${He.toString().padStart(2,"0")}`}},[f,d]=reactExports.useState("login"),[c,y]=reactExports.useState(null);reactExports.useEffect(()=>{document.title="Brick",(async()=>{const{getCurrentUser:qe}=await __vitePreload(async()=>{const{getCurrentUser:M}=await Promise.resolve().then(()=>auth);return{getCurrentUser:M}},void 0),He=qe();He&&(y(He),d("authenticated"))})()},[]);const[u,x]=reactExports.useState("home"),[g,h]=reactExports.useState("all"),[m,E]=reactExports.useState(!1),[w,S]=reactExports.useState(!1),[j,T]=reactExports.useState(null),[C,B]=reactExports.useState(null),[L,_]=reactExports.useState([]),[R,P]=reactExports.useState(null),[le,W]=reactExports.useState(!1),V=j??C,se=useTrackAudioMeta(V),Q=se?.codecLabel??V?.codecLabel??V?.quality?.toUpperCase(),J=se?.bitDepth??V?.bitDepth,ge=se?.sampleRate??V?.sampleRate,we=se?.bitrateKbps??V?.bitrateKbps,Pe=!!(V?.file||V?.audioUrl&&!String(V.audioUrl).startsWith("http"));reactExports.useEffect(()=>{!o&&le&&W(!1)},[o,le]);const q=ve=>{R?.invalidateWallSession?.(ve)},[me,A]=reactExports.useState(!1),[D,G]=reactExports.useState(null),[ae,ne]=reactExports.useState(!1),[fe,xe]=reactExports.useState(!1),[ke,te]=reactExports.useState(null),[ie,be]=reactExports.useState(!1),[Ie,ee]=reactExports.useState(!1),[F,H]=reactExports.useState(!1),[oe,he]=reactExports.useState(!1),[Se,Re]=reactExports.useState(!1),K=ve=>{y(ve),d("authenticated")},ye=()=>{(async()=>{const{getCurrentUser:qe}=await __vitePreload(async()=>{const{getCurrentUser:M}=await Promise.resolve().then(()=>auth);return{getCurrentUser:M}},void 0),He=qe();He&&y(He)})(),d("import")},Ne=ve=>{console.log("Importing from:",ve),d("authenticated")},Ee=()=>{d("authenticated")},De=async ve=>{q("playlist-start");try{const M=await openPlaylistDB(),Te=M.transaction(["playlists"],"readonly").objectStore("playlists"),je=await new Promise(Be=>{const et=Te.get(ve);et.onsuccess=()=>Be(et.result),et.onerror=()=>Be(void 0)});if(je){if(!je.tracks||je.tracks.length===0){console.error("Local playlist has no tracks");return}const et=M.transaction(["localTracks"],"readonly").objectStore("localTracks"),at=await Promise.all(je.tracks.map(async st=>{let Kt=st.audioUrl,ut=st.file,vt=st.bitDepth,wt=st.sampleRate,ot=st.bitrateKbps,kt=st.codecLabel;if(!Kt||!Kt.startsWith("http"))try{const St=await new Promise(Yt=>{const At=et.get(st.id);At.onsuccess=()=>Yt(At.result),At.onerror=()=>Yt(null)});St&&St.file&&(Kt=URL.createObjectURL(St.file),ut=St.file,vt=vt??St.bitDepth,wt=wt??St.sampleRate,ot=ot??St.bitrateKbps,kt=kt??St.codecLabel,console.log("Recreated blob URL for track:",st.title))}catch(St){console.error("Failed to load local track:",St)}return{id:st.id,title:st.title,name:st.title,artist:st.artist,album:st.album,coverImage:st.coverArt,coverArt:st.coverArt,audioUrl:Kt||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:st.quality,duration:st.duration,bitDepth:vt,sampleRate:wt,bitrateKbps:ot,codecLabel:kt,file:ut}}));console.log("Loaded local playlist with tracks:",at),_(at),B(at[0]),console.log("Adding local playlist to recently played:",je.name),addRecentlyPlayedPlaylist({playlistId:je.id,playlistName:je.name,coverImage:je.coverImage,creatorName:typeof je.creator=="string"?je.creator:je.creator?.name||"Your Collection",trackCount:je.trackCount,structuralIntegrity:je.structuralIntegrity}).then(()=>{console.log("Successfully added local playlist to recently played")}).catch(st=>console.error("Failed to track recently played playlist:",st));const ct=at[0],gt={id:ct.id,title:ct.name,artist:ct.artist,album:ct.album,coverArt:ct.coverImage,audioUrl:ct.audioUrl,quality:ct.quality,duration:"0:00",isPatronage:!1,bitDepth:ct.bitDepth,sampleRate:ct.sampleRate,bitrateKbps:ct.bitrateKbps,codecLabel:ct.codecLabel,file:ct.file};T(gt),E(!0),S(!0);return}}catch(M){console.error("Error loading playlist from IndexedDB:",M)}const qe=mockPlaylists.find(M=>M.id===ve);if(!qe||!qe.tracks||qe.tracks.length===0){console.error("Playlist not found or has no tracks");return}console.log("Adding online playlist to recently played:",qe.name),addRecentlyPlayedPlaylist({playlistId:qe.id,playlistName:qe.name,coverImage:qe.coverImage,creatorName:typeof qe.creator=="string"?qe.creator:qe.creator?.name||"Your Collection",trackCount:qe.trackCount,structuralIntegrity:qe.structuralIntegrity}).then(()=>{console.log("Successfully added online playlist to recently played")}).catch(M=>console.error("Failed to track recently played playlist:",M));const He=qe.tracks.map(M=>({id:M.id,name:M.title,artist:M.artist,album:M.album,coverImage:M.coverArt,audioUrl:M.audioUrl||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:M.quality,bitDepth:M.bitDepth,sampleRate:M.sampleRate,bitrateKbps:M.bitrateKbps,codecLabel:M.codecLabel,file:M.file}));_(He),B(He[0]),T(He[0]),E(!0),S(!0)},Je=ve=>{q("local-track"),console.log("Playing local track:",ve),addRecentlyPlayedTrack({trackId:ve.id,trackTitle:ve.name,artistName:ve.artist||"Unknown Artist",coverArt:ve.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ve.url,playedAt:Date.now()}).catch(M=>console.error("Failed to track recently played track:",M));const qe={id:ve.id,title:ve.name,name:ve.name,artist:ve.artist||"Unknown Artist",album:ve.album||"Unknown Album",coverImage:ve.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:ve.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ve.url,quality:ve.format,duration:ve.duration,bitDepth:ve.bitDepth,sampleRate:ve.sampleRate,bitrateKbps:ve.bitrateKbps,codecLabel:ve.codecLabel,file:ve.file},He={id:ve.id,title:ve.name,name:ve.name,artist:ve.artist||"Unknown Artist",album:ve.album||"Unknown Album",coverArt:ve.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ve.url,quality:ve.format,duration:l(ve.duration),isPatronage:!1,bitDepth:ve.bitDepth,sampleRate:ve.sampleRate,bitrateKbps:ve.bitrateKbps,codecLabel:ve.codecLabel,file:ve.file};_([qe]),B(qe),T(He),E(!0),S(!0)},Ye=ve=>{q("local-album"),console.log("Playing local album with",ve.length,"tracks");const qe=ve.map(O=>({id:O.id,title:O.name,name:O.name,artist:O.artist||"Unknown Artist",album:O.album||"Unknown Album",coverImage:O.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:O.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:O.url,quality:O.format,duration:O.duration,bitDepth:O.bitDepth,sampleRate:O.sampleRate,bitrateKbps:O.bitrateKbps,codecLabel:O.codecLabel,file:O.file})),He=ve[0],M={id:He.id,title:He.name,name:He.name,artist:He.artist||"Unknown Artist",album:He.album||"Unknown Album",coverArt:He.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:He.url,quality:He.format,duration:He.duration.toString(),isPatronage:!1,bitDepth:He.bitDepth,sampleRate:He.sampleRate,bitrateKbps:He.bitrateKbps,codecLabel:He.codecLabel,file:He.file};_(qe),B(qe[0]),T(M),E(!0),S(!0)},rt=ve=>{B(ve);const qe={id:ve.id,title:ve.name,artist:ve.artist,album:ve.album||"Unknown Album",coverArt:ve.coverImage,audioUrl:ve.audioUrl,quality:ve.quality||"MP3",duration:ve.duration||"3:45",isPatronage:ve.isPatronage||!1,bitDepth:ve.bitDepth,sampleRate:ve.sampleRate,bitrateKbps:ve.bitrateKbps,codecLabel:ve.codecLabel,file:ve.file};T(qe),console.log("Track changed to:",qe.title)},N=ve=>{G(ve),A(!0)},b=()=>{const ve=mockArtists.find(qe=>qe.name===j?.artist);ve&&(E(!1),G(ve.id),A(!0))},k=ve=>{te(ve),xe(!0)},z=()=>{console.log("Connection request sent"),xe(!1),be(!0)},U=async(ve,qe)=>{console.log("Playlist published:",ve,qe);const He=sessionStorage.getItem("playlistCustomCover");sessionStorage.removeItem("playlistCustomCover");const M={id:Date.now().toString(),name:ve,coverImage:He||qe[0]?.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",customCoverImage:He||void 0,trackCount:qe.length,creator:c?.id||"user-1",likes:0,isLocked:!1,structuralIntegrity:Math.round(Z(qe)),tracks:qe};try{const je=(await openPlaylistDB()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise((Be,et)=>{const at=je.add(M);at.onsuccess=()=>Be(),at.onerror=()=>et(at.error)}),console.log("Playlist saved successfully to IndexedDB")}catch(O){console.error("Failed to save playlist:",O),alert("Failed to save playlist. Please try again.");return}ne(!1),x("profile"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("switchToLocalWall"))},100)},Z=ve=>{if(ve.length===0)return 0;if(ve.length===1)return 100;const qe={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],indie_adjacent:["indie","indie rock","alternative rock","shoegaze","post-rock","dream pop"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},He=ut=>{if(!ut)return"unknown";const vt=ut.toLowerCase().trim();for(const[wt,ot]of Object.entries(qe))for(const kt of ot)if(vt.includes(kt)||kt.includes(vt))return kt;return vt},M=ve.map(ut=>He(ut.genre)),O=M.filter(ut=>ut==="unknown").length;if(O===ve.length)return 50;const Te=O/ve.length*20,je=M.map(ut=>{const vt=[];return Object.entries(qe).forEach(([wt,ot])=>{ot.includes(ut)&&vt.push(wt)}),{genre:ut,groups:vt}}),Be=M.filter(ut=>ut!=="unknown"),et=new Set(Be);if(et.size===1&&O===0)return 100;if(et.size===1&&O>0)return Math.max(50,100-Te);let at=0,ct=0;const gt={indie:{indie:100,"indie rock":95,"alternative rock":85,shoegaze:75,"dream pop":70,"post-rock":65,"alt-rock":90,alternative:85,"indie pop":90,punk:60,"psychedelic rock":60,rap:10,"hip hop":10,trap:5,metal:15,"heavy metal":10,country:20},shoegaze:{shoegaze:100,indie:75,"indie rock":80,"dream pop":85,"post-rock":80,ambient:75,"alternative rock":70,ethereal:90,"noise rock":70,rap:5,"hip hop":5,country:10,metal:10},"post-rock":{"post-rock":100,indie:65,shoegaze:80,ambient:80,"alternative rock":75,"dream pop":75,"progressive rock":80,"art rock":85,rap:10,"hip hop":10,metal:20,pop:15},rock:{rock:100,"alternative rock":90,"indie rock":85,"hard rock":85,punk:80,"garage rock":85,"psychedelic rock":85,"art rock":80,"progressive rock":80,rap:20,"hip hop":15,country:30},metal:{metal:100,"heavy metal":95,"thrash metal":90,"death metal":90,"black metal":90,metalcore:90,"doom metal":95,"progressive metal":85,"nu metal":85,rock:50,punk:40,rap:15,"hip hop":10},electronic:{electronic:100,house:95,techno:95,ambient:85,idm:85,downtempo:80,edm:90,trance:90,dubstep:80,"synth pop":75,dance:90,pop:60,indie:50,rap:40},"hip hop":{"hip hop":100,rap:95,trap:90,drill:85,grime:85,"r&b":85,rnb:85,pop:50,indie:15,rock:20,country:10},pop:{pop:100,"synth pop":95,"indie pop":90,electropop:90,"k-pop":85,electronic:70,"hip hop":40,indie:60,rock:40}};for(let ut=0;ut<je.length;ut++)for(let vt=ut+1;vt<je.length;vt++){if(M[ut]==="unknown"||M[vt]==="unknown")continue;ct++;const wt=M[ut],ot=M[vt];let kt=50;gt[wt]&&gt[wt][ot]!==void 0?kt=gt[wt][ot]:gt[ot]&&gt[ot][wt]!==void 0?kt=gt[ot][wt]:wt===ot&&(kt=100),at+=kt}if(ct===0)return 50;let Kt=at/ct-Te;return Math.max(0,Math.round(Kt))},de=ve=>{ve==="feed"?x("feed"):h(ve)},Fe=mockArtists.find(ve=>ve.id===D),$e=mockConnections$1.find(ve=>ve.user.id===ke),Xe=c?.name||"Guest",Qe=(c?.tier||"Foundation").toUpperCase(),Ze=le?"PINK ARCHITECT":Qe,Gr={home:"HOME GRID",radar:"RADAR SCAN",profile:"PERSONAL WALL",vault:"VAULT",feed:"NEIGHBORHOOD"}[u],nr=u==="feed"?"home":u,$t=[{label:"OPERATOR",value:Xe},{label:"TIER",value:Ze,isPink:le},{label:"CURRENT PAGE",value:Gr},{label:"SYSTEM",value:"NO ALERT"}],on=(ve,qe)=>{console.log("Playing track from radar:",ve.title),q("radar-play"),_(qe),B(ve),T(ve),E(!0),S(!0)};return f==="login"?jsxRuntimeExports.jsx(LoginScreen,{onLogin:K,onSignup:ye}):f==="import"?jsxRuntimeExports.jsx(ImportScreen,{onImport:Ne,onSkip:Ee}):jsxRuntimeExports.jsxs("div",{className:i,style:{backgroundColor:r.bg.primary},children:[jsxRuntimeExports.jsx(WallOverlay,{enabled:le}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-x-hidden pb-32 app-main-rails",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto responsive-main-shell",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 mb-4 px-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center justify-center rounded-[4px] border px-5 py-2 command-bar",style:{background:"linear-gradient(135deg, rgba(18,18,18,0.92), rgba(28,18,18,0.85))",borderColor:"rgba(211,47,47,0.25)",backdropFilter:"blur(18px)",boxShadow:"0 8px 24px rgba(0,0,0,0.45), 0 0 30px rgba(161,24,24,0.35)"},children:$t.map((ve,qe)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center uppercase command-bar-item",children:[jsxRuntimeExports.jsxs("span",{className:"mono command-bar-label",children:[ve.label,":"]}),jsxRuntimeExports.jsx("span",{className:`mono command-bar-value ${ve.isPink?pinkStyles.pinkBadgeText:""}`,children:ve.value}),qe<$t.length-1&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#444444",letterSpacing:"0"},children:""})]},`${ve.label}-${qe}`))})}),u==="home"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(HomeScreenV2,{onPlaylistClick:De,onArtistPress:N,onFeedClick:()=>x("feed"),activeFilter:g,onFilterChange:de,onLocalTrackPlay:Je,onLocalAlbumPlay:Ye},"home-screen-stable")}),u==="radar"&&jsxRuntimeExports.jsx(RadarScreen,{onUserClick:k,onTrackClick:on}),u==="profile"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ProfileScreen,{onPlaylistClick:De,onCreatePlaylist:()=>ne(!0),currentUser:c,isPinkMode:le,onPinkToggle:ve=>W(ve),pinkTierUnlocked:o})}),u==="vault"&&jsxRuntimeExports.jsx(VaultScreen,{onOpenConnectionManagement:()=>H(!0),onSignOut:()=>{try{logoutUser()}catch{}y(null),d("login"),x("home")}})]})}),(C||!C)&&jsxRuntimeExports.jsx("div",{className:"hidden md:flex md:flex-col border-l overflow-hidden fixed right-0 top-0 bottom-0 z-30 now-playing-rail",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.05)",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 flex flex-col items-center",style:{width:"100%",maxWidth:"min(320px, 100%)",minWidth:0},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-2 text-center",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NOW PLAYING"}),C?jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg overflow-hidden mx-auto cursor-pointer transition-all duration-200 hover:scale-105",style:{width:"180px",height:"180px",maxWidth:"180px",minWidth:"180px",boxShadow:"0 4px 16px rgba(211, 47, 47, 0.15)"},onClick:()=>E(!0),children:jsxRuntimeExports.jsx(ImageWithFallback,{src:C.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",alt:C.name,className:"w-full h-full object-cover"})}):jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg mx-auto flex items-center justify-center",style:{width:"180px",height:"180px",border:"1px dashed rgba(255,255,255,0.1)",backgroundColor:"rgba(26,26,26,0.6)"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#888888",fontSize:"0.8rem"},children:"No track playing"})}),C&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center px-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[Q&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem",minWidth:"72px"},children:String(Q).toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded flex items-center gap-1",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[Pe?jsxRuntimeExports.jsx(HardDrive,{size:12,color:"#e0e0e0"}):jsxRuntimeExports.jsx(Cloud,{size:12,color:"#e0e0e0"}),Pe?"Local":"Cloud"]}),(J||ge)&&jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[J?`${J}-bit`:"",J&&ge?" / ":"",ge?`${ge}kHz`:""]}),we&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:formatBitrate(we)})]}),jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"text-sm font-bold mb-2 truncate w-full min-w-0 cursor-pointer hover:text-[#d32f2f] transition-colors",onClick:()=>E(!0),title:C.name,children:C.name}),jsxRuntimeExports.jsx("p",{style:{color:"#888888"},className:"text-xs truncate w-full min-w-0 mb-3",title:C.artist,children:C.artist}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-1 mb-2 cursor-pointer",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${R?.duration?R.currentTime/R.duration*100:0}%`,background:"linear-gradient(to right, #d32f2f, #b71c1c)",boxShadow:"0 0 10px rgba(211, 47, 47, 0.5)"}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[jsxRuntimeExports.jsx("span",{children:R?.formatTime?R.formatTime(R.currentTime):"0:00"}),jsxRuntimeExports.jsx("span",{children:R?.formatTime?R.formatTime(R.duration):"0:00"})]})]})]}),L.length>1&&jsxRuntimeExports.jsxs("div",{className:"mt-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"px-4 mb-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, transparent, rgba(211, 47, 47, 0.3), transparent)"}}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.6rem",letterSpacing:"0.15em",fontWeight:700,textTransform:"uppercase",textShadow:"0 0 10px rgba(211, 47, 47, 0.3)"},children:"Up Next"}),jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, rgba(211, 47, 47, 0.3), transparent)"}})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 flex flex-col gap-0 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[(()=>{const ve=L.findIndex(He=>He.id===C?.id),qe=L.slice(ve+1,ve+4);return qe.map((He,M)=>jsxRuntimeExports.jsxs("div",{className:"w-full min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"py-2.5 px-2 transition-all duration-300 cursor-pointer group w-full min-w-0 rounded",style:{backgroundColor:"transparent",border:"1px solid transparent"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="rgba(211, 47, 47, 0.05)",O.currentTarget.style.borderColor="rgba(211, 47, 47, 0.2)"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="transparent",O.currentTarget.style.borderColor="transparent"},onClick:()=>{const O=L.findIndex(Te=>Te.id===He.id);if(O!==-1){const Te=L[O];q("queue-jump"),B(Te),T({id:Te.id,title:Te.title||Te.name||"Untitled",name:Te.name||Te.title,artist:Te.artist,album:Te.album||"Unknown Album",coverArt:Te.coverArt||Te.coverImage,audioUrl:Te.audioUrl,quality:Te.quality||"MP3",duration:"0:00",isPatronage:!1})}},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full min-w-0 max-w-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center mono",style:{backgroundColor:"rgba(211, 47, 47, 0.08)",border:"1px solid rgba(211, 47, 47, 0.2)",color:"#d32f2f",fontSize:"0.7rem",fontWeight:700,letterSpacing:"0.05em",clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)",textShadow:"0 0 8px rgba(211, 47, 47, 0.2)"},children:String(ve+M+2).padStart(2,"0")}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e8e8e8",fontSize:"0.825rem",fontWeight:600,letterSpacing:"0.02em",lineHeight:"1.2",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"truncate w-full min-w-0 group-hover:text-[#d32f2f] transition-colors",title:He.name,children:He.name}),jsxRuntimeExports.jsx("p",{style:{color:"#7a7a7a",fontSize:"0.7rem",fontWeight:500,letterSpacing:"0.03em",lineHeight:"1.3",marginTop:"2px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"truncate w-full min-w-0",title:He.artist,children:He.artist})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#d32f2f",strokeWidth:"2",children:jsxRuntimeExports.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"#d32f2f"})})})]})}),M<qe.length-1&&jsxRuntimeExports.jsx("div",{className:"mx-10 my-1.5",style:{height:"1px",background:"linear-gradient(to right, transparent, rgba(255, 255, 255, 0.06), transparent)"}})]},`${He.id}-${M}`))})(),(()=>{const ve=L.findIndex(He=>He.id===C?.id),qe=L.length-ve-4;return qe>0&&jsxRuntimeExports.jsx("div",{className:"py-3 w-full mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.08em",fontWeight:600},children:["+",qe," more"]}),jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}})]})})})()]})]})]})}),u==="feed"&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 border-b",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",borderColor:r.border},children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"The Neighborhood"}),jsxRuntimeExports.jsx("button",{onClick:()=>x("home"),className:"px-4 py-2 rounded-full transition-colors hover:bg-[#2a2a2a]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",color:"#a0a0a0"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:"Close"})})]}),jsxRuntimeExports.jsx(FeedScreen,{currentUser:c})]})}),jsxRuntimeExports.jsx(Navigation,{activeTab:nr,onTabChange:ve=>x(ve),activeFilter:u==="home"?g:void 0,onFilterChange:u==="home"?de:void 0,onSettingsClick:()=>he(!0),isPinkMode:le}),m&&R&&j&&jsxRuntimeExports.jsx(PlayerApple,{track:j,connectionName:"Jordan Rivera",isPlaying:R.isPlaying,onPlayPause:R.togglePlayPause,onNext:R.handleNext,onPrevious:R.handlePrevious,currentTime:R.currentTime,duration:R.duration,formatTime:R.formatTime,volumeLevel:R.volume,onVolumeChange:R.setVolume,eqBands:R.eqBands?{low:R.eqBands.bass,mid:R.eqBands.mid,high:R.eqBands.treble}:void 0,onEqChange:R.setEqBands?ve=>R.setEqBands({bass:ve.low,mid:ve.mid,treble:ve.high}):void 0,onClose:()=>E(!1),isPatronageUnlock:!1,onArtistClick:b}),me&&Fe&&jsxRuntimeExports.jsx(ArtistProfileScreenV2,{artist:Fe,onClose:()=>A(!1),onShowPatronageLock:()=>ee(!0)}),ae&&jsxRuntimeExports.jsx(PlaylistCreationScreen,{onClose:()=>ne(!1),onPublish:U}),fe&&$e&&jsxRuntimeExports.jsx(ConnectionAuditModal,{isOpen:fe,onClose:()=>xe(!1),userName:$e.user.name,userAvatar:$e.user.avatar,matchScore:$e.matchScore,mutualArtists:$e.mutualArtists,onConnect:z,onConnectSuccess:()=>be(!0)}),ie&&$e&&jsxRuntimeExports.jsx(ConnectionSuccessModal,{isOpen:ie,onClose:()=>be(!1),userName:$e.user.name,userAvatar:$e.user.avatar}),Ie&&Fe&&jsxRuntimeExports.jsx(PatronageLockModal,{isOpen:Ie,onClose:()=>ee(!1),artistName:Fe.name,daysRemaining:18,onPayEarlyUnlock:()=>{console.log("Early unlock paid"),ee(!1)}}),F&&jsxRuntimeExports.jsx(ConnectionManagementScreen,{isOpen:F,onClose:()=>H(!1)}),jsxRuntimeExports.jsx(UserSettingsModal,{isOpen:oe,onClose:()=>he(!1),userName:c?.name||"Guest",userAvatar:c?.avatar||""}),jsxRuntimeExports.jsx(MusicPlayer,{currentTrack:C,playlist:L,onTrackChange:rt,isVisible:!0,onControlsReady:P,sidebarCollapsed:Se,externalIsPlaying:w,onCreatePlaylist:()=>ne(!0),onExpandPlayer:()=>{!j&&C&&T({id:C.id,title:C.title||C.name||"Untitled",name:C.name||C.title,artist:C.artist,album:C.album||"Unknown Album",coverArt:C.coverArt||C.coverImage,audioUrl:C.audioUrl,quality:C.quality||"MP3",duration:"0:00",isPatronage:!1}),E(!0)}})]})}const openPlaylistDB=()=>new Promise((r,s)=>{const o=indexedDB.open("BrickMusicDB",4);o.onerror=()=>s(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=i=>{const l=i.target.result;l.objectStoreNames.contains("localTracks")||l.createObjectStore("localTracks",{keyPath:"id"}),l.objectStoreNames.contains("playlists")||l.createObjectStore("playlists",{keyPath:"id"})}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(WallProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
