const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/event-DAEvp2rt.js","assets/core-DhEqZVGG.js"])))=>i.map(i=>d[i]);
function _mergeNamespaces(e,r){for(var i=0;i<r.length;i++){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(s,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(r,i,s){let a=Promise.resolve();if(i&&i.length>0){let l=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");a=l(i.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const p=d.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":scriptRel,p||(m.as="script"),m.crossOrigin="",m.href=d,h&&m.setAttribute("nonce",h),document.head.appendChild(m),p)return new Promise((g,E)=>{m.addEventListener("load",g),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&c(u.reason);return r().catch(c)})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=f&&L[f]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,v={};function b(L,Q,se){this.props=L,this.context=Q,this.refs=v,this.updater=se||g}b.prototype.isReactComponent={},b.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function y(){}y.prototype=b.prototype;function w(L,Q,se){this.props=L,this.context=Q,this.refs=v,this.updater=se||g}var T=w.prototype=new y;T.constructor=w,E(T,b.prototype),T.isPureReactComponent=!0;var k=Array.isArray,_=Object.prototype.hasOwnProperty,P={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(L,Q,se){var oe,ge={},ve=null,_e=null;if(Q!=null)for(oe in Q.ref!==void 0&&(_e=Q.ref),Q.key!==void 0&&(ve=""+Q.key),Q)_.call(Q,oe)&&!R.hasOwnProperty(oe)&&(ge[oe]=Q[oe]);var Z=arguments.length-2;if(Z===1)ge.children=se;else if(1<Z){for(var le=Array(Z),Ce=0;Ce<Z;Ce++)le[Ce]=arguments[Ce+2];ge.children=le}if(L&&L.defaultProps)for(oe in Z=L.defaultProps,Z)ge[oe]===void 0&&(ge[oe]=Z[oe]);return{$$typeof:e,type:L,key:ve,ref:_e,props:ge,_owner:P.current}}function H(L,Q){return{$$typeof:e,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function O(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return Q[se]})}var V=/\/+/g;function q(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):Q.toString(36)}function ue(L,Q,se,oe,ge){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var _e=!1;if(L===null)_e=!0;else switch(ve){case"string":case"number":_e=!0;break;case"object":switch(L.$$typeof){case e:case r:_e=!0}}if(_e)return _e=L,ge=ge(_e),L=oe===""?"."+q(_e,0):oe,k(ge)?(se="",L!=null&&(se=L.replace(V,"$&/")+"/"),ue(ge,Q,se,"",function(Ce){return Ce})):ge!=null&&(B(ge)&&(ge=H(ge,se+(!ge.key||_e&&_e.key===ge.key?"":(""+ge.key).replace(V,"$&/")+"/")+L)),Q.push(ge)),1;if(_e=0,oe=oe===""?".":oe+":",k(L))for(var Z=0;Z<L.length;Z++){ve=L[Z];var le=oe+q(ve,Z);_e+=ue(ve,Q,se,le,ge)}else if(le=m(L),typeof le=="function")for(L=le.call(L),Z=0;!(ve=L.next()).done;)ve=ve.value,le=oe+q(ve,Z++),_e+=ue(ve,Q,se,le,ge);else if(ve==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return _e}function K(L,Q,se){if(L==null)return L;var oe=[],ge=0;return ue(L,oe,"","",function(ve){return Q.call(se,ve,ge++)}),oe}function ce(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var we={current:null},W={transition:null},fe={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:W,ReactCurrentOwner:P};function F(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:K,forEach:function(L,Q,se){K(L,function(){Q.apply(this,arguments)},se)},count:function(L){var Q=0;return K(L,function(){Q++}),Q},toArray:function(L){return K(L,function(Q){return Q})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},react_production_min.Component=b,react_production_min.Fragment=i,react_production_min.Profiler=a,react_production_min.PureComponent=w,react_production_min.StrictMode=s,react_production_min.Suspense=h,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,react_production_min.act=F,react_production_min.cloneElement=function(L,Q,se){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var oe=E({},L.props),ge=L.key,ve=L.ref,_e=L._owner;if(Q!=null){if(Q.ref!==void 0&&(ve=Q.ref,_e=P.current),Q.key!==void 0&&(ge=""+Q.key),L.type&&L.type.defaultProps)var Z=L.type.defaultProps;for(le in Q)_.call(Q,le)&&!R.hasOwnProperty(le)&&(oe[le]=Q[le]===void 0&&Z!==void 0?Z[le]:Q[le])}var le=arguments.length-2;if(le===1)oe.children=se;else if(1<le){Z=Array(le);for(var Ce=0;Ce<le;Ce++)Z[Ce]=arguments[Ce+2];oe.children=Z}return{$$typeof:e,type:L.type,key:ge,ref:ve,props:oe,_owner:_e}},react_production_min.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:c,_context:L},L.Consumer=L},react_production_min.createElement=I,react_production_min.createFactory=function(L){var Q=I.bind(null,L);return Q.type=L,Q},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(L){return{$$typeof:u,render:L}},react_production_min.isValidElement=B,react_production_min.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:ce}},react_production_min.memo=function(L,Q){return{$$typeof:d,type:L,compare:Q===void 0?null:Q}},react_production_min.startTransition=function(L){var Q=W.transition;W.transition={};try{L()}finally{W.transition=Q}},react_production_min.unstable_act=F,react_production_min.useCallback=function(L,Q){return we.current.useCallback(L,Q)},react_production_min.useContext=function(L){return we.current.useContext(L)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(L){return we.current.useDeferredValue(L)},react_production_min.useEffect=function(L,Q){return we.current.useEffect(L,Q)},react_production_min.useId=function(){return we.current.useId()},react_production_min.useImperativeHandle=function(L,Q,se){return we.current.useImperativeHandle(L,Q,se)},react_production_min.useInsertionEffect=function(L,Q){return we.current.useInsertionEffect(L,Q)},react_production_min.useLayoutEffect=function(L,Q){return we.current.useLayoutEffect(L,Q)},react_production_min.useMemo=function(L,Q){return we.current.useMemo(L,Q)},react_production_min.useReducer=function(L,Q,se){return we.current.useReducer(L,Q,se)},react_production_min.useRef=function(L){return we.current.useRef(L)},react_production_min.useState=function(L){return we.current.useState(L)},react_production_min.useSyncExternalStore=function(L,Q,se){return we.current.useSyncExternalStore(L,Q,se)},react_production_min.useTransition=function(){return we.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var p,f={},m=null,g=null;d!==void 0&&(m=""+d),h.key!==void 0&&(m=""+h.key),h.ref!==void 0&&(g=h.ref);for(p in h)s.call(h,p)&&!c.hasOwnProperty(p)&&(f[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)f[p]===void 0&&(f[p]=h[p]);return{$$typeof:r,type:u,key:m,ref:g,props:f,_owner:a.current}}return reactJsxRuntime_production_min.Fragment=i,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(e){function r(W,fe){var F=W.length;W.push(fe);e:for(;0<F;){var L=F-1>>>1,Q=W[L];if(0<a(Q,fe))W[L]=fe,W[F]=Q,F=L;else break e}}function i(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var fe=W[0],F=W.pop();if(F!==fe){W[0]=F;e:for(var L=0,Q=W.length,se=Q>>>1;L<se;){var oe=2*(L+1)-1,ge=W[oe],ve=oe+1,_e=W[ve];if(0>a(ge,F))ve<Q&&0>a(_e,ge)?(W[L]=_e,W[ve]=F,L=ve):(W[L]=ge,W[oe]=F,L=oe);else if(ve<Q&&0>a(_e,F))W[L]=_e,W[ve]=F,L=ve;else break e}}return fe}function a(W,fe){var F=W.sortIndex-fe.sortIndex;return F!==0?F:W.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var h=[],d=[],p=1,f=null,m=3,g=!1,E=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(W){for(var fe=i(d);fe!==null;){if(fe.callback===null)s(d);else if(fe.startTime<=W)s(d),fe.sortIndex=fe.expirationTime,r(h,fe);else break;fe=i(d)}}function k(W){if(v=!1,T(W),!E)if(i(h)!==null)E=!0,ce(_);else{var fe=i(d);fe!==null&&we(k,fe.startTime-W)}}function _(W,fe){E=!1,v&&(v=!1,y(I),I=-1),g=!0;var F=m;try{for(T(fe),f=i(h);f!==null&&(!(f.expirationTime>fe)||W&&!O());){var L=f.callback;if(typeof L=="function"){f.callback=null,m=f.priorityLevel;var Q=L(f.expirationTime<=fe);fe=e.unstable_now(),typeof Q=="function"?f.callback=Q:f===i(h)&&s(h),T(fe)}else s(h);f=i(h)}if(f!==null)var se=!0;else{var oe=i(d);oe!==null&&we(k,oe.startTime-fe),se=!1}return se}finally{f=null,m=F,g=!1}}var P=!1,R=null,I=-1,H=5,B=-1;function O(){return!(e.unstable_now()-B<H)}function V(){if(R!==null){var W=e.unstable_now();B=W;var fe=!0;try{fe=R(!0,W)}finally{fe?q():(P=!1,R=null)}}else P=!1}var q;if(typeof w=="function")q=function(){w(V)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,K=ue.port2;ue.port1.onmessage=V,q=function(){K.postMessage(null)}}else q=function(){b(V,0)};function ce(W){R=W,P||(P=!0,q())}function we(W,fe){I=b(function(){W(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){E||g||(E=!0,ce(_))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var fe=3;break;default:fe=m}var F=m;m=fe;try{return W()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,fe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var F=m;m=W;try{return fe()}finally{m=F}},e.unstable_scheduleCallback=function(W,fe,F){var L=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,W){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=F+Q,W={id:p++,callback:fe,priorityLevel:W,startTime:F,expirationTime:Q,sortIndex:-1},F>L?(W.sortIndex=F,r(d,W),i(h)===null&&W===i(d)&&(v?(y(I),I=-1):v=!0,we(k,F-L))):(W.sortIndex=Q,r(h,W),E||g||(E=!0,ce(_))),W},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(W){var fe=m;return function(){var F=m;m=fe;try{return W.apply(this,arguments)}finally{m=F}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var e=requireReact(),r=requireScheduler();function i(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,n){l(t,n),l(t+"Capture",n)}function l(t,n){for(a[t]=n,t=0;t<n.length;t++)s.add(n[t])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t){return h.call(f,t)?!0:h.call(p,t)?!1:d.test(t)?f[t]=!0:(p[t]=!0,!1)}function g(t,n,o,x){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return x?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function E(t,n,o,x){if(n===null||typeof n>"u"||g(t,n,o,x))return!0;if(x)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function v(t,n,o,x,S,C,N){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=C,this.removeEmptyString=N}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new v(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];b[n]=new v(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new v(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new v(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new v(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new v(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new v(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new v(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new v(t,5,!1,t.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(y,w);b[n]=new v(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(y,w);b[n]=new v(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(y,w);b[n]=new v(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new v(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new v(t,1,!1,t.toLowerCase(),null,!0,!0)});function T(t,n,o,x){var S=b.hasOwnProperty(n)?b[n]:null;(S!==null?S.type!==0:x||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(E(n,o,S,x)&&(o=null),x||S===null?m(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):S.mustUseProperty?t[S.propertyName]=o===null?S.type===3?!1:"":o:(n=S.attributeName,x=S.attributeNamespace,o===null?t.removeAttribute(n):(S=S.type,o=S===3||S===4&&o===!0?"":""+o,x?t.setAttributeNS(x,n,o):t.setAttribute(n,o))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),P=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),W=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var F=Object.assign,L;function Q(t){if(L===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return`
`+L+t}var se=!1;function oe(t,n){if(!t||se)return"";se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ee){var x=Ee}Reflect.construct(t,[],n)}else{try{n.call()}catch(Ee){x=Ee}t.call(n.prototype)}else{try{throw Error()}catch(Ee){x=Ee}t()}}catch(Ee){if(Ee&&x&&typeof Ee.stack=="string"){for(var S=Ee.stack.split(`
`),C=x.stack.split(`
`),N=S.length-1,$=C.length-1;1<=N&&0<=$&&S[N]!==C[$];)$--;for(;1<=N&&0<=$;N--,$--)if(S[N]!==C[$]){if(N!==1||$!==1)do if(N--,$--,0>$||S[N]!==C[$]){var re=`
`+S[N].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=N&&0<=$);break}}}finally{se=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function ge(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=oe(t.type,!1),t;case 11:return t=oe(t.type.render,!1),t;case 1:return t=oe(t.type,!0),t;default:return""}}function ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case P:return"Portal";case H:return"Profiler";case I:return"StrictMode";case q:return"Suspense";case ue:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case B:return(t._context.displayName||"Context")+".Provider";case V:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K:return n=t.displayName||null,n!==null?n:ve(t.type)||"Memo";case ce:n=t._payload,t=t._init;try{return ve(t(n))}catch{}}return null}function _e(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(n);case 8:return n===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Z(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function le(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ce(t){var n=le(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),x=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var S=o.get,C=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return S.call(this)},set:function(N){x=""+N,C.call(this,N)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return x},setValue:function(N){x=""+N},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function He(t){t._valueTracker||(t._valueTracker=Ce(t))}function ae(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),x="";return t&&(x=le(t)?t.checked?"true":"false":t.value),t=x,t!==o?(n.setValue(t),!0):!1}function G(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ee(t,n){var o=n.checked;return F({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function pe(t,n){var o=n.defaultValue==null?"":n.defaultValue,x=n.checked!=null?n.checked:n.defaultChecked;o=Z(n.value!=null?n.value:o),t._wrapperState={initialChecked:x,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function be(t,n){n=n.checked,n!=null&&T(t,"checked",n,!1)}function Re(t,n){be(t,n);var o=Z(n.value),x=n.type;if(o!=null)x==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(x==="submit"||x==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?J(t,n.type,o):n.hasOwnProperty("defaultValue")&&J(t,n.type,Z(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function je(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var x=n.type;if(!(x!=="submit"&&x!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function J(t,n,o){(n!=="number"||G(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Se=Array.isArray;function Pe(t,n,o,x){if(t=t.options,n){n={};for(var S=0;S<o.length;S++)n["$"+o[S]]=!0;for(o=0;o<t.length;o++)S=n.hasOwnProperty("$"+t[o].value),t[o].selected!==S&&(t[o].selected=S),S&&x&&(t[o].defaultSelected=!0)}else{for(o=""+Z(o),n=null,S=0;S<t.length;S++){if(t[S].value===o){t[S].selected=!0,x&&(t[S].defaultSelected=!0);return}n!==null||t[S].disabled||(n=t[S])}n!==null&&(n.selected=!0)}}function Te(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(i(91));return F({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $e(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(i(92));if(Se(o)){if(1<o.length)throw Error(i(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Z(o)}}function gt(t,n){var o=Z(n.value),x=Z(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),x!=null&&(t.defaultValue=""+x)}function ft(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?pt(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var j,A=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,x,S){MSApp.execUnsafeLocalFunction(function(){return t(n,o,x,S)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(j=j||document.createElement("div"),j.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=j.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function U(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];Object.keys(te).forEach(function(t){he.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),te[n]=te[t]})});function ke(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||te.hasOwnProperty(t)&&te[t]?(""+n).trim():n+"px"}function ct(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var x=o.indexOf("--")===0,S=ke(o,n[o],x);o==="float"&&(o="cssFloat"),x?t.setProperty(o,S):t[o]=S}}var bt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ht(t,n){if(n){if(bt[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(i(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(n.style!=null&&typeof n.style!="object")throw Error(i(62))}}function yt(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function Y(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ye=null,Ne=null,Be=null;function Ge(t){if(t=ai(t)){if(typeof ye!="function")throw Error(i(280));var n=t.stateNode;n&&(n=Vi(n),ye(t.stateNode,t.type,n))}}function Ue(t){Ne?Be?Be.push(t):Be=[t]:Ne=t}function Xe(){if(Ne){var t=Ne,n=Be;if(Be=Ne=null,Ge(t),n)for(t=0;t<n.length;t++)Ge(n[t])}}function qe(t,n){return t(n)}function M(){}var z=!1;function Ae(t,n,o){if(z)return t(n,o);z=!0;try{return qe(t,n,o)}finally{z=!1,(Ne!==null||Be!==null)&&(M(),Xe())}}function Ie(t,n){var o=t.stateNode;if(o===null)return null;var x=Vi(o);if(x===null)return null;o=x[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(t=t.type,x=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!x;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,n,typeof o));return o}var Ke=!1;if(u)try{var St={};Object.defineProperty(St,"passive",{get:function(){Ke=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{Ke=!1}function tt(t,n,o,x,S,C,N,$,re){var Ee=Array.prototype.slice.call(arguments,3);try{n.apply(o,Ee)}catch(Fe){this.onError(Fe)}}var ne=!1,Oe=null,Qe=!1,Ze=null,nt={onError:function(t){ne=!0,Oe=t}};function de(t,n,o,x,S,C,N,$,re){ne=!1,Oe=null,tt.apply(nt,arguments)}function Me(t,n,o,x,S,C,N,$,re){if(de.apply(this,arguments),ne){if(ne){var Ee=Oe;ne=!1,Oe=null}else throw Error(i(198));Qe||(Qe=!0,Ze=Ee)}}function De(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function We(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Ye(t){if(De(t)!==t)throw Error(i(188))}function Je(t){var n=t.alternate;if(!n){if(n=De(t),n===null)throw Error(i(188));return n!==t?null:t}for(var o=t,x=n;;){var S=o.return;if(S===null)break;var C=S.alternate;if(C===null){if(x=S.return,x!==null){o=x;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===o)return Ye(S),t;if(C===x)return Ye(S),n;C=C.sibling}throw Error(i(188))}if(o.return!==x.return)o=S,x=C;else{for(var N=!1,$=S.child;$;){if($===o){N=!0,o=S,x=C;break}if($===x){N=!0,x=S,o=C;break}$=$.sibling}if(!N){for($=C.child;$;){if($===o){N=!0,o=C,x=S;break}if($===x){N=!0,x=C,o=S;break}$=$.sibling}if(!N)throw Error(i(189))}}if(o.alternate!==x)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:n}function ut(t){return t=Je(t),t!==null?vt(t):null}function vt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=vt(t);if(n!==null)return n;t=t.sibling}return null}var Tt=r.unstable_scheduleCallback,Et=r.unstable_cancelCallback,Dt=r.unstable_shouldYield,Mt=r.unstable_requestPaint,xt=r.unstable_now,Ht=r.unstable_getCurrentPriorityLevel,Ft=r.unstable_ImmediatePriority,jr=r.unstable_UserBlockingPriority,wr=r.unstable_NormalPriority,Si=r.unstable_LowPriority,Ri=r.unstable_IdlePriority,vn=null,ir=null;function _s(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(vn,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:Ti,Fr=Math.log,As=Math.LN2;function Ti(t){return t>>>=0,t===0?32:31-(Fr(t)/As|0)|0}var Or=64,ki=4194304;function qn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ji(t,n){var o=t.pendingLanes;if(o===0)return 0;var x=0,S=t.suspendedLanes,C=t.pingedLanes,N=o&268435455;if(N!==0){var $=N&~S;$!==0?x=qn($):(C&=N,C!==0&&(x=qn(C)))}else N=o&~S,N!==0?x=qn(N):C!==0&&(x=qn(C));if(x===0)return 0;if(n!==0&&n!==x&&(n&S)===0&&(S=x&-x,C=n&-n,S>=C||S===16&&(C&4194240)!==0))return n;if((x&4)!==0&&(x|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=x;0<n;)o=31-sr(n),S=1<<o,x|=t[o],n&=~S;return x}function Uc(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(t,n){for(var o=t.suspendedLanes,x=t.pingedLanes,S=t.expirationTimes,C=t.pendingLanes;0<C;){var N=31-sr(C),$=1<<N,re=S[N];re===-1?(($&o)===0||($&x)!==0)&&(S[N]=Uc($,n)):re<=n&&(t.expiredLanes|=$),C&=~$}}function Ps(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ho(){var t=Or;return Or<<=1,(Or&4194240)===0&&(Or=64),t}function Is(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Vn(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-sr(n),t[n]=o}function Vc(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var x=t.eventTimes;for(t=t.expirationTimes;0<o;){var S=31-sr(o),C=1<<S;n[S]=0,x[S]=-1,t[S]=-1,o&=~C}}function Ns(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var x=31-sr(o),S=1<<x;S&n|t[x]&n&&(t[x]|=n),o&=~S}}var kt=0;function go(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var xo,Ds,yo,vo,bo,Ms=!1,Ci=[],zr=null,Ur=null,qr=null,Wn=new Map,$n=new Map,Vr=[],Wc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eo(t,n){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Wn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(n.pointerId)}}function Hn(t,n,o,x,S,C){return t===null||t.nativeEvent!==C?(t={blockedOn:n,domEventName:o,eventSystemFlags:x,nativeEvent:C,targetContainers:[S]},n!==null&&(n=ai(n),n!==null&&Ds(n)),t):(t.eventSystemFlags|=x,n=t.targetContainers,S!==null&&n.indexOf(S)===-1&&n.push(S),t)}function $c(t,n,o,x,S){switch(n){case"focusin":return zr=Hn(zr,t,n,o,x,S),!0;case"dragenter":return Ur=Hn(Ur,t,n,o,x,S),!0;case"mouseover":return qr=Hn(qr,t,n,o,x,S),!0;case"pointerover":var C=S.pointerId;return Wn.set(C,Hn(Wn.get(C)||null,t,n,o,x,S)),!0;case"gotpointercapture":return C=S.pointerId,$n.set(C,Hn($n.get(C)||null,t,n,o,x,S)),!0}return!1}function wo(t){var n=on(t.target);if(n!==null){var o=De(n);if(o!==null){if(n=o.tag,n===13){if(n=We(o),n!==null){t.blockedOn=n,bo(t.priority,function(){yo(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _i(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=Ls(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var x=new o.constructor(o.type,o);mt=x,o.target.dispatchEvent(x),mt=null}else return n=ai(o),n!==null&&Ds(n),t.blockedOn=o,!1;n.shift()}return!0}function So(t,n,o){_i(t)&&o.delete(n)}function Hc(){Ms=!1,zr!==null&&_i(zr)&&(zr=null),Ur!==null&&_i(Ur)&&(Ur=null),qr!==null&&_i(qr)&&(qr=null),Wn.forEach(So),$n.forEach(So)}function Gn(t,n){t.blockedOn===n&&(t.blockedOn=null,Ms||(Ms=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Hc)))}function Xn(t){function n(S){return Gn(S,t)}if(0<Ci.length){Gn(Ci[0],t);for(var o=1;o<Ci.length;o++){var x=Ci[o];x.blockedOn===t&&(x.blockedOn=null)}}for(zr!==null&&Gn(zr,t),Ur!==null&&Gn(Ur,t),qr!==null&&Gn(qr,t),Wn.forEach(n),$n.forEach(n),o=0;o<Vr.length;o++)x=Vr[o],x.blockedOn===t&&(x.blockedOn=null);for(;0<Vr.length&&(o=Vr[0],o.blockedOn===null);)wo(o),o.blockedOn===null&&Vr.shift()}var bn=k.ReactCurrentBatchConfig,Ai=!0;function Gc(t,n,o,x){var S=kt,C=bn.transition;bn.transition=null;try{kt=1,Bs(t,n,o,x)}finally{kt=S,bn.transition=C}}function Xc(t,n,o,x){var S=kt,C=bn.transition;bn.transition=null;try{kt=4,Bs(t,n,o,x)}finally{kt=S,bn.transition=C}}function Bs(t,n,o,x){if(Ai){var S=Ls(t,n,o,x);if(S===null)ea(t,n,x,Pi,o),Eo(t,x);else if($c(S,t,n,o,x))x.stopPropagation();else if(Eo(t,x),n&4&&-1<Wc.indexOf(t)){for(;S!==null;){var C=ai(S);if(C!==null&&xo(C),C=Ls(t,n,o,x),C===null&&ea(t,n,x,Pi,o),C===S)break;S=C}S!==null&&x.stopPropagation()}else ea(t,n,x,null,o)}}var Pi=null;function Ls(t,n,o,x){if(Pi=null,t=Y(x),t=on(t),t!==null)if(n=De(t),n===null)t=null;else if(o=n.tag,o===13){if(t=We(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Pi=t,null}function Ro(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ht()){case Ft:return 1;case jr:return 4;case wr:case Si:return 16;case Ri:return 536870912;default:return 16}default:return 16}}var Wr=null,Fs=null,Ii=null;function To(){if(Ii)return Ii;var t,n=Fs,o=n.length,x,S="value"in Wr?Wr.value:Wr.textContent,C=S.length;for(t=0;t<o&&n[t]===S[t];t++);var N=o-t;for(x=1;x<=N&&n[o-x]===S[C-x];x++);return Ii=S.slice(t,1<x?1-x:void 0)}function Ni(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Di(){return!0}function ko(){return!1}function ar(t){function n(o,x,S,C,N){this._reactName=o,this._targetInst=S,this.type=x,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(o=t[$],this[$]=o?o(C):C[$]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Di:ko,this.isPropagationStopped=ko,this}return F(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),n}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=ar(En),Kn=F({},En,{view:0,detail:0}),Kc=ar(Kn),zs,Us,Yn,Mi=F({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yn&&(Yn&&t.type==="mousemove"?(zs=t.screenX-Yn.screenX,Us=t.screenY-Yn.screenY):Us=zs=0,Yn=t),zs)},movementY:function(t){return"movementY"in t?t.movementY:Us}}),jo=ar(Mi),Yc=F({},Mi,{dataTransfer:0}),Qc=ar(Yc),Zc=F({},Kn,{relatedTarget:0}),qs=ar(Zc),Jc=F({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=ar(Jc),tu=F({},En,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ru=ar(tu),nu=F({},En,{data:0}),Co=ar(nu),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ou(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=au[t])?!!n[t]:!1}function Vs(){return ou}var lu=F({},Kn,{key:function(t){if(t.key){var n=iu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?su[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cu=ar(lu),uu=F({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_o=ar(uu),du=F({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),fu=ar(du),pu=F({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),mu=ar(pu),hu=F({},Mi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=ar(hu),xu=[9,13,27,32],Ws=u&&"CompositionEvent"in window,Qn=null;u&&"documentMode"in document&&(Qn=document.documentMode);var yu=u&&"TextEvent"in window&&!Qn,Ao=u&&(!Ws||Qn&&8<Qn&&11>=Qn),Po=" ",Io=!1;function No(t,n){switch(t){case"keyup":return xu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wn=!1;function vu(t,n){switch(t){case"compositionend":return Do(n);case"keypress":return n.which!==32?null:(Io=!0,Po);case"textInput":return t=n.data,t===Po&&Io?null:t;default:return null}}function bu(t,n){if(wn)return t==="compositionend"||!Ws&&No(t,n)?(t=To(),Ii=Fs=Wr=null,wn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ao&&n.locale!=="ko"?null:n.data;default:return null}}var Eu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mo(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Eu[t.type]:n==="textarea"}function Bo(t,n,o,x){Ue(x),n=zi(n,"onChange"),0<n.length&&(o=new Os("onChange","change",null,o,x),t.push({event:o,listeners:n}))}var Zn=null,Jn=null;function wu(t){el(t,0)}function Bi(t){var n=jn(t);if(ae(n))return t}function Su(t,n){if(t==="change")return n}var Lo=!1;if(u){var $s;if(u){var Hs="oninput"in document;if(!Hs){var Fo=document.createElement("div");Fo.setAttribute("oninput","return;"),Hs=typeof Fo.oninput=="function"}$s=Hs}else $s=!1;Lo=$s&&(!document.documentMode||9<document.documentMode)}function Oo(){Zn&&(Zn.detachEvent("onpropertychange",zo),Jn=Zn=null)}function zo(t){if(t.propertyName==="value"&&Bi(Jn)){var n=[];Bo(n,Jn,t,Y(t)),Ae(wu,n)}}function Ru(t,n,o){t==="focusin"?(Oo(),Zn=n,Jn=o,Zn.attachEvent("onpropertychange",zo)):t==="focusout"&&Oo()}function Tu(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bi(Jn)}function ku(t,n){if(t==="click")return Bi(n)}function ju(t,n){if(t==="input"||t==="change")return Bi(n)}function Cu(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var gr=typeof Object.is=="function"?Object.is:Cu;function ei(t,n){if(gr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),x=Object.keys(n);if(o.length!==x.length)return!1;for(x=0;x<o.length;x++){var S=o[x];if(!h.call(n,S)||!gr(t[S],n[S]))return!1}return!0}function Uo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qo(t,n){var o=Uo(t);t=0;for(var x;o;){if(o.nodeType===3){if(x=t+o.textContent.length,t<=n&&x>=n)return{node:o,offset:n-t};t=x}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Uo(o)}}function Vo(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Vo(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Wo(){for(var t=window,n=G();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=G(t.document)}return n}function Gs(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function _u(t){var n=Wo(),o=t.focusedElem,x=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&Vo(o.ownerDocument.documentElement,o)){if(x!==null&&Gs(o)){if(n=x.start,t=x.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var S=o.textContent.length,C=Math.min(x.start,S);x=x.end===void 0?C:Math.min(x.end,S),!t.extend&&C>x&&(S=x,x=C,C=S),S=qo(o,C);var N=qo(o,x);S&&N&&(t.rangeCount!==1||t.anchorNode!==S.node||t.anchorOffset!==S.offset||t.focusNode!==N.node||t.focusOffset!==N.offset)&&(n=n.createRange(),n.setStart(S.node,S.offset),t.removeAllRanges(),C>x?(t.addRange(n),t.extend(N.node,N.offset)):(n.setEnd(N.node,N.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Au=u&&"documentMode"in document&&11>=document.documentMode,Sn=null,Xs=null,ti=null,Ks=!1;function $o(t,n,o){var x=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ks||Sn==null||Sn!==G(x)||(x=Sn,"selectionStart"in x&&Gs(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ti&&ei(ti,x)||(ti=x,x=zi(Xs,"onSelect"),0<x.length&&(n=new Os("onSelect","select",null,n,o),t.push({event:n,listeners:x}),n.target=Sn)))}function Li(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var Rn={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionend:Li("Transition","TransitionEnd")},Ys={},Ho={};u&&(Ho=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition);function Fi(t){if(Ys[t])return Ys[t];if(!Rn[t])return t;var n=Rn[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in Ho)return Ys[t]=n[o];return t}var Go=Fi("animationend"),Xo=Fi("animationiteration"),Ko=Fi("animationstart"),Yo=Fi("transitionend"),Qo=new Map,Zo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,n){Qo.set(t,n),c(n,[t])}for(var Qs=0;Qs<Zo.length;Qs++){var Zs=Zo[Qs],Pu=Zs.toLowerCase(),Iu=Zs[0].toUpperCase()+Zs.slice(1);$r(Pu,"on"+Iu)}$r(Go,"onAnimationEnd"),$r(Xo,"onAnimationIteration"),$r(Ko,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(Yo,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function Jo(t,n,o){var x=t.type||"unknown-event";t.currentTarget=o,Me(x,n,void 0,t),t.currentTarget=null}function el(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var x=t[o],S=x.event;x=x.listeners;e:{var C=void 0;if(n)for(var N=x.length-1;0<=N;N--){var $=x[N],re=$.instance,Ee=$.currentTarget;if($=$.listener,re!==C&&S.isPropagationStopped())break e;Jo(S,$,Ee),C=re}else for(N=0;N<x.length;N++){if($=x[N],re=$.instance,Ee=$.currentTarget,$=$.listener,re!==C&&S.isPropagationStopped())break e;Jo(S,$,Ee),C=re}}}if(Qe)throw t=Ze,Qe=!1,Ze=null,t}function Ct(t,n){var o=n[aa];o===void 0&&(o=n[aa]=new Set);var x=t+"__bubble";o.has(x)||(tl(n,t,2,!1),o.add(x))}function Js(t,n,o){var x=0;n&&(x|=4),tl(o,t,x,n)}var Oi="_reactListening"+Math.random().toString(36).slice(2);function ni(t){if(!t[Oi]){t[Oi]=!0,s.forEach(function(o){o!=="selectionchange"&&(Nu.has(o)||Js(o,!1,t),Js(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Oi]||(n[Oi]=!0,Js("selectionchange",!1,n))}}function tl(t,n,o,x){switch(Ro(n)){case 1:var S=Gc;break;case 4:S=Xc;break;default:S=Bs}o=S.bind(null,n,o,t),S=void 0,!Ke||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(S=!0),x?S!==void 0?t.addEventListener(n,o,{capture:!0,passive:S}):t.addEventListener(n,o,!0):S!==void 0?t.addEventListener(n,o,{passive:S}):t.addEventListener(n,o,!1)}function ea(t,n,o,x,S){var C=x;if((n&1)===0&&(n&2)===0&&x!==null)e:for(;;){if(x===null)return;var N=x.tag;if(N===3||N===4){var $=x.stateNode.containerInfo;if($===S||$.nodeType===8&&$.parentNode===S)break;if(N===4)for(N=x.return;N!==null;){var re=N.tag;if((re===3||re===4)&&(re=N.stateNode.containerInfo,re===S||re.nodeType===8&&re.parentNode===S))return;N=N.return}for(;$!==null;){if(N=on($),N===null)return;if(re=N.tag,re===5||re===6){x=C=N;continue e}$=$.parentNode}}x=x.return}Ae(function(){var Ee=C,Fe=Y(o),ze=[];e:{var Le=Qo.get(t);if(Le!==void 0){var et=Os,it=t;switch(t){case"keypress":if(Ni(o)===0)break e;case"keydown":case"keyup":et=cu;break;case"focusin":it="focus",et=qs;break;case"focusout":it="blur",et=qs;break;case"beforeblur":case"afterblur":et=qs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=fu;break;case Go:case Xo:case Ko:et=eu;break;case Yo:et=mu;break;case"scroll":et=Kc;break;case"wheel":et=gu;break;case"copy":case"cut":case"paste":et=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=_o}var st=(n&4)!==0,Bt=!st&&t==="scroll",me=st?Le!==null?Le+"Capture":null:Le;st=[];for(var ie=Ee,xe;ie!==null;){xe=ie;var Ve=xe.stateNode;if(xe.tag===5&&Ve!==null&&(xe=Ve,me!==null&&(Ve=Ie(ie,me),Ve!=null&&st.push(ii(ie,Ve,xe)))),Bt)break;ie=ie.return}0<st.length&&(Le=new et(Le,it,null,o,Fe),ze.push({event:Le,listeners:st}))}}if((n&7)===0){e:{if(Le=t==="mouseover"||t==="pointerover",et=t==="mouseout"||t==="pointerout",Le&&o!==mt&&(it=o.relatedTarget||o.fromElement)&&(on(it)||it[Cr]))break e;if((et||Le)&&(Le=Fe.window===Fe?Fe:(Le=Fe.ownerDocument)?Le.defaultView||Le.parentWindow:window,et?(it=o.relatedTarget||o.toElement,et=Ee,it=it?on(it):null,it!==null&&(Bt=De(it),it!==Bt||it.tag!==5&&it.tag!==6)&&(it=null)):(et=null,it=Ee),et!==it)){if(st=jo,Ve="onMouseLeave",me="onMouseEnter",ie="mouse",(t==="pointerout"||t==="pointerover")&&(st=_o,Ve="onPointerLeave",me="onPointerEnter",ie="pointer"),Bt=et==null?Le:jn(et),xe=it==null?Le:jn(it),Le=new st(Ve,ie+"leave",et,o,Fe),Le.target=Bt,Le.relatedTarget=xe,Ve=null,on(Fe)===Ee&&(st=new st(me,ie+"enter",it,o,Fe),st.target=xe,st.relatedTarget=Bt,Ve=st),Bt=Ve,et&&it)t:{for(st=et,me=it,ie=0,xe=st;xe;xe=Tn(xe))ie++;for(xe=0,Ve=me;Ve;Ve=Tn(Ve))xe++;for(;0<ie-xe;)st=Tn(st),ie--;for(;0<xe-ie;)me=Tn(me),xe--;for(;ie--;){if(st===me||me!==null&&st===me.alternate)break t;st=Tn(st),me=Tn(me)}st=null}else st=null;et!==null&&rl(ze,Le,et,st,!1),it!==null&&Bt!==null&&rl(ze,Bt,it,st,!0)}}e:{if(Le=Ee?jn(Ee):window,et=Le.nodeName&&Le.nodeName.toLowerCase(),et==="select"||et==="input"&&Le.type==="file")var at=Su;else if(Mo(Le))if(Lo)at=ju;else{at=Tu;var ot=Ru}else(et=Le.nodeName)&&et.toLowerCase()==="input"&&(Le.type==="checkbox"||Le.type==="radio")&&(at=ku);if(at&&(at=at(t,Ee))){Bo(ze,at,o,Fe);break e}ot&&ot(t,Le,Ee),t==="focusout"&&(ot=Le._wrapperState)&&ot.controlled&&Le.type==="number"&&J(Le,"number",Le.value)}switch(ot=Ee?jn(Ee):window,t){case"focusin":(Mo(ot)||ot.contentEditable==="true")&&(Sn=ot,Xs=Ee,ti=null);break;case"focusout":ti=Xs=Sn=null;break;case"mousedown":Ks=!0;break;case"contextmenu":case"mouseup":case"dragend":Ks=!1,$o(ze,o,Fe);break;case"selectionchange":if(Au)break;case"keydown":case"keyup":$o(ze,o,Fe)}var lt;if(Ws)e:{switch(t){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else wn?No(t,o)&&(dt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(dt="onCompositionStart");dt&&(Ao&&o.locale!=="ko"&&(wn||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&wn&&(lt=To()):(Wr=Fe,Fs="value"in Wr?Wr.value:Wr.textContent,wn=!0)),ot=zi(Ee,dt),0<ot.length&&(dt=new Co(dt,t,null,o,Fe),ze.push({event:dt,listeners:ot}),lt?dt.data=lt:(lt=Do(o),lt!==null&&(dt.data=lt)))),(lt=yu?vu(t,o):bu(t,o))&&(Ee=zi(Ee,"onBeforeInput"),0<Ee.length&&(Fe=new Co("onBeforeInput","beforeinput",null,o,Fe),ze.push({event:Fe,listeners:Ee}),Fe.data=lt))}el(ze,n)})}function ii(t,n,o){return{instance:t,listener:n,currentTarget:o}}function zi(t,n){for(var o=n+"Capture",x=[];t!==null;){var S=t,C=S.stateNode;S.tag===5&&C!==null&&(S=C,C=Ie(t,o),C!=null&&x.unshift(ii(t,C,S)),C=Ie(t,n),C!=null&&x.push(ii(t,C,S))),t=t.return}return x}function Tn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rl(t,n,o,x,S){for(var C=n._reactName,N=[];o!==null&&o!==x;){var $=o,re=$.alternate,Ee=$.stateNode;if(re!==null&&re===x)break;$.tag===5&&Ee!==null&&($=Ee,S?(re=Ie(o,C),re!=null&&N.unshift(ii(o,re,$))):S||(re=Ie(o,C),re!=null&&N.push(ii(o,re,$)))),o=o.return}N.length!==0&&t.push({event:n,listeners:N})}var Du=/\r\n?/g,Mu=/\u0000|\uFFFD/g;function nl(t){return(typeof t=="string"?t:""+t).replace(Du,`
`).replace(Mu,"")}function Ui(t,n,o){if(n=nl(n),nl(t)!==n&&o)throw Error(i(425))}function qi(){}var ta=null,ra=null;function na(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ia=typeof setTimeout=="function"?setTimeout:void 0,Bu=typeof clearTimeout=="function"?clearTimeout:void 0,il=typeof Promise=="function"?Promise:void 0,Lu=typeof queueMicrotask=="function"?queueMicrotask:typeof il<"u"?function(t){return il.resolve(null).then(t).catch(Fu)}:ia;function Fu(t){setTimeout(function(){throw t})}function sa(t,n){var o=n,x=0;do{var S=o.nextSibling;if(t.removeChild(o),S&&S.nodeType===8)if(o=S.data,o==="/$"){if(x===0){t.removeChild(S),Xn(n);return}x--}else o!=="$"&&o!=="$?"&&o!=="$!"||x++;o=S}while(o);Xn(n)}function Hr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function sl(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var kn=Math.random().toString(36).slice(2),Sr="__reactFiber$"+kn,si="__reactProps$"+kn,Cr="__reactContainer$"+kn,aa="__reactEvents$"+kn,Ou="__reactListeners$"+kn,zu="__reactHandles$"+kn;function on(t){var n=t[Sr];if(n)return n;for(var o=t.parentNode;o;){if(n=o[Cr]||o[Sr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=sl(t);t!==null;){if(o=t[Sr])return o;t=sl(t)}return n}t=o,o=t.parentNode}return null}function ai(t){return t=t[Sr]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function Vi(t){return t[si]||null}var oa=[],Cn=-1;function Gr(t){return{current:t}}function _t(t){0>Cn||(t.current=oa[Cn],oa[Cn]=null,Cn--)}function jt(t,n){Cn++,oa[Cn]=t.current,t.current=n}var Xr={},Gt=Gr(Xr),Jt=Gr(!1),ln=Xr;function _n(t,n){var o=t.type.contextTypes;if(!o)return Xr;var x=t.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===n)return x.__reactInternalMemoizedMaskedChildContext;var S={},C;for(C in o)S[C]=n[C];return x&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=S),S}function er(t){return t=t.childContextTypes,t!=null}function Wi(){_t(Jt),_t(Gt)}function al(t,n,o){if(Gt.current!==Xr)throw Error(i(168));jt(Gt,n),jt(Jt,o)}function ol(t,n,o){var x=t.stateNode;if(n=n.childContextTypes,typeof x.getChildContext!="function")return o;x=x.getChildContext();for(var S in x)if(!(S in n))throw Error(i(108,_e(t)||"Unknown",S));return F({},o,x)}function $i(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,ln=Gt.current,jt(Gt,t),jt(Jt,Jt.current),!0}function ll(t,n,o){var x=t.stateNode;if(!x)throw Error(i(169));o?(t=ol(t,n,ln),x.__reactInternalMemoizedMergedChildContext=t,_t(Jt),_t(Gt),jt(Gt,t)):_t(Jt),jt(Jt,o)}var _r=null,Hi=!1,la=!1;function cl(t){_r===null?_r=[t]:_r.push(t)}function Uu(t){Hi=!0,cl(t)}function Kr(){if(!la&&_r!==null){la=!0;var t=0,n=kt;try{var o=_r;for(kt=1;t<o.length;t++){var x=o[t];do x=x(!0);while(x!==null)}_r=null,Hi=!1}catch(S){throw _r!==null&&(_r=_r.slice(t+1)),Tt(Ft,Kr),S}finally{kt=n,la=!1}}return null}var An=[],Pn=0,Gi=null,Xi=0,ur=[],dr=0,cn=null,Ar=1,Pr="";function un(t,n){An[Pn++]=Xi,An[Pn++]=Gi,Gi=t,Xi=n}function ul(t,n,o){ur[dr++]=Ar,ur[dr++]=Pr,ur[dr++]=cn,cn=t;var x=Ar;t=Pr;var S=32-sr(x)-1;x&=~(1<<S),o+=1;var C=32-sr(n)+S;if(30<C){var N=S-S%5;C=(x&(1<<N)-1).toString(32),x>>=N,S-=N,Ar=1<<32-sr(n)+S|o<<S|x,Pr=C+t}else Ar=1<<C|o<<S|x,Pr=t}function ca(t){t.return!==null&&(un(t,1),ul(t,1,0))}function ua(t){for(;t===Gi;)Gi=An[--Pn],An[Pn]=null,Xi=An[--Pn],An[Pn]=null;for(;t===cn;)cn=ur[--dr],ur[dr]=null,Pr=ur[--dr],ur[dr]=null,Ar=ur[--dr],ur[dr]=null}var or=null,lr=null,At=!1,xr=null;function dl(t,n){var o=hr(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function fl(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,or=t,lr=Hr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,or=t,lr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=cn!==null?{id:Ar,overflow:Pr}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=hr(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,or=t,lr=null,!0):!1;default:return!1}}function da(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fa(t){if(At){var n=lr;if(n){var o=n;if(!fl(t,n)){if(da(t))throw Error(i(418));n=Hr(o.nextSibling);var x=or;n&&fl(t,n)?dl(x,o):(t.flags=t.flags&-4097|2,At=!1,or=t)}}else{if(da(t))throw Error(i(418));t.flags=t.flags&-4097|2,At=!1,or=t}}}function pl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;or=t}function Ki(t){if(t!==or)return!1;if(!At)return pl(t),At=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!na(t.type,t.memoizedProps)),n&&(n=lr)){if(da(t))throw ml(),Error(i(418));for(;n;)dl(t,n),n=Hr(n.nextSibling)}if(pl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){lr=Hr(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}lr=null}}else lr=or?Hr(t.stateNode.nextSibling):null;return!0}function ml(){for(var t=lr;t;)t=Hr(t.nextSibling)}function In(){lr=or=null,At=!1}function pa(t){xr===null?xr=[t]:xr.push(t)}var qu=k.ReactCurrentBatchConfig;function oi(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(i(309));var x=o.stateNode}if(!x)throw Error(i(147,t));var S=x,C=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===C?n.ref:(n=function(N){var $=S.refs;N===null?delete $[C]:$[C]=N},n._stringRef=C,n)}if(typeof t!="string")throw Error(i(284));if(!o._owner)throw Error(i(290,t))}return t}function Yi(t,n){throw t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function hl(t){var n=t._init;return n(t._payload)}function gl(t){function n(me,ie){if(t){var xe=me.deletions;xe===null?(me.deletions=[ie],me.flags|=16):xe.push(ie)}}function o(me,ie){if(!t)return null;for(;ie!==null;)n(me,ie),ie=ie.sibling;return null}function x(me,ie){for(me=new Map;ie!==null;)ie.key!==null?me.set(ie.key,ie):me.set(ie.index,ie),ie=ie.sibling;return me}function S(me,ie){return me=nn(me,ie),me.index=0,me.sibling=null,me}function C(me,ie,xe){return me.index=xe,t?(xe=me.alternate,xe!==null?(xe=xe.index,xe<ie?(me.flags|=2,ie):xe):(me.flags|=2,ie)):(me.flags|=1048576,ie)}function N(me){return t&&me.alternate===null&&(me.flags|=2),me}function $(me,ie,xe,Ve){return ie===null||ie.tag!==6?(ie=io(xe,me.mode,Ve),ie.return=me,ie):(ie=S(ie,xe),ie.return=me,ie)}function re(me,ie,xe,Ve){var at=xe.type;return at===R?Fe(me,ie,xe.props.children,Ve,xe.key):ie!==null&&(ie.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===ce&&hl(at)===ie.type)?(Ve=S(ie,xe.props),Ve.ref=oi(me,ie,xe),Ve.return=me,Ve):(Ve=Es(xe.type,xe.key,xe.props,null,me.mode,Ve),Ve.ref=oi(me,ie,xe),Ve.return=me,Ve)}function Ee(me,ie,xe,Ve){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==xe.containerInfo||ie.stateNode.implementation!==xe.implementation?(ie=so(xe,me.mode,Ve),ie.return=me,ie):(ie=S(ie,xe.children||[]),ie.return=me,ie)}function Fe(me,ie,xe,Ve,at){return ie===null||ie.tag!==7?(ie=yn(xe,me.mode,Ve,at),ie.return=me,ie):(ie=S(ie,xe),ie.return=me,ie)}function ze(me,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=io(""+ie,me.mode,xe),ie.return=me,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:return xe=Es(ie.type,ie.key,ie.props,null,me.mode,xe),xe.ref=oi(me,null,ie),xe.return=me,xe;case P:return ie=so(ie,me.mode,xe),ie.return=me,ie;case ce:var Ve=ie._init;return ze(me,Ve(ie._payload),xe)}if(Se(ie)||fe(ie))return ie=yn(ie,me.mode,xe,null),ie.return=me,ie;Yi(me,ie)}return null}function Le(me,ie,xe,Ve){var at=ie!==null?ie.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return at!==null?null:$(me,ie,""+xe,Ve);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case _:return xe.key===at?re(me,ie,xe,Ve):null;case P:return xe.key===at?Ee(me,ie,xe,Ve):null;case ce:return at=xe._init,Le(me,ie,at(xe._payload),Ve)}if(Se(xe)||fe(xe))return at!==null?null:Fe(me,ie,xe,Ve,null);Yi(me,xe)}return null}function et(me,ie,xe,Ve,at){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return me=me.get(xe)||null,$(ie,me,""+Ve,at);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case _:return me=me.get(Ve.key===null?xe:Ve.key)||null,re(ie,me,Ve,at);case P:return me=me.get(Ve.key===null?xe:Ve.key)||null,Ee(ie,me,Ve,at);case ce:var ot=Ve._init;return et(me,ie,xe,ot(Ve._payload),at)}if(Se(Ve)||fe(Ve))return me=me.get(xe)||null,Fe(ie,me,Ve,at,null);Yi(ie,Ve)}return null}function it(me,ie,xe,Ve){for(var at=null,ot=null,lt=ie,dt=ie=0,Vt=null;lt!==null&&dt<xe.length;dt++){lt.index>dt?(Vt=lt,lt=null):Vt=lt.sibling;var Rt=Le(me,lt,xe[dt],Ve);if(Rt===null){lt===null&&(lt=Vt);break}t&&lt&&Rt.alternate===null&&n(me,lt),ie=C(Rt,ie,dt),ot===null?at=Rt:ot.sibling=Rt,ot=Rt,lt=Vt}if(dt===xe.length)return o(me,lt),At&&un(me,dt),at;if(lt===null){for(;dt<xe.length;dt++)lt=ze(me,xe[dt],Ve),lt!==null&&(ie=C(lt,ie,dt),ot===null?at=lt:ot.sibling=lt,ot=lt);return At&&un(me,dt),at}for(lt=x(me,lt);dt<xe.length;dt++)Vt=et(lt,me,dt,xe[dt],Ve),Vt!==null&&(t&&Vt.alternate!==null&&lt.delete(Vt.key===null?dt:Vt.key),ie=C(Vt,ie,dt),ot===null?at=Vt:ot.sibling=Vt,ot=Vt);return t&&lt.forEach(function(sn){return n(me,sn)}),At&&un(me,dt),at}function st(me,ie,xe,Ve){var at=fe(xe);if(typeof at!="function")throw Error(i(150));if(xe=at.call(xe),xe==null)throw Error(i(151));for(var ot=at=null,lt=ie,dt=ie=0,Vt=null,Rt=xe.next();lt!==null&&!Rt.done;dt++,Rt=xe.next()){lt.index>dt?(Vt=lt,lt=null):Vt=lt.sibling;var sn=Le(me,lt,Rt.value,Ve);if(sn===null){lt===null&&(lt=Vt);break}t&&lt&&sn.alternate===null&&n(me,lt),ie=C(sn,ie,dt),ot===null?at=sn:ot.sibling=sn,ot=sn,lt=Vt}if(Rt.done)return o(me,lt),At&&un(me,dt),at;if(lt===null){for(;!Rt.done;dt++,Rt=xe.next())Rt=ze(me,Rt.value,Ve),Rt!==null&&(ie=C(Rt,ie,dt),ot===null?at=Rt:ot.sibling=Rt,ot=Rt);return At&&un(me,dt),at}for(lt=x(me,lt);!Rt.done;dt++,Rt=xe.next())Rt=et(lt,me,dt,Rt.value,Ve),Rt!==null&&(t&&Rt.alternate!==null&&lt.delete(Rt.key===null?dt:Rt.key),ie=C(Rt,ie,dt),ot===null?at=Rt:ot.sibling=Rt,ot=Rt);return t&&lt.forEach(function(wd){return n(me,wd)}),At&&un(me,dt),at}function Bt(me,ie,xe,Ve){if(typeof xe=="object"&&xe!==null&&xe.type===R&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case _:e:{for(var at=xe.key,ot=ie;ot!==null;){if(ot.key===at){if(at=xe.type,at===R){if(ot.tag===7){o(me,ot.sibling),ie=S(ot,xe.props.children),ie.return=me,me=ie;break e}}else if(ot.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===ce&&hl(at)===ot.type){o(me,ot.sibling),ie=S(ot,xe.props),ie.ref=oi(me,ot,xe),ie.return=me,me=ie;break e}o(me,ot);break}else n(me,ot);ot=ot.sibling}xe.type===R?(ie=yn(xe.props.children,me.mode,Ve,xe.key),ie.return=me,me=ie):(Ve=Es(xe.type,xe.key,xe.props,null,me.mode,Ve),Ve.ref=oi(me,ie,xe),Ve.return=me,me=Ve)}return N(me);case P:e:{for(ot=xe.key;ie!==null;){if(ie.key===ot)if(ie.tag===4&&ie.stateNode.containerInfo===xe.containerInfo&&ie.stateNode.implementation===xe.implementation){o(me,ie.sibling),ie=S(ie,xe.children||[]),ie.return=me,me=ie;break e}else{o(me,ie);break}else n(me,ie);ie=ie.sibling}ie=so(xe,me.mode,Ve),ie.return=me,me=ie}return N(me);case ce:return ot=xe._init,Bt(me,ie,ot(xe._payload),Ve)}if(Se(xe))return it(me,ie,xe,Ve);if(fe(xe))return st(me,ie,xe,Ve);Yi(me,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,ie!==null&&ie.tag===6?(o(me,ie.sibling),ie=S(ie,xe),ie.return=me,me=ie):(o(me,ie),ie=io(xe,me.mode,Ve),ie.return=me,me=ie),N(me)):o(me,ie)}return Bt}var Nn=gl(!0),xl=gl(!1),Qi=Gr(null),Zi=null,Dn=null,ma=null;function ha(){ma=Dn=Zi=null}function ga(t){var n=Qi.current;_t(Qi),t._currentValue=n}function xa(t,n,o){for(;t!==null;){var x=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,x!==null&&(x.childLanes|=n)):x!==null&&(x.childLanes&n)!==n&&(x.childLanes|=n),t===o)break;t=t.return}}function Mn(t,n){Zi=t,ma=Dn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(tr=!0),t.firstContext=null)}function fr(t){var n=t._currentValue;if(ma!==t)if(t={context:t,memoizedValue:n,next:null},Dn===null){if(Zi===null)throw Error(i(308));Dn=t,Zi.dependencies={lanes:0,firstContext:t}}else Dn=Dn.next=t;return n}var dn=null;function ya(t){dn===null?dn=[t]:dn.push(t)}function yl(t,n,o,x){var S=n.interleaved;return S===null?(o.next=o,ya(n)):(o.next=S.next,S.next=o),n.interleaved=o,Ir(t,x)}function Ir(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Yr=!1;function va(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vl(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Qr(t,n,o){var x=t.updateQueue;if(x===null)return null;if(x=x.shared,(wt&2)!==0){var S=x.pending;return S===null?n.next=n:(n.next=S.next,S.next=n),x.pending=n,Ir(t,o)}return S=x.interleaved,S===null?(n.next=n,ya(x)):(n.next=S.next,S.next=n),x.interleaved=n,Ir(t,o)}function Ji(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var x=n.lanes;x&=t.pendingLanes,o|=x,n.lanes=o,Ns(t,o)}}function bl(t,n){var o=t.updateQueue,x=t.alternate;if(x!==null&&(x=x.updateQueue,o===x)){var S=null,C=null;if(o=o.firstBaseUpdate,o!==null){do{var N={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};C===null?S=C=N:C=C.next=N,o=o.next}while(o!==null);C===null?S=C=n:C=C.next=n}else S=C=n;o={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:x.shared,effects:x.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function es(t,n,o,x){var S=t.updateQueue;Yr=!1;var C=S.firstBaseUpdate,N=S.lastBaseUpdate,$=S.shared.pending;if($!==null){S.shared.pending=null;var re=$,Ee=re.next;re.next=null,N===null?C=Ee:N.next=Ee,N=re;var Fe=t.alternate;Fe!==null&&(Fe=Fe.updateQueue,$=Fe.lastBaseUpdate,$!==N&&($===null?Fe.firstBaseUpdate=Ee:$.next=Ee,Fe.lastBaseUpdate=re))}if(C!==null){var ze=S.baseState;N=0,Fe=Ee=re=null,$=C;do{var Le=$.lane,et=$.eventTime;if((x&Le)===Le){Fe!==null&&(Fe=Fe.next={eventTime:et,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var it=t,st=$;switch(Le=n,et=o,st.tag){case 1:if(it=st.payload,typeof it=="function"){ze=it.call(et,ze,Le);break e}ze=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=st.payload,Le=typeof it=="function"?it.call(et,ze,Le):it,Le==null)break e;ze=F({},ze,Le);break e;case 2:Yr=!0}}$.callback!==null&&$.lane!==0&&(t.flags|=64,Le=S.effects,Le===null?S.effects=[$]:Le.push($))}else et={eventTime:et,lane:Le,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Fe===null?(Ee=Fe=et,re=ze):Fe=Fe.next=et,N|=Le;if($=$.next,$===null){if($=S.shared.pending,$===null)break;Le=$,$=Le.next,Le.next=null,S.lastBaseUpdate=Le,S.shared.pending=null}}while(!0);if(Fe===null&&(re=ze),S.baseState=re,S.firstBaseUpdate=Ee,S.lastBaseUpdate=Fe,n=S.shared.interleaved,n!==null){S=n;do N|=S.lane,S=S.next;while(S!==n)}else C===null&&(S.shared.lanes=0);mn|=N,t.lanes=N,t.memoizedState=ze}}function El(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var x=t[n],S=x.callback;if(S!==null){if(x.callback=null,x=o,typeof S!="function")throw Error(i(191,S));S.call(x)}}}var li={},Rr=Gr(li),ci=Gr(li),ui=Gr(li);function fn(t){if(t===li)throw Error(i(174));return t}function ba(t,n){switch(jt(ui,n),jt(ci,t),jt(Rr,li),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:D(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=D(n,t)}_t(Rr),jt(Rr,n)}function Bn(){_t(Rr),_t(ci),_t(ui)}function wl(t){fn(ui.current);var n=fn(Rr.current),o=D(n,t.type);n!==o&&(jt(ci,t),jt(Rr,o))}function Ea(t){ci.current===t&&(_t(Rr),_t(ci))}var Pt=Gr(0);function ts(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wa=[];function Sa(){for(var t=0;t<wa.length;t++)wa[t]._workInProgressVersionPrimary=null;wa.length=0}var rs=k.ReactCurrentDispatcher,Ra=k.ReactCurrentBatchConfig,pn=0,It=null,Ot=null,Ut=null,ns=!1,di=!1,fi=0,Vu=0;function Xt(){throw Error(i(321))}function Ta(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!gr(t[o],n[o]))return!1;return!0}function ka(t,n,o,x,S,C){if(pn=C,It=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,rs.current=t===null||t.memoizedState===null?Gu:Xu,t=o(x,S),di){C=0;do{if(di=!1,fi=0,25<=C)throw Error(i(301));C+=1,Ut=Ot=null,n.updateQueue=null,rs.current=Ku,t=o(x,S)}while(di)}if(rs.current=as,n=Ot!==null&&Ot.next!==null,pn=0,Ut=Ot=It=null,ns=!1,n)throw Error(i(300));return t}function ja(){var t=fi!==0;return fi=0,t}function Tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?It.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function pr(){if(Ot===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var n=Ut===null?It.memoizedState:Ut.next;if(n!==null)Ut=n,Ot=t;else{if(t===null)throw Error(i(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ut===null?It.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function pi(t,n){return typeof n=="function"?n(t):n}function Ca(t){var n=pr(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var x=Ot,S=x.baseQueue,C=o.pending;if(C!==null){if(S!==null){var N=S.next;S.next=C.next,C.next=N}x.baseQueue=S=C,o.pending=null}if(S!==null){C=S.next,x=x.baseState;var $=N=null,re=null,Ee=C;do{var Fe=Ee.lane;if((pn&Fe)===Fe)re!==null&&(re=re.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),x=Ee.hasEagerState?Ee.eagerState:t(x,Ee.action);else{var ze={lane:Fe,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};re===null?($=re=ze,N=x):re=re.next=ze,It.lanes|=Fe,mn|=Fe}Ee=Ee.next}while(Ee!==null&&Ee!==C);re===null?N=x:re.next=$,gr(x,n.memoizedState)||(tr=!0),n.memoizedState=x,n.baseState=N,n.baseQueue=re,o.lastRenderedState=x}if(t=o.interleaved,t!==null){S=t;do C=S.lane,It.lanes|=C,mn|=C,S=S.next;while(S!==t)}else S===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function _a(t){var n=pr(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var x=o.dispatch,S=o.pending,C=n.memoizedState;if(S!==null){o.pending=null;var N=S=S.next;do C=t(C,N.action),N=N.next;while(N!==S);gr(C,n.memoizedState)||(tr=!0),n.memoizedState=C,n.baseQueue===null&&(n.baseState=C),o.lastRenderedState=C}return[C,x]}function Sl(){}function Rl(t,n){var o=It,x=pr(),S=n(),C=!gr(x.memoizedState,S);if(C&&(x.memoizedState=S,tr=!0),x=x.queue,Aa(jl.bind(null,o,x,t),[t]),x.getSnapshot!==n||C||Ut!==null&&Ut.memoizedState.tag&1){if(o.flags|=2048,mi(9,kl.bind(null,o,x,S,n),void 0,null),qt===null)throw Error(i(349));(pn&30)!==0||Tl(o,n,S)}return S}function Tl(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=It.updateQueue,n===null?(n={lastEffect:null,stores:null},It.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function kl(t,n,o,x){n.value=o,n.getSnapshot=x,Cl(n)&&_l(t)}function jl(t,n,o){return o(function(){Cl(n)&&_l(t)})}function Cl(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!gr(t,o)}catch{return!0}}function _l(t){var n=Ir(t,1);n!==null&&Er(n,t,1,-1)}function Al(t){var n=Tr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},n.queue=t,t=t.dispatch=Hu.bind(null,It,t),[n.memoizedState,t]}function mi(t,n,o,x){return t={tag:t,create:n,destroy:o,deps:x,next:null},n=It.updateQueue,n===null?(n={lastEffect:null,stores:null},It.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(x=o.next,o.next=t,t.next=x,n.lastEffect=t)),t}function Pl(){return pr().memoizedState}function is(t,n,o,x){var S=Tr();It.flags|=t,S.memoizedState=mi(1|n,o,void 0,x===void 0?null:x)}function ss(t,n,o,x){var S=pr();x=x===void 0?null:x;var C=void 0;if(Ot!==null){var N=Ot.memoizedState;if(C=N.destroy,x!==null&&Ta(x,N.deps)){S.memoizedState=mi(n,o,C,x);return}}It.flags|=t,S.memoizedState=mi(1|n,o,C,x)}function Il(t,n){return is(8390656,8,t,n)}function Aa(t,n){return ss(2048,8,t,n)}function Nl(t,n){return ss(4,2,t,n)}function Dl(t,n){return ss(4,4,t,n)}function Ml(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Bl(t,n,o){return o=o!=null?o.concat([t]):null,ss(4,4,Ml.bind(null,n,t),o)}function Pa(){}function Ll(t,n){var o=pr();n=n===void 0?null:n;var x=o.memoizedState;return x!==null&&n!==null&&Ta(n,x[1])?x[0]:(o.memoizedState=[t,n],t)}function Fl(t,n){var o=pr();n=n===void 0?null:n;var x=o.memoizedState;return x!==null&&n!==null&&Ta(n,x[1])?x[0]:(t=t(),o.memoizedState=[t,n],t)}function Ol(t,n,o){return(pn&21)===0?(t.baseState&&(t.baseState=!1,tr=!0),t.memoizedState=o):(gr(o,n)||(o=ho(),It.lanes|=o,mn|=o,t.baseState=!0),n)}function Wu(t,n){var o=kt;kt=o!==0&&4>o?o:4,t(!0);var x=Ra.transition;Ra.transition={};try{t(!1),n()}finally{kt=o,Ra.transition=x}}function zl(){return pr().memoizedState}function $u(t,n,o){var x=tn(t);if(o={lane:x,action:o,hasEagerState:!1,eagerState:null,next:null},Ul(t))ql(n,o);else if(o=yl(t,n,o,x),o!==null){var S=Zt();Er(o,t,x,S),Vl(o,n,x)}}function Hu(t,n,o){var x=tn(t),S={lane:x,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ul(t))ql(n,S);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=n.lastRenderedReducer,C!==null))try{var N=n.lastRenderedState,$=C(N,o);if(S.hasEagerState=!0,S.eagerState=$,gr($,N)){var re=n.interleaved;re===null?(S.next=S,ya(n)):(S.next=re.next,re.next=S),n.interleaved=S;return}}catch{}finally{}o=yl(t,n,S,x),o!==null&&(S=Zt(),Er(o,t,x,S),Vl(o,n,x))}}function Ul(t){var n=t.alternate;return t===It||n!==null&&n===It}function ql(t,n){di=ns=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function Vl(t,n,o){if((o&4194240)!==0){var x=n.lanes;x&=t.pendingLanes,o|=x,n.lanes=o,Ns(t,o)}}var as={readContext:fr,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},Gu={readContext:fr,useCallback:function(t,n){return Tr().memoizedState=[t,n===void 0?null:n],t},useContext:fr,useEffect:Il,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,is(4194308,4,Ml.bind(null,n,t),o)},useLayoutEffect:function(t,n){return is(4194308,4,t,n)},useInsertionEffect:function(t,n){return is(4,2,t,n)},useMemo:function(t,n){var o=Tr();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var x=Tr();return n=o!==void 0?o(n):n,x.memoizedState=x.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},x.queue=t,t=t.dispatch=$u.bind(null,It,t),[x.memoizedState,t]},useRef:function(t){var n=Tr();return t={current:t},n.memoizedState=t},useState:Al,useDebugValue:Pa,useDeferredValue:function(t){return Tr().memoizedState=t},useTransition:function(){var t=Al(!1),n=t[0];return t=Wu.bind(null,t[1]),Tr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var x=It,S=Tr();if(At){if(o===void 0)throw Error(i(407));o=o()}else{if(o=n(),qt===null)throw Error(i(349));(pn&30)!==0||Tl(x,n,o)}S.memoizedState=o;var C={value:o,getSnapshot:n};return S.queue=C,Il(jl.bind(null,x,C,t),[t]),x.flags|=2048,mi(9,kl.bind(null,x,C,o,n),void 0,null),o},useId:function(){var t=Tr(),n=qt.identifierPrefix;if(At){var o=Pr,x=Ar;o=(x&~(1<<32-sr(x)-1)).toString(32)+o,n=":"+n+"R"+o,o=fi++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=Vu++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Xu={readContext:fr,useCallback:Ll,useContext:fr,useEffect:Aa,useImperativeHandle:Bl,useInsertionEffect:Nl,useLayoutEffect:Dl,useMemo:Fl,useReducer:Ca,useRef:Pl,useState:function(){return Ca(pi)},useDebugValue:Pa,useDeferredValue:function(t){var n=pr();return Ol(n,Ot.memoizedState,t)},useTransition:function(){var t=Ca(pi)[0],n=pr().memoizedState;return[t,n]},useMutableSource:Sl,useSyncExternalStore:Rl,useId:zl,unstable_isNewReconciler:!1},Ku={readContext:fr,useCallback:Ll,useContext:fr,useEffect:Aa,useImperativeHandle:Bl,useInsertionEffect:Nl,useLayoutEffect:Dl,useMemo:Fl,useReducer:_a,useRef:Pl,useState:function(){return _a(pi)},useDebugValue:Pa,useDeferredValue:function(t){var n=pr();return Ot===null?n.memoizedState=t:Ol(n,Ot.memoizedState,t)},useTransition:function(){var t=_a(pi)[0],n=pr().memoizedState;return[t,n]},useMutableSource:Sl,useSyncExternalStore:Rl,useId:zl,unstable_isNewReconciler:!1};function yr(t,n){if(t&&t.defaultProps){n=F({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function Ia(t,n,o,x){n=t.memoizedState,o=o(x,n),o=o==null?n:F({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var os={isMounted:function(t){return(t=t._reactInternals)?De(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var x=Zt(),S=tn(t),C=Nr(x,S);C.payload=n,o!=null&&(C.callback=o),n=Qr(t,C,S),n!==null&&(Er(n,t,S,x),Ji(n,t,S))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var x=Zt(),S=tn(t),C=Nr(x,S);C.tag=1,C.payload=n,o!=null&&(C.callback=o),n=Qr(t,C,S),n!==null&&(Er(n,t,S,x),Ji(n,t,S))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=Zt(),x=tn(t),S=Nr(o,x);S.tag=2,n!=null&&(S.callback=n),n=Qr(t,S,x),n!==null&&(Er(n,t,x,o),Ji(n,t,x))}};function Wl(t,n,o,x,S,C,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(x,C,N):n.prototype&&n.prototype.isPureReactComponent?!ei(o,x)||!ei(S,C):!0}function $l(t,n,o){var x=!1,S=Xr,C=n.contextType;return typeof C=="object"&&C!==null?C=fr(C):(S=er(n)?ln:Gt.current,x=n.contextTypes,C=(x=x!=null)?_n(t,S):Xr),n=new n(o,C),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=os,t.stateNode=n,n._reactInternals=t,x&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=S,t.__reactInternalMemoizedMaskedChildContext=C),n}function Hl(t,n,o,x){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,x),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,x),n.state!==t&&os.enqueueReplaceState(n,n.state,null)}function Na(t,n,o,x){var S=t.stateNode;S.props=o,S.state=t.memoizedState,S.refs={},va(t);var C=n.contextType;typeof C=="object"&&C!==null?S.context=fr(C):(C=er(n)?ln:Gt.current,S.context=_n(t,C)),S.state=t.memoizedState,C=n.getDerivedStateFromProps,typeof C=="function"&&(Ia(t,n,C,o),S.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(n=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),n!==S.state&&os.enqueueReplaceState(S,S.state,null),es(t,o,S,x),S.state=t.memoizedState),typeof S.componentDidMount=="function"&&(t.flags|=4194308)}function Ln(t,n){try{var o="",x=n;do o+=ge(x),x=x.return;while(x);var S=o}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:t,source:n,stack:S,digest:null}}function Da(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function Ma(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Yu=typeof WeakMap=="function"?WeakMap:Map;function Gl(t,n,o){o=Nr(-1,o),o.tag=3,o.payload={element:null};var x=n.value;return o.callback=function(){hs||(hs=!0,Ya=x),Ma(t,n)},o}function Xl(t,n,o){o=Nr(-1,o),o.tag=3;var x=t.type.getDerivedStateFromError;if(typeof x=="function"){var S=n.value;o.payload=function(){return x(S)},o.callback=function(){Ma(t,n)}}var C=t.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){Ma(t,n),typeof x!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})}),o}function Kl(t,n,o){var x=t.pingCache;if(x===null){x=t.pingCache=new Yu;var S=new Set;x.set(n,S)}else S=x.get(n),S===void 0&&(S=new Set,x.set(n,S));S.has(o)||(S.add(o),t=dd.bind(null,t,n,o),n.then(t,t))}function Yl(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Ql(t,n,o,x,S){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Nr(-1,1),n.tag=2,Qr(o,n,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=S,t)}var Qu=k.ReactCurrentOwner,tr=!1;function Qt(t,n,o,x){n.child=t===null?xl(n,null,o,x):Nn(n,t.child,o,x)}function Zl(t,n,o,x,S){o=o.render;var C=n.ref;return Mn(n,S),x=ka(t,n,o,x,C,S),o=ja(),t!==null&&!tr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~S,Dr(t,n,S)):(At&&o&&ca(n),n.flags|=1,Qt(t,n,x,S),n.child)}function Jl(t,n,o,x,S){if(t===null){var C=o.type;return typeof C=="function"&&!no(C)&&C.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=C,ec(t,n,C,x,S)):(t=Es(o.type,null,x,n,n.mode,S),t.ref=n.ref,t.return=n,n.child=t)}if(C=t.child,(t.lanes&S)===0){var N=C.memoizedProps;if(o=o.compare,o=o!==null?o:ei,o(N,x)&&t.ref===n.ref)return Dr(t,n,S)}return n.flags|=1,t=nn(C,x),t.ref=n.ref,t.return=n,n.child=t}function ec(t,n,o,x,S){if(t!==null){var C=t.memoizedProps;if(ei(C,x)&&t.ref===n.ref)if(tr=!1,n.pendingProps=x=C,(t.lanes&S)!==0)(t.flags&131072)!==0&&(tr=!0);else return n.lanes=t.lanes,Dr(t,n,S)}return Ba(t,n,o,x,S)}function tc(t,n,o){var x=n.pendingProps,S=x.children,C=t!==null?t.memoizedState:null;if(x.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(On,cr),cr|=o;else{if((o&1073741824)===0)return t=C!==null?C.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,jt(On,cr),cr|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=C!==null?C.baseLanes:o,jt(On,cr),cr|=x}else C!==null?(x=C.baseLanes|o,n.memoizedState=null):x=o,jt(On,cr),cr|=x;return Qt(t,n,S,o),n.child}function rc(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Ba(t,n,o,x,S){var C=er(o)?ln:Gt.current;return C=_n(n,C),Mn(n,S),o=ka(t,n,o,x,C,S),x=ja(),t!==null&&!tr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~S,Dr(t,n,S)):(At&&x&&ca(n),n.flags|=1,Qt(t,n,o,S),n.child)}function nc(t,n,o,x,S){if(er(o)){var C=!0;$i(n)}else C=!1;if(Mn(n,S),n.stateNode===null)cs(t,n),$l(n,o,x),Na(n,o,x,S),x=!0;else if(t===null){var N=n.stateNode,$=n.memoizedProps;N.props=$;var re=N.context,Ee=o.contextType;typeof Ee=="object"&&Ee!==null?Ee=fr(Ee):(Ee=er(o)?ln:Gt.current,Ee=_n(n,Ee));var Fe=o.getDerivedStateFromProps,ze=typeof Fe=="function"||typeof N.getSnapshotBeforeUpdate=="function";ze||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==x||re!==Ee)&&Hl(n,N,x,Ee),Yr=!1;var Le=n.memoizedState;N.state=Le,es(n,x,N,S),re=n.memoizedState,$!==x||Le!==re||Jt.current||Yr?(typeof Fe=="function"&&(Ia(n,o,Fe,x),re=n.memoizedState),($=Yr||Wl(n,o,$,x,Le,re,Ee))?(ze||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(n.flags|=4194308)):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=x,n.memoizedState=re),N.props=x,N.state=re,N.context=Ee,x=$):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),x=!1)}else{N=n.stateNode,vl(t,n),$=n.memoizedProps,Ee=n.type===n.elementType?$:yr(n.type,$),N.props=Ee,ze=n.pendingProps,Le=N.context,re=o.contextType,typeof re=="object"&&re!==null?re=fr(re):(re=er(o)?ln:Gt.current,re=_n(n,re));var et=o.getDerivedStateFromProps;(Fe=typeof et=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||($!==ze||Le!==re)&&Hl(n,N,x,re),Yr=!1,Le=n.memoizedState,N.state=Le,es(n,x,N,S);var it=n.memoizedState;$!==ze||Le!==it||Jt.current||Yr?(typeof et=="function"&&(Ia(n,o,et,x),it=n.memoizedState),(Ee=Yr||Wl(n,o,Ee,x,Le,it,re)||!1)?(Fe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,it,re),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,it,re)),typeof N.componentDidUpdate=="function"&&(n.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof N.componentDidUpdate!="function"||$===t.memoizedProps&&Le===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&Le===t.memoizedState||(n.flags|=1024),n.memoizedProps=x,n.memoizedState=it),N.props=x,N.state=it,N.context=re,x=Ee):(typeof N.componentDidUpdate!="function"||$===t.memoizedProps&&Le===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&Le===t.memoizedState||(n.flags|=1024),x=!1)}return La(t,n,o,x,C,S)}function La(t,n,o,x,S,C){rc(t,n);var N=(n.flags&128)!==0;if(!x&&!N)return S&&ll(n,o,!1),Dr(t,n,C);x=n.stateNode,Qu.current=n;var $=N&&typeof o.getDerivedStateFromError!="function"?null:x.render();return n.flags|=1,t!==null&&N?(n.child=Nn(n,t.child,null,C),n.child=Nn(n,null,$,C)):Qt(t,n,$,C),n.memoizedState=x.state,S&&ll(n,o,!0),n.child}function ic(t){var n=t.stateNode;n.pendingContext?al(t,n.pendingContext,n.pendingContext!==n.context):n.context&&al(t,n.context,!1),ba(t,n.containerInfo)}function sc(t,n,o,x,S){return In(),pa(S),n.flags|=256,Qt(t,n,o,x),n.child}var Fa={dehydrated:null,treeContext:null,retryLane:0};function Oa(t){return{baseLanes:t,cachePool:null,transitions:null}}function ac(t,n,o){var x=n.pendingProps,S=Pt.current,C=!1,N=(n.flags&128)!==0,$;if(($=N)||($=t!==null&&t.memoizedState===null?!1:(S&2)!==0),$?(C=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(S|=1),jt(Pt,S&1),t===null)return fa(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(N=x.children,t=x.fallback,C?(x=n.mode,C=n.child,N={mode:"hidden",children:N},(x&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=N):C=ws(N,x,0,null),t=yn(t,x,o,null),C.return=n,t.return=n,C.sibling=t,n.child=C,n.child.memoizedState=Oa(o),n.memoizedState=Fa,t):za(n,N));if(S=t.memoizedState,S!==null&&($=S.dehydrated,$!==null))return Zu(t,n,N,x,$,S,o);if(C){C=x.fallback,N=n.mode,S=t.child,$=S.sibling;var re={mode:"hidden",children:x.children};return(N&1)===0&&n.child!==S?(x=n.child,x.childLanes=0,x.pendingProps=re,n.deletions=null):(x=nn(S,re),x.subtreeFlags=S.subtreeFlags&14680064),$!==null?C=nn($,C):(C=yn(C,N,o,null),C.flags|=2),C.return=n,x.return=n,x.sibling=C,n.child=x,x=C,C=n.child,N=t.child.memoizedState,N=N===null?Oa(o):{baseLanes:N.baseLanes|o,cachePool:null,transitions:N.transitions},C.memoizedState=N,C.childLanes=t.childLanes&~o,n.memoizedState=Fa,x}return C=t.child,t=C.sibling,x=nn(C,{mode:"visible",children:x.children}),(n.mode&1)===0&&(x.lanes=o),x.return=n,x.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=x,n.memoizedState=null,x}function za(t,n){return n=ws({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ls(t,n,o,x){return x!==null&&pa(x),Nn(n,t.child,null,o),t=za(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Zu(t,n,o,x,S,C,N){if(o)return n.flags&256?(n.flags&=-257,x=Da(Error(i(422))),ls(t,n,N,x)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(C=x.fallback,S=n.mode,x=ws({mode:"visible",children:x.children},S,0,null),C=yn(C,S,N,null),C.flags|=2,x.return=n,C.return=n,x.sibling=C,n.child=x,(n.mode&1)!==0&&Nn(n,t.child,null,N),n.child.memoizedState=Oa(N),n.memoizedState=Fa,C);if((n.mode&1)===0)return ls(t,n,N,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var $=x.dgst;return x=$,C=Error(i(419)),x=Da(C,x,void 0),ls(t,n,N,x)}if($=(N&t.childLanes)!==0,tr||$){if(x=qt,x!==null){switch(N&-N){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|N))!==0?0:S,S!==0&&S!==C.retryLane&&(C.retryLane=S,Ir(t,S),Er(x,t,S,-1))}return ro(),x=Da(Error(i(421))),ls(t,n,N,x)}return S.data==="$?"?(n.flags|=128,n.child=t.child,n=fd.bind(null,t),S._reactRetry=n,null):(t=C.treeContext,lr=Hr(S.nextSibling),or=n,At=!0,xr=null,t!==null&&(ur[dr++]=Ar,ur[dr++]=Pr,ur[dr++]=cn,Ar=t.id,Pr=t.overflow,cn=n),n=za(n,x.children),n.flags|=4096,n)}function oc(t,n,o){t.lanes|=n;var x=t.alternate;x!==null&&(x.lanes|=n),xa(t.return,n,o)}function Ua(t,n,o,x,S){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:x,tail:o,tailMode:S}:(C.isBackwards=n,C.rendering=null,C.renderingStartTime=0,C.last=x,C.tail=o,C.tailMode=S)}function lc(t,n,o){var x=n.pendingProps,S=x.revealOrder,C=x.tail;if(Qt(t,n,x.children,o),x=Pt.current,(x&2)!==0)x=x&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oc(t,o,n);else if(t.tag===19)oc(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}x&=1}if(jt(Pt,x),(n.mode&1)===0)n.memoizedState=null;else switch(S){case"forwards":for(o=n.child,S=null;o!==null;)t=o.alternate,t!==null&&ts(t)===null&&(S=o),o=o.sibling;o=S,o===null?(S=n.child,n.child=null):(S=o.sibling,o.sibling=null),Ua(n,!1,S,o,C);break;case"backwards":for(o=null,S=n.child,n.child=null;S!==null;){if(t=S.alternate,t!==null&&ts(t)===null){n.child=S;break}t=S.sibling,S.sibling=o,o=S,S=t}Ua(n,!0,o,null,C);break;case"together":Ua(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function cs(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Dr(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),mn|=n.lanes,(o&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,o=nn(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=nn(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function Ju(t,n,o){switch(n.tag){case 3:ic(n),In();break;case 5:wl(n);break;case 1:er(n.type)&&$i(n);break;case 4:ba(n,n.stateNode.containerInfo);break;case 10:var x=n.type._context,S=n.memoizedProps.value;jt(Qi,x._currentValue),x._currentValue=S;break;case 13:if(x=n.memoizedState,x!==null)return x.dehydrated!==null?(jt(Pt,Pt.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?ac(t,n,o):(jt(Pt,Pt.current&1),t=Dr(t,n,o),t!==null?t.sibling:null);jt(Pt,Pt.current&1);break;case 19:if(x=(o&n.childLanes)!==0,(t.flags&128)!==0){if(x)return lc(t,n,o);n.flags|=128}if(S=n.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),jt(Pt,Pt.current),x)break;return null;case 22:case 23:return n.lanes=0,tc(t,n,o)}return Dr(t,n,o)}var cc,qa,uc,dc;cc=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},qa=function(){},uc=function(t,n,o,x){var S=t.memoizedProps;if(S!==x){t=n.stateNode,fn(Rr.current);var C=null;switch(o){case"input":S=ee(t,S),x=ee(t,x),C=[];break;case"select":S=F({},S,{value:void 0}),x=F({},x,{value:void 0}),C=[];break;case"textarea":S=Te(t,S),x=Te(t,x),C=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(t.onclick=qi)}ht(o,x);var N;o=null;for(Ee in S)if(!x.hasOwnProperty(Ee)&&S.hasOwnProperty(Ee)&&S[Ee]!=null)if(Ee==="style"){var $=S[Ee];for(N in $)$.hasOwnProperty(N)&&(o||(o={}),o[N]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(a.hasOwnProperty(Ee)?C||(C=[]):(C=C||[]).push(Ee,null));for(Ee in x){var re=x[Ee];if($=S?.[Ee],x.hasOwnProperty(Ee)&&re!==$&&(re!=null||$!=null))if(Ee==="style")if($){for(N in $)!$.hasOwnProperty(N)||re&&re.hasOwnProperty(N)||(o||(o={}),o[N]="");for(N in re)re.hasOwnProperty(N)&&$[N]!==re[N]&&(o||(o={}),o[N]=re[N])}else o||(C||(C=[]),C.push(Ee,o)),o=re;else Ee==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,$=$?$.__html:void 0,re!=null&&$!==re&&(C=C||[]).push(Ee,re)):Ee==="children"?typeof re!="string"&&typeof re!="number"||(C=C||[]).push(Ee,""+re):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ee)?(re!=null&&Ee==="onScroll"&&Ct("scroll",t),C||$===re||(C=[])):(C=C||[]).push(Ee,re))}o&&(C=C||[]).push("style",o);var Ee=C;(n.updateQueue=Ee)&&(n.flags|=4)}},dc=function(t,n,o,x){o!==x&&(n.flags|=4)};function hi(t,n){if(!At)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var x=null;o!==null;)o.alternate!==null&&(x=o),o=o.sibling;x===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:x.sibling=null}}function Kt(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,x=0;if(n)for(var S=t.child;S!==null;)o|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=t,S=S.sibling;else for(S=t.child;S!==null;)o|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=t,S=S.sibling;return t.subtreeFlags|=x,t.childLanes=o,n}function ed(t,n,o){var x=n.pendingProps;switch(ua(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(n),null;case 1:return er(n.type)&&Wi(),Kt(n),null;case 3:return x=n.stateNode,Bn(),_t(Jt),_t(Gt),Sa(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(t===null||t.child===null)&&(Ki(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,xr!==null&&(Ja(xr),xr=null))),qa(t,n),Kt(n),null;case 5:Ea(n);var S=fn(ui.current);if(o=n.type,t!==null&&n.stateNode!=null)uc(t,n,o,x,S),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!x){if(n.stateNode===null)throw Error(i(166));return Kt(n),null}if(t=fn(Rr.current),Ki(n)){x=n.stateNode,o=n.type;var C=n.memoizedProps;switch(x[Sr]=n,x[si]=C,t=(n.mode&1)!==0,o){case"dialog":Ct("cancel",x),Ct("close",x);break;case"iframe":case"object":case"embed":Ct("load",x);break;case"video":case"audio":for(S=0;S<ri.length;S++)Ct(ri[S],x);break;case"source":Ct("error",x);break;case"img":case"image":case"link":Ct("error",x),Ct("load",x);break;case"details":Ct("toggle",x);break;case"input":pe(x,C),Ct("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!C.multiple},Ct("invalid",x);break;case"textarea":$e(x,C),Ct("invalid",x)}ht(o,C),S=null;for(var N in C)if(C.hasOwnProperty(N)){var $=C[N];N==="children"?typeof $=="string"?x.textContent!==$&&(C.suppressHydrationWarning!==!0&&Ui(x.textContent,$,t),S=["children",$]):typeof $=="number"&&x.textContent!==""+$&&(C.suppressHydrationWarning!==!0&&Ui(x.textContent,$,t),S=["children",""+$]):a.hasOwnProperty(N)&&$!=null&&N==="onScroll"&&Ct("scroll",x)}switch(o){case"input":He(x),je(x,C,!0);break;case"textarea":He(x),ft(x);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(x.onclick=qi)}x=S,n.updateQueue=x,x!==null&&(n.flags|=4)}else{N=S.nodeType===9?S:S.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=N.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof x.is=="string"?t=N.createElement(o,{is:x.is}):(t=N.createElement(o),o==="select"&&(N=t,x.multiple?N.multiple=!0:x.size&&(N.size=x.size))):t=N.createElementNS(t,o),t[Sr]=n,t[si]=x,cc(t,n,!1,!1),n.stateNode=t;e:{switch(N=yt(o,x),o){case"dialog":Ct("cancel",t),Ct("close",t),S=x;break;case"iframe":case"object":case"embed":Ct("load",t),S=x;break;case"video":case"audio":for(S=0;S<ri.length;S++)Ct(ri[S],t);S=x;break;case"source":Ct("error",t),S=x;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),S=x;break;case"details":Ct("toggle",t),S=x;break;case"input":pe(t,x),S=ee(t,x),Ct("invalid",t);break;case"option":S=x;break;case"select":t._wrapperState={wasMultiple:!!x.multiple},S=F({},x,{value:void 0}),Ct("invalid",t);break;case"textarea":$e(t,x),S=Te(t,x),Ct("invalid",t);break;default:S=x}ht(o,S),$=S;for(C in $)if($.hasOwnProperty(C)){var re=$[C];C==="style"?ct(t,re):C==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&A(t,re)):C==="children"?typeof re=="string"?(o!=="textarea"||re!=="")&&U(t,re):typeof re=="number"&&U(t,""+re):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(a.hasOwnProperty(C)?re!=null&&C==="onScroll"&&Ct("scroll",t):re!=null&&T(t,C,re,N))}switch(o){case"input":He(t),je(t,x,!1);break;case"textarea":He(t),ft(t);break;case"option":x.value!=null&&t.setAttribute("value",""+Z(x.value));break;case"select":t.multiple=!!x.multiple,C=x.value,C!=null?Pe(t,!!x.multiple,C,!1):x.defaultValue!=null&&Pe(t,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(t.onclick=qi)}switch(o){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Kt(n),null;case 6:if(t&&n.stateNode!=null)dc(t,n,t.memoizedProps,x);else{if(typeof x!="string"&&n.stateNode===null)throw Error(i(166));if(o=fn(ui.current),fn(Rr.current),Ki(n)){if(x=n.stateNode,o=n.memoizedProps,x[Sr]=n,(C=x.nodeValue!==o)&&(t=or,t!==null))switch(t.tag){case 3:Ui(x.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ui(x.nodeValue,o,(t.mode&1)!==0)}C&&(n.flags|=4)}else x=(o.nodeType===9?o:o.ownerDocument).createTextNode(x),x[Sr]=n,n.stateNode=x}return Kt(n),null;case 13:if(_t(Pt),x=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&lr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)ml(),In(),n.flags|=98560,C=!1;else if(C=Ki(n),x!==null&&x.dehydrated!==null){if(t===null){if(!C)throw Error(i(318));if(C=n.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[Sr]=n}else In(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),C=!1}else xr!==null&&(Ja(xr),xr=null),C=!0;if(!C)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(x=x!==null,x!==(t!==null&&t.memoizedState!==null)&&x&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Pt.current&1)!==0?zt===0&&(zt=3):ro())),n.updateQueue!==null&&(n.flags|=4),Kt(n),null);case 4:return Bn(),qa(t,n),t===null&&ni(n.stateNode.containerInfo),Kt(n),null;case 10:return ga(n.type._context),Kt(n),null;case 17:return er(n.type)&&Wi(),Kt(n),null;case 19:if(_t(Pt),C=n.memoizedState,C===null)return Kt(n),null;if(x=(n.flags&128)!==0,N=C.rendering,N===null)if(x)hi(C,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(N=ts(t),N!==null){for(n.flags|=128,hi(C,!1),x=N.updateQueue,x!==null&&(n.updateQueue=x,n.flags|=4),n.subtreeFlags=0,x=o,o=n.child;o!==null;)C=o,t=x,C.flags&=14680066,N=C.alternate,N===null?(C.childLanes=0,C.lanes=t,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=N.childLanes,C.lanes=N.lanes,C.child=N.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=N.memoizedProps,C.memoizedState=N.memoizedState,C.updateQueue=N.updateQueue,C.type=N.type,t=N.dependencies,C.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return jt(Pt,Pt.current&1|2),n.child}t=t.sibling}C.tail!==null&&xt()>zn&&(n.flags|=128,x=!0,hi(C,!1),n.lanes=4194304)}else{if(!x)if(t=ts(N),t!==null){if(n.flags|=128,x=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),hi(C,!0),C.tail===null&&C.tailMode==="hidden"&&!N.alternate&&!At)return Kt(n),null}else 2*xt()-C.renderingStartTime>zn&&o!==1073741824&&(n.flags|=128,x=!0,hi(C,!1),n.lanes=4194304);C.isBackwards?(N.sibling=n.child,n.child=N):(o=C.last,o!==null?o.sibling=N:n.child=N,C.last=N)}return C.tail!==null?(n=C.tail,C.rendering=n,C.tail=n.sibling,C.renderingStartTime=xt(),n.sibling=null,o=Pt.current,jt(Pt,x?o&1|2:o&1),n):(Kt(n),null);case 22:case 23:return to(),x=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==x&&(n.flags|=8192),x&&(n.mode&1)!==0?(cr&1073741824)!==0&&(Kt(n),n.subtreeFlags&6&&(n.flags|=8192)):Kt(n),null;case 24:return null;case 25:return null}throw Error(i(156,n.tag))}function td(t,n){switch(ua(n),n.tag){case 1:return er(n.type)&&Wi(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Bn(),_t(Jt),_t(Gt),Sa(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Ea(n),null;case 13:if(_t(Pt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));In()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return _t(Pt),null;case 4:return Bn(),null;case 10:return ga(n.type._context),null;case 22:case 23:return to(),null;case 24:return null;default:return null}}var us=!1,Yt=!1,rd=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Fn(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(x){Nt(t,n,x)}else o.current=null}function Va(t,n,o){try{o()}catch(x){Nt(t,n,x)}}var fc=!1;function nd(t,n){if(ta=Ai,t=Wo(),Gs(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var x=o.getSelection&&o.getSelection();if(x&&x.rangeCount!==0){o=x.anchorNode;var S=x.anchorOffset,C=x.focusNode;x=x.focusOffset;try{o.nodeType,C.nodeType}catch{o=null;break e}var N=0,$=-1,re=-1,Ee=0,Fe=0,ze=t,Le=null;t:for(;;){for(var et;ze!==o||S!==0&&ze.nodeType!==3||($=N+S),ze!==C||x!==0&&ze.nodeType!==3||(re=N+x),ze.nodeType===3&&(N+=ze.nodeValue.length),(et=ze.firstChild)!==null;)Le=ze,ze=et;for(;;){if(ze===t)break t;if(Le===o&&++Ee===S&&($=N),Le===C&&++Fe===x&&(re=N),(et=ze.nextSibling)!==null)break;ze=Le,Le=ze.parentNode}ze=et}o=$===-1||re===-1?null:{start:$,end:re}}else o=null}o=o||{start:0,end:0}}else o=null;for(ra={focusedElem:t,selectionRange:o},Ai=!1,rt=n;rt!==null;)if(n=rt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,rt=t;else for(;rt!==null;){n=rt;try{var it=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var st=it.memoizedProps,Bt=it.memoizedState,me=n.stateNode,ie=me.getSnapshotBeforeUpdate(n.elementType===n.type?st:yr(n.type,st),Bt);me.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var xe=n.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Ve){Nt(n,n.return,Ve)}if(t=n.sibling,t!==null){t.return=n.return,rt=t;break}rt=n.return}return it=fc,fc=!1,it}function gi(t,n,o){var x=n.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&t)===t){var C=S.destroy;S.destroy=void 0,C!==void 0&&Va(n,o,C)}S=S.next}while(S!==x)}}function ds(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var x=o.create;o.destroy=x()}o=o.next}while(o!==n)}}function Wa(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function pc(t){var n=t.alternate;n!==null&&(t.alternate=null,pc(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Sr],delete n[si],delete n[aa],delete n[Ou],delete n[zu])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mc(t){return t.tag===5||t.tag===3||t.tag===4}function hc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $a(t,n,o){var x=t.tag;if(x===5||x===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=qi));else if(x!==4&&(t=t.child,t!==null))for($a(t,n,o),t=t.sibling;t!==null;)$a(t,n,o),t=t.sibling}function Ha(t,n,o){var x=t.tag;if(x===5||x===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(x!==4&&(t=t.child,t!==null))for(Ha(t,n,o),t=t.sibling;t!==null;)Ha(t,n,o),t=t.sibling}var Wt=null,vr=!1;function Zr(t,n,o){for(o=o.child;o!==null;)gc(t,n,o),o=o.sibling}function gc(t,n,o){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(vn,o)}catch{}switch(o.tag){case 5:Yt||Fn(o,n);case 6:var x=Wt,S=vr;Wt=null,Zr(t,n,o),Wt=x,vr=S,Wt!==null&&(vr?(t=Wt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Wt.removeChild(o.stateNode));break;case 18:Wt!==null&&(vr?(t=Wt,o=o.stateNode,t.nodeType===8?sa(t.parentNode,o):t.nodeType===1&&sa(t,o),Xn(t)):sa(Wt,o.stateNode));break;case 4:x=Wt,S=vr,Wt=o.stateNode.containerInfo,vr=!0,Zr(t,n,o),Wt=x,vr=S;break;case 0:case 11:case 14:case 15:if(!Yt&&(x=o.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var C=S,N=C.destroy;C=C.tag,N!==void 0&&((C&2)!==0||(C&4)!==0)&&Va(o,n,N),S=S.next}while(S!==x)}Zr(t,n,o);break;case 1:if(!Yt&&(Fn(o,n),x=o.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=o.memoizedProps,x.state=o.memoizedState,x.componentWillUnmount()}catch($){Nt(o,n,$)}Zr(t,n,o);break;case 21:Zr(t,n,o);break;case 22:o.mode&1?(Yt=(x=Yt)||o.memoizedState!==null,Zr(t,n,o),Yt=x):Zr(t,n,o);break;default:Zr(t,n,o)}}function xc(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new rd),n.forEach(function(x){var S=pd.bind(null,t,x);o.has(x)||(o.add(x),x.then(S,S))})}}function br(t,n){var o=n.deletions;if(o!==null)for(var x=0;x<o.length;x++){var S=o[x];try{var C=t,N=n,$=N;e:for(;$!==null;){switch($.tag){case 5:Wt=$.stateNode,vr=!1;break e;case 3:Wt=$.stateNode.containerInfo,vr=!0;break e;case 4:Wt=$.stateNode.containerInfo,vr=!0;break e}$=$.return}if(Wt===null)throw Error(i(160));gc(C,N,S),Wt=null,vr=!1;var re=S.alternate;re!==null&&(re.return=null),S.return=null}catch(Ee){Nt(S,n,Ee)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)yc(n,t),n=n.sibling}function yc(t,n){var o=t.alternate,x=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(br(n,t),kr(t),x&4){try{gi(3,t,t.return),ds(3,t)}catch(st){Nt(t,t.return,st)}try{gi(5,t,t.return)}catch(st){Nt(t,t.return,st)}}break;case 1:br(n,t),kr(t),x&512&&o!==null&&Fn(o,o.return);break;case 5:if(br(n,t),kr(t),x&512&&o!==null&&Fn(o,o.return),t.flags&32){var S=t.stateNode;try{U(S,"")}catch(st){Nt(t,t.return,st)}}if(x&4&&(S=t.stateNode,S!=null)){var C=t.memoizedProps,N=o!==null?o.memoizedProps:C,$=t.type,re=t.updateQueue;if(t.updateQueue=null,re!==null)try{$==="input"&&C.type==="radio"&&C.name!=null&&be(S,C),yt($,N);var Ee=yt($,C);for(N=0;N<re.length;N+=2){var Fe=re[N],ze=re[N+1];Fe==="style"?ct(S,ze):Fe==="dangerouslySetInnerHTML"?A(S,ze):Fe==="children"?U(S,ze):T(S,Fe,ze,Ee)}switch($){case"input":Re(S,C);break;case"textarea":gt(S,C);break;case"select":var Le=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!C.multiple;var et=C.value;et!=null?Pe(S,!!C.multiple,et,!1):Le!==!!C.multiple&&(C.defaultValue!=null?Pe(S,!!C.multiple,C.defaultValue,!0):Pe(S,!!C.multiple,C.multiple?[]:"",!1))}S[si]=C}catch(st){Nt(t,t.return,st)}}break;case 6:if(br(n,t),kr(t),x&4){if(t.stateNode===null)throw Error(i(162));S=t.stateNode,C=t.memoizedProps;try{S.nodeValue=C}catch(st){Nt(t,t.return,st)}}break;case 3:if(br(n,t),kr(t),x&4&&o!==null&&o.memoizedState.isDehydrated)try{Xn(n.containerInfo)}catch(st){Nt(t,t.return,st)}break;case 4:br(n,t),kr(t);break;case 13:br(n,t),kr(t),S=t.child,S.flags&8192&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(Ka=xt())),x&4&&xc(t);break;case 22:if(Fe=o!==null&&o.memoizedState!==null,t.mode&1?(Yt=(Ee=Yt)||Fe,br(n,t),Yt=Ee):br(n,t),kr(t),x&8192){if(Ee=t.memoizedState!==null,(t.stateNode.isHidden=Ee)&&!Fe&&(t.mode&1)!==0)for(rt=t,Fe=t.child;Fe!==null;){for(ze=rt=Fe;rt!==null;){switch(Le=rt,et=Le.child,Le.tag){case 0:case 11:case 14:case 15:gi(4,Le,Le.return);break;case 1:Fn(Le,Le.return);var it=Le.stateNode;if(typeof it.componentWillUnmount=="function"){x=Le,o=Le.return;try{n=x,it.props=n.memoizedProps,it.state=n.memoizedState,it.componentWillUnmount()}catch(st){Nt(x,o,st)}}break;case 5:Fn(Le,Le.return);break;case 22:if(Le.memoizedState!==null){Ec(ze);continue}}et!==null?(et.return=Le,rt=et):Ec(ze)}Fe=Fe.sibling}e:for(Fe=null,ze=t;;){if(ze.tag===5){if(Fe===null){Fe=ze;try{S=ze.stateNode,Ee?(C=S.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):($=ze.stateNode,re=ze.memoizedProps.style,N=re!=null&&re.hasOwnProperty("display")?re.display:null,$.style.display=ke("display",N))}catch(st){Nt(t,t.return,st)}}}else if(ze.tag===6){if(Fe===null)try{ze.stateNode.nodeValue=Ee?"":ze.memoizedProps}catch(st){Nt(t,t.return,st)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===t)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===t)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===t)break e;Fe===ze&&(Fe=null),ze=ze.return}Fe===ze&&(Fe=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:br(n,t),kr(t),x&4&&xc(t);break;case 21:break;default:br(n,t),kr(t)}}function kr(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(mc(o)){var x=o;break e}o=o.return}throw Error(i(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(U(S,""),x.flags&=-33);var C=hc(t);Ha(t,C,S);break;case 3:case 4:var N=x.stateNode.containerInfo,$=hc(t);$a(t,$,N);break;default:throw Error(i(161))}}catch(re){Nt(t,t.return,re)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function sd(t,n,o){rt=t,vc(t)}function vc(t,n,o){for(var x=(t.mode&1)!==0;rt!==null;){var S=rt,C=S.child;if(S.tag===22&&x){var N=S.memoizedState!==null||us;if(!N){var $=S.alternate,re=$!==null&&$.memoizedState!==null||Yt;$=us;var Ee=Yt;if(us=N,(Yt=re)&&!Ee)for(rt=S;rt!==null;)N=rt,re=N.child,N.tag===22&&N.memoizedState!==null?wc(S):re!==null?(re.return=N,rt=re):wc(S);for(;C!==null;)rt=C,vc(C),C=C.sibling;rt=S,us=$,Yt=Ee}bc(t)}else(S.subtreeFlags&8772)!==0&&C!==null?(C.return=S,rt=C):bc(t)}}function bc(t){for(;rt!==null;){var n=rt;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Yt||ds(5,n);break;case 1:var x=n.stateNode;if(n.flags&4&&!Yt)if(o===null)x.componentDidMount();else{var S=n.elementType===n.type?o.memoizedProps:yr(n.type,o.memoizedProps);x.componentDidUpdate(S,o.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var C=n.updateQueue;C!==null&&El(n,C,x);break;case 3:var N=n.updateQueue;if(N!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}El(n,N,o)}break;case 5:var $=n.stateNode;if(o===null&&n.flags&4){o=$;var re=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&o.focus();break;case"img":re.src&&(o.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Ee=n.alternate;if(Ee!==null){var Fe=Ee.memoizedState;if(Fe!==null){var ze=Fe.dehydrated;ze!==null&&Xn(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Yt||n.flags&512&&Wa(n)}catch(Le){Nt(n,n.return,Le)}}if(n===t){rt=null;break}if(o=n.sibling,o!==null){o.return=n.return,rt=o;break}rt=n.return}}function Ec(t){for(;rt!==null;){var n=rt;if(n===t){rt=null;break}var o=n.sibling;if(o!==null){o.return=n.return,rt=o;break}rt=n.return}}function wc(t){for(;rt!==null;){var n=rt;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{ds(4,n)}catch(re){Nt(n,o,re)}break;case 1:var x=n.stateNode;if(typeof x.componentDidMount=="function"){var S=n.return;try{x.componentDidMount()}catch(re){Nt(n,S,re)}}var C=n.return;try{Wa(n)}catch(re){Nt(n,C,re)}break;case 5:var N=n.return;try{Wa(n)}catch(re){Nt(n,N,re)}}}catch(re){Nt(n,n.return,re)}if(n===t){rt=null;break}var $=n.sibling;if($!==null){$.return=n.return,rt=$;break}rt=n.return}}var ad=Math.ceil,fs=k.ReactCurrentDispatcher,Ga=k.ReactCurrentOwner,mr=k.ReactCurrentBatchConfig,wt=0,qt=null,Lt=null,$t=0,cr=0,On=Gr(0),zt=0,xi=null,mn=0,ps=0,Xa=0,yi=null,rr=null,Ka=0,zn=1/0,Mr=null,hs=!1,Ya=null,Jr=null,gs=!1,en=null,xs=0,vi=0,Qa=null,ys=-1,vs=0;function Zt(){return(wt&6)!==0?xt():ys!==-1?ys:ys=xt()}function tn(t){return(t.mode&1)===0?1:(wt&2)!==0&&$t!==0?$t&-$t:qu.transition!==null?(vs===0&&(vs=ho()),vs):(t=kt,t!==0||(t=window.event,t=t===void 0?16:Ro(t.type)),t)}function Er(t,n,o,x){if(50<vi)throw vi=0,Qa=null,Error(i(185));Vn(t,o,x),((wt&2)===0||t!==qt)&&(t===qt&&((wt&2)===0&&(ps|=o),zt===4&&rn(t,$t)),nr(t,x),o===1&&wt===0&&(n.mode&1)===0&&(zn=xt()+500,Hi&&Kr()))}function nr(t,n){var o=t.callbackNode;qc(t,n);var x=ji(t,t===qt?$t:0);if(x===0)o!==null&&Et(o),t.callbackNode=null,t.callbackPriority=0;else if(n=x&-x,t.callbackPriority!==n){if(o!=null&&Et(o),n===1)t.tag===0?Uu(Rc.bind(null,t)):cl(Rc.bind(null,t)),Lu(function(){(wt&6)===0&&Kr()}),o=null;else{switch(go(x)){case 1:o=Ft;break;case 4:o=jr;break;case 16:o=wr;break;case 536870912:o=Ri;break;default:o=wr}o=Ic(o,Sc.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function Sc(t,n){if(ys=-1,vs=0,(wt&6)!==0)throw Error(i(327));var o=t.callbackNode;if(Un()&&t.callbackNode!==o)return null;var x=ji(t,t===qt?$t:0);if(x===0)return null;if((x&30)!==0||(x&t.expiredLanes)!==0||n)n=bs(t,x);else{n=x;var S=wt;wt|=2;var C=kc();(qt!==t||$t!==n)&&(Mr=null,zn=xt()+500,gn(t,n));do try{cd();break}catch($){Tc(t,$)}while(!0);ha(),fs.current=C,wt=S,Lt!==null?n=0:(qt=null,$t=0,n=zt)}if(n!==0){if(n===2&&(S=Ps(t),S!==0&&(x=S,n=Za(t,S))),n===1)throw o=xi,gn(t,0),rn(t,x),nr(t,xt()),o;if(n===6)rn(t,x);else{if(S=t.current.alternate,(x&30)===0&&!od(S)&&(n=bs(t,x),n===2&&(C=Ps(t),C!==0&&(x=C,n=Za(t,C))),n===1))throw o=xi,gn(t,0),rn(t,x),nr(t,xt()),o;switch(t.finishedWork=S,t.finishedLanes=x,n){case 0:case 1:throw Error(i(345));case 2:xn(t,rr,Mr);break;case 3:if(rn(t,x),(x&130023424)===x&&(n=Ka+500-xt(),10<n)){if(ji(t,0)!==0)break;if(S=t.suspendedLanes,(S&x)!==x){Zt(),t.pingedLanes|=t.suspendedLanes&S;break}t.timeoutHandle=ia(xn.bind(null,t,rr,Mr),n);break}xn(t,rr,Mr);break;case 4:if(rn(t,x),(x&4194240)===x)break;for(n=t.eventTimes,S=-1;0<x;){var N=31-sr(x);C=1<<N,N=n[N],N>S&&(S=N),x&=~C}if(x=S,x=xt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*ad(x/1960))-x,10<x){t.timeoutHandle=ia(xn.bind(null,t,rr,Mr),x);break}xn(t,rr,Mr);break;case 5:xn(t,rr,Mr);break;default:throw Error(i(329))}}}return nr(t,xt()),t.callbackNode===o?Sc.bind(null,t):null}function Za(t,n){var o=yi;return t.current.memoizedState.isDehydrated&&(gn(t,n).flags|=256),t=bs(t,n),t!==2&&(n=rr,rr=o,n!==null&&Ja(n)),t}function Ja(t){rr===null?rr=t:rr.push.apply(rr,t)}function od(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var x=0;x<o.length;x++){var S=o[x],C=S.getSnapshot;S=S.value;try{if(!gr(C(),S))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function rn(t,n){for(n&=~Xa,n&=~ps,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-sr(n),x=1<<o;t[o]=-1,n&=~x}}function Rc(t){if((wt&6)!==0)throw Error(i(327));Un();var n=ji(t,0);if((n&1)===0)return nr(t,xt()),null;var o=bs(t,n);if(t.tag!==0&&o===2){var x=Ps(t);x!==0&&(n=x,o=Za(t,x))}if(o===1)throw o=xi,gn(t,0),rn(t,n),nr(t,xt()),o;if(o===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,xn(t,rr,Mr),nr(t,xt()),null}function eo(t,n){var o=wt;wt|=1;try{return t(n)}finally{wt=o,wt===0&&(zn=xt()+500,Hi&&Kr())}}function hn(t){en!==null&&en.tag===0&&(wt&6)===0&&Un();var n=wt;wt|=1;var o=mr.transition,x=kt;try{if(mr.transition=null,kt=1,t)return t()}finally{kt=x,mr.transition=o,wt=n,(wt&6)===0&&Kr()}}function to(){cr=On.current,_t(On)}function gn(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,Bu(o)),Lt!==null)for(o=Lt.return;o!==null;){var x=o;switch(ua(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Wi();break;case 3:Bn(),_t(Jt),_t(Gt),Sa();break;case 5:Ea(x);break;case 4:Bn();break;case 13:_t(Pt);break;case 19:_t(Pt);break;case 10:ga(x.type._context);break;case 22:case 23:to()}o=o.return}if(qt=t,Lt=t=nn(t.current,null),$t=cr=n,zt=0,xi=null,Xa=ps=mn=0,rr=yi=null,dn!==null){for(n=0;n<dn.length;n++)if(o=dn[n],x=o.interleaved,x!==null){o.interleaved=null;var S=x.next,C=o.pending;if(C!==null){var N=C.next;C.next=S,x.next=N}o.pending=x}dn=null}return t}function Tc(t,n){do{var o=Lt;try{if(ha(),rs.current=as,ns){for(var x=It.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}ns=!1}if(pn=0,Ut=Ot=It=null,di=!1,fi=0,Ga.current=null,o===null||o.return===null){zt=1,xi=n,Lt=null;break}e:{var C=t,N=o.return,$=o,re=n;if(n=$t,$.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ee=re,Fe=$,ze=Fe.tag;if((Fe.mode&1)===0&&(ze===0||ze===11||ze===15)){var Le=Fe.alternate;Le?(Fe.updateQueue=Le.updateQueue,Fe.memoizedState=Le.memoizedState,Fe.lanes=Le.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var et=Yl(N);if(et!==null){et.flags&=-257,Ql(et,N,$,C,n),et.mode&1&&Kl(C,Ee,n),n=et,re=Ee;var it=n.updateQueue;if(it===null){var st=new Set;st.add(re),n.updateQueue=st}else it.add(re);break e}else{if((n&1)===0){Kl(C,Ee,n),ro();break e}re=Error(i(426))}}else if(At&&$.mode&1){var Bt=Yl(N);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),Ql(Bt,N,$,C,n),pa(Ln(re,$));break e}}C=re=Ln(re,$),zt!==4&&(zt=2),yi===null?yi=[C]:yi.push(C),C=N;do{switch(C.tag){case 3:C.flags|=65536,n&=-n,C.lanes|=n;var me=Gl(C,re,n);bl(C,me);break e;case 1:$=re;var ie=C.type,xe=C.stateNode;if((C.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Jr===null||!Jr.has(xe)))){C.flags|=65536,n&=-n,C.lanes|=n;var Ve=Xl(C,$,n);bl(C,Ve);break e}}C=C.return}while(C!==null)}Cc(o)}catch(at){n=at,Lt===o&&o!==null&&(Lt=o=o.return);continue}break}while(!0)}function kc(){var t=fs.current;return fs.current=as,t===null?as:t}function ro(){(zt===0||zt===3||zt===2)&&(zt=4),qt===null||(mn&268435455)===0&&(ps&268435455)===0||rn(qt,$t)}function bs(t,n){var o=wt;wt|=2;var x=kc();(qt!==t||$t!==n)&&(Mr=null,gn(t,n));do try{ld();break}catch(S){Tc(t,S)}while(!0);if(ha(),wt=o,fs.current=x,Lt!==null)throw Error(i(261));return qt=null,$t=0,zt}function ld(){for(;Lt!==null;)jc(Lt)}function cd(){for(;Lt!==null&&!Dt();)jc(Lt)}function jc(t){var n=Pc(t.alternate,t,cr);t.memoizedProps=t.pendingProps,n===null?Cc(t):Lt=n,Ga.current=null}function Cc(t){var n=t;do{var o=n.alternate;if(t=n.return,(n.flags&32768)===0){if(o=ed(o,n,cr),o!==null){Lt=o;return}}else{if(o=td(o,n),o!==null){o.flags&=32767,Lt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Lt=null;return}}if(n=n.sibling,n!==null){Lt=n;return}Lt=n=t}while(n!==null);zt===0&&(zt=5)}function xn(t,n,o){var x=kt,S=mr.transition;try{mr.transition=null,kt=1,ud(t,n,o,x)}finally{mr.transition=S,kt=x}return null}function ud(t,n,o,x){do Un();while(en!==null);if((wt&6)!==0)throw Error(i(327));o=t.finishedWork;var S=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var C=o.lanes|o.childLanes;if(Vc(t,C),t===qt&&(Lt=qt=null,$t=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||gs||(gs=!0,Ic(wr,function(){return Un(),null})),C=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||C){C=mr.transition,mr.transition=null;var N=kt;kt=1;var $=wt;wt|=4,Ga.current=null,nd(t,o),yc(o,t),_u(ra),Ai=!!ta,ra=ta=null,t.current=o,sd(o),Mt(),wt=$,kt=N,mr.transition=C}else t.current=o;if(gs&&(gs=!1,en=t,xs=S),C=t.pendingLanes,C===0&&(Jr=null),_s(o.stateNode),nr(t,xt()),n!==null)for(x=t.onRecoverableError,o=0;o<n.length;o++)S=n[o],x(S.value,{componentStack:S.stack,digest:S.digest});if(hs)throw hs=!1,t=Ya,Ya=null,t;return(xs&1)!==0&&t.tag!==0&&Un(),C=t.pendingLanes,(C&1)!==0?t===Qa?vi++:(vi=0,Qa=t):vi=0,Kr(),null}function Un(){if(en!==null){var t=go(xs),n=mr.transition,o=kt;try{if(mr.transition=null,kt=16>t?16:t,en===null)var x=!1;else{if(t=en,en=null,xs=0,(wt&6)!==0)throw Error(i(331));var S=wt;for(wt|=4,rt=t.current;rt!==null;){var C=rt,N=C.child;if((rt.flags&16)!==0){var $=C.deletions;if($!==null){for(var re=0;re<$.length;re++){var Ee=$[re];for(rt=Ee;rt!==null;){var Fe=rt;switch(Fe.tag){case 0:case 11:case 15:gi(8,Fe,C)}var ze=Fe.child;if(ze!==null)ze.return=Fe,rt=ze;else for(;rt!==null;){Fe=rt;var Le=Fe.sibling,et=Fe.return;if(pc(Fe),Fe===Ee){rt=null;break}if(Le!==null){Le.return=et,rt=Le;break}rt=et}}}var it=C.alternate;if(it!==null){var st=it.child;if(st!==null){it.child=null;do{var Bt=st.sibling;st.sibling=null,st=Bt}while(st!==null)}}rt=C}}if((C.subtreeFlags&2064)!==0&&N!==null)N.return=C,rt=N;else e:for(;rt!==null;){if(C=rt,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:gi(9,C,C.return)}var me=C.sibling;if(me!==null){me.return=C.return,rt=me;break e}rt=C.return}}var ie=t.current;for(rt=ie;rt!==null;){N=rt;var xe=N.child;if((N.subtreeFlags&2064)!==0&&xe!==null)xe.return=N,rt=xe;else e:for(N=ie;rt!==null;){if($=rt,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:ds(9,$)}}catch(at){Nt($,$.return,at)}if($===N){rt=null;break e}var Ve=$.sibling;if(Ve!==null){Ve.return=$.return,rt=Ve;break e}rt=$.return}}if(wt=S,Kr(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(vn,t)}catch{}x=!0}return x}finally{kt=o,mr.transition=n}}return!1}function _c(t,n,o){n=Ln(o,n),n=Gl(t,n,1),t=Qr(t,n,1),n=Zt(),t!==null&&(Vn(t,1,n),nr(t,n))}function Nt(t,n,o){if(t.tag===3)_c(t,t,o);else for(;n!==null;){if(n.tag===3){_c(n,t,o);break}else if(n.tag===1){var x=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Jr===null||!Jr.has(x))){t=Ln(o,t),t=Xl(n,t,1),n=Qr(n,t,1),t=Zt(),n!==null&&(Vn(n,1,t),nr(n,t));break}}n=n.return}}function dd(t,n,o){var x=t.pingCache;x!==null&&x.delete(n),n=Zt(),t.pingedLanes|=t.suspendedLanes&o,qt===t&&($t&o)===o&&(zt===4||zt===3&&($t&130023424)===$t&&500>xt()-Ka?gn(t,0):Xa|=o),nr(t,n)}function Ac(t,n){n===0&&((t.mode&1)===0?n=1:(n=ki,ki<<=1,(ki&130023424)===0&&(ki=4194304)));var o=Zt();t=Ir(t,n),t!==null&&(Vn(t,n,o),nr(t,o))}function fd(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),Ac(t,o)}function pd(t,n){var o=0;switch(t.tag){case 13:var x=t.stateNode,S=t.memoizedState;S!==null&&(o=S.retryLane);break;case 19:x=t.stateNode;break;default:throw Error(i(314))}x!==null&&x.delete(n),Ac(t,o)}var Pc;Pc=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||Jt.current)tr=!0;else{if((t.lanes&o)===0&&(n.flags&128)===0)return tr=!1,Ju(t,n,o);tr=(t.flags&131072)!==0}else tr=!1,At&&(n.flags&1048576)!==0&&ul(n,Xi,n.index);switch(n.lanes=0,n.tag){case 2:var x=n.type;cs(t,n),t=n.pendingProps;var S=_n(n,Gt.current);Mn(n,o),S=ka(null,n,x,t,S,o);var C=ja();return n.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,er(x)?(C=!0,$i(n)):C=!1,n.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,va(n),S.updater=os,n.stateNode=S,S._reactInternals=n,Na(n,x,t,o),n=La(null,n,x,!0,C,o)):(n.tag=0,At&&C&&ca(n),Qt(null,n,S,o),n=n.child),n;case 16:x=n.elementType;e:{switch(cs(t,n),t=n.pendingProps,S=x._init,x=S(x._payload),n.type=x,S=n.tag=hd(x),t=yr(x,t),S){case 0:n=Ba(null,n,x,t,o);break e;case 1:n=nc(null,n,x,t,o);break e;case 11:n=Zl(null,n,x,t,o);break e;case 14:n=Jl(null,n,x,yr(x.type,t),o);break e}throw Error(i(306,x,""))}return n;case 0:return x=n.type,S=n.pendingProps,S=n.elementType===x?S:yr(x,S),Ba(t,n,x,S,o);case 1:return x=n.type,S=n.pendingProps,S=n.elementType===x?S:yr(x,S),nc(t,n,x,S,o);case 3:e:{if(ic(n),t===null)throw Error(i(387));x=n.pendingProps,C=n.memoizedState,S=C.element,vl(t,n),es(n,x,null,o);var N=n.memoizedState;if(x=N.element,C.isDehydrated)if(C={element:x,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},n.updateQueue.baseState=C,n.memoizedState=C,n.flags&256){S=Ln(Error(i(423)),n),n=sc(t,n,x,o,S);break e}else if(x!==S){S=Ln(Error(i(424)),n),n=sc(t,n,x,o,S);break e}else for(lr=Hr(n.stateNode.containerInfo.firstChild),or=n,At=!0,xr=null,o=xl(n,null,x,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(In(),x===S){n=Dr(t,n,o);break e}Qt(t,n,x,o)}n=n.child}return n;case 5:return wl(n),t===null&&fa(n),x=n.type,S=n.pendingProps,C=t!==null?t.memoizedProps:null,N=S.children,na(x,S)?N=null:C!==null&&na(x,C)&&(n.flags|=32),rc(t,n),Qt(t,n,N,o),n.child;case 6:return t===null&&fa(n),null;case 13:return ac(t,n,o);case 4:return ba(n,n.stateNode.containerInfo),x=n.pendingProps,t===null?n.child=Nn(n,null,x,o):Qt(t,n,x,o),n.child;case 11:return x=n.type,S=n.pendingProps,S=n.elementType===x?S:yr(x,S),Zl(t,n,x,S,o);case 7:return Qt(t,n,n.pendingProps,o),n.child;case 8:return Qt(t,n,n.pendingProps.children,o),n.child;case 12:return Qt(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(x=n.type._context,S=n.pendingProps,C=n.memoizedProps,N=S.value,jt(Qi,x._currentValue),x._currentValue=N,C!==null)if(gr(C.value,N)){if(C.children===S.children&&!Jt.current){n=Dr(t,n,o);break e}}else for(C=n.child,C!==null&&(C.return=n);C!==null;){var $=C.dependencies;if($!==null){N=C.child;for(var re=$.firstContext;re!==null;){if(re.context===x){if(C.tag===1){re=Nr(-1,o&-o),re.tag=2;var Ee=C.updateQueue;if(Ee!==null){Ee=Ee.shared;var Fe=Ee.pending;Fe===null?re.next=re:(re.next=Fe.next,Fe.next=re),Ee.pending=re}}C.lanes|=o,re=C.alternate,re!==null&&(re.lanes|=o),xa(C.return,o,n),$.lanes|=o;break}re=re.next}}else if(C.tag===10)N=C.type===n.type?null:C.child;else if(C.tag===18){if(N=C.return,N===null)throw Error(i(341));N.lanes|=o,$=N.alternate,$!==null&&($.lanes|=o),xa(N,o,n),N=C.sibling}else N=C.child;if(N!==null)N.return=C;else for(N=C;N!==null;){if(N===n){N=null;break}if(C=N.sibling,C!==null){C.return=N.return,N=C;break}N=N.return}C=N}Qt(t,n,S.children,o),n=n.child}return n;case 9:return S=n.type,x=n.pendingProps.children,Mn(n,o),S=fr(S),x=x(S),n.flags|=1,Qt(t,n,x,o),n.child;case 14:return x=n.type,S=yr(x,n.pendingProps),S=yr(x.type,S),Jl(t,n,x,S,o);case 15:return ec(t,n,n.type,n.pendingProps,o);case 17:return x=n.type,S=n.pendingProps,S=n.elementType===x?S:yr(x,S),cs(t,n),n.tag=1,er(x)?(t=!0,$i(n)):t=!1,Mn(n,o),$l(n,x,S),Na(n,x,S,o),La(null,n,x,!0,t,o);case 19:return lc(t,n,o);case 22:return tc(t,n,o)}throw Error(i(156,n.tag))};function Ic(t,n){return Tt(t,n)}function md(t,n,o,x){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,n,o,x){return new md(t,n,o,x)}function no(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hd(t){if(typeof t=="function")return no(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===K)return 14}return 2}function nn(t,n){var o=t.alternate;return o===null?(o=hr(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Es(t,n,o,x,S,C){var N=2;if(x=t,typeof t=="function")no(t)&&(N=1);else if(typeof t=="string")N=5;else e:switch(t){case R:return yn(o.children,S,C,n);case I:N=8,S|=8;break;case H:return t=hr(12,o,n,S|2),t.elementType=H,t.lanes=C,t;case q:return t=hr(13,o,n,S),t.elementType=q,t.lanes=C,t;case ue:return t=hr(19,o,n,S),t.elementType=ue,t.lanes=C,t;case we:return ws(o,S,C,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:N=10;break e;case O:N=9;break e;case V:N=11;break e;case K:N=14;break e;case ce:N=16,x=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return n=hr(N,o,n,S),n.elementType=t,n.type=x,n.lanes=C,n}function yn(t,n,o,x){return t=hr(7,t,x,n),t.lanes=o,t}function ws(t,n,o,x){return t=hr(22,t,x,n),t.elementType=we,t.lanes=o,t.stateNode={isHidden:!1},t}function io(t,n,o){return t=hr(6,t,null,n),t.lanes=o,t}function so(t,n,o){return n=hr(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function gd(t,n,o,x,S){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Is(0),this.expirationTimes=Is(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Is(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function ao(t,n,o,x,S,C,N,$,re){return t=new gd(t,n,o,$,re),n===1?(n=1,C===!0&&(n|=8)):n=0,C=hr(3,null,null,n),t.current=C,C.stateNode=t,C.memoizedState={element:x,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},va(C),t}function xd(t,n,o){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:x==null?null:""+x,children:t,containerInfo:n,implementation:o}}function Nc(t){if(!t)return Xr;t=t._reactInternals;e:{if(De(t)!==t||t.tag!==1)throw Error(i(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(er(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(i(171))}if(t.tag===1){var o=t.type;if(er(o))return ol(t,o,n)}return n}function Dc(t,n,o,x,S,C,N,$,re){return t=ao(o,x,!0,t,S,C,N,$,re),t.context=Nc(null),o=t.current,x=Zt(),S=tn(o),C=Nr(x,S),C.callback=n??null,Qr(o,C,S),t.current.lanes=S,Vn(t,S,x),nr(t,x),t}function Ss(t,n,o,x){var S=n.current,C=Zt(),N=tn(S);return o=Nc(o),n.context===null?n.context=o:n.pendingContext=o,n=Nr(C,N),n.payload={element:t},x=x===void 0?null:x,x!==null&&(n.callback=x),t=Qr(S,n,N),t!==null&&(Er(t,S,N,C),Ji(t,S,N)),N}function Rs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mc(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function oo(t,n){Mc(t,n),(t=t.alternate)&&Mc(t,n)}function yd(){return null}var Bc=typeof reportError=="function"?reportError:function(t){console.error(t)};function lo(t){this._internalRoot=t}Ts.prototype.render=lo.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));Ss(t,n,null,null)},Ts.prototype.unmount=lo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;hn(function(){Ss(null,t,null,null)}),n[Cr]=null}};function Ts(t){this._internalRoot=t}Ts.prototype.unstable_scheduleHydration=function(t){if(t){var n=vo();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Vr.length&&n!==0&&n<Vr[o].priority;o++);Vr.splice(o,0,t),o===0&&wo(t)}};function co(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ks(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lc(){}function vd(t,n,o,x,S){if(S){if(typeof x=="function"){var C=x;x=function(){var Ee=Rs(N);C.call(Ee)}}var N=Dc(n,x,t,0,null,!1,!1,"",Lc);return t._reactRootContainer=N,t[Cr]=N.current,ni(t.nodeType===8?t.parentNode:t),hn(),N}for(;S=t.lastChild;)t.removeChild(S);if(typeof x=="function"){var $=x;x=function(){var Ee=Rs(re);$.call(Ee)}}var re=ao(t,0,!1,null,null,!1,!1,"",Lc);return t._reactRootContainer=re,t[Cr]=re.current,ni(t.nodeType===8?t.parentNode:t),hn(function(){Ss(n,re,o,x)}),re}function js(t,n,o,x,S){var C=o._reactRootContainer;if(C){var N=C;if(typeof S=="function"){var $=S;S=function(){var re=Rs(N);$.call(re)}}Ss(n,N,t,S)}else N=vd(o,n,t,S,x);return Rs(N)}xo=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=qn(n.pendingLanes);o!==0&&(Ns(n,o|1),nr(n,xt()),(wt&6)===0&&(zn=xt()+500,Kr()))}break;case 13:hn(function(){var x=Ir(t,1);if(x!==null){var S=Zt();Er(x,t,1,S)}}),oo(t,1)}},Ds=function(t){if(t.tag===13){var n=Ir(t,134217728);if(n!==null){var o=Zt();Er(n,t,134217728,o)}oo(t,134217728)}},yo=function(t){if(t.tag===13){var n=tn(t),o=Ir(t,n);if(o!==null){var x=Zt();Er(o,t,n,x)}oo(t,n)}},vo=function(){return kt},bo=function(t,n){var o=kt;try{return kt=t,n()}finally{kt=o}},ye=function(t,n,o){switch(n){case"input":if(Re(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var x=o[n];if(x!==t&&x.form===t.form){var S=Vi(x);if(!S)throw Error(i(90));ae(x),Re(x,S)}}}break;case"textarea":gt(t,o);break;case"select":n=o.value,n!=null&&Pe(t,!!o.multiple,n,!1)}},qe=eo,M=hn;var bd={usingClientEntryPoint:!1,Events:[ai,jn,Vi,Ue,Xe,eo]},bi={findFiberByHostInstance:on,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ed={bundleType:bi.bundleType,version:bi.version,rendererPackageName:bi.rendererPackageName,rendererConfig:bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ut(t),t===null?null:t.stateNode},findFiberByHostInstance:bi.findFiberByHostInstance||yd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{vn=Cs.inject(Ed),ir=Cs}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bd,reactDom_production_min.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!co(n))throw Error(i(200));return xd(t,n,null,o)},reactDom_production_min.createRoot=function(t,n){if(!co(t))throw Error(i(299));var o=!1,x="",S=Bc;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(x=n.identifierPrefix),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=ao(t,1,!1,null,null,o,!1,x,S),t[Cr]=n.current,ni(t.nodeType===8?t.parentNode:t),new lo(n)},reactDom_production_min.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=ut(n),t=t===null?null:t.stateNode,t},reactDom_production_min.flushSync=function(t){return hn(t)},reactDom_production_min.hydrate=function(t,n,o){if(!ks(n))throw Error(i(200));return js(null,t,n,!0,o)},reactDom_production_min.hydrateRoot=function(t,n,o){if(!co(t))throw Error(i(405));var x=o!=null&&o.hydratedSources||null,S=!1,C="",N=Bc;if(o!=null&&(o.unstable_strictMode===!0&&(S=!0),o.identifierPrefix!==void 0&&(C=o.identifierPrefix),o.onRecoverableError!==void 0&&(N=o.onRecoverableError)),n=Dc(n,null,t,1,o??null,S,!1,C,N),t[Cr]=n.current,ni(t),x)for(t=0;t<x.length;t++)o=x[t],S=o._getVersion,S=S(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,S]:n.mutableSourceEagerHydrationData.push(o,S);return new Ts(n)},reactDom_production_min.render=function(t,n,o){if(!ks(n))throw Error(i(200));return js(null,t,n,!1,o)},reactDom_production_min.unmountComponentAtNode=function(t){if(!ks(t))throw Error(i(40));return t._reactRootContainer?(hn(function(){js(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=eo,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(t,n,o,x){if(!ks(o))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return js(t,n,o,!1,x)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,s)=>s?s.toUpperCase():i.toLowerCase()),toPascalCase=e=>{const r=toCamelCase(e);return r.charAt(0).toUpperCase()+r.slice(1)},mergeClasses=(...e)=>e.filter((r,i,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===i).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:l,...u},h)=>reactExports.createElement("svg",{ref:h,...defaultAttributes,width:r,height:r,stroke:e,strokeWidth:s?Number(i)*24/Number(r):i,className:mergeClasses("lucide",a),...u},[...l.map(([d,p])=>reactExports.createElement(d,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(e,r)=>{const i=reactExports.forwardRef(({className:s,...a},c)=>reactExports.createElement(Icon,{ref:c,iconNode:r,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,s),...a}));return i.displayName=toPascalCase(e),i};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]],Album=createLucideIcon("album",__iconNode$L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$G);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Cloud=createLucideIcon("cloud",__iconNode$F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Download=createLucideIcon("download",__iconNode$C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],FolderOpen=createLucideIcon("folder-open",__iconNode$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Grid3x3=createLucideIcon("grid-3x3",__iconNode$A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Hammer=createLucideIcon("hammer",__iconNode$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],HardDrive=createLucideIcon("hard-drive",__iconNode$x);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("heart",__iconNode$w);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$u);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ListMusic=createLucideIcon("list-music",__iconNode$t);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$s);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Music=createLucideIcon("music",__iconNode$p);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]],Orbit=createLucideIcon("orbit",__iconNode$o);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pause=createLucideIcon("pause",__iconNode$n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$m);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$l);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Search=createLucideIcon("search",__iconNode$j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$i);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$h);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Shuffle=createLucideIcon("shuffle",__iconNode$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],SkipBack=createLucideIcon("skip-back",__iconNode$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],SlidersVertical=createLucideIcon("sliders-vertical",__iconNode$c);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$a);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserMinus=createLucideIcon("user-minus",__iconNode$5);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Users=createLucideIcon("users",__iconNode$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],VolumeX=createLucideIcon("volume-x",__iconNode$2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode);function SeismicMonitor({analyser:e,enabled:r}){const i=reactExports.useRef(null),s=reactExports.useRef(null),a=reactExports.useRef(null);return reactExports.useEffect(()=>{const c=i.current;if(!c)return;const l=()=>{const h=c.getBoundingClientRect(),d=window.devicePixelRatio||1;c.width=Math.max(1,Math.floor(h.width*d)),c.height=Math.max(1,Math.floor(h.height*d))};l();const u=new ResizeObserver(l);return u.observe(c),()=>u.disconnect()},[]),reactExports.useEffect(()=>{const c=i.current;if(!c)return;const l=c.getContext("2d");if(!l)return;let u=null;const h=.35,d=(g,E,v)=>{l.save(),l.strokeStyle="rgba(255,255,255,0.03)",l.lineWidth=Math.max(1,1),l.beginPath(),l.moveTo(g+v,E),l.arc(g,E,v,0,Math.PI*2),l.stroke(),l.restore()},p=(g,E,v,b)=>{l.save(),l.strokeStyle="rgba(211,47,47,0.32)",l.lineWidth=Math.max(2,2.5*b),l.beginPath(),l.moveTo(g-v,E),l.lineTo(g+v,E),l.moveTo(g,E-v),l.lineTo(g,E+v),l.stroke();const y=6,w=10*b;l.lineWidth=Math.max(.5,.75*b),l.strokeStyle="rgba(255,255,255,0.06)";for(let T=1;T<=y;T++){const k=v/y*T;l.beginPath(),l.moveTo(g+k,E-w/2),l.lineTo(g+k,E+w/2),l.stroke(),l.beginPath(),l.moveTo(g-k,E-w/2),l.lineTo(g-k,E+w/2),l.stroke(),l.beginPath(),l.moveTo(g-w/2,E+k),l.lineTo(g+w/2,E+k),l.stroke(),l.beginPath(),l.moveTo(g-w/2,E-k),l.lineTo(g+w/2,E-k),l.stroke()}l.fillStyle="rgba(255,255,255,0.08)",l.font=`${12*b}px mono`,l.textAlign="center",l.textBaseline="middle",l.fillText("+X",g+v-12*b,E-8*b),l.fillText("-X",g-v+12*b,E-8*b),l.fillText("+Y",g+14*b,E-v+12*b),l.fillText("-Y",g+14*b,E+v-12*b),l.restore()},f=()=>{const g=window.devicePixelRatio||1,E=c.width,v=c.height;l.clearRect(0,0,E,v);const b=E/2,y=v/2,w=Math.min(E,v)/g,T=Math.floor(w*.18)*g,_=60*g;let R=Math.floor(w*.45)*g+_,I=T+_;const H=Math.floor(w*.5)*g,B=4*g;R=Math.min(R,H-B),I=Math.min(I,R-8*g),d(b,y,R+6*g);const O=Math.min(R+70*g,H-B);p(b,y,O,g);const V=e.frequencyBinCount;(!a.current||a.current.length!==V)&&(a.current=new Uint8Array(V));const q=a.current,ue=new Uint8Array(q.buffer,q.byteOffset,q.byteLength);e.getByteFrequencyData(ue);const K=a.current,ce=Math.min(128,K.length);(!u||u.length!==ce)&&(u=new Float32Array(ce));const we=new Array(ce);for(let fe=0;fe<ce;fe++){const F=Math.floor(fe/ce*K.length),L=K[F]/255,Q=u[fe]||0,se=Q+(L-Q)*h;u[fe]=se,we[fe]=se}l.save(),l.translate(0,0),l.lineWidth=Math.max(1,1.5*g),l.strokeStyle="rgba(211,47,47,0.95)",l.fillStyle="rgba(211,47,47,0.9)",l.lineJoin="round",l.lineCap="round",l.beginPath();for(let fe=0;fe<ce;fe++){const F=fe/ce*Math.PI*2-Math.PI/2,L=we[fe],Q=I+L*(R-I),se=b+Math.cos(F)*Q,oe=y+Math.sin(F)*Q;fe===0?l.moveTo(se,oe):l.lineTo(se,oe)}l.closePath(),l.stroke();const W=Math.max(1*g,1.5);l.fillStyle="rgba(211,47,47,0.95)";for(let fe=0;fe<ce;fe++){const F=fe/ce*Math.PI*2-Math.PI/2,L=we[fe],Q=I+L*(R-I),se=b+Math.cos(F)*Q,oe=y+Math.sin(F)*Q;l.beginPath(),l.arc(se,oe,W,0,Math.PI*2),l.fill()}l.restore()},m=()=>{r&&e&&(f(),s.current=requestAnimationFrame(m))};return r&&e&&(s.current=requestAnimationFrame(m)),()=>{s.current&&cancelAnimationFrame(s.current),s.current=null}},[e,r]),r?e?jsxRuntimeExports.jsx("div",{className:"w-full h-full",style:{position:"relative"},children:jsxRuntimeExports.jsx("canvas",{ref:i,className:"w-full h-full block"})}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{color:"#9a9a9a"},children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{style:{width:48,height:48,borderRadius:8,backgroundColor:"rgba(255,255,255,0.03)",margin:"0 auto 8px"}}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",style:{color:"#e0e0e0"},children:"Seismic Analyzer"}),jsxRuntimeExports.jsx("div",{className:"text-xs mt-1",children:"Play audio to initialize the visualizer"})]})}):null}const ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:e}){const[r,i]=reactExports.useState(()=>{const l=localStorage.getItem("brick-theme");return l||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),s=r==="dark",a=s?{bg:{primary:"#1a1a1a",secondary:"#252525",tertiary:"#2a2a2a"},text:{primary:"#e0e0e0",secondary:"#a0a0a0",tertiary:"#666666"},accent:"#d32f2f",border:"#333333"}:{bg:{primary:"#ffffff",secondary:"#f8f8f8",tertiary:"#e8e8e8"},text:{primary:"#1a1a1a",secondary:"#666666",tertiary:"#999999"},accent:"#d32f2f",border:"#cccccc"};reactExports.useEffect(()=>{localStorage.setItem("brick-theme",r),document.documentElement.setAttribute("data-theme",r)},[r]);const c=()=>{i(l=>l==="dark"?"light":"dark")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:r,toggleTheme:c,isDark:s,colors:a},children:e})}function useTheme$1(){const e=reactExports.useContext(ThemeContext);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const PinkTierStorageKey="pink_tier_unlocked",ThemeEnabledStorageKey="pink_theme_enabled",PinkUnlockTimestampStorageKey="pink_unlock_ts",stateClassnames={SECURE:"wall-secure",SHAKING:"wall-shaking",COLLAPSED:"wall-collapsed",REBUILDING:"wall-rebuilding",CRACKED:"wall-cracked"},WallContext=reactExports.createContext(void 0),WallProvider=({children:e})=>{const[r,i]=reactExports.useState("SECURE"),[s,a]=reactExports.useState(!1),[c,l]=reactExports.useState(null),[u,h]=reactExports.useState(!0),d=reactExports.useRef([]),p=reactExports.useRef(!1),f=reactExports.useCallback(()=>{d.current.forEach(T=>window.clearTimeout(T)),d.current=[]},[]);reactExports.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.getItem(PinkTierStorageKey)==="true"&&(a(!0),i("CRACKED")),localStorage.getItem(ThemeEnabledStorageKey)==="false"&&h(!1)}catch(T){console.warn("Unable to read wall theme flags:",T)}},[]);const m=reactExports.useCallback(T=>{h(T);try{localStorage.setItem(ThemeEnabledStorageKey,T?"true":"false")}catch(k){console.warn("Unable to persist wall theme preference:",k)}},[]);reactExports.useEffect(()=>{if(typeof document>"u")return;const T=document.body,k=Object.values(stateClassnames);T.classList.remove(...k),T.classList.add(stateClassnames[r]);const _=u&&(s||r==="CRACKED");T.classList.toggle("theme-cracked",_)},[r,s,u]);const g=reactExports.useCallback(()=>{s||(f(),p.current=!1,i("SECURE"))},[f,s]),E=reactExports.useCallback(()=>{s||p.current||i(T=>T==="SECURE"?"SHAKING":T)},[s]),v=reactExports.useCallback(()=>{s||p.current||i(T=>T==="SHAKING"?"SECURE":T)},[s]),b=reactExports.useCallback(()=>{f(),p.current=!1,i("CRACKED"),a(!0);const T=Date.now();l(T),m(!0);try{localStorage.setItem(PinkTierStorageKey,"true"),localStorage.setItem(PinkUnlockTimestampStorageKey,String(T))}catch(k){console.warn("Unable to persist pink tier unlock flag:",k)}},[f,m]),y=reactExports.useCallback(()=>{if(s||p.current)return;p.current=!0,f(),i("COLLAPSED");const T=window.setTimeout(()=>{i("REBUILDING")},5e3),k=window.setTimeout(()=>{b()},8e3);d.current=[T,k]},[f,b,s]);reactExports.useEffect(()=>()=>f(),[f]);const w=reactExports.useMemo(()=>({wallState:r,pinkTierUnlocked:s,pinkUnlockTimestamp:c,themeEnabled:u,setThemeEnabled:m,startWarning:E,cancelWarning:v,triggerCollapse:y,resetToSecure:g}),[r,s,c,u,m,E,v,y,g]);return jsxRuntimeExports.jsx(WallContext.Provider,{value:w,children:e})},useWall=()=>{const e=reactExports.useContext(WallContext);if(!e)throw new Error("useWall must be used within a WallProvider");return e};function HeroCarousel({artists:e,onArtistPress:r}){const[i,s]=reactExports.useState(0),[a,c]=reactExports.useState(0),[l,u]=reactExports.useState(0),h=f=>{c(f.touches[0].clientX)},d=f=>{u(f.touches[0].clientX)},p=()=>{a-l>75&&s(f=>(f+1)%e.length),a-l<-75&&s(f=>(f-1+e.length)%e.length)};return e[i],jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden",style:{height:"40vh",minHeight:"320px",maxHeight:"450px"},onTouchStart:h,onTouchMove:d,onTouchEnd:p,children:[jsxRuntimeExports.jsx("div",{className:"flex h-full transition-transform duration-500 ease-out",style:{transform:`translateX(-${i*100}%)`},children:e.map(f=>jsxRuntimeExports.jsxs("div",{className:"w-full flex-shrink-0 relative cursor-pointer",onClick:()=>r(f.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-transform duration-700",style:{transform:`scale(${i===e.indexOf(f)?1:1.1})`},children:jsxRuntimeExports.jsx("img",{src:f.image,alt:f.name,className:"w-full h-full object-cover",style:{filter:"grayscale(20%) brightness(0.5)"}})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 70%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",border:"1px solid #d32f2f",backdropFilter:"blur(10px)"},children:[jsxRuntimeExports.jsx(Crown,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"CHOSEN ARTIST"})]})}),jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:f.name}),jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#cccccc",fontSize:"1rem"},children:f.genre}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#d32f2f",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6), 0 0 40px rgba(211, 47, 47, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:"#ffffff"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ffffff",fontSize:"0.8rem",fontWeight:600,letterSpacing:"0.05em"},children:"80% REVENUE SHARE ACTIVE"})]})}),jsxRuntimeExports.jsx("p",{className:"mono mt-3",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"TAP TO PLAY ESSENTIALS  HOLD TO VIEW PROFILE"})]})]},f.id))}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center gap-2",children:e.map((f,m)=>jsxRuntimeExports.jsx("button",{onClick:()=>s(m),className:"transition-all duration-200",style:{width:i===m?"24px":"8px",height:"8px",borderRadius:"4px",backgroundColor:i===m?"#e0e0e0":"rgba(224, 224, 224, 0.3)"}},m))})]})}function NetworkStories({connections:e,onStoryClick:r}){return jsxRuntimeExports.jsxs("div",{className:"px-6 py-4",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar",children:e.map(i=>jsxRuntimeExports.jsxs("button",{onClick:()=>r(i.id),className:"flex flex-col items-center gap-2 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #546e7a, #d32f2f)",padding:"3px"},children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full",style:{backgroundColor:"#1a1a1a"}})}),jsxRuntimeExports.jsx("img",{src:i.user.avatar,alt:i.user.name,className:"relative w-16 h-16 rounded-full object-cover",style:{border:"3px solid #1a1a1a"}}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 rounded-full border-2",style:{backgroundColor:"#d32f2f",borderColor:"#1a1a1a"}})]}),jsxRuntimeExports.jsx("span",{className:"text-center max-w-[70px] truncate",style:{color:"#cccccc",fontSize:"0.75rem"},children:i.user.name.split(" ")[0]})]},i.id))}),jsxRuntimeExports.jsx("style",{children:`
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `})]})}const ERROR_IMG_SRC="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ImageWithFallback(e){const[r,i]=reactExports.useState(!1),s=()=>{i(!0)},{src:a,alt:c,style:l,className:u,...h}=e;return r?jsxRuntimeExports.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:l,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-full",children:jsxRuntimeExports.jsx("img",{src:ERROR_IMG_SRC,alt:"Error loading image",...h,"data-original-url":a})})}):jsxRuntimeExports.jsx("img",{src:a,alt:c,className:u,style:l,...h,onError:s})}function BrickCard({playlist:e,isLocked:r=!1,onClick:i,onDelete:s,onCancelDelete:a,onConfirmDelete:c,size:l="medium",compact:u=!1,canDelete:h=!1,timeUntilDeletion:d}){const p={small:"w-full",medium:"w-full",large:"w-full col-span-2"},f=e.deletionQueuedAt!==void 0;return jsxRuntimeExports.jsxs("div",{onClick:i,className:`${p[l]} bg-[#252525] rounded-lg overflow-hidden cursor-pointer transition-all duration-200 hover:bg-[#2a2a2a] group relative`,style:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative w-full aspect-square",children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:e.customCoverImage||e.coverImage,alt:e.name,className:`w-full h-full object-cover ${r?"blur-xl":""}`}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 60%)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute top-3 left-3 right-3 flex justify-between items-start",children:[e.hiRes&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#c6a700] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#c6a700",fontSize:"0.7rem"},children:"Hi-Res"})}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),!e.isPublic&&jsxRuntimeExports.jsx("div",{className:"px-2 py-1 rounded border border-[#a0a0a0] bg-transparent backdrop-blur-sm",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Draft"})})]}),r&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{size:48,color:"#a0a0a0",strokeWidth:1.5})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-3 left-3",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem"},children:[e.trackCount," tracks"]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mb-1 truncate",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:e.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[e.creator&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:e.creator.avatar,alt:e.creator.name,className:"w-4 h-4 rounded-full"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:e.creator.name})]}),!e.creator&&jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"Your Collection"})]}),e.structuralIntegrity!==void 0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem"},children:"Structural Integrity"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:e.structuralIntegrity>=70?"#4caf50":"#d32f2f",fontSize:"0.7rem"},children:[e.structuralIntegrity,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-[#1a1a1a] rounded-full h-1",children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${e.structuralIntegrity}%`,background:e.structuralIntegrity>=70?"linear-gradient(to right, #4caf50, #8bc34a)":"linear-gradient(to right, #d32f2f, #b71c1c)"}})})]}),f&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:[jsxRuntimeExports.jsx("p",{className:"mono text-center text-sm mb-2",style:{color:"#d32f2f",fontSize:"0.7rem"},children:d}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:m=>{m.stopPropagation(),a?.(e.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #a0a0a0",color:"#a0a0a0"},children:"Cancel"}),h&&jsxRuntimeExports.jsx("button",{onClick:m=>{m.stopPropagation(),c?.(e.id)},className:"flex-1 py-1 px-2 rounded text-xs transition-all hover:scale-105",style:{backgroundColor:"#d32f2f",color:"#e0e0e0"},children:"Delete Now"})]})]}),!f&&s&&jsxRuntimeExports.jsxs("button",{onClick:m=>{m.stopPropagation(),s(e.id)},className:"w-full mt-3 py-2 px-3 rounded flex items-center justify-center gap-2 transition-all hover:bg-red-900/20",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f",color:"#d32f2f"},children:[jsxRuntimeExports.jsx(Trash2,{size:14}),jsxRuntimeExports.jsx("span",{className:"mono text-xs",children:"Delete Brick"})]})]})]})}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jsmediatags_min$1={exports:{}},jsmediatags_min=jsmediatags_min$1.exports,hasRequiredJsmediatags_min;function requireJsmediatags_min(){return hasRequiredJsmediatags_min||(hasRequiredJsmediatags_min=1,(function(e,r){var i=i||{};i.scope={},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.defineProperty=i.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,c){s!=Array.prototype&&s!=Object.prototype&&(s[a]=c.value)},i.getGlobal=function(s){return typeof window<"u"&&window===s?s:typeof commonjsGlobal<"u"&&commonjsGlobal!=null?commonjsGlobal:s},i.global=i.getGlobal(jsmediatags_min),i.polyfill=function(s,a,c,l){if(a){for(c=i.global,s=s.split("."),l=0;l<s.length-1;l++){var u=s[l];u in c||(c[u]={}),c=c[u]}s=s[s.length-1],l=c[s],a=a(l),a!=l&&a!=null&&i.defineProperty(c,s,{configurable:!0,writable:!0,value:a})}},i.polyfill("Object.setPrototypeOf",function(s){return s||(typeof"".__proto__!="object"?null:function(a,c){if(a.__proto__=c,a.__proto__!==c)throw new TypeError(a+" is not extensible");return a})},"es6","es5"),i.objectCreate=i.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(s){var a=function(){};return a.prototype=s,new a},i.construct=typeof Reflect<"u"&&Reflect.construct||function(s,a,c){return c===void 0&&(c=s),c=i.objectCreate(c.prototype||Object.prototype),Function.prototype.apply.call(s,c,a)||c},i.polyfill("Reflect.construct",function(s){return s||i.construct},"es6","es3"),(function(s){e.exports=s()})(function(){return(function(){function s(a,c,l){function u(p,f){if(!c[p]){if(!a[p]){var m=typeof commonjsRequire=="function"&&commonjsRequire;if(!f&&m)return m(p,!0);if(h)return h(p,!0);throw f=Error("Cannot find module '"+p+"'"),f.code="MODULE_NOT_FOUND",f}f=c[p]={exports:{}},a[p][0].call(f.exports,function(g){return u(a[p][1][g]||g)},f,f.exports,s,a,c,l)}return c[p].exports}for(var h=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<l.length;d++)u(l[d]);return u}return s})()({1:[function(s,a,c){},{}],2:[function(s,a,c){a.exports=XMLHttpRequest},{}],3:[function(s,a,c){function l(b){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(b)}function u(b,y){for(var w=0;w<y.length;w++){var T=y[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}function h(b,y,w){return y&&u(b.prototype,y),w&&u(b,w),b}function d(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),y&&p(b,y)}function p(b,y){return p=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w},p(b,y)}function f(b){var y=g();return function(){var w=E(b);if(y){var T=E(this).constructor;w=Reflect.construct(w,arguments,T)}else w=w.apply(this,arguments);return w=!w||l(w)!=="object"&&typeof w!="function"?m(this):w,w}}function m(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(b){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},E(b)}function v(b,y,w){return y in b?Object.defineProperty(b,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[y]=w,b}s=(function(b){function y(T){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");var k=w.call(this);return v(m(k),"_array",void 0),v(m(k),"_size",void 0),k._array=T,k._size=T.length,k._isInitialized=!0,k}d(y,b);var w=f(y);return h(y,[{key:"init",value:function(T){setTimeout(T.onSuccess,0)}},{key:"loadRange",value:function(T,k){setTimeout(k.onSuccess,0)}},{key:"getByteAt",value:function(T){if(T>=this._array.length)throw Error("Offset "+T+" hasn't been loaded yet.");return this._array[T]}}],[{key:"canReadFile",value:function(T){return Array.isArray(T)||typeof Buffer=="function"&&Buffer.isBuffer(T)}}]),y})(s("./MediaFileReader")),a.exports=s},{"./MediaFileReader":11}],4:[function(s,a,c){function l(y){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function u(y,w){for(var T=0;T<w.length;T++){var k=w[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}function h(y,w,T){return w&&u(y.prototype,w),T&&u(y,T),y}function d(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&p(y,w)}function p(y,w){return p=Object.setPrototypeOf||function(T,k){return T.__proto__=k,T},p(y,w)}function f(y){var w=g();return function(){var T=E(y);if(w){var k=E(this).constructor;T=Reflect.construct(T,arguments,k)}else T=T.apply(this,arguments);return T=!T||l(T)!=="object"&&typeof T!="function"?m(this):T,T}}function m(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(y){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},E(y)}function v(y,w,T){return w in y?Object.defineProperty(y,w,{value:T,enumerable:!0,configurable:!0,writable:!0}):y[w]=T,y}var b=s("./ChunkedFileData");s=(function(y){function w(k){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var _=T.call(this);return v(m(_),"_blob",void 0),v(m(_),"_fileData",void 0),_._blob=k,_._fileData=new b,_}d(w,y);var T=f(w);return h(w,[{key:"_init",value:function(k){this._size=this._blob.size,setTimeout(k.onSuccess,1)}},{key:"loadRange",value:function(k,_){var P=this,R=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,k[0],k[1]+1),I=new FileReader;I.onloadend=function(H){H=new Uint8Array(I.result),P._fileData.addData(k[0],H),_.onSuccess()},I.onerror=I.onabort=function(H){_.onError&&_.onError({type:"blob",info:I.error})},I.readAsArrayBuffer(R)}},{key:"getByteAt",value:function(k){return this._fileData.getByteAt(k)}}],[{key:"canReadFile",value:function(k){return typeof Blob<"u"&&k instanceof Blob||typeof File<"u"&&k instanceof File}}]),w})(s("./MediaFileReader")),a.exports=s},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(s,a,c){function l(h,d){for(var p=0;p<d.length;p++){var f=d[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}function u(h,d,p){return d&&l(h.prototype,d),p&&l(h,p),h}s=(function(){function h(){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0,this._fileData=[]}return u(h,[{key:"addData",value:function(d,p){var f=d+p.length-1,m=this._getChunkRange(d,f);if(m.startIx===-1)this._fileData.splice(m.insertIx||0,0,{offset:d,data:p});else{var g=this._fileData[m.startIx],E=this._fileData[m.endIx];f=f<E.offset+E.data.length-1;var v={offset:Math.min(d,g.offset),data:p};d>g.offset&&(d=this._sliceData(g.data,0,d-g.offset),v.data=this._concatData(d,p)),f&&(d=this._sliceData(v.data,0,E.offset-v.offset),v.data=this._concatData(d,E.data)),this._fileData.splice(m.startIx,m.endIx-m.startIx+1,v)}}},{key:"_concatData",value:function(d,p){if(typeof ArrayBuffer<"u"&&ArrayBuffer.isView&&ArrayBuffer.isView(d)){var f=new d.constructor(d.length+p.length);return f.set(d,0),f.set(p,d.length),f}return d.concat(p)}},{key:"_sliceData",value:function(d,p,f){return d.slice?d.slice(p,f):d.subarray(p,f)}},{key:"_getChunkRange",value:function(d,p){for(var f,m,g=-1,E=-1,v=0,b=0;b<this._fileData.length&&(m=this._fileData[b].offset,f=m+this._fileData[b].data.length,!(p<m-1));b++,v=b)if(d<=f+1&&p>=m-1){g=b;break}if(g===-1)return{startIx:-1,endIx:-1,insertIx:v};for(b=g;b<this._fileData.length&&(m=this._fileData[b].offset,f=m+this._fileData[b].data.length,p>=m-1&&(E=b),!(p<=f+1));b++);return E===-1&&(E=g),{startIx:g,endIx:E}}},{key:"hasDataRange",value:function(d,p){for(var f=0;f<this._fileData.length;f++){var m=this._fileData[f];if(p<m.offset)break;if(d>=m.offset&&p<m.offset+m.data.length)return!0}return!1}},{key:"getByteAt",value:function(d){for(var p,f=0;f<this._fileData.length;f++){var m=this._fileData[f].offset,g=m+this._fileData[f].data.length-1;if(d>=m&&d<=g){p=this._fileData[f];break}}if(p)return p.data[d-p.offset];throw Error("Offset "+d+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return-1}}]),h})(),a.exports=s},{}],6:[function(s,a,c){function l(T){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l(T)}function u(T,k){for(var _=0;_<k.length;_++){var P=k[_];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(T,P.key,P)}}function h(T,k,_){return k&&u(T.prototype,k),_&&u(T,_),T}function d(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(k&&k.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),k&&p(T,k)}function p(T,k){return p=Object.setPrototypeOf||function(_,P){return _.__proto__=P,_},p(T,k)}function f(T){var k=g();return function(){var _=E(T);if(k){var P=E(this).constructor;_=Reflect.construct(_,arguments,P)}else _=_.apply(this,arguments);return _=!_||l(_)!=="object"&&typeof _!="function"?m(this):_,_}}function m(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(T){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},E(T)}function v(T,k,_){return k in T?Object.defineProperty(T,k,{value:_,enumerable:!0,configurable:!0,writable:!0}):T[k]=_,T}var b=[4,132],y=[6,134],w="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");s=(function(T){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");for(var P=arguments.length,R=Array(P),I=0;I<P;I++)R[I]=arguments[I];return P=_.call.apply(_,[this].concat(R)),v(m(P),"_commentOffset",void 0),v(m(P),"_pictureOffset",void 0),P}d(k,T);var _=f(k);return h(k,[{key:"_loadData",value:function(P,R){var I=this;P.loadRange([4,7],{onSuccess:function(){I._loadBlock(P,4,R)}})}},{key:"_loadBlock",value:function(P,R,I){var H=this,B=P.getByteAt(R),O=P.getInteger24At(R+1,!0);if(b.indexOf(B)!==-1){var V=R+4;P.loadRange([V,V+O],{onSuccess:function(){H._commentOffset=V,H._nextBlock(P,R,B,O,I)}})}else y.indexOf(B)!==-1?(V=R+4,P.loadRange([V,V+O],{onSuccess:function(){H._pictureOffset=V,H._nextBlock(P,R,B,O,I)}})):H._nextBlock(P,R,B,O,I)}},{key:"_nextBlock",value:function(P,R,I,H,B){var O=this;127<I?O._commentOffset?B.onSuccess():B.onError({type:"loadData",info:"Comment block could not be found."}):P.loadRange([R+4+H,R+4+4+H],{onSuccess:function(){O._loadBlock(P,R+4+H,B)}})}},{key:"_parseData",value:function(P,R){var I=P.getLongAt(this._commentOffset,!1)+(this._commentOffset+4);R=P.getLongAt(I,!1),I+=4;for(var H,B,O,V,q,ue,K=0;K<R;K++){var ce=P.getLongAt(I,!1),we=P.getStringWithCharsetAt(I+4,ce,"utf-8").toString(),W=we.indexOf("=");switch(we=[we.slice(0,W),we.slice(W+1)],we[0].toUpperCase()){case"TITLE":H=we[1];break;case"ARTIST":B=we[1];break;case"ALBUM":O=we[1];break;case"TRACKNUMBER":V=we[1];break;case"GENRE":q=we[1]}I+=4+ce}return this._pictureOffset&&(ue=P.getLongAt(this._pictureOffset,!0),R=this._pictureOffset+4,I=P.getLongAt(R,!0),K=R+4,R=P.getStringAt(K,I),I=K+I,K=P.getLongAt(I,!0),ce=I+4,I=P.getStringWithCharsetAt(ce,K,"utf-8").toString(),K=ce+K+16,ce=P.getLongAt(K,!0),P=P.getBytesAt(K+4,ce,!0),ue={format:R,type:w[ue],description:I,data:P}),{type:"FLAC",version:"1",tags:{title:H,artist:B,album:O,track:V,genre:q,picture:ue}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(P){return String.fromCharCode.apply(String,P.slice(0,4))==="fLaC"}}]),k})(s("./MediaTagReader")),a.exports=s},{"./MediaTagReader":12}],7:[function(s,a,c){function l(v){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(v)}function u(v,b){for(var y=0;y<b.length;y++){var w=b[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}function h(v,b,y){return b&&u(v.prototype,b),y&&u(v,y),v}function d(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),b&&p(v,b)}function p(v,b){return p=Object.setPrototypeOf||function(y,w){return y.__proto__=w,y},p(v,b)}function f(v){var b=m();return function(){var y=g(v);if(b){var w=g(this).constructor;y=Reflect.construct(y,arguments,w)}else y=y.apply(this,arguments);if(!y||l(y)!=="object"&&typeof y!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");y=this}return y}}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(v){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},g(v)}c=s("./MediaTagReader"),s("./MediaFileReader"),s=(function(v){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");return y.apply(this,arguments)}d(b,v);var y=f(b);return h(b,[{key:"_loadData",value:function(w,T){var k=w.getSize();w.loadRange([k-128,k-1],T)}},{key:"_parseData",value:function(w,T){var k=w.getSize()-128,_=w.getStringWithCharsetAt(k+3,30).toString(),P=w.getStringWithCharsetAt(k+33,30).toString(),R=w.getStringWithCharsetAt(k+63,30).toString(),I=w.getStringWithCharsetAt(k+93,4).toString(),H=w.getByteAt(k+97+28);if(T=w.getByteAt(k+97+29),H==0&&T!=0){var B="1.1";H=w.getStringWithCharsetAt(k+97,28).toString()}else B="1.0",H=w.getStringWithCharsetAt(k+97,30).toString(),T=0;return w=w.getByteAt(k+97+30),w={type:"ID3",version:B,tags:{title:_,artist:P,album:R,year:I,comment:H,genre:255>w?E[w]:""}},T&&(w.tags.track=T),w}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(w){return String.fromCharCode.apply(String,w.slice(0,3))==="TAG"}}]),b})(c);var E="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");a.exports=s},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(s,a,c){function l(v,b){for(var y=0;y<b.length;y++){var w=b[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}function u(v,b,y){return y&&l(v,y),v}function h(v){switch(v){case 0:v="iso-8859-1";break;case 1:v="utf-16";break;case 2:v="utf-16be";break;case 3:v="utf-8";break;default:v="iso-8859-1"}return v}function d(v,b,y,w){var T=y.getStringWithCharsetAt(v+1,b-1,w);return v=y.getStringWithCharsetAt(v+1+T.bytesReadCount,b-1-T.bytesReadCount,w),{user_description:T.toString(),data:v.toString()}}s("./MediaFileReader");var p=s("./StringUtils"),f=s("./ArrayFileReader"),m={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};s=(function(){function v(){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function")}return u(v,null,[{key:"getFrameReaderFunction",value:function(b){return b in g?g[b]:b[0]==="T"?g["T*"]:b[0]==="W"?g["W*"]:null}},{key:"readFrames",value:function(b,y,w,T,k){for(var _={},P=this._getFrameHeaderSize(T);b<y-P;){var R=this._readFrameHeader(w,b,T),I=R.id;if(!I)break;var H=R.flags,B=R.size,O=b+R.headerSize,V=w;if(b+=R.headerSize+R.size,!k||k.indexOf(I)!==-1){if(I==="MP3e"||I==="\0MP3"||I==="\0\0MP"||I===" MP3")break;H&&H.format.unsynchronisation&&!T.flags.unsynchronisation&&(V=this.getUnsyncFileReader(V,O,B),O=0,B=V.getSize()),H&&H.format.data_length_indicator&&(O+=4,B-=4),H=(R=v.getFrameReaderFunction(I))?R.apply(this,[O,B,V,H,T]):null,O=this._getFrameDescription(I),B={id:I,size:B,description:O,data:H},I in _?(_[I].id&&(_[I]=[_[I]]),_[I].push(B)):_[I]=B}}return _}},{key:"_getFrameHeaderSize",value:function(b){return b=b.major,b==2?6:b==3||b==4?10:0}},{key:"_readFrameHeader",value:function(b,y,w){var T=w.major,k=null;switch(w=this._getFrameHeaderSize(w),T){case 2:var _=b.getStringAt(y,3),P=b.getInteger24At(y+3,!0);break;case 3:_=b.getStringAt(y,4),P=b.getLongAt(y+4,!0);break;case 4:_=b.getStringAt(y,4),P=b.getSynchsafeInteger32At(y+4)}return(_=="\0\0\0"||_=="\0\0\0\0")&&(_=""),_&&2<T&&(k=this._readFrameFlags(b,y+8)),{id:_||"",size:P||0,headerSize:w||0,flags:k}}},{key:"_readFrameFlags",value:function(b,y){return{message:{tag_alter_preservation:b.isBitSetAt(y,6),file_alter_preservation:b.isBitSetAt(y,5),read_only:b.isBitSetAt(y,4)},format:{grouping_identity:b.isBitSetAt(y+1,7),compression:b.isBitSetAt(y+1,3),encryption:b.isBitSetAt(y+1,2),unsynchronisation:b.isBitSetAt(y+1,1),data_length_indicator:b.isBitSetAt(y+1,0)}}}},{key:"_getFrameDescription",value:function(b){return b in m?m[b]:"Unknown"}},{key:"getUnsyncFileReader",value:function(b,y,w){for(b=b.getBytesAt(y,w),y=0;y<b.length-1;y++)b[y]===255&&b[y+1]===0&&b.splice(y+1,1);return new f(b)}}]),v})();var g={APIC:function(v,b,y,w,T){w=v;var k=h(y.getByteAt(v));switch(T&&T.major){case 2:T=y.getStringAt(v+1,3),v+=4;break;case 3:case 4:T=y.getStringWithCharsetAt(v+1,b-1),v+=1+T.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var _=y.getByteAt(v);return _=E[_],k=y.getStringWithCharsetAt(v+1,b-(v-w)-1,k),v+=1+k.bytesReadCount,{format:T.toString(),type:_,description:k.toString(),data:y.getBytesAt(v,w+b-v)}},CHAP:function(v,b,y,w,T){w=v;var k={},_=p.readNullTerminatedString(y.getBytesAt(v,b));return k.id=_.toString(),v+=_.bytesReadCount,k.startTime=y.getLongAt(v,!0),v+=4,k.endTime=y.getLongAt(v,!0),v+=4,k.startOffset=y.getLongAt(v,!0),v+=4,k.endOffset=y.getLongAt(v,!0),v+=4,k.subFrames=this.readFrames(v,v+(b-(v-w)),y,T),k},CTOC:function(v,b,y,w,T){w=v;var k={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},_=p.readNullTerminatedString(y.getBytesAt(v,b));for(k.id=_.toString(),v+=_.bytesReadCount,k.topLevel=y.isBitSetAt(v,1),k.ordered=y.isBitSetAt(v,0),v++,k.entryCount=y.getByteAt(v),v++,_=0;_<k.entryCount;_++){var P=p.readNullTerminatedString(y.getBytesAt(v,b-(v-w)));k.childElementIds.push(P.toString()),v+=P.bytesReadCount}return k.subFrames=this.readFrames(v,v+(b-(v-w)),y,T),k},COMM:function(v,b,y,w,T){var k=v,_=h(y.getByteAt(v));return w=y.getStringAt(v+1,3),T=y.getStringWithCharsetAt(v+4,b-4,_),v+=4+T.bytesReadCount,v=y.getStringWithCharsetAt(v,k+b-v,_),{language:w,short_description:T.toString(),text:v.toString()}}};g.COM=g.COMM,g.PIC=function(v,b,y,w,T){return g.APIC(v,b,y,w,T)},g.PCNT=function(v,b,y,w,T){return y.getLongAt(v,!1)},g.CNT=g.PCNT,g["T*"]=function(v,b,y,w,T){return w=h(y.getByteAt(v)),y.getStringWithCharsetAt(v+1,b-1,w).toString()},g.TXXX=function(v,b,y,w,T){return w=h(y.getByteAt(v)),d(v,b,y,w)},g.WXXX=function(v,b,y,w,T){return b===0?null:(w=h(y.getByteAt(v)),d(v,b,y,w))},g["W*"]=function(v,b,y,w,T){return b===0?null:y.getStringWithCharsetAt(v,b,"iso-8859-1").toString()},g.TCON=function(v,b,y,w){return g["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},g.TCO=g.TCON,g.USLT=function(v,b,y,w,T){var k=v,_=h(y.getByteAt(v));return w=y.getStringAt(v+1,3),T=y.getStringWithCharsetAt(v+4,b-4,_),v+=4+T.bytesReadCount,v=y.getStringWithCharsetAt(v,k+b-v,_),{language:w,descriptor:T.toString(),lyrics:v.toString()}},g.ULT=g.USLT,g.UFID=function(v,b,y,w,T){return w=p.readNullTerminatedString(y.getBytesAt(v,b)),v+=w.bytesReadCount,v=y.getBytesAt(v,b-w.bytesReadCount),{ownerIdentifier:w.toString(),identifier:v}};var E="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");a.exports=s},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(s,a,c){function l(b){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(b)}function u(b,y){for(var w=0;w<y.length;w++){var T=y[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}function h(b,y,w){return y&&u(b.prototype,y),w&&u(b,w),b}function d(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),y&&p(b,y)}function p(b,y){return p=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w},p(b,y)}function f(b){var y=m();return function(){var w=g(b);if(y){var T=g(this).constructor;w=Reflect.construct(w,arguments,T)}else w=w.apply(this,arguments);if(!w||l(w)!=="object"&&typeof w!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");w=this}return w}}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(b){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},g(b)}c=s("./MediaTagReader"),s("./MediaFileReader");var E=s("./ID3v2FrameReader");s=(function(b){function y(){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");return w.apply(this,arguments)}d(y,b);var w=f(y);return h(y,[{key:"_loadData",value:function(T,k){T.loadRange([6,9],{onSuccess:function(){T.loadRange([0,10+T.getSynchsafeInteger32At(6)-1],k)},onError:k.onError})}},{key:"_parseData",value:function(T,k){var _,P=0,R=T.getByteAt(P+3);if(4<R)return{type:"ID3",version:">2.4",tags:{}};var I=T.getByteAt(P+4),H=T.isBitSetAt(P+5,7),B=T.isBitSetAt(P+5,6),O=T.isBitSetAt(P+5,5),V=T.getSynchsafeInteger32At(P+6);if(P+=10,B)if(R===4){var q=T.getSynchsafeInteger32At(P);P+=q}else q=T.getLongAt(P,!0),P+=q+4;q={type:"ID3",version:"2."+R+"."+I,major:R,revision:I,flags:{unsynchronisation:H,extended_header:B,experimental_indicator:O,footer_present:!1},size:V,tags:{}},k&&(_=this._expandShortcutTags(k)),k=V+10,q.flags.unsynchronisation&&(T=E.getUnsyncFileReader(T,P,V),P=0,k=T.getSize()),T=E.readFrames(P,k,T,q,_);for(var ue in v)v.hasOwnProperty(ue)&&(_=this._getFrameData(T,v[ue]))&&(q.tags[ue]=_);for(var K in T)T.hasOwnProperty(K)&&(q.tags[K]=T[K]);return q}},{key:"_getFrameData",value:function(T,k){for(var _=0,P;P=k[_];_++)if(P in T)return T=T[P]instanceof Array?T[P][0]:T[P],T.data}},{key:"getShortcuts",value:function(){return v}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(T){return String.fromCharCode.apply(String,T.slice(0,3))==="ID3"}}]),y})(c);var v={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};a.exports=s},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(s,a,c){function l(y){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function u(y,w){for(var T=0;T<w.length;T++){var k=w[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}function h(y,w,T){return w&&u(y.prototype,w),T&&u(y,T),y}function d(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&p(y,w)}function p(y,w){return p=Object.setPrototypeOf||function(T,k){return T.__proto__=k,T},p(y,w)}function f(y){var w=m();return function(){var T=g(y);if(w){var k=g(this).constructor;T=Reflect.construct(T,arguments,k)}else T=T.apply(this,arguments);if(!T||l(T)!=="object"&&typeof T!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");T=this}return T}}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(y){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},g(y)}c=s("./MediaTagReader"),s("./MediaFileReader"),s=(function(y){function w(){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");return T.apply(this,arguments)}d(w,y);var T=f(w);return h(w,[{key:"_loadData",value:function(k,_){var P=this;k.loadRange([0,16],{onSuccess:function(){P._loadAtom(k,0,"",_)},onError:_.onError})}},{key:"_loadAtom",value:function(k,_,P,R){if(_>=k.getSize())R.onSuccess();else{var I=this,H=k.getLongAt(_,!0);if(H==0||isNaN(H))R.onSuccess();else{var B=k.getStringAt(_+4,4);if(this._isContainerAtom(B)){B=="meta"&&(_+=4);var O=(P?P+".":"")+B;O==="moov.udta.meta.ilst"?k.loadRange([_,_+H],R):k.loadRange([_+8,_+8+8],{onSuccess:function(){I._loadAtom(k,_+8,O,R)},onError:R.onError})}else k.loadRange([_+H,_+H+8],{onSuccess:function(){I._loadAtom(k,_+H,P,R)},onError:R.onError})}}}},{key:"_isContainerAtom",value:function(k){return 0<=["moov","udta","meta","ilst"].indexOf(k)}},{key:"_canReadAtom",value:function(k){return k!=="----"}},{key:"_parseData",value:function(k,_){var P={};_=this._expandShortcutTags(_),this._readAtom(P,k,0,k.getSize(),_);for(var R in b)b.hasOwnProperty(R)&&(_=P[b[R]])&&(P[R]=R==="track"?_.data.track:_.data);return{type:"MP4",ftyp:k.getStringAt(8,4),version:k.getLongAt(12,!0),tags:P}}},{key:"_readAtom",value:function(k,_,P,R,I,H,B){B=B===void 0?"":B+"  ";for(var O=P;O<P+R;){var V=_.getLongAt(O,!0);if(V==0)break;var q=_.getStringAt(O+4,4);if(this._isContainerAtom(q)){q=="meta"&&(O+=4),this._readAtom(k,_,O+8,V-8,I,(H?H+".":"")+q,B);break}(!I||0<=I.indexOf(q))&&H==="moov.udta.meta.ilst"&&this._canReadAtom(q)&&(k[q]=this._readMetadataAtom(_,O)),O+=V}}},{key:"_readMetadataAtom",value:function(k,_){var P=k.getLongAt(_,!0),R=k.getStringAt(_+4,4),I=k.getInteger24At(_+16+1,!0);if(I=E[I],R=="trkn")var H={track:k.getShortAt(_+16+10,!0),total:k.getShortAt(_+16+14,!0)};else if(R=="disk")H={disk:k.getShortAt(_+16+10,!0),total:k.getShortAt(_+16+14,!0)};else{_+=24;var B=P-24;switch(R==="covr"&&I==="uint8"&&(I="jpeg"),I){case"text":H=k.getStringWithCharsetAt(_,B,"utf-8").toString();break;case"uint8":H=k.getShortAt(_,!1);break;case"int":case"uint":H=(I=="int"?B==1?k.getSByteAt:B==2?k.getSShortAt:B==4?k.getSLongAt:k.getLongAt:B==1?k.getByteAt:B==2?k.getShortAt:k.getLongAt).call(k,_+(B==8?4:0),!0);break;case"jpeg":case"png":H={format:"image/"+I,data:k.getBytesAt(_,B)}}}return{id:R,size:P,description:v[R]||"Unknown",data:H}}},{key:"getShortcuts",value:function(){return b}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(k){return String.fromCharCode.apply(String,k.slice(4,8))==="ftyp"}}]),w})(c);var E={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},v={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},b={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};a.exports=s},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(s,a,c){function l(p,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}function u(p,f,m){return f&&l(p.prototype,f),m&&l(p,m),p}function h(p,f,m){return f in p?Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[f]=m,p}var d=s("./StringUtils");s=(function(){function p(f){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");h(this,"_isInitialized",void 0),h(this,"_size",void 0),this._isInitialized=!1,this._size=0}return u(p,[{key:"init",value:function(f){var m=this;if(this._isInitialized)setTimeout(f.onSuccess,1);else return this._init({onSuccess:function(){m._isInitialized=!0,f.onSuccess()},onError:f.onError})}},{key:"_init",value:function(f){throw Error("Must implement init function")}},{key:"loadRange",value:function(f,m){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(f){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(f,m){for(var g=Array(m),E=0;E<m;E++)g[E]=this.getByteAt(f+E);return g}},{key:"isBitSetAt",value:function(f,m){return(this.getByteAt(f)&1<<m)!=0}},{key:"getSByteAt",value:function(f){return f=this.getByteAt(f),127<f?f-256:f}},{key:"getShortAt",value:function(f,m){return f=m?(this.getByteAt(f)<<8)+this.getByteAt(f+1):(this.getByteAt(f+1)<<8)+this.getByteAt(f),0>f&&(f+=65536),f}},{key:"getSShortAt",value:function(f,m){return f=this.getShortAt(f,m),32767<f?f-65536:f}},{key:"getLongAt",value:function(f,m){var g=this.getByteAt(f),E=this.getByteAt(f+1),v=this.getByteAt(f+2);return f=this.getByteAt(f+3),m=m?(((g<<8)+E<<8)+v<<8)+f:(((f<<8)+v<<8)+E<<8)+g,0>m&&(m+=4294967296),m}},{key:"getSLongAt",value:function(f,m){return f=this.getLongAt(f,m),2147483647<f?f-4294967296:f}},{key:"getInteger24At",value:function(f,m){var g=this.getByteAt(f),E=this.getByteAt(f+1);return f=this.getByteAt(f+2),m=m?((g<<8)+E<<8)+f:((f<<8)+E<<8)+g,0>m&&(m+=16777216),m}},{key:"getStringAt",value:function(f,m){for(var g=[],E=f,v=0;E<f+m;E++,v++)g[v]=String.fromCharCode(this.getByteAt(E));return g.join("")}},{key:"getStringWithCharsetAt",value:function(f,m,g){switch(f=this.getBytesAt(f,m),(g||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":g=d.readUTF16String(f,g==="utf-16be");break;case"utf-8":g=d.readUTF8String(f);break;default:g=d.readNullTerminatedString(f)}return g}},{key:"getCharAt",value:function(f){return String.fromCharCode(this.getByteAt(f))}},{key:"getSynchsafeInteger32At",value:function(f){var m=this.getByteAt(f),g=this.getByteAt(f+1),E=this.getByteAt(f+2);return this.getByteAt(f+3)&127|(E&127)<<7|(g&127)<<14|(m&127)<<21}}],[{key:"canReadFile",value:function(f){throw Error("Must implement canReadFile function")}}]),p})(),a.exports=s},{"./StringUtils":13}],12:[function(s,a,c){function l(d,p){for(var f=0;f<p.length;f++){var m=p[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function u(d,p,f){return p&&l(d.prototype,p),f&&l(d,f),d}function h(d,p,f){return p in d?Object.defineProperty(d,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[p]=f,d}s("./MediaFileReader"),s=(function(){function d(p){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");h(this,"_mediaFileReader",void 0),h(this,"_tags",void 0),this._mediaFileReader=p,this._tags=null}return u(d,[{key:"setTagsToRead",value:function(p){return this._tags=p,this}},{key:"read",value:function(p){var f=this;this._mediaFileReader.init({onSuccess:function(){f._loadData(f._mediaFileReader,{onSuccess:function(){try{var m=f._parseData(f._mediaFileReader,f._tags)}catch(g){if(p.onError){p.onError({type:"parseData",info:g.message});return}}p.onSuccess(m)},onError:p.onError})},onError:p.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(p,f){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(p,f){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(p){if(!p)return null;for(var f=[],m=this.getShortcuts(),g=0,E;E=p[g];g++)f=f.concat(m[E]||[E]);return f}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(p){throw Error("Must implement")}}]),d})(),a.exports=s},{"./MediaFileReader":11}],13:[function(s,a,c){function l(p,f){for(var m=0;m<f.length;m++){var g=f[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}function u(p,f,m){return f&&l(p.prototype,f),p}function h(p,f,m){return f in p?Object.defineProperty(p,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[f]=m,p}var d=(function(){function p(f,m){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");h(this,"_value",void 0),h(this,"bytesReadCount",void 0),h(this,"length",void 0),this._value=f,this.bytesReadCount=m,this.length=f.length}return u(p,[{key:"toString",value:function(){return this._value}}]),p})();a.exports={readUTF16String:function(p,f,m){var g=0,E=1,v=0;m=Math.min(m||p.length,p.length),p[0]==254&&p[1]==255?(f=!0,g=2):p[0]==255&&p[1]==254&&(f=!1,g=2),f&&(E=0,v=1),f=[];for(var b=0;g<m;b++){var y=p[g+E],w=(y<<8)+p[g+v];if(g+=2,w==0)break;216>y||224<=y?f[b]=String.fromCharCode(w):(y=(p[g+E]<<8)+p[g+v],g+=2,f[b]=String.fromCharCode(w,y))}return new d(f.join(""),g)},readUTF8String:function(p,f){var m=0;f=Math.min(f||p.length,p.length),p[0]==239&&p[1]==187&&p[2]==191&&(m=3);for(var g=[],E=0;m<f;E++){var v=p[m++];if(v==0)break;if(128>v)g[E]=String.fromCharCode(v);else if(194<=v&&224>v){var b=p[m++];g[E]=String.fromCharCode(((v&31)<<6)+(b&63))}else if(224<=v&&240>v){b=p[m++];var y=p[m++];g[E]=String.fromCharCode(((v&255)<<12)+((b&63)<<6)+(y&63))}else if(240<=v&&245>v){b=p[m++],y=p[m++];var w=p[m++];y=((v&7)<<18)+((b&63)<<12)+((y&63)<<6)+(w&63)-65536,g[E]=String.fromCharCode((y>>10)+55296,(y&1023)+56320)}}return new d(g.join(""),m)},readNullTerminatedString:function(p,f){var m=[];f=f||p.length;for(var g=0;g<f;){var E=p[g++];if(E==0)break;m[g-1]=String.fromCharCode(E)}return new d(m.join(""),g)}}},{}],14:[function(s,a,c){function l(y){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function u(y,w){for(var T=0;T<w.length;T++){var k=w[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}function h(y,w,T){return w&&u(y.prototype,w),T&&u(y,T),y}function d(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&p(y,w)}function p(y,w){return p=Object.setPrototypeOf||function(T,k){return T.__proto__=k,T},p(y,w)}function f(y){var w=g();return function(){var T=E(y);if(w){var k=E(this).constructor;T=Reflect.construct(T,arguments,k)}else T=T.apply(this,arguments);return T=!T||l(T)!=="object"&&typeof T!="function"?m(this):T,T}}function m(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(y){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},E(y)}function v(y,w,T){return w in y?Object.defineProperty(y,w,{value:T,enumerable:!0,configurable:!0,writable:!0}):y[w]=T,y}var b=s("./ChunkedFileData");c=(function(y){function w(k){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");var _=T.call(this);return v(m(_),"_url",void 0),v(m(_),"_fileData",void 0),_._url=k,_._fileData=new b,_}d(w,y);var T=f(w);return h(w,[{key:"_init",value:function(k){w._config.avoidHeadRequests?this._fetchSizeWithGetRequest(k):this._fetchSizeWithHeadRequest(k)}},{key:"_fetchSizeWithHeadRequest",value:function(k){var _=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(P){(P=_._parseContentLength(P))?(_._size=P,k.onSuccess()):_._fetchSizeWithGetRequest(k)},onError:k.onError})}},{key:"_fetchSizeWithGetRequest",value:function(k){var _=this,P=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",P,{onSuccess:function(R){var I=_._parseContentRange(R);if(R=_._getXhrResponseContent(R),I){if(I.instanceLength==null){_._fetchEntireFile(k);return}_._size=I.instanceLength}else _._size=R.length;_._fileData.addData(0,R),k.onSuccess()},onError:k.onError})}},{key:"_fetchEntireFile",value:function(k){var _=this;this._makeXHRRequest("GET",null,{onSuccess:function(P){P=_._getXhrResponseContent(P),_._size=P.length,_._fileData.addData(0,P),k.onSuccess()},onError:k.onError})}},{key:"_getXhrResponseContent",value:function(k){return k.responseBody||k.responseText||""}},{key:"_parseContentLength",value:function(k){return k=this._getResponseHeader(k,"Content-Length"),k==null?k:parseInt(k,10)}},{key:"_parseContentRange",value:function(k){if(k=this._getResponseHeader(k,"Content-Range")){var _=k.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!_)throw Error("FIXME: Unknown Content-Range syntax: "+k);return{firstBytePosition:parseInt(_[1],10),lastBytePosition:parseInt(_[2],10),instanceLength:_[3]?parseInt(_[3],10):null}}return null}},{key:"loadRange",value:function(k,_){var P=this;P._fileData.hasDataRange(k[0],Math.min(P._size,k[1]))?setTimeout(_.onSuccess,1):(k=this._roundRangeToChunkMultiple(k),k[1]=Math.min(P._size,k[1]),this._makeXHRRequest("GET",k,{onSuccess:function(R){R=P._getXhrResponseContent(R),P._fileData.addData(k[0],R),_.onSuccess()},onError:_.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(k){return[k[0],k[0]+1024*Math.ceil((k[1]-k[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(k,_,P){var R=this._createXHRObject();R.open(k,this._url);var I=function(){R.status===200||R.status===206?P.onSuccess(R):P.onError&&P.onError({type:"xhr",info:"Unexpected HTTP status "+R.status+".",xhr:R}),R=null};typeof R.onload<"u"?(R.onload=I,R.onerror=function(){P.onError&&P.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:R})}):R.onreadystatechange=function(){R.readyState===4&&I()},w._config.timeoutInSec&&(R.timeout=1e3*w._config.timeoutInSec,R.ontimeout=function(){P.onError&&P.onError({type:"xhr",info:"Timeout after "+R.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:R})}),R.overrideMimeType("text/plain; charset=x-user-defined"),_&&this._setRequestHeader(R,"Range","bytes="+_[0]+"-"+_[1]),this._setRequestHeader(R,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),R.send(null)}},{key:"_setRequestHeader",value:function(k,_,P){0>w._config.disallowedXhrHeaders.indexOf(_.toLowerCase())&&k.setRequestHeader(_,P)}},{key:"_hasResponseHeader",value:function(k,_){if(k=k.getAllResponseHeaders(),!k)return!1;k=k.split(`\r
`);for(var P=[],R=0;R<k.length;R++)P[R]=k[R].split(":")[0].toLowerCase();return 0<=P.indexOf(_.toLowerCase())}},{key:"_getResponseHeader",value:function(k,_){return this._hasResponseHeader(k,_)?k.getResponseHeader(_):null}},{key:"getByteAt",value:function(k){return this._fileData.getByteAt(k).charCodeAt(0)&255}},{key:"_isWebWorker",value:function(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if(typeof window>"u"&&!this._isWebWorker())return new(s("xhr2")).XMLHttpRequest;if(typeof XMLHttpRequest<"u")return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(k){return typeof k=="string"&&/^[a-z]+:\/\//i.test(k)}},{key:"setConfig",value:function(k){for(var _ in k)k.hasOwnProperty(_)&&(this._config[_]=k[_]);for(k=this._config.disallowedXhrHeaders,_=0;_<k.length;_++)k[_]=k[_].toLowerCase()}}]),w})(s("./MediaFileReader")),v(c,"_config",void 0),c._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},a.exports=c},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(s,a,c){function l(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function u(_,P){for(var R=0;R<P.length;R++){var I=P[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}function h(_,P,R){return P&&u(_.prototype,P),R&&u(_,R),_}function d(_,P,R){return P in _?Object.defineProperty(_,P,{value:R,enumerable:!0,configurable:!0,writable:!0}):_[P]=R,_}function p(_,P){var R=0>_.offset&&(-_.offset>P||0<_.offset+_.length);return!(0<=_.offset&&_.offset+_.length>=P||R)}s("./MediaFileReader");var f=s("./XhrFileReader"),m=s("./BlobFileReader"),g=s("./ArrayFileReader");s("./MediaTagReader");var E=s("./ID3v1TagReader"),v=s("./ID3v2TagReader"),b=s("./MP4TagReader"),y=s("./FLACTagReader"),w=[],T=[],k=(function(){function _(P){l(this,_),d(this,"_file",void 0),d(this,"_tagsToRead",void 0),d(this,"_fileReader",void 0),d(this,"_tagReader",void 0),this._file=P}return h(_,[{key:"setTagsToRead",value:function(P){return this._tagsToRead=P,this}},{key:"setFileReader",value:function(P){return this._fileReader=P,this}},{key:"setTagReader",value:function(P){return this._tagReader=P,this}},{key:"read",value:function(P){var R=new(this._getFileReader())(this._file),I=this;R.init({onSuccess:function(){I._getTagReader(R,{onSuccess:function(H){new H(R).setTagsToRead(I._tagsToRead).read(P)},onError:P.onError})},onError:P.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var P=0;P<w.length;P++)if(w[P].canReadFile(this._file))return w[P];throw Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(P,R){if(this._tagReader){var I=this._tagReader;setTimeout(function(){R.onSuccess(I)},1)}else this._findTagReader(P,R)}},{key:"_findTagReader",value:function(P,R){for(var I=[],H=[],B=P.getSize(),O=0;O<T.length;O++){var V=T[O].getTagIdentifierByteRange();p(V,B)&&(0<=V.offset&&V.offset<B/2||0>V.offset&&V.offset<-B/2?I.push(T[O]):H.push(T[O]))}var q=!1;O={onSuccess:function(){if(q){for(var ue=0;ue<T.length;ue++){var K=T[ue].getTagIdentifierByteRange();if(p(K,B)){try{var ce=P.getBytesAt(0<=K.offset?K.offset:K.offset+B,K.length)}catch(we){R.onError&&R.onError({type:"fileReader",info:we.message});return}if(T[ue].canReadTagFormat(ce)){R.onSuccess(T[ue]);return}}}R.onError&&R.onError({type:"tagFormat",info:"No suitable tag reader found"})}else q=!0},onError:R.onError},this._loadTagIdentifierRanges(P,I,O),this._loadTagIdentifierRanges(P,H,O)}},{key:"_loadTagIdentifierRanges",value:function(P,R,I){if(R.length===0)setTimeout(I.onSuccess,1);else{for(var H=[Number.MAX_VALUE,0],B=P.getSize(),O=0;O<R.length;O++){var V=R[O].getTagIdentifierByteRange(),q=0<=V.offset?V.offset:V.offset+B;V=q+V.length-1,H[0]=Math.min(q,H[0]),H[1]=Math.max(V,H[1])}P.loadRange(H,I)}}}]),_})();c=(function(){function _(){l(this,_)}return h(_,null,[{key:"addFileReader",value:function(P){return w.push(P),_}},{key:"addTagReader",value:function(P){return T.push(P),_}},{key:"removeTagReader",value:function(P){return P=T.indexOf(P),0<=P&&T.splice(P,1),_}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){f.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(P){f.setConfig({disallowedXhrHeaders:P})}},{key:"setXhrTimeoutInSec",value:function(P){f.setConfig({timeoutInSec:P})}}]),_})(),c.addFileReader(f).addFileReader(m).addFileReader(g).addTagReader(v).addTagReader(E).addTagReader(b).addTagReader(y),typeof process>"u"||process.browser||(s=typeof navigator<"u"&&navigator.product==="ReactNative"?s("./ReactNativeFileReader"):s("./NodeFileReader"),c.addFileReader(s)),a.exports={read:function(_,P){new k(_).read(P)},Reader:k,Config:c}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)})})(jsmediatags_min$1)),jsmediatags_min$1.exports}var jsmediatags_minExports=requireJsmediatags_min();const jsmediatags=getDefaultExportFromCjs(jsmediatags_minExports),typedJsMediaTags=jsmediatags;async function parseRemoteMetadataFromUrl(e,r){if(e==null||e==="")return null;try{const i=await fetch(e,{method:"GET",headers:{Range:"bytes=0-65535"}});if(!i.ok)return null;const s=await i.arrayBuffer(),a=new Blob([s],{type:"audio/*"}),c=typeof r=="string"&&r!==""?r:"remote",l=new File([a],c,{type:"audio/*"});return new Promise(u=>{typedJsMediaTags.read(l,{onSuccess:h=>u(h),onError:h=>{u(null)}})})}catch(i){return console.warn("Failed to parse remote metadata",i),null}}const base64url=e=>{const r=new Uint8Array(e);let i="";for(let s=0;s<r.byteLength;s++)i+=String.fromCharCode(r[s]);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},generateCodeVerifier=(e=64)=>{const r=new Uint8Array(e);return crypto.getRandomValues(r),Array.from(r).map(i=>("0"+(i&255).toString(16)).slice(-2)).join("")},generateCodeChallenge=async e=>{const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r);return base64url(i)},DESKTOP_REDIRECT_URI="brick://oauth-callback";async function exchangeGoogleCodeForToken({code:e,codeVerifier:r,redirectUri:i=DESKTOP_REDIRECT_URI,clientId:s}){const a=new URLSearchParams;a.set("code",e),a.set("client_id",s),a.set("code_verifier",r),a.set("redirect_uri",i),a.set("grant_type","authorization_code");const c=await fetch("https://oauth2.googleapis.com/token",{method:"POST",body:a});if(!c.ok)throw new Error("Failed to exchange token");return await c.json()}async function refreshGoogleAccessToken({refreshToken:e,clientId:r}){const i=new URLSearchParams;i.set("client_id",r),i.set("refresh_token",e),i.set("grant_type","refresh_token");const s=await fetch("https://oauth2.googleapis.com/token",{method:"POST",body:i});if(!s.ok)throw new Error("Failed to refresh Google token");return await s.json()}async function exchangeMicrosoftCodeForToken({code:e,codeVerifier:r,redirectUri:i=DESKTOP_REDIRECT_URI,clientId:s}){const a=new URLSearchParams;a.set("client_id",s),a.set("code",e),a.set("code_verifier",r),a.set("redirect_uri",i),a.set("grant_type","authorization_code"),a.set("scope","offline_access Files.Read Files.Read.All");const c=await fetch("https://login.microsoftonline.com/common/oauth2/v2.0/token",{method:"POST",body:a});if(!c.ok)throw new Error("Failed to exchange token");return await c.json()}async function refreshMicrosoftAccessToken({refreshToken:e,clientId:r}){const i=new URLSearchParams;i.set("client_id",r),i.set("refresh_token",e),i.set("grant_type","refresh_token"),i.set("scope","offline_access Files.Read Files.Read.All");const s=await fetch("https://login.microsoftonline.com/common/oauth2/v2.0/token",{method:"POST",body:i});if(!s.ok)throw new Error("Failed to refresh Microsoft token");return await s.json()}const buildGoogleAuthUrl=({clientId:e,redirectUri:r=DESKTOP_REDIRECT_URI,codeChallenge:i})=>{const s=encodeURIComponent("https://www.googleapis.com/auth/drive.readonly");return`https://accounts.google.com/o/oauth2/v2/auth?client_id=${e}&response_type=code&scope=${s}&redirect_uri=${encodeURIComponent(r)}&code_challenge=${i}&code_challenge_method=S256&access_type=offline&prompt=consent&state=google`},buildMicrosoftAuthUrl=({clientId:e,redirectUri:r=DESKTOP_REDIRECT_URI,codeChallenge:i})=>{const s=encodeURIComponent("offline_access Files.Read Files.Read.All openid profile");return`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=${e}&response_type=code&redirect_uri=${encodeURIComponent(r)}&response_mode=query&scope=${s}&code_challenge=${i}&code_challenge_method=S256&prompt=select_account&state=onedrive`},DB_NAME$1="BrickMusicDB",DB_VERSION$1=6,ensureObjectStores=e=>{if(e.objectStoreNames.contains("localTracks")||e.createObjectStore("localTracks",{keyPath:"id"}),e.objectStoreNames.contains("playlists")||e.createObjectStore("playlists",{keyPath:"id"}),e.objectStoreNames.contains("recentlyPlayedTracks")||e.createObjectStore("recentlyPlayedTracks",{keyPath:"trackId"}).createIndex("playedAt","playedAt",{unique:!1}),e.objectStoreNames.contains("recentlyPlayedPlaylists")||e.createObjectStore("recentlyPlayedPlaylists",{keyPath:"playlistId"}).createIndex("playedAt","playedAt",{unique:!1}),e.objectStoreNames.contains("cloudTokens")||e.createObjectStore("cloudTokens",{keyPath:"provider"}),!e.objectStoreNames.contains("cloudTracks")){const r=e.createObjectStore("cloudTracks",{keyPath:"id"});r.createIndex("provider","provider",{unique:!1}),r.createIndex("addedAt","addedAt",{unique:!1}),r.createIndex("name","name",{unique:!1})}},openBrickDB=()=>new Promise((e,r)=>{const i=indexedDB.open(DB_NAME$1,DB_VERSION$1);i.onerror=()=>r(i.error),i.onsuccess=()=>e(i.result),i.onupgradeneeded=s=>{const a=s.target.result;ensureObjectStores(a)}}),LONG_TRACK_SECONDS=600,tagNumberKeys={track:["track","tracknumber","track_num","trackno","tracknum","trck","trk","tracknumbertext"],disc:["disc","discnumber","disc_num","discno","discnum","tpos","part_of_a_set","partofset","set"]},coerceTagNumber=e=>{if(e!=null){if(typeof e=="number"&&!Number.isNaN(e))return e;if(typeof e=="string"){const r=e.match(/(\d{1,3})/);if(r)return parseInt(r[1],10)}if(Array.isArray(e))for(const r of e){const i=coerceTagNumber(r);if(i!==void 0)return i}if(typeof e=="object"){const r=e.data??e.text;return coerceTagNumber(r)}}},extractNumberFromTags=(e,r)=>{for(const i of r){const s=e[i];if(s!==void 0){const l=coerceTagNumber(s);if(l!==void 0)return l}const a=i.toLowerCase();if(a!==i&&e[a]!==void 0){const l=coerceTagNumber(e[a]);if(l!==void 0)return l}const c=i.toUpperCase();if(c!==i&&e[c]!==void 0){const l=coerceTagNumber(e[c]);if(l!==void 0)return l}}},stripExtension$1=e=>e.replace(/\.[^.]+$/,""),audioExtensions=["mp3","flac","wav","m4a","aac","ogg","opus","alac","aiff","wma"],isAudioFileName=(e,r)=>{if(!e&&!r)return!1;const i=(e||"").toLowerCase();return r&&r.toLowerCase().startsWith("audio/")?!0:audioExtensions.some(s=>i.endsWith(`.${s}`))},extractNumbersFromFilename=e=>{const r=stripExtension$1(e),i=r.toLowerCase(),s={},a=i.match(/(?:disc|cd)\s*0*(\d{1,2})/);a&&(s.discNumber=parseInt(a[1],10));const c=r.match(/^\s*0*(\d{1,3})(?=[\s._-])/);if(c)s.trackNumber=parseInt(c[1],10);else{const l=r.match(/(?:\s|[-_.])0*(\d{1,3})(?=\s|[-_.]|$)/);if(l){const u=parseInt(l[1],10);u<=99&&(s.trackNumber=u)}else{const u=r.match(/0*(\d{1,3})/g);if(u){const h=u.map(d=>parseInt(d,10)).find(d=>d>0&&d<=99);h&&(s.trackNumber=h)}}}return s},extractDiscFromPath=e=>{if(!e)return;const r=e.toLowerCase().match(/(?:disc|cd)\s*0*(\d{1,2})/);return r?parseInt(r[1],10):void 0},sanitizeSegment$1=e=>e.replace(/_/g," ").replace(/\s+/g," ").trim(),removeTrackNumberPrefix$1=e=>e.replace(/^\s*\d{1,3}[\s._-]+/,"").trim(),deriveFromPath=e=>{if(!e)return{};const r=e.split("/").filter(Boolean);return r.length>=3?{artist:sanitizeSegment$1(r[r.length-3]),album:sanitizeSegment$1(r[r.length-2])}:r.length>=2?{album:sanitizeSegment$1(r[r.length-2])}:{}},deriveFromFilename$1=e=>{const r=stripExtension$1(e),i=r.split(" - ").map(sanitizeSegment$1);if(i.length>=3){const s=i[0],a=i[1],c=removeTrackNumberPrefix$1(i.slice(2).join(" - "));return{artist:s,album:a,title:c}}if(i.length===2){const s=i[0],a=removeTrackNumberPrefix$1(i[1]);return{artist:s,title:a}}return{title:removeTrackNumberPrefix$1(r)}},STORE_NAME$2="localTracks",openDB=()=>openBrickDB(),saveTrackToDB=async e=>{try{console.log("Saving track to DB:",e.id,e.name);const a=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).put(e);return new Promise((c,l)=>{a.onsuccess=()=>{console.log("Successfully saved track to IndexedDB:",e.id),c()},a.onerror=()=>{console.error("Error saving track to IndexedDB:",a.error),l(a.error)}})}catch(r){throw console.error("Error saving track:",r),r}},getAllTracksFromDB=async()=>{const e=await openDB();return new Promise((r,i)=>{const c=e.transaction([STORE_NAME$2],"readonly").objectStore(STORE_NAME$2).getAll();c.onsuccess=()=>r(c.result),c.onerror=()=>i(c.error)})},deleteTrackFromDB=async e=>{const r=await openDB();return new Promise((i,s)=>{const l=r.transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).delete(e);l.onsuccess=()=>i(),l.onerror=()=>s(l.error)})},clearAllTracksInDB=async()=>{const e=await openDB();return new Promise((r,i)=>{const c=e.transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2).clear();c.onsuccess=()=>r(),c.onerror=()=>i(c.error)})};function LocalMusicUploader({onPlayTrack:e,onPlayAlbum:r,currentPlayingId:i,isPlaying:s}){const[a,c]=reactExports.useState([]),[l,u]=reactExports.useState([]),[h,d]=reactExports.useState(!1),[p,f]=reactExports.useState(!0),[m,g]=reactExports.useState(null),[E,v]=reactExports.useState("tracks"),[b,y]=reactExports.useState("added"),[w,T]=reactExports.useState(null),[k,_]=reactExports.useState(!1),[P,R]=reactExports.useState(""),[I,H]=reactExports.useState(!1),[B,O]=reactExports.useState(1),[V,q]=reactExports.useState(25),ue=reactExports.useRef(null),K=reactExports.useRef(null),ce=reactExports.useRef(!1),we=()=>d(Y=>!Y);reactExports.useEffect(()=>{},[]),reactExports.useEffect(()=>((async()=>{try{console.log("Starting to load tracks from IndexedDB..."),localStorage.getItem("brick_local_tracks")&&(console.log("Migrating from localStorage to IndexedDB..."),localStorage.removeItem("brick_local_tracks"));const ye=await getAllTracksFromDB();console.log("Retrieved local tracks from IndexedDB:",ye.length);const Ne=Date.now(),Be=ye.map((M,z)=>{try{console.log("Processing track:",M.id,M.name);const Ae=URL.createObjectURL(M.file);return console.log("Successfully created blob URL for track:",M.id),{...M,addedAt:M.addedAt??Ne+z,url:Ae,audioUrl:Ae,type:"local"}}catch(Ae){return console.error("Failed to process track:",M.id,Ae),null}}).filter(Boolean);console.log("Successfully loaded local tracks:",Be.length),c(Be);const qe=(await openBrickDB()).transaction(["cloudTracks"],"readonly").objectStore("cloudTracks").getAll();qe.onsuccess=()=>{const M=qe.result.map(z=>({...z,provider:z.provider||z.cloudProvider||"google",cloudProvider:z.provider||z.cloudProvider||"google",cloudId:z.cloudId||z.fileId,fileId:z.fileId||z.cloudId,isCloud:z.isCloud??!0,filePath:z.filePath??null,type:"cloud"}));console.log("Successfully loaded cloud tracks:",M.length),u(M)}}catch(ye){console.error("Error loading tracks from IndexedDB:",ye)}finally{f(!1)}})(),()=>{a.forEach(ye=>{const Ne=ye.audioUrl??ye.url;Ne?.startsWith("blob:")&&URL.revokeObjectURL(Ne)})}),[]),reactExports.useEffect(()=>{const Y=ye=>{try{const Ne=ye.detail;Ne?.tracks?c(Ne.tracks):(async()=>{try{const Be=await getAllTracksFromDB(),Ge=Date.now(),Ue=Be.map((Xe,qe)=>({...Xe,url:Xe.url||(Xe.file?URL.createObjectURL(Xe.file):""),audioUrl:Xe.audioUrl||(Xe.file?URL.createObjectURL(Xe.file):""),addedAt:Xe.addedAt??Ge+qe}));c(Ue)}catch{}})()}catch{}};return window.addEventListener("brick:local-tracks-refreshed",Y),()=>window.removeEventListener("brick:local-tracks-refreshed",Y)},[]);const W=async Y=>{const ye=Y.target.files;if(!ye)return;const Ne=/\.(flac|wav|mp3|m4a|aac|ogg|aif|aiff|alac|wv|mka)$/i,Be=Array.from(ye).filter(tt=>{const ne=typeof tt.type=="string"&&tt.type.startsWith("audio/"),Oe=Ne.test(tt.name);return ne||Oe});if(Be.length===0){console.warn("No audio files detected in selection.");return}console.log("Processing",Be.length,"audio files..."),g({processed:0,total:Be.length});let Ge=new Set,Ue=new Map;try{const tt=await getAllTracksFromDB();Ge=new Set(tt.map(ne=>`${ne.file?.name||ne.name}-${ne.file?.size||ne.size}`)),tt.forEach(ne=>Ue.set(`${ne.file?.name||ne.name}-${ne.file?.size||ne.size}`,ne))}catch(tt){console.warn("Unable to read existing tracks for dedupe:",tt)}const Xe=[],qe=Date.now(),M=(tt,ne,Oe)=>new Promise(Qe=>{const Ze=setTimeout(()=>Qe(Oe),ne);tt.then(nt=>{clearTimeout(Ze),Qe(nt)}).catch(()=>{clearTimeout(Ze),Qe(Oe)})}),z=async(tt,ne)=>{const Oe=`${tt.name}-${tt.size}`;if(Ge.has(Oe)){const De=Ue.get(Oe);try{const We=De?.file?.webkitRelativePath||tt.webkitRelativePath,Ye=deriveFromPath(We),Je=deriveFromFilename$1(tt.name),ut=De?.artist==="Unknown Artist"?Je.artist||Ye.artist:void 0,vt=De?.album==="Unknown Album"?Ye.album||Je.album:void 0,Tt=!De?.name||/^\d{1,3}[\s._-]/.test(De?.name)?Je.title:void 0;if(ut||vt||Tt){const Et={...De,artist:ut||De.artist,album:vt||De.album,albumArtist:De.albumArtist||ut||De.artist,name:Tt||De.name};await saveTrackToDB(Et),c(Dt=>Dt.map(Mt=>Mt.id===Et.id?{...Mt,...Et}:Mt)),console.log("Updated existing track metadata from path/filename:",Et.id)}else console.log("Skipping duplicate file:",tt.name)}catch(We){console.warn("Failed to update duplicate track metadata:",We)}return g(We=>We?{...We,processed:We.processed+1}:null),null}const Qe=(tt.type?.split("/")[1]||tt.name.split(".").pop()||"UNKNOWN").toUpperCase(),Ze=URL.createObjectURL(tt);let nt=null,de=null;try{nt=await M(new Promise(De=>{try{jsmediatags.read(tt,{onSuccess:We=>De(We),onError:()=>De(null)})}catch{De(null)}}),12e3,null)}catch{}if(!nt)try{const{parseBlob:De}=await __vitePreload(async()=>{const{parseBlob:Ye}=await Promise.resolve().then(()=>index);return{parseBlob:Ye}},void 0),We=await M(De(tt),12e3,null);if(We&&We.common){const Ye=We.common;de={tags:{title:Ye.title,artist:(Array.isArray(Ye.artists)&&Ye.artists.length?Ye.artists[0]:Ye.artist)??void 0,album:Ye.album,album_artist:Ye.albumartist,genre:(Array.isArray(Ye.genre)?Ye.genre[0]:Ye.genre)??void 0,year:Ye.year?String(Ye.year):void 0,picture:Ye.picture&&Ye.picture.length?{data:Ye.picture[0].data,format:Ye.picture[0].format}:void 0,track:Ye.track?Ye.track.no??Ye.track.of??Ye.track:void 0,disc:Ye.disk?Ye.disk.no??Ye.disk.of??Ye.disk:void 0}}}}catch{}const Me=new Audio;return Me.preload="metadata",Me.src=Ze,await new Promise(De=>{const We=()=>{const Je=de?.tags||nt?.tags||{},ut=extractNumbersFromFilename(tt.name),vt=extractDiscFromPath(tt.webkitRelativePath),Tt=extractNumberFromTags(Je,tagNumberKeys.track),Et=extractNumberFromTags(Je,tagNumberKeys.disc),Dt=Tt??ut.trackNumber,Mt=Et??vt??ut.discNumber;let xt;if(Je.picture){const{data:Fr,format:As}=Je.picture;let Ti="";for(let Or=0;Or<Fr.length;Or++)Ti+=String.fromCharCode(Fr[Or]);xt=`data:${As};base64,${btoa(Ti)}`}const Ht=tt.webkitRelativePath,Ft=deriveFromPath(Ht),jr=deriveFromFilename$1(tt.name),wr=Je.title||jr.title||stripExtension$1(tt.name),Si=Je.artist||jr.artist||Ft.artist||"Unknown Artist",Ri=Je.album||Ft.album||jr.album||"Unknown Album",vn=`local-${Date.now()}-${ne}`,ir=Number.isFinite(Me.duration)&&Me.duration>0?Me.duration:0,_s=ir>LONG_TRACK_SECONDS,sr={id:vn,name:wr,artist:Si,album:Ri,albumArtist:Je.album_artist||Si,year:Je.year,trackNumber:Dt,discNumber:Mt,genre:Je.genre,addedAt:qe+ne,file:tt,url:Ze,duration:ir,format:Qe,size:tt.size,coverArt:xt,codec:Qe,isLong:_s,type:"local"};Xe.push(sr),Ge.add(Oe),g(Fr=>Fr?{...Fr,processed:Fr.processed+1}:null),De(null)},Ye=setTimeout(We,4e3);Me.addEventListener("loadedmetadata",()=>{clearTimeout(Ye),We()}),Me.addEventListener("error",()=>{clearTimeout(Ye),We()})}),null},Ae=Math.min(5,Be.length);let Ie=0;const Ke=()=>{if(Ie>=Be.length)return Promise.resolve();const tt=Ie,ne=z(Be[tt],tt);return Ie+=1,ne.then(()=>Ke())},St=Array.from({length:Ae},()=>Ke());await Promise.all(St),console.log("Adding",Xe.length,"new tracks to state"),c([...a,...Xe]),d(!0),g(null),ue.current&&(ue.current.value=""),console.log("Saving tracks to database...");try{const Oe=(await openDB()).transaction([STORE_NAME$2],"readwrite").objectStore(STORE_NAME$2);await Promise.all(Xe.map(Qe=>new Promise((Ze,nt)=>{const de=Oe.put(Qe);de.onsuccess=()=>Ze(),de.onerror=()=>nt(de.error)})))}catch(tt){console.error("Failed bulk save, falling back to per-track:",tt);for(const ne of Xe)try{await saveTrackToDB(ne)}catch(Oe){console.error("Failed to save track:",ne.id,Oe)}}},fe=async Y=>{console.log("Deleting track:",Y);const ye=a.find(Be=>Be.id===Y);if(ye){const Be=ye.audioUrl??ye.url;if(Be&&Be.startsWith("blob:"))try{URL.revokeObjectURL(Be)}catch{}c(a.filter(Ge=>Ge.id!==Y));try{await deleteTrackFromDB(Y),console.log("Successfully deleted local track:",Y)}catch(Ge){console.error("Error deleting local track from IndexedDB:",Ge)}return}if(l.find(Be=>Be.id===Y)){u(l.filter(Be=>Be.id!==Y));try{(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks").delete(Y),console.log("Successfully deleted cloud track:",Y)}catch(Be){console.error("Error deleting cloud track from IndexedDB:",Be)}return}},F=async Y=>{if(!ce.current){ce.current=!0;try{if(Y.type==="cloud"){const ye=Y;if(ye.fileId&&await A(ye),(!ye.artist||ye.artist==="Unknown Artist")&&ye.audioUrl){const Ne=await U(ye);if(Ne&&Ne.tags){const Be=Ne.tags,Ge=Be.artist||Be.TPE1||ye.artist,Ue=Be.title||Be.TIT2||ye.name,Xe=Be.album||Be.TALB||ye.album;let qe;if(Be.picture){const{data:M,format:z}=Be.picture;let Ae="";for(let Ie=0;Ie<M.length;Ie++)Ae+=String.fromCharCode(M[Ie]);qe=`data:${z};base64,${btoa(Ae)}`}ye.artist=Ge||ye.artist,ye.name=Ue||ye.name,ye.album=Xe||ye.album,qe&&(ye.coverArt=qe);try{(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks").put(ye),u(Ie=>Ie.map(Ke=>Ke.id===ye.id?ye:Ke))}catch(M){console.warn("Failed to update cloud track metadata in DB:",M)}}}}e(Y)}finally{setTimeout(()=>{ce.current=!1},300)}}},[L,Q]=reactExports.useState(!1),[se,oe]=reactExports.useState(""),ge=async()=>{Q(!0)},[ve,_e]=reactExports.useState([]),[Z,le]=reactExports.useState([]),[Ce,He]=reactExports.useState({}),[ae,G]=reactExports.useState({}),ee=async()=>{const Y="placeholder-google-client-id",ye=DESKTOP_REDIRECT_URI,Ne=generateCodeVerifier(),Be=await generateCodeChallenge(Ne);sessionStorage.setItem("gdrive_code_verifier",Ne);const Ge=await buildGoogleAuthUrl({clientId:Y,redirectUri:ye,codeChallenge:Be}),Ue=window.open(Ge,"google_oauth","width=600,height=600"),Xe=async M=>{if(M.origin!==location.origin)return;const z=M.data;if(z&&z.provider==="google"&&z.code){try{const Ae=await exchangeGoogleCodeForToken({code:z.code,codeVerifier:Ne,redirectUri:ye,clientId:Y}),Ie=Date.now()+(Ae.expires_in??3600)*1e3,Ke={...Ae,expires_at:Ie};(await openBrickDB()).transaction(["cloudTokens"],"readwrite").objectStore("cloudTokens").put({provider:"google",token:Ke}),alert("Google Drive connected")}catch(Ae){console.error("Failed to exchange Google token",Ae)}window.removeEventListener("message",Xe),clearInterval(qe),Ue?.close()}};window.addEventListener("message",Xe);const qe=setInterval(()=>{try{(!Ue||Ue.closed)&&(window.removeEventListener("message",Xe),clearInterval(qe))}catch{}},500)},pe=async()=>{const Y="placeholder-onedrive-client-id",ye=DESKTOP_REDIRECT_URI,Ne=generateCodeVerifier(),Be=await generateCodeChallenge(Ne);sessionStorage.setItem("onedrive_code_verifier",Ne);const Ge=await buildMicrosoftAuthUrl({clientId:Y,redirectUri:ye,codeChallenge:Be}),Ue=window.open(Ge,"onedrive_oauth","width=600,height=600"),Xe=async M=>{if(M.origin!==location.origin)return;const z=M.data;if(z&&z.provider==="onedrive"&&z.code){try{const Ae=await exchangeMicrosoftCodeForToken({code:z.code,codeVerifier:Ne,redirectUri:ye,clientId:Y}),Ie=Date.now()+(Ae.expires_in??3600)*1e3,Ke={...Ae,expires_at:Ie};(await openBrickDB()).transaction(["cloudTokens"],"readwrite").objectStore("cloudTokens").put({provider:"onedrive",token:Ke}),alert("OneDrive connected")}catch(Ae){console.error("Failed to exchange OneDrive token",Ae)}window.removeEventListener("message",Xe),clearInterval(qe),Ue?.close()}};window.addEventListener("message",Xe);const qe=setInterval(()=>{try{(!Ue||Ue.closed)&&(window.removeEventListener("message",Xe),clearInterval(qe))}catch{}},500)},be=async Y=>{try{const Be=(await openBrickDB()).transaction(["cloudTokens"],"readwrite").objectStore("cloudTokens"),Ge=Be.get(Y),Ue=await new Promise(qe=>{Ge.onsuccess=()=>qe(Ge.result?.token),Ge.onerror=()=>qe(null)});if(!Ue||!Ue.refresh_token)return null;let Xe=null;if(Y==="google"){const qe="placeholder-google-client-id";Xe=await refreshGoogleAccessToken({refreshToken:Ue.refresh_token,clientId:qe})}else{const qe="placeholder-onedrive-client-id";Xe=await refreshMicrosoftAccessToken({refreshToken:Ue.refresh_token,clientId:qe})}if(Xe){const qe=Date.now()+(Xe.expires_in??3600)*1e3,M={...Ue,...Xe,expires_at:qe};return Be.put({provider:Y,token:M}),M}return null}catch(ye){return console.warn("Failed refreshing cloud token",ye),null}},Re=async Y=>{const Be=(await openBrickDB()).transaction(["cloudTokens"],"readonly").objectStore("cloudTokens"),Ge=await new Promise(Xe=>{const qe=Be.get(Y);qe.onsuccess=()=>Xe(qe.result?.token),qe.onerror=()=>Xe(null)});if(!Ge)return null;const Ue=Date.now();return Ge.expires_at&&Ue>Ge.expires_at-6e4?await be(Y)??Ge:Ge},je=async(Y,ye)=>{const Ne=[];let Be;do{const Ge=`'${Y}' in parents and trashed=false`,Ue=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(Ge)}&fields=files(id,name,mimeType,size)&pageSize=100${Be?`&pageToken=${Be}`:""}`,qe=await(await fetch(Ue,{headers:{Authorization:`Bearer ${ye}`}})).json();Ne.push(...qe.files||[]),Be=qe.nextPageToken}while(Be);return Ne},J=async(Y,ye)=>{if(!Y)return[];if(Y.mimeType==="application/vnd.google-apps.folder"){const Ne=await je(Y.id,ye),Be=[];for(const Ge of Ne){const Ue=await J(Ge,ye);Be.push(...Ue)}return Be}return isAudioFileName(Y.name,Y.mimeType)?[Y]:[]},Se=async(Y,ye)=>{const Ne=[];let Be=`https://graph.microsoft.com/v1.0/me/drive/items/${Y}/children?$select=id,name,size,folder,file`;for(;Be;){const Ue=await(await fetch(Be,{headers:{Authorization:`Bearer ${ye}`}})).json();Ne.push(...Ue.value||[]),Be=Ue["@odata.nextLink"]}return Ne},Pe=async(Y,ye)=>{if(!Y)return[];if(Y.folder){const Ne=await Se(Y.id,ye),Be=[];for(const Ge of Ne){const Ue=await Pe(Ge,ye);Be.push(...Ue)}return Be}return isAudioFileName(Y.name,Y.file?.mimeType)?[Y]:[]},Te=async()=>{const Y=await Re("google");if(!Y?.access_token){alert("No Google Drive token found. Please connect first.");return}try{let ye=await fetch("https://www.googleapis.com/drive/v3/files?q=(mimeType contains 'audio' or mimeType = 'application/vnd.google-apps.folder') and trashed=false&fields=files(id,name,mimeType,size,thumbnailLink)",{headers:{Authorization:`Bearer ${Y.access_token}`}});if(ye.status===401){const Be=await be("google");Be?.access_token&&(ye=await fetch("https://www.googleapis.com/drive/v3/files?q=(mimeType contains 'audio' or mimeType = 'application/vnd.google-apps.folder') and trashed=false&fields=files(id,name,mimeType,size,thumbnailLink)",{headers:{Authorization:`Bearer ${Be.access_token}`}}))}const Ne=await ye.json();_e(Ne.files||[])}catch(ye){console.error("Failed to list Drive files",ye)}},$e=async()=>{try{(await openBrickDB()).transaction(["cloudTokens"],"readwrite").objectStore("cloudTokens").delete("google"),alert("Disconnected Google Drive")}catch(Y){console.warn("Failed to disconnect Google Drive",Y)}},gt=async()=>{const Y=await Re("onedrive");if(!Y?.access_token){alert("No OneDrive token found. Please connect first.");return}try{let ye=await fetch("https://graph.microsoft.com/v1.0/me/drive/root/children?$select=id,name,size,folder,file",{headers:{Authorization:`Bearer ${Y.access_token}`}});if(ye.status===401){const Ge=await be("onedrive");Ge?.access_token&&(ye=await fetch("https://graph.microsoft.com/v1.0/me/drive/root/children?$select=id,name,size,folder,file",{headers:{Authorization:`Bearer ${Ge.access_token}`}}))}const Be=((await ye.json()).value||[]).filter(Ge=>!!(Ge.folder||Ge.file&&Ge.file.mimeType&&Ge.file.mimeType.startsWith("audio/")));le(Be)}catch(ye){console.error("Failed to list OneDrive files",ye)}},ft=async()=>{try{(await openBrickDB()).transaction(["cloudTokens"],"readwrite").objectStore("cloudTokens").delete("onedrive"),alert("Disconnected OneDrive")}catch(Y){console.warn("Failed to disconnect OneDrive",Y)}},pt=async()=>{const Y=Object.keys(Ce).filter(Ue=>Ce[Ue]);if(!Y.length)return;const ye=await Re("google");if(!ye?.access_token)return;const Ne=[];for(const Ue of Y){const Xe=ve.find(M=>M.id===Ue);if(!Xe)continue;const qe=await J(Xe,ye.access_token);Ne.push(...qe)}const Be=new Map;Ne.forEach(Ue=>Be.set(Ue.id,Ue));const Ge=Array.from(Be.values()).map(Ue=>({id:`gdrive-${Ue.id}`,name:Ue.name,artist:"Unknown Artist",album:"Unknown Album",addedAt:Date.now(),fileId:Ue.id,cloudId:Ue.id,filePath:null,accessToken:ye.access_token,provider:"google",cloudProvider:"google",format:Ue.mimeType?.split("/")?.pop()?.toUpperCase()||"MP3",size:Ue.size?Number(Ue.size):0,audioUrl:"",isCloud:!0,type:"cloud"}));try{const qe=(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks");for(const M of Ge)qe.put(M);u(M=>[...M,...Ge]),_e([]),He({})}catch(Ue){console.error("Failed to import Drive files",Ue)}},D=async()=>{const Y=Object.keys(ae).filter(Ue=>ae[Ue]);if(!Y.length)return;const ye=await Re("onedrive");if(!ye?.access_token)return;const Ne=[];for(const Ue of Y){const Xe=Z.find(M=>M.id===Ue);if(!Xe)continue;const qe=await Pe(Xe,ye.access_token);Ne.push(...qe)}const Be=new Map;Ne.forEach(Ue=>Be.set(Ue.id,Ue));const Ge=Array.from(Be.values()).map(Ue=>({id:`onedrive-${Ue.id}`,name:Ue.name||Ue.id,artist:"Unknown Artist",album:"Unknown Album",addedAt:Date.now(),fileId:Ue.id,cloudId:Ue.id,filePath:null,accessToken:ye.access_token,provider:"onedrive",cloudProvider:"onedrive",format:Ue.file?.mimeType?.split("/")?.pop()?.toUpperCase()||"MP3",size:Ue.size||0,audioUrl:"",isCloud:!0,type:"cloud"}));try{const qe=(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks");for(const M of Ge)qe.put(M);u(M=>[...M,...Ge]),le([]),G({})}catch(Ue){console.error("Failed to import OneDrive files",Ue)}},j=async Y=>{if(Y)try{let ye=Y.split("/").pop()||Y;ye=ye.split("?")[0];const{title:Ne,artist:Be,album:Ge}=deriveFromFilename$1(ye),Xe=(ye.split(".").pop()||"").toUpperCase();let qe="google",M=Y,z=!1;if(Y.includes("drive.google.com")){qe="google";let tt=Y.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);tt||(tt=Y.match(/[?&]id=([a-zA-Z0-9_-]+)/)),tt&&(M=tt[1],z=!0)}else if(Y.includes("onedrive.live.com")||Y.includes("sharepoint.com")||Y.includes("1drv.ms")){qe="onedrive";const tt=new URL(Y),ne=tt.searchParams.get("id")||tt.searchParams.get("resid");ne&&(M=ne,z=!0)}if(z&&!(await Re(qe))?.access_token){alert(`Please connect your ${qe==="google"?"Google Drive":"OneDrive"} account first before importing URLs.`);return}const Ae={id:`cloud-${Date.now()}`,name:Ne||ye,artist:Be||"Unknown Artist",album:Ge||"Unknown Album",addedAt:Date.now(),fileId:M,cloudId:M,cloudProvider:qe,audioUrl:z?"":Y,filePath:null,accessToken:"",provider:qe,format:Xe,size:0,isCloud:!0,type:"cloud"};(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks").put(Ae),u(tt=>[...tt,Ae]),Q(!1),oe("")}catch(ye){console.error("Error adding cloud track from URL:",ye)}},A=async Y=>{try{const ye=Y.cloudId||Y.fileId;if(typeof ye=="string"&&(ye.startsWith("http://")||ye.startsWith("https://")))return Y.audioUrl=ye,(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks").put(Y),u(Ae=>Ae.map(Ie=>Ie.id===Y.id?Y:Ie)),Y.audioUrl;const Ne=await Re(Y.provider);if(!Ne?.access_token)throw new Error("No token");const Be=`http://localhost:4000/api/cloud/audio?provider=${Y.provider}&fileId=${ye}&accessToken=${encodeURIComponent(Ne.access_token)}`;return Y.audioUrl=Be,Y.accessToken=Ne.access_token,Y.cloudProvider=Y.provider,Y.cloudId=ye,Y.isCloud=!0,(await openBrickDB()).transaction(["cloudTracks"],"readwrite").objectStore("cloudTracks").put(Y),u(qe=>qe.map(M=>M.id===Y.id?Y:M)),Be}catch(ye){return console.warn("Failed to resolve audio url for cloud track:",ye),null}},U=async Y=>Y.audioUrl?await parseRemoteMetadataFromUrl(Y.audioUrl,Y.name):null,te=()=>{R(""),_(!0)},he=async()=>{if(P.trim().toUpperCase()==="DELETE")try{H(!0),a.forEach(ye=>{const Ne=ye.audioUrl??ye.url;if(Ne&&Ne.startsWith("blob:"))try{URL.revokeObjectURL(Ne)}catch{}}),c([]),await clearAllTracksInDB(),console.log("All local tracks deleted from vault"),_(!1)}catch(ye){console.error("Failed to delete all local tracks:",ye)}finally{H(!1),R("")}},ke=Y=>{const ye=Math.floor(Y/60),Ne=Math.floor(Y%60);return`${ye}:${Ne.toString().padStart(2,"0")}`},ct=Y=>Y?`${Y>1e3?Math.round(Y/1e3):Math.round(Y)} kbps`:void 0,bt=Y=>Y<1024*1024?`${(Y/1024).toFixed(1)} KB`:`${(Y/(1024*1024)).toFixed(1)} MB`,ht=Y=>{const ye=Y.codec||Y.format,Ne=ct(Y.bitrate);return ye&&Ne?`${String(ye).toUpperCase()} / ${Ne}`:ye?String(ye).toUpperCase():Ne??"AUDIO"},yt=[...a,...l].reduce((Y,ye)=>{const Ne=`${ye.album}:::${ye.albumArtist||ye.artist}`;return Y[Ne]||(Y[Ne]=[]),Y[Ne].push(ye),Y},{});Object.keys(yt).forEach(Y=>{yt[Y].sort((ye,Ne)=>{const Be=ye.discNumber||1,Ge=Ne.discNumber||1;if(Be!==Ge)return Be-Ge;const Ue=(ye.trackNumber||0)-(Ne.trackNumber||0);return Ue!==0?Ue:(ye.addedAt||0)-(Ne.addedAt||0)})});const mt=Object.entries(yt).map(([Y,ye])=>{const[Ne,Be]=Y.split(":::");return{name:Ne,artist:Be,tracks:ye,coverArt:ye.find(Ge=>Ge.coverArt)?.coverArt,year:ye.find(Ge=>Ge.year)?.year,totalDuration:ye.reduce((Ge,Ue)=>Ge+(Ue.duration??0),0)}});return reactExports.useEffect(()=>{O(1)},[E,b,w,a.length,l.length]),jsxRuntimeExports.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:`p-4 flex items-center justify-between cursor-pointer local-vault-header ${h?"expanded":""}`,onClick:we,onKeyDown:Y=>{(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),we())},role:"button",tabIndex:0,"aria-expanded":h,"aria-controls":"local-vault-panel",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 local-vault-info",children:[jsxRuntimeExports.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"local-vault-title",style:{color:"#e0e0e0",fontFamily:'"Chakra Petch", "Syne", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',fontWeight:700,fontSize:"1.125rem"},children:jsxRuntimeExports.jsx("strong",{children:"Local Vault"})}),jsxRuntimeExports.jsxs("p",{className:"local-vault-meta mono",style:{color:"#a0a0a0"},children:[a.length+l.length," ",a.length+l.length===1?"track":"tracks","  ",a.length," local, ",l.length," cloud"]})]})]}),jsxRuntimeExports.jsx("div",{className:"local-vault-indicator","aria-hidden":"true"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 local-vault-actions flex-nowrap",style:{alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",maxWidth:"220px",margin:"0 auto"},children:[jsxRuntimeExports.jsx("button",{onClick:Y=>{Y.stopPropagation(),ue.current?.click()},className:"flex-shrink-0 rounded-lg transition-all duration-200 hover:scale-110",style:{width:"34px",height:"34px",minWidth:"34px",padding:0,background:"linear-gradient(120deg, rgba(211, 47, 47, 0.2), rgba(211, 47, 47, 0.32))",border:"1px solid #ff5f6d",boxShadow:"0 0 0 1px rgba(255, 95, 109, 0.25)",display:"flex",alignItems:"center",justifyContent:"center"},title:"Import Tracks",children:jsxRuntimeExports.jsx(Upload,{size:14,color:"#ff5f6d"})}),jsxRuntimeExports.jsx("button",{onClick:Y=>{Y.stopPropagation(),K.current?.click()},className:"flex-shrink-0 rounded-lg transition-all duration-200 hover:scale-110",style:{width:"34px",height:"34px",minWidth:"34px",padding:0,backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f",display:"flex",alignItems:"center",justifyContent:"center"},title:"Import Folder (preserves artist/album path)",children:jsxRuntimeExports.jsx(FolderOpen,{size:14,color:"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:Y=>{Y.stopPropagation(),ge()},disabled:!1,className:"flex-shrink-0 rounded-lg transition-all duration-200 hover:scale-110 ",style:{width:"34px",height:"34px",minWidth:"34px",padding:0,backgroundColor:"rgba(0, 188, 212, 0.15)",border:"1px solid #00bcd4",display:"flex",alignItems:"center",justifyContent:"center"},title:"Connect Cloud Storage",children:jsxRuntimeExports.jsx(Cloud,{size:14,color:"#00bcd4"})}),jsxRuntimeExports.jsx("button",{onClick:Y=>{Y.stopPropagation(),te()},className:"flex-shrink-0 rounded-lg transition-all duration-200 hover:scale-110",style:{marginLeft:0,width:"34px",height:"34px",minWidth:"34px",padding:0,backgroundColor:"transparent",border:"1px solid #ff1744",color:"#ff1744",display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete all local tracks (requires typed confirmation)",children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#ff1744"})})]}),L&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>Q(!1)}),jsxRuntimeExports.jsxs("div",{className:"relative z-50 w-full max-w-2xl p-4 rounded bg-[#252525] border",style:{borderColor:"#333"},children:[jsxRuntimeExports.jsx("h4",{className:"mono mb-2",style:{color:"#fff"},children:"Cloud Connector"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono text-sm text-gray-400 mb-2",children:"Paste a public URL to an audio file (eg. direct link to .flac/.mp3)"}),jsxRuntimeExports.jsx("input",{value:se,onChange:Y=>oe(Y.target.value),placeholder:"https://...",className:"w-full p-2 mb-2 rounded bg-[#1b1b1b] border",style:{borderColor:"#333",color:"#fff"}}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Q(!1),className:"px-3 py-1 rounded bg-transparent border text-gray-400",style:{borderColor:"#333"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>j(se),className:"px-3 py-1 rounded bg-cyan-600 text-white",children:"Add Track"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono text-sm text-gray-400 mb-2",children:"Cloud Services"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:ee,disabled:!1,className:"px-3 py-1 rounded bg-[#1a73e8] text-white ",title:"Connect Google Drive",children:"Connect Google Drive"}),jsxRuntimeExports.jsx("button",{onClick:Te,className:"px-3 py-1 rounded bg-[#0f1720] text-white border",style:{borderColor:"#333"},children:"List Files"}),jsxRuntimeExports.jsx("button",{onClick:pt,className:"px-3 py-1 rounded bg-[#00bcd4] text-white",children:"Import Selected"}),jsxRuntimeExports.jsx("button",{onClick:$e,className:"px-3 py-1 rounded bg-transparent border text-gray-400",style:{borderColor:"#333"},children:"Disconnect"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:pe,disabled:!1,className:"px-3 py-1 rounded bg-[#4f8ef7] text-white ",title:"Connect OneDrive",children:"Connect OneDrive"}),jsxRuntimeExports.jsx("button",{onClick:gt,className:"px-3 py-1 rounded bg-[#0f1720] text-white border",style:{borderColor:"#333"},children:"List Files"}),jsxRuntimeExports.jsx("button",{onClick:D,className:"px-3 py-1 rounded bg-[#0063B1] text-white",children:"Import Selected"}),jsxRuntimeExports.jsx("button",{onClick:ft,className:"px-3 py-1 rounded bg-transparent border text-gray-400",style:{borderColor:"#333"},children:"Disconnect"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 max-h-64 overflow-auto",children:[ve.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"mono",style:{color:"#d0d0d0",marginBottom:"6px"},children:"Google Drive Files"}),ve.map(Y=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 mono mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Ce[Y.id],onChange:ye=>He(Ne=>({...Ne,[Y.id]:ye.target.checked}))}),jsxRuntimeExports.jsxs("span",{className:"truncate",style:{color:Y.mimeType==="application/vnd.google-apps.folder"?"#a0a0a0":"#e0e0e0"},children:[Y.mimeType==="application/vnd.google-apps.folder"?" ":" ",Y.name]})]},Y.id))]}),Z.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"mono",style:{color:"#d0d0d0",marginBottom:"6px"},children:"OneDrive Files"}),Z.map(Y=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 mono mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!ae[Y.id],onChange:ye=>G(Ne=>({...Ne,[Y.id]:ye.target.checked}))}),jsxRuntimeExports.jsxs("span",{className:"truncate",style:{color:Y.folder?"#a0a0a0":"#e0e0e0"},children:[Y.folder?" ":" ",Y.name]})]},Y.id))]})]})]})]}),jsxRuntimeExports.jsx("input",{ref:ue,type:"file",accept:"audio/*,.flac,.wav,.mp3,.m4a,.aac,.ogg,.aif,.aiff,.alac,.wv,.mka",multiple:!0,onChange:W,className:"hidden"}),jsxRuntimeExports.jsx("input",{ref:K,type:"file",multiple:!0,onChange:W,className:"hidden",accept:"audio/*,.flac,.wav,.mp3,.m4a,.aac,.ogg,.aif,.aiff,.alac,.wv,.mka",webkitdirectory:"true"})]}),jsxRuntimeExports.jsxs("div",{className:`hydraulic-panel ${h?"open":""}`,id:"local-vault-panel",children:[jsxRuntimeExports.jsx("div",{className:"hydraulic-content",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[m&&jsxRuntimeExports.jsxs("div",{className:"mb-3 px-3 py-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:["Importing ",m.processed,"/",m.total," files..."]}),jsxRuntimeExports.jsx("div",{className:"w-full h-1 rounded-full mt-2",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full",style:{width:`${m.processed/Math.max(1,m.total)*100}%`,background:"linear-gradient(to right, #d32f2f, #b71c1c)"}})})]}),p?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.85rem"},children:"Loading tracks..."})]}):a.length===0&&l.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(Music,{size:24,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#b0b0b0",fontSize:"0.85rem"},children:"No local tracks imported yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:"Import FLAC, WAV, or MP3 files to play privately"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>v("tracks"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:E==="tracks"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${E==="tracks"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(ListMusic,{size:14,color:E==="tracks"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:E==="tracks"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Tracks"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("albums"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:E==="albums"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${E==="albums"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Album,{size:14,color:E==="albums"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:E==="albums"?"#d32f2f":"#a0a0a0",fontSize:"0.75rem"},children:"Albums"})]}),E==="tracks"&&jsxRuntimeExports.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Sort:"}),jsxRuntimeExports.jsxs("select",{value:b,onChange:Y=>y(Y.target.value),className:"mono px-3 py-2 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:"added",children:"Added"}),jsxRuntimeExports.jsx("option",{value:"title",children:"AZ"}),jsxRuntimeExports.jsx("option",{value:"artist",children:"Artist"})]})]})]}),w&&E==="albums"&&jsxRuntimeExports.jsx("button",{onClick:()=>T(null),className:"flex items-center gap-2 px-3 py-2 rounded-lg mb-4 transition-all duration-200 hover:scale-105",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:" Back to Albums"})}),E==="tracks"?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[(()=>{const Y=[...a,...l];b==="title"?Y.sort((Ue,Xe)=>(Ue.name||"").localeCompare(Xe.name||"",void 0,{sensitivity:"base"})):b==="artist"?Y.sort((Ue,Xe)=>(Ue.artist||"").localeCompare(Xe.artist||"",void 0,{sensitivity:"base"})):Y.sort((Ue,Xe)=>(Ue.addedAt||0)-(Xe.addedAt||0));const ye=Y.length,Ne=(B-1)*V,Be=Math.min(Ne+V,ye);return Y.slice(Ne,Be)})().map(Y=>jsxRuntimeExports.jsxs("div",{className:"group flex items-center gap-4 p-3 rounded-lg transition-all duration-200",onClick:async()=>{await F(Y)},style:{gap:"0.35rem 1rem",gridTemplateColumns:"minmax(0,2fr) minmax(0,1.1fr) minmax(0,1fr) minmax(64px,84px)",fontFamily:"Syne",alignItems:"center",alignContent:"center"},children:[jsxRuntimeExports.jsxs("h4",{className:"mono truncate flex items-center gap-2",style:{color:"#f5f5f5",fontSize:"0.95rem",fontWeight:400,letterSpacing:"0.01em",fontFamily:"Syne"},title:Y.name,children:[Y.coverArt?jsxRuntimeExports.jsx("img",{src:Y.coverArt,alt:"Album cover",className:"w-8 h-8 rounded object-cover flex-shrink-0"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#333333"},children:jsxRuntimeExports.jsx(Music,{size:12,color:"#666666"})}),Y.type==="cloud"&&jsxRuntimeExports.jsx(Cloud,{size:12,color:"#00bcd4"}),Y.name||"Untitled"]}),jsxRuntimeExports.jsx("span",{className:"mono truncate",style:{color:"#d0d0d0",fontSize:"0.82rem",fontWeight:400,fontFamily:"Syne"},title:Y.artist,children:Y.artist||"Unknown Artist"}),jsxRuntimeExports.jsx("span",{className:"mono truncate hidden sm:block",style:{color:"#a3a3a3",fontSize:"0.8rem",fontWeight:400,fontFamily:"Syne"},title:Y.album,children:Y.album||"Unknown Album"}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end",style:{alignSelf:"center"},children:jsxRuntimeExports.jsx("span",{className:"mono px-2 py-1 rounded",style:{border:"1px solid #d32f2f",color:"#d32f2f",backgroundColor:"rgba(211, 47, 47, 0.08)",fontSize:"0.7rem",letterSpacing:"0.02em"},children:Y.type==="local"?ht(Y):"CLOUD"})}),jsxRuntimeExports.jsxs("div",{className:"col-span-4 flex items-center gap-3",style:{marginTop:0},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#7c7c7c",fontSize:"0.72rem"},children:ke(Y.duration??0)}),Y.size?jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#666666",fontSize:"0.72rem"},children:[" ",bt(Y.size)]}):null]}),jsxRuntimeExports.jsx("button",{onClick:async ye=>{ye.stopPropagation(),await F(Y)},"aria-label":`Play ${Y.name||"track"} by ${Y.artist||"unknown artist"}`,className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:i===Y.id?"#d32f2f":"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:i===Y.id&&s?jsxRuntimeExports.jsx(Pause,{size:16,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:16,color:i===Y.id?"#ffffff":"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:ye=>{ye.stopPropagation(),fe(Y.id)},className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#d32f2f"})})]},Y.id)),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#b0b0b0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:V,onChange:Y=>q(parseInt(Y.target.value,10)||25),className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>O(Y=>Math.max(1,Y-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#b0b0b0",fontSize:"0.75rem"},children:B}),jsxRuntimeExports.jsx("button",{onClick:()=>O(Y=>Y+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:"Next"})]})]})]}):w?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:(()=>{const Y=mt.find(Xe=>Xe.name===w.name&&Xe.artist===w.artist);if(!Y)return null;const ye=Y.tracks,Ne={};let Be=1,Ge=0;return ye.forEach((Xe,qe)=>{const M=Xe.trackNumber??qe+1;let z=Xe.discNumber??void 0;z===void 0?(qe===0?Be=1:M<Ge&&(Be+=1),z=Be):Be=z,Ge=M;const Ae=z??1;Ne[Ae]||(Ne[Ae]={disc:Ae,items:[]}),Ne[Ae].items.push({track:Xe,index:qe})}),Object.values(Ne).sort((Xe,qe)=>Xe.disc-qe.disc).map(Xe=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 px-3 py-2 mb-2 mt-4",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"8px"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#d32f2f",fontSize:"0.75rem",fontWeight:600},children:["DISC ",Xe.disc]})}),Xe.items.map(({track:qe,index:M})=>jsxRuntimeExports.jsxs("div",{className:"group grid items-center gap-3 p-3 rounded-lg transition-all duration-200",style:{gridTemplateColumns:"32px 1fr 140px 96px",backgroundColor:i===qe.id?"rgba(211, 47, 47, 0.1)":"#1a1a1a",border:`1px solid ${i===qe.id?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-8 text-center",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:qe.trackNumber??M+1})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",style:{gridColumn:"2"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-0",style:{alignItems:"center"},children:[jsxRuntimeExports.jsxs("h4",{className:"mono truncate flex items-center gap-2",style:{color:"#e0e0e0",fontSize:"0.85rem",margin:0,lineHeight:"1.2"},children:[qe.type==="cloud"&&jsxRuntimeExports.jsx(Cloud,{size:12,color:"#00bcd4"}),qe.name]}),qe.codec&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0"},children:String(qe.codec).toUpperCase()}),(qe.bitDepth||qe.sampleRate)&&jsxRuntimeExports.jsxs("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",width:"136px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",padding:"0 8px",fontSize:"0.72rem"},children:[jsxRuntimeExports.jsx("span",{style:{color:qe.bitDepth===24?"#c6a700":"#a0a0a0"},children:qe.bitDepth?`${qe.bitDepth}-bit`:""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:qe.sampleRate?`${qe.sampleRate} Hz`:""})]})]}),jsxRuntimeExports.jsxs("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.7rem",marginTop:"2px",lineHeight:"1.2"},children:[qe.artist,"  ",ke(qe.duration??0)]})]}),jsxRuntimeExports.jsx("button",{"aria-label":`Play ${qe.name||"track"} by ${qe.artist||"unknown artist"}`,onClick:async()=>{await F(qe)},className:"flex-shrink-0 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200",style:{backgroundColor:i===qe.id?"#d32f2f":"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:s&&i===qe.id?jsxRuntimeExports.jsx(Pause,{size:16,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:16,color:i===qe.id?"#ffffff":"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>fe(qe.id),className:"flex-shrink-0 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsx(Trash2,{size:14,color:"#d32f2f"})})]},qe.id))]},`disc-${Xe.disc}`))})()}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(()=>{const Y=mt.length,ye=(B-1)*V,Ne=Math.min(ye+V,Y);return mt.slice(ye,Ne)})().map((Y,ye)=>jsxRuntimeExports.jsxs("div",{className:"group rounded-lg overflow-hidden transition-all duration-200 hover:scale-105 cursor-pointer",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:()=>T({name:Y.name,artist:Y.artist}),children:[jsxRuntimeExports.jsxs("div",{className:"relative aspect-square",children:[Y.coverArt?jsxRuntimeExports.jsx("img",{src:Y.coverArt,alt:Y.name,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx(Album,{size:48,color:"#666666"})}),jsxRuntimeExports.jsx("button",{"aria-label":`Play album ${Y.name}`,onClick:Ne=>{Ne.stopPropagation(),r?.(Y.tracks)},className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:24,color:"#ffffff"})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h4",{className:"mono truncate",style:{color:"#e0e0e0",fontSize:"0.85rem",fontFamily:"Syne",fontWeight:400},children:Y.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate",style:{color:"#a0a0a0",fontSize:"0.75rem",fontFamily:"Syne",fontWeight:400},children:Y.artist}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[Y.year&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:Y.year}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:[Y.tracks.length," tracks"]})]})]})]},`${Y.name}-${Y.artist}-${ye}`))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#b0b0b0",fontSize:"0.7rem"},children:"Per page:"}),jsxRuntimeExports.jsxs("select",{value:V,onChange:Y=>q(parseInt(Y.target.value,10)||25),className:"mono px-2 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:[jsxRuntimeExports.jsx("option",{value:10,children:"10"}),jsxRuntimeExports.jsx("option",{value:25,children:"25"}),jsxRuntimeExports.jsx("option",{value:50,children:"50"}),jsxRuntimeExports.jsx("option",{value:100,children:"100"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>O(Y=>Math.max(1,Y-1)),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#f0f0f0",fontSize:"0.75rem"},children:"Prev"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#b0b0b0",fontSize:"0.75rem"},children:B}),jsxRuntimeExports.jsx("button",{onClick:()=>O(Y=>Y+1),className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",fontSize:"0.75rem"},children:"Next"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.05)",border:"1px solid rgba(211, 47, 47, 0.2)"},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:" Local files are stored in your browser and only playable on this device. They cannot be shared or accessed by others."})})]})}),k&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.35)"},onClick:()=>_(!1),children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-lg shadow-lg",style:{backgroundColor:"#0f0f11",border:"1px solid rgba(255, 23, 68, 0.14)",boxShadow:"0 8px 24px rgba(0,0,0,0.45)",fontFamily:"Syne, SFMono-Regular, ui-monospace",padding:"16px"},role:"dialog","aria-modal":"true","aria-labelledby":"purge-vault-title",onClick:Y=>Y.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 pb-2",children:[jsxRuntimeExports.jsx("h3",{id:"purge-vault-title",className:"mono",style:{color:"#ff6b78",fontSize:"0.98rem",fontWeight:700},children:" PURGE VAULT?"}),jsxRuntimeExports.jsx("button",{"aria-label":"Close purge dialog",onClick:()=>_(!1),className:"rounded p-1",style:{color:"#d0d0d0",background:"transparent",border:"none"},children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M18 6L6 18",stroke:"#d0d0d0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M6 6L18 18",stroke:"#d0d0d0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 pt-2 pb-3",children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d6d6d6",fontSize:"0.9rem",lineHeight:1.4},children:"This action is irreversible. All local database entries will be wiped. Files on disk will remain untouched."}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("label",{className:"mono",style:{color:"#bdbdbd",fontSize:"0.8rem",display:"block",marginBottom:"6px"},children:["Type ",jsxRuntimeExports.jsx("span",{style:{color:"#ff1744",fontWeight:700},children:"DELETE"})," to confirm"]}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:P,onChange:Y=>R(Y.target.value),className:"w-full px-3 py-2 rounded-lg mono",style:{backgroundColor:"#151516",border:"1px solid #2b2b2f",color:"#f3f3f3",fontSize:"0.9rem"},placeholder:"Type DELETE to enable the purge"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{_(!1),R("")},className:"px-3 py-1.5 rounded mono",style:{backgroundColor:"#19191a",border:"1px solid #2f2f35",color:"#dcdcdc"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:he,disabled:P.trim().toUpperCase()!=="DELETE"||I,className:"px-3 py-1.5 rounded mono transition-all duration-150",style:{backgroundColor:P.trim().toUpperCase()==="DELETE"&&!I?"#ff1744":"transparent",border:"1px solid #ff1744",color:P.trim().toUpperCase()==="DELETE"&&!I?"#ffffff":"#ff1744",opacity:P.trim().toUpperCase()==="DELETE"&&!I?1:.7,cursor:P.trim().toUpperCase()==="DELETE"&&!I?"pointer":"not-allowed",minWidth:"96px"},children:I?"Purging":"Purge"})]})]})]})})]})]})}const mockCurrentUser={name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400",connectionsUsed:12,connectionsMax:20,tier:"Mason"},mockArtists=[{id:"artist-1",name:"Pink Floyd",image:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800",globalChosenUsers:234567,genre:"Progressive Rock"},{id:"artist-2",name:"David Bowie",image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",globalChosenUsers:198432,genre:"Art Rock"},{id:"artist-3",name:"Luna Chen",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",globalChosenUsers:15203,genre:"Jazz Fusion"},{id:"artist-4",name:"Broken Compass",image:"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400",globalChosenUsers:6892,genre:"Post-Rock"}],mockTracks=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"},{id:"track-4",title:"Cement Horizon",artist:"Broken Compass",album:"The Wall",duration:"6:12",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=400",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"}],mockPlaylists=[{id:"playlist-1",name:"Foundation Mix",coverImage:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",trackCount:24,isPublic:!0,hiRes:!0,creator:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},structuralIntegrity:85,tracks:[mockTracks[0],mockTracks[1],mockTracks[2],mockTracks[3]]},{id:"playlist-2",name:"Industrial Lounge",coverImage:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",trackCount:18,isPublic:!0,hiRes:!0,creator:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},structuralIntegrity:92,tracks:[mockTracks[1],mockTracks[2],mockTracks[3],mockTracks[0]]},{id:"playlist-3",name:"Night Builds",coverImage:"https://images.unsplash.com/photo-1690013429722-87852aae164b?w=400",trackCount:32,isPublic:!0,hiRes:!1,creator:{id:"user-1",name:"Alex Morgan",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400"},structuralIntegrity:78,tracks:[mockTracks[2],mockTracks[3],mockTracks[0],mockTracks[1]]},{id:"playlist-4",name:"Concrete Soul",coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",trackCount:15,isPublic:!0,hiRes:!0,creator:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},structuralIntegrity:88,tracks:[mockTracks[3],mockTracks[0],mockTracks[1],mockTracks[2]]},{id:"playlist-5",name:"Mortar Sessions",coverImage:"https://images.unsplash.com/photo-1620456029959-f27e9935cbb9?w=400",trackCount:21,isPublic:!0,hiRes:!0,creator:{id:"user-5",name:"Casey Wu",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400"},structuralIntegrity:95,tracks:[mockTracks[0],mockTracks[2],mockTracks[1],mockTracks[3]]}],mockConnections$1=[{id:"conn-1",user:{id:"user-2",name:"Jordan Rivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400"},matchScore:88,mutualArtists:["Nora Vex","Luna Chen","Broken Compass"],connectedDate:"2025-10-15"},{id:"conn-2",user:{id:"user-3",name:"Sam Chen",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400"},matchScore:82,mutualArtists:["The Midnight Architects","Luna Chen"],connectedDate:"2025-11-02"},{id:"conn-3",user:{id:"user-4",name:"Taylor Brooks",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400"},matchScore:76,mutualArtists:["Nora Vex","Broken Compass"],connectedDate:"2025-11-10"}],mockFeedEvents=[{id:"event-1",type:"playlist_created",timestamp:"2025-11-22T14:30:00Z",data:{user:mockConnections$1[0].user,playlist:mockPlaylists[0]}},{id:"event-2",type:"connection_formed",timestamp:"2025-11-21T09:15:00Z",data:{userA:mockConnections$1[1].user,userB:{id:"user-6",name:"Riley Martinez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400"},matchScore:84}},{id:"event-3",type:"patronage_update",timestamp:"2025-11-20T18:45:00Z",data:{user:mockConnections$1[0].user,artist:mockArtists[0]}},{id:"event-4",type:"playlist_created",timestamp:"2025-11-19T11:20:00Z",data:{user:mockConnections$1[2].user,playlist:mockPlaylists[3]}}],STORE_NAME$1="recentlyPlayedTracks",LOCAL_TRACK_STORE="localTracks";async function openRecentlyPlayedDB(){return openBrickDB()}async function getLocalTrackById(e){try{const r=await openBrickDB();return r.objectStoreNames.contains(LOCAL_TRACK_STORE)?await new Promise(i=>{const c=r.transaction([LOCAL_TRACK_STORE],"readonly").objectStore(LOCAL_TRACK_STORE).get(e);c.onsuccess=()=>{const l=c.result;i(l??null)},c.onerror=()=>i(null)}):null}catch{return null}}async function addRecentlyPlayedTrack(e){const s=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readwrite").objectStore(STORE_NAME$1);return new Promise((a,c)=>{const l=s.put({...e,playedAt:Date.now()});l.onsuccess=()=>a(),l.onerror=()=>c(l.error)})}async function getRecentlyPlayedTracks(e=10){const a=(await openRecentlyPlayedDB()).transaction([STORE_NAME$1],"readonly").objectStore(STORE_NAME$1).index("playedAt");return new Promise((c,l)=>{const u=a.getAll();u.onsuccess=async()=>{const d=(Array.isArray(u.result)?u.result:[]).filter(f=>typeof f?.playedAt=="number"&&typeof f.trackId=="string").sort((f,m)=>m.playedAt-f.playedAt).slice(0,e),p=await Promise.all(d.map(async f=>{const m=typeof f.audioUrl=="string"?f.audioUrl:"";if(!(m===""||m.includes("SoundHelix")||m.startsWith("blob:")))return f;const E=await getLocalTrackById(f.trackId);if(E===null)return f;let v=m;if(E.file instanceof Blob)try{v=URL.createObjectURL(E.file)}catch{}return{...f,audioUrl:v||m,album:f.album??E.album,quality:f.quality??E.format,codecLabel:f.codecLabel??E.codecLabel,bitDepth:f.bitDepth??E.bitDepth,sampleRate:f.sampleRate??E.sampleRate,bitrateKbps:f.bitrateKbps??E.bitrateKbps,durationSeconds:f.durationSeconds??(typeof E.duration=="number"?E.duration:void 0)}}));if(p.length===0){const f=[{trackId:"test-track-1",trackTitle:"Test Track 1",artistName:"Test Artist",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",playedAt:Date.now()-1e3,album:"Test Album",quality:"FLAC",bitrateKbps:1411,durationSeconds:240},{trackId:"test-track-2",trackTitle:"Test Track 2",artistName:"Another Artist",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=300",audioUrl:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",playedAt:Date.now()-2e3,album:"Another Album",quality:"MP3",bitrateKbps:320,durationSeconds:260}];c(f),f.forEach(m=>{addRecentlyPlayedTrack(m).catch(()=>{})})}else c(p)},u.onerror=()=>l(u.error)})}const STORE_NAME="recentlyPlayedPlaylists";async function openRecentlyPlayedPlaylistsDB(){return openBrickDB()}async function addRecentlyPlayedPlaylist(e){const s=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME);return new Promise((a,c)=>{const l=s.put({...e,playedAt:Date.now()});l.onsuccess=()=>a(),l.onerror=()=>c(l.error)})}async function getRecentlyPlayedPlaylists(e=10){const a=(await openRecentlyPlayedPlaylistsDB()).transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).index("playedAt");return new Promise((c,l)=>{const u=a.getAll();u.onsuccess=()=>{const h=Array.isArray(u.result)?u.result:[],d=f=>typeof f=="number"&&Number.isFinite(f)?f:0,p=h.sort((f,m)=>d(m.playedAt)-d(f.playedAt)).slice(0,e);c(p)},u.onerror=()=>l(u.error)})}function HomeScreenV2({onPlaylistClick:e,onArtistPress:r,onFeedClick:i,activeFilter:s,onFilterChange:a,onLocalTrackPlay:c,onLocalAlbumPlay:l}){const[u,h]=reactExports.useState("all"),[d,p]=reactExports.useState(null),[f,m]=reactExports.useState(null),[g,E]=reactExports.useState(!1),[v,b]=reactExports.useState("brick"),[y,w]=reactExports.useState([]),[T,k]=reactExports.useState([]),[_,P]=reactExports.useState(!0),R=K=>K.codec||K.quality||"MP3",I=s!==void 0?s:u;reactExports.useEffect(()=>{console.log("HomeScreenV2 useEffect triggered - loading recent items");let K=!0;return(async()=>{try{console.log("Starting sequential loading of recent items..."),P(!0),console.log("Loading recently played playlists...");const we=await getRecentlyPlayedPlaylists(3);if(console.log("Successfully loaded playlists:",we),!K){console.log("Component unmounted during playlist loading, aborting");return}console.log("Loading recently played tracks...");const W=await getRecentlyPlayedTracks(3);if(console.log("Successfully loaded tracks:",W),!K){console.log("Component unmounted during track loading, aborting");return}console.log("Setting recent items state"),w(we),k(W),console.log("Recent items state updated successfully")}catch(we){console.error("Failed to load recent items:",we),K&&(w([]),k([]))}finally{K&&(P(!1),console.log("Loading recent items completed"))}})(),()=>{console.log("HomeScreenV2 useEffect cleanup - component unmounting"),K=!1}},[]);const H=mockArtists.slice(0,2),B=mockPlaylists.slice(0,5),O=K=>{if(d&&(d.pause(),d.currentTime=0),f?.id===K.id){g?(d?.pause(),E(!1)):(d?.play(),E(!0));return}const ce=new Audio(K.url);ce.addEventListener("ended",()=>{E(!1)}),ce.play(),p(ce),m(K),E(!0),c&&c(K)},V=K=>K?K>=85?"large":K>=70?"medium":"small":"medium",q=K=>{const ce=[...K].sort((we,W)=>(W.structuralIntegrity||0)-(we.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:"#151515",border:"1px solid #333333"},children:[[150,300,450].map((we,W)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${we}px`,height:`${we}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},W)),ce[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>e(ce[0].id),children:[jsxRuntimeExports.jsx("img",{src:ce[0].coverImage,alt:ce[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:ce[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[ce[0].structuralIntegrity,"% Integrity"]})]})]}),ce.slice(1).map((we,W)=>{const fe=we.structuralIntegrity||50,F=fe>=85?100:fe>=70?80:60,L=ce.length-1,Q=W/L*Math.PI*2,se=fe>=85?150:fe>=70?220:290,oe=50+Math.cos(Q)*(se/8),ge=50+Math.sin(Q)*(se/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${oe}%`,top:`${ge}%`,transform:"translate(-50%, -50%)"},onClick:()=>e(we.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${F}px`,height:`${F}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:we.coverImage,alt:we.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${F}px`,height:`${F}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:we.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[fe,"% Integrity"]})]})]},we.id)})]})},ue=()=>{if(I==="feed")return null;if(I==="all")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:H,onArtistPress:r}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8",children:jsxRuntimeExports.jsx(LocalMusicUploader,{onPlayTrack:O,onPlayAlbum:l,currentPlayingId:f?.id,isPlaying:g})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Materials"}),_?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Loading recent materials..."})}):jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[y.map(K=>jsxRuntimeExports.jsxs("button",{onClick:()=>e(K.playlistId),className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:K.coverImage,alt:K.playlistName,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:K.playlistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[typeof K.creatorName=="string"?K.creatorName:"Your Collection","  ",K.trackCount," tracks"]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`playlist-${K.playlistId}`)),T.map(K=>jsxRuntimeExports.jsxs("button",{onClick:()=>{c&&c({id:K.trackId,name:K.trackTitle,artist:K.artistName,coverArt:K.coverArt,url:K.audioUrl,album:K.album,duration:K.durationSeconds??"0:00",format:R(K),bitDepth:K.bitDepth,sampleRate:K.sampleRate,bitrate:K.bitrate??K.bitrateKbps,codec:K.codec??K.codecLabel??K.quality})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:K.coverArt,alt:K.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0",fontFamily:'"Chakra Petch", "Syne", sans-serif',fontWeight:600},children:K.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem",fontFamily:'"Chakra Petch", "Syne", sans-serif',fontWeight:500},children:K.artistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#777777",fontSize:"0.8rem"},children:[K.album||"Unknown Album","  ",R(K)]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${K.trackId}`)),y.length===0&&T.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recent materials yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})]})]});if(I==="payroll")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HeroCarousel,{artists:H,onArtistPress:r}),jsxRuntimeExports.jsx("div",{className:"px-6 pt-8 pb-24",children:jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl text-center",style:{backgroundColor:"rgba(30, 30, 30, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-2",style:{color:"#e0e0e0"},children:"Your Monthly Support"}),jsxRuntimeExports.jsxs("p",{className:"mono mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:["You're directly supporting ",H.length," artists this month"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-8",children:H.map(K=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"1.5rem"},children:"$8.00"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:K.name})]},K.id))})]})})]});if(I==="network")return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(NetworkStories,{connections:mockConnections$1,onStoryClick:K=>console.log("Story clicked:",K)}),jsxRuntimeExports.jsxs("div",{className:"px-6 pt-4 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"From Your Connections"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>b("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:v==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${v==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:v==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>b("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:v==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${v==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:v==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),v==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:B.sort((K,ce)=>(ce.structuralIntegrity||0)-(K.structuralIntegrity||0)).map(K=>{const ce=V(K.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:ce==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:K,onClick:()=>e(K.id),size:"small"})},K.id)})}):q(B)]})]});if(I==="recent")return jsxRuntimeExports.jsxs("div",{className:"px-6 pt-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Recently Played"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>b("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:v==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${v==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:v==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>b("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:v==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${v==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:v==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),T.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Tracks"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:T.map(K=>jsxRuntimeExports.jsxs("button",{onClick:()=>{c&&c({id:K.trackId,name:K.trackTitle,artist:K.artistName,coverArt:K.coverArt,url:K.audioUrl,album:K.album,duration:K.durationSeconds??"0:00",format:R(K),bitDepth:K.bitDepth,sampleRate:K.sampleRate,bitrate:K.bitrate??K.bitrateKbps,codec:K.codec??K.codecLabel??K.quality})},className:"w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(37, 37, 37, 0.5)"},children:[jsxRuntimeExports.jsx("img",{src:K.coverArt,alt:K.trackTitle,className:"w-14 h-14 rounded-lg object-cover flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0",fontFamily:'"Chakra Petch", "Syne", sans-serif',fontWeight:600},children:K.trackTitle}),jsxRuntimeExports.jsx("p",{className:"truncate",style:{color:"#a0a0a0",fontSize:"0.875rem",fontFamily:'"Chakra Petch", "Syne", sans-serif',fontWeight:500},children:K.artistName}),jsxRuntimeExports.jsxs("p",{className:"truncate",style:{color:"#777777",fontSize:"0.8rem"},children:[K.album||"Unknown Album","  ",R(K)]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx(Play,{size:16,fill:"#e0e0e0",color:"#e0e0e0"})})]},`track-${K.trackId}`))})]}),y.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h4",{className:"mb-4",style:{color:"#e0e0e0"},children:"Recent Playlists"}),v==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:y.sort((K,ce)=>(ce.structuralIntegrity||0)-(K.structuralIntegrity||0)).map(K=>{const ce={id:K.playlistId,name:K.playlistName,coverImage:K.coverImage,creator:K.creatorName,trackCount:K.trackCount,structuralIntegrity:K.structuralIntegrity||50},we=V(K.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:we==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:ce,onClick:()=>e(K.playlistId),size:"small"})},K.playlistId)})}):q(y.map(K=>({id:K.playlistId,name:K.playlistName,coverImage:K.coverImage,structuralIntegrity:K.structuralIntegrity||50})))]}),y.length===0&&T.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No recently played items yet"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666",fontSize:"0.875rem"},children:"Play some music to see it here"})]})]})};return jsxRuntimeExports.jsx("div",{className:`min-h-screen ${I==="network"||I==="recent"||I==="feed"?"pt-6 md:pt-16":""}`,children:ue()})}const mockConnections=[{user:{id:"user1",name:"Alina R.",avatar:"https://placehold.co/40x40/4f46e5/ffffff?text=AR"},matchScore:85,x:25,y:75},{user:{id:"user2",name:"Ben C.",avatar:"https://placehold.co/40x40/10b981/ffffff?text=BC"},matchScore:72,x:70,y:20},{user:{id:"user3",name:"Cathy L.",avatar:"https://placehold.co/40x40/f97316/ffffff?text=CL"},matchScore:91,x:45,y:55},{user:{id:"user4",name:"David M.",avatar:"https://placehold.co/40x40/ef4444/ffffff?text=DM"},matchScore:65,x:10,y:30}],useTheme=()=>({colors:{bg:{primary:"#1a1a1a",secondary:"#252525"},text:{primary:"#e0e0e0",secondary:"#a0aaae"},border:"#333333",accent:"#d32f2f"}}),IA_METADATA_BASE_URL="https://archive.org/metadata",IA_SEARCH_BASE_URL="https://archive.org/advancedsearch.php",IA_COVER_IMAGE_BASE_URL="https://archive.org/services/img",formatDuration=e=>{if(!e)return"N/A";const r=parseFloat(e);if(isNaN(r))return e;const i=Math.floor(r/60),s=Math.floor(r%60);return`${i}:${s.toString().padStart(2,"0")}`},fetchWithRetry=async(e,r=3)=>{for(let i=0;i<r;i++)try{const s=await fetch(e);if(!s.ok)throw s.status===404||s.status===403?new Error(`Item not found or forbidden (Status: ${s.status})`):new Error(`HTTP error! status: ${s.status}`);const a=s.headers.get("content-type");return a&&a.indexOf("application/json")!==-1?s.json():s.text()}catch(s){if(i<r-1){const a=2**i*1e3;await new Promise(c=>setTimeout(c,a))}else throw s}},AudioPlayer=({currentTrack:e,colors:r})=>{const i=reactExports.useRef(null),[s,a]=reactExports.useState(!1),[c,l]=reactExports.useState(1),[u,h]=reactExports.useState(0),[d,p]=reactExports.useState(0);reactExports.useEffect(()=>{i.current&&e?(i.current.src=e.downloadUrl,i.current.load(),i.current.play().then(()=>{a(!0)}).catch(b=>{console.error("Autoplay failed:",b),a(!1)})):i.current&&(i.current.pause(),i.current.currentTime=0,a(!1))},[e]);const f=()=>{i.current&&(s?i.current.pause():i.current.play(),a(!s))},m=b=>{const y=parseFloat(b.target.value);i.current&&(i.current.volume=y,l(y))},g=()=>{i.current&&h(i.current.currentTime)},E=()=>{i.current&&(p(i.current.duration),h(0))},v=b=>{const y=Math.floor(b/60),w=Math.floor(b%60);return`${y}:${w.toString().padStart(2,"0")}`};return e?jsxRuntimeExports.jsx("footer",{className:"fixed bottom-0 left-0 right-0 p-4 border-t shadow-2xl transition-transform duration-300 z-10",style:{backgroundColor:r.bg.secondary,borderColor:r.border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 max-w-7xl mx-auto",children:[jsxRuntimeExports.jsx("audio",{ref:i,onTimeUpdate:g,onLoadedMetadata:E,onPlay:()=>a(!0),onPause:()=>a(!1),onEnded:()=>a(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[jsxRuntimeExports.jsx("img",{src:e.coverArt,alt:e.album,className:"w-10 h-10 rounded object-cover flex-shrink-0 mr-3",onError:b=>{b.currentTarget.src="https://placehold.co/40x40/252525/ffffff?text=IA"}}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold truncate",style:{color:r.text.primary},children:e.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs truncate",style:{color:r.text.secondary},children:[e.artist," - ",e.album]})]})]}),jsxRuntimeExports.jsx("button",{onClick:f,className:"p-2 rounded-full transition-colors duration-200",style:{backgroundColor:r.accent,color:"#ffffff"},children:s?jsxRuntimeExports.jsx(Pause,{size:20,fill:"white"}):jsxRuntimeExports.jsx(Play,{size:20,fill:"white"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 w-1/4 hidden md:flex",children:[jsxRuntimeExports.jsx("span",{className:"text-xs",style:{color:r.text.secondary},children:v(u)}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:d,value:u,onChange:b=>{i.current&&(i.current.currentTime=parseFloat(b.target.value))},className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{accentColor:r.accent}}),jsxRuntimeExports.jsx("span",{className:"text-xs",style:{color:r.text.secondary},children:v(d)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 hidden sm:flex",children:[jsxRuntimeExports.jsx(Volume2,{size:16,style:{color:r.text.secondary}}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:c,onChange:m,className:"w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{accentColor:r.accent}})]})]})}):jsxRuntimeExports.jsx("footer",{className:"fixed bottom-0 left-0 right-0 p-4 border-t shadow-2xl transition-transform duration-300",style:{backgroundColor:r.bg.secondary,borderColor:r.border},children:jsxRuntimeExports.jsx("p",{className:"text-center text-sm",style:{color:r.text.secondary},children:"Search for music to start playing."})})};function RadarScreen({onUserClick:e,onTrackClick:r}){const{colors:i}=useTheme(),[s,a]=reactExports.useState(null),[c,l]=reactExports.useState(""),[u,h]=reactExports.useState("all"),[d,p]=reactExports.useState("users"),[f,m]=reactExports.useState({artists:[],tracks:[]}),[g,E]=reactExports.useState(!1),[v,b]=reactExports.useState(null),[y,w]=reactExports.useState(null);reactExports.useEffect(()=>{m({artists:[],tracks:[]}),b(null)},[d]);const k=mockConnections.map((R,I)=>{const B=45-Math.max(0,Math.min(100,R.matchScore))*.35,O=I/mockConnections.length*Math.PI*2;return{...R,x:50+Math.cos(O)*B,y:50+Math.sin(O)*B}}).filter(R=>R.user.name.toLowerCase().includes(c.toLowerCase())),_=reactExports.useCallback(async R=>{if(b(null),d==="music"&&R.length>2){E(!0),m({artists:[],tracks:[]});try{const I=`mediatype:audio AND (title:"${R}" OR subject:"${R}")`,H=`${IA_SEARCH_BASE_URL}?q=${encodeURIComponent(I)}&fl[]=identifier&output=json&rows=15`,B=await fetchWithRetry(H),V=(typeof B=="string"?JSON.parse(B):B).response?.docs?.map(ce=>ce.identifier).filter(Boolean)||[];if(V.length===0){b("No matching items found on Internet Archive."),E(!1);return}const q=[],ue=V.map(async ce=>{try{const we=`${IA_METADATA_BASE_URL}/${ce}`,W=await fetchWithRetry(we);if(W.files){const fe=Array.isArray(W.metadata.title)?W.metadata.title[0]:W.metadata.title,F=Array.isArray(W.metadata.creator)?W.metadata.creator[0]:W.metadata.creator||"Unknown Artist",L=`${IA_COVER_IMAGE_BASE_URL}/${ce}`;W.files.filter(Q=>Q.source==="original"&&Q.format&&Q.format.includes("MP3")).forEach(Q=>{const se=Q.title||Q.name.replace(/\.(mp3|flac|ogg)$/i,"").replace(/_/g," "),oe=formatDuration(Q.length),ge=Q.bitrate?`${Q.bitrate} kbps`:"N/A",ve=`https://archive.org/download/${ce}/${Q.name}`;q.push({id:`${ce}-${Q.name}`,title:se,artist:F,album:fe,coverArt:L,duration:oe,bitrate:ge,downloadUrl:ve})})}}catch(we){console.warn(`Failed to fetch metadata for item ${ce}:`,we)}});await Promise.allSettled(ue);const K=Array.from(new Map(q.map(ce=>[ce.id,ce])).values());m(ce=>({...ce,tracks:K}))}catch(I){console.error("Internet Archive search failed:",I),b("A critical error occurred while searching the Archive.")}finally{E(!1)}}else m({artists:[],tracks:[]})},[d]),P=reactExports.useCallback(R=>{l(R),window.searchTimer&&clearTimeout(window.searchTimer),window.searchTimer=setTimeout(()=>{_(R)},500)},[_]);return jsxRuntimeExports.jsxs("div",{className:"pb-28 px-6 pt-6 md:pt-16 min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{letterSpacing:"-0.02em",color:i.text.primary},children:"The Radar"}),jsxRuntimeExports.jsx("p",{style:{color:i.text.secondary,fontSize:"0.95rem"},children:"Discover users with compatible taste."})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 focus-within:ring-2 focus-within:ring-[#d32f2f] focus-within:ring-opacity-30",style:{backgroundColor:i.bg.secondary,border:`1px solid ${i.border}`},children:[jsxRuntimeExports.jsx(Search,{size:20,color:i.text.secondary}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:d==="users"?"Search for Materials (Architects, Genres, Bricks)...":"Search the Archive for songs, artists, albums...",value:c,onChange:R=>P(R.target.value),className:"flex-1 bg-transparent outline-none",style:{color:i.text.primary,fontSize:"0.95rem"}})]})}),jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#333333",border:"1px solid #555555"},children:jsxRuntimeExports.jsxs("p",{className:"mono text-xs",style:{color:"#ffffff"},children:["Debug: Search Mode: ",d,' | Query: "',c,'" | Artists: ',f.artists.length," | Tracks: ",f.tracks.length," | Error: ",v||"None"]})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>p("users"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:d==="users"?i.accent:i.bg.secondary,color:d==="users"?"#ffffff":i.text.secondary,border:"1px solid",borderColor:d==="users"?i.accent:i.border,boxShadow:d==="users"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Users,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:d==="users"?600:400},children:"USERS"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>p("music"),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:d==="music"?i.accent:i.bg.secondary,color:d==="music"?"#ffffff":i.text.secondary,border:"1px solid",borderColor:d==="music"?i.accent:i.border,boxShadow:d==="music"?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:[jsxRuntimeExports.jsx(Music,{size:16}),jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:d==="music"?600:400},children:"MUSIC"})]})]})}),d==="users"&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto",children:[{id:"all",label:"All"},{id:"architects",label:"Architects Only"},{id:"local",label:"Local"},{id:"global",label:"Global"}].map(R=>jsxRuntimeExports.jsx("button",{onClick:()=>h(R.id),className:"px-4 py-2.5 rounded-xl whitespace-nowrap transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:u===R.id?i.accent:i.bg.secondary,color:u===R.id?"#ffffff":i.text.secondary,border:"1px solid",borderColor:u===R.id?i.accent:i.border,boxShadow:u===R.id?"0 0 12px rgba(211, 47, 47, 0.3)":"none"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.8rem",fontWeight:u===R.id?600:400},children:R.label})},R.id))}),d==="users"&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:i.text.secondary,fontSize:"0.8rem",letterSpacing:"0.05em"},children:[k.length," COMPATIBLE USERS FOUND"]})}),d==="music"&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:g?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-[#d32f2f] border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"SEARCHING INTERNET ARCHIVE..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[v&&jsxRuntimeExports.jsx("div",{className:"p-3 mb-4 rounded-lg",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("p",{className:"mono text-sm",style:{color:"#d32f2f"},children:["Error: ",v]})}),f.artists.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[f.artists.length," ARTISTS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:f.artists.map(R=>jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg transition-all hover:bg-[#333333]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:R.image,alt:R.name,className:"w-10 h-10 rounded object-cover",onError:I=>{I.currentTarget.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:R.name}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[R.genre,"  ",R.globalChosenUsers," users"]})]})]})},R.id))})]}),f.tracks.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:[f.tracks.length," TRACKS FOUND"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:f.tracks.map(R=>jsxRuntimeExports.jsx("div",{onClick:()=>{w(R),typeof r=="function"&&r(R,f.tracks)},className:"block p-3 rounded-lg transition-all hover:bg-[#333333] cursor-pointer active:scale-[0.99]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:R.coverArt,alt:R.album,className:"w-10 h-10 rounded object-cover flex-shrink-0",onError:I=>{I.currentTarget.src="https://placehold.co/40x40/252525/ffffff?text=IA"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"truncate text-sm",style:{color:"#e0e0e0"},children:R.title||"Unknown Title"}),jsxRuntimeExports.jsxs("p",{className:"truncate text-xs",style:{color:"#a0a0a0"},children:[R.artist,"  ",R.album,"  ",R.bitrate]})]}),jsxRuntimeExports.jsx("span",{className:"mono text-xs flex-shrink-0",style:{color:"#546e7a"},children:R.duration})]})},R.id))})]}),f.artists.length===0&&f.tracks.length===0&&c.length>2&&!v&&jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.8rem"},children:"NO RESULTS FOUND"})]})}),d==="users"&&jsxRuntimeExports.jsx("div",{className:"relative rounded-lg mb-6 overflow-hidden",style:{backgroundColor:i.bg.primary,height:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",border:`1px solid ${i.border}`},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative",style:{width:"100%",height:"100%"},children:[[100,200,300].map((R,I)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${R}px`,height:`${R}px`,border:"1px solid rgba(84, 110, 122, 0.2)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},I)),jsxRuntimeExports.jsx("div",{className:"absolute w-4 h-4 rounded-full",style:{backgroundColor:"#d32f2f",left:"50%",top:"50%",transform:"translate(-50%, -50%)",boxShadow:"0 0 20px rgba(211, 47, 47, 0.6)"}}),k.map((R,I)=>jsxRuntimeExports.jsxs("div",{onClick:()=>e(R.user.id),className:"absolute cursor-pointer group",style:{left:`${R.x}%`,top:`${R.y}%`,transform:"translate(-50%, -50%)"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full animate-ping",style:{backgroundColor:"rgba(84, 110, 122, 0.4)",width:"32px",height:"32px",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx("img",{src:R.user.avatar,alt:R.user.name,className:"relative w-8 h-8 rounded-full border-2 group-hover:scale-125 transition-transform",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:R.user.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[R.matchScore,"% Match"]})]})]},I))]})})}),d==="users"&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:i.bg.secondary,border:`1px solid ${i.border}`},children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:i.text.secondary,fontSize:"0.75rem"},children:"Tap a dot to view Structural Integrity. Closer dots = Higher compatibility."})}),jsxRuntimeExports.jsx(AudioPlayer,{currentTrack:y,colors:i})]})}function VaultScreen({onOpenConnectionManagement:e,onSignOut:r}){const i="Mason",s=[{name:"Sketcher",price:"Free",priceValue:0,icon:Layers,color:"#546e7a",features:["10 Bond Slots","320kbps Audio Quality","2 Artist Patronage Slots","Basic Blueprint Creation"],isCurrent:i==="Sketcher"},{name:"Mason",price:"$4.99/mo",priceValue:4.99,icon:Hammer,color:"#d32f2f",features:["25 Bond Slots","Hi-Res Audio (FLAC)","2 Artist Patronage Slots","Advanced Analytics","Priority Support"],isCurrent:i==="Mason"},{name:"Architect",price:"$9.99/mo",priceValue:9.99,icon:Crown,color:"#c6a700",features:["50 Bond Slots","Hi-Res Audio (24-bit)","3 Artist Patronage Slots","Advanced Analytics","Priority Artist Payouts","Early Access to New Artists","Exclusive Content"],isCurrent:i==="Architect"}];return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-6 md:pt-16",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",children:"Account Blueprints"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Configure your foundation settings."})]}),jsxRuntimeExports.jsxs("section",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Membership Tiers"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:s.map(a=>{const c=a.icon;return jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl relative overflow-hidden transition-all duration-200",style:{backgroundColor:a.isCurrent?"rgba(37, 37, 37, 0.8)":"rgba(37, 37, 37, 0.4)",border:a.isCurrent?`2px solid ${a.color}`:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:a.isCurrent?`0 8px 24px ${a.color}33`:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[a.isCurrent&&jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full",style:{backgroundColor:`${a.color}20`,border:`1px solid ${a.color}`},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:a.color,fontSize:"0.65rem"},children:"CURRENT"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${a.color}20`,border:`1px solid ${a.color}`},children:jsxRuntimeExports.jsx(c,{size:24,color:a.color})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:a.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:a.color,fontSize:"1.125rem"},children:a.price})]})]}),jsxRuntimeExports.jsx("ul",{className:"mb-6 space-y-2",children:a.features.map((l,u)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0",style:{backgroundColor:a.color}}),jsxRuntimeExports.jsx("span",{style:{color:"#cccccc",fontSize:"0.875rem"},children:l})]},u))}),!a.isCurrent&&jsxRuntimeExports.jsx("button",{className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:a.name==="Sketcher"?"transparent":`linear-gradient(to bottom, ${a.color}, ${a.color}dd)`,color:a.name==="Sketcher"?a.color:"#1a1a1a",border:a.name==="Sketcher"?`1px solid ${a.color}`:"none",boxShadow:a.name==="Sketcher"?"none":`0 4px 16px ${a.color}40`,fontWeight:600},children:a.name==="Sketcher"?"Downgrade":`Upgrade to ${a.name}`})]},a.name)})})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Audio Quality"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{size:20,color:"#e0e0e0"}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Force Hi-Res on Cellular"})]}),jsxRuntimeExports.jsx("div",{className:"relative w-12 h-6 rounded-full cursor-pointer transition-colors",style:{backgroundColor:"#d32f2f"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full transition-all",style:{backgroundColor:"#e0e0e0"}})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"QUALITY SELECTOR"}),[{label:"Gravel",value:"128kbps",active:!1},{label:"Stone",value:"320kbps",active:!1},{label:"Marble",value:"FLAC",active:!0}].map(a=>jsxRuntimeExports.jsx("button",{className:"w-full p-3 rounded-lg text-left transition-all",style:{backgroundColor:a.active?"#333333":"transparent",border:"1px solid",borderColor:a.active?"#d32f2f":"#333333"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{style:{color:"#e0e0e0"},children:a.label}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:a.value})]})},a.value))]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Data Ownership"}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("p",{className:"mb-4",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You own your listening history. Download it as .CSV at any time."}),jsxRuntimeExports.jsxs("button",{className:"w-full py-3 rounded-full flex items-center justify-center gap-2 transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export My Data"]})]})]}),jsxRuntimeExports.jsxs("section",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",children:"Account"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Privacy Settings"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:e,children:jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},children:"Bond Management"})}),jsxRuntimeExports.jsx("button",{className:"w-full p-4 rounded-lg text-left transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333"},onClick:r,children:jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f"},children:"Sign Out"})})]})]})]})}const wallHeader="_wallHeader_1vcia_33",wallTitle="_wallTitle_1vcia_51",pinkWallTitle="_pinkWallTitle_1vcia_69",toggleStack="_toggleStack_1vcia_87",toggleShell="_toggleShell_1vcia_101",toggleLabel="_toggleLabel_1vcia_113",toggleControl="_toggleControl_1vcia_129",toggleControlActive="_toggleControlActive_1vcia_157",toggleThumb="_toggleThumb_1vcia_169",toggleThumbActive="_toggleThumbActive_1vcia_187",toggleHint="_toggleHint_1vcia_199",pinkBadgeText="_pinkBadgeText_1vcia_213",navPinkButton="_navPinkButton_1vcia_223",navPinkLabel="_navPinkLabel_1vcia_237",pinkStyles={wallHeader,wallTitle,pinkWallTitle,toggleStack,toggleShell,toggleLabel,toggleControl,toggleControlActive,toggleThumb,toggleThumbActive,toggleHint,pinkBadgeText,navPinkButton,navPinkLabel};function ProfileScreen({onPlaylistClick:e,onCreatePlaylist:r,currentUser:i,isPinkMode:s=!1,onPinkToggle:a,pinkTierUnlocked:c=!1}){const{colors:l}=useTheme$1(),u=mockPlaylists,[h,d]=reactExports.useState("brick"),[p,f]=reactExports.useState("online"),[m,g]=reactExports.useState([]),[E,v]=reactExports.useState(0);reactExports.useEffect(()=>{const oe=p==="online"?u:[];if(oe.length>0){const ge=oe.reduce((_e,Z)=>_e+(Z.structuralIntegrity||0),0),ve=Math.round(ge/oe.length);v(ve),i&&ve!==i.diversityScore&&__vitePreload(async()=>{const{updateUser:_e}=await Promise.resolve().then(()=>auth);return{updateUser:_e}},void 0).then(({updateUser:_e})=>{_e({...i,diversityScore:ve}).catch(console.error)})}else v(0)},[u,p,i]),reactExports.useEffect(()=>{b();const oe=()=>{f("local"),b()};return window.addEventListener("switchToLocalWall",oe),()=>{window.removeEventListener("switchToLocalWall",oe)}},[]);const b=async()=>{try{const ve=(await y()).transaction(["playlists"],"readonly").objectStore("playlists"),_e=await new Promise((Z,le)=>{const Ce=ve.getAll();Ce.onsuccess=()=>Z(Ce.result),Ce.onerror=()=>le(Ce.error)});g(_e),console.log("Loaded playlists from IndexedDB:",_e)}catch(oe){console.error("Failed to load playlists:",oe),g([])}},y=()=>openBrickDB(),w=oe=>oe?oe>=85?"large":oe>=70?"medium":"small":"medium",T=24,k=oe=>{if(!oe.deletionQueuedAt)return!0;const ge=Date.now(),ve=oe.deletionScheduledFor||0;return ge>=ve},_=oe=>{if(!oe.deletionScheduledFor)return"";const ge=Date.now(),ve=oe.deletionScheduledFor-ge;if(ve<=0)return"Ready to delete";const _e=Math.floor(ve/(1e3*60*60)),Z=Math.floor(ve%(1e3*60*60)/(1e3*60));return _e>0?`Delete in ${_e}h ${Z}m`:`Delete in ${Z}m`},P=async oe=>{try{const _e=(await y()).transaction(["playlists"],"readwrite").objectStore("playlists"),Z=_e.get(oe);Z.onsuccess=()=>{const le=Z.result;if(le){const Ce=Date.now();le.deletionQueuedAt=Ce,le.deletionScheduledFor=Ce+T*60*60*1e3;const He=_e.put(le);He.onsuccess=()=>{b()}}}}catch(ge){console.error("Failed to queue playlist deletion:",ge)}},R=async oe=>{try{const _e=(await y()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise(Z=>{const le=_e.delete(oe);le.onsuccess=()=>Z()}),b()}catch(ge){console.error("Failed to delete playlist:",ge)}},I=async oe=>{try{const _e=(await y()).transaction(["playlists"],"readwrite").objectStore("playlists"),Z=_e.get(oe);Z.onsuccess=()=>{const le=Z.result;if(le){le.deletionQueuedAt=void 0,le.deletionScheduledFor=void 0;const Ce=_e.put(le);Ce.onsuccess=()=>{b()}}}}catch(ge){console.error("Failed to cancel deletion:",ge)}},H=oe=>{const ge=[...oe].sort((ve,_e)=>(_e.structuralIntegrity||0)-(ve.structuralIntegrity||0));return jsxRuntimeExports.jsxs("div",{className:"relative rounded-2xl mb-6 overflow-hidden flex items-center justify-center",style:{minHeight:"800px",backgroundColor:l.bg.primary,border:`1px solid ${l.border}`},children:[[150,300,450].map((ve,_e)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full",style:{width:`${ve}px`,height:`${ve}px`,border:"1px solid rgba(211, 47, 47, 0.15)",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},_e)),ge[0]&&jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onClick:()=>e(ge[0].id),children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:ge[0].coverImage,alt:ge[0].name,className:"rounded-xl transition-all duration-300 group-hover:scale-110",style:{width:"140px",height:"140px",objectFit:"cover",boxShadow:"0 0 40px rgba(211, 47, 47, 0.6)",border:"3px solid #d32f2f"}}),jsxRuntimeExports.jsxs("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2 px-3 py-2 rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.75rem"},children:ge[0].name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.7rem"},children:[ge[0].structuralIntegrity,"% Integrity"]})]})]}),ge.slice(1).map((ve,_e)=>{const Z=ve.structuralIntegrity||50,le=Z>=85?100:Z>=70?80:60,Ce=ge.length-1,He=_e/Ce*Math.PI*2,ae=Z>=85?150:Z>=70?220:290,G=50+Math.cos(He)*(ae/8),ee=50+Math.sin(He)*(ae/8);return jsxRuntimeExports.jsxs("div",{className:"absolute cursor-pointer group",style:{left:`${G}%`,top:`${ee}%`,transform:"translate(-50%, -50%)"},onClick:()=>e(ve.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg animate-ping",style:{backgroundColor:"rgba(211, 47, 47, 0.2)",width:`${le}px`,height:`${le}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),jsxRuntimeExports.jsx(ImageWithFallback,{src:ve.coverImage,alt:ve.name,className:"relative rounded-lg transition-all duration-300 group-hover:scale-125",style:{width:`${le}px`,height:`${le}px`,objectFit:"cover",border:"2px solid #d32f2f",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6)"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:ve.name}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.65rem"},children:[Z,"% Integrity"]})]})]},ve.id)})]})},B=i||mockCurrentUser,[O,V]=reactExports.useState(!1),[q,ue]=reactExports.useState(!1),[K,ce]=reactExports.useState(null),[we,W]=reactExports.useState(B.bio||""),fe=reactExports.useRef(null),F=oe=>{const ge=oe.target.files?.[0];ge&&ge.type.startsWith("image/")&&ce(ge)},L=async()=>{if(!(!i||!K))try{const oe=new FileReader;oe.onloadend=async()=>{const ge=oe.result,{updateUser:ve}=await __vitePreload(async()=>{const{updateUser:_e}=await Promise.resolve().then(()=>auth);return{updateUser:_e}},void 0);await ve({...i,avatar:ge}),window.location.reload()},oe.readAsDataURL(K)}catch(oe){console.error("Failed to update avatar:",oe)}},Q=async()=>{if(i)try{const{updateUser:oe}=await __vitePreload(async()=>{const{updateUser:ge}=await Promise.resolve().then(()=>auth);return{updateUser:ge}},void 0);await oe({...i,bio:we}),window.location.reload()}catch(oe){console.error("Failed to update bio:",oe)}},se=()=>{!c||!a||a(!s)};return jsxRuntimeExports.jsxs("div",{className:"pb-24 px-6 pt-10",children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.wallHeader,children:[jsxRuntimeExports.jsx("h1",{className:`${pinkStyles.wallTitle} ${s?pinkStyles.pinkWallTitle:""}`,children:"MY WALL"}),c&&jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleStack,children:[jsxRuntimeExports.jsxs("div",{className:pinkStyles.toggleShell,children:[jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleLabel,children:"THE WALL THEME"}),jsxRuntimeExports.jsx("button",{type:"button","aria-pressed":s,onClick:se,className:`${pinkStyles.toggleControl} ${s?pinkStyles.toggleControlActive:""}`,children:jsxRuntimeExports.jsx("span",{className:`${pinkStyles.toggleThumb} ${s?pinkStyles.toggleThumbActive:""}`})})]}),jsxRuntimeExports.jsx("span",{className:pinkStyles.toggleHint,children:s?"Pink Tier engaged":"Industrial base coat"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative inline-block",children:jsxRuntimeExports.jsx("img",{src:B.avatar,alt:B.name,onClick:()=>i&&V(!O),className:"w-24 h-24 rounded-full mx-auto mb-4 cursor-pointer hover:opacity-80 transition-opacity",style:{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.4)"}})}),O&&i&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:fe,type:"file",accept:"image/*",onChange:F,className:"hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>fe.current?.click(),className:"px-4 py-2 rounded",style:{backgroundColor:l.bg.secondary,border:`1px solid ${l.border}`,color:l.text.primary},children:K?K.name:"Choose Image"}),K&&jsxRuntimeExports.jsx("button",{onClick:L,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:l.text.primary},children:"Upload & Save"})]}),jsxRuntimeExports.jsx("h2",{className:"mb-1",style:{color:l.text.primary},children:B.name}),jsxRuntimeExports.jsxs("p",{style:{color:l.text.secondary},children:[B.tier," Tier"]}),jsxRuntimeExports.jsx("div",{className:"mt-4 max-w-md mx-auto",children:q&&i?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:we,onChange:oe=>W(oe.target.value),placeholder:"Tell us about yourself...",className:"px-3 py-2 rounded resize-none",rows:3,style:{backgroundColor:l.bg.secondary,border:`1px solid ${l.border}`,color:l.text.primary}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:Q,className:"px-4 py-2 rounded",style:{backgroundColor:"#d32f2f",color:l.text.primary},children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"px-4 py-2 rounded",style:{backgroundColor:l.bg.tertiary,color:l.text.secondary},children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm italic",style:{color:l.text.secondary},children:B.bio||"No bio yet"}),i&&jsxRuntimeExports.jsx("button",{onClick:()=>{W(B.bio||""),ue(!0)},className:"text-xs px-2 py-1 rounded",style:{backgroundColor:l.bg.secondary,color:l.text.secondary},children:"Edit"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"80",height:"80",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"#1a1a1a",strokeWidth:"8",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"url(#diversity-gradient)",strokeWidth:"8",fill:"none",strokeDasharray:`${E/100*220} 220`,strokeLinecap:"round"}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"diversity-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#4caf50"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#546e7a"})]})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:l.text.primary,fontSize:"1.5rem"},children:E})})]}),jsxRuntimeExports.jsx("h4",{style:{color:l.text.primary},children:"Authenticity"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:l.text.secondary,fontSize:"0.75rem"},children:"Diversity Score"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-lg text-center",style:{backgroundColor:l.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${l.border}`},children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:B.connectionsUsed}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"1.2rem"},children:["/",B.connectionsMax]})]}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:"Connections"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-1 mt-2",children:Array.from({length:B.connectionsMax}).map((oe,ge)=>jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ge<B.connectionsUsed?"#546e7a":"#1a1a1a"}},ge))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h3",{style:{color:l.text.primary},children:"The Wall"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>f("online"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:p==="online"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${p==="online"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(Music,{size:14,color:p==="online"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:p==="online"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:"Online"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>f("local"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:p==="local"?"rgba(211, 47, 47, 0.2)":"#252525",border:`1px solid ${p==="local"?"#d32f2f":"#333333"}`},children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:p==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:p==="local"?"#d32f2f":"#a0a0a0",fontSize:"0.7rem"},children:["Local (",m.length,")"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>r&&r(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:"rgba(211, 47, 47, 0.15)",border:"1px solid #d32f2f"},title:"Create Playlist",children:jsxRuntimeExports.jsx(Plus,{size:18,color:"#d32f2f"})}),jsxRuntimeExports.jsx("button",{onClick:()=>d("brick"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:h==="brick"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${h==="brick"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Brick Look",children:jsxRuntimeExports.jsx(Grid3x3,{size:18,color:h==="brick"?"#d32f2f":"#a0a0a0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>d("spiral"),className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:h==="spiral"?"rgba(211, 47, 47, 0.15)":"rgba(37, 37, 37, 0.5)",border:`1px solid ${h==="spiral"?"#d32f2f":"rgba(255, 255, 255, 0.05)"}`},title:"Spiral View",children:jsxRuntimeExports.jsx(Orbit,{size:18,color:h==="spiral"?"#d32f2f":"#a0a0a0"})})]})]}),p==="local"&&m.length===0?jsxRuntimeExports.jsxs("div",{className:"p-12 rounded-lg text-center",style:{backgroundColor:"#252525",border:"1px dashed #333333"},children:[jsxRuntimeExports.jsx(HardDrive,{size:48,color:"#666666",className:"mx-auto mb-4"}),jsxRuntimeExports.jsx("h4",{style:{color:"#a0a0a0",marginBottom:"8px"},children:"No Local Blueprints Yet"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.75rem"},children:'Create your first playlist from the "+" button'})]}):h==="brick"?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:(p==="online"?u:m).sort((oe,ge)=>(ge.structuralIntegrity||0)-(oe.structuralIntegrity||0)).map(oe=>{const ge=w(oe.structuralIntegrity);return jsxRuntimeExports.jsx("div",{className:ge==="large"?"col-span-2":"",children:jsxRuntimeExports.jsx(BrickCard,{playlist:oe,onClick:()=>e(oe.id),size:"small",onDelete:p==="local"?P:void 0,onCancelDelete:p==="local"?I:void 0,onConfirmDelete:p==="local"?R:void 0,canDelete:k(oe),timeUntilDeletion:_(oe)})},oe.id)})}):H(p==="online"?u:m)]})]})}function FeedScreen({currentUser:e}){const{colors:r}=useTheme$1(),[i,s]=reactExports.useState(""),[a,c]=reactExports.useState([]),l=()=>{if(!i.trim())return;const d={id:Date.now().toString(),content:i,user:{name:e?.name||"You",avatar:e?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100"},timestamp:new Date().toISOString(),likes:0};c([d,...a]),s("")},u=d=>{const p=new Date(d),m=new Date().getTime()-p.getTime(),g=Math.floor(m/(1e3*60*60));return g<1?"Just now":g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`},h=[...mockFeedEvents,{id:"feed-7",type:"listening_milestone",timestamp:new Date(Date.now()-1e3*60*60*5).toISOString(),data:{user:mockConnections$1[0].user,hours:100}},{id:"feed-8",type:"new_favorite",timestamp:new Date(Date.now()-1e3*60*60*8).toISOString(),data:{user:mockConnections$1[1].user,track:{title:"Architectural Daydreams",artist:mockArtists[2].name,coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400"},playCount:42}},{id:"feed-9",type:"playlist_created",timestamp:new Date(Date.now()-1e3*60*60*12).toISOString(),data:{user:mockConnections$1[2].user,playlist:{name:"Midnight Foundations",trackCount:28,coverImage:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}}},{id:"feed-10",type:"connection_formed",timestamp:new Date(Date.now()-1e3*60*60*18).toISOString(),data:{userA:mockConnections$1[0].user,userB:mockConnections$1[1].user,matchScore:87}}];return jsxRuntimeExports.jsx("div",{className:"pb-24",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 pt-6",children:[jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg mb-6",style:{backgroundColor:r.bg.secondary,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:`1px solid ${r.border}`},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:e?.avatar||"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100",alt:`${e?.name||"Your"} avatar`,className:"w-10 h-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("textarea",{value:i,onChange:d=>s(d.target.value),placeholder:"Share your thoughts on The Neighbourhood...",className:"w-full bg-[#1a1a1a] text-[#e0e0e0] rounded-lg p-3 resize-none focus:outline-none focus:ring-2 focus:ring-[#d32f2f] placeholder-[#555555]",rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>s(""),className:"px-4 py-2 rounded-lg transition-colors hover:opacity-80",style:{color:r.text.secondary,backgroundColor:r.bg.primary},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{onClick:l,disabled:!i.trim(),className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:i.trim()?r.accent:r.text.tertiary,color:"#e0e0e0",fontWeight:600},children:[jsxRuntimeExports.jsx(Send,{size:16}),"Post"]})]})]})]})}),a.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:a.map(d=>{const p=new Date,f=new Date(d.timestamp),m=p.getTime()-f.getTime(),g=Math.floor(m/(1e3*60*60)),E=g<1?"Just now":g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`;return jsxRuntimeExports.jsx("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("img",{src:d.user.avatar,alt:d.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("p",{style:{color:r.text.primary},className:"font-semibold",children:d.user.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:r.text.tertiary,fontSize:"0.7rem"},children:E})]}),jsxRuntimeExports.jsx("p",{style:{color:r.text.primary},className:"mb-3 leading-relaxed",children:d.content}),jsxRuntimeExports.jsxs("button",{onClick:()=>{const v=a.map(b=>b.id===d.id?{...b,likes:b.likes+1}:b);c(v)},className:"flex items-center gap-2 px-3 py-1 rounded-lg transition-colors hover:bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:d.likes>0?"#d32f2f":"none",color:d.likes>0?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:d.likes>0?d.likes:"Like"})]})]})]})},d.id)})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:h.map(d=>d.type==="playlist_created"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:d.data.user.avatar,alt:d.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:d.data.user.name})," created a new brick"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:u(d.timestamp)})]}),jsxRuntimeExports.jsx(Music,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("h4",{className:"mb-3",style:{color:"#e0e0e0"},children:d.data.playlist.name}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:4}).map((p,f)=>jsxRuntimeExports.jsx("img",{src:d.data.playlist.coverImage,alt:"",className:"w-full aspect-square object-cover rounded"},f))}),jsxRuntimeExports.jsxs("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[d.data.playlist.trackCount," tracks"]})]})]},d.id):d.type==="connection_formed"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("img",{src:d.data.userA.avatar,alt:d.data.userA.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"}),jsxRuntimeExports.jsx("img",{src:d.data.userB.avatar,alt:d.data.userB.name,className:"w-10 h-10 rounded-full border-2 border-[#252525]"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:d.data.userA.name})," connected with"," ",jsxRuntimeExports.jsx("strong",{children:d.data.userB.name})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:u(d.timestamp)})]}),jsxRuntimeExports.jsx(Users,{size:20,color:"#546e7a"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg text-center",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.5rem"},children:[d.data.matchScore,"%"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"STRUCTURAL INTEGRITY"})]})]},d.id):d.type==="patronage_update"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:d.data.user.avatar,alt:d.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:d.data.user.name})," chose a new artist for November"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:u(d.timestamp)})]}),jsxRuntimeExports.jsx(Crown,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:d.data.artist.image,alt:d.data.artist.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:d.data.artist.name}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:d.data.artist.genre})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen Ad-Free via ",d.data.user.name]})})]},d.id):d.type==="listening_milestone"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:d.data.user.avatar,alt:d.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:d.data.user.name})," reached ",d.data.hours," hours of listening"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:u(d.timestamp)})]}),jsxRuntimeExports.jsx(TrendingUp,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:d.data.user.avatar,alt:d.data.user.name,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:d.data.user.name}),jsxRuntimeExports.jsxs("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:[d.data.hours," hours of listening"]})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Celebrate with ",d.data.user.name]})})]},d.id):d.type==="new_favorite"?jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-lg",style:{backgroundColor:"#252525",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[jsxRuntimeExports.jsx("img",{src:d.data.user.avatar,alt:d.data.user.name,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("strong",{children:d.data.user.name})," added a new favorite track"]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:u(d.timestamp)})]}),jsxRuntimeExports.jsx(Heart,{size:20,color:"#d32f2f"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg flex items-center gap-4",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx("img",{src:d.data.track.coverArt,alt:d.data.track.title,className:"w-16 h-16 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:d.data.track.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:d.data.track.artist})]})]}),jsxRuntimeExports.jsx("button",{className:"w-full mt-3 py-2 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["Listen to ",d.data.track.title]})})]},d.id):null)}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx("button",{className:"px-6 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#a0a0a0"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{fontSize:"0.75rem"},children:"Load More"})})})]})})}const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const r=reactExports.useRef(null);return r.current===null&&(r.current=e()),r.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const r=reactExports.useContext(PresenceContext);if(r===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:a}=r,c=reactExports.useId();reactExports.useEffect(()=>{e&&a(c)},[e]);const l=reactExports.useCallback(()=>e&&s&&s(c),[c,s,e]);return!i&&s?[!1,l]:[!0]}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,noop=e=>e;let invariant=noop;function memo(e){let r;return()=>(r===void 0&&(r=e()),r)}const progress=(e,r,i)=>{const s=r-e;return s===0?1:(i-e)/s},secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,MotionGlobalConfig={useManualTiming:!1};function createRenderStep(e){let r=new Set,i=new Set,s=!1,a=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(d){c.has(d)&&(h.schedule(d),e()),d(l)}const h={schedule:(d,p=!1,f=!1)=>{const g=f&&s?r:i;return p&&c.add(d),g.has(d)||g.add(d),d},cancel:d=>{i.delete(d),c.delete(d)},process:d=>{if(l=d,s){a=!0;return}s=!0,[r,i]=[i,r],r.forEach(u),r.clear(),s=!1,a&&(a=!1,h.process(d))}};return h}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,r){let i=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=()=>i=!0,l=stepsOrder.reduce((y,w)=>(y[w]=createRenderStep(c),y),{}),{read:u,resolveKeyframes:h,update:d,preRender:p,render:f,postRender:m}=l,g=()=>{const y=performance.now();i=!1,a.delta=s?1e3/60:Math.max(Math.min(y-a.timestamp,maxElapsed),1),a.timestamp=y,a.isProcessing=!0,u.process(a),h.process(a),d.process(a),p.process(a),f.process(a),m.process(a),a.isProcessing=!1,i&&r&&(s=!1,e(g))},E=()=>{i=!0,s=!0,a.isProcessing||e(g)};return{schedule:stepsOrder.reduce((y,w)=>{const T=l[w];return y[w]=(k,_=!1,P=!1)=>(i||E(),T.schedule(k,_,P)),y},{}),cancel:y=>{for(let w=0;w<stepsOrder.length;w++)l[stepsOrder[w]].cancel(y)},state:a,steps:l}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:r=>featureProps[e].some(i=>!!r[i])};function loadFeatures(e){for(const r in e)featureDefinitions[r]={...featureDefinitions[r],...e[r]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=r=>r.startsWith("on")?!isValidMotionProp(r):e(r))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,r,i){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(shouldForward(a)||i===!0&&isValidMotionProp(a)||!r&&!isValidMotionProp(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function createDOMMotionComponentProxy(e){if(typeof Proxy>"u")return e;const r=new Map,i=(...s)=>e(...s);return new Proxy(i,{get:(s,a)=>a==="create"?e:(r.has(a)||r.set(a,e(a)),r.get(a))})}const MotionContext=reactExports.createContext({});function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(r=>isVariantLabel(e[r]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,r){if(isControllingVariants(e)){const{initial:i,animate:s}=e;return{initial:i===!1||isVariantLabel(i)?i:void 0,animate:isVariantLabel(s)?s:void 0}}return e.inherit!==!1?r:{}}function useCreateMotionContext(e){const{initial:r,animate:i}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:r,animate:i}),[variantLabelsAsDependency(r),variantLabelsAsDependency(i)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,r,i){return reactExports.useCallback(s=>{s&&e.onMount&&e.onMount(s),r&&(s?r.mount(s):r.unmount()),i&&(typeof i=="function"?i(s):isRefObject(i)&&(i.current=s))},[r])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,r,i,s,a){var c,l;const{visualElement:u}=reactExports.useContext(MotionContext),h=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),p=reactExports.useContext(MotionConfigContext).reducedMotion,f=reactExports.useRef(null);s=s||h.renderer,!f.current&&s&&(f.current=s(e,{visualState:r,parent:u,props:i,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const m=f.current,g=reactExports.useContext(SwitchLayoutGroupContext);m&&!m.projection&&a&&(m.type==="html"||m.type==="svg")&&createProjectionNode$1(f.current,i,a,g);const E=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{m&&E.current&&m.update(i,d)});const v=i[optimizedAppearDataAttribute],b=reactExports.useRef(!!v&&!(!((c=window.MotionHandoffIsComplete)===null||c===void 0)&&c.call(window,v))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,v)));return useIsomorphicLayoutEffect(()=>{m&&(E.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),microtask.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())}),reactExports.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,v)}),b.current=!1))}),m}function createProjectionNode$1(e,r,i,s){const{layoutId:a,layout:c,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:d}=r;e.projection=new i(e.latestValues,r["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!l||u&&isRefObject(u),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:h,layoutRoot:d})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createRendererMotionComponent({preloadedFeatures:e,createVisualElement:r,useRender:i,useVisualState:s,Component:a}){var c,l;e&&loadFeatures(e);function u(d,p){let f;const m={...reactExports.useContext(MotionConfigContext),...d,layoutId:useLayoutId(d)},{isStatic:g}=m,E=useCreateMotionContext(d),v=s(d,g);if(!g&&isBrowser){useStrictMode();const b=getProjectionFunctionality(m);f=b.MeasureLayout,E.visualElement=useVisualElement(a,v,m,r,b.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:E,children:[f&&E.visualElement?jsxRuntimeExports.jsx(f,{visualElement:E.visualElement,...m}):null,i(a,d,useMotionRef(v,E.visualElement,p),v,g,E.visualElement)]})}u.displayName=`motion.${typeof a=="string"?a:`create(${(l=(c=a.displayName)!==null&&c!==void 0?c:a.name)!==null&&l!==void 0?l:""})`}`;const h=reactExports.forwardRef(u);return h[motionComponentSymbol]=a,h}function useLayoutId({layoutId:e}){const r=reactExports.useContext(LayoutGroupContext).id;return r&&e!==void 0?r+"-"+e:e}function useStrictMode(e,r){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:r,layout:i}=featureDefinitions;if(!r&&!i)return{};const s={...r,...i};return{MeasureLayout:r?.isEnabled(e)||i?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function getValueState(e){const r=[{},{}];return e?.values.forEach((i,s)=>{r[0][s]=i.get(),r[1][s]=i.getVelocity()}),r}function resolveVariantFromProps(e,r,i,s){if(typeof r=="function"){const[a,c]=getValueState(s);r=r(i!==void 0?i:e.custom,a,c)}if(typeof r=="string"&&(r=e.variants&&e.variants[r]),typeof r=="function"){const[a,c]=getValueState(s);r=r(i!==void 0?i:e.custom,a,c)}return r}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e,isMotionValue=e=>!!(e&&e.getVelocity);function resolveMotionValue(e){const r=isMotionValue(e)?e.get():e;return isCustomValue(r)?r.toValue():r}function makeState({scrapeMotionValuesFromProps:e,createRenderState:r,onUpdate:i},s,a,c){const l={latestValues:makeLatestValues(s,a,c,e),renderState:r()};return i&&(l.onMount=u=>i({props:s,current:u,...l}),l.onUpdate=u=>i(u)),l}const makeUseVisualState=e=>(r,i)=>{const s=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),c=()=>makeState(e,r,s,a);return i?c():useConstant(c)};function makeLatestValues(e,r,i,s){const a={},c=s(e,{});for(const m in c)a[m]=resolveMotionValue(c[m]);let{initial:l,animate:u}=e;const h=isControllingVariants(e),d=isVariantNode(e);r&&d&&!h&&e.inherit!==!1&&(l===void 0&&(l=r.initial),u===void 0&&(u=r.animate));let p=i?i.initial===!1:!1;p=p||l===!1;const f=p?u:l;if(f&&typeof f!="boolean"&&!isAnimationControls(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const E=resolveVariantFromProps(e,m[g]);if(E){const{transitionEnd:v,transition:b,...y}=E;for(const w in y){let T=y[w];if(Array.isArray(T)){const k=p?T.length-1:0;T=T[k]}T!==null&&(a[w]=T)}for(const w in v)a[w]=v[w]}}}return a}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=e=>r=>typeof r=="string"&&r.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(e,r)=>r&&typeof e=="number"?r.transform(e):e,clamp=(e,r,i)=>i>r?r:i<e?e:i,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},createUnitType=e=>({test:r=>typeof r=="string"&&r.endsWith(e)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,r,i){let s="",a=!0;for(let c=0;c<numTransforms;c++){const l=transformPropOrder[c],u=e[l];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(l.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||i){const d=getValueAsType(u,numberValueTypes[l]);if(!h){a=!1;const p=translateAlias[l]||l;s+=`${p}(${d}) `}i&&(r[l]=d)}}return s=s.trim(),i?s=i(r,a?"":s):a&&(s="none"),s}function buildHTMLStyles(e,r,i){const{style:s,vars:a,transformOrigin:c}=e;let l=!1,u=!1;for(const h in r){const d=r[h];if(transformProps.has(h)){l=!0;continue}else if(isCSSVariableName(h)){a[h]=d;continue}else{const p=getValueAsType(d,numberValueTypes[h]);h.startsWith("origin")?(u=!0,c[h]=p):s[h]=p}}if(r.transform||(l||i?s.transform=buildTransform(r,e.transform,i):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:d="50%",originZ:p=0}=c;s.transformOrigin=`${h} ${d} ${p}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,r,i=1,s=0,a=!0){e.pathLength=1;const c=a?dashKeys:camelKeys;e[c.offset]=px.transform(-s);const l=px.transform(r),u=px.transform(i);e[c.array]=`${l} ${u}`}function calcOrigin$1(e,r,i){return typeof e=="string"?e:px.transform(r+i*e)}function calcSVGTransformOrigin(e,r,i){const s=calcOrigin$1(r,e.x,e.width),a=calcOrigin$1(i,e.y,e.height);return`${s} ${a}`}function buildSVGAttrs(e,{attrX:r,attrY:i,attrScale:s,originX:a,originY:c,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...d},p,f){if(buildHTMLStyles(e,d,f),p){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:g,dimensions:E}=e;m.transform&&(E&&(g.transform=m.transform),delete m.transform),E&&(a!==void 0||c!==void 0||g.transform)&&(g.transformOrigin=calcSVGTransformOrigin(E,a!==void 0?a:.5,c!==void 0?c:.5)),r!==void 0&&(m.x=r),i!==void 0&&(m.y=i),s!==void 0&&(m.scale=s),l!==void 0&&buildSVGPath(m,l,u,h,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderHTML(e,{style:r,vars:i},s,a){Object.assign(e.style,r,a&&a.getProjectionStyles(s));for(const c in i)e.style.setProperty(c,i[c])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,r,i,s){renderHTML(e,r,void 0,s);for(const a in r.attrs)e.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),r.attrs[a])}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}function isForcedMotionValue(e,{layout:r,layoutId:i}){return transformProps.has(e)||e.startsWith("origin")||(r||i!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,r,i){var s;const{style:a}=e,c={};for(const l in a)(isMotionValue(a[l])||r.style&&isMotionValue(r.style[l])||isForcedMotionValue(l,e)||((s=i?.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(c[l]=a[l]);return c}function scrapeMotionValuesFromProps(e,r,i){const s=scrapeMotionValuesFromProps$1(e,r,i);for(const a in e)if(isMotionValue(e[a])||isMotionValue(r[a])){const c=transformPropOrder.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[c]=e[a]}return s}function updateSVGDimensions(e,r){try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:e,prevProps:r,current:i,renderState:s,latestValues:a})=>{if(!i)return;let c=!!e.drag;if(!c){for(const u in a)if(transformProps.has(u)){c=!0;break}}if(!c)return;let l=!r;if(r)for(let u=0;u<layoutProps.length;u++){const h=layoutProps[u];e[h]!==r[h]&&(l=!0)}l&&frame.read(()=>{updateSVGDimensions(i,s),frame.render(()=>{buildSVGAttrs(s,a,isSVGTag(i.tagName),e.transformTemplate),renderSVG(i,s)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(e,r,i){for(const s in r)!isMotionValue(r[s])&&!isForcedMotionValue(s,i)&&(e[s]=r[s])}function useInitialMotionValues({transformTemplate:e},r){return reactExports.useMemo(()=>{const i=createHtmlRenderState();return buildHTMLStyles(i,r,e),Object.assign({},i.vars,i.style)},[r])}function useStyle(e,r){const i=e.style||{},s={};return copyRawValuesOnly(s,i,e),Object.assign(s,useInitialMotionValues(e,r)),s}function useHTMLProps(e,r){const i={},s=useStyle(e,r);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i}function useSVGProps(e,r,i,s){const a=reactExports.useMemo(()=>{const c=createSvgRenderState();return buildSVGAttrs(c,r,isSVGTag(s),e.transformTemplate),{...c.attrs,style:{...c.style}}},[r]);if(e.style){const c={};copyRawValuesOnly(c,e.style,e),a.style={...c,...a.style}}return a}function createUseRender(e=!1){return(i,s,a,{latestValues:c},l)=>{const h=(isSVGComponent(i)?useSVGProps:useHTMLProps)(s,c,l,i),d=filterProps(s,typeof i=="string",e),p=i!==reactExports.Fragment?{...d,...h,ref:a}:{},{children:f}=s,m=reactExports.useMemo(()=>isMotionValue(f)?f.get():f,[f]);return reactExports.createElement(i,{...p,children:m})}}function createMotionComponentFactory(e,r){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:e,useRender:createUseRender(a),createVisualElement:r,Component:s};return createRendererMotionComponent(l)}}function shallowCompare(e,r){if(!Array.isArray(r))return!1;const i=r.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(r[s]!==e[s])return!1;return!0}function resolveVariant(e,r,i){const s=e.getProps();return resolveVariantFromProps(s,r,i!==void 0?i:s.custom,e)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(r){this.stop=()=>this.runAll("stop"),this.animations=r.filter(Boolean)}get finished(){return Promise.all(this.animations.map(r=>"finished"in r?r.finished:r))}getAll(r){return this.animations[0][r]}setAll(r,i){for(let s=0;s<this.animations.length;s++)this.animations[s][r]=i}attachTimeline(r,i){const s=this.animations.map(a=>{if(supportsScrollTimeline()&&a.attachTimeline)return a.attachTimeline(r);if(typeof i=="function")return i(a)});return()=>{s.forEach((a,c)=>{a&&a(),this.animations[c].stop()})}}get time(){return this.getAll("time")}set time(r){this.setAll("time",r)}get speed(){return this.getAll("speed")}set speed(r){this.setAll("speed",r)}get startTime(){return this.getAll("startTime")}get duration(){let r=0;for(let i=0;i<this.animations.length;i++)r=Math.max(r,this.animations[i].duration);return r}runAll(r){this.animations.forEach(i=>i[r]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(r,i){return Promise.all(this.animations).then(r).catch(i)}}function getValueTransition(e,r){return e?e[r]||e.default||e:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let r=0;const i=50;let s=e.next(r);for(;!s.done&&r<maxGeneratorDuration;)r+=i,s=e.next(r);return r>=maxGeneratorDuration?1/0:r}function isGenerator(e){return typeof e=="function"}function attachTimeline(e,r){e.timeline=r,e.onfinish=null}const isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(e,r){const i=memo(e);return()=>{var s;return(s=supportsFlags[r])!==null&&s!==void 0?s:i()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(e,r,i=10)=>{let s="";const a=Math.max(Math.round(r/i),2);for(let c=0;c<a;c++)s+=e(progress(0,a-1,c))+", ";return`linear(${s.substring(0,s.length-2)})`};function isWaapiSupportedEasing(e){return!!(typeof e=="function"&&supportsLinearEasing()||!e||typeof e=="string"&&(e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,r,i,s])=>`cubic-bezier(${e}, ${r}, ${i}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,r){if(e)return typeof e=="function"&&supportsLinearEasing()?generateLinearEasing(e,r):isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(i=>mapEasingToNativeEasing(i,r)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(e,r,i){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const c=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e)}function setupGesture(e,r){const i=resolveElements(e),s=new AbortController,a={passive:!0,...r,signal:s.signal};return[i,a,()=>s.abort()]}function filterEvents$1(e){return r=>{r.pointerType==="touch"||isDragActive()||e(r)}}function hover(e,r,i={}){const[s,a,c]=setupGesture(e,i),l=filterEvents$1(u=>{const{target:h}=u,d=r(u);if(typeof d!="function"||!h)return;const p=filterEvents$1(f=>{d(f),h.removeEventListener("pointerleave",p)});h.addEventListener("pointerleave",p,a)});return s.forEach(u=>{u.addEventListener("pointerenter",l,a)}),c}const isNodeOrChild=(e,r)=>r?e===r?!0:isNodeOrChild(e,r.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return r=>{r.key==="Enter"&&e(r)}}function firePointerEvent(e,r){e.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,r)=>{const i=e.currentTarget;if(!i)return;const s=filterEvents(()=>{if(isPressing.has(i))return;firePointerEvent(i,"down");const a=filterEvents(()=>{firePointerEvent(i,"up")}),c=()=>firePointerEvent(i,"cancel");i.addEventListener("keyup",a,r),i.addEventListener("blur",c,r)});i.addEventListener("keydown",s,r),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),r)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,r,i={}){const[s,a,c]=setupGesture(e,i),l=u=>{const h=u.currentTarget;if(!isValidPressEvent(u)||isPressing.has(h))return;isPressing.add(h);const d=r(u),p=(g,E)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!isValidPressEvent(g)||!isPressing.has(h))&&(isPressing.delete(h),typeof d=="function"&&d(g,{success:E}))},f=g=>{p(g,i.useGlobalTarget||isNodeOrChild(h,g.target))},m=g=>{p(g,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",m,a)};return s.forEach(u=>{!isElementKeyboardAccessible(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(i.useGlobalTarget?window:u).addEventListener("pointerdown",l,a),u.addEventListener("focus",d=>enableKeyboardPress(d,a),a)}),c}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}};function addUniqueItem(e,r){e.indexOf(r)===-1&&e.push(r)}function removeItem(e,r){const i=e.indexOf(r);i>-1&&e.splice(i,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(r){return addUniqueItem(this.subscriptions,r),()=>removeItem(this.subscriptions,r)}notify(r,i,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](r,i,s);else for(let c=0;c<a;c++){const l=this.subscriptions[c];l&&l(r,i,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(e,r){return r?e*(1e3/r):0}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(r,i={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const c=time.now();this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(r),this.owner=i.owner}setCurrent(r){this.current=r,this.updatedAt=time.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,i){this.events[r]||(this.events[r]=new SubscriptionManager);const s=this.events[r].add(i);return r==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,i){this.passiveEffect=r,this.stopPassiveEffect=i}set(r,i=!0){!i||!this.passiveEffect?this.updateAndNotify(r,i):this.passiveEffect(r,this.updateAndNotify)}setWithVelocity(r,i,s){this.set(i),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-s}jump(r,i=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(r){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=r(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,r){return new MotionValue(e,r)}function setMotionValue(e,r,i){e.hasValue(r)?e.getValue(r).set(i):e.addValue(r,motionValue(i))}function setTarget(e,r){const i=resolveVariant(e,r);let{transitionEnd:s={},transition:a={},...c}=i||{};c={...c,...s};for(const l in c){const u=resolveFinalValueInKeyframes(c[l]);setMotionValue(e,l,u)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,r){const i=e.getValue("willChange");if(isWillChangeMotionValue(i))return i.add(r)}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const calcBezier=(e,r,i)=>(((1-3*i+3*r)*e+(3*i-6*r))*e+3*r)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,r,i,s,a){let c,l,u=0;do l=r+(i-r)/2,c=calcBezier(l,s,a)-e,c>0?i=l:r=l;while(Math.abs(c)>subdivisionPrecision&&++u<subdivisionMaxIterations);return l}function cubicBezier(e,r,i,s){if(e===r&&i===s)return noop;const a=c=>binarySubdivide(c,0,1,e,i);return c=>c===0||c===1?c:calcBezier(a(c),r,s)}const mirrorEasing=e=>r=>r<=.5?e(2*r)/2:(2-e(2*(1-r)))/2,reverseEasing=e=>r=>1-e(1-r),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,r)=>i=>!!(typeof i=="string"&&singleColorRegex.test(i)&&i.startsWith(e)||r&&!isNullish(i)&&Object.prototype.hasOwnProperty.call(i,r)),splitColor=(e,r,i)=>s=>{if(typeof s!="string")return s;const[a,c,l,u]=s.match(floatRegex);return{[e]:parseFloat(a),[r]:parseFloat(c),[i]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:r,blue:i,alpha:s=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(r)+", "+rgbUnit.transform(i)+", "+sanitize(alpha.transform(s))+")"};function parseHex(e){let r="",i="",s="",a="";return e.length>5?(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(r=e.substring(1,2),i=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),r+=r,i+=i,s+=s,a+=a),{red:parseInt(r,16),green:parseInt(i,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:r,lightness:i,alpha:s=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(r))+", "+percent.transform(sanitize(i))+", "+sanitize(alpha.transform(s))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){var r,i;return isNaN(e)&&typeof e=="string"&&(((r=e.match(floatRegex))===null||r===void 0?void 0:r.length)||0)+(((i=e.match(colorRegex))===null||i===void 0?void 0:i.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const r=e.toString(),i=[],s={color:[],number:[],var:[]},a=[];let c=0;const u=r.replace(complexRegex,h=>(color.test(h)?(s.color.push(c),a.push(COLOR_TOKEN),i.push(color.parse(h))):h.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(c),a.push(VAR_TOKEN),i.push(h)):(s.number.push(c),a.push(NUMBER_TOKEN),i.push(parseFloat(h))),++c,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:i,split:u,indexes:s,types:a}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:r,types:i}=analyseComplexValue(e),s=r.length;return a=>{let c="";for(let l=0;l<s;l++)if(c+=r[l],a[l]!==void 0){const u=i[l];u===NUMBER_TOKEN?c+=sanitize(a[l]):u===COLOR_TOKEN?c+=color.transform(a[l]):c+=a[l]}return c}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const r=parseComplexValue(e);return createTransformer(e)(r.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[r,i]=e.slice(0,-1).split("(");if(r==="drop-shadow")return e;const[s]=i.match(floatRegex)||[];if(!s)return e;const a=i.replace(s,"");let c=maxDefaults.has(r)?1:0;return s!==i&&(c*=100),r+"("+c+a+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const r=e.match(functionRegex);return r?r.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,r){let i=getDefaultValueType(e);return i!==filter&&(i=complex),i.getAnimatableNone?i.getAnimatableNone(r):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,r,i){let s=0,a;for(;s<e.length&&!a;){const c=e[s];typeof c=="string"&&!invalidTemplates.has(c)&&analyseComplexValue(c).values.length&&(a=e[s]),s++}if(a&&i)for(const c of r)e[c]=getAnimatableNone(i,a)}const isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,r)=>parseFloat(e.split(", ")[r]),getTranslateFromMatrix=(e,r)=>(i,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return getPosFromMatrix(a[1],r);{const c=s.match(/^matrix\((.+)\)$/u);return c?getPosFromMatrix(c[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const r=[];return nonTranslationalTransformKeys.forEach(i=>{const s=e.getValue(i);s!==void 0&&(r.push([i,s.get()]),s.set(i.startsWith("scale")?1:0))}),r}const positionalValues={width:({x:e},{paddingLeft:r="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(r)-parseFloat(i),height:({y:e},{paddingTop:r="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(r)-parseFloat(i),top:(e,{top:r})=>parseFloat(r),left:(e,{left:r})=>parseFloat(r),bottom:({y:e},{top:r})=>parseFloat(r)+(e.max-e.min),right:({x:e},{left:r})=>parseFloat(r)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(s=>s.needsMeasurement),r=new Set(e.map(s=>s.element)),i=new Map;r.forEach(s=>{const a=removeNonTranslationalTransform(s);a.length&&(i.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),r.forEach(s=>{s.render();const a=i.get(s);a&&a.forEach(([c,l])=>{var u;(u=s.getValue(c))===null||u===void 0||u.set(l)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(r,i,s,a,c,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...r],this.onComplete=i,this.name=s,this.motionValue=a,this.element=c,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:i,element:s,motionValue:a}=this;for(let c=0;c<r.length;c++)if(r[c]===null)if(c===0){const l=a?.get(),u=r[r.length-1];if(l!==void 0)r[0]=l;else if(s&&i){const h=s.readValue(i,u);h!=null&&(r[0]=h)}r[0]===void 0&&(r[0]=u),a&&l===void 0&&a.set(r[0])}else r[c]=r[c-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const r=splitCSSVariableRegex.exec(e);if(!r)return[,];const[,i,s,a]=r;return[`--${i??s}`,a]}function getVariableValue(e,r,i=1){const[s,a]=parseCSSVariable(e);if(!s)return;const c=window.getComputedStyle(r).getPropertyValue(s);if(c){const l=c.trim();return isNumericalString(l)?parseFloat(l):l}return isCSSVariableToken(a)?getVariableValue(a,r,i+1):a}const testValueType=e=>r=>r.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));class DOMKeyframesResolver extends KeyframeResolver{constructor(r,i,s,a,c){super(r,i,s,a,c,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let h=0;h<r.length;h++){let d=r[h];if(typeof d=="string"&&(d=d.trim(),isCSSVariableToken(d))){const p=getVariableValue(d,i.current);p!==void 0&&(r[h]=p),h===r.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||r.length!==2)return;const[a,c]=r,l=findDimensionValueType(a),u=findDimensionValueType(c);if(l!==u)if(isNumOrPxType(l)&&isNumOrPxType(u))for(let h=0;h<r.length;h++){const d=r[h];typeof d=="string"&&(r[h]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:i}=this,s=[];for(let a=0;a<r.length;a++)isNone(r[a])&&s.push(a);s.length&&makeNoneKeyframesAnimatable(r,s,i)}measureInitialState(){const{element:r,unresolvedKeyframes:i,name:s}=this;if(!r||!r.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](r.measureViewportBox(),window.getComputedStyle(r.current)),i[0]=this.measuredOrigin;const a=i[i.length-1];a!==void 0&&r.getValue(s,a).jump(a,!1)}measureEndState(){var r;const{element:i,name:s,unresolvedKeyframes:a}=this;if(!i||!i.current)return;const c=i.getValue(s);c&&c.jump(this.measuredOrigin,!1);const l=a.length-1,u=a[l];a[l]=positionalValues[s](i.measureViewportBox(),window.getComputedStyle(i.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((r=this.removedTransforms)===null||r===void 0)&&r.length&&this.removedTransforms.forEach(([h,d])=>{i.getValue(h).set(d)}),this.resolveNoneKeyframes()}}const isAnimatable=(e,r)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const r=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==r)return!0}function canAnimate(e,r,i,s){const a=e[0];if(a===null)return!1;if(r==="display"||r==="visibility")return!0;const c=e[e.length-1],l=isAnimatable(a,r),u=isAnimatable(c,r);return!l||!u?!1:hasKeyframesChanged(e)||(i==="spring"||isGenerator(i))&&s}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:r,repeatType:i="loop"},s){const a=e.filter(isNotNull),c=r&&i!=="loop"&&r%2===1?0:a.length-1;return!c||s===void 0?a[c]:s}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:r=!0,delay:i=0,type:s="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:r,delay:i,type:s,repeat:a,repeatDelay:c,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(r,i){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:c,delay:l,onComplete:u,onUpdate:h,isGenerator:d}=this.options;if(!d&&!canAnimate(r,s,a,c))if(l)this.options.duration=0;else{h&&h(getFinalKeyframe(r,this.options,i)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(r,i);p!==!1&&(this._resolved={keyframes:r,finalKeyframe:i,...p},this.onPostResolved())}onPostResolved(){}then(r,i){return this.currentFinishedPromise.then(r,i)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(r=>{this.resolveFinishedPromise=r})}}const mixNumber$1=(e,r,i)=>e+(r-e)*i;function hueToRgb(e,r,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(r-e)*6*i:i<1/2?r:i<2/3?e+(r-e)*(2/3-i)*6:e}function hslaToRgba({hue:e,saturation:r,lightness:i,alpha:s}){e/=360,r/=100,i/=100;let a=0,c=0,l=0;if(!r)a=c=l=i;else{const u=i<.5?i*(1+r):i+r-i*r,h=2*i-u;a=hueToRgb(h,u,e+1/3),c=hueToRgb(h,u,e),l=hueToRgb(h,u,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(l*255),alpha:s}}function mixImmediate(e,r){return i=>i>0?r:e}const mixLinearColor=(e,r,i)=>{const s=e*e,a=i*(r*r-s)+s;return a<0?0:Math.sqrt(a)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(r=>r.test(e));function asRGBA(e){const r=getColorType(e);if(!r)return!1;let i=r.parse(e);return r===hsla&&(i=hslaToRgba(i)),i}const mixColor=(e,r)=>{const i=asRGBA(e),s=asRGBA(r);if(!i||!s)return mixImmediate(e,r);const a={...i};return c=>(a.red=mixLinearColor(i.red,s.red,c),a.green=mixLinearColor(i.green,s.green,c),a.blue=mixLinearColor(i.blue,s.blue,c),a.alpha=mixNumber$1(i.alpha,s.alpha,c),rgba.transform(a))},combineFunctions=(e,r)=>i=>r(e(i)),pipe=(...e)=>e.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,r){return invisibleValues.has(e)?i=>i<=0?e:r:i=>i>=1?r:e}function mixNumber(e,r){return i=>mixNumber$1(e,r,i)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,r){const i=[...e],s=i.length,a=e.map((c,l)=>getMixer(c)(c,r[l]));return c=>{for(let l=0;l<s;l++)i[l]=a[l](c);return i}}function mixObject(e,r){const i={...e,...r},s={};for(const a in i)e[a]!==void 0&&r[a]!==void 0&&(s[a]=getMixer(e[a])(e[a],r[a]));return a=>{for(const c in s)i[c]=s[c](a);return i}}function matchOrder(e,r){var i;const s=[],a={color:0,var:0,number:0};for(let c=0;c<r.values.length;c++){const l=r.types[c],u=e.indexes[l][a[l]],h=(i=e.values[u])!==null&&i!==void 0?i:0;s[c]=h,a[l]++}return s}const mixComplex=(e,r)=>{const i=complex.createTransformer(r),s=analyseComplexValue(e),a=analyseComplexValue(r);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?invisibleValues.has(e)&&!a.values.length||invisibleValues.has(r)&&!s.values.length?mixVisibility(e,r):pipe(mixArray(matchOrder(s,a),a.values),i):mixImmediate(e,r)};function mix(e,r,i){return typeof e=="number"&&typeof r=="number"&&typeof i=="number"?mixNumber$1(e,r,i):getMixer(e)(e,r)}const velocitySampleDuration=5;function calcGeneratorVelocity(e,r,i){const s=Math.max(r-velocitySampleDuration,0);return velocityPerSecond(i-e(s),r-s)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:r=springDefaults.bounce,velocity:i=springDefaults.velocity,mass:s=springDefaults.mass}){let a,c,l=1-r;l=clamp(springDefaults.minDamping,springDefaults.maxDamping,l),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),l<1?(a=d=>{const p=d*l,f=p*e,m=p-i,g=calcAngularFreq(d,l),E=Math.exp(-f);return safeMin-m/g*E},c=d=>{const f=d*l*e,m=f*i+i,g=Math.pow(l,2)*Math.pow(d,2)*e,E=Math.exp(-f),v=calcAngularFreq(Math.pow(d,2),l);return(-a(d)+safeMin>0?-1:1)*((m-g)*E)/v}):(a=d=>{const p=Math.exp(-d*e),f=(d-i)*e+1;return-safeMin+p*f},c=d=>{const p=Math.exp(-d*e),f=(i-d)*(e*e);return p*f});const u=5/e,h=approximateRoot(a,c,u);if(e=secondsToMilliseconds(e),isNaN(h))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const d=Math.pow(h,2)*s;return{stiffness:d,damping:l*2*Math.sqrt(s*d),duration:e}}}const rootIterations=12;function approximateRoot(e,r,i){let s=i;for(let a=1;a<rootIterations;a++)s=s-e(s)/r(s);return s}function calcAngularFreq(e,r){return e*Math.sqrt(1-r*r)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,r){return r.some(i=>e[i]!==void 0)}function getSpringOptions(e){let r={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const i=e.visualDuration,s=2*Math.PI/(i*1.2),a=s*s,c=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(a);r={...r,mass:springDefaults.mass,stiffness:a,damping:c}}else{const i=findSpring(e);r={...r,...i,mass:springDefaults.mass},r.isResolvedFromDuration=!0}return r}function spring(e=springDefaults.visualDuration,r=springDefaults.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:r}:e;let{restSpeed:s,restDelta:a}=i;const c=i.keyframes[0],l=i.keyframes[i.keyframes.length-1],u={done:!1,value:c},{stiffness:h,damping:d,mass:p,duration:f,velocity:m,isResolvedFromDuration:g}=getSpringOptions({...i,velocity:-millisecondsToSeconds(i.velocity||0)}),E=m||0,v=d/(2*Math.sqrt(h*p)),b=l-c,y=millisecondsToSeconds(Math.sqrt(h/p)),w=Math.abs(b)<5;s||(s=w?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),a||(a=w?springDefaults.restDelta.granular:springDefaults.restDelta.default);let T;if(v<1){const _=calcAngularFreq(y,v);T=P=>{const R=Math.exp(-v*y*P);return l-R*((E+v*y*b)/_*Math.sin(_*P)+b*Math.cos(_*P))}}else if(v===1)T=_=>l-Math.exp(-y*_)*(b+(E+y*b)*_);else{const _=y*Math.sqrt(v*v-1);T=P=>{const R=Math.exp(-v*y*P),I=Math.min(_*P,300);return l-R*((E+v*y*b)*Math.sinh(I)+_*b*Math.cosh(I))/_}}const k={calculatedDuration:g&&f||null,next:_=>{const P=T(_);if(g)u.done=_>=f;else{let R=0;v<1&&(R=_===0?secondsToMilliseconds(E):calcGeneratorVelocity(T,_,P));const I=Math.abs(R)<=s,H=Math.abs(l-P)<=a;u.done=I&&H}return u.value=u.done?l:P,u},toString:()=>{const _=Math.min(calcGeneratorDuration(k),maxGeneratorDuration),P=generateLinearEasing(R=>k.next(_*R).value,_,30);return _+"ms "+P}};return k}function inertia({keyframes:e,velocity:r=0,power:i=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:l,min:u,max:h,restDelta:d=.5,restSpeed:p}){const f=e[0],m={done:!1,value:f},g=I=>u!==void 0&&I<u||h!==void 0&&I>h,E=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let v=i*r;const b=f+v,y=l===void 0?b:l(b);y!==b&&(v=y-f);const w=I=>-v*Math.exp(-I/s),T=I=>y+w(I),k=I=>{const H=w(I),B=T(I);m.done=Math.abs(H)<=d,m.value=m.done?y:B};let _,P;const R=I=>{g(m.value)&&(_=I,P=spring({keyframes:[m.value,E(m.value)],velocity:calcGeneratorVelocity(T,I,m.value),damping:a,stiffness:c,restDelta:d,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let H=!1;return!P&&_===void 0&&(H=!0,k(I),R(I)),_!==void 0&&I>=_?P.next(I-_):(!H&&k(I),m)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[r,i,s,a]=e;return cubicBezier(r,i,s,a)}else if(typeof e=="string")return easingLookup[e];return e};function createMixers(e,r,i){const s=[],a=i||mix,c=e.length-1;for(let l=0;l<c;l++){let u=a(e[l],e[l+1]);if(r){const h=Array.isArray(r)?r[l]||noop:r;u=pipe(h,u)}s.push(u)}return s}function interpolate(e,r,{clamp:i=!0,ease:s,mixer:a}={}){const c=e.length;if(invariant(c===r.length),c===1)return()=>r[0];if(c===2&&r[0]===r[1])return()=>r[1];const l=e[0]===e[1];e[0]>e[c-1]&&(e=[...e].reverse(),r=[...r].reverse());const u=createMixers(r,s,a),h=u.length,d=p=>{if(l&&p<e[0])return r[0];let f=0;if(h>1)for(;f<e.length-2&&!(p<e[f+1]);f++);const m=progress(e[f],e[f+1],p);return u[f](m)};return i?p=>d(clamp(e[0],e[c-1],p)):d}function fillOffset(e,r){const i=e[e.length-1];for(let s=1;s<=r;s++){const a=progress(0,r,s);e.push(mixNumber$1(i,1,a))}}function defaultOffset(e){const r=[0];return fillOffset(r,e.length-1),r}function convertOffsetToTimes(e,r){return e.map(i=>i*r)}function defaultEasing(e,r){return e.map(()=>r||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:r,times:i,ease:s="easeInOut"}){const a=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),c={done:!1,value:r[0]},l=convertOffsetToTimes(i&&i.length===r.length?i:defaultOffset(r),e),u=interpolate(l,r,{ease:Array.isArray(a)?a:defaultEasing(r,a)});return{calculatedDuration:e,next:h=>(c.value=u(h),c.done=h>=e,c)}}const frameloopDriver=e=>{const r=({timestamp:i})=>e(i);return{start:()=>frame.update(r,!0),stop:()=>cancelFrame(r),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=e=>e/100;class MainThreadAnimation extends BaseAnimation{constructor(r){super(r),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:i,motionValue:s,element:a,keyframes:c}=this.options,l=a?.KeyframeResolver||KeyframeResolver,u=(h,d)=>this.onKeyframesResolved(h,d);this.resolver=new l(c,u,i,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(r){const{type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c,velocity:l=0}=this.options,u=isGenerator(i)?i:generators[i]||keyframes;let h,d;u!==keyframes&&typeof r[0]!="number"&&(h=pipe(percentToProgress,mix(r[0],r[1])),r=[0,100]);const p=u({...this.options,keyframes:r});c==="mirror"&&(d=u({...this.options,keyframes:[...r].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=calcGeneratorDuration(p));const{calculatedDuration:f}=p,m=f+a,g=m*(s+1)-a;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:h,calculatedDuration:f,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:r=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!r?this.pause():this.state=this.pendingPlayState}tick(r,i=!1){const{resolved:s}=this;if(!s){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:a,generator:c,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:d,totalDuration:p,resolvedDuration:f}=s;if(this.startTime===null)return c.next(0);const{delay:m,repeat:g,repeatType:E,repeatDelay:v,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-p/this.speed,this.startTime)),i?this.currentTime=r:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(r-this.startTime)*this.speed;const y=this.currentTime-m*(this.speed>=0?1:-1),w=this.speed>=0?y<0:y>p;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let T=this.currentTime,k=c;if(g){const I=Math.min(this.currentTime,p)/f;let H=Math.floor(I),B=I%1;!B&&I>=1&&(B=1),B===1&&H--,H=Math.min(H,g+1),!!(H%2)&&(E==="reverse"?(B=1-B,v&&(B-=v/f)):E==="mirror"&&(k=l)),T=clamp(0,1,B)*f}const _=w?{done:!1,value:h[0]}:k.next(T);u&&(_.value=u(_.value));let{done:P}=_;!w&&d!==null&&(P=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return R&&a!==void 0&&(_.value=getFinalKeyframe(h,this.options,a)),b&&b(_.value),R&&this.finish(),_}get duration(){const{resolved:r}=this;return r?millisecondsToSeconds(r.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(r){r=secondsToMilliseconds(r),this.currentTime=r,this.holdTime!==null||this.speed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.speed)}get speed(){return this.playbackSpeed}set speed(r){const i=this.playbackSpeed!==r;this.playbackSpeed=r,i&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:r=frameloopDriver,onPlay:i,startTime:s}=this.options;this.driver||(this.driver=r(c=>this.tick(c))),i&&i();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var r;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(r=this.currentTime)!==null&&r!==void 0?r:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:r}=this.options;r&&r()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(e,r,i,{delay:s=0,duration:a=300,repeat:c=0,repeatType:l="loop",ease:u="easeInOut",times:h}={}){const d={[r]:i};h&&(d.offset=h);const p=mapEasingToNativeEasing(u,a);return Array.isArray(p)&&(d.easing=p),e.animate(d,{delay:s,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:c+1,direction:l==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(e){return isGenerator(e.type)||e.type==="spring"||!isWaapiSupportedEasing(e.ease)}function pregenerateKeyframes(e,r){const i=new MainThreadAnimation({...r,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const a=[];let c=0;for(;!s.done&&c<maxDuration;)s=i.sample(c),a.push(s.value),c+=sampleDelta;return{times:void 0,keyframes:a,duration:c-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(r){super(r);const{name:i,motionValue:s,element:a,keyframes:c}=this.options;this.resolver=new DOMKeyframesResolver(c,(l,u)=>this.onKeyframesResolved(l,u),i,s,a),this.resolver.scheduleResolve()}initPlayback(r,i){let{duration:s=300,times:a,ease:c,type:l,motionValue:u,name:h,startTime:d}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof c=="string"&&supportsLinearEasing()&&isUnsupportedEase(c)&&(c=unsupportedEasingFunctions[c]),requiresPregeneratedKeyframes(this.options)){const{onComplete:f,onUpdate:m,motionValue:g,element:E,...v}=this.options,b=pregenerateKeyframes(r,v);r=b.keyframes,r.length===1&&(r[1]=r[0]),s=b.duration,a=b.times,c=b.ease,l="keyframes"}const p=startWaapiAnimation(u.owner.current,h,r,{...this.options,duration:s,times:a,ease:c});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(attachTimeline(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:f}=this.options;u.set(getFinalKeyframe(r,this.options,i)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:s,times:a,type:l,ease:c,keyframes:r}}get duration(){const{resolved:r}=this;if(!r)return 0;const{duration:i}=r;return millisecondsToSeconds(i)}get time(){const{resolved:r}=this;if(!r)return 0;const{animation:i}=r;return millisecondsToSeconds(i.currentTime||0)}set time(r){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.currentTime=secondsToMilliseconds(r)}get speed(){const{resolved:r}=this;if(!r)return 1;const{animation:i}=r;return i.playbackRate}set speed(r){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.playbackRate=r}get state(){const{resolved:r}=this;if(!r)return"idle";const{animation:i}=r;return i.playState}get startTime(){const{resolved:r}=this;if(!r)return null;const{animation:i}=r;return i.startTime}attachTimeline(r){if(!this._resolved)this.pendingTimeline=r;else{const{resolved:i}=this;if(!i)return noop;const{animation:s}=i;attachTimeline(s,r)}return noop}play(){if(this.isStopped)return;const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:r}=this;if(!r)return;const{animation:i,keyframes:s,duration:a,type:c,ease:l,times:u}=r;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:f,element:m,...g}=this.options,E=new MainThreadAnimation({...g,keyframes:s,duration:a,type:c,ease:l,times:u,isGenerator:!0}),v=secondsToMilliseconds(this.time);d.setWithVelocity(E.sample(v-sampleDelta).value,E.sample(v).value,sampleDelta)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:r}=this;r&&r.animation.finish()}cancel(){const{resolved:r}=this;r&&r.animation.cancel()}static supports(r){const{motionValue:i,name:s,repeatDelay:a,repeatType:c,damping:l,type:u}=r;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=i.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&!h&&!d&&!a&&c!=="mirror"&&l!==0&&u!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:r})=>r.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(r[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:r,delayChildren:i,staggerChildren:s,staggerDirection:a,repeat:c,repeatType:l,repeatDelay:u,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const animateMotionValue=(e,r,i,s={},a,c)=>l=>{const u=getValueTransition(s,e)||{},h=u.delay||s.delay||0;let{elapsed:d=0}=s;d=d-secondsToMilliseconds(h);let p={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:r.getVelocity(),...u,delay:-d,onUpdate:m=>{r.set(m),u.onUpdate&&u.onUpdate(m)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:e,motionValue:r,element:c?void 0:a};isTransitionDefined(u)||(p={...p,...getDefaultTransition(e,p)}),p.duration&&(p.duration=secondsToMilliseconds(p.duration)),p.repeatDelay&&(p.repeatDelay=secondsToMilliseconds(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let f=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(f=!0)),f&&!c&&r.get()!==void 0){const m=getFinalKeyframe(p.keyframes,u);if(m!==void 0)return frame.update(()=>{p.onUpdate(m),p.onComplete()}),new GroupPlaybackControls([])}return!c&&AcceleratedAnimation.supports(p)?new AcceleratedAnimation(p):new MainThreadAnimation(p)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:r},i){const s=e.hasOwnProperty(i)&&r[i]!==!0;return r[i]=!1,s}function animateTarget(e,r,{delay:i=0,transitionOverride:s,type:a}={}){var c;let{transition:l=e.getDefaultTransition(),transitionEnd:u,...h}=r;s&&(l=s);const d=[],p=a&&e.animationState&&e.animationState.getState()[a];for(const f in h){const m=e.getValue(f,(c=e.latestValues[f])!==null&&c!==void 0?c:null),g=h[f];if(g===void 0||p&&shouldBlockAnimation(p,f))continue;const E={delay:i,...getValueTransition(l||{},f)};let v=!1;if(window.MotionHandoffAnimation){const y=getOptimisedAppearId(e);if(y){const w=window.MotionHandoffAnimation(y,f,frame);w!==null&&(E.startTime=w,v=!0)}}addValueToWillChange(e,f),m.start(animateMotionValue(f,m,g,e.shouldReduceMotion&&positionalKeys.has(f)?{type:!1}:E,e,v));const b=m.animation;b&&d.push(b)}return u&&Promise.all(d).then(()=>{frame.update(()=>{u&&setTarget(e,u)})}),d}function animateVariant(e,r,i={}){var s;const a=resolveVariant(e,r,i.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(c=i.transitionOverride);const l=a?()=>Promise.all(animateTarget(e,a,i)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:f,staggerDirection:m}=c;return animateChildren(e,r,p+d,f,m,i)}:()=>Promise.resolve(),{when:h}=c;if(h){const[d,p]=h==="beforeChildren"?[l,u]:[u,l];return d().then(()=>p())}else return Promise.all([l(),u(i.delay)])}function animateChildren(e,r,i=0,s=0,a=1,c){const l=[],u=(e.variantChildren.size-1)*s,h=a===1?(d=0)=>d*s:(d=0)=>u-d*s;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((d,p)=>{d.notify("AnimationStart",r),l.push(animateVariant(d,r,{...c,delay:i+h(p)}).then(()=>d.notify("AnimationComplete",r)))}),Promise.all(l)}function sortByTreeOrder(e,r){return e.sortNodePosition(r)}function animateVisualElement(e,r,i={}){e.notify("AnimationStart",r);let s;if(Array.isArray(r)){const a=r.map(c=>animateVariant(e,c,i));s=Promise.all(a)}else if(typeof r=="string")s=animateVariant(e,r,i);else{const a=typeof r=="function"?resolveVariant(e,r,i.custom):r;s=Promise.all(animateTarget(e,a,i))}return s.then(()=>{e.notify("AnimationComplete",r)})}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const r={};for(let i=0;i<numVariantProps;i++){const s=variantProps[i],a=e.props[s];(isVariantLabel(a)||a===!1)&&(r[s]=a)}return r}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return r=>Promise.all(r.map(({animation:i,options:s})=>animateVisualElement(e,i,s)))}function createAnimationState(e){let r=animateList(e),i=createState(),s=!0;const a=h=>(d,p)=>{var f;const m=resolveVariant(e,p,h==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:g,transitionEnd:E,...v}=m;d={...d,...v,...E}}return d};function c(h){r=h(e)}function l(h){const{props:d}=e,p=getVariantContext(e.parent)||{},f=[],m=new Set;let g={},E=1/0;for(let b=0;b<numAnimationTypes;b++){const y=reversePriorityOrder[b],w=i[y],T=d[y]!==void 0?d[y]:p[y],k=isVariantLabel(T),_=y===h?w.isActive:null;_===!1&&(E=b);let P=T===p[y]&&T!==d[y]&&k;if(P&&s&&e.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...g},!w.isActive&&_===null||!T&&!w.prevProp||isAnimationControls(T)||typeof T=="boolean")continue;const R=checkVariantsDidChange(w.prevProp,T);let I=R||y===h&&w.isActive&&!P&&k||b>E&&k,H=!1;const B=Array.isArray(T)?T:[T];let O=B.reduce(a(y),{});_===!1&&(O={});const{prevResolvedValues:V={}}=w,q={...V,...O},ue=we=>{I=!0,m.has(we)&&(H=!0,m.delete(we)),w.needsAnimating[we]=!0;const W=e.getValue(we);W&&(W.liveStyle=!1)};for(const we in q){const W=O[we],fe=V[we];if(g.hasOwnProperty(we))continue;let F=!1;isKeyframesTarget(W)&&isKeyframesTarget(fe)?F=!shallowCompare(W,fe):F=W!==fe,F?W!=null?ue(we):m.add(we):W!==void 0&&m.has(we)?ue(we):w.protectedKeys[we]=!0}w.prevProp=T,w.prevResolvedValues=O,w.isActive&&(g={...g,...O}),s&&e.blockInitialAnimation&&(I=!1),I&&(!(P&&R)||H)&&f.push(...B.map(we=>({animation:we,options:{type:y}})))}if(m.size){const b={};m.forEach(y=>{const w=e.getBaseTarget(y),T=e.getValue(y);T&&(T.liveStyle=!0),b[y]=w??null}),f.push({animation:b})}let v=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),s=!1,v?r(f):Promise.resolve()}function u(h,d){var p;if(i[h].isActive===d)return Promise.resolve();(p=e.variantChildren)===null||p===void 0||p.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(h,d)}),i[h].isActive=d;const f=l(h);for(const m in i)i[m].protectedKeys={};return f}return{animateChanges:l,setActive:u,setAnimateFunction:c,getState:()=>i,reset:()=>{i=createState(),s=!0}}}function checkVariantsDidChange(e,r){return typeof r=="string"?r!==e:Array.isArray(r)?!shallowCompare(r,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(r){this.isMounted=!1,this.node=r}update(){}}class AnimationFeature extends Feature{constructor(r){super(r),r.animationState||(r.animationState=createAnimationState(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();isAnimationControls(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:i}=this.node.prevProps||{};r!==i&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)===null||r===void 0||r.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===s)return;const a=this.node.animationState.setActive("exit",!r);i&&!r&&a.then(()=>i(this.id))}mount(){const{register:r}=this.node.presenceContext||{};r&&(this.unmount=r(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,r,i,s={passive:!0}){return e.addEventListener(r,i,s),()=>e.removeEventListener(r,i)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>r=>isPrimaryPointer(r)&&e(r,extractEventInfo(r));function addPointerEvent(e,r,i,s){return addDomEvent(e,r,addPointerInfo(i),s)}const distance=(e,r)=>Math.abs(e-r);function distance2D(e,r){const i=distance(e.x,r.x),s=distance(e.y,r.y);return Math.sqrt(i**2+s**2)}class PanSession{constructor(r,i,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=getPanInfo(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=distance2D(f.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:E}=f,{timestamp:v}=frameData;this.history.push({...E,timestamp:v});const{onStart:b,onMove:y}=this.handlers;m||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=transformPoint(m,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=getPanInfo(f.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,b),E&&E(f,b)},!isPrimaryPointer(r))return;this.dragSnapToOrigin=c,this.handlers=i,this.transformPagePoint=s,this.contextWindow=a||window;const l=extractEventInfo(r),u=transformPoint(l,this.transformPagePoint),{point:h}=u,{timestamp:d}=frameData;this.history=[{...h,timestamp:d}];const{onSessionStart:p}=i;p&&p(r,getPanInfo(u,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,r){return r?{point:r(e.point)}:e}function subtractPoint(e,r){return{x:e.x-r.x,y:e.y-r.y}}function getPanInfo({point:e},r){return{point:e,delta:subtractPoint(e,lastDevicePoint(r)),offset:subtractPoint(e,startDevicePoint(r)),velocity:getVelocity(r,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,r){if(e.length<2)return{x:0,y:0};let i=e.length-1,s=null;const a=lastDevicePoint(e);for(;i>=0&&(s=e[i],!(a.timestamp-s.timestamp>secondsToMilliseconds(r)));)i--;if(!s)return{x:0,y:0};const c=millisecondsToSeconds(a.timestamp-s.timestamp);if(c===0)return{x:0,y:0};const l={x:(a.x-s.x)/c,y:(a.y-s.y)/c};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,r,i){return Math.abs(e-r)<=i}function calcAxisDelta(e,r,i,s=.5){e.origin=s,e.originPoint=mixNumber$1(r.min,r.max,e.origin),e.scale=calcLength(i)/calcLength(r),e.translate=mixNumber$1(i.min,i.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,r,i,s){calcAxisDelta(e.x,r.x,i.x,s?s.originX:void 0),calcAxisDelta(e.y,r.y,i.y,s?s.originY:void 0)}function calcRelativeAxis(e,r,i){e.min=i.min+r.min,e.max=e.min+calcLength(r)}function calcRelativeBox(e,r,i){calcRelativeAxis(e.x,r.x,i.x),calcRelativeAxis(e.y,r.y,i.y)}function calcRelativeAxisPosition(e,r,i){e.min=r.min-i.min,e.max=e.min+calcLength(r)}function calcRelativePosition(e,r,i){calcRelativeAxisPosition(e.x,r.x,i.x),calcRelativeAxisPosition(e.y,r.y,i.y)}function applyConstraints(e,{min:r,max:i},s){return r!==void 0&&e<r?e=s?mixNumber$1(r,e,s.min):Math.max(e,r):i!==void 0&&e>i&&(e=s?mixNumber$1(i,e,s.max):Math.min(e,i)),e}function calcRelativeAxisConstraints(e,r,i){return{min:r!==void 0?e.min+r:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:r,left:i,bottom:s,right:a}){return{x:calcRelativeAxisConstraints(e.x,i,a),y:calcRelativeAxisConstraints(e.y,r,s)}}function calcViewportAxisConstraints(e,r){let i=r.min-e.min,s=r.max-e.max;return r.max-r.min<e.max-e.min&&([i,s]=[s,i]),{min:i,max:s}}function calcViewportConstraints(e,r){return{x:calcViewportAxisConstraints(e.x,r.x),y:calcViewportAxisConstraints(e.y,r.y)}}function calcOrigin(e,r){let i=.5;const s=calcLength(e),a=calcLength(r);return a>s?i=progress(r.min,r.max-s,e.min):s>a&&(i=progress(e.min,e.max-a,r.min)),clamp(0,1,i)}function rebaseAxisConstraints(e,r){const i={};return r.min!==void 0&&(i.min=r.min-e.min),r.max!==void 0&&(i.max=r.max-e.min),i}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,r,i){return{min:resolvePointElastic(e,r),max:resolvePointElastic(e,i)}}function resolvePointElastic(e,r){return typeof e=="number"?e:e[r]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:r,right:i,bottom:s}){return{x:{min:r,max:i},y:{min:e,max:s}}}function convertBoxToBoundingBox({x:e,y:r}){return{top:r.min,right:e.max,bottom:r.max,left:e.min}}function transformBoxPoints(e,r){if(!r)return e;const i=r({x:e.left,y:e.top}),s=r({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:r,scaleY:i}){return!isIdentityScale(e)||!isIdentityScale(r)||!isIdentityScale(i)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,r,i){const s=e-i,a=r*s;return i+a}function applyPointDelta(e,r,i,s,a){return a!==void 0&&(e=scalePoint(e,a,s)),scalePoint(e,i,s)+r}function applyAxisDelta(e,r=0,i=1,s,a){e.min=applyPointDelta(e.min,r,i,s,a),e.max=applyPointDelta(e.max,r,i,s,a)}function applyBoxDelta(e,{x:r,y:i}){applyAxisDelta(e.x,r.translate,r.scale,r.originPoint),applyAxisDelta(e.y,i.translate,i.scale,i.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,r,i,s=!1){const a=i.length;if(!a)return;r.x=r.y=1;let c,l;for(let u=0;u<a;u++){c=i[u],l=c.projectionDelta;const{visualElement:h}=c.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&transformBox(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),l&&(r.x*=l.x.scale,r.y*=l.y.scale,applyBoxDelta(e,l)),s&&hasTransform(c.latestValues)&&transformBox(e,c.latestValues))}r.x<TREE_SCALE_SNAP_MAX&&r.x>TREE_SCALE_SNAP_MIN&&(r.x=1),r.y<TREE_SCALE_SNAP_MAX&&r.y>TREE_SCALE_SNAP_MIN&&(r.y=1)}function translateAxis(e,r){e.min=e.min+r,e.max=e.max+r}function transformAxis(e,r,i,s,a=.5){const c=mixNumber$1(e.min,e.max,a);applyAxisDelta(e,r,i,c,s)}function transformBox(e,r){transformAxis(e.x,r.x,r.scaleX,r.scale,r.originX),transformAxis(e.y,r.y,r.scaleY,r.scale,r.originY)}function measureViewportBox(e,r){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),r))}function measurePageBox(e,r,i){const s=measureViewportBox(e,i),{scroll:a}=r;return a&&(translateAxis(s.x,a.offset.x),translateAxis(s.y,a.offset.y)),s}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=r}start(r,{snapToCursor:i=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(extractEventInfo(p).point)},c=(p,f)=>{const{drag:m,dragPropagation:g,onDragStart:E}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(b=>{let y=this.getAxisMotionValue(b).get()||0;if(percent.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[b];T&&(y=calcLength(T)*(parseFloat(y)/100))}}this.originPoint[b]=y}),E&&frame.postRender(()=>E(p,f)),addValueToWillChange(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(p,f)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:E,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=f;if(g&&this.currentDirection===null){this.currentDirection=getCurrentDirection(b),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),v&&v(p,f)},u=(p,f)=>this.stop(p,f),h=()=>eachAxis(p=>{var f;return this.getAnimationState(p)==="paused"&&((f=this.getAxisMotionValue(p).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new PanSession(r,{onSessionStart:a,onStart:c,onMove:l,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:getContextWindow(this.visualElement)})}stop(r,i){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&frame.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:r,animationState:i}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(r,i,s){const{drag:a}=this.getProps();if(!s||!shouldDrag(r,a,this.currentDirection))return;const c=this.getAxisMotionValue(r);let l=this.originPoint[r]+s[r];this.constraints&&this.constraints[r]&&(l=applyConstraints(l,this.constraints[r],this.elastic[r])),c.set(l)}resolveConstraints(){var r;const{dragConstraints:i,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)===null||r===void 0?void 0:r.layout,c=this.constraints;i&&isRefObject(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&a?this.constraints=calcRelativeConstraints(a.layoutBox,i):this.constraints=!1,this.elastic=resolveDragElastic(s),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=rebaseAxisConstraints(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:i}=this.getProps();if(!r||!isRefObject(r))return!1;const s=r.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=measurePageBox(s,a.root,this.visualElement.getTransformPagePoint());let l=calcViewportConstraints(a.layout.layoutBox,c);if(i){const u=i(convertBoxToBoundingBox(l));this.hasMutatedConstraints=!!u,u&&(l=convertBoundingBoxToBox(u))}return l}startAnimation(r){const{drag:i,dragMomentum:s,dragElastic:a,dragTransition:c,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},d=eachAxis(p=>{if(!shouldDrag(p,i,this.currentDirection))return;let f=h&&h[p]||{};l&&(f={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,E={type:"inertia",velocity:s?r[p]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...c,...f};return this.startAxisValueAnimation(p,E)});return Promise.all(d).then(u)}startAxisValueAnimation(r,i){const s=this.getAxisMotionValue(r);return addValueToWillChange(this.visualElement,r),s.start(animateMotionValue(r,s,0,i,this.visualElement,!1))}stopAnimation(){eachAxis(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){eachAxis(r=>{var i;return(i=this.getAxisMotionValue(r).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(r){var i;return(i=this.getAxisMotionValue(r).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(r){const i=`_drag${r.toUpperCase()}`,s=this.visualElement.getProps(),a=s[i];return a||this.visualElement.getValue(r,(s.initial?s.initial[r]:void 0)||0)}snapToCursor(r){eachAxis(i=>{const{drag:s}=this.getProps();if(!shouldDrag(i,s,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(i);if(a&&a.layout){const{min:l,max:u}=a.layout.layoutBox[i];c.set(r[i]-mixNumber$1(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(i)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();a[l]=calcOrigin({min:h,max:h},this.constraints[l])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(l=>{if(!shouldDrag(l,r,null))return;const u=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];u.set(mixNumber$1(h,d,a[l]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const r=this.visualElement.current,i=addPointerEvent(r,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();isRefObject(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),frame.read(s);const l=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),u=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(eachAxis(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=h[p].translate,f.set(f.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),i(),c(),u&&u()}}getProps(){const r=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:l=defaultElastic,dragMomentum:u=!0}=r;return{...r,drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:c,dragElastic:l,dragMomentum:u}}}function shouldDrag(e,r,i){return(r===!0||r===e)&&(i===null||i===e)}function getCurrentDirection(e,r=10){let i=null;return Math.abs(e.y)>r?i="y":Math.abs(e.x)>r&&(i="x"),i}class DragGesture extends Feature{constructor(r){super(r),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(r,i)=>{e&&frame.postRender(()=>e(r,i))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(r){this.session=new PanSession(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:i,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(r),onStart:asyncHandler(i),onMove:s,onEnd:(c,l)=>{delete this.session,a&&frame.postRender(()=>a(c,l))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,r){return r.max===r.min?0:e/(r.max-r.min)*100}const correctBorderRadius={correct:(e,r)=>{if(!r.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const i=pixelsToPercent(e,r.target.x),s=pixelsToPercent(e,r.target.y);return`${i}% ${s}%`}},correctBoxShadow={correct:(e,{treeScale:r,projectionDelta:i})=>{const s=e,a=complex.parse(e);if(a.length>5)return s;const c=complex.createTransformer(e),l=typeof a[0]!="number"?1:0,u=i.x.scale*r.x,h=i.y.scale*r.y;a[0+l]/=u,a[1+l]/=h;const d=mixNumber$1(u,h,.5);return typeof a[2+l]=="number"&&(a[2+l]/=d),typeof a[3+l]=="number"&&(a[3+l]/=d),c(a)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:s,layoutId:a}=this.props,{projection:c}=r;addScaleCorrector(defaultScaleCorrectors),c&&(i.group&&i.group.add(c),s&&s.register&&a&&s.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:i,visualElement:s,drag:a,isPresent:c}=this.props,l=s.projection;return l&&(l.isPresent=c,a||r.layoutDependency!==i||i===void 0?l.willUpdate():this.safeToRemove(),r.isPresent!==c&&(c?l.promote():l.relegate()||frame.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),microtask.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:a}=r;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function MeasureLayout(e){const[r,i]=usePresence(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:r,safeToRemove:i})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,r,i){const s=isMotionValue(e)?e:motionValue(e);return s.start(animateMotionValue("",s,r,i)),s.animation}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}const compareByDepth=(e,r)=>e.depth-r.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(r){addUniqueItem(this.children,r),this.isDirty=!0}remove(r){removeItem(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(r)}}function delay(e,r){const i=time.now(),s=({timestamp:a})=>{const c=a-i;c>=r&&(cancelFrame(s),e(c-r))};return frame.read(s,!0),()=>cancelFrame(s)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,r,i,s,a,c){a?(e.opacity=mixNumber$1(0,i.opacity!==void 0?i.opacity:1,easeCrossfadeIn(s)),e.opacityExit=mixNumber$1(r.opacity!==void 0?r.opacity:1,0,easeCrossfadeOut(s))):c&&(e.opacity=mixNumber$1(r.opacity!==void 0?r.opacity:1,i.opacity!==void 0?i.opacity:1,s));for(let l=0;l<numBorders;l++){const u=`border${borders[l]}Radius`;let h=getRadius(r,u),d=getRadius(i,u);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||isPx(h)===isPx(d)?(e[u]=Math.max(mixNumber$1(asNumber(h),asNumber(d),s),0),(percent.test(d)||percent.test(h))&&(e[u]+="%")):e[u]=d}(r.rotate||i.rotate)&&(e.rotate=mixNumber$1(r.rotate||0,i.rotate||0,s))}function getRadius(e,r){return e[r]!==void 0?e[r]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(e,r,i){return s=>s<e?0:s>r?1:i(progress(e,r,s))}function copyAxisInto(e,r){e.min=r.min,e.max=r.max}function copyBoxInto(e,r){copyAxisInto(e.x,r.x),copyAxisInto(e.y,r.y)}function copyAxisDeltaInto(e,r){e.translate=r.translate,e.scale=r.scale,e.originPoint=r.originPoint,e.origin=r.origin}function removePointDelta(e,r,i,s,a){return e-=r,e=scalePoint(e,1/i,s),a!==void 0&&(e=scalePoint(e,1/a,s)),e}function removeAxisDelta(e,r=0,i=1,s=.5,a,c=e,l=e){if(percent.test(r)&&(r=parseFloat(r),r=mixNumber$1(l.min,l.max,r/100)-l.min),typeof r!="number")return;let u=mixNumber$1(c.min,c.max,s);e===c&&(u-=r),e.min=removePointDelta(e.min,r,i,u,a),e.max=removePointDelta(e.max,r,i,u,a)}function removeAxisTransforms(e,r,[i,s,a],c,l){removeAxisDelta(e,r[i],r[s],r[a],r.scale,c,l)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,r,i,s){removeAxisTransforms(e.x,r,xKeys,i?i.x:void 0,s?s.x:void 0),removeAxisTransforms(e.y,r,yKeys,i?i.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,r){return e.min===r.min&&e.max===r.max}function boxEquals(e,r){return axisEquals(e.x,r.x)&&axisEquals(e.y,r.y)}function axisEqualsRounded(e,r){return Math.round(e.min)===Math.round(r.min)&&Math.round(e.max)===Math.round(r.max)}function boxEqualsRounded(e,r){return axisEqualsRounded(e.x,r.x)&&axisEqualsRounded(e.y,r.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,r){return e.translate===r.translate&&e.scale===r.scale&&e.originPoint===r.originPoint}class NodeStack{constructor(){this.members=[]}add(r){addUniqueItem(this.members,r),r.scheduleRender()}remove(r){if(removeItem(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(r){const i=this.members.findIndex(a=>r===a);if(i===0)return!1;let s;for(let a=i;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){s=c;break}}return s?(this.promote(s),!0):!1}promote(r,i){const s=this.lead;if(r!==s&&(this.prevLead=s,this.lead=r,r.show(),s)){s.instance&&s.scheduleRender(),r.scheduleRender(),r.resumeFrom=s,i&&(r.resumeFrom.preserveOpacity=!0),s.snapshot&&(r.snapshot=s.snapshot,r.snapshot.latestValues=s.animationValues||s.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:a}=r.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:i,resumingFrom:s}=r;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,r,i){let s="";const a=e.x.translate/r.x,c=e.y.translate/r.y,l=i?.z||0;if((a||c||l)&&(s=`translate3d(${a}px, ${c}px, ${l}px) `),(r.x!==1||r.y!==1)&&(s+=`scale(${1/r.x}, ${1/r.y}) `),i){const{transformPerspective:d,rotate:p,rotateX:f,rotateY:m,skewX:g,skewY:E}=i;d&&(s=`perspective(${d}px) ${s}`),p&&(s+=`rotate(${p}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),g&&(s+=`skewX(${g}deg) `),E&&(s+=`skewY(${E}deg) `)}const u=e.x.scale*r.x,h=e.y.scale*r.y;return(u!==1||h!==1)&&(s+=`scale(${u}, ${h})`),s||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(e,r,i,s){const{latestValues:a}=r;a[e]&&(i[e]=a[e],r.setStaticValue(e,0),s&&(s[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:r}=e.options;if(!r)return;const i=getOptimisedAppearId(r);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",frame,!(a||c))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode({attachResizeListener:e,defaultParent:r,measureScroll:i,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},u=r?.()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new SubscriptionManager),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(l),this.instance=l;const{layoutId:h,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(d||h)&&(this.isLayoutDirty=!0),e){let f;const m=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=delay(m,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||p.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=p.getProps(),w=!this.targetLayout||!boxEqualsRounded(this.targetLayout,E)||g,T=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,T);const k={...getValueTransition(v,"layout"),onPlay:b,onComplete:y};(p.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const f=this.path[p];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const u=time.now();frameData.delta=clamp(0,1e3/60,u-frameData.timestamp),frameData.timestamp=u,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!isDeltaZero(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&(u||hasTransform(this.latestValues)||p)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),roundBox(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return createBox();const h=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:p}=this.root;p&&(translateAxis(h.x,p.offset.x),translateAxis(h.y,p.offset.y))}return h}removeElementScroll(l){var u;const h=createBox();if(copyBoxInto(h,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:f,options:m}=p;p!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&copyBoxInto(h,l),translateAxis(h.x,f.offset.x),translateAxis(h.y,f.offset.y))}return h}applyTransform(l,u=!1){const h=createBox();copyBoxInto(h,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&transformBox(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hasTransform(p.latestValues)&&transformBox(h,p.latestValues)}return hasTransform(this.latestValues)&&transformBox(h,this.latestValues),h}removeTransform(l){const u=createBox();copyBoxInto(u,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!hasTransform(d.latestValues))continue;hasScale(d.latestValues)&&d.updateSnapshot();const p=createBox(),f=d.measurePageBox();copyBoxInto(p,f),removeBoxTransforms(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return hasTransform(this.latestValues)&&removeBoxTransforms(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,g.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:p,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||f))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=createBox());const{target:E}=u;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(l,u=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},f=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const m=createBox(),g=h?h.source:void 0,E=this.layout?this.layout.source:void 0,v=g!==E,b=this.getStack(),y=!b||b.members.length<=1,w=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let T;this.mixTargetDelta=k=>{const _=k/1e3;mixAxisDelta(f.x,l.x,_),mixAxisDelta(f.y,l.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,m,_),T&&boxEquals(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=createBox()),copyBoxInto(T,this.relativeTarget)),v&&(this.animationValues=p,mixValues(p,d,this.latestValues,_,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:d,latestValues:p}=l;if(!(!u||!h||!d)){if(this!==l&&this.layout&&d&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||createBox();const f=calcLength(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+f;const m=calcLength(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+m}copyBoxInto(u,h),transformBox(u,p),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new NodeStack),this.sharedNodes.get(l).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const d={};h.z&&resetDistortingTransform("z",l,d,this.animationValues);for(let p=0;p<transformAxes.length;p++)resetDistortingTransform(`rotate${transformAxes[p]}`,l,d,this.animationValues),resetDistortingTransform(`skew${transformAxes[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}getProjectionStyles(l){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=resolveMotionValue(l?.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=resolveMotionValue(l?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(v.transform=p?p({},""):"none",this.hasProjected=!1),v}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,m),p&&(d.transform=p(m,d.transform));const{x:g,y:E}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${E.origin*100}% 0`,f.animationValues?d.opacity=f===this?(h=(u=m.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in scaleCorrectors){if(m[v]===void 0)continue;const{correct:b,applyTo:y}=scaleCorrectors[v],w=d.transform==="none"?m[v]:b(m[v],f);if(y){const T=y.length;for(let k=0;k<T;k++)d[y[k]]=w}else d[v]=w}return this.options.layoutId&&(d.pointerEvents=f===this?resolveMotionValue(l?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var r;const i=((r=e.resumeFrom)===null||r===void 0?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:c}=e.options,l=i.source!==e.layout.source;c==="size"?eachAxis(f=>{const m=l?i.measuredBox[f]:i.layoutBox[f],g=calcLength(m);m.min=s[f].min,m.max=m.min+g}):shouldAnimatePositionOnly(c,i.layoutBox,s)&&eachAxis(f=>{const m=l?i.measuredBox[f]:i.layoutBox[f],g=calcLength(s[f]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+g)});const u=createDelta();calcBoxDelta(u,s,i.layoutBox);const h=createDelta();l?calcBoxDelta(h,e.applyTransform(a,!0),i.measuredBox):calcBoxDelta(h,s,i.layoutBox);const d=!isDeltaZero(u);let p=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const E=createBox();calcRelativePosition(E,i.layoutBox,m.layoutBox);const v=createBox();calcRelativePosition(v,s,g.layoutBox),boxEqualsRounded(E,v)||(p=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=E,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:h,layoutDelta:u,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function propagateDirtyNodes(e){isDebug&&metrics.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:r}=e.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,r,i){e.translate=mixNumber$1(r.translate,0,i),e.scale=mixNumber$1(r.scale,1,i),e.origin=r.origin,e.originPoint=r.originPoint}function mixAxis(e,r,i,s){e.min=mixNumber$1(r.min,i.min,s),e.max=mixNumber$1(r.max,i.max,s)}function mixBox(e,r,i,s){mixAxis(e.x,r.x,i.x,s),mixAxis(e.y,r.y,i.y,s)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,r,i){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(r),aspectRatio(i),.2)}function checkNodeWasScrollRoot(e){var r;return e!==e.root&&((r=e.scroll)===null||r===void 0?void 0:r.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,r)=>addDomEvent(e,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,r)=>{e.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,r,i){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",i==="Start");const a="onHover"+i,c=s[a];c&&frame.postRender(()=>c(r,extractEventInfo(r)))}class HoverGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=hover(r,i=>(handleHoverEvent(this.node,i,"Start"),s=>handleHoverEvent(this.node,s,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,r,i){const{props:s}=e;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",i==="Start");const a="onTap"+(i==="End"?"":i),c=s[a];c&&frame.postRender(()=>c(r,extractEventInfo(r)))}class PressGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=press(r,i=>(handlePressEvent(this.node,i,"Start"),(s,{success:a})=>handlePressEvent(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const r=observerCallbacks.get(e.target);r&&r(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...r}){const i=e||document;observers.has(i)||observers.set(i,{});const s=observers.get(i),a=JSON.stringify(r);return s[a]||(s[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...r})),s[a]}function observeIntersection(e,r,i){const s=initIntersectionObserver(r);return observerCallbacks.set(e,i),s.observe(e),()=>{observerCallbacks.delete(e),s.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:i,margin:s,amount:a="some",once:c}=r,l={root:i?i.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:thresholdNames[a]},u=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,c&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),m=d?p:f;m&&m(h)};return observeIntersection(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:i}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(r,i))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:r={}}={}){return i=>e[i]!==r[i]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),r=()=>prefersReducedMotion.current=e.matches;e.addListener(r),r()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,r,i){for(const s in r){const a=r[s],c=i[s];if(isMotionValue(a))e.addValue(s,a);else if(isMotionValue(c))e.addValue(s,motionValue(a,{owner:e}));else if(c!==a)if(e.hasValue(s)){const l=e.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=e.getStaticValue(s);e.addValue(s,motionValue(l!==void 0?l:a,{owner:e}))}}for(const s in i)r[s]===void 0&&e.removeValue(s);return r}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(r,i,s){return{}}constructor({parent:r,props:i,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:c,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=time.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,frame.render(this.render,!1,!0))};const{latestValues:h,renderState:d,onUpdate:p}=l;this.onUpdate=p,this.latestValues=h,this.baseTarget={...h},this.initialValues=i.initial?{...h}:{},this.renderState=d,this.parent=r,this.props=i,this.presenceContext=s,this.depth=r?r.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.blockInitialAnimation=!!c,this.isControllingVariants=isControllingVariants(i),this.isVariantNode=isVariantNode(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(i,{},this);for(const g in m){const E=m[g];h[g]!==void 0&&isMotionValue(E)&&E.set(h[g],!1)}}mount(r){this.current=r,visualElementStore.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const i=this.features[r];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(r,i){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const s=transformProps.has(r),a=i.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),c=i.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,r,i)),this.valueSubscriptions.set(r,()=>{a(),c(),l&&l(),i.owner&&i.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in featureDefinitions){const i=featureDefinitions[r];if(!i)continue;const{isEnabled:s,Feature:a}=i;if(!this.features[r]&&a&&s(this.props)&&(this.features[r]=new a(this)),this.features[r]){const c=this.features[r];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,i){this.latestValues[r]=i}update(r,i){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<propEventHandlers.length;s++){const a=propEventHandlers[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c="on"+a,l=r[c];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(r),()=>i.variantChildren.delete(r)}addValue(r,i){const s=this.values.get(r);i!==s&&(s&&this.removeValue(r),this.bindToMotionValue(r,i),this.values.set(r,i),this.latestValues[r]=i.get())}removeValue(r){this.values.delete(r);const i=this.valueSubscriptions.get(r);i&&(i(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,i){if(this.props.values&&this.props.values[r])return this.props.values[r];let s=this.values.get(r);return s===void 0&&i!==void 0&&(s=motionValue(i===null?void 0:i,{owner:this}),this.addValue(r,s)),s}readValue(r,i){var s;let a=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:(s=this.getBaseTargetFromProps(this.props,r))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,r,this.options);return a!=null&&(typeof a=="string"&&(isNumericalString(a)||isZeroValueString(a))?a=parseFloat(a):!findValueType(a)&&complex.test(i)&&(a=getAnimatableNone(r,i)),this.setBaseTarget(r,isMotionValue(a)?a.get():a)),isMotionValue(a)?a.get():a}setBaseTarget(r,i){this.baseTarget[r]=i}getBaseTarget(r){var i;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=resolveVariantFromProps(this.props,s,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);l&&(a=l[r])}if(s&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,r);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[r]!==void 0&&a===void 0?void 0:this.baseTarget[r]}on(r,i){return this.events[r]||(this.events[r]=new SubscriptionManager),this.events[r].add(i)}notify(r,...i){this.events[r]&&this.events[r].notify(...i)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(r,i){return r.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(r,i){return r.style?r.style[i]:void 0}removeValueFromRenderState(r,{vars:i,style:s}){delete i[r],delete s[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;isMotionValue(r)&&(this.childSubscription=r.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function getComputedStyle(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(r,i){if(transformProps.has(i)){const s=getDefaultValueType(i);return s&&s.default||0}else{const s=getComputedStyle(r),a=(isCSSVariableName(i)?s.getPropertyValue(i):s[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(r,{transformPagePoint:i}){return measureViewportBox(r,i)}build(r,i,s){buildHTMLStyles(r,i,s.transformTemplate)}scrapeMotionValuesFromProps(r,i,s){return scrapeMotionValuesFromProps$1(r,i,s)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(r,i){return r[i]}readValueFromInstance(r,i){if(transformProps.has(i)){const s=getDefaultValueType(i);return s&&s.default||0}return i=camelCaseAttributes.has(i)?i:camelToDash(i),r.getAttribute(i)}scrapeMotionValuesFromProps(r,i,s){return scrapeMotionValuesFromProps(r,i,s)}build(r,i,s){buildSVGAttrs(r,i,this.isSVGTag,s.transformTemplate)}renderInstance(r,i,s,a){renderSVG(r,i,s,a)}mount(r){this.isSVGTag=isSVGTag(r.tagName),super.mount(r)}}const createDomVisualElement=(e,r)=>isSVGComponent(e)?new SVGVisualElement(r):new HTMLVisualElement(r,{allowProjection:e!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);function PlaylistCreationScreen({onClose:e,onPublish:r,inline:i=!1}){const[s,a]=reactExports.useState(""),[c,l]=reactExports.useState([]),[u,h]=reactExports.useState(0),[d,p]=reactExports.useState([]),[f,m]=reactExports.useState("platform"),[g,E]=reactExports.useState(""),[v,b]=reactExports.useState(!0),[y,w]=reactExports.useState(null),[T,k]=reactExports.useState(null);reactExports.useRef(null);const _=reactExports.useRef(null),[P,R]=reactExports.useState(25),[I,H]=reactExports.useState(1);reactExports.useEffect(()=>{B()},[]);const B=async()=>{try{const ee=(await O()).transaction(["localTracks"],"readonly").objectStore("localTracks"),be=(await new Promise((Re,je)=>{const J=ee.getAll();J.onsuccess=()=>Re(J.result),J.onerror=()=>je(J.error)})).map(Re=>{try{const je=URL.createObjectURL(Re.file);return{...Re,url:je}}catch(je){return console.error("Failed to create URL for track:",Re.id,je),null}}).filter(Boolean);p(be),b(!1)}catch(ae){console.error("Failed to load local tracks:",ae),b(!1)}},O=()=>openBrickDB(),V=ae=>{const G=Math.floor(ae/60),ee=Math.floor(ae%60);return`${G}:${ee.toString().padStart(2,"0")}`},q={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],shoegaze:["shoegaze","dream pop","ambient","post-rock","noise rock","ethereal","atmospheric"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},ue=ae=>{if(!ae)return"unknown";const G=ae.toLowerCase().trim();for(const[ee,pe]of Object.entries(q))for(const be of pe)if(G.includes(be)||be.includes(G))return be;return G},K=ae=>{if(ae.length===0)return 0;if(ae.length===1)return 100;const G=ae.map($e=>ue($e.genre)),ee=G.filter($e=>$e==="unknown").length;if(ee===ae.length)return 50;const pe=ee/ae.length*20,be=G.map($e=>{const gt=[];return Object.entries(q).forEach(([ft,pt])=>{pt.includes($e)&&gt.push(ft)}),{genre:$e,groups:gt}}),Re=G.filter($e=>$e!=="unknown"),je=new Set(Re);if(je.size===1&&ee===0)return 100;if(je.size===1&&ee>0)return Math.max(50,100-pe);let J=0,Se=0;for(let $e=0;$e<be.length;$e++)for(let gt=$e+1;gt<be.length;gt++){if(G[$e]==="unknown"||G[gt]==="unknown")continue;Se++;const ft=be[$e].groups,pt=be[gt].groups;ft.some(j=>pt.includes(j))&&J++}if(Se===0)return 50;const Pe=J/Se;let Te;return Pe>=.9?Te=95:Pe>=.7?Te=80:Pe>=.5?Te=60:Pe>=.3?Te=40:Te=Math.round(Pe*100),Math.max(0,Math.round(Te-pe))},ce=[{id:"track-1",title:"Concrete Dreams",artist:"Nora Vex",album:"Industrial Soundscapes",duration:"4:32",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400",isPatronage:!1,genre:"shoegaze"},{id:"track-2",title:"Midnight Foundation",artist:"The Midnight Architects",album:"Structural Integrity",duration:"5:18",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400",isPatronage:!1,genre:"post-rock"},{id:"track-3",title:"Brass & Stone",artist:"Luna Chen",album:"Material Studies",duration:"3:45",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400",isPatronage:!1,genre:"indie rock"},{id:"track-4",title:"Digital Breakdown",artist:"Marcus Flow",album:"Urban Chronicles",duration:"3:22",quality:"320kbps",coverArt:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",isPatronage:!1,genre:"hip hop"},{id:"track-5",title:"Steel Resonance",artist:"Iron Assembly",album:"Forge",duration:"5:45",quality:"FLAC",coverArt:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400",isPatronage:!1,genre:"metal"}],we=ae=>{const G=[...c,ae];l(G);const ee=K(G);h(ee)},W=ae=>{console.log("Adding local track:",ae),console.log("Local track genre:",ae.genre);const G={id:ae.id,title:ae.name,artist:ae.artist,album:ae.album,duration:V(ae.duration),quality:ae.format,coverArt:ae.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ae.url,isPatronage:!1,genre:ae.genre,bitDepth:ae.bitDepth,sampleRate:ae.sampleRate,bitrateKbps:ae.bitrateKbps,codecLabel:ae.codecLabel,file:ae.file};console.log("Converted track:",G),we(G)},fe=ae=>{const G=c.filter(pe=>pe.id!==ae);l(G);const ee=K(G);h(ee)},F=(ae,G)=>{const ee=c.findIndex(je=>je.id===ae),pe=c.findIndex(je=>je.id===G);if(ee===-1||pe===-1||ee===pe)return;const be=[...c],Re=be[ee];be.splice(ee,1),be.splice(pe,0,Re),l(be)},L=ae=>{w(ae)},Q=ae=>{ae.preventDefault(),ae.dataTransfer.dropEffect="move"},se=ae=>{y&&y!==ae&&F(y,ae),w(null)},oe=()=>{w(null)},ge=s.length>0&&c.length>0&&u>=50,ve=g.trim().toLowerCase(),_e=ve.length>0,Z=ae=>!_e||!ae?!1:ae.toLowerCase().includes(ve),le=_e?ce.filter(ae=>Z(ae.title)||Z(ae.name)||Z(ae.artist)||Z(ae.album)||Z(ae.genre)):ce,Ce=_e?d.filter(ae=>Z(ae.name)||Z(ae.artist)||Z(ae.album)||Z(ae.genre)||Z(ae.format)):d;reactExports.useEffect(()=>{console.log("=== Fire Brick Debug ==="),console.log("Playlist Name:",s),console.log("Tracks Count:",c.length),console.log("Structural Integrity:",u),console.log("Can Publish:",ge),console.log("Track Genres:",c.map(ae=>({title:ae.title,genre:ae.genre}))),console.log("========================")},[s,c,u,ge]),reactExports.useEffect(()=>{if(i)return;const ae=G=>{G.key==="Escape"&&e()};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[i,e]),reactExports.useEffect(()=>{i||setTimeout(()=>_.current?.focus(),50)},[i]);const He=jsxRuntimeExports.jsxs(motion.div,{id:"playlist-creation-dialog",role:"dialog","aria-modal":"true","aria-labelledby":"playlist-creation-title",className:"relative z-10 w-full max-w-4xl mx-auto overflow-hidden rounded-2xl shadow-2xl p-0 flex flex-col",style:{backgroundColor:"rgba(20,20,20,0.85)",backdropFilter:"blur(6px)",border:"1px solid rgba(211,47,47,0.8)",maxHeight:"80vh"},initial:{opacity:0,y:-8,scale:.995},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.995},transition:{duration:.18,ease:[.2,.8,.4,1]},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3 px-4 py-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{id:"playlist-creation-title",className:"text-2xl font-semibold",style:{color:"#e0e0e0"},children:"Drawing New Blueprints"}),jsxRuntimeExports.jsx("p",{className:"text-xs mono mt-1",style:{color:"#a0a0a0"},children:"Use the search to find tracks and drag them into the batch to build your Brick."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 rounded-lg bg-transparent",role:"tablist","aria-label":"View mode",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>m("platform"),"aria-pressed":f==="platform",className:`px-3 py-2 rounded-lg transition ${f==="platform"?"bg-white/6 border border-white/10":"bg-transparent border border-transparent"}`,style:{borderColor:f==="platform"?"#3a3a3a":"transparent"},title:"Platform tracks",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Music,{size:14,color:f==="platform"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono text-xs",style:{color:f==="platform"?"#e0e0e0":"#a0a0a0"},children:"Platform"})]})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>m("local"),"aria-pressed":f==="local",className:`px-3 py-2 rounded-lg transition ${f==="local"?"bg-white/6 border border-white/10":"bg-transparent border border-transparent"}`,style:{borderColor:f==="local"?"#3a3a3a":"transparent"},title:"Local tracks",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(HardDrive,{size:14,color:f==="local"?"#d32f2f":"#a0a0a0"}),jsxRuntimeExports.jsx("span",{className:"mono text-xs",style:{color:f==="local"?"#e0e0e0":"#a0a0a0"},children:"Local"})]})})]}),jsxRuntimeExports.jsx("input",{"aria-label":"Search tracks",className:"rounded-lg px-3 py-2 mono",placeholder:"Search by title, artist, or album...",value:g,onChange:ae=>E(ae.target.value),style:{backgroundColor:"#212121",color:"#e0e0e0",border:"1px solid #2e2e2e",minWidth:"220px"}}),jsxRuntimeExports.jsx("button",{onClick:e,"aria-label":"Close",className:"p-2 rounded hover:bg-white/5 transition",title:"Close",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto flex-1 px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-start",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-4",children:[jsxRuntimeExports.jsx("label",{className:"mono mb-2 block",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"BRICK NAME"}),jsxRuntimeExports.jsx("input",{ref:_,type:"text",value:s,onChange:ae=>a(ae.target.value),placeholder:"Enter playlist name...",className:"w-full px-3 py-2 rounded-lg outline-none mono",style:{backgroundColor:"#232323",border:"1px solid #333333",color:"#e0e0e0"}}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("h4",{className:"mb-2",children:["The Batch ",jsxRuntimeExports.jsxs("span",{className:"mono text-xs",style:{color:"#a0a0a0"},children:["(",c.length,")"]})]}),c.length===0?jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg text-center min-h-[220px] flex items-center justify-center",style:{backgroundColor:"#222228",border:"1px dashed #2d2d2d"},children:jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No tracks added yet"})}):jsxRuntimeExports.jsx("div",{className:"rounded-lg overflow-hidden min-h-[220px]",style:{backgroundColor:"#222228",border:"1px solid #2d2d2d"},children:c.map((ae,G)=>(typeof ae.duration=="string"&&ae.duration.includes(":")?ae.duration:V(Number(ae.duration)||0),jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 p-3 ${G<c.length-1?"border-b":""} min-h-[64px] cursor-grab ${y===ae.id?"opacity-50":""}`,style:{color:"#e0e0e0",borderColor:"#2d2d2d"},draggable:!0,onDragStart:()=>L(ae.id),onDragOver:Q,onDrop:()=>se(ae.id),onDragEnd:oe,"aria-grabbed":y===ae.id,children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center mono",style:{color:"#a0a0a0"},children:G+1}),jsxRuntimeExports.jsx("input",{type:"number",min:1,max:c.length,value:G+1,onChange:ee=>{const pe=Math.max(1,Math.min(c.length,Number(ee.target.value||G+1)));pe-1!==G&&F(ae.id,c[pe-1]?.id||ae.id)},className:"w-12 text-center rounded bg-transparent border border-transparent text-xs mono"}),jsxRuntimeExports.jsx(GripVertical,{size:16,color:"#a0a0a0",className:"cursor-grab"}),jsxRuntimeExports.jsx(ImageWithFallback,{src:ae.coverArt||ae.audioUrl||"",alt:ae.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:`flex-1 min-w-0 text-left ${y===ae.id?"opacity-50":""}`,"aria-grabbed":y===ae.id,children:[jsxRuntimeExports.jsx("div",{className:"truncate font-semibold",children:ae.title||ae.name}),jsxRuntimeExports.jsxs("div",{className:"mono text-xs text-[#9a9a9a]",children:[ae.artist,"  ",typeof ae.duration=="string"&&ae.duration.includes(":")?ae.duration:V(Number(ae.duration)||0)]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>fe(ae.id),className:"p-1 hover:bg-white/5 rounded transition","aria-label":`Remove ${ae.title||ae.name}`,children:jsxRuntimeExports.jsx(X,{size:16,color:"#a0a0a0"})})]},ae.id)))})]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsx("h4",{className:"mb-2",children:"Results"})}),jsxRuntimeExports.jsx("div",{className:"space-y-2 min-h-[220px]",children:(f==="platform"?le:Ce).slice(0,P).map(ae=>jsxRuntimeExports.jsxs("button",{onClick:()=>{f==="local"?W(ae):we(ae)},className:"w-full flex items-center gap-3 p-3 rounded-lg transition hover:bg-white/5 min-h-[64px]",style:{backgroundColor:"#212121",border:"1px solid #2a2a2a"},children:[jsxRuntimeExports.jsx(ImageWithFallback,{src:ae.coverArt,alt:ae.album,className:"w-12 h-12 rounded object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("p",{className:"truncate font-semibold",style:{color:"#e0e0e0"},children:ae.title||ae.name}),jsxRuntimeExports.jsx("p",{className:"mono truncate text-xs",style:{color:"#a0a0a0"},children:ae.artist})]})]},ae.id))})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("div",{className:"mt-0",children:jsxRuntimeExports.jsx("button",{onClick:()=>{ge&&r(s,c)},className:"w-full py-3 rounded-full",style:{background:ge?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:ge?"#e0e0e0":"#9a9a9a"},disabled:!ge,children:"Fire Brick (Publish)"})})})]});return i?He:jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-[105] flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:.1},exit:{opacity:0},transition:{duration:.18},className:"absolute inset-0 bg-black/10",onClick:e}),jsxRuntimeExports.jsx("div",{onClick:ae=>ae.stopPropagation(),className:"relative z-20 w-full flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-4xl",children:He})})]})}function LoginScreen({onLogin:e,onSignup:r}){const[i,s]=reactExports.useState("initial"),[a,c]=reactExports.useState(""),[l,u]=reactExports.useState(""),[h,d]=reactExports.useState(""),[p,f]=reactExports.useState(""),[m,g]=reactExports.useState(!1),E=async()=>{if(!a||!l){f("Please fill in all fields");return}g(!0),f("");try{const{loginUser:w}=await __vitePreload(async()=>{const{loginUser:k}=await Promise.resolve().then(()=>auth);return{loginUser:k}},void 0),T=await w(a,l);e(T)}catch(w){f(w instanceof Error?w.message:"Login failed")}finally{g(!1)}},v=async()=>{if(!a||!l||!h){f("Please fill in all fields");return}if(l.length<6){f("Password must be at least 6 characters");return}g(!0),f("");try{const{registerUser:w}=await __vitePreload(async()=>{const{registerUser:k}=await Promise.resolve().then(()=>auth);return{registerUser:k}},void 0),T=await w(a,l,h);r()}catch(w){f(w instanceof Error?w.message:"Registration failed")}finally{g(!1)}},b=()=>{a&&s("login")},y=()=>{a&&s("register")};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%)"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`repeating-linear-gradient(
              0deg,
              transparent,
              transparent 2px,
              rgba(255, 255, 255, 0.03) 2px,
              rgba(255, 255, 255, 0.03) 4px
            )`,animation:"slow-shift 20s linear infinite"}})}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes slow-shift {
          from {
            transform: translateY(0);
          }
          to {
            transform: translateY(40px);
          }
        }
      `}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16 fade-in",children:[jsxRuntimeExports.jsx("h1",{style:{fontSize:"4rem",letterSpacing:"0.2em",color:"#e0e0e0",textTransform:"uppercase",fontWeight:900},children:"BRICK"}),jsxRuntimeExports.jsx("p",{className:"mono mt-2",style:{color:"#a0a0a0",fontSize:"0.75rem",letterSpacing:"0.1em"},children:"BUILD ON SOLID GROUND"})]}),jsxRuntimeExports.jsxs("div",{className:"spring-in rounded-2xl p-8 overflow-hidden",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)"},children:[i==="initial"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h3",{className:"mb-6 text-center",style:{color:"#e0e0e0"},children:"Lay Your First Brick"}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:a,onChange:w=>{c(w.target.value),f("")},onKeyDown:w=>w.key==="Enter"&&a&&b(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid",borderColor:a?"#e0e0e0":"#333333",fontSize:"1rem"}})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:b,disabled:!a,className:"w-full py-3 rounded-full transition-all duration-200",style:{backgroundColor:"transparent",border:"1px solid #e0e0e0",color:"#e0e0e0",opacity:a?1:.5,cursor:a?"pointer":"not-allowed"},children:"Enter (Log In)"}),jsxRuntimeExports.jsx("button",{onClick:y,disabled:!a,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:a?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:a?"#e0e0e0":"#666666",boxShadow:a?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:a?"pointer":"not-allowed"},children:"Begin Construction (Sign Up)"})]})]}),i==="login"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{s("initial"),u(""),f("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Log In"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:a,onChange:w=>{c(w.target.value),f("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:w=>{u(w.target.value),f("")},onKeyDown:w=>w.key==="Enter"&&a&&l&&E(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),p&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:p})}),jsxRuntimeExports.jsx("button",{onClick:E,disabled:!a||!l||m,className:"w-full py-3 rounded-full transition-all duration-200",style:{background:a&&l?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:a&&l?"#e0e0e0":"#666666",boxShadow:a&&l?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:a&&l&&!m?"pointer":"not-allowed"},children:m?"Logging in...":"Enter"})]}),i==="register"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{s("initial"),u(""),d(""),f("")},className:"text-sm mono",style:{color:"#a0a0a0"},children:" Back"}),jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Sign Up"}),jsxRuntimeExports.jsx("div",{style:{width:"60px"}})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Your name",value:h,onChange:w=>{d(w.target.value),f("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email address",value:a,onChange:w=>{c(w.target.value),f("")},className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:l,onChange:w=>{u(w.target.value),f("")},onKeyDown:w=>w.key==="Enter"&&a&&l&&h&&v(),className:"w-full bg-transparent outline-none pb-3 transition-all",style:{color:"#e0e0e0",borderBottom:"2px solid #333333",fontSize:"1rem"}})]}),p&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:"#d32f2f"},children:p})}),jsxRuntimeExports.jsx("button",{onClick:v,disabled:!a||!l||!h||m,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:a&&l&&h?"linear-gradient(to bottom, #d32f2f, #b71c1c)":"linear-gradient(to bottom, #333333, #2a2a2a)",color:a&&l&&h?"#e0e0e0":"#666666",boxShadow:a&&l&&h?"0 4px 20px rgba(211, 47, 47, 0.4)":"none",cursor:a&&l&&h&&!m?"pointer":"not-allowed"},children:m?"Creating account...":"Begin Construction"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem"},children:"BY CONTINUING, YOU AGREE TO BRICK'S TERMS"})})]})]})}function ImportScreen({onImport:e,onSkip:r}){const[i,s]=reactExports.useState(null),[a,c]=reactExports.useState(!1),l=[{id:"spotify",name:"Spotify",icon:""},{id:"apple",name:"Apple Music",icon:""},{id:"tidal",name:"Tidal",icon:""}],u=h=>{s(h),c(!0),setTimeout(()=>{e(h)},3e3)};return a?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center fade-in",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",animation:"pulse 2s ease-in-out infinite"},children:jsxRuntimeExports.jsx(Music,{size:32,color:"#e0e0e0"})})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Connecting..."}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Analyzing Audio Quality..."}),jsxRuntimeExports.jsx("div",{className:"mt-6 mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:jsxRuntimeExports.jsx("p",{className:"animate-pulse",children:"Importing library..."})})]}),jsxRuntimeExports.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.05);
              opacity: 0.8;
            }
          }
        `})]}):jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12 fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"mb-3",style:{color:"#e0e0e0"},children:"Do you have existing materials?"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"Import your library to upgrade to lossless quality."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:l.map((h,d)=>jsxRuntimeExports.jsxs("button",{onClick:()=>u(h.id),className:"spring-in p-8 rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)",animationDelay:`${d*.1}s`},children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4 opacity-80",style:{filter:"grayscale(1) brightness(1.5)"},children:h.icon}),jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:h.name})]},h.id))}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:r,className:"transition-all duration-200 hover:opacity-70",style:{color:"#a0a0a0",fontSize:"0.875rem",textDecoration:"underline"},children:"No, I'm starting fresh"})})]})})}function ConnectionManagementScreen({onClose:e}){const[r,i]=reactExports.useState(""),[s,a]=reactExports.useState("active"),c=mockConnections$1.slice(0,8),l=mockConnections$1.slice(8,10),u=mockConnections$1.slice(10,11),h=c.filter(m=>m.user.name.toLowerCase().includes(r.toLowerCase())),d=c.length,p=mockCurrentUser.connectionsMax,f=p-d;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 px-6 py-4 border-b border-[#333333]",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"mb-0",children:"Bond Management"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all hover:scale-110",style:{backgroundColor:"rgba(37, 37, 37, 0.8)"},children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{size:18,color:"#546e7a"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.75rem"},children:"BOND CAPACITY"})]}),jsxRuntimeExports.jsxs("p",{style:{color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:f<=2?"#d32f2f":"#c6a700"},children:d}),"/",p]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${d/p*100}%`,backgroundColor:f<=2?"#d32f2f":"#c6a700"}})}),f<=2&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:14,color:"#d32f2f"}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:f===0?"Connection capacity reached. Remove connections or upgrade tier.":`Only ${f} slot${f===1?"":"s"} remaining.`})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-4",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2",size:18,color:"#a0a0a0"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search connections...",value:r,onChange:m=>i(m.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg transition-all",style:{backgroundColor:"#252525",border:"1px solid #333333",color:"#e0e0e0",outline:"none"}})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a("active"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:s==="active"?"#d32f2f":"transparent",color:s==="active"?"#e0e0e0":"#a0a0a0",border:`1px solid ${s==="active"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["ACTIVE (",c.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>a("pending"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:s==="pending"?"#d32f2f":"transparent",color:s==="pending"?"#e0e0e0":"#a0a0a0",border:`1px solid ${s==="pending"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["PENDING (",l.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>a("blocked"),className:"px-4 py-2 rounded-full transition-all",style:{backgroundColor:s==="blocked"?"#d32f2f":"transparent",color:s==="blocked"?"#e0e0e0":"#a0a0a0",border:`1px solid ${s==="blocked"?"#d32f2f":"#333333"}`},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{fontSize:"0.75rem"},children:["BLOCKED (",u.length,")"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 pb-24",children:[s==="active"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:h.map(m=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"#252525",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:m.user.avatar,alt:m.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:m.user.name}),jsxRuntimeExports.jsx("div",{className:"px-2 py-0.5 rounded",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#546e7a",fontSize:"0.65rem"},children:[m.matchScore,"% MATCH"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Activity,{size:14,color:"#a0a0a0"}),jsxRuntimeExports.jsxs("span",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:[m.mutualArtists," mutual artists"]})]}),jsxRuntimeExports.jsxs("span",{style:{color:"#666666",fontSize:"0.75rem"},children:["Connected ",Math.floor(Math.random()*90+10)," days ago"]})]})]}),jsxRuntimeExports.jsx("button",{className:"p-2 rounded-lg transition-all hover:bg-[#333333]",style:{color:"#d32f2f"},children:jsxRuntimeExports.jsx(UserMinus,{size:18})})]})},m.user.id))}),s==="pending"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:l.map(m=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(198, 167, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:m.user.avatar,alt:m.user.name,className:"w-14 h-14 rounded-full object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:m.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#c6a700",fontSize:"0.75rem"},children:"Awaiting their acceptance"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #666666",color:"#a0a0a0",fontSize:"0.75rem"},children:"Cancel"})]})},m.user.id))}),s==="blocked"&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:u.map(m=>jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:m.user.avatar,alt:m.user.name,className:"w-14 h-14 rounded-full object-cover opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:m.user.name}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Blocked user"})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded-full transition-all hover:bg-[#333333]",style:{backgroundColor:"transparent",border:"1px solid #546e7a",color:"#546e7a",fontSize:"0.75rem"},children:"Unblock"})]})},m.user.id))})]})]})})}function ArtistProfileScreenV2({artist:e,onClose:r,onShowPatronageLock:i}){const[s,a]=reactExports.useState(0),[c,l]=reactExports.useState(!1),[u,h]=reactExports.useState(!0),d=reactExports.useRef(null);reactExports.useEffect(()=>{const v=()=>{d.current&&a(d.current.scrollTop)},b=d.current;if(b)return b.addEventListener("scroll",v),()=>b.removeEventListener("scroll",v)},[]);const p=Math.min(s/200,1),f=1+s/2e3,m=Math.min(s/20,20),g=[{id:1,name:"Industrial Soundscapes",year:2024,image:"https://images.unsplash.com/photo-1644855640845-ab57a047320e?w=400"},{id:2,name:"Concrete Dreams",year:2023,image:"https://images.unsplash.com/photo-1757889693310-1e77c6063ba7?w=400"},{id:3,name:"The Foundation",year:2022,image:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400"}],E=()=>{if(u&&i){i();return}l(!c),navigator.vibrate&&navigator.vibrate(50)};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#1a1a1a]",children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 transition-opacity duration-300",style:{opacity:p,pointerEvents:p>.5?"auto":"none"},children:jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("button",{onClick:r,className:"p-2 -ml-2",children:jsxRuntimeExports.jsx(ArrowLeft,{size:24,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("h4",{className:"truncate",style:{color:"#e0e0e0"},children:e.name}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsxs("div",{ref:d,className:"h-full overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-96 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 transition-all duration-100",style:{transform:`scale(${f}) translateY(${s*.5}px)`,filter:`grayscale(40%) brightness(0.6) blur(${m}px)`},children:jsxRuntimeExports.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, #1a1a1a 0%, transparent 60%)"}}),jsxRuntimeExports.jsx("button",{onClick:r,className:"absolute top-6 left-6 w-10 h-10 rounded-full flex items-center justify-center transition-opacity duration-300",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",opacity:1-p},children:jsxRuntimeExports.jsx(ArrowLeft,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-8 left-6 right-6",children:[jsxRuntimeExports.jsx("h2",{className:"mb-2",style:{fontSize:"2.5rem",color:"#e0e0e0"},children:e.name}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"1.125rem"},children:e.genre})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-24",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6 -mt-6",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.4)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0"},children:"Monthly Support"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:c?"$8.00/month  80% to artist":"Support this artist directly"})]}),jsxRuntimeExports.jsx("button",{onClick:E,className:"relative transition-all duration-300",style:{width:"60px",height:"32px",borderRadius:"16px",backgroundColor:c?"#d32f2f":"#333333",boxShadow:c?"0 0 20px rgba(211, 47, 47, 0.4)":"none"},children:jsxRuntimeExports.jsx("div",{className:"absolute top-1 transition-all duration-300",style:{left:c?"calc(100% - 28px)":"4px",width:"24px",height:"24px",borderRadius:"12px",backgroundColor:"#e0e0e0"}})})]}),c&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded-lg spring-in",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Crown,{size:16,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:"Payment Allocated  Support Active"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 rounded-2xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Revenue Dashboard"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Users,{size:16,color:"#c6a700"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"GLOBAL PATRONS"})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:e.globalChosenUsers.toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mono mb-2",style:{color:"#a0a0a0",fontSize:"0.7rem",letterSpacing:"0.05em"},children:"YOUR CONTRIBUTION"}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#e0e0e0",fontSize:"1.75rem"},children:c?"$8.00":"$0.00"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Essential Albums"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:jsxRuntimeExports.jsx("div",{className:"flex gap-4",style:{width:"max-content"},children:g.map(v=>jsxRuntimeExports.jsxs("div",{className:"cursor-pointer transition-transform duration-200 hover:scale-105",style:{width:"180px"},children:[jsxRuntimeExports.jsx("img",{src:v.image,alt:v.name,className:"w-full aspect-square rounded-xl mb-3 object-cover"}),jsxRuntimeExports.jsx("h4",{className:"truncate mb-1",style:{color:"#e0e0e0"},children:v.name}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:v.year})]},v.id))})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mb-4",style:{color:"#e0e0e0"},children:"Top Bricks"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:mockPlaylists.slice(0,4).map(v=>jsxRuntimeExports.jsx(BrickCard,{playlist:v,size:"medium"},v.id))})]})]})]})]})}const EXTENSION_TABLE={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"},QUALITY_KEYWORDS=[["FLAC","FLAC"],["ALAC","ALAC"],["AAC","AAC"],["AIFF","AIFF"],["WAV","WAV"],["MP3","MP3"],["320KBPS","MP3"],["256KBPS","AAC"],["M4A","M4A"],["OGG","OGG"],["OPUS","OPUS"],["LOSSLESS","FLAC"]],MIME_KEYWORDS=[["flac","FLAC"],["x-wav","WAV"],["wav","WAV"],["wave","WAV"],["aiff","AIFF"],["aac","AAC"],["alac","ALAC"],["mp4","M4A"],["m4a","M4A"],["mpeg","MP3"],["mp3","MP3"],["ogg","OGG"],["opus","OPUS"],["webm","WEBM"]],isNonEmpty=e=>e!=null&&e!=="",matchKeyword=(e,r)=>{if(!isNonEmpty(e))return;const i=e.toUpperCase();for(const[s,a]of r)if(i.includes(s))return a},matchMime=e=>{if(!isNonEmpty(e))return;const r=e.toLowerCase();for(const[i,s]of MIME_KEYWORDS)if(r.includes(i))return s},extFromName$1=e=>{if(!isNonEmpty(e))return;const r=e.split("?")[0].split("#")[0],i=r.lastIndexOf(".");if(i!==-1)return r.substring(i+1).toLowerCase()},labelFromExtension=e=>{const r=extFromName$1(e);if(isNonEmpty(r))return EXTENSION_TABLE[r]};function inferCodecLabel(e){if(isNonEmpty(e.codecLabel))return e.codecLabel;const r=matchKeyword(e.qualityHint,QUALITY_KEYWORDS);if(r!==void 0)return r;if(e.file){const i=matchMime(e.file.type);if(isNonEmpty(i))return i;const s=labelFromExtension(e.file.name);if(isNonEmpty(s))return s}if(isNonEmpty(e.url)){const i=labelFromExtension(e.url);if(isNonEmpty(i))return i}}function formatBitrate(e){return e==null||Number.isNaN(e)?null:`${Math.round(e).toLocaleString()} kbps`}const MAX_BUFFER_BYTES=80*1024*1024,MAX_DECODE_DURATION_SECONDS=2700,GAPLESS_TOO_LARGE_ERROR="Track too large for gapless buffer; stream instead.";class GaplessAudioEngine{audioContext;gainNode;analyserNode=null;currentSource=null;nextSource=null;currentBuffer=null;nextBuffer=null;currentTrack=null;nextTrack=null;isPlaying=!1;volume=1;isMuted=!1;playbackStartTime=0;pausedAt=0;scheduledNextTrack=!1;preloadTimeoutId=null;swapTimeoutId=null;bassFilter;midFilter;trebleFilter;onStateChange=null;onTrackEnd=null;onTrackChange=null;onPreloadStateChange=null;rafId=null;suppressOnEnded=!1;nextFetchController=null;currentPreloadTrackId=null;async fetchArrayBufferWithLimit(r,i){const s=await fetch(r,{signal:i?.signal});if(!s.ok)throw new Error(`Failed to fetch audio (${s.status})`);const a=s.headers.get("content-length"),c=a===null?NaN:Number(a);if(Number.isFinite(c)&&c>MAX_BUFFER_BYTES)throw i?.abort(),new Error(GAPLESS_TOO_LARGE_ERROR);const l=s.body?.getReader();if(!l){const m=await s.arrayBuffer();if(m.byteLength>MAX_BUFFER_BYTES)throw new Error(GAPLESS_TOO_LARGE_ERROR);return m}const u=[];let h=0,d=!1;for(;!d;){const{done:m,value:g}=await l.read();if(d=!!m,d)break;if(g!==void 0){if(h+=g.byteLength,h>MAX_BUFFER_BYTES)throw i?.abort(),new Error(GAPLESS_TOO_LARGE_ERROR);u.push(g)}}const p=new Uint8Array(h);let f=0;for(const m of u)p.set(m,f),f+=m.byteLength;return p.buffer}constructor(){const r=window,i=r.AudioContext??r.webkitAudioContext;if(!i)throw new Error("Web Audio API not supported");this.audioContext=new i,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=this.volume,this.bassFilter=this.audioContext.createBiquadFilter(),this.bassFilter.type="lowshelf",this.bassFilter.frequency.value=200,this.midFilter=this.audioContext.createBiquadFilter(),this.midFilter.type="peaking",this.midFilter.frequency.value=1e3,this.midFilter.Q.value=1,this.trebleFilter=this.audioContext.createBiquadFilter(),this.trebleFilter.type="highshelf",this.trebleFilter.frequency.value=3200,this.analyserNode=this.audioContext.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,this.gainNode.connect(this.bassFilter),this.bassFilter.connect(this.midFilter),this.midFilter.connect(this.trebleFilter),this.trebleFilter.connect(this.analyserNode),this.analyserNode.connect(this.audioContext.destination),this.startTimeUpdates()}getAnalyserNode(){return this.analyserNode}setCallbacks(r){this.onStateChange=r.onStateChange||null,this.onTrackEnd=r.onTrackEnd||null,this.onTrackChange=r.onTrackChange||null,this.onPreloadStateChange=r.onPreloadStateChange||null}async loadTrack(r){this.currentTrack=r,this.cancelNextPreload("switch-track"),this.nextSource!==null&&(this.nextSource.stop(),this.nextSource=null),this.nextBuffer=null,this.nextTrack=null,this.clearScheduledTransitions();const i=await this.fetchArrayBufferWithLimit(r.url),s=await this.audioContext.decodeAudioData(i);if(s.duration>MAX_DECODE_DURATION_SECONDS)throw new Error(GAPLESS_TOO_LARGE_ERROR);this.currentBuffer=s,this.onTrackChange&&this.onTrackChange(r.id),this.notifyStateChange({duration:s.duration,currentTime:0})}async preloadNextTrack(r){this.cancelNextPreload("new-request"),this.nextTrack=r,this.currentPreloadTrackId=r.id;const i=new AbortController;this.nextFetchController=i,this.notifyPreloadState({trackId:r.id,status:"loading",isCloud:r.isCloud});try{const s=await this.fetchArrayBufferWithLimit(r.url,i),a=await this.audioContext.decodeAudioData(s);if(a.duration>MAX_DECODE_DURATION_SECONDS)throw new Error(GAPLESS_TOO_LARGE_ERROR);if(i.signal.aborted)return;this.nextBuffer=a,this.nextFetchController=null,this.currentPreloadTrackId=null,this.notifyPreloadState({trackId:r.id,status:"ready",isCloud:r.isCloud}),this.scheduleNextTrackPlayback()}catch(s){if(s?.name==="AbortError"){this.notifyPreloadState({trackId:r.id,status:"idle",message:"Preload aborted",isCloud:r.isCloud});return}this.nextFetchController=null,this.currentPreloadTrackId=null,this.notifyPreloadState({trackId:r.id,status:"error",message:s instanceof Error?s.message:String(s),isCloud:r.isCloud})}}play(){if(!this.currentBuffer){console.warn("No track loaded");return}this.audioContext.state==="suspended"&&this.audioContext.resume(),this.currentSource!==null&&this.currentSource.stop(),this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=this.currentBuffer,this.currentSource.connect(this.gainNode);const r=this.currentSource;r.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}r===this.currentSource&&(this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))};const i=this.pausedAt;this.currentSource.start(0,i),this.playbackStartTime=this.audioContext.currentTime-i,this.isPlaying=!0,this.notifyStateChange({isPlaying:!0}),this.scheduleNextTrackPlayback()}performGaplessTransition(r){if(!this.nextBuffer||!this.nextTrack||!this.nextSource)return;this.currentBuffer=this.nextBuffer,this.currentTrack=this.nextTrack;const i=this.nextSource;if(i!==null){const s=i;i.onended=()=>{if(this.suppressOnEnded){this.suppressOnEnded=!1;return}s===this.currentSource&&(this.scheduledNextTrack||(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1}),this.onTrackEnd&&this.onTrackEnd()))}}this.currentSource=i,this.nextBuffer=null,this.nextTrack=null,this.nextSource=null,this.scheduledNextTrack=!1,this.pausedAt=0,this.playbackStartTime=r,this.onTrackChange&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer.duration,currentTime:0})}pause(){this.isPlaying&&(this.pausedAt=this.getCurrentTime(),this.isPlaying=!1,this.currentSource!==null&&(this.suppressOnEnded=!0,this.currentSource.stop(),this.currentSource=null),this.nextSource!==null&&(this.suppressOnEnded=!0,this.nextSource.stop()),this.scheduledNextTrack=!1,this.clearScheduledTransitions(),this.notifyStateChange({isPlaying:!1}))}usePreloadedTrack(r,i){return!this.nextTrack||!this.nextBuffer||this.nextTrack.id!==r?!1:(this.currentSource!==null&&(this.currentSource.stop(),this.currentSource=null),this.clearScheduledTransitions(),this.currentTrack=this.nextTrack,this.currentBuffer=this.nextBuffer,this.nextTrack=null,this.nextBuffer=null,this.nextSource=null,this.pausedAt=0,this.scheduledNextTrack=!1,this.onTrackChange!==null&&this.currentTrack!==null&&this.onTrackChange(this.currentTrack.id),this.notifyStateChange({duration:this.currentBuffer?.duration||0,currentTime:0}),i?this.play():(this.isPlaying=!1,this.notifyStateChange({isPlaying:!1,currentTime:0})),!0)}togglePlayPause(){this.isPlaying?this.pause():this.play()}seek(r){if(!this.currentBuffer)return;const i=this.isPlaying;this.isPlaying&&this.pause(),this.pausedAt=Math.max(0,Math.min(r,this.currentBuffer.duration)),this.notifyStateChange({currentTime:this.pausedAt}),i&&this.play()}setVolume(r){this.volume=Math.max(0,Math.min(1,r)),this.isMuted||this.gainNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime),this.notifyStateChange({volume:this.volume})}setMuted(r){this.isMuted=r;const i=r?0:this.volume;this.gainNode.gain.setValueAtTime(i,this.audioContext.currentTime),this.notifyStateChange({isMuted:r})}setEQ(r,i,s){this.bassFilter.gain.value=r,this.midFilter.gain.value=i,this.trebleFilter.gain.value=s}setAdvancedEQ(r,i,s,a){this.bassFilter.frequency.value=r,this.midFilter.frequency.value=i,this.midFilter.Q.value=s,this.trebleFilter.frequency.value=a}getCurrentTime(){if(this.currentBuffer===null)return 0;if(this.isPlaying){const r=this.audioContext.currentTime-this.playbackStartTime;return!Number.isFinite(r)||r<0?0:Math.min(r,this.currentBuffer.duration)}return Number.isFinite(this.pausedAt)?this.pausedAt:0}getDuration(){const r=this.currentBuffer?.duration;return!Number.isFinite(r)||r<=0?0:r}getState(){return{isPlaying:this.isPlaying,currentTime:this.getCurrentTime(),duration:this.getDuration(),volume:this.volume,isMuted:this.isMuted}}startTimeUpdates(){const r=()=>{this.isPlaying&&this.notifyStateChange({currentTime:this.getCurrentTime()}),this.rafId=requestAnimationFrame(r)};r()}notifyStateChange(r){this.onStateChange&&this.onStateChange(r)}notifyPreloadState(r){this.onPreloadStateChange&&this.onPreloadStateChange(r)}destroy(){this.rafId!==null&&cancelAnimationFrame(this.rafId),this.cancelNextPreload("destroy"),this.clearScheduledTransitions(),this.currentSource!==null&&(this.suppressOnEnded=!0,this.currentSource.stop()),this.nextSource!==null&&(this.suppressOnEnded=!0,this.nextSource.stop()),this.audioContext.close()}scheduleNextTrackPlayback(){if(!this.currentBuffer||!this.nextBuffer||!this.nextTrack||!this.currentSource||!this.isPlaying)return;this.clearScheduledTransitions();const r=this.currentBuffer.duration,i=2,s=this.audioContext.currentTime-this.playbackStartTime,a=r-s,c=Math.max(0,(a-i)*1e3);this.preloadTimeoutId=window.setTimeout(()=>{if(!this.isPlaying||this.scheduledNextTrack||!this.nextBuffer||!this.nextTrack)return;this.scheduledNextTrack=!0,this.nextSource=this.audioContext.createBufferSource(),this.nextSource.buffer=this.nextBuffer,this.nextSource.connect(this.gainNode);const l=this.playbackStartTime+r;this.nextSource.start(l);const u=(l-this.audioContext.currentTime)*1e3-50;this.swapTimeoutId=window.setTimeout(()=>{this.isPlaying&&this.performGaplessTransition(l)},Math.max(0,u))},c)}clearScheduledTransitions(){this.preloadTimeoutId!==null&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),this.swapTimeoutId!==null&&(clearTimeout(this.swapTimeoutId),this.swapTimeoutId=null),this.scheduledNextTrack=!1}cancelNextPreload(r){if(this.nextFetchController!==null)try{this.nextFetchController.abort()}catch{}this.currentPreloadTrackId!==null&&this.notifyPreloadState({trackId:this.currentPreloadTrackId,status:"idle",message:r,isCloud:this.nextTrack?.isCloud}),this.nextFetchController=null,this.currentPreloadTrackId=null}}var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,r=e*60,i=r*60,s=i*24,a=s*7,c=s*365.25;ms=function(p,f){f=f||{};var m=typeof p;if(m==="string"&&p.length>0)return l(p);if(m==="number"&&isFinite(p))return f.long?h(p):u(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function l(p){if(p=String(p),!(p.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(f){var m=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return m*c;case"weeks":case"week":case"w":return m*a;case"days":case"day":case"d":return m*s;case"hours":case"hour":case"hrs":case"hr":case"h":return m*i;case"minutes":case"minute":case"mins":case"min":case"m":return m*r;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function u(p){var f=Math.abs(p);return f>=s?Math.round(p/s)+"d":f>=i?Math.round(p/i)+"h":f>=r?Math.round(p/r)+"m":f>=e?Math.round(p/e)+"s":p+"ms"}function h(p){var f=Math.abs(p);return f>=s?d(p,f,s,"day"):f>=i?d(p,f,i,"hour"):f>=r?d(p,f,r,"minute"):f>=e?d(p,f,e,"second"):p+" ms"}function d(p,f,m,g){var E=f>=m*1.5;return Math.round(p/m)+" "+g+(E?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(r){s.debug=s,s.default=s,s.coerce=d,s.disable=u,s.enable=c,s.enabled=h,s.humanize=requireMs(),s.destroy=p,Object.keys(r).forEach(f=>{s[f]=r[f]}),s.names=[],s.skips=[],s.formatters={};function i(f){let m=0;for(let g=0;g<f.length;g++)m=(m<<5)-m+f.charCodeAt(g),m|=0;return s.colors[Math.abs(m)%s.colors.length]}s.selectColor=i;function s(f){let m,g=null,E,v;function b(...y){if(!b.enabled)return;const w=b,T=Number(new Date),k=T-(m||T);w.diff=k,w.prev=m,w.curr=T,m=T,y[0]=s.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(R,I)=>{if(R==="%%")return"%";_++;const H=s.formatters[I];if(typeof H=="function"){const B=y[_];R=H.call(w,B),y.splice(_,1),_--}return R}),s.formatArgs.call(w,y),(w.log||s.log).apply(w,y)}return b.namespace=f,b.useColors=s.useColors(),b.color=s.selectColor(f),b.extend=a,b.destroy=s.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(E!==s.namespaces&&(E=s.namespaces,v=s.enabled(f)),v),set:y=>{g=y}}),typeof s.init=="function"&&s.init(b),b}function a(f,m){const g=s(this.namespace+(typeof m>"u"?":":m)+f);return g.log=this.log,g}function c(f){s.save(f),s.namespaces=f,s.names=[],s.skips=[];const m=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of m)g[0]==="-"?s.skips.push(g.slice(1)):s.names.push(g)}function l(f,m){let g=0,E=0,v=-1,b=0;for(;g<f.length;)if(E<m.length&&(m[E]===f[g]||m[E]==="*"))m[E]==="*"?(v=E,b=g,E++):(g++,E++);else if(v!==-1)E=v+1,b++,g=b;else return!1;for(;E<m.length&&m[E]==="*";)E++;return E===m.length}function u(){const f=[...s.names,...s.skips.map(m=>"-"+m)].join(",");return s.enable(""),f}function h(f){for(const m of s.skips)if(l(f,m))return!1;for(const m of s.names)if(l(f,m))return!0;return!1}function d(f){return f instanceof Error?f.stack||f.message:f}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return common=e,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(e,r){var i={};r.formatArgs=a,r.save=c,r.load=l,r.useColors=s,r.storage=u(),r.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;d.splice(1,0,p,"color: inherit");let f=0,m=0;d[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(f++,g==="%c"&&(m=f))}),d.splice(m,0,p)}r.log=console.debug||console.log||(()=>{});function c(d){try{d?r.storage.setItem("debug",d):r.storage.removeItem("debug")}catch{}}function l(){let d;try{d=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=i.DEBUG),d}function u(){try{return localStorage}catch{}}e.exports=requireCommon()(r);const{formatters:h}=e.exports;h.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class r extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=r})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let e=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((i,s)=>{this.reject=s,this.resolve=i})}};return Deferred.Deferred=e,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const r=requireEndOfFileStream(),i=requireDeferred();var s=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});const a=1*1024*1024;class c{constructor(u){if(this.s=u,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!u.read||!u.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new r.EndOfStreamError)),this.s.once("error",h=>this.reject(h)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(u,h,d){const p=await this.read(u,h,d);return this.peekQueue.push(u.subarray(h,h+p)),p}async read(u,h,d){if(d===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new r.EndOfStreamError;let p=d,f=0;for(;this.peekQueue.length>0&&p>0;){const m=this.peekQueue.pop();if(!m)throw new Error("peekData should be defined");const g=Math.min(m.length,p);u.set(m.subarray(0,g),h+f),f+=g,p-=g,g<m.length&&this.peekQueue.push(m.subarray(g))}for(;p>0&&!this.endOfStream;){const m=Math.min(p,a),g=await this.readFromStream(u,h+f,m);if(f+=g,g<m)break;p-=g}return f}async readFromStream(u,h,d){const p=this.s.read(d);if(p)return u.set(p,h),p.length;{const f={buffer:u,offset:h,length:d,deferred:new i.Deferred};return this.deferred=f.deferred,this.s.once("readable",()=>{this.readDeferred(f)}),f.deferred.promise}}readDeferred(u){const h=this.s.read(u.length);h?(u.buffer.set(h,u.offset),u.deferred.resolve(h.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(u)})}reject(u){this.endOfStream=!0,this.deferred&&(this.deferred.reject(u),this.deferred=null)}}e.StreamReader=c})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var r=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});var i=requireStreamReader();Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return i.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const e=requireLib$3();let r=class{constructor(s){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=s||{}}async readToken(s,a=this.position){const c=Buffer.alloc(s.len);if(await this.readBuffer(c,{position:a})<s.len)throw new e.EndOfStreamError;return s.get(c,0)}async peekToken(s,a=this.position){const c=Buffer.alloc(s.len);if(await this.peekBuffer(c,{position:a})<s.len)throw new e.EndOfStreamError;return s.get(c,0)}async readNumber(s){if(await this.readBuffer(this.numBuffer,{length:s.len})<s.len)throw new e.EndOfStreamError;return s.get(this.numBuffer,0)}async peekNumber(s){if(await this.peekBuffer(this.numBuffer,{length:s.len})<s.len)throw new e.EndOfStreamError;return s.get(this.numBuffer,0)}async ignore(s){if(this.fileInfo.size!==void 0){const a=this.fileInfo.size-this.position;if(s>a)return this.position+=a,a}return this.position+=s,s}async close(){}normalizeOptions(s,a){if(a&&a.position!==void 0&&a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return a?{mayBeLess:a.mayBeLess===!0,offset:a.offset?a.offset:0,length:a.length?a.length:s.length-(a.offset?a.offset:0),position:a.position?a.position:this.position}:{mayBeLess:!1,offset:0,length:s.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=r,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const e=requireAbstractTokenizer(),r=requireLib$3(),i=256e3;let s=class extends e.AbstractTokenizer{constructor(c,l){super(l),this.streamReader=new r.StreamReader(c)}async getFileInfo(){return this.fileInfo}async readBuffer(c,l){const u=this.normalizeOptions(c,l),h=u.position-this.position;if(h>0)return await this.ignore(h),this.readBuffer(c,l);if(h<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(u.length===0)return 0;const d=await this.streamReader.read(c,u.offset,u.length);if(this.position+=d,(!l||!l.mayBeLess)&&d<u.length)throw new r.EndOfStreamError;return d}async peekBuffer(c,l){const u=this.normalizeOptions(c,l);let h=0;if(u.position){const d=u.position-this.position;if(d>0){const p=new Uint8Array(u.length+d);return h=await this.peekBuffer(p,{mayBeLess:u.mayBeLess}),c.set(p.subarray(d),u.offset),h-d}else if(d<0)throw new Error("Cannot peek from a negative offset in a stream")}if(u.length>0){try{h=await this.streamReader.peek(c,u.offset,u.length)}catch(d){if(l&&l.mayBeLess&&d instanceof r.EndOfStreamError)return 0;throw d}if(!u.mayBeLess&&h<u.length)throw new r.EndOfStreamError}return h}async ignore(c){const l=Math.min(i,c),u=new Uint8Array(l);let h=0;for(;h<c;){const d=c-h,p=await this.readBuffer(u,{length:Math.min(l,d)});if(p<0)return p;h+=p}return h}};return ReadStreamTokenizer.ReadStreamTokenizer=s,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const e=requireLib$3(),r=requireAbstractTokenizer();let i=class extends r.AbstractTokenizer{constructor(a,c){super(c),this.uint8Array=a,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:a.length}async readBuffer(a,c){if(c&&c.position){if(c.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=c.position}const l=await this.peekBuffer(a,c);return this.position+=l,l}async peekBuffer(a,c){const l=this.normalizeOptions(a,c),u=Math.min(this.uint8Array.length-l.position,l.length);if(!l.mayBeLess&&u<l.length)throw new e.EndOfStreamError;return a.set(this.uint8Array.subarray(l.position,l.position+u),l.offset),u}async close(){}};return BufferTokenizer.BufferTokenizer=i,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const r=requireReadStreamTokenizer(),i=requireBufferTokenizer();var s=requireLib$3();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return s.EndOfStreamError}});function a(l,u){return u=u||{},new r.ReadStreamTokenizer(l,u)}e.fromStream=a;function c(l,u){return new i.BufferTokenizer(l,u)}e.fromBuffer=c})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(e,r,i,s,a){var c,l,u=a*8-s-1,h=(1<<u)-1,d=h>>1,p=-7,f=i?a-1:0,m=i?-1:1,g=e[r+f];for(f+=m,c=g&(1<<-p)-1,g>>=-p,p+=u;p>0;c=c*256+e[r+f],f+=m,p-=8);for(l=c&(1<<-p)-1,c>>=-p,p+=s;p>0;l=l*256+e[r+f],f+=m,p-=8);if(c===0)c=1-d;else{if(c===h)return l?NaN:(g?-1:1)*(1/0);l=l+Math.pow(2,s),c=c-d}return(g?-1:1)*l*Math.pow(2,c-s)},ieee754.write=function(e,r,i,s,a,c){var l,u,h,d=c*8-a-1,p=(1<<d)-1,f=p>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=s?0:c-1,E=s?1:-1,v=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,l=p):(l=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+f>=1?r+=m/h:r+=m*Math.pow(2,1-f),r*h>=2&&(l++,h/=2),l+f>=p?(u=0,l=p):l+f>=1?(u=(r*h-1)*Math.pow(2,a),l=l+f):(u=r*Math.pow(2,f-1)*Math.pow(2,a),l=0));a>=8;e[i+g]=u&255,g+=E,u/=256,a-=8);for(l=l<<a|u,d+=a;d>0;e[i+g]=l&255,g+=E,l/=256,d-=8);e[i+g-E]|=v*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const r=requireIeee754();function i(h){return new DataView(h.buffer,h.byteOffset)}e.UINT8={len:1,get(h,d){return i(h).getUint8(d)},put(h,d,p){return i(h).setUint8(d,p),d+1}},e.UINT16_LE={len:2,get(h,d){return i(h).getUint16(d,!0)},put(h,d,p){return i(h).setUint16(d,p,!0),d+2}},e.UINT16_BE={len:2,get(h,d){return i(h).getUint16(d)},put(h,d,p){return i(h).setUint16(d,p),d+2}},e.UINT24_LE={len:3,get(h,d){const p=i(h);return p.getUint8(d)+(p.getUint16(d+1,!0)<<8)},put(h,d,p){const f=i(h);return f.setUint8(d,p&255),f.setUint16(d+1,p>>8,!0),d+3}},e.UINT24_BE={len:3,get(h,d){const p=i(h);return(p.getUint16(d)<<8)+p.getUint8(d+2)},put(h,d,p){const f=i(h);return f.setUint16(d,p>>8),f.setUint8(d+2,p&255),d+3}},e.UINT32_LE={len:4,get(h,d){return i(h).getUint32(d,!0)},put(h,d,p){return i(h).setUint32(d,p,!0),d+4}},e.UINT32_BE={len:4,get(h,d){return i(h).getUint32(d)},put(h,d,p){return i(h).setUint32(d,p),d+4}},e.INT8={len:1,get(h,d){return i(h).getInt8(d)},put(h,d,p){return i(h).setInt8(d,p),d+1}},e.INT16_BE={len:2,get(h,d){return i(h).getInt16(d)},put(h,d,p){return i(h).setInt16(d,p),d+2}},e.INT16_LE={len:2,get(h,d){return i(h).getInt16(d,!0)},put(h,d,p){return i(h).setInt16(d,p,!0),d+2}},e.INT24_LE={len:3,get(h,d){const p=e.UINT24_LE.get(h,d);return p>8388607?p-16777216:p},put(h,d,p){const f=i(h);return f.setUint8(d,p&255),f.setUint16(d+1,p>>8,!0),d+3}},e.INT24_BE={len:3,get(h,d){const p=e.UINT24_BE.get(h,d);return p>8388607?p-16777216:p},put(h,d,p){const f=i(h);return f.setUint16(d,p>>8),f.setUint8(d+2,p&255),d+3}},e.INT32_BE={len:4,get(h,d){return i(h).getInt32(d)},put(h,d,p){return i(h).setInt32(d,p),d+4}},e.INT32_LE={len:4,get(h,d){return i(h).getInt32(d,!0)},put(h,d,p){return i(h).setInt32(d,p,!0),d+4}},e.UINT64_LE={len:8,get(h,d){return i(h).getBigUint64(d,!0)},put(h,d,p){return i(h).setBigUint64(d,p,!0),d+8}},e.INT64_LE={len:8,get(h,d){return i(h).getBigInt64(d,!0)},put(h,d,p){return i(h).setBigInt64(d,p,!0),d+8}},e.UINT64_BE={len:8,get(h,d){return i(h).getBigUint64(d)},put(h,d,p){return i(h).setBigUint64(d,p),d+8}},e.INT64_BE={len:8,get(h,d){return i(h).getBigInt64(d)},put(h,d,p){return i(h).setBigInt64(d,p),d+8}},e.Float16_BE={len:2,get(h,d){return r.read(h,d,!1,10,this.len)},put(h,d,p){return r.write(h,p,d,!1,10,this.len),d+this.len}},e.Float16_LE={len:2,get(h,d){return r.read(h,d,!0,10,this.len)},put(h,d,p){return r.write(h,p,d,!0,10,this.len),d+this.len}},e.Float32_BE={len:4,get(h,d){return i(h).getFloat32(d)},put(h,d,p){return i(h).setFloat32(d,p),d+4}},e.Float32_LE={len:4,get(h,d){return i(h).getFloat32(d,!0)},put(h,d,p){return i(h).setFloat32(d,p,!0),d+4}},e.Float64_BE={len:8,get(h,d){return i(h).getFloat64(d)},put(h,d,p){return i(h).setFloat64(d,p),d+8}},e.Float64_LE={len:8,get(h,d){return i(h).getFloat64(d,!0)},put(h,d,p){return i(h).setFloat64(d,p,!0),d+8}},e.Float80_BE={len:10,get(h,d){return r.read(h,d,!1,63,this.len)},put(h,d,p){return r.write(h,p,d,!1,63,this.len),d+this.len}},e.Float80_LE={len:10,get(h,d){return r.read(h,d,!0,63,this.len)},put(h,d,p){return r.write(h,p,d,!0,63,this.len),d+this.len}};class s{constructor(d){this.len=d}get(d,p){}}e.IgnoreType=s;class a{constructor(d){this.len=d}get(d,p){return d.subarray(p,p+this.len)}}e.Uint8ArrayType=a;class c{constructor(d){this.len=d}get(d,p){return Buffer.from(d.subarray(p,p+this.len))}}e.BufferType=c;class l{constructor(d,p){this.len=d,this.encoding=p}get(d,p){return Buffer.from(d).toString(this.encoding,p,p+this.len)}}e.StringType=l;class u{constructor(d){this.len=d}static decode(d,p,f){let m="";for(let g=p;g<f;++g)m+=u.codePointToString(u.singleByteDecoder(d[g]));return m}static inRange(d,p,f){return p<=d&&d<=f}static codePointToString(d){return d<=65535?String.fromCharCode(d):(d-=65536,String.fromCharCode((d>>10)+55296,(d&1023)+56320))}static singleByteDecoder(d){if(u.inRange(d,0,127))return d;const p=u.windows1252[d-128];if(p===null)throw Error("invaliding encoding");return p}get(d,p=0){return u.decode(d,p,p+this.len)}}e.AnsiStringType=u,u.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=e=>[...e].map(r=>r.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(e,r=0)=>{const i=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(i))return!1;let s=256;for(let a=r;a<r+148;a++)s+=e[a];for(let a=r+156;a<r+512;a++)s+=e[a];return i===s},util$1.uint32SyncSafeToken={get:(e,r)=>e[r+3]&127|e[r+2]<<7|e[r+1]<<14|e[r]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(e){const r=await strtok3.fromStream(e);try{return await fromTokenizer(r)}finally{await r.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const r=e instanceof Buffer?e:Buffer.from(e);if(!(r&&r.length>1))return;const i=strtok3.fromBuffer(r);return fromTokenizer(i)}function _check(e,r,i){i={offset:0,...i};for(const[s,a]of r.entries())if(i.mask){if(a!==(i.mask[s]&e[s+i.offset]))return!1}else if(a!==e[s+i.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(r){if(!(r instanceof strtok3.EndOfStreamError))throw r}}async function _fromTokenizer(e){let r=Buffer.alloc(minimumBytes);const i=12,s=(c,l)=>_check(r,c,l),a=(c,l)=>s(stringToBytes(c),l);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(r,{length:i,mayBeLess:!0}),s([66,77]))return{ext:"bmp",mime:"image/bmp"};if(s([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(s([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(s([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(s([37,33]))return await e.peekBuffer(r,{length:24,mayBeLess:!0}),a("PS-Adobe-",{offset:2})&&a(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(s([31,160])||s([31,157]))return{ext:"Z",mime:"application/x-compress"};if(s([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(s([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(s([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(s([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(a("ID3")){await e.ignore(6);const c=await e.readToken(uint32SyncSafeToken);return e.position+c>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(c),fromTokenizer(e))}if(a("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((r[0]===67||r[0]===70)&&s([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(s([71,73,70]))return{ext:"gif",mime:"image/gif"};if(a("FLIF"))return{ext:"flif",mime:"image/flif"};if(a("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(a("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(a("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(a("FORM"))return{ext:"aif",mime:"audio/aiff"};if(a("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(s([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(r,{length:30});const c={compressedSize:r.readUInt32LE(18),uncompressedSize:r.readUInt32LE(22),filenameLength:r.readUInt16LE(26),extraFieldLength:r.readUInt16LE(28)};if(c.filename=await e.readToken(new Token.StringType(c.filenameLength,"utf-8")),await e.ignore(c.extraFieldLength),c.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(c.filename.endsWith(".rels")||c.filename.endsWith(".xml"))switch(c.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(c.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(c.filename.startsWith("3D/")&&c.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(c.filename==="mimetype"&&c.compressedSize===c.uncompressedSize)switch(await e.readToken(new Token.StringType(c.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(c.compressedSize===0){let l=-1;for(;l<0&&e.position<e.fileInfo.size;)await e.peekBuffer(r,{mayBeLess:!0}),l=r.indexOf("504B0304",0,"hex"),await e.ignore(l>=0?l:r.length)}else await e.ignore(c.compressedSize)}}catch(c){if(!(c instanceof strtok3.EndOfStreamError))throw c}return{ext:"zip",mime:"application/zip"}}if(a("OggS")){await e.ignore(28);const c=Buffer.alloc(8);return await e.readBuffer(c),_check(c,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(c,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(c,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(c,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(c,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(c,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(s([80,75])&&(r[2]===3||r[2]===5||r[2]===7)&&(r[3]===4||r[3]===6||r[3]===8))return{ext:"zip",mime:"application/zip"};if(a("ftyp",{offset:4})&&(r[8]&96)!==0){const c=r.toString("binary",8,12).replace("\0"," ").trim();switch(c){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return c.startsWith("3g")?c.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(a("MThd"))return{ext:"mid",mime:"audio/midi"};if(a("wOFF")&&(s([0,1,0,0],{offset:4})||a("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(a("wOF2")&&(s([0,1,0,0],{offset:4})||a("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(s([212,195,178,161])||s([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(a("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(a("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(a("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(s([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(a("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(a("%PDF")){await e.ignore(1350);const c=10*1024*1024,l=Buffer.alloc(Math.min(c,e.fileInfo.size));return await e.readBuffer(l,{mayBeLess:!0}),l.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(s([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(s([73,73,42,0]))return a("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:s([28,0,254,0],{offset:8})||s([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:s([8,0,0,0],{offset:4})&&(s([45,0,254,0],{offset:8})||s([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(r=Buffer.alloc(24),await e.peekBuffer(r),(s([16,251,134,1],{offset:4})||s([8,0,0,0],{offset:4}))&&s([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(s([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(a("MAC "))return{ext:"ape",mime:"audio/ape"};if(s([26,69,223,163])){async function c(){const p=await e.peekNumber(Token.UINT8);let f=128,m=0;for(;(p&f)===0&&f!==0;)++m,f>>=1;const g=Buffer.alloc(m+1);return await e.readBuffer(g),g}async function l(){const p=await c(),f=await c();f[0]^=128>>f.length-1;const m=Math.min(6,f.length);return{id:p.readUIntBE(0,p.length),len:f.readUIntBE(f.length-m,m)}}async function u(p,f){for(;f>0;){const m=await l();if(m.id===17026)return e.readToken(new Token.StringType(m.len,"utf-8"));await e.ignore(m.len),--f}}const h=await l();switch(await u(1,h.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(s([82,73,70,70])){if(s([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(s([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(s([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(a("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(s([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(a("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(a("MSCF")||a("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(s([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(s([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(s([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(s([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(a("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(a("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(s([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(a("IMPM"))return{ext:"it",mime:"audio/x-it"};if(a("-lh0-",{offset:2})||a("-lh1-",{offset:2})||a("-lh2-",{offset:2})||a("-lh3-",{offset:2})||a("-lh4-",{offset:2})||a("-lh5-",{offset:2})||a("-lh6-",{offset:2})||a("-lh7-",{offset:2})||a("-lzs-",{offset:2})||a("-lz4-",{offset:2})||a("-lz5-",{offset:2})||a("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(s([0,0,1,186])){if(s([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(s([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(a("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(s([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(a("<?xml "))return{ext:"xml",mime:"application/xml"};if(s([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(s([82,97,114,33,26,7])&&(r[6]===0||r[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(a("solid "))return{ext:"stl",mime:"model/stl"};if(a("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(a("!<arch>"))return await e.ignore(8),await e.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(s([137,80,78,71,13,10,26,10])){await e.ignore(8);async function c(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}do{const l=await c();if(l.length<0)return;switch(l.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(l.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(s([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(s([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(s([102,114,101,101],{offset:4})||s([109,100,97,116],{offset:4})||s([109,111,111,118],{offset:4})||s([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(s([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(a("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(s([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(s([48,38,178,117,142,102,207,17,166,217])){async function c(){const l=Buffer.alloc(16);return await e.readBuffer(l),{id:l,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const l=await c();let u=l.size-24;if(_check(l.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const h=Buffer.alloc(16);if(u-=await e.readBuffer(h),_check(h,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(h,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(u)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(s([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((s([126,16,4])||s([126,24,4]))&&s([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(s([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(s([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(s([255,10])||s([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(s([0,0,1,186])||s([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(s([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(s([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(s([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(s([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(r,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),a("BEGIN:")){if(a("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(a("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(a("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(a("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(a("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(s([4,0,0,0])&&r.length>=16){const c=r.readUInt32LE(12);if(c>12&&r.length>=c+16)try{const l=r.slice(16,c+16).toString();if(JSON.parse(l).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(s([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(a("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(s([71],{offset:4})&&(s([71],{offset:192})||s([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(s([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(s([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(s([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(s([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(s([76,80],{offset:34})&&(s([0,0,1],{offset:8})||s([1,0,2],{offset:8})||s([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(s([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(r,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(r))return{ext:"tar",mime:"application/x-tar"};if(s([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(a("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(r.length>=2&&s([255,224],{offset:0,mask:[255,224]})){if(s([16],{offset:1,mask:[22]}))return s([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(s([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(s([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(s([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let r;stream.pipeline?r=stream.pipeline(readableStream,e,()=>{}):r=readableStream.pipe(e);const i=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const s=await fromBuffer(i);e.fileType=s}catch(s){reject(s)}resolve(r)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,s=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=l,contentType.parse=u;function l(f){if(!f||typeof f!="object")throw new TypeError("argument obj is required");var m=f.parameters,g=f.type;if(!g||!c.test(g))throw new TypeError("invalid type");var E=g;if(m&&typeof m=="object")for(var v,b=Object.keys(m).sort(),y=0;y<b.length;y++){if(v=b[y],!i.test(v))throw new TypeError("invalid parameter name");E+="; "+v+"="+d(m[v])}return E}function u(f){if(!f)throw new TypeError("argument string is required");var m=typeof f=="object"?h(f):f;if(typeof m!="string")throw new TypeError("argument string is required to be a string");var g=m.indexOf(";"),E=g!==-1?m.slice(0,g).trim():m.trim();if(!c.test(E))throw new TypeError("invalid media type");var v=new p(E.toLowerCase());if(g!==-1){var b,y,w;for(e.lastIndex=g;y=e.exec(m);){if(y.index!==g)throw new TypeError("invalid parameter format");g+=y[0].length,b=y[1].toLowerCase(),w=y[2],w.charCodeAt(0)===34&&(w=w.slice(1,-1),w.indexOf("\\")!==-1&&(w=w.replace(s,"$1"))),v.parameters[b]=w}if(g!==m.length)throw new TypeError("invalid parameter format")}return v}function h(f){var m;if(typeof f.getHeader=="function"?m=f.getHeader("content-type"):typeof f.headers=="object"&&(m=f.headers&&f.headers["content-type"]),typeof m!="string")throw new TypeError("content-type header is missing from object");return m}function d(f){var m=String(f);if(i.test(m))return m;if(m.length>0&&!r.test(m))throw new TypeError("invalid parameter value");return'"'+m.replace(a,"\\$1")+'"'}function p(f){this.parameters=Object.create(null),this.type=f}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,i=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=s,mediaTyper.parse=c,mediaTyper.test=a;function s(u){if(!u||typeof u!="object")throw new TypeError("argument obj is required");var h=u.subtype,d=u.suffix,p=u.type;if(!p||!r.test(p))throw new TypeError("invalid type");if(!h||!e.test(h))throw new TypeError("invalid subtype");var f=p+"/"+h;if(d){if(!r.test(d))throw new TypeError("invalid suffix");f+="+"+d}return f}function a(u){if(!u)throw new TypeError("argument string is required");if(typeof u!="string")throw new TypeError("argument string is required to be a string");return i.test(u.toLowerCase())}function c(u){if(!u)throw new TypeError("argument string is required");if(typeof u!="string")throw new TypeError("argument string is required to be a string");var h=i.exec(u.toLowerCase());if(!h)throw new TypeError("invalid media type");var d=h[1],p=h[2],f,m=p.lastIndexOf("+");return m!==-1&&(f=p.substr(m+1),p=p.substr(0,m)),new l(d,p,f)}function l(u,h,d){this.type=u,this.subtype=h,this.suffix=d}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=e.TargetType=e.DataType=void 0,(function(r){r[r.string=0]="string",r[r.uint=1]="uint",r[r.uid=2]="uid",r[r.bool=3]="bool",r[r.binary=4]="binary",r[r.float=5]="float"})(e.DataType||(e.DataType={})),(function(r){r[r.shot=10]="shot",r[r.scene=20]="scene",r[r.track=30]="track",r[r.part=40]="part",r[r.album=50]="album",r[r.edition=60]="edition",r[r.collection=70]="collection"})(e.TargetType||(e.TargetType={})),(function(r){r[r.video=1]="video",r[r.audio=2]="audio",r[r.complex=3]="complex",r[r.logo=4]="logo",r[r.subtitle=17]="subtitle",r[r.button=18]="button",r[r.control=32]="control"})(e.TrackType||(e.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=void 0;var r=requireTypes();Object.defineProperty(e,"TrackType",{enumerable:!0,get:function(){return r.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUnique=e.isSingleton=e.commonTags=void 0,e.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function r(s){return e.commonTags.hasOwnProperty(s)&&!e.commonTags[s].multiple}e.isSingleton=r;function i(s){return!e.commonTags[s].multiple||e.commonTags[s].unique}e.isUnique=i})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class e{static toIntOrNull(i){const s=parseInt(i,10);return isNaN(s)?null:s}static normalizeTrack(i){const s=i.toString().split("/");return{no:parseInt(s[0],10)||null,of:parseInt(s[1],10)||null}}constructor(i,s){this.tagTypes=i,this.tagMap=s}mapGenericTag(i,s){i={id:i.id,value:i.value},this.postMap(i,s);const a=this.getCommonName(i.id);return a?{id:a,value:i.value}:null}getCommonName(i){return this.tagMap[i]}postMap(i,s){}}return e.maxRatingScore=1,GenericTagMapper.CommonTagMapper=e,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const e=requireGenericTagMapper(),r={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class i extends e.CommonTagMapper{constructor(){super(["ID3v1"],r)}}return ID3v1TagMap.ID3v1TagMapper=i,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const e=requireGenericTagMapper();let r=class extends e.CommonTagMapper{constructor(s,a){const c={};for(const l of Object.keys(a))c[l.toUpperCase()]=a[l];super(s,c)}getCommonName(s){return this.tagMap[s.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=r,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function e(m,g,E){return(m[g]&1<<E)!==0}Util.getBit=e;function r(m,g,E,v){let b=g;if(v==="utf16le"){for(;m[b]!==0||m[b+1]!==0;){if(b>=E)return E;b+=2}return b}else{for(;m[b]!==0;){if(b>=E)return E;b++}return b}}Util.findZero=r;function i(m){const g=m.indexOf("\0");return g===-1?m:m.substr(0,g)}Util.trimRightNull=i;function s(m){const g=m.length;if((g&1)!==0)throw new Error("Buffer length must be even");for(let E=0;E<g;E+=2){const v=m[E];m[E]=m[E+1],m[E+1]=v}return m}function a(m,g){if(m[0]===255&&m[1]===254)return a(m.subarray(2),g);if(g==="utf16le"&&m[0]===254&&m[1]===255){if((m.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return a(s(m),g)}return Buffer.from(m).toString(g)}Util.decodeString=a;function c(m){return m=m.replace(/^\x00+/g,""),m=m.replace(/\x00+$/g,""),m}Util.stripNulls=c;function l(m,g,E,v){const b=g+~~(E/8),y=E%8;let w=m[b];w&=255>>y;const T=8-y,k=v-T;return k<0?w>>=8-y-v:k>0&&(w<<=k,w|=l(m,g,E+T,k)),w}Util.getBitAllignedNumber=l;function u(m,g,E){return l(m,g,E,1)===1}Util.isBitSet=u;function h(m){const g=[];for(let E=0,v=m.length;E<v;E++){const b=Number(m.charCodeAt(E)).toString(16);g.push(b.length===1?"0"+b:b)}return g.join(" ")}Util.a2hex=h;function d(m){return 10*Math.log10(m)}Util.ratioToDb=d;function p(m){return Math.pow(10,m/10)}Util.dbToRatio=p;function f(m){const g=m.split(" ").map(E=>E.trim().toLowerCase());if(g.length>=1){const E=parseFloat(g[0]);return g.length===2&&g[1]==="db"?{dB:E,ratio:p(E)}:{dB:d(E),ratio:E}}}return Util.toRatio=f,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const e=requireGenericTagMapper(),r=requireCaseInsensitiveTagMap(),i=requireUtil$1(),s={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let a=class Fc extends r.CaseInsensitiveTagMap{static toRating(l){return{source:l.email,rating:l.rating>0?(l.rating-1)/254*e.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],s)}postMap(l,u){switch(l.id){case"UFID":l.value.owner_identifier==="http://musicbrainz.org"&&(l.id+=":"+l.value.owner_identifier,l.value=i.decodeString(l.value.identifier,"latin1"));break;case"PRIV":switch(l.value.owner_identifier){case"AverageLevel":case"PeakValue":l.id+=":"+l.value.owner_identifier,l.value=l.value.data.length===4?l.value.data.readUInt32LE(0):null,l.value===null&&u.addWarning("Failed to parse PRIV:PeakValue");break;default:u.addWarning(`Unknown PRIV owner-identifier: ${l.value.owner_identifier}`)}break;case"COMM":l.value=l.value?l.value.text:null;break;case"POPM":l.value=Fc.toRating(l.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=a,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const e=requireGenericTagMapper(),r={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let i=class Oc extends e.CommonTagMapper{static toRating(a){return{rating:parseFloat(a+1)/5}}constructor(){super(["asf"],r)}postMap(a){switch(a.id){case"WM/SharedUserRating":const c=a.id.split(":");a.value=Oc.toRating(a.value),a.id=c[0];break}}};return AsfTagMapper.AsfTagMapper=i,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ID3v22TagMapper=e.id3v22TagMap=void 0;const r=requireCaseInsensitiveTagMap();e.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class i extends r.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],e.id3v22TagMap)}}e.ID3v22TagMapper=i})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const e=requireCaseInsensitiveTagMap(),r={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["APEv2"],r)}};return APEv2TagMapper.APEv2TagMapper=i,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4TagMapper=e.tagType=void 0;const r=requireCaseInsensitiveTagMap(),i={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};e.tagType="iTunes";class s extends r.CaseInsensitiveTagMap{constructor(){super([e.tagType],i)}postMap(c,l){switch(c.id){case"rate":c.value={source:void 0,rating:parseFloat(c.value)/100};break}}}e.MP4TagMapper=s})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const e=requireGenericTagMapper(),r={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let i=class uo extends e.CommonTagMapper{static toRating(a,c,l){return{source:a&&a.toLowerCase(),rating:parseFloat(c)/l*e.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],r)}postMap(a){if(a.id==="RATING")a.value=uo.toRating(void 0,a.value,100);else if(a.id.indexOf("RATING:")===0){const c=a.id.split(":");a.value=uo.toRating(c[1],a.value,1),a.id=c[0]}}};return VorbisTagMapper.VorbisTagMapper=i,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RiffInfoTagMapper=e.riffInfoTagMap=void 0;const r=requireGenericTagMapper();e.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class i extends r.CommonTagMapper{constructor(){super(["exif"],e.riffInfoTagMap)}}e.RiffInfoTagMapper=i})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const e=requireCaseInsensitiveTagMap(),r={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["matroska"],r)}};return MatroskaTagMapper.MatroskaTagMapper=i,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const e=requireGenericTagMapper(),r={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class i extends e.CommonTagMapper{constructor(){super(["AIFF"],r)}}return AiffTagMap.AiffTagMapper=i,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const e=requireID3v1TagMap(),r=requireID3v24TagMapper(),i=requireAsfTagMapper(),s=requireID3v22TagMapper(),a=requireAPEv2TagMapper(),c=requireMP4TagMapper(),l=requireVorbisTagMapper(),u=requireRiffInfoTagMap(),h=requireMatroskaTagMapper(),d=requireAiffTagMap();let p=class{constructor(){this.tagMappers={},[new e.ID3v1TagMapper,new s.ID3v22TagMapper,new r.ID3v24TagMapper,new c.MP4TagMapper,new c.MP4TagMapper,new l.VorbisTagMapper,new a.APEv2TagMapper,new i.AsfTagMapper,new u.RiffInfoTagMapper,new h.MatroskaTagMapper,new d.AiffTagMapper].forEach(m=>{this.registerTagMapper(m)})}mapTag(m,g,E){if(this.tagMappers[m])return this.tagMappers[m].mapGenericTag(g,E);throw new Error("No generic tag mapper defined for tag-format: "+m)}registerTagMapper(m){for(const g of m.tagTypes)this.tagMappers[g]=m}};return CombinedTagMapper.CombinedTagMapper=p,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const e=requireType(),r=requireBrowser$3(),i=requireGenericTagTypes(),s=requireCombinedTagMapper(),a=requireGenericTagMapper(),c=requireUtil$1(),l=requireCore$1(),u=(0,r.default)("music-metadata:collector"),h=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let d=class{constructor(m){this.opts=m,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new s.CombinedTagMapper;let g=1;for(const E of h)this.originPriority[E]=g++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(m){u(`streamInfo: type=${e.TrackType[m.type]}, codec=${m.codecName}`),this.format.trackInfo.push(m)}setFormat(m,g){u(`format: ${m} = ${g}`),this.format[m]=g,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:m,value:g}})}addTag(m,g,E){u(`tag ${m}.${g} = ${E}`),this.native[m]||(this.format.tagTypes.push(m),this.native[m]=[]),this.native[m].push({id:g,value:E}),this.toCommon(m,g,E)}addWarning(m){this.quality.warnings.push({message:m})}postMap(m,g){switch(g.id){case"artist":if(this.commonOrigin.artist===this.originPriority[m])return this.postMap("artificial",{id:"artists",value:g.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:g.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(g.value)===-1)){const y=(this.common.artists||[]).concat([g.value]),T={id:"artist",value:p(y)};this.setGenericTag("artificial",T)}break;case"picture":this.postFixPicture(g.value).then(y=>{y!==null&&(g.value=y,this.setGenericTag(m,g))});return;case"totaltracks":this.common.track.of=a.CommonTagMapper.toIntOrNull(g.value);return;case"totaldiscs":this.common.disk.of=a.CommonTagMapper.toIntOrNull(g.value);return;case"movementTotal":this.common.movementIndex.of=a.CommonTagMapper.toIntOrNull(g.value);return;case"track":case"disk":case"movementIndex":const E=this.common[g.id].of;this.common[g.id]=a.CommonTagMapper.normalizeTrack(g.value),this.common[g.id].of=E??this.common[g.id].of;return;case"bpm":case"year":case"originalyear":g.value=parseInt(g.value,10);break;case"date":const v=parseInt(g.value.substr(0,4),10);isNaN(v)||(this.common.year=v);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":g.value=typeof g.value=="string"?parseInt(g.value,10):g.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":g.value=(0,c.toRatio)(g.value);break;case"replaygain_track_minmax":g.value=g.value.split(",").map(y=>parseInt(y,10));break;case"replaygain_undo":const b=g.value.split(",").map(y=>parseInt(y,10));g.value={leftChannel:b[0],rightChannel:b[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":g.value=g.value==="1"||g.value===1;break;case"isrc":if(this.common[g.id]&&this.common[g.id].indexOf(g.value)!==-1)return;break}g.value!==null&&this.setGenericTag(m,g)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(m){if(m.data&&m.data.length>0){if(!m.format){const g=await l.fromBuffer(m.data);if(g)m.format=g.mime;else return null}switch(m.format=m.format.toLocaleLowerCase(),m.format){case"image/jpg":m.format="image/jpeg"}return m}return this.addWarning("Empty picture tag found"),null}toCommon(m,g,E){const v={id:g,value:E},b=this.tagMapper.mapTag(m,v,this);b&&this.postMap(m,b)}setGenericTag(m,g){u(`common.${g.id} = ${g.value}`);const E=this.commonOrigin[g.id]||1e3,v=this.originPriority[m];if((0,i.isSingleton)(g.id))if(v<=E)this.common[g.id]=g.value,this.commonOrigin[g.id]=v;else return u(`Ignore native tag (singleton): ${m}.${g.id} = ${g.value}`);else if(v===E)!(0,i.isUnique)(g.id)||this.common[g.id].indexOf(g.value)===-1?this.common[g.id].push(g.value):u(`Ignore duplicate value: ${m}.${g.id} = ${g.value}`);else if(v<E)this.common[g.id]=[g.value],this.commonOrigin[g.id]=v;else return u(`Ignore native tag (list): ${m}.${g.id} = ${g.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:g.id,value:g.value}})}};MetadataCollector.MetadataCollector=d;function p(f){return f.length>2?f.slice(0,f.length-1).join(", ")+" & "+f[f.length-1]:f.join(" & ")}return MetadataCollector.joinArtists=p,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextEncodingToken=e.ExtendedHeader=e.ID3v2Header=e.UINT32SYNCSAFE=e.AttachedPictureType=void 0;const r=requireLib$2(),i=requireUtil$1();(function(s){s[s.Other=0]="Other",s[s["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",s[s["Other file icon"]=2]="Other file icon",s[s["Cover (front)"]=3]="Cover (front)",s[s["Cover (back)"]=4]="Cover (back)",s[s["Leaflet page"]=5]="Leaflet page",s[s["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",s[s["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",s[s["Artist/performer"]=8]="Artist/performer",s[s.Conductor=9]="Conductor",s[s["Band/Orchestra"]=10]="Band/Orchestra",s[s.Composer=11]="Composer",s[s["Lyricist/text writer"]=12]="Lyricist/text writer",s[s["Recording Location"]=13]="Recording Location",s[s["During recording"]=14]="During recording",s[s["During performance"]=15]="During performance",s[s["Movie/video screen capture"]=16]="Movie/video screen capture",s[s["A bright coloured fish"]=17]="A bright coloured fish",s[s.Illustration=18]="Illustration",s[s["Band/artist logotype"]=19]="Band/artist logotype",s[s["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(e.AttachedPictureType||(e.AttachedPictureType={})),e.UINT32SYNCSAFE={get:(s,a)=>s[a+3]&127|s[a+2]<<7|s[a+1]<<14|s[a]<<21,len:4},e.ID3v2Header={len:10,get:(s,a)=>({fileIdentifier:new r.StringType(3,"ascii").get(s,a),version:{major:r.INT8.get(s,a+3),revision:r.INT8.get(s,a+4)},flags:{unsynchronisation:i.getBit(s,a+5,7),isExtendedHeader:i.getBit(s,a+5,6),expIndicator:i.getBit(s,a+5,5),footer:i.getBit(s,a+5,4)},size:e.UINT32SYNCSAFE.get(s,a+6)})},e.ExtendedHeader={len:10,get:(s,a)=>({size:r.UINT32_BE.get(s,a),extendedFlags:r.UINT16_BE.get(s,a+4),sizeOfPadding:r.UINT32_BE.get(s,a+6),crcDataPresent:i.getBit(s,a+4,31)})},e.TextEncodingToken={len:1,get:(s,a)=>{switch(s[a]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let e=class{init(i,s,a){return this.metadata=i,this.tokenizer=s,this.options=a,this}};return BasicParser.BasicParser=e,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FourCcToken=void 0;const r=requireUtil$1(),i=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;e.FourCcToken={len:4,get:(s,a)=>{const c=s.toString("binary",a,a+e.FourCcToken.len);if(!c.match(i))throw new Error(`FourCC contains invalid characters: ${r.a2hex(c)} "${c}"`);return c},put:(s,a,c)=>{const l=Buffer.from(c,"binary");if(l.length!==4)throw new Error("Invalid length");return l.copy(s,a)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBitSet=e.parseTagFlags=e.TagField=e.TagItemHeader=e.TagFooter=e.Header=e.DescriptorParser=e.DataType=void 0;const r=requireLib$2(),i=requireFourCC();(function(l){l[l.text_utf8=0]="text_utf8",l[l.binary=1]="binary",l[l.external_info=2]="external_info",l[l.reserved=3]="reserved"})(e.DataType||(e.DataType={})),e.DescriptorParser={len:52,get:(l,u)=>({ID:i.FourCcToken.get(l,u),version:r.UINT32_LE.get(l,u+4)/1e3,descriptorBytes:r.UINT32_LE.get(l,u+8),headerBytes:r.UINT32_LE.get(l,u+12),seekTableBytes:r.UINT32_LE.get(l,u+16),headerDataBytes:r.UINT32_LE.get(l,u+20),apeFrameDataBytes:r.UINT32_LE.get(l,u+24),apeFrameDataBytesHigh:r.UINT32_LE.get(l,u+28),terminatingDataBytes:r.UINT32_LE.get(l,u+32),fileMD5:new r.Uint8ArrayType(16).get(l,u+36)})},e.Header={len:24,get:(l,u)=>({compressionLevel:r.UINT16_LE.get(l,u),formatFlags:r.UINT16_LE.get(l,u+2),blocksPerFrame:r.UINT32_LE.get(l,u+4),finalFrameBlocks:r.UINT32_LE.get(l,u+8),totalFrames:r.UINT32_LE.get(l,u+12),bitsPerSample:r.UINT16_LE.get(l,u+16),channel:r.UINT16_LE.get(l,u+18),sampleRate:r.UINT32_LE.get(l,u+20)})},e.TagFooter={len:32,get:(l,u)=>({ID:new r.StringType(8,"ascii").get(l,u),version:r.UINT32_LE.get(l,u+8),size:r.UINT32_LE.get(l,u+12),fields:r.UINT32_LE.get(l,u+16),flags:a(r.UINT32_LE.get(l,u+20))})},e.TagItemHeader={len:8,get:(l,u)=>({size:r.UINT32_LE.get(l,u),flags:a(r.UINT32_LE.get(l,u+4))})};const s=l=>new r.Uint8ArrayType(l.size-e.TagFooter.len);e.TagField=s;function a(l){return{containsHeader:c(l,31),containsFooter:c(l,30),isHeader:c(l,31),readOnly:c(l,0),dataType:(l&6)>>1}}e.parseTagFlags=a;function c(l,u){return(l&1<<u)!==0}e.isBitSet=c})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const e=requireBrowser$3(),r=requireCore$2(),i=requireLib$2(),s=requireUtil$1(),a=requireBasicParser(),c=requireAPEv2Token(),l=(0,e.default)("music-metadata:parser:APEv2"),u="APEv2",h="APETAGEX";let d=class Ei extends a.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(f,m,g){const E=new Ei;return E.init(f,m,g),E.tryParseApeHeader()}static calculateDuration(f){let m=f.totalFrames>1?f.blocksPerFrame*(f.totalFrames-1):0;return m+=f.finalFrameBlocks,m/f.sampleRate}static async findApeFooterOffset(f,m){const g=Buffer.alloc(c.TagFooter.len);await f.randomRead(g,0,c.TagFooter.len,m-c.TagFooter.len);const E=c.TagFooter.get(g,0);if(E.ID==="APETAGEX")return l(`APE footer header at offset=${m}`),{footer:E,offset:m-E.size}}static parseTagFooter(f,m,g){const E=c.TagFooter.get(m,m.length-c.TagFooter.len);if(E.ID!==h)throw new Error("Unexpected APEv2 Footer ID preamble value.");r.fromBuffer(m);const v=new Ei;return v.init(f,r.fromBuffer(m),g),v.parseTags(E)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<c.TagFooter.len){l("No APEv2 header found, end-of-file reached");return}const f=await this.tokenizer.peekToken(c.TagFooter);if(f.ID===h)return await this.tokenizer.ignore(c.TagFooter.len),this.parseTags(f);if(l(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const m=this.tokenizer.fileInfo.size-this.tokenizer.position,g=Buffer.alloc(m);return await this.tokenizer.readBuffer(g),Ei.parseTagFooter(this.metadata,g,this.options)}}async parse(){const f=await this.tokenizer.readToken(c.DescriptorParser);if(f.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=f;const m=f.descriptorBytes-c.DescriptorParser.len,g=await(m>0?this.parseDescriptorExpansion(m):this.parseHeader());return await this.tokenizer.ignore(g.forwardBytes),this.tryParseApeHeader()}async parseTags(f){const m=Buffer.alloc(256);let g=f.size-c.TagFooter.len;l(`Parse APE tags at offset=${this.tokenizer.position}, size=${g}`);for(let E=0;E<f.fields;E++){if(g<c.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${f.fields-E} items remaining, but no more tag data to read.`);break}const v=await this.tokenizer.readToken(c.TagItemHeader);g-=c.TagItemHeader.len+v.size,await this.tokenizer.peekBuffer(m,{length:Math.min(m.length,g)});let b=s.findZero(m,0,m.length);const y=await this.tokenizer.readToken(new i.StringType(b,"ascii"));switch(await this.tokenizer.ignore(1),g-=y.length+1,v.flags.dataType){case c.DataType.text_utf8:{const T=(await this.tokenizer.readToken(new i.StringType(v.size,"utf8"))).split(/\x00/g);for(const k of T)this.metadata.addTag(u,y,k);break}case c.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(v.size);else{const w=Buffer.alloc(v.size);await this.tokenizer.readBuffer(w),b=s.findZero(w,0,w.length);const T=w.toString("utf8",0,b),k=Buffer.from(w.slice(b+1));this.metadata.addTag(u,y,{description:T,data:k})}break;case c.DataType.external_info:l(`Ignore external info ${y}`),await this.tokenizer.ignore(v.size);break;case c.DataType.reserved:l(`Ignore external info ${y}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${y}"`),await this.tokenizer.ignore(v.size);break}}}async parseDescriptorExpansion(f){return await this.tokenizer.ignore(f),this.parseHeader()}async parseHeader(){const f=await this.tokenizer.readToken(c.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",f.bitsPerSample),this.metadata.setFormat("sampleRate",f.sampleRate),this.metadata.setFormat("numberOfChannels",f.channel),this.metadata.setFormat("duration",Ei.calculateDuration(f)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=d,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasID3v1Header=e.ID3v1Parser=e.Genres=void 0;const r=requireBrowser$3(),i=requireLib$2(),s=requireUtil$1(),a=requireBasicParser(),c=requireAPEv2Parser(),l=(0,r.default)("music-metadata:parser:ID3v1");e.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const u={len:128,get:(f,m)=>{const g=new h(3).get(f,m);return g==="TAG"?{header:g,title:new h(30).get(f,m+3),artist:new h(30).get(f,m+33),album:new h(30).get(f,m+63),year:new h(4).get(f,m+93),comment:new h(28).get(f,m+97),zeroByte:i.UINT8.get(f,m+127),track:i.UINT8.get(f,m+126),genre:i.UINT8.get(f,m+127)}:null}};class h extends i.StringType{constructor(m){super(m,"binary")}get(m,g){let E=super.get(m,g);return E=s.trimRightNull(E),E=E.trim(),E.length>0?E:void 0}}class d extends a.BasicParser{static getGenre(m){if(m<e.Genres.length)return e.Genres[m]}async parse(){if(!this.tokenizer.fileInfo.size){l("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const E=new c.APEv2Parser;E.init(this.metadata,this.tokenizer,this.options),await E.parseTags(this.options.apeHeader.footer)}const m=this.tokenizer.fileInfo.size-u.len;if(this.tokenizer.position>m){l("Already consumed the last 128 bytes");return}const g=await this.tokenizer.readToken(u,m);if(g){l("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-u.len);for(const v of["title","artist","album","comment","track","year"])g[v]&&g[v]!==""&&this.addTag(v,g[v]);const E=d.getGenre(g.genre);E&&this.addTag("genre",E)}else l("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-u.len)}addTag(m,g){this.metadata.addTag("ID3v1",m,g)}}e.ID3v1Parser=d;async function p(f){if(f.fileSize>=128){const m=Buffer.alloc(3);return await f.randomRead(m,0,m.length,f.fileSize-128),m.toString("binary")==="TAG"}return!1}e.hasID3v1Header=p})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const e=requireBrowser$3(),r=requireLib$2(),i=requireUtil$1(),s=requireID3v2Token(),a=requireID3v1Parser(),c=(0,e.default)("music-metadata:id3v2:frame-parser"),l="latin1";function u(p){const f=[];let m,g="";for(const E of p)if(typeof m=="string")if(E==="("&&m==="")g+="(",m=void 0;else if(E===")"){g!==""&&(f.push(g),g="");const v=h(m);v&&f.push(v),m=void 0}else m+=E;else E==="("?m="":g+=E;return g&&(f.length===0&&g.match(/^\d*$/)&&(g=a.Genres[g]),f.push(g)),f}FrameParser.parseGenre=u;function h(p){if(p==="RX")return"Remix";if(p==="CR")return"Cover";if(p.match(/^\d*$/))return a.Genres[p]}let d=class Br{constructor(f,m){this.major=f,this.warningCollector=m}readData(f,m,g){if(f.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${m}`);return}const{encoding:E,bom:v}=s.TextEncodingToken.get(f,0),b=f.length;let y=0,w=[];const T=Br.getNullTerminatorLength(E);let k;const _={};switch(c(`Parsing tag type=${m}, encoding=${E}, bom=${v}`),m!=="TXXX"&&m[0]==="T"?"T*":m){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let P;try{P=i.decodeString(f.slice(1),E).replace(/\x00+$/,"")}catch(H){this.warningCollector.addWarning(`id3v2.${this.major} type=${m} header has invalid string value: ${H.message}`)}switch(m){case"TMCL":case"TIPL":case"IPLS":w=this.splitValue(m,P),w=Br.functionList(w);break;case"TRK":case"TRCK":case"TPOS":w=P;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":w=this.splitValue(m,P);break;case"TCO":case"TCON":w=this.splitValue(m,P).map(H=>u(H)).reduce((H,B)=>H.concat(B),[]);break;case"PCS":case"PCST":w=this.major>=4?this.splitValue(m,P):[P],w=Array.isArray(w)&&w[0]===""?1:0;break;default:w=this.major>=4?this.splitValue(m,P):[P]}break;case"TXXX":w=Br.readIdentifierAndData(f,y+1,b,E),w={description:w.id,text:this.splitValue(m,i.decodeString(w.data,E).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(g){const H={};switch(y+=1,this.major){case 2:H.format=i.decodeString(f.slice(y,y+3),"latin1"),y+=3;break;case 3:case 4:k=i.findZero(f,y,b,l),H.format=i.decodeString(f.slice(y,k),l),y=k+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}H.format=Br.fixPictureMimeType(H.format),H.type=s.AttachedPictureType[f[y]],y+=1,k=i.findZero(f,y,b,E),H.description=i.decodeString(f.slice(y,k),E),y=k+T,H.data=Buffer.from(f.slice(y,b)),w=H}break;case"CNT":case"PCNT":w=r.UINT32_BE.get(f,0);break;case"SYLT":for(y+=7,w=[];y<b;){const H=f.slice(y,y=i.findZero(f,y,b,E));y+=5,w.push(i.decodeString(H,E))}break;case"ULT":case"USLT":case"COM":case"COMM":y+=1,_.language=i.decodeString(f.slice(y,y+3),l),y+=3,k=i.findZero(f,y,b,E),_.description=i.decodeString(f.slice(y,k),E),y=k+T,_.text=i.decodeString(f.slice(y,b),E).replace(/\x00+$/,""),w=[_];break;case"UFID":w=Br.readIdentifierAndData(f,y,b,l),w={owner_identifier:w.id,identifier:w.data};break;case"PRIV":w=Br.readIdentifierAndData(f,y,b,l),w={owner_identifier:w.id,data:w.data};break;case"POPM":k=i.findZero(f,y,b,l);const R=i.decodeString(f.slice(y,k),l);y=k+1;const I=b-y;w={email:R,rating:r.UINT8.get(f,y),counter:I>=5?r.UINT32_BE.get(f,y+1):void 0};break;case"GEOB":{k=i.findZero(f,y+1,b,E);const H=i.decodeString(f.slice(y+1,k),l);y=k+1,k=i.findZero(f,y,b-y,E);const B=i.decodeString(f.slice(y,k),l);y=k+1,k=i.findZero(f,y,b-y,E);const O=i.decodeString(f.slice(y,k),l);w={type:H,filename:B,description:O,data:f.slice(y+1,b)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":w=i.decodeString(f.slice(y,k),l);break;case"WXXX":{k=i.findZero(f,y+1,b,E);const H=i.decodeString(f.slice(y+1,k),E);y=k+(E==="utf16le"?2:1),w={description:H,url:i.decodeString(f.slice(y,b),l)};break}case"WFD":case"WFED":w=i.decodeString(f.slice(y+1,i.findZero(f,y+1,b,E)),E);break;case"MCDI":{w=f.slice(0,b);break}default:c("Warning: unsupported id3v2-tag-type: "+m);break}return w}static fixPictureMimeType(f){switch(f=f.toLocaleLowerCase(),f){case"jpg":return"image/jpeg";case"png":return"image/png"}return f}static functionList(f){const m={};for(let g=0;g+1<f.length;g+=2){const E=f[g+1].split(",");m[f[g]]=m.hasOwnProperty(f[g])?m[f[g]].concat(E):E}return m}splitValue(f,m){let g;return this.major<4?(g=m.split(/\x00/g),g.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${f} uses non standard null-separator.`):g=m.split(/\//g)):g=m.split(/\x00/g),Br.trimArray(g)}static trimArray(f){return f.map(m=>m.replace(/\x00+$/,"").trim())}static readIdentifierAndData(f,m,g,E){const v=i.findZero(f,m,g,E),b=i.decodeString(f.slice(m,v),E);return m=v+Br.getNullTerminatorLength(E),{id:b,data:f.slice(m,g)}}static getNullTerminatorLength(f){return f==="utf16le"?2:1}};return FrameParser.FrameParser=d,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const e=requireLib$2(),r=requireUtil$1(),i=requireFrameParser(),s=requireID3v2Token();let a=class an{static removeUnsyncBytes(l){let u=0,h=0;for(;u<l.length-1;)u!==h&&(l[h]=l[u]),u+=l[u]===255&&l[u+1]===0?2:1,h++;return u<l.length&&(l[h++]=l[u]),l.slice(0,h)}static getFrameHeaderLength(l){switch(l){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(l){return{status:{tag_alter_preservation:r.getBit(l,0,6),file_alter_preservation:r.getBit(l,0,5),read_only:r.getBit(l,0,4)},format:{grouping_identity:r.getBit(l,1,7),compression:r.getBit(l,1,3),encryption:r.getBit(l,1,2),unsynchronisation:r.getBit(l,1,1),data_length_indicator:r.getBit(l,1,0)}}}static readFrameData(l,u,h,d,p){const f=new i.FrameParser(h,p);switch(h){case 2:return f.readData(l,u.id,d);case 3:case 4:return u.flags.format.unsynchronisation&&(l=an.removeUnsyncBytes(l)),u.flags.format.data_length_indicator&&(l=l.slice(4,l.length)),f.readData(l,u.id,d);default:throw new Error("Unexpected majorVer: "+h)}}static makeDescriptionTagName(l,u){return l+(u?":"+u:"")}async parse(l,u,h){this.tokenizer=u,this.metadata=l,this.options=h;const d=await this.tokenizer.readToken(s.ID3v2Header);if(d.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=d,this.headerType="ID3v2."+d.version.major,d.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(d.size)}async parseExtendedHeader(){const l=await this.tokenizer.readToken(s.ExtendedHeader),u=l.size-s.ExtendedHeader.len;return u>0?this.parseExtendedHeaderData(u,l.size):this.parseId3Data(this.id3Header.size-l.size)}async parseExtendedHeaderData(l,u){return await this.tokenizer.ignore(l),this.parseId3Data(this.id3Header.size-u)}async parseId3Data(l){const u=await this.tokenizer.readToken(new e.Uint8ArrayType(l));for(const h of this.parseMetadata(u))if(h.id==="TXXX"){if(h.value)for(const d of h.value.text)this.addTag(an.makeDescriptionTagName(h.id,h.value.description),d)}else if(h.id==="COM")for(const d of h.value)this.addTag(an.makeDescriptionTagName(h.id,d.description),d.text);else if(h.id==="COMM")for(const d of h.value)this.addTag(an.makeDescriptionTagName(h.id,d.description),d);else if(Array.isArray(h.value))for(const d of h.value)this.addTag(h.id,d);else this.addTag(h.id,h.value)}addTag(l,u){this.metadata.addTag(this.headerType,l,u)}parseMetadata(l){let u=0;const h=[];for(;u!==l.length;){const d=an.getFrameHeaderLength(this.id3Header.version.major);if(u+d>l.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const p=l.slice(u,u+=d),f=this.readFrameHeader(p,this.id3Header.version.major),m=l.slice(u,u+=f.length),g=an.readFrameData(m,f,this.id3Header.version.major,!this.options.skipCovers,this.metadata);g&&h.push({id:f.id,value:g})}return h}readFrameHeader(l,u){let h;switch(u){case 2:h={id:Buffer.from(l.slice(0,3)).toString("ascii"),length:e.UINT24_BE.get(l,3)},h.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${h.id}`);break;case 3:case 4:h={id:Buffer.from(l.slice(0,4)).toString("ascii"),length:(u===4?s.UINT32SYNCSAFE:e.UINT32_BE).get(l,4),flags:an.readFrameFlags(l.slice(8,10))},h.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${h.id}`);break;default:throw new Error("Unexpected majorVer: "+u)}return h}};return ID3v2Parser.ID3v2Parser=a,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const e=requireLib$2(),r=requireFourCC();class i{constructor(a,c){this.isAifc=c;const l=c?22:18;if(a.chunkSize<l)throw new Error(`COMMON CHUNK size should always be at least ${l}`);this.len=a.chunkSize}get(a,c){const l=a.readUInt16BE(c+8)-16398,u=a.readUInt16BE(c+8+2),h={numChannels:a.readUInt16BE(c),numSampleFrames:a.readUInt32BE(c+2),sampleSize:a.readUInt16BE(c+6),sampleRate:l<0?u>>Math.abs(l):u<<l};if(this.isAifc){if(h.compressionType=r.FourCcToken.get(a,c+18),this.len>22){const d=a.readInt8(c+22);if(d>0){const p=(d+1)%2;if(23+d+p===this.len)h.compressionName=new e.StringType(d,"binary").get(a,c+23);else throw new Error("Illegal pstring length")}else h.compressionName=void 0}}else h.compressionName="PCM";return h}}return AiffToken.Common=i,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const e=requireLib$2(),r=requireFourCC();return iff.Header={len:8,get:(i,s)=>({chunkID:r.FourCcToken.get(i,s),chunkSize:Number(BigInt(e.UINT32_BE.get(i,s+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireCore$2(),s=requireID3v2Parser(),a=requireFourCC(),c=requireBasicParser(),l=requireAiffToken(),u=requireIff(),h=(0,r.default)("music-metadata:parser:aiff"),d={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class p extends c.BasicParser{async parse(){if((await this.tokenizer.readToken(u.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const g=await this.tokenizer.readToken(a.FourCcToken);switch(g){case"AIFF":this.metadata.setFormat("container",g),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+g)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=u.Header.len;){h("Reading AIFF chunk at offset="+this.tokenizer.position);const E=await this.tokenizer.readToken(u.Header),v=2*Math.round(E.chunkSize/2),b=await this.readData(E);await this.tokenizer.ignore(v-b)}}catch(E){if(E instanceof i.EndOfStreamError)h("End-of-stream");else throw E}}async readData(m){var g;switch(m.chunkID){case"COMM":const E=await this.tokenizer.readToken(new l.Common(m,this.isCompressed));return this.metadata.setFormat("bitsPerSample",E.sampleSize),this.metadata.setFormat("sampleRate",E.sampleRate),this.metadata.setFormat("numberOfChannels",E.numChannels),this.metadata.setFormat("numberOfSamples",E.numSampleFrames),this.metadata.setFormat("duration",E.numSampleFrames/E.sampleRate),this.metadata.setFormat("codec",(g=E.compressionName)!==null&&g!==void 0?g:d[E.compressionType]),m.chunkSize;case"ID3 ":const v=await this.tokenizer.readToken(new e.Uint8ArrayType(m.chunkSize)),b=i.fromBuffer(v);return await new s.ID3v2Parser().parse(this.metadata,b,this.options),m.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*m.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(m);default:return h(`Ignore chunk id=${m.chunkID}, size=${m.chunkSize}`),0}}async readTextChunk(m){return(await this.tokenizer.readToken(new e.StringType(m.chunkSize,"ascii"))).split("\0").map(E=>E.trim()).filter(E=>E&&E.length>0).forEach(E=>{this.metadata.addTag("AIFF",m.chunkID,E.trim())}),m.chunkSize}}return AiffParser.AIFFParser=p,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let e=class Lr{static fromBin(i,s=0){return new Lr(this.decode(i,s))}static decode(i,s=0){return(i.readUInt32LE(s).toString(16)+"-"+i.readUInt16LE(s+4).toString(16)+"-"+i.readUInt16LE(s+6).toString(16)+"-"+i.readUInt16BE(s+8).toString(16)+"-"+i.slice(s+10,s+16).toString("hex")).toUpperCase()}static decodeMediaType(i){switch(i.str){case Lr.AudioMedia.str:return"audio";case Lr.VideoMedia.str:return"video";case Lr.CommandMedia.str:return"command";case Lr.Degradable_JPEG_Media.str:return"degradable-jpeg";case Lr.FileTransferMedia.str:return"file-transfer";case Lr.BinaryMedia.str:return"binary"}}static encode(i){const s=Buffer.alloc(16);return s.writeUInt32LE(parseInt(i.slice(0,8),16),0),s.writeUInt16LE(parseInt(i.slice(9,13),16),4),s.writeUInt16LE(parseInt(i.slice(14,18),16),6),Buffer.from(i.slice(19,23),"hex").copy(s,8),Buffer.from(i.slice(24),"hex").copy(s,10),s}constructor(i){this.str=i}equals(i){return this.str===i.str}toBin(){return Lr.encode(this.str)}};return e.HeaderObject=new e("75B22630-668E-11CF-A6D9-00AA0062CE6C"),e.DataObject=new e("75B22636-668E-11CF-A6D9-00AA0062CE6C"),e.SimpleIndexObject=new e("33000890-E5B1-11CF-89F4-00A0C90349CB"),e.IndexObject=new e("D6E229D3-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexObject=new e("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),e.TimecodeIndexObject=new e("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),e.FilePropertiesObject=new e("8CABDCA1-A947-11CF-8EE4-00C00C205365"),e.StreamPropertiesObject=new e("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),e.HeaderExtensionObject=new e("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),e.CodecListObject=new e("86D15240-311D-11D0-A3A4-00A0C90348F6"),e.ScriptCommandObject=new e("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),e.MarkerObject=new e("F487CD01-A951-11CF-8EE6-00C00C205365"),e.BitrateMutualExclusionObject=new e("D6E229DC-35DA-11D1-9034-00A0C90349BE"),e.ErrorCorrectionObject=new e("75B22635-668E-11CF-A6D9-00AA0062CE6C"),e.ContentDescriptionObject=new e("75B22633-668E-11CF-A6D9-00AA0062CE6C"),e.ExtendedContentDescriptionObject=new e("D2D0A440-E307-11D2-97F0-00A0C95EA850"),e.ContentBrandingObject=new e("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),e.StreamBitratePropertiesObject=new e("7BF875CE-468D-11D1-8D82-006097C9A2B2"),e.ContentEncryptionObject=new e("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),e.ExtendedContentEncryptionObject=new e("298AE614-2622-4C17-B935-DAE07EE9289C"),e.DigitalSignatureObject=new e("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),e.PaddingObject=new e("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),e.ExtendedStreamPropertiesObject=new e("14E6A5CB-C672-4332-8399-A96952065B5A"),e.AdvancedMutualExclusionObject=new e("A08649CF-4775-4670-8A16-6E35357566CD"),e.GroupMutualExclusionObject=new e("D1465A40-5A79-4338-B71B-E36B8FD6C249"),e.StreamPrioritizationObject=new e("D4FED15B-88D3-454F-81F0-ED5C45999E24"),e.BandwidthSharingObject=new e("A69609E6-517B-11D2-B6AF-00C04FD908E9"),e.LanguageListObject=new e("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),e.MetadataObject=new e("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),e.MetadataLibraryObject=new e("44231C94-9498-49D1-A141-1D134E457054"),e.IndexParametersObject=new e("D6E229DF-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexParametersObject=new e("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),e.TimecodeIndexParametersObject=new e("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),e.CompatibilityObject=new e("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),e.AdvancedContentEncryptionObject=new e("43058533-6981-49E6-9B74-AD12CB86D58C"),e.AudioMedia=new e("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),e.VideoMedia=new e("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),e.CommandMedia=new e("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),e.JFIF_Media=new e("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),e.Degradable_JPEG_Media=new e("35907DE0-E415-11CF-A917-00805F5C442B"),e.FileTransferMedia=new e("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),e.BinaryMedia=new e("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),e.ASF_Index_Placeholder_Object=new e("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=e,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const e=requireLib$2(),r=requireUtil$1();let i=class fo{static getParserForAttr(a){return fo.attributeParsers[a]}static parseUnicodeAttr(a){return r.stripNulls(r.decodeString(a,"utf16le"))}static parseByteArrayAttr(a){return Buffer.from(a)}static parseBoolAttr(a,c=0){return fo.parseWordAttr(a,c)===1}static parseDWordAttr(a,c=0){return a.readUInt32LE(c)}static parseQWordAttr(a,c=0){return e.UINT64_LE.get(a,c)}static parseWordAttr(a,c=0){return a.readUInt16LE(c)}};return i.attributeParsers=[i.parseUnicodeAttr,i.parseByteArrayAttr,i.parseBoolAttr,i.parseDWordAttr,i.parseQWordAttr,i.parseWordAttr,i.parseByteArrayAttr],AsfUtil.AsfUtil=i,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WmPictureToken=e.MetadataLibraryObjectState=e.MetadataObjectState=e.ExtendedStreamPropertiesObjectState=e.ExtendedContentDescriptionObjectState=e.ContentDescriptionObjectState=e.readCodecEntries=e.HeaderExtensionObject=e.StreamPropertiesObject=e.FilePropertiesObject=e.IgnoreObjectState=e.State=e.HeaderObjectToken=e.TopLevelHeaderObjectToken=e.DataType=void 0;const r=requireUtil$1(),i=requireLib$2(),s=requireGUID(),a=requireAsfUtil(),c=requireID3v2Token();(function(P){P[P.UnicodeString=0]="UnicodeString",P[P.ByteArray=1]="ByteArray",P[P.Bool=2]="Bool",P[P.DWord=3]="DWord",P[P.QWord=4]="QWord",P[P.Word=5]="Word"})(e.DataType||(e.DataType={})),e.TopLevelHeaderObjectToken={len:30,get:(P,R)=>({objectId:s.default.fromBin(new i.BufferType(16).get(P,R)),objectSize:Number(i.UINT64_LE.get(P,R+16)),numberOfHeaderObjects:i.UINT32_LE.get(P,R+24)})},e.HeaderObjectToken={len:24,get:(P,R)=>({objectId:s.default.fromBin(new i.BufferType(16).get(P,R)),objectSize:Number(i.UINT64_LE.get(P,R+16))})};class l{constructor(R){this.len=Number(R.objectSize)-e.HeaderObjectToken.len}postProcessTag(R,I,H,B){if(I==="WM/Picture")R.push({id:I,value:_.fromBuffer(B)});else{const O=a.AsfUtil.getParserForAttr(H);if(!O)throw new Error("unexpected value headerType: "+H);R.push({id:I,value:O(B)})}}}e.State=l;class u extends l{constructor(R){super(R)}get(R,I){return null}}e.IgnoreObjectState=u;class h extends l{constructor(R){super(R)}get(R,I){return{fileId:s.default.fromBin(R,I),fileSize:i.UINT64_LE.get(R,I+16),creationDate:i.UINT64_LE.get(R,I+24),dataPacketsCount:i.UINT64_LE.get(R,I+32),playDuration:i.UINT64_LE.get(R,I+40),sendDuration:i.UINT64_LE.get(R,I+48),preroll:i.UINT64_LE.get(R,I+56),flags:{broadcast:r.getBit(R,I+64,24),seekable:r.getBit(R,I+64,25)},minimumDataPacketSize:i.UINT32_LE.get(R,I+68),maximumDataPacketSize:i.UINT32_LE.get(R,I+72),maximumBitrate:i.UINT32_LE.get(R,I+76)}}}h.guid=s.default.FilePropertiesObject,e.FilePropertiesObject=h;class d extends l{constructor(R){super(R)}get(R,I){return{streamType:s.default.decodeMediaType(s.default.fromBin(R,I)),errorCorrectionType:s.default.fromBin(R,I+8)}}}d.guid=s.default.StreamPropertiesObject,e.StreamPropertiesObject=d;class p{constructor(){this.len=22}get(R,I){return{reserved1:s.default.fromBin(R,I),reserved2:R.readUInt16LE(I+16),extensionDataSize:R.readUInt32LE(I+18)}}}p.guid=s.default.HeaderExtensionObject,e.HeaderExtensionObject=p;const f={len:20,get:(P,R)=>({entryCount:P.readUInt16LE(R+16)})};async function m(P){const R=await P.readNumber(i.UINT16_LE);return(await P.readToken(new i.StringType(R*2,"utf16le"))).replace("\0","")}async function g(P){const R=await P.readToken(f),I=[];for(let H=0;H<R.entryCount;++H)I.push(await v(P));return I}e.readCodecEntries=g;async function E(P){const R=await P.readNumber(i.UINT16_LE),I=Buffer.alloc(R);return await P.readBuffer(I),I}async function v(P){const R=await P.readNumber(i.UINT16_LE);return{type:{videoCodec:(R&1)===1,audioCodec:(R&2)===2},codecName:await m(P),description:await m(P),information:await E(P)}}class b extends l{constructor(R){super(R)}get(R,I){const H=[];let B=I+10;for(let O=0;O<b.contentDescTags.length;++O){const V=R.readUInt16LE(I+O*2);if(V>0){const q=b.contentDescTags[O],ue=B+V;H.push({id:q,value:a.AsfUtil.parseUnicodeAttr(R.slice(B,ue))}),B=ue}}return H}}b.guid=s.default.ContentDescriptionObject,b.contentDescTags=["Title","Author","Copyright","Description","Rating"],e.ContentDescriptionObjectState=b;class y extends l{constructor(R){super(R)}get(R,I){const H=[],B=R.readUInt16LE(I);let O=I+2;for(let V=0;V<B;V+=1){const q=R.readUInt16LE(O);O+=2;const ue=a.AsfUtil.parseUnicodeAttr(R.slice(O,O+q));O+=q;const K=R.readUInt16LE(O);O+=2;const ce=R.readUInt16LE(O);O+=2;const we=R.slice(O,O+ce);O+=ce,this.postProcessTag(H,ue,K,we)}return H}}y.guid=s.default.ExtendedContentDescriptionObject,e.ExtendedContentDescriptionObjectState=y;class w extends l{constructor(R){super(R)}get(R,I){return{startTime:i.UINT64_LE.get(R,I),endTime:i.UINT64_LE.get(R,I+8),dataBitrate:R.readInt32LE(I+12),bufferSize:R.readInt32LE(I+16),initialBufferFullness:R.readInt32LE(I+20),alternateDataBitrate:R.readInt32LE(I+24),alternateBufferSize:R.readInt32LE(I+28),alternateInitialBufferFullness:R.readInt32LE(I+32),maximumObjectSize:R.readInt32LE(I+36),flags:{reliableFlag:r.getBit(R,I+40,0),seekableFlag:r.getBit(R,I+40,1),resendLiveCleanpointsFlag:r.getBit(R,I+40,2)},streamNumber:R.readInt16LE(I+42),streamLanguageId:R.readInt16LE(I+44),averageTimePerFrame:R.readInt32LE(I+52),streamNameCount:R.readInt32LE(I+54),payloadExtensionSystems:R.readInt32LE(I+56),streamNames:[],streamPropertiesObject:null}}}w.guid=s.default.ExtendedStreamPropertiesObject,e.ExtendedStreamPropertiesObjectState=w;class T extends l{constructor(R){super(R)}get(R,I){const H=[],B=Buffer.from(R),O=B.readUInt16LE(I);let V=I+2;for(let q=0;q<O;q+=1){V+=4;const ue=B.readUInt16LE(V);V+=2;const K=B.readUInt16LE(V);V+=2;const ce=B.readUInt32LE(V);V+=4;const we=a.AsfUtil.parseUnicodeAttr(B.slice(V,V+ue));V+=ue;const W=B.slice(V,V+ce);V+=ce,this.postProcessTag(H,we,K,W)}return H}}T.guid=s.default.MetadataObject,e.MetadataObjectState=T;class k extends T{constructor(R){super(R)}}k.guid=s.default.MetadataLibraryObject,e.MetadataLibraryObjectState=k;class _{static fromBase64(R){return this.fromBuffer(Buffer.from(R,"base64"))}static fromBuffer(R){return new _(R.length).get(R,0)}constructor(R){this.len=R}get(R,I){const H=R.readUInt8(I++),B=R.readInt32LE(I);let O=5;for(;R.readUInt16BE(O)!==0;)O+=2;const V=R.slice(5,O).toString("utf16le");for(;R.readUInt16BE(O)!==0;)O+=2;const q=R.slice(5,O).toString("utf16le");return{type:c.AttachedPictureType[H],format:V,description:q,size:B,data:R.slice(O+4)}}}e.WmPictureToken=_})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const e=requireBrowser$3(),r=requireType(),i=requireGUID(),s=requireAsfObject(),a=requireBasicParser(),c=(0,e.default)("music-metadata:parser:ASF"),l="asf";let u=class extends a.BasicParser{async parse(){const d=await this.tokenizer.readToken(s.TopLevelHeaderObjectToken);if(!d.objectId.equals(i.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+d.objectId.str);try{await this.parseObjectHeader(d.numberOfHeaderObjects)}catch(p){c("Error while parsing ASF: %s",p)}}async parseObjectHeader(d){let p;do{const f=await this.tokenizer.readToken(s.HeaderObjectToken);switch(c("header GUID=%s",f.objectId.str),f.objectId.str){case s.FilePropertiesObject.guid.str:const m=await this.tokenizer.readToken(new s.FilePropertiesObject(f));this.metadata.setFormat("duration",Number(m.playDuration/BigInt(1e3))/1e4-Number(m.preroll)/1e3),this.metadata.setFormat("bitrate",m.maximumBitrate);break;case s.StreamPropertiesObject.guid.str:const g=await this.tokenizer.readToken(new s.StreamPropertiesObject(f));this.metadata.setFormat("container","ASF/"+g.streamType);break;case s.HeaderExtensionObject.guid.str:const E=await this.tokenizer.readToken(new s.HeaderExtensionObject);await this.parseExtensionObject(E.extensionDataSize);break;case s.ContentDescriptionObjectState.guid.str:p=await this.tokenizer.readToken(new s.ContentDescriptionObjectState(f)),this.addTags(p);break;case s.ExtendedContentDescriptionObjectState.guid.str:p=await this.tokenizer.readToken(new s.ExtendedContentDescriptionObjectState(f)),this.addTags(p);break;case i.default.CodecListObject.str:const v=await s.readCodecEntries(this.tokenizer);v.forEach(y=>{this.metadata.addStreamInfo({type:y.type.videoCodec?r.TrackType.video:r.TrackType.audio,codecName:y.codecName})});const b=v.filter(y=>y.type.audioCodec).map(y=>y.codecName).join("/");this.metadata.setFormat("codec",b);break;case i.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(f.objectSize-s.HeaderObjectToken.len);break;case i.default.PaddingObject.str:c("Padding: %s bytes",f.objectSize-s.HeaderObjectToken.len),await this.tokenizer.ignore(f.objectSize-s.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+f.objectId.str),c("Ignore ASF-Object-GUID: %s",f.objectId.str),await this.tokenizer.readToken(new s.IgnoreObjectState(f))}}while(--d)}addTags(d){d.forEach(p=>{this.metadata.addTag(l,p.id,p.value)})}async parseExtensionObject(d){do{const p=await this.tokenizer.readToken(s.HeaderObjectToken),f=p.objectSize-s.HeaderObjectToken.len;switch(p.objectId.str){case s.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new s.ExtendedStreamPropertiesObjectState(p));break;case s.MetadataObjectState.guid.str:const m=await this.tokenizer.readToken(new s.MetadataObjectState(p));this.addTags(m);break;case s.MetadataLibraryObjectState.guid.str:const g=await this.tokenizer.readToken(new s.MetadataLibraryObjectState(p));this.addTags(g);break;case i.default.PaddingObject.str:await this.tokenizer.ignore(f);break;case i.default.CompatibilityObject.str:this.tokenizer.ignore(f);break;case i.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(f);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+p.objectId.str),await this.tokenizer.readToken(new s.IgnoreObjectState(p));break}d-=p.objectSize}while(d>0)}};return AsfParser.AsfParser=u,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const e=requireLib$2(),r=requireID3v2Token();class i{static fromBase64(a){return this.fromBuffer(Buffer.from(a,"base64"))}static fromBuffer(a){return new i(a.length).get(a,0)}constructor(a){this.len=a}get(a,c){const l=r.AttachedPictureType[e.UINT32_BE.get(a,c)],u=e.UINT32_BE.get(a,c+=4),h=a.toString("utf-8",c+=4,c+u),d=e.UINT32_BE.get(a,c+=u),p=a.toString("utf-8",c+=4,c+d),f=e.UINT32_BE.get(a,c+=d),m=e.UINT32_BE.get(a,c+=4),g=e.UINT32_BE.get(a,c+=4),E=e.UINT32_BE.get(a,c+=4),v=e.UINT32_BE.get(a,c+=4),b=Buffer.from(a.slice(c+=4,c+v));return{type:l,format:h,description:p,width:f,height:m,colour_depth:g,indexed_color:E,data:b}}}return Vorbis.VorbisPictureToken=i,Vorbis.CommonHeader={len:7,get:(s,a)=>({packetType:s.readUInt8(a),vorbis:new e.StringType(6,"ascii").get(s,a+1)})},Vorbis.IdentificationHeader={len:23,get:(s,a)=>{const c=new DataView(s.buffer,s.byteOffset);return{version:c.getUint32(a+0,!0),channelMode:c.getUint8(a+4),sampleRate:c.getUint32(a+5,!0),bitrateMax:c.getUint32(a+9,!0),bitrateNominal:c.getUint32(a+13,!0),bitrateMin:c.getUint32(a+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const e=requireCore$2(),r=requireBrowser$3(),i=requireID3v2Token(),s=requireID3v2Parser(),a=requireID3v1Parser(),c=requireBasicParser(),l=(0,r.default)("music-metadata:parser:ID3");let u=class extends c.BasicParser{constructor(){super(...arguments),this.id3parser=new s.ID3v2Parser}static async startsWithID3v2Header(d){return(await d.peekToken(i.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(d){if(d instanceof e.EndOfStreamError)l("End-of-stream");else throw d}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),l("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new a.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(i.ID3v2Header)).fileIdentifier==="ID3")return l("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=u,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const e=requireLib$2();let r=class{constructor(s,a){this.data=s,this.offset=a}readInt32(){const s=e.UINT32_LE.get(this.data,this.offset);return this.offset+=4,s}readStringUtf8(){const s=this.readInt32(),a=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+s);return this.offset+=s,a}parseUserComment(){const s=this.offset,a=this.readStringUtf8(),c=a.indexOf("=");return{key:a.slice(0,c).toUpperCase(),value:a.slice(c+1),len:this.offset-s}}};return VorbisDecoder.VorbisDecoder=r,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireVorbisDecoder(),s=requireVorbis(),a=(0,r.default)("music-metadata:parser:ogg:vorbis1");let c=class{constructor(u,h){this.metadata=u,this.options=h,this.pageSegments=[]}parsePage(u,h){if(u.headerType.firstPage)this.parseFirstPage(u,h);else{if(u.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(h)}if(u.headerType.lastPage||!u.headerType.continued){if(this.pageSegments.length>0){const d=Buffer.concat(this.pageSegments);this.parseFullPage(d)}this.pageSegments=u.headerType.lastPage?[]:[h]}}u.headerType.lastPage&&this.calculateDuration(u)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(u,h){const p=new i.VorbisDecoder(u,h).parseUserComment();return this.addTag(p.key,p.value),p.len}addTag(u,h){if(u==="METADATA_BLOCK_PICTURE"&&typeof h=="string"){if(this.options.skipCovers){a("Ignore picture");return}h=s.VorbisPictureToken.fromBase64(h),a(`Push picture: id=${u}, format=${h.format}`)}else a(`Push tag: id=${u}, value=${h}`);this.metadata.addTag("vorbis",u,h)}calculateDuration(u){this.metadata.format.sampleRate&&u.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",u.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(u,h){this.metadata.setFormat("codec","Vorbis I"),a("Parse first page");const d=s.CommonHeader.get(h,0);if(d.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(d.packetType===1){const p=s.IdentificationHeader.get(h,s.CommonHeader.len);this.metadata.setFormat("sampleRate",p.sampleRate),this.metadata.setFormat("bitrate",p.bitrateNominal),this.metadata.setFormat("numberOfChannels",p.channelMode),a("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",p.sampleRate,p.bitrateNominal,p.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(u){const h=s.CommonHeader.get(u,0);switch(a("Parse full page: type=%s, byteLength=%s",h.packetType,u.byteLength),h.packetType){case 3:return this.parseUserCommentList(u,s.CommonHeader.len)}}parseUserCommentList(u,h){const d=e.UINT32_LE.get(u,h);h+=4,h+=d;let p=e.UINT32_LE.get(u,h);for(h+=4;p-- >0;)h+=this.parseUserComment(u,h)}};return VorbisParser.VorbisParser=c,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireUtil$1(),s=requireVorbis(),a=requireAbstractID3Parser(),c=requireFourCC(),l=requireVorbisParser(),u=requireVorbisDecoder(),h=(0,r.default)("music-metadata:parser:FLAC");var d;(function(m){m[m.STREAMINFO=0]="STREAMINFO",m[m.PADDING=1]="PADDING",m[m.APPLICATION=2]="APPLICATION",m[m.SEEKTABLE=3]="SEEKTABLE",m[m.VORBIS_COMMENT=4]="VORBIS_COMMENT",m[m.CUESHEET=5]="CUESHEET",m[m.PICTURE=6]="PICTURE"})(d||(d={}));let p=class extends a.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(g,E,v){return super.init(g,E,v),this.vorbisParser=new l.VorbisParser(g,v),this}async postId3v2Parse(){if((await this.tokenizer.readToken(c.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let E;do E=await this.tokenizer.readToken(f.BlockHeader),await this.parseDataBlock(E);while(!E.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const v=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*v/this.metadata.format.duration)}}parseDataBlock(g){switch(h(`blockHeader type=${g.type}, length=${g.length}`),g.type){case d.STREAMINFO:return this.parseBlockStreamInfo(g.length);case d.PADDING:this.padding+=g.length;break;case d.APPLICATION:break;case d.SEEKTABLE:break;case d.VORBIS_COMMENT:return this.parseComment(g.length);case d.CUESHEET:break;case d.PICTURE:return this.parsePicture(g.length).then();default:this.metadata.addWarning("Unknown block type: "+g.type)}return this.tokenizer.ignore(g.length).then()}async parseBlockStreamInfo(g){if(g!==f.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const E=await this.tokenizer.readToken(f.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",E.channels),this.metadata.setFormat("bitsPerSample",E.bitsPerSample),this.metadata.setFormat("sampleRate",E.sampleRate),E.totalSamples>0&&this.metadata.setFormat("duration",E.totalSamples/E.sampleRate)}async parseComment(g){const E=await this.tokenizer.readToken(new e.Uint8ArrayType(g)),v=new u.VorbisDecoder(E,0);v.readStringUtf8();const b=v.readInt32();for(let y=0;y<b;y++){const w=v.parseUserComment();this.vorbisParser.addTag(w.key,w.value)}}async parsePicture(g){if(this.options.skipCovers)return this.tokenizer.ignore(g);{const E=await this.tokenizer.readToken(new s.VorbisPictureToken(g));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",E)}}};FlacParser.FlacParser=p;class f{}return f.BlockHeader={len:4,get:(m,g)=>({lastBlock:i.getBit(m,g,7),type:i.getBitAllignedNumber(m,g,1,7),length:e.UINT24_BE.get(m,g+1)})},f.BlockStreamInfo={len:34,get:(m,g)=>({minimumBlockSize:e.UINT16_BE.get(m,g),maximumBlockSize:e.UINT16_BE.get(m,g+2)/1e3,minimumFrameSize:e.UINT24_BE.get(m,g+4),maximumFrameSize:e.UINT24_BE.get(m,g+7),sampleRate:e.UINT24_BE.get(m,g+10)>>4,channels:i.getBitAllignedNumber(m,g+12,4,3)+1,bitsPerSample:i.getBitAllignedNumber(m,g+12,7,5)+1,totalSamples:i.getBitAllignedNumber(m,g+13,4,36),fileMD5:new e.Uint8ArrayType(16).get(m,g+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ChapterText=e.StcoAtom=e.StszAtom=e.StscAtom=e.SampleToChunkToken=e.SttsAtom=e.TimeToSampleToken=e.SoundSampleDescriptionV0=e.SoundSampleDescriptionVersion=e.StsdAtom=e.TrackHeaderAtom=e.NameAtom=e.DataAtom=e.MvhdAtom=e.MdhdAtom=e.FixedLengthAtom=e.mhdr=e.tkhd=e.ftyp=e.ExtendedSize=e.Header=void 0;const r=requireLib$2(),i=requireBrowser$3(),s=requireFourCC(),a=(0,i.default)("music-metadata:parser:MP4:atom");e.Header={len:8,get:(P,R)=>{const I=r.UINT32_BE.get(P,R);if(I<0)throw new Error("Invalid atom header length");return{length:BigInt(I),name:new r.StringType(4,"binary").get(P,R+4)}},put:(P,R,I)=>(r.UINT32_BE.put(P,R,Number(I.length)),s.FourCcToken.put(P,R+4,I.name))},e.ExtendedSize=r.UINT64_BE,e.ftyp={len:4,get:(P,R)=>({type:new r.StringType(4,"ascii").get(P,R)})},e.tkhd={len:4,get:(P,R)=>({type:new r.StringType(4,"ascii").get(P,R)})},e.mhdr={len:8,get:(P,R)=>({version:r.UINT8.get(P,R),flags:r.UINT24_BE.get(P,R+1),nextItemID:r.UINT32_BE.get(P,R+4)})};class c{constructor(R,I,H){if(this.len=R,R<I)throw new Error(`Atom ${H} expected to be ${I}, but specifies ${R} bytes long.`);R>I&&a(`Warning: atom ${H} expected to be ${I}, but was actually ${R} bytes long.`)}}e.FixedLengthAtom=c;const l={len:4,get:(P,R)=>{const I=r.UINT32_BE.get(P,R)-2082844800;return new Date(I*1e3)}};class u extends c{constructor(R){super(R,24,"mdhd"),this.len=R}get(R,I){return{version:r.UINT8.get(R,I+0),flags:r.UINT24_BE.get(R,I+1),creationTime:l.get(R,I+4),modificationTime:l.get(R,I+8),timeScale:r.UINT32_BE.get(R,I+12),duration:r.UINT32_BE.get(R,I+16),language:r.UINT16_BE.get(R,I+20),quality:r.UINT16_BE.get(R,I+22)}}}e.MdhdAtom=u;class h extends c{constructor(R){super(R,100,"mvhd"),this.len=R}get(R,I){return{version:r.UINT8.get(R,I),flags:r.UINT24_BE.get(R,I+1),creationTime:l.get(R,I+4),modificationTime:l.get(R,I+8),timeScale:r.UINT32_BE.get(R,I+12),duration:r.UINT32_BE.get(R,I+16),preferredRate:r.UINT32_BE.get(R,I+20),preferredVolume:r.UINT16_BE.get(R,I+24),previewTime:r.UINT32_BE.get(R,I+72),previewDuration:r.UINT32_BE.get(R,I+76),posterTime:r.UINT32_BE.get(R,I+80),selectionTime:r.UINT32_BE.get(R,I+84),selectionDuration:r.UINT32_BE.get(R,I+88),currentTime:r.UINT32_BE.get(R,I+92),nextTrackID:r.UINT32_BE.get(R,I+96)}}}e.MvhdAtom=h;class d{constructor(R){this.len=R}get(R,I){return{type:{set:r.UINT8.get(R,I+0),type:r.UINT24_BE.get(R,I+1)},locale:r.UINT24_BE.get(R,I+4),value:Buffer.from(new r.Uint8ArrayType(this.len-8).get(R,I+8))}}}e.DataAtom=d;class p{constructor(R){this.len=R}get(R,I){return{version:r.UINT8.get(R,I),flags:r.UINT24_BE.get(R,I+1),name:new r.StringType(this.len-4,"utf-8").get(R,I+4)}}}e.NameAtom=p;class f{constructor(R){this.len=R}get(R,I){return{version:r.UINT8.get(R,I),flags:r.UINT24_BE.get(R,I+1),creationTime:l.get(R,I+4),modificationTime:l.get(R,I+8),trackId:r.UINT32_BE.get(R,I+12),duration:r.UINT32_BE.get(R,I+20),layer:r.UINT16_BE.get(R,I+24),alternateGroup:r.UINT16_BE.get(R,I+26),volume:r.UINT16_BE.get(R,I+28)}}}e.TrackHeaderAtom=f;const m={len:8,get:(P,R)=>({version:r.UINT8.get(P,R),flags:r.UINT24_BE.get(P,R+1),numberOfEntries:r.UINT32_BE.get(P,R+4)})};class g{constructor(R){this.len=R}get(R,I){return{dataFormat:s.FourCcToken.get(R,I),dataReferenceIndex:r.UINT16_BE.get(R,I+10),description:new r.Uint8ArrayType(this.len-12).get(R,I+12)}}}class E{constructor(R){this.len=R}get(R,I){const H=m.get(R,I);I+=m.len;const B=[];for(let O=0;O<H.numberOfEntries;++O){const V=r.UINT32_BE.get(R,I);I+=r.UINT32_BE.len,B.push(new g(V).get(R,I)),I+=V}return{header:H,table:B}}}e.StsdAtom=E,e.SoundSampleDescriptionVersion={len:8,get(P,R){return{version:r.INT16_BE.get(P,R),revision:r.INT16_BE.get(P,R+2),vendor:r.INT32_BE.get(P,R+4)}}},e.SoundSampleDescriptionV0={len:12,get(P,R){return{numAudioChannels:r.INT16_BE.get(P,R+0),sampleSize:r.INT16_BE.get(P,R+2),compressionId:r.INT16_BE.get(P,R+4),packetSize:r.INT16_BE.get(P,R+6),sampleRate:r.UINT16_BE.get(P,R+8)+r.UINT16_BE.get(P,R+10)/1e4}}};class v{constructor(R,I){this.len=R,this.token=I}get(R,I){const H=r.INT32_BE.get(R,I+4);return{version:r.INT8.get(R,I+0),flags:r.INT24_BE.get(R,I+1),numberOfEntries:H,entries:_(R,this.token,I+8,this.len-8,H)}}}e.TimeToSampleToken={len:8,get(P,R){return{count:r.INT32_BE.get(P,R+0),duration:r.INT32_BE.get(P,R+4)}}};class b extends v{constructor(R){super(R,e.TimeToSampleToken),this.len=R}}e.SttsAtom=b,e.SampleToChunkToken={len:12,get(P,R){return{firstChunk:r.INT32_BE.get(P,R),samplesPerChunk:r.INT32_BE.get(P,R+4),sampleDescriptionId:r.INT32_BE.get(P,R+8)}}};class y extends v{constructor(R){super(R,e.SampleToChunkToken),this.len=R}}e.StscAtom=y;class w{constructor(R){this.len=R}get(R,I){const H=r.INT32_BE.get(R,I+8);return{version:r.INT8.get(R,I),flags:r.INT24_BE.get(R,I+1),sampleSize:r.INT32_BE.get(R,I+4),numberOfEntries:H,entries:_(R,r.INT32_BE,I+12,this.len-12,H)}}}e.StszAtom=w;class T extends v{constructor(R){super(R,r.INT32_BE),this.len=R}}e.StcoAtom=T;class k{constructor(R){this.len=R}get(R,I){const H=r.INT16_BE.get(R,I+0);return new r.StringType(H,"utf-8").get(R,I+2)}}e.ChapterText=k;function _(P,R,I,H,B){if(a(`remainingLen=${H}, numberOfEntries=${B} * token-len=${R.len}`),H===0)return[];if(H!==B*R.len)throw new Error("mismatch number-of-entries with remaining atom-length");const O=[];for(let V=0;V<B;++V)O.push(R.get(P,I)),I+=R.len;return O}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const e=requireBrowser$3(),r=requireAtomToken(),i=(0,e.default)("music-metadata:parser:MP4:Atom");let s=class po{static async readAtom(c,l,u,h){const d=c.position,p=await c.readToken(r.Header);p.length===BigInt(1)&&(p.length=await c.readToken(r.ExtendedSize));const m=new po(p,p.length===BigInt(1),u),g=m.getPayloadLength(h);return i(`parse atom name=${m.atomPath}, extended=${m.extended}, offset=${d}, len=${m.header.length}`),await m.readData(c,l,g),m}constructor(c,l,u){this.header=c,this.extended=l,this.parent=u,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(c){return(this.header.length===BigInt(0)?c:Number(this.header.length))-this.getHeaderLength()}async readAtoms(c,l,u){for(;u>0;){const h=await po.readAtom(c,l,this,u);this.children.push(h),u-=h.header.length===BigInt(0)?u:Number(h.header.length)}}async readData(c,l,u){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(c,l,this.getPayloadLength(u));case"meta":const d=(await c.peekToken(r.Header)).name==="hdlr"?0:4;return await c.ignore(d),this.readAtoms(c,l,this.getPayloadLength(u)-d);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return l(this,u)}}};return Atom.Atom=s,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const e=requireBrowser$3(),r=requireLib$2(),i=requireBasicParser(),s=requireID3v1Parser(),a=requireType(),c=requireAtom(),l=requireAtomToken(),u=(0,e.default)("music-metadata:parser:MP4"),h="iTunes",d={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function p(m,g,E){return E.indexOf(m)===g}let f=class mo extends i.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async g=>{const E=await this.tokenizer.readToken(new l.MvhdAtom(g));this.metadata.setFormat("creationTime",E.creationTime),this.metadata.setFormat("modificationTime",E.modificationTime)},mdhd:async g=>{const E=await this.tokenizer.readToken(new l.MdhdAtom(g)),v=this.getTrackDescription();v.creationTime=E.creationTime,v.modificationTime=E.modificationTime,v.timeScale=E.timeScale,v.duration=E.duration},chap:async g=>{const E=this.getTrackDescription(),v=[];for(;g>=r.UINT32_BE.len;)v.push(await this.tokenizer.readNumber(r.UINT32_BE)),g-=r.UINT32_BE.len;E.chapterList=v},tkhd:async g=>{const E=await this.tokenizer.readToken(new l.TrackHeaderAtom(g));this.tracks.push(E)},mdat:async g=>{if(this.audioLengthInBytes=g,this.calculateBitRate(),this.options.includeChapters){const E=this.tracks.filter(v=>v.chapterList);if(E.length===1){const v=E[0].chapterList,b=this.tracks.filter(y=>v.indexOf(y.trackId)!==-1);if(b.length===1)return this.parseChapterTrack(b[0],E[0],g)}}await this.tokenizer.ignore(g)},ftyp:async g=>{const E=[];for(;g>0;){const b=await this.tokenizer.readToken(l.ftyp);g-=l.ftyp.len;const y=b.type.replace(/\W/g,"");y.length>0&&E.push(y)}u(`ftyp: ${E.join("/")}`);const v=E.filter(p).join("/");this.metadata.setFormat("container",v)},stsd:async g=>{const E=await this.tokenizer.readToken(new l.StsdAtom(g)),v=this.getTrackDescription();v.soundSampleDescription=E.table.map(b=>this.parseSoundSampleDescription(b))},stsc:async g=>{const E=await this.tokenizer.readToken(new l.StscAtom(g));this.getTrackDescription().sampleToChunkTable=E.entries},stts:async g=>{const E=await this.tokenizer.readToken(new l.SttsAtom(g));this.getTrackDescription().timeToSampleTable=E.entries},stsz:async g=>{const E=await this.tokenizer.readToken(new l.StszAtom(g)),v=this.getTrackDescription();v.sampleSize=E.sampleSize,v.sampleSizeTable=E.entries},stco:async g=>{const E=await this.tokenizer.readToken(new l.StcoAtom(g));this.getTrackDescription().chunkOffsetTable=E.entries},date:async g=>{const E=await this.tokenizer.readToken(new r.StringType(g,"utf-8"));this.addTag("date",E)}}}static read_BE_Integer(g,E){const v=(E?"INT":"UINT")+g.length*8+(g.length>1?"_BE":""),b=r[v];if(!b)throw new Error('Token for integer type not found: "'+v+'"');return Number(b.get(g,0))}async parse(){this.tracks=[];let g=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||g>0;){try{if((await this.tokenizer.peekToken(l.Header)).name==="\0\0\0\0"){const w=`Error at offset=${this.tokenizer.position}: box.id=0`;u(w),this.addWarning(w);break}}catch(y){const w=`Error at offset=${this.tokenizer.position}: ${y.message}`;u(w),this.addWarning(w);break}const b=await c.Atom.readAtom(this.tokenizer,(y,w)=>this.handleAtom(y,w),null,g);g-=b.header.length===BigInt(0)?g:Number(b.header.length)}const E=[];this.tracks.forEach(b=>{const y=[];b.soundSampleDescription.forEach(w=>{const T={},k=d[w.dataFormat];if(k?(y.push(k.format),T.codecName=k.format):T.codecName=`<${w.dataFormat}>`,w.description){const{description:_}=w;_.sampleRate>0&&(T.type=a.TrackType.audio,T.audio={samplingFrequency:_.sampleRate,bitDepth:_.sampleSize,channels:_.numAudioChannels})}this.metadata.addStreamInfo(T)}),y.length>=1&&E.push(y.join("/"))}),E.length>0&&this.metadata.setFormat("codec",E.filter(p).join("+"));const v=this.tracks.filter(b=>b.soundSampleDescription.length>=1&&b.soundSampleDescription[0].description&&b.soundSampleDescription[0].description.numAudioChannels>0);if(v.length>=1){const b=v[0];if(b.timeScale>0){const T=b.duration/b.timeScale;this.metadata.setFormat("duration",T)}const y=b.soundSampleDescription[0];if(y.description&&(this.metadata.setFormat("sampleRate",y.description.sampleRate),this.metadata.setFormat("bitsPerSample",y.description.sampleSize),this.metadata.setFormat("numberOfChannels",y.description.numAudioChannels),b.timeScale===0&&b.timeToSampleTable.length>0)){const k=b.timeToSampleTable.map(_=>_.count*_.duration).reduce((_,P)=>_+P)/y.description.sampleRate;this.metadata.setFormat("duration",k)}const w=d[y.dataFormat];w&&this.metadata.setFormat("lossless",!w.lossy),this.calculateBitRate()}}async handleAtom(g,E){if(g.parent)switch(g.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(g)}if(this.atomParsers[g.header.name])return this.atomParsers[g.header.name](E);u(`No parser for atom path=${g.atomPath}, payload-len=${E}, ignoring atom`),await this.tokenizer.ignore(E)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(g,E){this.metadata.addTag(h,g,E)}addWarning(g){u("Warning: "+g),this.metadata.addWarning(g)}parseMetadataItemData(g){let E=g.header.name;return g.readAtoms(this.tokenizer,async(v,b)=>{const y=v.getPayloadLength(b);switch(v.header.name){case"data":return this.parseValueAtom(E,v);case"name":case"mean":case"rate":const w=await this.tokenizer.readToken(new l.NameAtom(y));E+=":"+w.name;break;default:const T=await this.tokenizer.readToken(new r.BufferType(y));this.addWarning("Unsupported meta-item: "+E+"["+v.header.name+"] => value="+T.toString("hex")+" ascii="+T.toString("ascii"))}},g.getPayloadLength(0))}async parseValueAtom(g,E){const v=await this.tokenizer.readToken(new l.DataAtom(Number(E.header.length)-l.Header.len));if(v.type.set!==0)throw new Error("Unsupported type-set != 0: "+v.type.set);switch(v.type.type){case 0:switch(g){case"trkn":case"disk":const b=r.UINT8.get(v.value,3),y=r.UINT8.get(v.value,5);this.addTag(g,b+"/"+y);break;case"gnre":const w=r.UINT8.get(v.value,1),T=s.Genres[w-1];this.addTag(g,T);break;case"rate":const k=v.value.toString("ascii");this.addTag(g,k);break;default:u("unknown proprietary value type for: "+E.atomPath)}break;case 1:case 18:this.addTag(g,v.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(g,{format:"image/jpeg",data:Buffer.from(v.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(g,{format:"image/png",data:Buffer.from(v.value)});break;case 21:this.addTag(g,mo.read_BE_Integer(v.value,!0));break;case 22:this.addTag(g,mo.read_BE_Integer(v.value,!1));break;case 65:this.addTag(g,v.value.readInt8(0));break;case 66:this.addTag(g,v.value.readInt16BE(0));break;case 67:this.addTag(g,v.value.readInt32BE(0));break;default:this.addWarning(`atom key=${g}, has unknown well-known-type (data-type): ${v.type.type}`)}}parseSoundSampleDescription(g){const E={dataFormat:g.dataFormat,dataReferenceIndex:g.dataReferenceIndex};let v=0;const b=l.SoundSampleDescriptionVersion.get(g.description,v);return v+=l.SoundSampleDescriptionVersion.len,b.version===0||b.version===1?E.description=l.SoundSampleDescriptionV0.get(g.description,v):u(`Warning: sound-sample-description ${b} not implemented`),E}async parseChapterTrack(g,E,v){if(!g.sampleSize&&g.chunkOffsetTable.length!==g.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const b=[];for(let y=0;y<g.chunkOffsetTable.length&&v>0;++y){const T=g.chunkOffsetTable[y]-this.tokenizer.position,k=g.sampleSize>0?g.sampleSize:g.sampleSizeTable[y];if(v-=T+k,v<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(T);const _=await this.tokenizer.readToken(new l.ChapterText(k));u(`Chapter ${y+1}: ${_}`);const P={title:_,sampleOffset:this.findSampleOffset(E,this.tokenizer.position)};u(`Chapter title=${P.title}, offset=${P.sampleOffset}/${this.tracks[0].duration}`),b.push(P)}this.metadata.setFormat("chapters",b),await this.tokenizer.ignore(v)}findSampleOffset(g,E){let v=0;g.timeToSampleTable.forEach(y=>{v+=y.count*y.duration}),u(`Total duration=${v}`);let b=0;for(;b<g.chunkOffsetTable.length&&g.chunkOffsetTable[b]<E;)++b;return this.getChunkDuration(b+1,g)}getChunkDuration(g,E){let v=0,b=E.timeToSampleTable[v].count,y=E.timeToSampleTable[v].duration,w=1,T=this.getSamplesPerChunk(w,E.sampleToChunkTable),k=0;for(;w<g;){const _=Math.min(b,T);k+=_*y,b-=_,T-=_,T===0?(++w,T=this.getSamplesPerChunk(w,E.sampleToChunkTable)):(++v,b=E.timeToSampleTable[v].count,y=E.timeToSampleTable[v].duration)}return k}getSamplesPerChunk(g,E){for(let v=0;v<E.length-1;++v)if(g>=E[v].firstChunk&&g<E[v+1].firstChunk)return E[v].samplesPerChunk;return E[E.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=f,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const e=requireUtil$1();var r;(function(s){s[s.not_set=0]="not_set",s[s.radio=1]="radio",s[s.audiophile=2]="audiophile"})(r||(r={}));var i;return(function(s){s[s.unspecified=0]="unspecified",s[s.engineer=1]="engineer",s[s.user=2]="user",s[s.automatic=3]="automatic",s[s.rms_average=4]="rms_average"})(i||(i={})),ReplayGainDataFormat.ReplayGain={len:2,get:(s,a)=>{const c=e.getBitAllignedNumber(s,a,0,3),l=e.getBitAllignedNumber(s,a,6,1),u=e.getBitAllignedNumber(s,a,7,9)/10;if(c>0)return{type:e.getBitAllignedNumber(s,a,0,3),origin:e.getBitAllignedNumber(s,a,3,3),adjustment:l?-u:u}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const e=requireLib$2(),r=requireUtil$1(),i=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(s,a)=>{const c=e.UINT32_BE.get(s,a+2);return{revision:r.getBitAllignedNumber(s,a,0,4),vbr_method:r.getBitAllignedNumber(s,a,4,4),lowpass_filter:100*e.UINT8.get(s,a+1),track_peak:c===0?void 0:c/Math.pow(2,23),track_gain:i.ReplayGain.get(s,6),album_gain:i.ReplayGain.get(s,8),music_length:e.UINT32_BE.get(s,a+20),music_crc:e.UINT8.get(s,a+24),header_crc:e.UINT16_BE.get(s,a+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readXingHeader=e.XingHeaderFlags=e.LameEncoderVersion=e.InfoTagHeaderTag=void 0;const r=requireLib$2(),i=requireUtil$1(),s=requireExtendedLameHeader();e.InfoTagHeaderTag=new r.StringType(4,"ascii"),e.LameEncoderVersion=new r.StringType(6,"ascii"),e.XingHeaderFlags={len:4,get:(c,l)=>({frames:i.isBitSet(c,l,31),bytes:i.isBitSet(c,l,30),toc:i.isBitSet(c,l,29),vbrScale:i.isBitSet(c,l,28)})};async function a(c){const l=await c.readToken(e.XingHeaderFlags),u={};if(l.frames&&(u.numFrames=await c.readToken(r.UINT32_BE)),l.bytes&&(u.streamSize=await c.readToken(r.UINT32_BE)),l.toc&&(u.toc=Buffer.alloc(100),await c.readBuffer(u.toc)),l.vbrScale&&(u.vbrScale=await c.readToken(r.UINT32_BE)),await c.peekToken(new r.StringType(4,"ascii"))==="LAME"&&(await c.ignore(4),u.lame={version:await c.readToken(new r.StringType(5,"ascii"))},u.lame.version.match(/\d+.\d+/g))){const f=u.lame.version.match(/\d+.\d+/g)[0].split(".").map(m=>parseInt(m,10));f[0]>=3&&f[1]>=90&&(u.lame.extended=await c.readToken(s.ExtendedLameHeader))}return u}e.readXingHeader=a})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const e=requireLib$2(),r=requireCore$2(),i=requireBrowser$3(),s=requireUtil$1(),a=requireAbstractID3Parser(),c=requireXingTag(),l=(0,i.default)("music-metadata:parser:mpeg"),u=1024,h={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},d=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class p{constructor(v,b){this.versionIndex=s.getBitAllignedNumber(v,b+1,3,2),this.layer=p.LayerDescription[s.getBitAllignedNumber(v,b+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(v,b):this.parseMpegHeader(v,b),this.isProtectedByCRC=!s.isBitSet(v,b+1,7)}calcDuration(v){return v*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return p.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(v,b){this.container="MPEG",this.bitrateIndex=s.getBitAllignedNumber(v,b+2,0,4),this.sampRateFreqIndex=s.getBitAllignedNumber(v,b+2,4,2),this.padding=s.isBitSet(v,b+2,6),this.privateBit=s.isBitSet(v,b+2,7),this.channelModeIndex=s.getBitAllignedNumber(v,b+3,0,2),this.modeExtension=s.getBitAllignedNumber(v,b+3,2,2),this.isCopyrighted=s.isBitSet(v,b+3,4),this.isOriginalMedia=s.isBitSet(v,b+3,5),this.emphasis=s.getBitAllignedNumber(v,b+3,7,2),this.version=p.VersionID[this.versionIndex],this.channelMode=p.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const y=this.calcBitrate();if(!y)throw new Error("Cannot determine bit-rate");if(this.bitrate=y*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(v,b){l("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const y=s.getBitAllignedNumber(v,b+2,0,2);this.codec="AAC",this.codecProfile=h.AudioObjectTypes[y],l(`MPEG-4 audio-codec=${this.codec}`);const w=s.getBitAllignedNumber(v,b+2,2,4);this.samplingRate=h.SamplingFrequencies[w],l(`sampling-rate=${this.samplingRate}`);const T=s.getBitAllignedNumber(v,b+2,7,3);this.mp4ChannelConfig=d[T],l(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=s.getBitAllignedNumber(v,b+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const v=`${Math.floor(this.version)}${this.layer}`;return p.bitrate_index[this.bitrateIndex][v]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:p.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}p.SyncByte1=255,p.SyncByte2=224,p.VersionID=[2.5,null,2,1],p.LayerDescription=[0,3,2,1],p.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],p.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},p.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},p.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const f={len:4,get:(E,v)=>new p(E,v)};function m(E){return"V"+Math.floor((100-E)/10)}let g=class extends a.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(u),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let v=!1;for(;!v;)await this.sync(),v=await this.parseCommonMpegHeader()}catch(v){if(v instanceof r.EndOfStreamError){if(l("End-of-stream"),this.calculateEofDuration){const b=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",b);const y=b/this.metadata.format.sampleRate;l(`Calculate duration at EOF: ${y} sec.`,y),this.metadata.setFormat("duration",y)}}else throw v}}finalize(){const v=this.metadata.format,b=this.metadata.native.hasOwnProperty("ID3v1");if(v.duration&&this.tokenizer.fileInfo.size){const y=this.tokenizer.fileInfo.size-this.mpegOffset-(b?128:0);v.codecProfile&&v.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",y*8/v.duration)}else if(this.tokenizer.fileInfo.size&&v.codecProfile==="CBR"){const y=this.tokenizer.fileInfo.size-this.mpegOffset-(b?128:0),w=Math.round(y/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",w);const T=w/v.sampleRate;l("Calculate CBR duration based on file size: %s",T),this.metadata.setFormat("duration",T)}}async sync(){let v=!1;for(;;){let b=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:u,mayBeLess:!0}),this.syncPeek.len<=163)throw new r.EndOfStreamError;for(;;)if(v&&(this.syncPeek.buf[b]&224)===224){this.buf_frame_header[0]=p.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[b],await this.tokenizer.ignore(b),l(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(l(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(v=!1,b=this.syncPeek.buf.indexOf(p.SyncByte1,b),b===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new r.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++b,v=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let v;try{v=f.get(this.buf_frame_header,0)}catch(b){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+b.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",v.container),this.metadata.setFormat("codec",v.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",v.samplingRate),this.frameCount++,v.version>=2&&v.layer===0?this.parseAdts(v):this.parseAudioFrameHeader(v)}async parseAudioFrameHeader(v){this.metadata.setFormat("numberOfChannels",v.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",v.bitrate),this.frameCount<20*1e4&&l("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,v.layer,v.bitrate,v.samplingRate);const b=v.calcSlotSize();if(b===null)throw new Error("invalid slot_size");const y=v.calcSamplesPerFrame();l(`samples_per_frame=${y}`);const T=y/8*v.bitrate/v.samplingRate+(v.padding?b:0);if(this.frame_size=Math.floor(T),this.audioFrameHeader=v,this.bitrates.push(v.bitrate),this.frameCount===1)return this.offset=f.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=y,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=y,this.calculateEofDuration=!0),this.offset=4,v.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(v){const b=Buffer.alloc(3);await this.tokenizer.readBuffer(b),v.frameLength+=s.getBitAllignedNumber(b,0,0,11),this.totalDataLength+=v.frameLength,this.samplesPerFrame=1024;const y=v.samplingRate/this.samplesPerFrame,T=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*y+.5;if(this.metadata.setFormat("bitrate",T),l(`frame-count=${this.frameCount}, size=${v.frameLength} bytes, bit-rate=${T}`),await this.tokenizer.ignore(v.frameLength>7?v.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",v.codecProfile),v.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",v.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(e.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const v=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new e.Uint8ArrayType(v)),this.offset+=v,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const v=await this.tokenizer.readToken(c.InfoTagHeaderTag);switch(this.offset+=c.InfoTagHeaderTag.len,v){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const y=await this.readXingInfoHeader(),w=m(y.vbrScale);return this.metadata.setFormat("codecProfile",w),null;case"Xtra":break;case"LAME":const T=await this.tokenizer.readToken(c.LameEncoderVersion);if(this.frame_size>=this.offset+c.LameEncoderVersion.len)return this.offset+=c.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+T),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const b=this.frame_size-this.offset;return b<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(b),null}async readXingInfoHeader(){const v=this.tokenizer.position,b=await(0,c.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-v,b.lame&&(this.metadata.setFormat("tool","LAME "+s.stripNulls(b.lame.version)),b.lame.extended&&(this.metadata.setFormat("trackPeakLevel",b.lame.extended.track_peak),b.lame.extended.track_gain&&this.metadata.setFormat("trackGain",b.lame.extended.track_gain.adjustment),b.lame.extended.album_gain&&this.metadata.setFormat("albumGain",b.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",b.lame.extended.music_length/1e3))),b.streamSize){const w=this.audioFrameHeader.calcDuration(b.numFrames);return this.metadata.setFormat("duration",w),l("Get duration from Xing header: %s",this.metadata.format.duration),b}const y=this.frame_size-this.offset;return await this.skipFrameData(y),b}async skipFrameData(v){if(v<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(v),this.countSkipFrameData+=v}areAllSame(v){const b=v[0];return v.every(y=>y===b)}};return MpegParser.MpegParser=g,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireUtil$1(),s=(0,r.default)("music-metadata:parser:musepack:sv8"),a=new e.StringType(2,"binary"),c={len:5,get:(h,d)=>({crc:e.UINT32_LE.get(h,d),streamVersion:e.UINT8.get(h,d+4)})},l={len:2,get:(h,d)=>({sampleFrequency:[44100,48e3,37800,32e3][i.getBitAllignedNumber(h,d,0,3)],maxUsedBands:i.getBitAllignedNumber(h,d,3,5),channelCount:i.getBitAllignedNumber(h,d+1,0,4)+1,msUsed:i.isBitSet(h,d+1,4),audioBlockFrames:i.getBitAllignedNumber(h,d+1,5,3)})};class u{constructor(d){this.tokenizer=d}async readPacketHeader(){const d=await this.tokenizer.readToken(a),p=await this.readVariableSizeField();return{key:d,payloadLength:p.value-2-p.len}}async readStreamHeader(d){const p={};s(`Reading SH at offset=${this.tokenizer.position}`);const f=await this.tokenizer.readToken(c);d-=c.len,Object.assign(p,f),s(`SH.streamVersion = ${f.streamVersion}`);const m=await this.readVariableSizeField();d-=m.len,p.sampleCount=m.value;const g=await this.readVariableSizeField();d-=g.len,p.beginningOfSilence=g.value;const E=await this.tokenizer.readToken(l);return d-=l.len,Object.assign(p,E),await this.tokenizer.ignore(d),p}async readVariableSizeField(d=1,p=0){let f=await this.tokenizer.readNumber(e.UINT8);return(f&128)===0?{len:d,value:p+f}:(f&=127,f+=p,this.readVariableSizeField(d+1,f<<7))}}return StreamVersion8.StreamReader=u,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const e=requireBrowser$3(),r=requireBasicParser(),i=requireAPEv2Parser(),s=requireFourCC(),a=requireStreamVersion8(),c=(0,e.default)("music-metadata:parser:musepack");let l=class extends r.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(s.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const h=new a.StreamReader(this.tokenizer);do{const d=await h.readPacketHeader();switch(c(`packet-header key=${d.key}, payloadLength=${d.payloadLength}`),d.key){case"SH":const p=await h.readStreamHeader(d.payloadLength);this.metadata.setFormat("numberOfSamples",p.sampleCount),this.metadata.setFormat("sampleRate",p.sampleFrequency),this.metadata.setFormat("duration",p.sampleCount/p.sampleFrequency),this.metadata.setFormat("numberOfChannels",p.channelCount);break;case"AP":this.audioLength+=d.payloadLength,await this.tokenizer.ignore(d.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(d.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${d.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=l,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const e=requireLib$2();let r=class{constructor(s){this.tokenizer=s,this.pos=0,this.dword=void 0}async read(s){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(e.UINT32_LE);let a=this.dword;return this.pos+=s,this.pos<32?(a>>>=32-this.pos,a&(1<<s)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,a&(1<<s)-1):(this.dword=await this.tokenizer.readToken(e.UINT32_LE),this.pos&&(a<<=this.pos,a|=this.dword>>>32-this.pos),a&(1<<s)-1))}async ignore(s){if(this.pos>0){const l=32-this.pos;this.dword=void 0,s-=l,this.pos=0}const a=s%32,c=(s-a)/32;return await this.tokenizer.ignore(c*4),this.read(a)}};return BitReader.BitReader=r,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const e=requireLib$2(),r=requireUtil$1();return StreamVersion7.Header={len:24,get:(i,s)=>{const a={signature:Buffer.from(i).toString("latin1",s,s+3),streamMinorVersion:r.getBitAllignedNumber(i,s+3,0,4),streamMajorVersion:r.getBitAllignedNumber(i,s+3,4,4),frameCount:e.UINT32_LE.get(i,s+4),maxLevel:e.UINT16_LE.get(i,s+8),sampleFrequency:[44100,48e3,37800,32e3][r.getBitAllignedNumber(i,s+10,0,2)],link:r.getBitAllignedNumber(i,s+10,2,2),profile:r.getBitAllignedNumber(i,s+10,4,4),maxBand:r.getBitAllignedNumber(i,s+11,0,6),intensityStereo:r.isBitSet(i,s+11,6),midSideStereo:r.isBitSet(i,s+11,7),titlePeak:e.UINT16_LE.get(i,s+12),titleGain:e.UINT16_LE.get(i,s+14),albumPeak:e.UINT16_LE.get(i,s+16),albumGain:e.UINT16_LE.get(i,s+18),lastFrameLength:e.UINT32_LE.get(i,s+20)>>>20&2047,trueGapless:r.isBitSet(i,s+23,0)};return a.lastFrameLength=a.trueGapless?e.UINT32_LE.get(i,20)>>>20&2047:0,a}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const e=requireBrowser$3(),r=requireBasicParser(),i=requireAPEv2Parser(),s=requireBitReader(),a=requireStreamVersion7(),c=(0,e.default)("music-metadata:parser:musepack");let l=class extends r.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const h=await this.tokenizer.readToken(a.Header);if(h.signature!=="MP+")throw new Error("Unexpected magic number");c(`stream-version=${h.streamMajorVersion}.${h.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",h.sampleFrequency);const d=1152*(h.frameCount-1)+h.lastFrameLength;this.metadata.setFormat("numberOfSamples",d),this.duration=d/h.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new s.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",h.midSideStereo||h.intensityStereo?2:1);const p=await this.bitreader.read(8);return this.metadata.setFormat("codec",(p/100).toFixed(2)),await this.skipAudioData(h.frameCount),c(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(h){for(;h-- >0;){const p=await this.bitreader.read(20);this.audioLength+=20+p,await this.bitreader.ignore(p)}const d=await this.bitreader.read(11);this.audioLength+=d,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=l,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const e=requireBrowser$3(),r=requireLib$2(),i=requireAbstractID3Parser(),s=requireMpcSv8Parser(),a=requireMpcSv7Parser(),c=(0,e.default)("music-metadata:parser:musepack");class l extends i.AbstractID3Parser{async postId3v2Parse(){const h=await this.tokenizer.peekToken(new r.StringType(3,"binary"));let d;switch(h){case"MP+":{c("Musepack stream-version 7"),d=new a.MpcSv7Parser;break}case"MPC":{c("Musepack stream-version 8"),d=new s.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return d.init(this.metadata,this.tokenizer,this.options),d.parse()}}return musepack.default=l,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const e=requireLib$2();class r{constructor(s){if(this.len=s,s<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(s,a){return{magicSignature:new e.StringType(8,"ascii").get(s,a+0),version:s.readUInt8(a+8),channelCount:s.readUInt8(a+9),preSkip:s.readInt16LE(a+10),inputSampleRate:s.readInt32LE(a+12),outputGain:s.readInt16LE(a+16),channelMapping:s.readUInt8(a+18)}}}return Opus.IdHeader=r,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const e=requireLib$2(),r=requireVorbisParser(),i=requireOpus();let s=class extends r.VorbisParser{constructor(c,l,u){super(c,l),this.tokenizer=u,this.lastPos=-1}parseFirstPage(c,l){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new i.IdHeader(l.length).get(l,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(c){switch(new e.StringType(8,"ascii").get(c,0)){case"OpusTags":this.parseUserCommentList(c,8),this.lastPos=this.tokenizer.position-c.length;break}}calculateDuration(c){if(this.metadata.format.sampleRate&&c.absoluteGranulePosition>=0){const l=c.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",l),this.metadata.setFormat("duration",l/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const u=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*u/this.metadata.format.duration)}}}};return OpusParser.OpusParser=s,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const e=requireLib$2(),r=requireUtil$1();return Speex.Header={len:80,get:(i,s)=>({speex:new e.StringType(8,"ascii").get(i,s+0),version:r.trimRightNull(new e.StringType(20,"ascii").get(i,s+8)),version_id:i.readInt32LE(s+28),header_size:i.readInt32LE(s+32),rate:i.readInt32LE(s+36),mode:i.readInt32LE(s+40),mode_bitstream_version:i.readInt32LE(s+44),nb_channels:i.readInt32LE(s+48),bitrate:i.readInt32LE(s+52),frame_size:i.readInt32LE(s+56),vbr:i.readInt32LE(s+60),frames_per_packet:i.readInt32LE(s+64),extra_headers:i.readInt32LE(s+68),reserved1:i.readInt32LE(s+72),reserved2:i.readInt32LE(s+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const e=requireBrowser$3(),r=requireVorbisParser(),i=requireSpeex(),s=(0,e.default)("music-metadata:parser:ogg:speex");let a=class extends r.VorbisParser{constructor(l,u,h){super(l,u),this.tokenizer=h}parseFirstPage(l,u){s("First Ogg/Speex page");const h=i.Header.get(u,0);this.metadata.setFormat("codec",`Speex ${h.version}`),this.metadata.setFormat("numberOfChannels",h.nb_channels),this.metadata.setFormat("sampleRate",h.rate),h.bitrate!==-1&&this.metadata.setFormat("bitrate",h.bitrate)}};return SpeexParser.SpeexParser=a,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const e=requireLib$2();return Theora.IdentificationHeader={len:42,get:(r,i)=>({id:new e.StringType(7,"ascii").get(r,i),vmaj:r.readUInt8(i+7),vmin:r.readUInt8(i+8),vrev:r.readUInt8(i+9),vmbw:r.readUInt16BE(i+10),vmbh:r.readUInt16BE(i+17),nombr:e.UINT24_BE.get(r,i+37),nqual:r.readUInt8(i+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const e=requireBrowser$3(),r=requireTheora(),i=(0,e.default)("music-metadata:parser:ogg:theora");let s=class{constructor(c,l,u){this.metadata=c,this.tokenizer=u}parsePage(c,l){c.headerType.firstPage&&this.parseFirstPage(c,l)}flush(){i("flush")}calculateDuration(c){i("duration calculation not implemented")}parseFirstPage(c,l){i("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const u=r.IdentificationHeader.get(l,0);this.metadata.setFormat("bitrate",u.nombr)}};return TheoraParser.TheoraParser=s,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const e=requireLib$2(),r=requireCore$2(),i=requireBrowser$3(),s=requireUtil$1(),a=requireFourCC(),c=requireBasicParser(),l=requireVorbisParser(),u=requireOpusParser(),h=requireSpeexParser(),d=requireTheoraParser(),p=(0,i.default)("music-metadata:parser:ogg");class f{static sum(E,v,b){let y=0;for(let w=v;w<v+b;++w)y+=E[w];return y}constructor(E){this.len=E.page_segments}get(E,v){return{totalPageSize:f.sum(E,v,this.len)}}}OggParser.SegmentTable=f;let m=class zc extends c.BasicParser{async parse(){p("pos=%s, parsePage()",this.tokenizer.position);try{let E;do{if(E=await this.tokenizer.readToken(zc.Header),E.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=E,this.pageNumber=E.pageSequenceNo,p("page#=%s, Ogg.id=%s",E.pageSequenceNo,E.capturePattern);const v=await this.tokenizer.readToken(new f(E));p("totalPageSize=%s",v.totalPageSize);const b=await this.tokenizer.readToken(new e.Uint8ArrayType(v.totalPageSize));if(p("firstPage=%s, lastPage=%s, continued=%s",E.headerType.firstPage,E.headerType.lastPage,E.headerType.continued),E.headerType.firstPage){const y=new e.StringType(7,"ascii").get(Buffer.from(b),0);switch(y){case"vorbis":p("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new l.VorbisParser(this.metadata,this.options);break;case"OpusHea":p("Set page consumer to Ogg/Opus"),this.pageConsumer=new u.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":p("Set page consumer to Ogg/Speex"),this.pageConsumer=new h.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":p("Set page consumer to Ogg/Theora"),this.pageConsumer=new d.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+y+")")}}this.pageConsumer.parsePage(E,b)}while(!E.headerType.lastPage)}catch(E){if(E instanceof r.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),p("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(E.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw E}}};return m.Header={len:27,get:(g,E)=>({capturePattern:a.FourCcToken.get(g,E),version:e.UINT8.get(g,E+4),headerType:{continued:s.getBit(g,E+5,0),firstPage:s.getBit(g,E+5,1),lastPage:s.getBit(g,E+5,2)},absoluteGranulePosition:Number(e.UINT64_LE.get(g,E+6)),streamSerialNumber:e.UINT32_LE.get(g,E+14),pageSequenceNo:e.UINT32_LE.get(g,E+18),pageChecksum:e.UINT32_LE.get(g,E+22),page_segments:e.UINT8.get(g,E+26)})},OggParser.OggParser=m,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const e=requireLib$2();RiffChunk.Header={len:8,get:(i,s)=>({chunkID:i.toString("binary",s,s+4),chunkSize:e.UINT32_LE.get(i,4)})};class r{constructor(s){this.tagHeader=s,this.len=s.chunkSize,this.len+=this.len&1}get(s,a){return new e.StringType(this.tagHeader.chunkSize,"ascii").get(s,a)}}return RiffChunk.ListInfoTagValue=r,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FactChunk=e.Format=e.WaveFormat=void 0,(function(s){s[s.PCM=1]="PCM",s[s.ADPCM=2]="ADPCM",s[s.IEEE_FLOAT=3]="IEEE_FLOAT",s[s.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",s[s.MPEG_LOAS=5634]="MPEG_LOAS",s[s.RAW_AAC1=255]="RAW_AAC1",s[s.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",s[s.DVM=8192]="DVM",s[s.RAW_SPORT=576]="RAW_SPORT",s[s.ESST_AC3=577]="ESST_AC3",s[s.DRM=9]="DRM",s[s.DTS2=8193]="DTS2",s[s.MPEG=80]="MPEG"})(e.WaveFormat||(e.WaveFormat={}));class r{constructor(a){if(a.chunkSize<16)throw new Error("Invalid chunk size");this.len=a.chunkSize}get(a,c){return{wFormatTag:a.readUInt16LE(c),nChannels:a.readUInt16LE(c+2),nSamplesPerSec:a.readUInt32LE(c+4),nAvgBytesPerSec:a.readUInt32LE(c+8),nBlockAlign:a.readUInt16LE(c+12),wBitsPerSample:a.readUInt16LE(c+14)}}}e.Format=r;class i{constructor(a){if(a.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=a.chunkSize}get(a,c){return{dwSampleLength:a.readUInt32LE(c)}}}e.FactChunk=i})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const e=requireLib$2(),r=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(i,s)=>({description:(0,r.stripNulls)(new e.StringType(256,"ascii").get(i,s)).trim(),originator:(0,r.stripNulls)(new e.StringType(32,"ascii").get(i,s+256)).trim(),originatorReference:(0,r.stripNulls)(new e.StringType(32,"ascii").get(i,s+288)).trim(),originationDate:(0,r.stripNulls)(new e.StringType(10,"ascii").get(i,s+320)).trim(),originationTime:(0,r.stripNulls)(new e.StringType(8,"ascii").get(i,s+330)).trim(),timeReferenceLow:e.UINT32_LE.get(i,s+338),timeReferenceHigh:e.UINT32_LE.get(i,s+342),version:e.UINT16_LE.get(i,s+346),umid:new e.Uint8ArrayType(64).get(i,s+348),loudnessValue:e.UINT16_LE.get(i,s+412),maxTruePeakLevel:e.UINT16_LE.get(i,s+414),maxMomentaryLoudness:e.UINT16_LE.get(i,s+416),maxShortTermLoudness:e.UINT16_LE.get(i,s+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const e=requireCore$2(),r=requireLib$2(),i=requireBrowser$3(),s=requireRiffChunk(),a=requireWaveChunk(),c=requireID3v2Parser(),l=requireUtil$1(),u=requireFourCC(),h=requireBasicParser(),d=requireBwfChunk(),p=(0,i.default)("music-metadata:parser:RIFF");let f=class extends h.BasicParser{async parse(){const g=await this.tokenizer.readToken(s.Header);if(p(`pos=${this.tokenizer.position}, parse: chunkID=${g.chunkID}`),g.chunkID==="RIFF")return this.parseRiffChunk(g.chunkSize).catch(E=>{if(!(E instanceof e.EndOfStreamError))throw E})}async parseRiffChunk(g){const E=await this.tokenizer.readToken(u.FourCcToken);switch(this.metadata.setFormat("container",E),E){case"WAVE":return this.readWaveChunk(g-u.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${E}`)}}async readWaveChunk(g){for(;g>=s.Header.len;){const E=await this.tokenizer.readToken(s.Header);switch(g-=s.Header.len+E.chunkSize,E.chunkSize>g&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=E,p(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${E.chunkID}`),E.chunkID){case"LIST":await this.parseListTag(E);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new a.FactChunk(E));break;case"fmt ":const v=await this.tokenizer.readToken(new a.Format(E));let b=a.WaveFormat[v.wFormatTag];b||(p("WAVE/non-PCM format="+v.wFormatTag),b="non-PCM ("+v.wFormatTag+")"),this.metadata.setFormat("codec",b),this.metadata.setFormat("bitsPerSample",v.wBitsPerSample),this.metadata.setFormat("sampleRate",v.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",v.nChannels),this.metadata.setFormat("bitrate",v.nBlockAlign*v.nSamplesPerSec*8),this.blockAlign=v.nBlockAlign;break;case"id3 ":case"ID3 ":const y=await this.tokenizer.readToken(new r.Uint8ArrayType(E.chunkSize)),w=e.fromBuffer(y);await new c.ID3v2Parser().parse(this.metadata,w,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let T=E.chunkSize;if(this.tokenizer.fileInfo.size){const R=this.tokenizer.fileInfo.size-this.tokenizer.position;R<T&&(this.metadata.addWarning("data chunk length exceeding file length"),T=R)}const k=this.fact?this.fact.dwSampleLength:T===4294967295?void 0:T/this.blockAlign;k&&(this.metadata.setFormat("numberOfSamples",k),this.metadata.setFormat("duration",k/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(E.chunkSize);break;case"bext":const _=await this.tokenizer.readToken(d.BroadcastAudioExtensionChunk);Object.keys(_).forEach(R=>{this.metadata.addTag("exif","bext."+R,_[R])});const P=E.chunkSize-d.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(P);break;case"\0\0\0\0":p(`Ignore padding chunk: RIFF/${E.chunkID} of ${E.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+E.chunkID),await this.tokenizer.ignore(E.chunkSize);break;default:p(`Ignore chunk: RIFF/${E.chunkID} of ${E.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+E.chunkID),await this.tokenizer.ignore(E.chunkSize)}this.header.chunkSize%2===1&&(p("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(g){const E=await this.tokenizer.readToken(new r.StringType(4,"binary"));switch(p("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,E),E){case"INFO":return this.parseRiffInfoTags(g.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+E),p("Ignoring chunkID=RIFF/WAVE/LIST/"+E),this.tokenizer.ignore(g.chunkSize-4).then()}}async parseRiffInfoTags(g){for(;g>=8;){const E=await this.tokenizer.readToken(s.Header),v=new s.ListInfoTagValue(E),b=await this.tokenizer.readToken(v);this.addTag(E.chunkID,l.stripNulls(b)),g-=8+v.len}if(g!==0)throw Error("Illegal remaining size: "+g)}addTag(g,E){this.metadata.addTag("exif",g,E)}};return WaveParser.WaveParser=f,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const e=requireLib$2(),r=requireFourCC(),i=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class s{static isBitSet(c,l){return s.getBitAllignedNumber(c,l,1)===1}static getBitAllignedNumber(c,l,u){return c>>>l&4294967295>>>32-u}}return s.BlockHeaderToken={len:32,get:(a,c)=>{const l=e.UINT32_LE.get(a,c+24),u={BlockID:r.FourCcToken.get(a,c),blockSize:e.UINT32_LE.get(a,c+4),version:e.UINT16_LE.get(a,c+8),totalSamples:e.UINT32_LE.get(a,c+12),blockIndex:e.UINT32_LE.get(a,c+16),blockSamples:e.UINT32_LE.get(a,c+20),flags:{bitsPerSample:(1+s.getBitAllignedNumber(l,0,2))*8,isMono:s.isBitSet(l,2),isHybrid:s.isBitSet(l,3),isJointStereo:s.isBitSet(l,4),crossChannel:s.isBitSet(l,5),hybridNoiseShaping:s.isBitSet(l,6),floatingPoint:s.isBitSet(l,7),samplingRate:i[s.getBitAllignedNumber(l,23,4)],isDSD:s.isBitSet(l,31)},crc:new e.Uint8ArrayType(4).get(a,c+28)};return u.flags.isDSD&&(u.totalSamples*=8),u}},s.MetadataIdToken={len:1,get:(a,c)=>({functionId:s.getBitAllignedNumber(a[c],0,6),isOptional:s.isBitSet(a[c],5),isOddSize:s.isBitSet(a[c],6),largeBlock:s.isBitSet(a[c],7)})},WavPackToken.WavPack=s,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const e=requireLib$2(),r=requireAPEv2Parser(),i=requireFourCC(),s=requireBasicParser(),a=requireWavPackToken(),l=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let u=class extends s.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),r.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(i.FourCcToken)!=="wvpk")break;const p=await this.tokenizer.readToken(a.WavPack.BlockHeaderToken);if(p.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");l(`WavPack header blockIndex=${p.blockIndex}, len=${a.WavPack.BlockHeaderToken.len}`),p.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!p.flags.isHybrid),this.metadata.setFormat("bitsPerSample",p.flags.bitsPerSample),p.flags.isDSD||(this.metadata.setFormat("sampleRate",p.flags.samplingRate),this.metadata.setFormat("duration",p.totalSamples/p.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",p.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",p.totalSamples),this.metadata.setFormat("codec",p.flags.isDSD?"DSD":"PCM"));const f=p.blockSize-(a.WavPack.BlockHeaderToken.len-8);await(p.blockIndex===0?this.parseMetadataSubBlock(p,f):this.tokenizer.ignore(f)),p.blockSamples>0&&(this.audioDataSize+=p.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=a.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(d,p){for(;p>a.WavPack.MetadataIdToken.len;){const f=await this.tokenizer.readToken(a.WavPack.MetadataIdToken),m=await this.tokenizer.readNumber(f.largeBlock?e.UINT24_LE:e.UINT8),g=Buffer.alloc(m*2-(f.isOddSize?1:0));switch(await this.tokenizer.readBuffer(g),l(`Metadata Sub-Blocks functionId=0x${f.functionId.toString(16)}, id.largeBlock=${f.largeBlock},data-size=${g.length}`),f.functionId){case 0:break;case 14:l("ID_DSD_BLOCK");const E=1<<g.readUInt8(0),v=d.flags.samplingRate*E*8;if(!d.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",v),this.metadata.setFormat("duration",d.totalSamples/v);break;case 36:l("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",g);break;case 47:l(`ID_BLOCK_CHECKSUM: checksum=${g.toString("hex")}`);break;default:l(`Ignore unsupported meta-sub-block-id functionId=0x${f.functionId.toString(16)}`);break}p-=a.WavPack.MetadataIdToken.len+(f.largeBlock?e.UINT24_LE.len:e.UINT8.len)+m*2,l(`remainingLength=${p}`),f.isOddSize&&this.tokenizer.ignore(1)}if(p!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=u,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormatChunk=e.ChannelType=e.DsdChunk=e.ChunkHeader=void 0;const r=requireLib$2(),i=requireFourCC();e.ChunkHeader={len:12,get:(s,a)=>({id:i.FourCcToken.get(s,a),size:r.UINT64_LE.get(s,a+4)})},e.DsdChunk={len:16,get:(s,a)=>({fileSize:r.INT64_LE.get(s,a),metadataPointer:r.INT64_LE.get(s,a+8)})},(function(s){s[s.mono=1]="mono",s[s.stereo=2]="stereo",s[s.channels=3]="channels",s[s.quad=4]="quad",s[s["4 channels"]=5]="4 channels",s[s["5 channels"]=6]="5 channels",s[s["5.1 channels"]=7]="5.1 channels"})(e.ChannelType||(e.ChannelType={})),e.FormatChunk={len:40,get:(s,a)=>({formatVersion:r.INT32_LE.get(s,a),formatID:r.INT32_LE.get(s,a+4),channelType:r.INT32_LE.get(s,a+8),channelNum:r.INT32_LE.get(s,a+12),samplingFrequency:r.INT32_LE.get(s,a+16),bitsPerSample:r.INT32_LE.get(s,a+20),sampleCount:r.INT64_LE.get(s,a+24),blockSizePerChannel:r.INT32_LE.get(s,a+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const e=requireBrowser$3(),r=requireAbstractID3Parser(),i=requireDsfChunk(),s=requireID3v2Parser(),a=(0,e.default)("music-metadata:parser:DSF");let c=class extends r.AbstractID3Parser{async postId3v2Parse(){const u=this.tokenizer.position,h=await this.tokenizer.readToken(i.ChunkHeader);if(h.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const d=await this.tokenizer.readToken(i.DsdChunk);if(d.metadataPointer===BigInt(0))a("No ID3v2 tag present");else return a(`expect ID3v2 at offset=${d.metadataPointer}`),await this.parseChunks(d.fileSize-h.size),await this.tokenizer.ignore(Number(d.metadataPointer)-this.tokenizer.position-u),new s.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(u){for(;u>=i.ChunkHeader.len;){const h=await this.tokenizer.readToken(i.ChunkHeader);switch(a(`Parsing chunk name=${h.id} size=${h.size}`),h.id){case"fmt ":const d=await this.tokenizer.readToken(i.FormatChunk);this.metadata.setFormat("numberOfChannels",d.channelNum),this.metadata.setFormat("sampleRate",d.samplingFrequency),this.metadata.setFormat("bitsPerSample",d.bitsPerSample),this.metadata.setFormat("numberOfSamples",d.sampleCount),this.metadata.setFormat("duration",Number(d.sampleCount)/d.samplingFrequency);const p=d.bitsPerSample*d.samplingFrequency*d.channelNum;this.metadata.setFormat("bitrate",p);return;default:this.tokenizer.ignore(Number(h.size)-i.ChunkHeader.len);break}u-=h.size}}};return DsfParser.DsfParser=c,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const e=requireLib$2(),r=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(i,s)=>({chunkID:r.FourCcToken.get(i,s),chunkSize:e.INT64_BE.get(i,s+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireCore$2(),s=requireFourCC(),a=requireBasicParser(),c=requireID3v2Parser(),l=requireDsdiffToken(),u=(0,r.default)("music-metadata:parser:aiff");let h=class extends a.BasicParser{async parse(){const p=await this.tokenizer.readToken(l.ChunkHeader64);if(p.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const f=(await this.tokenizer.readToken(s.FourCcToken)).trim();switch(f){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${f}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(p.chunkSize-BigInt(s.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${f}`)}}async readFmt8Chunks(p){for(;p>=l.ChunkHeader64.len;){const f=await this.tokenizer.readToken(l.ChunkHeader64);u(`Chunk id=${f.chunkID}`),await this.readData(f),p-=BigInt(l.ChunkHeader64.len)+f.chunkSize}}async readData(p){u(`Reading data of chunk[ID=${p.chunkID}, size=${p.chunkSize}]`);const f=this.tokenizer.position;switch(p.chunkID.trim()){case"FVER":const g=await this.tokenizer.readToken(e.UINT32_LE);u(`DSDIFF version=${g}`);break;case"PROP":if(await this.tokenizer.readToken(s.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(p.chunkSize-BigInt(s.FourCcToken.len));break;case"ID3":const v=await this.tokenizer.readToken(new e.Uint8ArrayType(Number(p.chunkSize))),b=i.fromBuffer(v);await new c.ID3v2Parser().parse(this.metadata,b,this.options);break;default:u(`Ignore chunk[ID=${p.chunkID}, size=${p.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(p.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const m=p.chunkSize-BigInt(this.tokenizer.position-f);m>0&&(u(`After Parsing chunk, remaining ${m} bytes`),await this.tokenizer.ignore(Number(m)))}async handleSoundPropertyChunks(p){for(u(`Parsing sound-property-chunks, remainingSize=${p}`);p>0;){const f=await this.tokenizer.readToken(l.ChunkHeader64);u(`Sound-property-chunk[ID=${f.chunkID}, size=${f.chunkSize}]`);const m=this.tokenizer.position;switch(f.chunkID.trim()){case"FS":const E=await this.tokenizer.readToken(e.UINT32_BE);this.metadata.setFormat("sampleRate",E);break;case"CHNL":const v=await this.tokenizer.readToken(e.UINT16_BE);this.metadata.setFormat("numberOfChannels",v),await this.handleChannelChunks(f.chunkSize-BigInt(e.UINT16_BE.len));break;case"CMPR":const b=(await this.tokenizer.readToken(s.FourCcToken)).trim(),y=await this.tokenizer.readToken(e.UINT8),w=await this.tokenizer.readToken(new e.StringType(y,"ascii"));b==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${b} (${w})`);break;case"ABSS":const T=await this.tokenizer.readToken(e.UINT16_BE),k=await this.tokenizer.readToken(e.UINT8),_=await this.tokenizer.readToken(e.UINT8),P=await this.tokenizer.readToken(e.UINT32_BE);u(`ABSS ${T}:${k}:${_}.${P}`);break;case"LSCO":const R=await this.tokenizer.readToken(e.UINT16_BE);u(`LSCO lsConfig=${R}`);break;case"COMT":default:u(`Unknown sound-property-chunk[ID=${f.chunkID}, size=${f.chunkSize}]`),await this.tokenizer.ignore(Number(f.chunkSize))}const g=f.chunkSize-BigInt(this.tokenizer.position-m);g>0&&(u(`After Parsing sound-property-chunk ${f.chunkSize}, remaining ${g} bytes`),await this.tokenizer.ignore(Number(g))),p-=BigInt(l.ChunkHeader64.len)+f.chunkSize,u(`Parsing sound-property-chunks, remainingSize=${p}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const f=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",f)}}async handleChannelChunks(p){u(`Parsing channel-chunks, remainingSize=${p}`);const f=[];for(;p>=s.FourCcToken.len;){const m=await this.tokenizer.readToken(s.FourCcToken);u(`Channel[ID=${m}]`),f.push(m),p-=BigInt(s.FourCcToken.len)}return u(`Channels: ${f.join(", ")}`),f}};return DsdiffParser.DsdiffParser=h,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const e=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:e.DataType.uint},17143:{name:"ebmlReadVersion",value:e.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:e.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:e.DataType.uint},17026:{name:"docType",value:e.DataType.string},17031:{name:"docTypeVersion",value:e.DataType.uint},17029:{name:"docTypeReadVersion",value:e.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:e.DataType.binary},21420:{name:"seekPosition",value:e.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:e.DataType.uid},29572:{name:"filename",value:e.DataType.string},3979555:{name:"prevUID",value:e.DataType.uid},3965867:{name:"prevFilename",value:e.DataType.string},4110627:{name:"nextUID",value:e.DataType.uid},4096955:{name:"nextFilename",value:e.DataType.string},2807729:{name:"timecodeScale",value:e.DataType.uint},17545:{name:"duration",value:e.DataType.float},17505:{name:"dateUTC",value:e.DataType.uint},31657:{name:"title",value:e.DataType.string},19840:{name:"muxingApp",value:e.DataType.string},22337:{name:"writingApp",value:e.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:e.DataType.uid},163:{name:"unknown",value:e.DataType.binary},167:{name:"position",value:e.DataType.uid},171:{name:"prevSize",value:e.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:e.DataType.uint},29637:{name:"uid",value:e.DataType.uid},131:{name:"trackType",value:e.DataType.uint},185:{name:"flagEnabled",value:e.DataType.bool},136:{name:"flagDefault",value:e.DataType.bool},21930:{name:"flagForced",value:e.DataType.bool},156:{name:"flagLacing",value:e.DataType.bool},28135:{name:"minCache",value:e.DataType.uint},28136:{name:"maxCache",value:e.DataType.uint},2352003:{name:"defaultDuration",value:e.DataType.uint},2306383:{name:"timecodeScale",value:e.DataType.float},21358:{name:"name",value:e.DataType.string},2274716:{name:"language",value:e.DataType.string},134:{name:"codecID",value:e.DataType.string},25506:{name:"codecPrivate",value:e.DataType.binary},2459272:{name:"codecName",value:e.DataType.string},3839639:{name:"codecSettings",value:e.DataType.string},3883072:{name:"codecInfoUrl",value:e.DataType.string},2536e3:{name:"codecDownloadUrl",value:e.DataType.string},170:{name:"codecDecodeAll",value:e.DataType.bool},28587:{name:"trackOverlay",value:e.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:e.DataType.bool},21432:{name:"stereoMode",value:e.DataType.uint},176:{name:"pixelWidth",value:e.DataType.uint},186:{name:"pixelHeight",value:e.DataType.uint},21680:{name:"displayWidth",value:e.DataType.uint},21690:{name:"displayHeight",value:e.DataType.uint},21683:{name:"aspectRatioType",value:e.DataType.uint},3061028:{name:"colourSpace",value:e.DataType.uint},3126563:{name:"gammaValue",value:e.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:e.DataType.float},30901:{name:"outputSamplingFrequency",value:e.DataType.float},159:{name:"channels",value:e.DataType.uint},148:{name:"channels",value:e.DataType.uint},32123:{name:"channelPositions",value:e.DataType.binary},25188:{name:"bitDepth",value:e.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:e.DataType.uint},20530:{name:"scope",value:e.DataType.bool},20531:{name:"type",value:e.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:e.DataType.uint},16981:{name:"contentCompSettings",value:e.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:e.DataType.uint},18402:{name:"contentEncKeyID",value:e.DataType.binary},18403:{name:"contentSignature ",value:e.DataType.binary},18404:{name:"ContentSigKeyID  ",value:e.DataType.binary},18405:{name:"contentSigAlgo ",value:e.DataType.uint},18406:{name:"contentSigHashAlgo ",value:e.DataType.uint}}},25188:{name:"bitDepth",value:e.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:e.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:e.DataType.uint},241:{name:"clusterPosition",value:e.DataType.uint},21368:{name:"blockNumber",value:e.DataType.uint},234:{name:"codecState",value:e.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:e.DataType.uint},151:{name:"cluster",value:e.DataType.uint},21343:{name:"number",value:e.DataType.uint},235:{name:"codecState",value:e.DataType.uint}}},240:{name:"relativePosition",value:e.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:e.DataType.string},18030:{name:"name",value:e.DataType.string},18016:{name:"mimeType",value:e.DataType.string},18012:{name:"data",value:e.DataType.binary},18094:{name:"uid",value:e.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:e.DataType.uid},145:{name:"timeStart",value:e.DataType.uint},146:{name:"timeEnd",value:e.DataType.uid},152:{name:"hidden",value:e.DataType.bool},17816:{name:"enabled",value:e.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:e.DataType.uid},128:{name:"display",container:{133:{name:"string",value:e.DataType.string},17276:{name:"language ",value:e.DataType.string},17278:{name:"country ",value:e.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:e.DataType.uid},25540:{name:"tagChapterUID",value:e.DataType.uint},25542:{name:"tagAttachmentUID",value:e.DataType.uid},25546:{name:"targetType",value:e.DataType.string},26826:{name:"targetTypeValue",value:e.DataType.uint},25545:{name:"tagEditionUID",value:e.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:e.DataType.string},17543:{name:"string",value:e.DataType.string},17541:{name:"binary",value:e.DataType.binary},17530:{name:"language",value:e.DataType.string},17531:{name:"languageIETF",value:e.DataType.string},17540:{name:"default",value:e.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const e=requireLib$2(),r=requireBrowser$3(),i=requireBasicParser(),s=requireTypes(),a=requireMatroskaDtd(),c=(0,r.default)("music-metadata:parser:matroska");let l=class extends i.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(s.DataType.uint,h=>this.readUint(h)),this.parserMap.set(s.DataType.string,h=>this.readString(h)),this.parserMap.set(s.DataType.binary,h=>this.readBuffer(h)),this.parserMap.set(s.DataType.uid,async h=>await this.readUint(h)===1),this.parserMap.set(s.DataType.bool,h=>this.readFlag(h)),this.parserMap.set(s.DataType.float,h=>this.readFloat(h))}init(h,d,p){return super.init(h,d,p),this}async parse(){const h=await this.parseContainer(a.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${h.ebml.docType}`),h.segment){const d=h.segment.info;if(d){const f=d.timecodeScale?d.timecodeScale:1e6;if(typeof d.duration=="number"){const m=d.duration*f/1e9;this.addTag("segment:title",d.title),this.metadata.setFormat("duration",m)}}const p=h.segment.tracks;if(p&&p.entries){p.entries.forEach(m=>{const g={codecName:m.codecID.replace("A_","").replace("V_",""),codecSettings:m.codecSettings,flagDefault:m.flagDefault,flagLacing:m.flagLacing,flagEnabled:m.flagEnabled,language:m.language,name:m.name,type:m.trackType,audio:m.audio,video:m.video};this.metadata.addStreamInfo(g)});const f=p.entries.filter(m=>m.trackType===s.TrackType.audio.valueOf()).reduce((m,g)=>!m||!m.flagDefault&&g.flagDefault||g.trackNumber&&g.trackNumber<m.trackNumber?g:m,null);f&&(this.metadata.setFormat("codec",f.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",f.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",f.audio.channels)),h.segment.tags&&h.segment.tags.tag.forEach(m=>{const g=m.target,E=g?.targetTypeValue?s.TargetType[g.targetTypeValue]:g?.targetType?g.targetType:"track";m.simpleTags.forEach(v=>{const b=v.string?v.string:v.binary;this.addTag(`${E}:${v.name}`,b)})}),h.segment.attachments&&h.segment.attachments.attachedFiles.filter(m=>m.mimeType.startsWith("image/")).map(m=>({data:m.data,format:m.mimeType,description:m.description,name:m.name})).forEach(m=>{this.addTag("picture",m)})}}}async parseContainer(h,d,p){const f={};for(;this.tokenizer.position<d;){let m;try{m=await this.readElement()}catch(E){if(E.message==="End-Of-Stream")break;throw E}const g=h[m.id];if(g)if(c(`Element: name=${g.name}, container=${!!g.container}`),g.container){const E=await this.parseContainer(g.container,m.len>=0?this.tokenizer.position+m.len:-1,p.concat([g.name]));g.multiple?(f[g.name]||(f[g.name]=[]),f[g.name].push(E)):f[g.name]=E}else f[g.name]=await this.parserMap.get(g.value)(m);else switch(m.id){case 236:this.padding+=m.len,await this.tokenizer.ignore(m.len);break;default:c(`parseEbml: path=${p.join("/")}, unknown element: id=${m.id.toString(16)}`),this.padding+=m.len,await this.tokenizer.ignore(m.len)}}return f}async readVintData(h){const d=await this.tokenizer.peekNumber(e.UINT8);let p=128,f=1;for(;(d&p)===0;){if(f>h)throw new Error("VINT value exceeding maximum size");++f,p>>=1}const m=Buffer.alloc(f);return await this.tokenizer.readBuffer(m),m}async readElement(){const h=await this.readVintData(this.ebmlMaxIDLength),d=await this.readVintData(this.ebmlMaxSizeLength);d[0]^=128>>d.length-1;const p=Math.min(6,d.length);return{id:h.readUIntBE(0,h.length),len:d.readUIntBE(d.length-p,p)}}isMaxValue(h){if(h.length===this.ebmlMaxSizeLength){for(let d=1;d<this.ebmlMaxSizeLength;++d)if(h[d]!==255)return!1;return!0}return!1}async readFloat(h){switch(h.len){case 0:return 0;case 4:return this.tokenizer.readNumber(e.Float32_BE);case 8:return this.tokenizer.readNumber(e.Float64_BE);case 10:return this.tokenizer.readNumber(e.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${h.len}`)}}async readFlag(h){return await this.readUint(h)===1}async readUint(h){const d=await this.readBuffer(h),p=Math.min(6,h.len);return d.readUIntBE(h.len-p,p)}async readString(h){return(await this.tokenizer.readToken(new e.StringType(h.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(h){const d=Buffer.alloc(h.len);return await this.tokenizer.readBuffer(d),d}addTag(h,d){this.metadata.addTag("matroska",h,d)}};return MatroskaParser.MatroskaParser=l,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const e=requireCore$1(),r=requireContentType(),i=requireMediaTyper(),s=requireBrowser$3(),a=requireMetadataCollector(),c=requireAiffParser(),l=requireAPEv2Parser(),u=requireAsfParser(),h=requireFlacParser(),d=requireMP4Parser(),p=requireMpegParser(),f=requireMusepack(),m=requireOggParser(),g=requireWaveParser(),E=requireWavPackParser(),v=requireDsfParser(),b=requireDsdiffParser(),y=requireMatroskaParser(),w=(0,s.default)("music-metadata:parser:factory");function T(P){const R=r.parse(P),I=i.parse(R.type);return{type:I.type,subtype:I.subtype,suffix:I.suffix,parameters:R.parameters}}ParserFactory.parseHttpContentType=T;async function k(P,R,I={}){const H=await _.loadParser(R),B=new a.MetadataCollector(I);return await H.init(B,P,I).parse(),B.toCommonMetadata()}let _=class wi{static async parseOnContentType(R,I){const{mimeType:H,path:B,url:O}=await R.fileInfo,V=wi.getParserIdForMimeType(H)||wi.getParserIdForExtension(B)||wi.getParserIdForExtension(O);return V||w("No parser found for MIME-type / extension: "+H),this.parse(R,V,I)}static async parse(R,I,H){if(!I){w("Guess parser on content...");const B=Buffer.alloc(4100);if(await R.peekBuffer(B,{mayBeLess:!0}),R.fileInfo.path&&(I=this.getParserIdForExtension(R.fileInfo.path)),!I){const O=await e.fromBuffer(B);if(!O)throw new Error("Failed to determine audio format");if(w(`Guessed file type is mime=${O.mime}, extension=${O.ext}`),I=wi.getParserIdForMimeType(O.mime),!I)throw new Error("Guessed MIME-type not supported: "+O.mime)}}return k(R,I,H)}static getParserIdForExtension(R){if(!R)return;switch(this.getExtension(R).toLocaleLowerCase()||R){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(R){switch(R){case"aiff":return new c.AIFFParser;case"adts":case"mpeg":return new p.MpegParser;case"apev2":return new l.APEv2Parser;case"asf":return new u.AsfParser;case"dsf":return new v.DsfParser;case"dsdiff":return new b.DsdiffParser;case"flac":return new h.FlacParser;case"mp4":return new d.MP4Parser;case"musepack":return new f.default;case"ogg":return new m.OggParser;case"riff":return new g.WaveParser;case"wavpack":return new E.WavPackParser;case"matroska":return new y.MatroskaParser;default:throw new Error(`Unknown parser type: ${R}`)}}static getExtension(R){const I=R.lastIndexOf(".");return I===-1?"":R.slice(I)}static getParserIdForMimeType(R){let I;try{I=T(R)}catch{w(`Invalid HTTP Content-Type header value: ${R}`);return}const H=I.subtype.indexOf("x-")===0?I.subtype.substring(2):I.subtype;switch(I.type){case"audio":switch(H){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(H){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(H){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=_,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let e=class{constructor(i){this.uint8Array=i,this.fileSize=i.length}async randomRead(i,s,a,c){return i.set(this.uint8Array.subarray(c,c+a),s),a}};return RandomUint8ArrayReader.RandomUint8ArrayReader=e,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLyricsHeaderLength=e.endTag2=void 0,e.endTag2="LYRICS200";async function r(i){if(i.fileSize>=143){const s=Buffer.alloc(15);await i.randomRead(s,0,s.length,i.fileSize-143);const a=s.toString("binary");if(a.substr(6)===e.endTag2)return parseInt(a.substr(0,6),10)+15}return 0}e.getLyricsHeaderLength=r})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const e=requireCore$2(),r=requireParserFactory(),i=requireRandomUint8ArrayReader(),s=requireAPEv2Parser(),a=requireID3v1Parser(),c=requireLyrics3();function l(g,E,v={}){return h(e.fromStream(g,typeof E=="string"?{mimeType:E}:E),v)}core$2.parseStream=l;async function u(g,E,v={}){const b=new i.RandomUint8ArrayReader(g);await m(b,v);const y=e.fromBuffer(g,typeof E=="string"?{mimeType:E}:E);return h(y,v)}core$2.parseBuffer=u;function h(g,E){return r.ParserFactory.parseOnContentType(g,E)}core$2.parseFromTokenizer=h;function d(g){const E={};for(const v of g)(E[v.id]=E[v.id]||[]).push(v.value);return E}core$2.orderTags=d;function p(g){return g===void 0?0:1+Math.round(g*4)}core$2.ratingToStars=p;function f(g){return g?g.reduce((E,v)=>v.name&&v.name.toLowerCase()in["front","cover","cover (front)"]?v:E):null}core$2.selectCover=f;async function m(g,E={}){let v=g.fileSize;if(await(0,a.hasID3v1Header)(g)){v-=128;const b=await(0,c.getLyricsHeaderLength)(g);v-=b}E.apeHeader=await s.APEv2Parser.findApeFooterOffset(g,v)}return core$2.scanAppendingHeaders=m,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=u,base64Js.toByteArray=d,base64Js.fromByteArray=m;for(var e=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)e[a]=s[a],r[s.charCodeAt(a)]=a;r[45]=62,r[95]=63;function l(g){var E=g.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=E);var b=v===E?0:4-v%4;return[v,b]}function u(g){var E=l(g),v=E[0],b=E[1];return(v+b)*3/4-b}function h(g,E,v){return(E+v)*3/4-v}function d(g){var E,v=l(g),b=v[0],y=v[1],w=new i(h(g,b,y)),T=0,k=y>0?b-4:b,_;for(_=0;_<k;_+=4)E=r[g.charCodeAt(_)]<<18|r[g.charCodeAt(_+1)]<<12|r[g.charCodeAt(_+2)]<<6|r[g.charCodeAt(_+3)],w[T++]=E>>16&255,w[T++]=E>>8&255,w[T++]=E&255;return y===2&&(E=r[g.charCodeAt(_)]<<2|r[g.charCodeAt(_+1)]>>4,w[T++]=E&255),y===1&&(E=r[g.charCodeAt(_)]<<10|r[g.charCodeAt(_+1)]<<4|r[g.charCodeAt(_+2)]>>2,w[T++]=E>>8&255,w[T++]=E&255),w}function p(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function f(g,E,v){for(var b,y=[],w=E;w<v;w+=3)b=(g[w]<<16&16711680)+(g[w+1]<<8&65280)+(g[w+2]&255),y.push(p(b));return y.join("")}function m(g){for(var E,v=g.length,b=v%3,y=[],w=16383,T=0,k=v-b;T<k;T+=w)y.push(f(g,T,T+w>k?k:T+w));return b===1?(E=g[v-1],y.push(e[E>>2]+e[E<<4&63]+"==")):b===2&&(E=(g[v-2]<<8)+g[v-1],y.push(e[E>>10]+e[E>>4&63]+e[E<<2&63]+"=")),y.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(e){const r=requireBase64Js(),i=requireIeee754(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const D=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(D,j),D.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(D){if(D>a)throw new RangeError('The value "'+D+'" is invalid for option "size"');const j=new Uint8Array(D);return Object.setPrototypeOf(j,u.prototype),j}function u(D,j,A){if(typeof D=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(D)}return h(D,j,A)}u.poolSize=8192;function h(D,j,A){if(typeof D=="string")return m(D,j);if(ArrayBuffer.isView(D))return E(D);if(D==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(Te(D,ArrayBuffer)||D&&Te(D.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(D,SharedArrayBuffer)||D&&Te(D.buffer,SharedArrayBuffer)))return v(D,j,A);if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=D.valueOf&&D.valueOf();if(U!=null&&U!==D)return u.from(U,j,A);const te=b(D);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return u.from(D[Symbol.toPrimitive]("string"),j,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}u.from=function(D,j,A){return h(D,j,A)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function d(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function p(D,j,A){return d(D),D<=0?l(D):j!==void 0?typeof A=="string"?l(D).fill(j,A):l(D).fill(j):l(D)}u.alloc=function(D,j,A){return p(D,j,A)};function f(D){return d(D),l(D<0?0:y(D)|0)}u.allocUnsafe=function(D){return f(D)},u.allocUnsafeSlow=function(D){return f(D)};function m(D,j){if((typeof j!="string"||j==="")&&(j="utf8"),!u.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const A=T(D,j)|0;let U=l(A);const te=U.write(D,j);return te!==A&&(U=U.slice(0,te)),U}function g(D){const j=D.length<0?0:y(D.length)|0,A=l(j);for(let U=0;U<j;U+=1)A[U]=D[U]&255;return A}function E(D){if(Te(D,Uint8Array)){const j=new Uint8Array(D);return v(j.buffer,j.byteOffset,j.byteLength)}return g(D)}function v(D,j,A){if(j<0||D.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(D.byteLength<j+(A||0))throw new RangeError('"length" is outside of buffer bounds');let U;return j===void 0&&A===void 0?U=new Uint8Array(D):A===void 0?U=new Uint8Array(D,j):U=new Uint8Array(D,j,A),Object.setPrototypeOf(U,u.prototype),U}function b(D){if(u.isBuffer(D)){const j=y(D.length)|0,A=l(j);return A.length===0||D.copy(A,0,0,j),A}if(D.length!==void 0)return typeof D.length!="number"||$e(D.length)?l(0):g(D);if(D.type==="Buffer"&&Array.isArray(D.data))return g(D.data)}function y(D){if(D>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return D|0}function w(D){return+D!=D&&(D=0),u.alloc(+D)}u.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==u.prototype},u.compare=function(j,A){if(Te(j,Uint8Array)&&(j=u.from(j,j.offset,j.byteLength)),Te(A,Uint8Array)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(j)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===A)return 0;let U=j.length,te=A.length;for(let he=0,ke=Math.min(U,te);he<ke;++he)if(j[he]!==A[he]){U=j[he],te=A[he];break}return U<te?-1:te<U?1:0},u.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(j,A){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return u.alloc(0);let U;if(A===void 0)for(A=0,U=0;U<j.length;++U)A+=j[U].length;const te=u.allocUnsafe(A);let he=0;for(U=0;U<j.length;++U){let ke=j[U];if(Te(ke,Uint8Array))he+ke.length>te.length?(u.isBuffer(ke)||(ke=u.from(ke)),ke.copy(te,he)):Uint8Array.prototype.set.call(te,ke,he);else if(u.isBuffer(ke))ke.copy(te,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=ke.length}return te};function T(D,j){if(u.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||Te(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);const A=D.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&A===0)return 0;let te=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return Re(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return Se(D).length;default:if(te)return U?-1:Re(D).length;j=(""+j).toLowerCase(),te=!0}}u.byteLength=T;function k(D,j,A){let U=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,j>>>=0,A<=j))return"";for(D||(D="utf8");;)switch(D){case"hex":return fe(this,j,A);case"utf8":case"utf-8":return ue(this,j,A);case"ascii":return we(this,j,A);case"latin1":case"binary":return W(this,j,A);case"base64":return q(this,j,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,j,A);default:if(U)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),U=!0}}u.prototype._isBuffer=!0;function _(D,j,A){const U=D[j];D[j]=D[A],D[A]=U}u.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<j;A+=2)_(this,A,A+1);return this},u.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<j;A+=4)_(this,A,A+3),_(this,A+1,A+2);return this},u.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<j;A+=8)_(this,A,A+7),_(this,A+1,A+6),_(this,A+2,A+5),_(this,A+3,A+4);return this},u.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?ue(this,0,j):k.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(j){if(!u.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:u.compare(this,j)===0},u.prototype.inspect=function(){let j="";const A=e.INSPECT_MAX_BYTES;return j=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(j+=" ... "),"<Buffer "+j+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(j,A,U,te,he){if(Te(j,Uint8Array)&&(j=u.from(j,j.offset,j.byteLength)),!u.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(A===void 0&&(A=0),U===void 0&&(U=j?j.length:0),te===void 0&&(te=0),he===void 0&&(he=this.length),A<0||U>j.length||te<0||he>this.length)throw new RangeError("out of range index");if(te>=he&&A>=U)return 0;if(te>=he)return-1;if(A>=U)return 1;if(A>>>=0,U>>>=0,te>>>=0,he>>>=0,this===j)return 0;let ke=he-te,ct=U-A;const bt=Math.min(ke,ct),ht=this.slice(te,he),yt=j.slice(A,U);for(let mt=0;mt<bt;++mt)if(ht[mt]!==yt[mt]){ke=ht[mt],ct=yt[mt];break}return ke<ct?-1:ct<ke?1:0};function P(D,j,A,U,te){if(D.length===0)return-1;if(typeof A=="string"?(U=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,$e(A)&&(A=te?0:D.length-1),A<0&&(A=D.length+A),A>=D.length){if(te)return-1;A=D.length-1}else if(A<0)if(te)A=0;else return-1;if(typeof j=="string"&&(j=u.from(j,U)),u.isBuffer(j))return j.length===0?-1:R(D,j,A,U,te);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(D,j,A):Uint8Array.prototype.lastIndexOf.call(D,j,A):R(D,[j],A,U,te);throw new TypeError("val must be string, number or Buffer")}function R(D,j,A,U,te){let he=1,ke=D.length,ct=j.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(D.length<2||j.length<2)return-1;he=2,ke/=2,ct/=2,A/=2}function bt(yt,mt){return he===1?yt[mt]:yt.readUInt16BE(mt*he)}let ht;if(te){let yt=-1;for(ht=A;ht<ke;ht++)if(bt(D,ht)===bt(j,yt===-1?0:ht-yt)){if(yt===-1&&(yt=ht),ht-yt+1===ct)return yt*he}else yt!==-1&&(ht-=ht-yt),yt=-1}else for(A+ct>ke&&(A=ke-ct),ht=A;ht>=0;ht--){let yt=!0;for(let mt=0;mt<ct;mt++)if(bt(D,ht+mt)!==bt(j,mt)){yt=!1;break}if(yt)return ht}return-1}u.prototype.includes=function(j,A,U){return this.indexOf(j,A,U)!==-1},u.prototype.indexOf=function(j,A,U){return P(this,j,A,U,!0)},u.prototype.lastIndexOf=function(j,A,U){return P(this,j,A,U,!1)};function I(D,j,A,U){A=Number(A)||0;const te=D.length-A;U?(U=Number(U),U>te&&(U=te)):U=te;const he=j.length;U>he/2&&(U=he/2);let ke;for(ke=0;ke<U;++ke){const ct=parseInt(j.substr(ke*2,2),16);if($e(ct))return ke;D[A+ke]=ct}return ke}function H(D,j,A,U){return Pe(Re(j,D.length-A),D,A,U)}function B(D,j,A,U){return Pe(je(j),D,A,U)}function O(D,j,A,U){return Pe(Se(j),D,A,U)}function V(D,j,A,U){return Pe(J(j,D.length-A),D,A,U)}u.prototype.write=function(j,A,U,te){if(A===void 0)te="utf8",U=this.length,A=0;else if(U===void 0&&typeof A=="string")te=A,U=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(U)?(U=U>>>0,te===void 0&&(te="utf8")):(te=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-A;if((U===void 0||U>he)&&(U=he),j.length>0&&(U<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ke=!1;for(;;)switch(te){case"hex":return I(this,j,A,U);case"utf8":case"utf-8":return H(this,j,A,U);case"ascii":case"latin1":case"binary":return B(this,j,A,U);case"base64":return O(this,j,A,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,j,A,U);default:if(ke)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ke=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(D,j,A){return j===0&&A===D.length?r.fromByteArray(D):r.fromByteArray(D.slice(j,A))}function ue(D,j,A){A=Math.min(D.length,A);const U=[];let te=j;for(;te<A;){const he=D[te];let ke=null,ct=he>239?4:he>223?3:he>191?2:1;if(te+ct<=A){let bt,ht,yt,mt;switch(ct){case 1:he<128&&(ke=he);break;case 2:bt=D[te+1],(bt&192)===128&&(mt=(he&31)<<6|bt&63,mt>127&&(ke=mt));break;case 3:bt=D[te+1],ht=D[te+2],(bt&192)===128&&(ht&192)===128&&(mt=(he&15)<<12|(bt&63)<<6|ht&63,mt>2047&&(mt<55296||mt>57343)&&(ke=mt));break;case 4:bt=D[te+1],ht=D[te+2],yt=D[te+3],(bt&192)===128&&(ht&192)===128&&(yt&192)===128&&(mt=(he&15)<<18|(bt&63)<<12|(ht&63)<<6|yt&63,mt>65535&&mt<1114112&&(ke=mt))}}ke===null?(ke=65533,ct=1):ke>65535&&(ke-=65536,U.push(ke>>>10&1023|55296),ke=56320|ke&1023),U.push(ke),te+=ct}return ce(U)}const K=4096;function ce(D){const j=D.length;if(j<=K)return String.fromCharCode.apply(String,D);let A="",U=0;for(;U<j;)A+=String.fromCharCode.apply(String,D.slice(U,U+=K));return A}function we(D,j,A){let U="";A=Math.min(D.length,A);for(let te=j;te<A;++te)U+=String.fromCharCode(D[te]&127);return U}function W(D,j,A){let U="";A=Math.min(D.length,A);for(let te=j;te<A;++te)U+=String.fromCharCode(D[te]);return U}function fe(D,j,A){const U=D.length;(!j||j<0)&&(j=0),(!A||A<0||A>U)&&(A=U);let te="";for(let he=j;he<A;++he)te+=gt[D[he]];return te}function F(D,j,A){const U=D.slice(j,A);let te="";for(let he=0;he<U.length-1;he+=2)te+=String.fromCharCode(U[he]+U[he+1]*256);return te}u.prototype.slice=function(j,A){const U=this.length;j=~~j,A=A===void 0?U:~~A,j<0?(j+=U,j<0&&(j=0)):j>U&&(j=U),A<0?(A+=U,A<0&&(A=0)):A>U&&(A=U),A<j&&(A=j);const te=this.subarray(j,A);return Object.setPrototypeOf(te,u.prototype),te};function L(D,j,A){if(D%1!==0||D<0)throw new RangeError("offset is not uint");if(D+j>A)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(j,A,U){j=j>>>0,A=A>>>0,U||L(j,A,this.length);let te=this[j],he=1,ke=0;for(;++ke<A&&(he*=256);)te+=this[j+ke]*he;return te},u.prototype.readUintBE=u.prototype.readUIntBE=function(j,A,U){j=j>>>0,A=A>>>0,U||L(j,A,this.length);let te=this[j+--A],he=1;for(;A>0&&(he*=256);)te+=this[j+--A]*he;return te},u.prototype.readUint8=u.prototype.readUInt8=function(j,A){return j=j>>>0,A||L(j,1,this.length),this[j]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(j,A){return j=j>>>0,A||L(j,2,this.length),this[j]|this[j+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(j,A){return j=j>>>0,A||L(j,2,this.length),this[j]<<8|this[j+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(j,A){return j=j>>>0,A||L(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(j,A){return j=j>>>0,A||L(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},u.prototype.readBigUInt64LE=ft(function(j){j=j>>>0,G(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&ee(j,this.length-8);const te=A+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,he=this[++j]+this[++j]*2**8+this[++j]*2**16+U*2**24;return BigInt(te)+(BigInt(he)<<BigInt(32))}),u.prototype.readBigUInt64BE=ft(function(j){j=j>>>0,G(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&ee(j,this.length-8);const te=A*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],he=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+U;return(BigInt(te)<<BigInt(32))+BigInt(he)}),u.prototype.readIntLE=function(j,A,U){j=j>>>0,A=A>>>0,U||L(j,A,this.length);let te=this[j],he=1,ke=0;for(;++ke<A&&(he*=256);)te+=this[j+ke]*he;return he*=128,te>=he&&(te-=Math.pow(2,8*A)),te},u.prototype.readIntBE=function(j,A,U){j=j>>>0,A=A>>>0,U||L(j,A,this.length);let te=A,he=1,ke=this[j+--te];for(;te>0&&(he*=256);)ke+=this[j+--te]*he;return he*=128,ke>=he&&(ke-=Math.pow(2,8*A)),ke},u.prototype.readInt8=function(j,A){return j=j>>>0,A||L(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},u.prototype.readInt16LE=function(j,A){j=j>>>0,A||L(j,2,this.length);const U=this[j]|this[j+1]<<8;return U&32768?U|4294901760:U},u.prototype.readInt16BE=function(j,A){j=j>>>0,A||L(j,2,this.length);const U=this[j+1]|this[j]<<8;return U&32768?U|4294901760:U},u.prototype.readInt32LE=function(j,A){return j=j>>>0,A||L(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},u.prototype.readInt32BE=function(j,A){return j=j>>>0,A||L(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},u.prototype.readBigInt64LE=ft(function(j){j=j>>>0,G(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&ee(j,this.length-8);const te=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(U<<24);return(BigInt(te)<<BigInt(32))+BigInt(A+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),u.prototype.readBigInt64BE=ft(function(j){j=j>>>0,G(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&ee(j,this.length-8);const te=(A<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(te)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+U)}),u.prototype.readFloatLE=function(j,A){return j=j>>>0,A||L(j,4,this.length),i.read(this,j,!0,23,4)},u.prototype.readFloatBE=function(j,A){return j=j>>>0,A||L(j,4,this.length),i.read(this,j,!1,23,4)},u.prototype.readDoubleLE=function(j,A){return j=j>>>0,A||L(j,8,this.length),i.read(this,j,!0,52,8)},u.prototype.readDoubleBE=function(j,A){return j=j>>>0,A||L(j,8,this.length),i.read(this,j,!1,52,8)};function Q(D,j,A,U,te,he){if(!u.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>te||j<he)throw new RangeError('"value" argument is out of bounds');if(A+U>D.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(j,A,U,te){if(j=+j,A=A>>>0,U=U>>>0,!te){const ct=Math.pow(2,8*U)-1;Q(this,j,A,U,ct,0)}let he=1,ke=0;for(this[A]=j&255;++ke<U&&(he*=256);)this[A+ke]=j/he&255;return A+U},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(j,A,U,te){if(j=+j,A=A>>>0,U=U>>>0,!te){const ct=Math.pow(2,8*U)-1;Q(this,j,A,U,ct,0)}let he=U-1,ke=1;for(this[A+he]=j&255;--he>=0&&(ke*=256);)this[A+he]=j/ke&255;return A+U},u.prototype.writeUint8=u.prototype.writeUInt8=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,1,255,0),this[A]=j&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,2,65535,0),this[A]=j&255,this[A+1]=j>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,2,65535,0),this[A]=j>>>8,this[A+1]=j&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,4,4294967295,0),this[A+3]=j>>>24,this[A+2]=j>>>16,this[A+1]=j>>>8,this[A]=j&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,4,4294967295,0),this[A]=j>>>24,this[A+1]=j>>>16,this[A+2]=j>>>8,this[A+3]=j&255,A+4};function se(D,j,A,U,te){ae(j,U,te,D,A,7);let he=Number(j&BigInt(4294967295));D[A++]=he,he=he>>8,D[A++]=he,he=he>>8,D[A++]=he,he=he>>8,D[A++]=he;let ke=Number(j>>BigInt(32)&BigInt(4294967295));return D[A++]=ke,ke=ke>>8,D[A++]=ke,ke=ke>>8,D[A++]=ke,ke=ke>>8,D[A++]=ke,A}function oe(D,j,A,U,te){ae(j,U,te,D,A,7);let he=Number(j&BigInt(4294967295));D[A+7]=he,he=he>>8,D[A+6]=he,he=he>>8,D[A+5]=he,he=he>>8,D[A+4]=he;let ke=Number(j>>BigInt(32)&BigInt(4294967295));return D[A+3]=ke,ke=ke>>8,D[A+2]=ke,ke=ke>>8,D[A+1]=ke,ke=ke>>8,D[A]=ke,A+8}u.prototype.writeBigUInt64LE=ft(function(j,A=0){return se(this,j,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ft(function(j,A=0){return oe(this,j,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(j,A,U,te){if(j=+j,A=A>>>0,!te){const bt=Math.pow(2,8*U-1);Q(this,j,A,U,bt-1,-bt)}let he=0,ke=1,ct=0;for(this[A]=j&255;++he<U&&(ke*=256);)j<0&&ct===0&&this[A+he-1]!==0&&(ct=1),this[A+he]=(j/ke>>0)-ct&255;return A+U},u.prototype.writeIntBE=function(j,A,U,te){if(j=+j,A=A>>>0,!te){const bt=Math.pow(2,8*U-1);Q(this,j,A,U,bt-1,-bt)}let he=U-1,ke=1,ct=0;for(this[A+he]=j&255;--he>=0&&(ke*=256);)j<0&&ct===0&&this[A+he+1]!==0&&(ct=1),this[A+he]=(j/ke>>0)-ct&255;return A+U},u.prototype.writeInt8=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,1,127,-128),j<0&&(j=255+j+1),this[A]=j&255,A+1},u.prototype.writeInt16LE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,2,32767,-32768),this[A]=j&255,this[A+1]=j>>>8,A+2},u.prototype.writeInt16BE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,2,32767,-32768),this[A]=j>>>8,this[A+1]=j&255,A+2},u.prototype.writeInt32LE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,4,2147483647,-2147483648),this[A]=j&255,this[A+1]=j>>>8,this[A+2]=j>>>16,this[A+3]=j>>>24,A+4},u.prototype.writeInt32BE=function(j,A,U){return j=+j,A=A>>>0,U||Q(this,j,A,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[A]=j>>>24,this[A+1]=j>>>16,this[A+2]=j>>>8,this[A+3]=j&255,A+4},u.prototype.writeBigInt64LE=ft(function(j,A=0){return se(this,j,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ft(function(j,A=0){return oe(this,j,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(D,j,A,U,te,he){if(A+U>D.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function ve(D,j,A,U,te){return j=+j,A=A>>>0,te||ge(D,j,A,4),i.write(D,j,A,U,23,4),A+4}u.prototype.writeFloatLE=function(j,A,U){return ve(this,j,A,!0,U)},u.prototype.writeFloatBE=function(j,A,U){return ve(this,j,A,!1,U)};function _e(D,j,A,U,te){return j=+j,A=A>>>0,te||ge(D,j,A,8),i.write(D,j,A,U,52,8),A+8}u.prototype.writeDoubleLE=function(j,A,U){return _e(this,j,A,!0,U)},u.prototype.writeDoubleBE=function(j,A,U){return _e(this,j,A,!1,U)},u.prototype.copy=function(j,A,U,te){if(!u.isBuffer(j))throw new TypeError("argument should be a Buffer");if(U||(U=0),!te&&te!==0&&(te=this.length),A>=j.length&&(A=j.length),A||(A=0),te>0&&te<U&&(te=U),te===U||j.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),j.length-A<te-U&&(te=j.length-A+U);const he=te-U;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,U,te):Uint8Array.prototype.set.call(j,this.subarray(U,te),A),he},u.prototype.fill=function(j,A,U,te){if(typeof j=="string"){if(typeof A=="string"?(te=A,A=0,U=this.length):typeof U=="string"&&(te=U,U=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!u.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(j.length===1){const ke=j.charCodeAt(0);(te==="utf8"&&ke<128||te==="latin1")&&(j=ke)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(A<0||this.length<A||this.length<U)throw new RangeError("Out of range index");if(U<=A)return this;A=A>>>0,U=U===void 0?this.length:U>>>0,j||(j=0);let he;if(typeof j=="number")for(he=A;he<U;++he)this[he]=j;else{const ke=u.isBuffer(j)?j:u.from(j,te),ct=ke.length;if(ct===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(he=0;he<U-A;++he)this[he+A]=ke[he%ct]}return this};const Z={};function le(D,j,A){Z[D]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${D}]`,this.stack,delete this.name}get code(){return D}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${D}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(D){return D?`${D} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(D,j){return`The "${D}" argument must be of type number. Received type ${typeof j}`},TypeError),le("ERR_OUT_OF_RANGE",function(D,j,A){let U=`The value of "${D}" is out of range.`,te=A;return Number.isInteger(A)&&Math.abs(A)>2**32?te=Ce(String(A)):typeof A=="bigint"&&(te=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(te=Ce(te)),te+="n"),U+=` It must be ${j}. Received ${te}`,U},RangeError);function Ce(D){let j="",A=D.length;const U=D[0]==="-"?1:0;for(;A>=U+4;A-=3)j=`_${D.slice(A-3,A)}${j}`;return`${D.slice(0,A)}${j}`}function He(D,j,A){G(j,"offset"),(D[j]===void 0||D[j+A]===void 0)&&ee(j,D.length-(A+1))}function ae(D,j,A,U,te,he){if(D>A||D<j){const ke=typeof j=="bigint"?"n":"";let ct;throw j===0||j===BigInt(0)?ct=`>= 0${ke} and < 2${ke} ** ${(he+1)*8}${ke}`:ct=`>= -(2${ke} ** ${(he+1)*8-1}${ke}) and < 2 ** ${(he+1)*8-1}${ke}`,new Z.ERR_OUT_OF_RANGE("value",ct,D)}He(U,te,he)}function G(D,j){if(typeof D!="number")throw new Z.ERR_INVALID_ARG_TYPE(j,"number",D)}function ee(D,j,A){throw Math.floor(D)!==D?(G(D,A),new Z.ERR_OUT_OF_RANGE("offset","an integer",D)):j<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,D)}const pe=/[^+/0-9A-Za-z-_]/g;function be(D){if(D=D.split("=")[0],D=D.trim().replace(pe,""),D.length<2)return"";for(;D.length%4!==0;)D=D+"=";return D}function Re(D,j){j=j||1/0;let A;const U=D.length;let te=null;const he=[];for(let ke=0;ke<U;++ke){if(A=D.charCodeAt(ke),A>55295&&A<57344){if(!te){if(A>56319){(j-=3)>-1&&he.push(239,191,189);continue}else if(ke+1===U){(j-=3)>-1&&he.push(239,191,189);continue}te=A;continue}if(A<56320){(j-=3)>-1&&he.push(239,191,189),te=A;continue}A=(te-55296<<10|A-56320)+65536}else te&&(j-=3)>-1&&he.push(239,191,189);if(te=null,A<128){if((j-=1)<0)break;he.push(A)}else if(A<2048){if((j-=2)<0)break;he.push(A>>6|192,A&63|128)}else if(A<65536){if((j-=3)<0)break;he.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((j-=4)<0)break;he.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return he}function je(D){const j=[];for(let A=0;A<D.length;++A)j.push(D.charCodeAt(A)&255);return j}function J(D,j){let A,U,te;const he=[];for(let ke=0;ke<D.length&&!((j-=2)<0);++ke)A=D.charCodeAt(ke),U=A>>8,te=A%256,he.push(te),he.push(U);return he}function Se(D){return r.toByteArray(be(D))}function Pe(D,j,A,U){let te;for(te=0;te<U&&!(te+A>=j.length||te>=D.length);++te)j[te+A]=D[te];return te}function Te(D,j){return D instanceof j||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===j.name}function $e(D){return D!==D}const gt=(function(){const D="0123456789abcdef",j=new Array(256);for(let A=0;A<16;++A){const U=A*16;for(let te=0;te<16;++te)j[U+te]=D[A]+D[te]}return j})();function ft(D){return typeof BigInt>"u"?pt:D}function pt(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class e extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let s="";for(let a=0;a<i.length;a++)s+=`    ${i[a].stack}
`;super(s),this.name="AggregateError",this.errors=i}}return primordials={AggregateError:e,ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,i){return r.includes(i)},ArrayPrototypeIndexOf(r,i){return r.indexOf(i)},ArrayPrototypeJoin(r,i){return r.join(i)},ArrayPrototypeMap(r,i){return r.map(i)},ArrayPrototypePop(r,i){return r.pop(i)},ArrayPrototypePush(r,i){return r.push(i)},ArrayPrototypeSlice(r,i,s){return r.slice(i,s)},Error,FunctionPrototypeCall(r,i,...s){return r.call(i,...s)},FunctionPrototypeSymbolHasInstance(r,i){return Function.prototype[Symbol.hasInstance].call(r,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,i){return Object.defineProperties(r,i)},ObjectDefineProperty(r,i,s){return Object.defineProperty(r,i,s)},ObjectGetOwnPropertyDescriptor(r,i){return Object.getOwnPropertyDescriptor(r,i)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,i){return Object.setPrototypeOf(r,i)},Promise,PromisePrototypeCatch(r,i){return r.catch(i)},PromisePrototypeThen(r,i,s){return r.then(i,s)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,i){return r.test(i)},SafeSet:Set,String,StringPrototypeSlice(r,i,s){return r.slice(i,s)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,i,s){return r.set(i,s)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(e,...r){return e.replace(/%([sdifj])/g,function(...[i,s]){const a=r.shift();return s==="f"?a.toFixed(6):s==="j"?JSON.stringify(a):s==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:e,inspect:r}=requireInspect(),{AggregateError:i}=requirePrimordials(),s=globalThis.AggregateError||i,a=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",h={};function d(b,y){if(!b)throw new h.ERR_INTERNAL_ASSERTION(y)}function p(b){let y="",w=b.length;const T=b[0]==="-"?1:0;for(;w>=T+4;w-=3)y=`_${b.slice(w-3,w)}${y}`;return`${b.slice(0,w)}${y}`}function f(b,y,w){if(typeof y=="function")return d(y.length<=w.length,`Code: ${b}; The provided arguments length (${w.length}) does not match the required ones (${y.length}).`),y(...w);const T=(y.match(/%[dfijoOs]/g)||[]).length;return d(T===w.length,`Code: ${b}; The provided arguments length (${w.length}) does not match the required ones (${T}).`),w.length===0?y:e(y,...w)}function m(b,y,w){w||(w=Error);class T extends w{constructor(..._){super(f(b,y,_))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:w.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=b,T.prototype[a]=!0,h[b]=T}function g(b){const y=u+b.name;return Object.defineProperty(b,"name",{value:y}),b}function E(b,y){if(b&&y&&b!==y){if(Array.isArray(y.errors))return y.errors.push(b),y;const w=new s([y,b],y.message);return w.code=y.code,w}return b||y}class v extends Error{constructor(y="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",w);super(y,w),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(b,y,w)=>{d(typeof b=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let T="The ";b.endsWith(" argument")?T+=`${b} `:T+=`"${b}" ${b.includes(".")?"property":"argument"} `,T+="must be ";const k=[],_=[],P=[];for(const I of y)d(typeof I=="string","All expected entries have to be of type string"),c.includes(I)?k.push(I.toLowerCase()):l.test(I)?_.push(I):(d(I!=="object",'The value "object" should be written as "Object"'),P.push(I));if(_.length>0){const I=k.indexOf("object");I!==-1&&(k.splice(k,I,1),_.push("Object"))}if(k.length>0){switch(k.length){case 1:T+=`of type ${k[0]}`;break;case 2:T+=`one of type ${k[0]} or ${k[1]}`;break;default:{const I=k.pop();T+=`one of type ${k.join(", ")}, or ${I}`}}(_.length>0||P.length>0)&&(T+=" or ")}if(_.length>0){switch(_.length){case 1:T+=`an instance of ${_[0]}`;break;case 2:T+=`an instance of ${_[0]} or ${_[1]}`;break;default:{const I=_.pop();T+=`an instance of ${_.join(", ")}, or ${I}`}}P.length>0&&(T+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(T+="an "),T+=`${P[0]}`;break;case 2:T+=`one of ${P[0]} or ${P[1]}`;break;default:{const I=P.pop();T+=`one of ${P.join(", ")}, or ${I}`}}if(w==null)T+=`. Received ${w}`;else if(typeof w=="function"&&w.name)T+=`. Received function ${w.name}`;else if(typeof w=="object"){var R;if((R=w.constructor)!==null&&R!==void 0&&R.name)T+=`. Received an instance of ${w.constructor.name}`;else{const I=r(w,{depth:-1});T+=`. Received ${I}`}}else{let I=r(w,{colors:!1});I.length>25&&(I=`${I.slice(0,25)}...`),T+=`. Received type ${typeof w} (${I})`}return T},TypeError),m("ERR_INVALID_ARG_VALUE",(b,y,w="is invalid")=>{let T=r(y);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${w}. Received ${T}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(b,y,w)=>{var T;const k=w!=null&&(T=w.constructor)!==null&&T!==void 0&&T.name?`instance of ${w.constructor.name}`:`type ${typeof w}`;return`Expected ${b} to be returned from the "${y}" function but got ${k}.`},TypeError),m("ERR_MISSING_ARGS",(...b)=>{d(b.length>0,"At least one arg needs to be specified");let y;const w=b.length;switch(b=(Array.isArray(b)?b:[b]).map(T=>`"${T}"`).join(" or "),w){case 1:y+=`The ${b[0]} argument`;break;case 2:y+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const T=b.pop();y+=`The ${b.join(", ")}, and ${T} arguments`}break}return`${y} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(b,y,w)=>{d(y,'Missing "range" argument');let T;if(Number.isInteger(w)&&Math.abs(w)>2**32)T=p(String(w));else if(typeof w=="bigint"){T=String(w);const k=BigInt(2)**BigInt(32);(w>k||w<-k)&&(T=p(T)),T+="n"}else T=r(w);return`The value of "${b}" is out of range. It must be ${y}. Received ${T}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:v,aggregateTwoErrors:g(E),hideStackFrames:g,codes:h},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:e,AbortSignal:r}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=r,browser$1.exports.default=e,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(_,P,R){return Function.prototype.apply.call(_,P,R)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:i=function(_){return Object.getOwnPropertyNames(_)};function s(k){console&&console.warn&&console.warn(k)}var a=Number.isNaN||function(_){return _!==_};function c(){c.init.call(this)}events.exports=c,events.exports.once=y,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");l=k}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||a(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function h(k){return k._maxListeners===void 0?c.defaultMaxListeners:k._maxListeners}c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(_){for(var P=[],R=1;R<arguments.length;R++)P.push(arguments[R]);var I=_==="error",H=this._events;if(H!==void 0)I=I&&H.error===void 0;else if(!I)return!1;if(I){var B;if(P.length>0&&(B=P[0]),B instanceof Error)throw B;var O=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw O.context=B,O}var V=H[_];if(V===void 0)return!1;if(typeof V=="function")r(V,this,P);else for(var q=V.length,ue=E(V,q),R=0;R<q;++R)r(ue[R],this,P);return!0};function d(k,_,P,R){var I,H,B;if(u(P),H=k._events,H===void 0?(H=k._events=Object.create(null),k._eventsCount=0):(H.newListener!==void 0&&(k.emit("newListener",_,P.listener?P.listener:P),H=k._events),B=H[_]),B===void 0)B=H[_]=P,++k._eventsCount;else if(typeof B=="function"?B=H[_]=R?[P,B]:[B,P]:R?B.unshift(P):B.push(P),I=h(k),I>0&&B.length>I&&!B.warned){B.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=k,O.type=_,O.count=B.length,s(O)}return k}c.prototype.addListener=function(_,P){return d(this,_,P,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(_,P){return d(this,_,P,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(k,_,P){var R={fired:!1,wrapFn:void 0,target:k,type:_,listener:P},I=p.bind(R);return I.listener=P,R.wrapFn=I,I}c.prototype.once=function(_,P){return u(P),this.on(_,f(this,_,P)),this},c.prototype.prependOnceListener=function(_,P){return u(P),this.prependListener(_,f(this,_,P)),this},c.prototype.removeListener=function(_,P){var R,I,H,B,O;if(u(P),I=this._events,I===void 0)return this;if(R=I[_],R===void 0)return this;if(R===P||R.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete I[_],I.removeListener&&this.emit("removeListener",_,R.listener||P));else if(typeof R!="function"){for(H=-1,B=R.length-1;B>=0;B--)if(R[B]===P||R[B].listener===P){O=R[B].listener,H=B;break}if(H<0)return this;H===0?R.shift():v(R,H),R.length===1&&(I[_]=R[0]),I.removeListener!==void 0&&this.emit("removeListener",_,O||P)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(_){var P,R,I;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[_]),this;if(arguments.length===0){var H=Object.keys(R),B;for(I=0;I<H.length;++I)B=H[I],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=R[_],typeof P=="function")this.removeListener(_,P);else if(P!==void 0)for(I=P.length-1;I>=0;I--)this.removeListener(_,P[I]);return this};function m(k,_,P){var R=k._events;if(R===void 0)return[];var I=R[_];return I===void 0?[]:typeof I=="function"?P?[I.listener||I]:[I]:P?b(I):E(I,I.length)}c.prototype.listeners=function(_){return m(this,_,!0)},c.prototype.rawListeners=function(_){return m(this,_,!1)},c.listenerCount=function(k,_){return typeof k.listenerCount=="function"?k.listenerCount(_):g.call(k,_)},c.prototype.listenerCount=g;function g(k){var _=this._events;if(_!==void 0){var P=_[k];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function E(k,_){for(var P=new Array(_),R=0;R<_;++R)P[R]=k[R];return P}function v(k,_){for(;_+1<k.length;_++)k[_]=k[_+1];k.pop()}function b(k){for(var _=new Array(k.length),P=0;P<_.length;++P)_[P]=k[P].listener||k[P];return _}function y(k,_){return new Promise(function(P,R){function I(B){k.removeListener(_,H),R(B)}function H(){typeof k.removeListener=="function"&&k.removeListener("error",I),P([].slice.call(arguments))}T(k,_,H,{once:!0}),_!=="error"&&w(k,I,{once:!0})})}function w(k,_,P){typeof k.on=="function"&&T(k,"error",_,P)}function T(k,_,P,R){if(typeof k.on=="function")R.once?k.once(_,P):k.on(_,P);else if(typeof k.addEventListener=="function")k.addEventListener(_,function I(H){R.once&&k.removeEventListener(_,I),P(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){const r=requireBuffer(),{format:i,inspect:s}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:a}}=requireErrors(),{kResistStopPropagation:c,AggregateError:l,SymbolDispose:u}=requirePrimordials(),h=globalThis.AbortSignal||requireBrowser$2().AbortSignal,d=globalThis.AbortController||requireBrowser$2().AbortController,p=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||r.Blob,m=typeof f<"u"?function(b){return b instanceof f}:function(b){return!1},g=(v,b)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(b,"AbortSignal",v)},E=(v,b)=>{if(typeof v!="function")throw new a(b,"Function",v)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(v){let b=!1;return function(...y){b||(b=!0,v.apply(this,y))}},createDeferredPromise:function(){let v,b;return{promise:new Promise((w,T)=>{v=w,b=T}),resolve:v,reject:b}},promisify(v){return new Promise((b,y)=>{v((w,...T)=>w?y(w):b(...T))})},debuglog(){return function(){}},format:i,inspect:s,types:{isAsyncFunction(v){return v instanceof p},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:m,deprecate(v,b){return v},addAbortListener:requireEvents().addAbortListener||function(b,y){if(b===void 0)throw new a("signal","AbortSignal",b);g(b,"signal"),E(y,"listener");let w;return b.aborted?queueMicrotask(()=>y()):(b.addEventListener("abort",y,{__proto__:null,once:!0,[c]:!0}),w=()=>{b.removeEventListener("abort",y)}),{__proto__:null,[u](){var T;(T=w)===null||T===void 0||T()}}},AbortSignalAny:h.any||function(b){if(b.length===1)return b[0];const y=new d,w=()=>y.abort();return b.forEach(T=>{g(T,"signals"),T.addEventListener("abort",w,{once:!0})}),y.signal.addEventListener("abort",()=>{b.forEach(T=>T.removeEventListener("abort",w))},{once:!0}),y.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:i,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:f,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=requirePrimordials(),{hideStackFrames:E,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:T}}=requireErrors(),{normalizeEncoding:k}=requireUtil(),{isAsyncFunction:_,isArrayBufferView:P}=requireUtil().types,R={};function I(J){return J===(J|0)}function H(J){return J===J>>>0}const B=/^[0-7]+$/,O="must be a 32-bit unsigned integer or an octal string";function V(J,Se,Pe){if(typeof J>"u"&&(J=Pe),typeof J=="string"){if(p(B,J)===null)throw new y(Se,J,O);J=h(J,8)}return K(J,Se),J}const q=E((J,Se,Pe=u,Te=l)=>{if(typeof J!="number")throw new b(Se,"number",J);if(!a(J))throw new w(Se,"an integer",J);if(J<Pe||J>Te)throw new w(Se,`>= ${Pe} && <= ${Te}`,J)}),ue=E((J,Se,Pe=-2147483648,Te=2147483647)=>{if(typeof J!="number")throw new b(Se,"number",J);if(!a(J))throw new w(Se,"an integer",J);if(J<Pe||J>Te)throw new w(Se,`>= ${Pe} && <= ${Te}`,J)}),K=E((J,Se,Pe=!1)=>{if(typeof J!="number")throw new b(Se,"number",J);if(!a(J))throw new w(Se,"an integer",J);const Te=Pe?1:0,$e=4294967295;if(J<Te||J>$e)throw new w(Se,`>= ${Te} && <= ${$e}`,J)});function ce(J,Se){if(typeof J!="string")throw new b(Se,"string",J)}function we(J,Se,Pe=void 0,Te){if(typeof J!="number")throw new b(Se,"number",J);if(Pe!=null&&J<Pe||Te!=null&&J>Te||(Pe!=null||Te!=null)&&c(J))throw new w(Se,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&Te!=null?" && ":""}${Te!=null?`<= ${Te}`:""}`,J)}const W=E((J,Se,Pe)=>{if(!r(Pe,J)){const $e="must be one of: "+i(s(Pe,gt=>typeof gt=="string"?`'${gt}'`:f(gt)),", ");throw new y(Se,J,$e)}});function fe(J,Se){if(typeof J!="boolean")throw new b(Se,"boolean",J)}function F(J,Se,Pe){return J==null||!d(J,Se)?Pe:J[Se]}const L=E((J,Se,Pe=null)=>{const Te=F(Pe,"allowArray",!1),$e=F(Pe,"allowFunction",!1);if(!F(Pe,"nullable",!1)&&J===null||!Te&&e(J)||typeof J!="object"&&(!$e||typeof J!="function"))throw new b(Se,"Object",J)}),Q=E((J,Se)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new b(Se,"a dictionary",J)}),se=E((J,Se,Pe=0)=>{if(!e(J))throw new b(Se,"Array",J);if(J.length<Pe){const Te=`must be longer than ${Pe}`;throw new y(Se,J,Te)}});function oe(J,Se){se(J,Se);for(let Pe=0;Pe<J.length;Pe++)ce(J[Pe],`${Se}[${Pe}]`)}function ge(J,Se){se(J,Se);for(let Pe=0;Pe<J.length;Pe++)fe(J[Pe],`${Se}[${Pe}]`)}function ve(J,Se){se(J,Se);for(let Pe=0;Pe<J.length;Pe++){const Te=J[Pe],$e=`${Se}[${Pe}]`;if(Te==null)throw new b($e,"AbortSignal",Te);He(Te,$e)}}function _e(J,Se="signal"){if(ce(J,Se),R[J]===void 0)throw R[m(J)]!==void 0?new T(J+" (signals must use all capital letters)"):new T(J)}const Z=E((J,Se="buffer")=>{if(!P(J))throw new b(Se,["Buffer","TypedArray","DataView"],J)});function le(J,Se){const Pe=k(Se),Te=J.length;if(Pe==="hex"&&Te%2!==0)throw new y("encoding",Se,`is invalid for data of length ${Te}`)}function Ce(J,Se="Port",Pe=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Pe)throw new v(Se,J,Pe);return J|0}const He=E((J,Se)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new b(Se,"AbortSignal",J)}),ae=E((J,Se)=>{if(typeof J!="function")throw new b(Se,"Function",J)}),G=E((J,Se)=>{if(typeof J!="function"||_(J))throw new b(Se,"Function",J)}),ee=E((J,Se)=>{if(J!==void 0)throw new b(Se,"undefined",J)});function pe(J,Se,Pe){if(!r(Pe,J))throw new b(Se,`('${i(Pe,"|")}')`,J)}const be=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Re(J,Se){if(typeof J>"u"||!p(be,J))throw new y(Se,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function je(J){if(typeof J=="string")return Re(J,"hints"),J;if(e(J)){const Se=J.length;let Pe="";if(Se===0)return Pe;for(let Te=0;Te<Se;Te++){const $e=J[Te];Re($e,"hints"),Pe+=$e,Te!==Se-1&&(Pe+=", ")}return Pe}throw new y("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:I,isUint32:H,parseFileMode:V,validateArray:se,validateStringArray:oe,validateBooleanArray:ge,validateAbortSignalArray:ve,validateBoolean:fe,validateBuffer:Z,validateDictionary:Q,validateEncoding:le,validateFunction:ae,validateInt32:ue,validateInteger:q,validateNumber:we,validateObject:L,validateOneOf:W,validatePlainFunction:G,validatePort:Ce,validateSignalName:_e,validateString:ce,validateUint32:K,validateUndefined:ee,validateUnion:pe,validateAbortSignal:He,validateLinkHeaderValue:je},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var e=browser.exports={},r,i;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=s}catch{r=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=a}catch{i=a}})();function c(v){if(r===setTimeout)return setTimeout(v,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(v,0);try{return r(v,0)}catch{try{return r.call(null,v,0)}catch{return r.call(this,v,0)}}}function l(v){if(i===clearTimeout)return clearTimeout(v);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(v);try{return i(v)}catch{try{return i.call(null,v)}catch{return i.call(this,v)}}}var u=[],h=!1,d,p=-1;function f(){!h||!d||(h=!1,d.length?u=d.concat(u):p=-1,u.length&&m())}function m(){if(!h){var v=c(f);h=!0;for(var b=u.length;b;){for(d=u,u=[];++p<b;)d&&d[p].run();p=-1,b=u.length}d=null,h=!1,l(v)}}e.nextTick=function(v){var b=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)b[y-1]=arguments[y];u.push(new g(v,b)),u.length===1&&!h&&c(m)};function g(v,b){this.fun=v,this.array=b}g.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function E(){}return e.on=E,e.addListener=E,e.once=E,e.off=E,e.removeListener=E,e.removeAllListeners=E,e.emit=E,e.prependListener=E,e.prependOnceListener=E,e.listeners=function(v){return[]},e.binding=function(v){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(v){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:e,SymbolIterator:r,SymbolFor:i}=requirePrimordials(),s=i("nodejs.stream.destroyed"),a=i("nodejs.stream.errored"),c=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),u=i("nodejs.stream.disturbed"),h=i("nodejs.webstream.isClosedPromise"),d=i("nodejs.webstream.controllerErrorFunction");function p(F,L=!1){var Q;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!L||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((Q=F._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!F._writableState||F._readableState))}function f(F){var L;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((L=F._writableState)===null||L===void 0?void 0:L.writable)!==!1))}function m(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function g(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function E(F){return!!(F&&!g(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function v(F){return!!(F&&!g(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function b(F){return!!(F&&!g(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function y(F){return E(F)||v(F)||b(F)}function w(F,L){return F==null?!1:L===!0?typeof F[e]=="function":L===!1?typeof F[r]=="function":typeof F[e]=="function"||typeof F[r]=="function"}function T(F){if(!g(F))return null;const L=F._writableState,Q=F._readableState,se=L||Q;return!!(F.destroyed||F[s]||se!=null&&se.destroyed)}function k(F){if(!f(F))return null;if(F.writableEnded===!0)return!0;const L=F._writableState;return L!=null&&L.errored?!1:typeof L?.ended!="boolean"?null:L.ended}function _(F,L){if(!f(F))return null;if(F.writableFinished===!0)return!0;const Q=F._writableState;return Q!=null&&Q.errored?!1:typeof Q?.finished!="boolean"?null:!!(Q.finished||L===!1&&Q.ended===!0&&Q.length===0)}function P(F){if(!p(F))return null;if(F.readableEnded===!0)return!0;const L=F._readableState;return!L||L.errored?!1:typeof L?.ended!="boolean"?null:L.ended}function R(F,L){if(!p(F))return null;const Q=F._readableState;return Q!=null&&Q.errored?!1:typeof Q?.endEmitted!="boolean"?null:!!(Q.endEmitted||L===!1&&Q.ended===!0&&Q.length===0)}function I(F){return F&&F[c]!=null?F[c]:typeof F?.readable!="boolean"?null:T(F)?!1:p(F)&&F.readable&&!R(F)}function H(F){return F&&F[l]!=null?F[l]:typeof F?.writable!="boolean"?null:T(F)?!1:f(F)&&F.writable&&!k(F)}function B(F,L){return g(F)?T(F)?!0:!(L?.readable!==!1&&I(F)||L?.writable!==!1&&H(F)):null}function O(F){var L,Q;return g(F)?F.writableErrored?F.writableErrored:(L=(Q=F._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&L!==void 0?L:null:null}function V(F){var L,Q;return g(F)?F.readableErrored?F.readableErrored:(L=(Q=F._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&L!==void 0?L:null:null}function q(F){if(!g(F))return null;if(typeof F.closed=="boolean")return F.closed;const L=F._writableState,Q=F._readableState;return typeof L?.closed=="boolean"||typeof Q?.closed=="boolean"?L?.closed||Q?.closed:typeof F._closed=="boolean"&&ue(F)?F._closed:null}function ue(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function K(F){return typeof F._sent100=="boolean"&&ue(F)}function ce(F){var L;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((L=F.req)===null||L===void 0?void 0:L.upgradeOrConnect)===void 0}function we(F){if(!g(F))return null;const L=F._writableState,Q=F._readableState,se=L||Q;return!se&&K(F)||!!(se&&se.autoDestroy&&se.emitClose&&se.closed===!1)}function W(F){var L;return!!(F&&((L=F[u])!==null&&L!==void 0?L:F.readableDidRead||F.readableAborted))}function fe(F){var L,Q,se,oe,ge,ve,_e,Z,le,Ce;return!!(F&&((L=(Q=(se=(oe=(ge=(ve=F[a])!==null&&ve!==void 0?ve:F.readableErrored)!==null&&ge!==void 0?ge:F.writableErrored)!==null&&oe!==void 0?oe:(_e=F._readableState)===null||_e===void 0?void 0:_e.errorEmitted)!==null&&se!==void 0?se:(Z=F._writableState)===null||Z===void 0?void 0:Z.errorEmitted)!==null&&Q!==void 0?Q:(le=F._readableState)===null||le===void 0?void 0:le.errored)!==null&&L!==void 0?L:!((Ce=F._writableState)===null||Ce===void 0)&&Ce.errored))}return utils={isDestroyed:T,kIsDestroyed:s,isDisturbed:W,kIsDisturbed:u,isErrored:fe,kIsErrored:a,isReadable:I,kIsReadable:c,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:l,isClosed:q,isDuplexNodeStream:m,isFinished:B,isIterable:w,isReadableNodeStream:p,isReadableStream:E,isReadableEnded:P,isReadableFinished:R,isReadableErrored:V,isNodeStream:g,isWebStream:y,isWritable:H,isWritableNodeStream:f,isWritableStream:v,isWritableEnded:k,isWritableFinished:_,isWritableErrored:O,isServerRequest:ce,isServerResponse:K,willEmitClose:we,isTransformStream:b},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const e=requireBrowser$1(),{AbortError:r,codes:i}=requireErrors(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=i,{kEmptyObject:c,once:l}=requireUtil(),{validateAbortSignal:u,validateFunction:h,validateObject:d,validateBoolean:p}=requireValidators(),{Promise:f,PromisePrototypeThen:m,SymbolDispose:g}=requirePrimordials(),{isClosed:E,isReadable:v,isReadableNodeStream:b,isReadableStream:y,isReadableFinished:w,isReadableErrored:T,isWritable:k,isWritableNodeStream:_,isWritableStream:P,isWritableFinished:R,isWritableErrored:I,isNodeStream:H,willEmitClose:B,kIsClosedPromise:O}=requireUtils();let V;function q(W){return W.setHeader&&typeof W.abort=="function"}const ue=()=>{};function K(W,fe,F){var L,Q;if(arguments.length===2?(F=fe,fe=c):fe==null?fe=c:d(fe,"options"),h(F,"callback"),u(fe.signal,"options.signal"),F=l(F),y(W)||P(W))return ce(W,fe,F);if(!H(W))throw new s("stream",["ReadableStream","WritableStream","Stream"],W);const se=(L=fe.readable)!==null&&L!==void 0?L:b(W),oe=(Q=fe.writable)!==null&&Q!==void 0?Q:_(W),ge=W._writableState,ve=W._readableState,_e=()=>{W.writable||Ce()};let Z=B(W)&&b(W)===se&&_(W)===oe,le=R(W,!1);const Ce=()=>{le=!0,W.destroyed&&(Z=!1),!(Z&&(!W.readable||se))&&(!se||He)&&F.call(W)};let He=w(W,!1);const ae=()=>{He=!0,W.destroyed&&(Z=!1),!(Z&&(!W.writable||oe))&&(!oe||le)&&F.call(W)},G=J=>{F.call(W,J)};let ee=E(W);const pe=()=>{ee=!0;const J=I(W)||T(W);if(J&&typeof J!="boolean")return F.call(W,J);if(se&&!He&&b(W,!0)&&!w(W,!1))return F.call(W,new a);if(oe&&!le&&!R(W,!1))return F.call(W,new a);F.call(W)},be=()=>{ee=!0;const J=I(W)||T(W);if(J&&typeof J!="boolean")return F.call(W,J);F.call(W)},Re=()=>{W.req.on("finish",Ce)};q(W)?(W.on("complete",Ce),Z||W.on("abort",pe),W.req?Re():W.on("request",Re)):oe&&!ge&&(W.on("end",_e),W.on("close",_e)),!Z&&typeof W.aborted=="boolean"&&W.on("aborted",pe),W.on("end",ae),W.on("finish",Ce),fe.error!==!1&&W.on("error",G),W.on("close",pe),ee?e.nextTick(pe):ge!=null&&ge.errorEmitted||ve!=null&&ve.errorEmitted?Z||e.nextTick(be):(!se&&(!Z||v(W))&&(le||k(W)===!1)||!oe&&(!Z||k(W))&&(He||v(W)===!1)||ve&&W.req&&W.aborted)&&e.nextTick(be);const je=()=>{F=ue,W.removeListener("aborted",pe),W.removeListener("complete",Ce),W.removeListener("abort",pe),W.removeListener("request",Re),W.req&&W.req.removeListener("finish",Ce),W.removeListener("end",_e),W.removeListener("close",_e),W.removeListener("finish",Ce),W.removeListener("end",ae),W.removeListener("error",G),W.removeListener("close",pe)};if(fe.signal&&!ee){const J=()=>{const Se=F;je(),Se.call(W,new r(void 0,{cause:fe.signal.reason}))};if(fe.signal.aborted)e.nextTick(J);else{V=V||requireUtil().addAbortListener;const Se=V(fe.signal,J),Pe=F;F=l((...Te)=>{Se[g](),Pe.apply(W,Te)})}}return je}function ce(W,fe,F){let L=!1,Q=ue;if(fe.signal)if(Q=()=>{L=!0,F.call(W,new r(void 0,{cause:fe.signal.reason}))},fe.signal.aborted)e.nextTick(Q);else{V=V||requireUtil().addAbortListener;const oe=V(fe.signal,Q),ge=F;F=l((...ve)=>{oe[g](),ge.apply(W,ve)})}const se=(...oe)=>{L||e.nextTick(()=>F.apply(W,oe))};return m(W[O].promise,se,se),ue}function we(W,fe){var F;let L=!1;return fe===null&&(fe=c),(F=fe)!==null&&F!==void 0&&F.cleanup&&(p(fe.cleanup,"cleanup"),L=fe.cleanup),new f((Q,se)=>{const oe=K(W,fe,ge=>{L&&oe(),ge?se(ge):Q()})})}return endOfStream.exports=K,endOfStream.exports.finished=we,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const e=requireBrowser$1(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:s}=requireErrors(),{Symbol:a}=requirePrimordials(),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:h}=requireUtils(),d=a("kDestroy"),p=a("kConstruct");function f(B,O,V){B&&(B.stack,O&&!O.errored&&(O.errored=B),V&&!V.errored&&(V.errored=B))}function m(B,O){const V=this._readableState,q=this._writableState,ue=q||V;return q!=null&&q.destroyed||V!=null&&V.destroyed?(typeof O=="function"&&O(),this):(f(B,q,V),q&&(q.destroyed=!0),V&&(V.destroyed=!0),ue.constructed?g(this,B,O):this.once(d,function(K){g(this,r(K,B),O)}),this)}function g(B,O,V){let q=!1;function ue(K){if(q)return;q=!0;const ce=B._readableState,we=B._writableState;f(K,we,ce),we&&(we.closed=!0),ce&&(ce.closed=!0),typeof V=="function"&&V(K),K?e.nextTick(E,B,K):e.nextTick(v,B)}try{B._destroy(O||null,ue)}catch(K){ue(K)}}function E(B,O){b(B,O),v(B)}function v(B){const O=B._readableState,V=B._writableState;V&&(V.closeEmitted=!0),O&&(O.closeEmitted=!0),(V!=null&&V.emitClose||O!=null&&O.emitClose)&&B.emit("close")}function b(B,O){const V=B._readableState,q=B._writableState;q!=null&&q.errorEmitted||V!=null&&V.errorEmitted||(q&&(q.errorEmitted=!0),V&&(V.errorEmitted=!0),B.emit("error",O))}function y(){const B=this._readableState,O=this._writableState;B&&(B.constructed=!0,B.closed=!1,B.closeEmitted=!1,B.destroyed=!1,B.errored=null,B.errorEmitted=!1,B.reading=!1,B.ended=B.readable===!1,B.endEmitted=B.readable===!1),O&&(O.constructed=!0,O.destroyed=!1,O.closed=!1,O.closeEmitted=!1,O.errored=null,O.errorEmitted=!1,O.finalCalled=!1,O.prefinished=!1,O.ended=O.writable===!1,O.ending=O.writable===!1,O.finished=O.writable===!1)}function w(B,O,V){const q=B._readableState,ue=B._writableState;if(ue!=null&&ue.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||ue!=null&&ue.autoDestroy?B.destroy(O):O&&(O.stack,ue&&!ue.errored&&(ue.errored=O),q&&!q.errored&&(q.errored=O),V?e.nextTick(b,B,O):b(B,O))}function T(B,O){if(typeof B._construct!="function")return;const V=B._readableState,q=B._writableState;V&&(V.constructed=!1),q&&(q.constructed=!1),B.once(p,O),!(B.listenerCount(p)>1)&&e.nextTick(k,B)}function k(B){let O=!1;function V(q){if(O){w(B,q??new i);return}O=!0;const ue=B._readableState,K=B._writableState,ce=K||ue;ue&&(ue.constructed=!0),K&&(K.constructed=!0),ce.destroyed?B.emit(d,q):q?w(B,q,!0):e.nextTick(_,B)}try{B._construct(q=>{e.nextTick(V,q)})}catch(q){e.nextTick(V,q)}}function _(B){B.emit(p)}function P(B){return B?.setHeader&&typeof B.abort=="function"}function R(B){B.emit("close")}function I(B,O){B.emit("error",O),e.nextTick(R,B)}function H(B,O){!B||l(B)||(!O&&!u(B)&&(O=new s),h(B)?(B.socket=null,B.destroy(O)):P(B)?B.abort():P(B.req)?B.req.abort():typeof B.destroy=="function"?B.destroy(O):typeof B.close=="function"?B.close():O?e.nextTick(I,B,O):e.nextTick(R,B),B.destroyed||(B[c]=!0))}return destroy_1={construct:T,destroyer:H,destroy:m,undestroy:y,errorOrDestroy:w},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:r}=requirePrimordials(),{EventEmitter:i}=requireEvents();function s(c){i.call(this,c)}r(s.prototype,i.prototype),r(s,i),s.prototype.pipe=function(c,l){const u=this;function h(v){c.writable&&c.write(v)===!1&&u.pause&&u.pause()}u.on("data",h);function d(){u.readable&&u.resume&&u.resume()}c.on("drain",d),!c._isStdio&&(!l||l.end!==!1)&&(u.on("end",f),u.on("close",m));let p=!1;function f(){p||(p=!0,c.end())}function m(){p||(p=!0,typeof c.destroy=="function"&&c.destroy())}function g(v){E(),i.listenerCount(this,"error")===0&&this.emit("error",v)}a(u,"error",g),a(c,"error",g);function E(){u.removeListener("data",h),c.removeListener("drain",d),u.removeListener("end",f),u.removeListener("close",m),u.removeListener("error",g),c.removeListener("error",g),u.removeListener("end",E),u.removeListener("close",E),c.removeListener("close",E)}return u.on("end",E),u.on("close",E),c.on("close",E),c.emit("pipe",u),c};function a(c,l,u){if(typeof c.prependListener=="function")return c.prependListener(l,u);!c._events||!c._events[l]?c.on(l,u):e(c._events[l])?c._events[l].unshift(u):c._events[l]=[u,c._events[l]]}return legacy={Stream:s,prependListener:a},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(e){const{SymbolDispose:r}=requirePrimordials(),{AbortError:i,codes:s}=requireErrors(),{isNodeStream:a,isWebStream:c,kControllerErrorFunction:l}=requireUtils(),u=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:h}=s;let d;const p=(f,m)=>{if(typeof f!="object"||!("aborted"in f))throw new h(m,"AbortSignal",f)};e.exports.addAbortSignal=function(m,g){if(p(m,"signal"),!a(g)&&!c(g))throw new h("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(f,m){if(typeof f!="object"||!("aborted"in f))return m;const g=a(m)?()=>{m.destroy(new i(void 0,{cause:f.reason}))}:()=>{m[l](new i(void 0,{cause:f.reason}))};if(f.aborted)g();else{d=d||requireUtil().addAbortListener;const E=d(f,g);u(m,E[r])}return m}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:e,SymbolIterator:r,TypedArrayPrototypeSet:i,Uint8Array:s}=requirePrimordials(),{Buffer:a}=requireBuffer(),{inspect:c}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const h={data:u,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(u){const h={data:u,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let h=this.head,d=""+h.data;for(;(h=h.next)!==null;)d+=u+h.data;return d}concat(u){if(this.length===0)return a.alloc(0);const h=a.allocUnsafe(u>>>0);let d=this.head,p=0;for(;d;)i(h,d.data,p),p+=d.data.length,d=d.next;return h}consume(u,h){const d=this.head.data;if(u<d.length){const p=d.slice(0,u);return this.head.data=d.slice(u),p}return u===d.length?this.shift():h?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[r](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let h="",d=this.head,p=0;do{const f=d.data;if(u>f.length)h+=f,u-=f.length;else{u===f.length?(h+=f,++p,d.next?this.head=d.next:this.head=this.tail=null):(h+=e(f,0,u),this.head=d,d.data=e(f,u));break}++p}while((d=d.next)!==null);return this.length-=p,h}_getBuffer(u){const h=a.allocUnsafe(u),d=u;let p=this.head,f=0;do{const m=p.data;if(u>m.length)i(h,m,d-u),u-=m.length;else{u===m.length?(i(h,m,d-u),++f,p.next?this.head=p.next:this.head=this.tail=null):(i(h,new s(m.buffer,m.byteOffset,u),d-u),this.head=p,p.data=m.slice(u));break}++f}while((p=p.next)!==null);return this.length-=f,h}[Symbol.for("nodejs.util.inspect.custom")](u,h){return c(this,{...h,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:e,NumberIsInteger:r}=requirePrimordials(),{validateInteger:i}=requireValidators(),{ERR_INVALID_ARG_VALUE:s}=requireErrors().codes;let a=16*1024,c=16;function l(p,f,m){return p.highWaterMark!=null?p.highWaterMark:f?p[m]:null}function u(p){return p?c:a}function h(p,f){i(f,"value",0),p?c=f:a=f}function d(p,f,m,g){const E=l(f,g,m);if(E!=null){if(!r(E)||E<0){const v=g?`options.${m}`:"options.highWaterMark";throw new s(v,E)}return e(E)}return u(p.objectMode)}return state={getHighWaterMark:d,getDefaultHighWaterMark:u,setDefaultHighWaterMark:h},state}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(e,r){var i=requireBuffer(),s=i.Buffer;function a(l,u){for(var h in l)u[h]=l[h]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=i:(a(i,r),r.Buffer=c);function c(l,u,h){return s(l,u,h)}c.prototype=Object.create(s.prototype),a(s,c),c.from=function(l,u,h){if(typeof l=="number")throw new TypeError("Argument must not be a number");return s(l,u,h)},c.alloc=function(l,u,h){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=s(l);return u!==void 0?typeof h=="string"?d.fill(u,h):d.fill(u):d.fill(0),d},c.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return s(l)},c.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(l)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,r=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(y){if(!y)return"utf8";for(var w;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(w)return;y=(""+y).toLowerCase(),w=!0}}function s(y){var w=i(y);if(typeof w!="string"&&(e.isEncoding===r||!r(y)))throw new Error("Unknown encoding: "+y);return w||y}string_decoder.StringDecoder=a;function a(y){this.encoding=s(y);var w;switch(this.encoding){case"utf16le":this.text=f,this.end=m,w=4;break;case"utf8":this.fillLast=h,w=4;break;case"base64":this.text=g,this.end=E,w=3;break;default:this.write=v,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}a.prototype.write=function(y){if(y.length===0)return"";var w,T;if(this.lastNeed){if(w=this.fillLast(y),w===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<y.length?w?w+this.text(y,T):this.text(y,T):w||""},a.prototype.end=p,a.prototype.text=d,a.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function c(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function l(y,w,T){var k=w.length-1;if(k<T)return 0;var _=c(w[k]);return _>=0?(_>0&&(y.lastNeed=_-1),_):--k<T||_===-2?0:(_=c(w[k]),_>=0?(_>0&&(y.lastNeed=_-2),_):--k<T||_===-2?0:(_=c(w[k]),_>=0?(_>0&&(_===2?_=0:y.lastNeed=_-3),_):0))}function u(y,w,T){if((w[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return y.lastNeed=2,""}}function h(y){var w=this.lastTotal-this.lastNeed,T=u(this,y);if(T!==void 0)return T;if(this.lastNeed<=y.length)return y.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,w,0,y.length),this.lastNeed-=y.length}function d(y,w){var T=l(this,y,w);if(!this.lastNeed)return y.toString("utf8",w);this.lastTotal=T;var k=y.length-(T-this.lastNeed);return y.copy(this.lastChar,0,k),y.toString("utf8",w,k)}function p(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+"":w}function f(y,w){if((y.length-w)%2===0){var T=y.toString("utf16le",w);if(T){var k=T.charCodeAt(T.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",w,y.length-1)}function m(y){var w=y&&y.length?this.write(y):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,T)}return w}function g(y,w){var T=(y.length-w)%3;return T===0?y.toString("base64",w):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",w,y.length-T))}function E(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function v(y){return y.toString(this.encoding)}function b(y){return y&&y.length?this.write(y):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const e=requireBrowser$1(),{PromisePrototypeThen:r,SymbolAsyncIterator:i,SymbolIterator:s}=requirePrimordials(),{Buffer:a}=requireBuffer(),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=requireErrors().codes;function u(h,d,p){let f;if(typeof d=="string"||d instanceof a)return new h({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let m;if(d&&d[i])m=!0,f=d[i]();else if(d&&d[s])m=!1,f=d[s]();else throw new c("iterable",["Iterable"],d);const g=new h({objectMode:!0,highWaterMark:1,...p});let E=!1;g._read=function(){E||(E=!0,b())},g._destroy=function(y,w){r(v(y),()=>e.nextTick(w,y),T=>e.nextTick(w,T||y))};async function v(y){const w=y!=null,T=typeof f.throw=="function";if(w&&T){const{value:k,done:_}=await f.throw(y);if(await k,_)return}if(typeof f.return=="function"){const{value:k}=await f.return();await k}}async function b(){for(;;){try{const{value:y,done:w}=m?await f.next():f.next();if(w)g.push(null);else{const T=y&&typeof y.then=="function"?await y:y;if(T===null)throw E=!1,new l;if(g.push(T))continue;E=!1}}catch(y){g.destroy(y)}break}}return g}return from_1=u,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=requireBrowser$1(),{ArrayPrototypeIndexOf:r,NumberIsInteger:i,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:h,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:f,Symbol:m}=requirePrimordials();readable=Te,Te.ReadableState=Pe;const{EventEmitter:g}=requireEvents(),{Stream:E,prependListener:v}=requireLegacy(),{Buffer:b}=requireBuffer(),{addAbortSignal:y}=requireAddAbortSignal(),w=requireEndOfStream();let T=requireUtil().debuglog("stream",M=>{T=M});const k=requireBuffer_list(),_=requireDestroy(),{getHighWaterMark:P,getDefaultHighWaterMark:R}=requireState(),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:B,ERR_OUT_OF_RANGE:O,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:q},AbortError:ue}=requireErrors(),{validateObject:K}=requireValidators(),ce=m("kPaused"),{StringDecoder:we}=requireString_decoder(),W=requireFrom();u(Te.prototype,E.prototype),u(Te,E);const fe=()=>{},{errorOrDestroy:F}=_,L=1,Q=2,se=4,oe=8,ge=16,ve=32,_e=64,Z=128,le=256,Ce=512,He=1024,ae=2048,G=4096,ee=8192,pe=16384,be=32768,Re=65536,je=1<<17,J=1<<18;function Se(M){return{enumerable:!1,get(){return(this.state&M)!==0},set(z){z?this.state|=M:this.state&=~M}}}c(Pe.prototype,{objectMode:Se(L),ended:Se(Q),endEmitted:Se(se),reading:Se(oe),constructed:Se(ge),sync:Se(ve),needReadable:Se(_e),emittedReadable:Se(Z),readableListening:Se(le),resumeScheduled:Se(Ce),errorEmitted:Se(He),emitClose:Se(ae),autoDestroy:Se(G),destroyed:Se(ee),closed:Se(pe),closeEmitted:Se(be),multiAwaitDrain:Se(Re),readingMore:Se(je),dataEmitted:Se(J)});function Pe(M,z,Ae){typeof Ae!="boolean"&&(Ae=z instanceof requireDuplex()),this.state=ae|G|ge|ve,M&&M.objectMode&&(this.state|=L),Ae&&M&&M.readableObjectMode&&(this.state|=L),this.highWaterMark=M?P(this,M,"readableHighWaterMark",Ae):R(!1),this.buffer=new k,this.length=0,this.pipes=[],this.flowing=null,this[ce]=null,M&&M.emitClose===!1&&(this.state&=~ae),M&&M.autoDestroy===!1&&(this.state&=~G),this.errored=null,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,M&&M.encoding&&(this.decoder=new we(M.encoding),this.encoding=M.encoding)}function Te(M){if(!(this instanceof Te))return new Te(M);const z=this instanceof requireDuplex();this._readableState=new Pe(M,this,z),M&&(typeof M.read=="function"&&(this._read=M.read),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&!z&&y(M.signal,this)),E.call(this,M),_.construct(this,()=>{this._readableState.needReadable&&te(this,this._readableState)})}Te.prototype.destroy=_.destroy,Te.prototype._undestroy=_.undestroy,Te.prototype._destroy=function(M,z){z(M)},Te.prototype[g.captureRejectionSymbol]=function(M){this.destroy(M)},Te.prototype[p]=function(){let M;return this.destroyed||(M=this.readableEnded?null:new ue,this.destroy(M)),new h((z,Ae)=>w(this,Ie=>Ie&&Ie!==M?Ae(Ie):z(null)))},Te.prototype.push=function(M,z){return $e(this,M,z,!1)},Te.prototype.unshift=function(M,z){return $e(this,M,z,!0)};function $e(M,z,Ae,Ie){T("readableAddChunk",z);const Ke=M._readableState;let St;if((Ke.state&L)===0&&(typeof z=="string"?(Ae=Ae||Ke.defaultEncoding,Ke.encoding!==Ae&&(Ie&&Ke.encoding?z=b.from(z,Ae).toString(Ke.encoding):(z=b.from(z,Ae),Ae=""))):z instanceof b?Ae="":E._isUint8Array(z)?(z=E._uint8ArrayToBuffer(z),Ae=""):z!=null&&(St=new H("chunk",["string","Buffer","Uint8Array"],z))),St)F(M,St);else if(z===null)Ke.state&=~oe,j(M,Ke);else if((Ke.state&L)!==0||z&&z.length>0)if(Ie)if((Ke.state&se)!==0)F(M,new q);else{if(Ke.destroyed||Ke.errored)return!1;gt(M,Ke,z,!0)}else if(Ke.ended)F(M,new V);else{if(Ke.destroyed||Ke.errored)return!1;Ke.state&=~oe,Ke.decoder&&!Ae?(z=Ke.decoder.write(z),Ke.objectMode||z.length!==0?gt(M,Ke,z,!1):te(M,Ke)):gt(M,Ke,z,!1)}else Ie||(Ke.state&=~oe,te(M,Ke));return!Ke.ended&&(Ke.length<Ke.highWaterMark||Ke.length===0)}function gt(M,z,Ae,Ie){z.flowing&&z.length===0&&!z.sync&&M.listenerCount("data")>0?((z.state&Re)!==0?z.awaitDrainWriters.clear():z.awaitDrainWriters=null,z.dataEmitted=!0,M.emit("data",Ae)):(z.length+=z.objectMode?1:Ae.length,Ie?z.buffer.unshift(Ae):z.buffer.push(Ae),(z.state&_e)!==0&&A(M)),te(M,z)}Te.prototype.isPaused=function(){const M=this._readableState;return M[ce]===!0||M.flowing===!1},Te.prototype.setEncoding=function(M){const z=new we(M);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;const Ae=this._readableState.buffer;let Ie="";for(const Ke of Ae)Ie+=z.write(Ke);return Ae.clear(),Ie!==""&&Ae.push(Ie),this._readableState.length=Ie.length,this};const ft=1073741824;function pt(M){if(M>ft)throw new O("size","<= 1GiB",M);return M--,M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,M|=M>>>16,M++,M}function D(M,z){return M<=0||z.length===0&&z.ended?0:(z.state&L)!==0?1:s(M)?z.flowing&&z.length?z.buffer.first().length:z.length:M<=z.length?M:z.ended?z.length:0}Te.prototype.read=function(M){T("read",M),M===void 0?M=NaN:i(M)||(M=a(M,10));const z=this._readableState,Ae=M;if(M>z.highWaterMark&&(z.highWaterMark=pt(M)),M!==0&&(z.state&=~Z),M===0&&z.needReadable&&((z.highWaterMark!==0?z.length>=z.highWaterMark:z.length>0)||z.ended))return T("read: emitReadable",z.length,z.ended),z.length===0&&z.ended?Be(this):A(this),null;if(M=D(M,z),M===0&&z.ended)return z.length===0&&Be(this),null;let Ie=(z.state&_e)!==0;if(T("need readable",Ie),(z.length===0||z.length-M<z.highWaterMark)&&(Ie=!0,T("length less than watermark",Ie)),z.ended||z.reading||z.destroyed||z.errored||!z.constructed)Ie=!1,T("reading, ended or constructing",Ie);else if(Ie){T("do read"),z.state|=oe|ve,z.length===0&&(z.state|=_e);try{this._read(z.highWaterMark)}catch(St){F(this,St)}z.state&=~ve,z.reading||(M=D(Ae,z))}let Ke;return M>0?Ke=Ne(M,z):Ke=null,Ke===null?(z.needReadable=z.length<=z.highWaterMark,M=0):(z.length-=M,z.multiAwaitDrain?z.awaitDrainWriters.clear():z.awaitDrainWriters=null),z.length===0&&(z.ended||(z.needReadable=!0),Ae!==M&&z.ended&&Be(this)),Ke!==null&&!z.errorEmitted&&!z.closeEmitted&&(z.dataEmitted=!0,this.emit("data",Ke)),Ke};function j(M,z){if(T("onEofChunk"),!z.ended){if(z.decoder){const Ae=z.decoder.end();Ae&&Ae.length&&(z.buffer.push(Ae),z.length+=z.objectMode?1:Ae.length)}z.ended=!0,z.sync?A(M):(z.needReadable=!1,z.emittedReadable=!0,U(M))}}function A(M){const z=M._readableState;T("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(T("emitReadable",z.flowing),z.emittedReadable=!0,e.nextTick(U,M))}function U(M){const z=M._readableState;T("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&!z.errored&&(z.length||z.ended)&&(M.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,mt(M)}function te(M,z){!z.readingMore&&z.constructed&&(z.readingMore=!0,e.nextTick(he,M,z))}function he(M,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&z.length===0);){const Ae=z.length;if(T("maybeReadMore read 0"),M.read(0),Ae===z.length)break}z.readingMore=!1}Te.prototype._read=function(M){throw new B("_read()")},Te.prototype.pipe=function(M,z){const Ae=this,Ie=this._readableState;Ie.pipes.length===1&&(Ie.multiAwaitDrain||(Ie.multiAwaitDrain=!0,Ie.awaitDrainWriters=new d(Ie.awaitDrainWriters?[Ie.awaitDrainWriters]:[]))),Ie.pipes.push(M),T("pipe count=%d opts=%j",Ie.pipes.length,z);const St=(!z||z.end!==!1)&&M!==e.stdout&&M!==e.stderr?ne:Ye;Ie.endEmitted?e.nextTick(St):Ae.once("end",St),M.on("unpipe",tt);function tt(Je,ut){T("onunpipe"),Je===Ae&&ut&&ut.hasUnpiped===!1&&(ut.hasUnpiped=!0,Ze())}function ne(){T("onend"),M.end()}let Oe,Qe=!1;function Ze(){T("cleanup"),M.removeListener("close",De),M.removeListener("finish",We),Oe&&M.removeListener("drain",Oe),M.removeListener("error",Me),M.removeListener("unpipe",tt),Ae.removeListener("end",ne),Ae.removeListener("end",Ye),Ae.removeListener("data",de),Qe=!0,Oe&&Ie.awaitDrainWriters&&(!M._writableState||M._writableState.needDrain)&&Oe()}function nt(){Qe||(Ie.pipes.length===1&&Ie.pipes[0]===M?(T("false write response, pause",0),Ie.awaitDrainWriters=M,Ie.multiAwaitDrain=!1):Ie.pipes.length>1&&Ie.pipes.includes(M)&&(T("false write response, pause",Ie.awaitDrainWriters.size),Ie.awaitDrainWriters.add(M)),Ae.pause()),Oe||(Oe=ke(Ae,M),M.on("drain",Oe))}Ae.on("data",de);function de(Je){T("ondata");const ut=M.write(Je);T("dest.write",ut),ut===!1&&nt()}function Me(Je){if(T("onerror",Je),Ye(),M.removeListener("error",Me),M.listenerCount("error")===0){const ut=M._writableState||M._readableState;ut&&!ut.errorEmitted?F(M,Je):M.emit("error",Je)}}v(M,"error",Me);function De(){M.removeListener("finish",We),Ye()}M.once("close",De);function We(){T("onfinish"),M.removeListener("close",De),Ye()}M.once("finish",We);function Ye(){T("unpipe"),Ae.unpipe(M)}return M.emit("pipe",Ae),M.writableNeedDrain===!0?nt():Ie.flowing||(T("pipe resume"),Ae.resume()),M};function ke(M,z){return function(){const Ie=M._readableState;Ie.awaitDrainWriters===z?(T("pipeOnDrain",1),Ie.awaitDrainWriters=null):Ie.multiAwaitDrain&&(T("pipeOnDrain",Ie.awaitDrainWriters.size),Ie.awaitDrainWriters.delete(z)),(!Ie.awaitDrainWriters||Ie.awaitDrainWriters.size===0)&&M.listenerCount("data")&&M.resume()}}Te.prototype.unpipe=function(M){const z=this._readableState,Ae={hasUnpiped:!1};if(z.pipes.length===0)return this;if(!M){const Ke=z.pipes;z.pipes=[],this.pause();for(let St=0;St<Ke.length;St++)Ke[St].emit("unpipe",this,{hasUnpiped:!1});return this}const Ie=r(z.pipes,M);return Ie===-1?this:(z.pipes.splice(Ie,1),z.pipes.length===0&&this.pause(),M.emit("unpipe",this,Ae),this)},Te.prototype.on=function(M,z){const Ae=E.prototype.on.call(this,M,z),Ie=this._readableState;return M==="data"?(Ie.readableListening=this.listenerCount("readable")>0,Ie.flowing!==!1&&this.resume()):M==="readable"&&!Ie.endEmitted&&!Ie.readableListening&&(Ie.readableListening=Ie.needReadable=!0,Ie.flowing=!1,Ie.emittedReadable=!1,T("on readable",Ie.length,Ie.reading),Ie.length?A(this):Ie.reading||e.nextTick(bt,this)),Ae},Te.prototype.addListener=Te.prototype.on,Te.prototype.removeListener=function(M,z){const Ae=E.prototype.removeListener.call(this,M,z);return M==="readable"&&e.nextTick(ct,this),Ae},Te.prototype.off=Te.prototype.removeListener,Te.prototype.removeAllListeners=function(M){const z=E.prototype.removeAllListeners.apply(this,arguments);return(M==="readable"||M===void 0)&&e.nextTick(ct,this),z};function ct(M){const z=M._readableState;z.readableListening=M.listenerCount("readable")>0,z.resumeScheduled&&z[ce]===!1?z.flowing=!0:M.listenerCount("data")>0?M.resume():z.readableListening||(z.flowing=null)}function bt(M){T("readable nexttick read 0"),M.read(0)}Te.prototype.resume=function(){const M=this._readableState;return M.flowing||(T("resume"),M.flowing=!M.readableListening,ht(this,M)),M[ce]=!1,this};function ht(M,z){z.resumeScheduled||(z.resumeScheduled=!0,e.nextTick(yt,M,z))}function yt(M,z){T("resume",z.reading),z.reading||M.read(0),z.resumeScheduled=!1,M.emit("resume"),mt(M),z.flowing&&!z.reading&&M.read(0)}Te.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ce]=!0,this};function mt(M){const z=M._readableState;for(T("flow",z.flowing);z.flowing&&M.read()!==null;);}Te.prototype.wrap=function(M){let z=!1;M.on("data",Ie=>{!this.push(Ie)&&M.pause&&(z=!0,M.pause())}),M.on("end",()=>{this.push(null)}),M.on("error",Ie=>{F(this,Ie)}),M.on("close",()=>{this.destroy()}),M.on("destroy",()=>{this.destroy()}),this._read=()=>{z&&M.resume&&(z=!1,M.resume())};const Ae=l(M);for(let Ie=1;Ie<Ae.length;Ie++){const Ke=Ae[Ie];this[Ke]===void 0&&typeof M[Ke]=="function"&&(this[Ke]=M[Ke].bind(M))}return this},Te.prototype[f]=function(){return Y(this)},Te.prototype.iterator=function(M){return M!==void 0&&K(M,"options"),Y(this,M)};function Y(M,z){typeof M.read!="function"&&(M=Te.wrap(M,{objectMode:!0}));const Ae=ye(M,z);return Ae.stream=M,Ae}async function*ye(M,z){let Ae=fe;function Ie(tt){this===M?(Ae(),Ae=fe):Ae=tt}M.on("readable",Ie);let Ke;const St=w(M,{writable:!1},tt=>{Ke=tt?I(Ke,tt):null,Ae(),Ae=fe});try{for(;;){const tt=M.destroyed?null:M.read();if(tt!==null)yield tt;else{if(Ke)throw Ke;if(Ke===null)return;await new h(Ie)}}}catch(tt){throw Ke=I(Ke,tt),Ke}finally{(Ke||z?.destroyOnReturn!==!1)&&(Ke===void 0||M._readableState.autoDestroy)?_.destroyer(M,null):(M.off("readable",Ie),St())}}c(Te.prototype,{readable:{__proto__:null,get(){const M=this._readableState;return!!M&&M.readable!==!1&&!M.destroyed&&!M.errorEmitted&&!M.endEmitted},set(M){this._readableState&&(this._readableState.readable=!!M)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(M){this._readableState&&(this._readableState.flowing=M)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(M){this._readableState&&(this._readableState.destroyed=M)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),c(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ce]!==!1},set(M){this[ce]=!!M}}}),Te._fromList=Ne;function Ne(M,z){if(z.length===0)return null;let Ae;return z.objectMode?Ae=z.buffer.shift():!M||M>=z.length?(z.decoder?Ae=z.buffer.join(""):z.buffer.length===1?Ae=z.buffer.first():Ae=z.buffer.concat(z.length),z.buffer.clear()):Ae=z.buffer.consume(M,z.decoder),Ae}function Be(M){const z=M._readableState;T("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,e.nextTick(Ge,z,M))}function Ge(M,z){if(T("endReadableNT",M.endEmitted,M.length),!M.errored&&!M.closeEmitted&&!M.endEmitted&&M.length===0){if(M.endEmitted=!0,z.emit("end"),z.writable&&z.allowHalfOpen===!1)e.nextTick(Ue,z);else if(M.autoDestroy){const Ae=z._writableState;(!Ae||Ae.autoDestroy&&(Ae.finished||Ae.writable===!1))&&z.destroy()}}}function Ue(M){M.writable&&!M.writableEnded&&!M.destroyed&&M.end()}Te.from=function(M,z){return W(Te,M,z)};let Xe;function qe(){return Xe===void 0&&(Xe={}),Xe}return Te.fromWeb=function(M,z){return qe().newStreamReadableFromReadableStream(M,z)},Te.toWeb=function(M,z){return qe().newReadableStreamFromStreamReadable(M,z)},Te.wrap=function(M,z){var Ae,Ie;return new Te({objectMode:(Ae=(Ie=M.readableObjectMode)!==null&&Ie!==void 0?Ie:M.objectMode)!==null&&Ae!==void 0?Ae:!0,...z,destroy(Ke,St){_.destroyer(M,Ke),St(Ke)}}).wrap(M)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=requireBrowser$1(),{ArrayPrototypeSlice:r,Error:i,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:d}=requirePrimordials();writable=K,K.WritableState=q;const{EventEmitter:p}=requireEvents(),f=requireLegacy().Stream,{Buffer:m}=requireBuffer(),g=requireDestroy(),{addAbortSignal:E}=requireAddAbortSignal(),{getHighWaterMark:v,getDefaultHighWaterMark:b}=requireState(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:_,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:H}=requireErrors().codes,{errorOrDestroy:B}=g;l(K.prototype,f.prototype),l(K,f);function O(){}const V=h("kOnFinished");function q(G,ee,pe){typeof pe!="boolean"&&(pe=ee instanceof requireDuplex()),this.objectMode=!!(G&&G.objectMode),pe&&(this.objectMode=this.objectMode||!!(G&&G.writableObjectMode)),this.highWaterMark=G?v(this,G,"writableHighWaterMark",pe):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const be=!!(G&&G.decodeStrings===!1);this.decodeStrings=!be,this.defaultEncoding=G&&G.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,ee),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ue(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!G||G.emitClose!==!1,this.autoDestroy=!G||G.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function ue(G){G.buffered=[],G.bufferedIndex=0,G.allBuffers=!0,G.allNoop=!0}q.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},a(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K(G){const ee=this instanceof requireDuplex();if(!ee&&!s(K,this))return new K(G);this._writableState=new q(G,this,ee),G&&(typeof G.write=="function"&&(this._write=G.write),typeof G.writev=="function"&&(this._writev=G.writev),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.final=="function"&&(this._final=G.final),typeof G.construct=="function"&&(this._construct=G.construct),G.signal&&E(G.signal,this)),f.call(this,G),g.construct(this,()=>{const pe=this._writableState;pe.writing||oe(this,pe),Z(this,pe)})}a(K,d,{__proto__:null,value:function(G){return s(this,G)?!0:this!==K?!1:G&&G._writableState instanceof q}}),K.prototype.pipe=function(){B(this,new k)};function ce(G,ee,pe,be){const Re=G._writableState;if(typeof pe=="function")be=pe,pe=Re.defaultEncoding;else{if(!pe)pe=Re.defaultEncoding;else if(pe!=="buffer"&&!m.isEncoding(pe))throw new H(pe);typeof be!="function"&&(be=O)}if(ee===null)throw new R;if(!Re.objectMode)if(typeof ee=="string")Re.decodeStrings!==!1&&(ee=m.from(ee,pe),pe="buffer");else if(ee instanceof m)pe="buffer";else if(f._isUint8Array(ee))ee=f._uint8ArrayToBuffer(ee),pe="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],ee);let je;return Re.ending?je=new I:Re.destroyed&&(je=new _("write")),je?(e.nextTick(be,je),B(G,je,!0),je):(Re.pendingcb++,we(G,Re,ee,pe,be))}K.prototype.write=function(G,ee,pe){return ce(this,G,ee,pe)===!0},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){const G=this._writableState;G.corked&&(G.corked--,G.writing||oe(this,G))},K.prototype.setDefaultEncoding=function(ee){if(typeof ee=="string"&&(ee=u(ee)),!m.isEncoding(ee))throw new H(ee);return this._writableState.defaultEncoding=ee,this};function we(G,ee,pe,be,Re){const je=ee.objectMode?1:pe.length;ee.length+=je;const J=ee.length<ee.highWaterMark;return J||(ee.needDrain=!0),ee.writing||ee.corked||ee.errored||!ee.constructed?(ee.buffered.push({chunk:pe,encoding:be,callback:Re}),ee.allBuffers&&be!=="buffer"&&(ee.allBuffers=!1),ee.allNoop&&Re!==O&&(ee.allNoop=!1)):(ee.writelen=je,ee.writecb=Re,ee.writing=!0,ee.sync=!0,G._write(pe,be,ee.onwrite),ee.sync=!1),J&&!ee.errored&&!ee.destroyed}function W(G,ee,pe,be,Re,je,J){ee.writelen=be,ee.writecb=J,ee.writing=!0,ee.sync=!0,ee.destroyed?ee.onwrite(new _("write")):pe?G._writev(Re,ee.onwrite):G._write(Re,je,ee.onwrite),ee.sync=!1}function fe(G,ee,pe,be){--ee.pendingcb,be(pe),se(ee),B(G,pe)}function F(G,ee){const pe=G._writableState,be=pe.sync,Re=pe.writecb;if(typeof Re!="function"){B(G,new T);return}pe.writing=!1,pe.writecb=null,pe.length-=pe.writelen,pe.writelen=0,ee?(ee.stack,pe.errored||(pe.errored=ee),G._readableState&&!G._readableState.errored&&(G._readableState.errored=ee),be?e.nextTick(fe,G,pe,ee,Re):fe(G,pe,ee,Re)):(pe.buffered.length>pe.bufferedIndex&&oe(G,pe),be?pe.afterWriteTickInfo!==null&&pe.afterWriteTickInfo.cb===Re?pe.afterWriteTickInfo.count++:(pe.afterWriteTickInfo={count:1,cb:Re,stream:G,state:pe},e.nextTick(L,pe.afterWriteTickInfo)):Q(G,pe,1,Re))}function L({stream:G,state:ee,count:pe,cb:be}){return ee.afterWriteTickInfo=null,Q(G,ee,pe,be)}function Q(G,ee,pe,be){for(!ee.ending&&!G.destroyed&&ee.length===0&&ee.needDrain&&(ee.needDrain=!1,G.emit("drain"));pe-- >0;)ee.pendingcb--,be();ee.destroyed&&se(ee),Z(G,ee)}function se(G){if(G.writing)return;for(let Re=G.bufferedIndex;Re<G.buffered.length;++Re){var ee;const{chunk:je,callback:J}=G.buffered[Re],Se=G.objectMode?1:je.length;G.length-=Se,J((ee=G.errored)!==null&&ee!==void 0?ee:new _("write"))}const pe=G[V].splice(0);for(let Re=0;Re<pe.length;Re++){var be;pe[Re]((be=G.errored)!==null&&be!==void 0?be:new _("end"))}ue(G)}function oe(G,ee){if(ee.corked||ee.bufferProcessing||ee.destroyed||!ee.constructed)return;const{buffered:pe,bufferedIndex:be,objectMode:Re}=ee,je=pe.length-be;if(!je)return;let J=be;if(ee.bufferProcessing=!0,je>1&&G._writev){ee.pendingcb-=je-1;const Se=ee.allNoop?O:Te=>{for(let $e=J;$e<pe.length;++$e)pe[$e].callback(Te)},Pe=ee.allNoop&&J===0?pe:r(pe,J);Pe.allBuffers=ee.allBuffers,W(G,ee,!0,ee.length,Pe,"",Se),ue(ee)}else{do{const{chunk:Se,encoding:Pe,callback:Te}=pe[J];pe[J++]=null;const $e=Re?1:Se.length;W(G,ee,!1,$e,Se,Pe,Te)}while(J<pe.length&&!ee.writing);J===pe.length?ue(ee):J>256?(pe.splice(0,J),ee.bufferedIndex=0):ee.bufferedIndex=J}ee.bufferProcessing=!1}K.prototype._write=function(G,ee,pe){if(this._writev)this._writev([{chunk:G,encoding:ee}],pe);else throw new w("_write()")},K.prototype._writev=null,K.prototype.end=function(G,ee,pe){const be=this._writableState;typeof G=="function"?(pe=G,G=null,ee=null):typeof ee=="function"&&(pe=ee,ee=null);let Re;if(G!=null){const je=ce(this,G,ee);je instanceof i&&(Re=je)}return be.corked&&(be.corked=1,this.uncork()),Re||(!be.errored&&!be.ending?(be.ending=!0,Z(this,be,!0),be.ended=!0):be.finished?Re=new P("end"):be.destroyed&&(Re=new _("end"))),typeof pe=="function"&&(Re||be.finished?e.nextTick(pe,Re):be[V].push(pe)),this};function ge(G){return G.ending&&!G.destroyed&&G.constructed&&G.length===0&&!G.errored&&G.buffered.length===0&&!G.finished&&!G.writing&&!G.errorEmitted&&!G.closeEmitted}function ve(G,ee){let pe=!1;function be(Re){if(pe){B(G,Re??T());return}if(pe=!0,ee.pendingcb--,Re){const je=ee[V].splice(0);for(let J=0;J<je.length;J++)je[J](Re);B(G,Re,ee.sync)}else ge(ee)&&(ee.prefinished=!0,G.emit("prefinish"),ee.pendingcb++,e.nextTick(le,G,ee))}ee.sync=!0,ee.pendingcb++;try{G._final(be)}catch(Re){be(Re)}ee.sync=!1}function _e(G,ee){!ee.prefinished&&!ee.finalCalled&&(typeof G._final=="function"&&!ee.destroyed?(ee.finalCalled=!0,ve(G,ee)):(ee.prefinished=!0,G.emit("prefinish")))}function Z(G,ee,pe){ge(ee)&&(_e(G,ee),ee.pendingcb===0&&(pe?(ee.pendingcb++,e.nextTick((be,Re)=>{ge(Re)?le(be,Re):Re.pendingcb--},G,ee)):ge(ee)&&(ee.pendingcb++,le(G,ee))))}function le(G,ee){ee.pendingcb--,ee.finished=!0;const pe=ee[V].splice(0);for(let be=0;be<pe.length;be++)pe[be]();if(G.emit("finish"),ee.autoDestroy){const be=G._readableState;(!be||be.autoDestroy&&(be.endEmitted||be.readable===!1))&&G.destroy()}}c(K.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(G){this._writableState&&(this._writableState.destroyed=G)}},writable:{__proto__:null,get(){const G=this._writableState;return!!G&&G.writable!==!1&&!G.destroyed&&!G.errored&&!G.ending&&!G.ended},set(G){this._writableState&&(this._writableState.writable=!!G)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const G=this._writableState;return G?!G.destroyed&&!G.ending&&G.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Ce=g.destroy;K.prototype.destroy=function(G,ee){const pe=this._writableState;return!pe.destroyed&&(pe.bufferedIndex<pe.buffered.length||pe[V].length)&&e.nextTick(se,pe),Ce.call(this,G,ee),this},K.prototype._undestroy=g.undestroy,K.prototype._destroy=function(G,ee){ee(G)},K.prototype[p.captureRejectionSymbol]=function(G){this.destroy(G)};let He;function ae(){return He===void 0&&(He={}),He}return K.fromWeb=function(G,ee){return ae().newStreamWritableFromWritableStream(G,ee)},K.toWeb=function(G){return ae().newWritableStreamFromStreamWritable(G)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=requireBrowser$1(),r=requireBuffer(),{isReadable:i,isWritable:s,isIterable:a,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:p}=requireUtils(),f=requireEndOfStream(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:E}}=requireErrors(),{destroyer:v}=requireDestroy(),b=requireDuplex(),y=requireReadable(),w=requireWritable(),{createDeferredPromise:T}=requireUtil(),k=requireFrom(),_=globalThis.Blob||r.Blob,P=typeof _<"u"?function(q){return q instanceof _}:function(q){return!1},R=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:I}=requirePrimordials();class H extends b{constructor(q){super(q),q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function V(q,ue){if(h(q))return q;if(l(q))return O({readable:q});if(u(q))return O({writable:q});if(c(q))return O({writable:!1,readable:!1});if(d(q))return O({readable:y.fromWeb(q)});if(p(q))return O({writable:w.fromWeb(q)});if(typeof q=="function"){const{value:ce,write:we,final:W,destroy:fe}=B(q);if(a(ce))return k(H,ce,{objectMode:!0,write:we,final:W,destroy:fe});const F=ce?.then;if(typeof F=="function"){let L;const Q=I(F,ce,se=>{if(se!=null)throw new E("nully","body",se)},se=>{v(L,se)});return L=new H({objectMode:!0,readable:!1,write:we,final(se){W(async()=>{try{await Q,e.nextTick(se,null)}catch(oe){e.nextTick(se,oe)}})},destroy:fe})}throw new E("Iterable, AsyncIterable or AsyncFunction",ue,ce)}if(P(q))return V(q.arrayBuffer());if(a(q))return k(H,q,{objectMode:!0,writable:!1});if(d(q?.readable)&&p(q?.writable))return H.fromWeb(q);if(typeof q?.writable=="object"||typeof q?.readable=="object"){const ce=q!=null&&q.readable?l(q?.readable)?q?.readable:V(q.readable):void 0,we=q!=null&&q.writable?u(q?.writable)?q?.writable:V(q.writable):void 0;return O({readable:ce,writable:we})}const K=q?.then;if(typeof K=="function"){let ce;return I(K,q,we=>{we!=null&&ce.push(we),ce.push(null)},we=>{v(ce,we)}),ce=new H({objectMode:!0,writable:!1,read(){}})}throw new g(ue,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],q)};function B(V){let{promise:q,resolve:ue}=T();const K=new R,ce=K.signal;return{value:V((async function*(){for(;;){const W=q;q=null;const{chunk:fe,done:F,cb:L}=await W;if(e.nextTick(L),F)return;if(ce.aborted)throw new m(void 0,{cause:ce.reason});({promise:q,resolve:ue}=T()),yield fe}})(),{signal:ce}),write(W,fe,F){const L=ue;ue=null,L({chunk:W,done:!1,cb:F})},final(W){const fe=ue;ue=null,fe({done:!0,cb:W})},destroy(W,fe){K.abort(),fe(W)}}}function O(V){const q=V.readable&&typeof V.readable.read!="function"?y.wrap(V.readable):V.readable,ue=V.writable;let K=!!i(q),ce=!!s(ue),we,W,fe,F,L;function Q(se){const oe=F;F=null,oe?oe(se):se&&L.destroy(se)}return L=new H({readableObjectMode:!!(q!=null&&q.readableObjectMode),writableObjectMode:!!(ue!=null&&ue.writableObjectMode),readable:K,writable:ce}),ce&&(f(ue,se=>{ce=!1,se&&v(q,se),Q(se)}),L._write=function(se,oe,ge){ue.write(se,oe)?ge():we=ge},L._final=function(se){ue.end(),W=se},ue.on("drain",function(){if(we){const se=we;we=null,se()}}),ue.on("finish",function(){if(W){const se=W;W=null,se()}})),K&&(f(q,se=>{K=!1,se&&v(q,se),Q(se)}),q.on("readable",function(){if(fe){const se=fe;fe=null,se()}}),q.on("end",function(){L.push(null)}),L._read=function(){for(;;){const se=q.read();if(se===null){fe=L._read;return}if(!L.push(se))return}}),L._destroy=function(se,oe){!se&&F!==null&&(se=new m),fe=null,we=null,W=null,F===null?oe(se):(F=oe,v(ue,se),v(q,se))},L}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:i,ObjectSetPrototypeOf:s}=requirePrimordials();duplex=l;const a=requireReadable(),c=requireWritable();s(l.prototype,a.prototype),s(l,a);{const p=i(c.prototype);for(let f=0;f<p.length;f++){const m=p[f];l.prototype[m]||(l.prototype[m]=c.prototype[m])}}function l(p){if(!(this instanceof l))return new l(p);a.call(this,p),c.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(l.prototype,{writable:{__proto__:null,...r(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...r(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...r(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...r(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...r(c.prototype,"writableLength")},writableFinished:{__proto__:null,...r(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...r(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...r(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...r(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});let u;function h(){return u===void 0&&(u={}),u}l.fromWeb=function(p,f){return h().newStreamDuplexFromReadableWritablePair(p,f)},l.toWeb=function(p){return h().newReadableWritablePairFromDuplex(p)};let d;return l.from=function(p){return d||(d=requireDuplexify()),d(p,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:e,Symbol:r}=requirePrimordials();transform=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=requireErrors().codes,s=requireDuplex(),{getHighWaterMark:a}=requireState();e(l.prototype,s.prototype),e(l,s);const c=r("kCallback");function l(d){if(!(this instanceof l))return new l(d);const p=d?a(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),s.call(this,d),this._readableState.sync=!1,this[c]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",h)}function u(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,f)=>{if(p){d?d(p):this.destroy(p);return}f!=null&&this.push(f),this.push(null),d&&d()}):(this.push(null),d&&d())}function h(){this._final!==u&&u.call(this)}return l.prototype._final=u,l.prototype._transform=function(d,p,f){throw new i("_transform()")},l.prototype._write=function(d,p,f){const m=this._readableState,g=this._writableState,E=m.length;this._transform(d,p,(v,b)=>{if(v){f(v);return}b!=null&&this.push(b),g.ended||E===m.length||m.length<m.highWaterMark?f():this[c]=f})},l.prototype._read=function(){if(this[c]){const d=this[c];this[c]=null,d()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:e}=requirePrimordials();passthrough=i;const r=requireTransform();e(i.prototype,r.prototype),e(i,r);function i(s){if(!(this instanceof i))return new i(s);r.call(this,s)}return i.prototype._transform=function(s,a,c){c(null,s)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const e=requireBrowser$1(),{ArrayIsArray:r,Promise:i,SymbolAsyncIterator:s,SymbolDispose:a}=requirePrimordials(),c=requireEndOfStream(),{once:l}=requireUtil(),u=requireDestroy(),h=requireDuplex(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:E},AbortError:v}=requireErrors(),{validateFunction:b,validateAbortSignal:y}=requireValidators(),{isIterable:w,isReadable:T,isReadableNodeStream:k,isNodeStream:_,isTransformStream:P,isWebStream:R,isReadableStream:I,isReadableFinished:H}=requireUtils(),B=globalThis.AbortController||requireBrowser$2().AbortController;let O,V,q;function ue(se,oe,ge){let ve=!1;se.on("close",()=>{ve=!0});const _e=c(se,{readable:oe,writable:ge},Z=>{ve=!Z});return{destroy:Z=>{ve||(ve=!0,u.destroyer(se,Z||new g("pipe")))},cleanup:_e}}function K(se){return b(se[se.length-1],"streams[stream.length - 1]"),se.pop()}function ce(se){if(w(se))return se;if(k(se))return we(se);throw new p("val",["Readable","Iterable","AsyncIterable"],se)}async function*we(se){V||(V=requireReadable()),yield*V.prototype[s].call(se)}async function W(se,oe,ge,{end:ve}){let _e,Z=null;const le=ae=>{if(ae&&(_e=ae),Z){const G=Z;Z=null,G()}},Ce=()=>new i((ae,G)=>{_e?G(_e):Z=()=>{_e?G(_e):ae()}});oe.on("drain",le);const He=c(oe,{readable:!1},le);try{oe.writableNeedDrain&&await Ce();for await(const ae of se)oe.write(ae)||await Ce();ve&&(oe.end(),await Ce()),ge()}catch(ae){ge(_e!==ae?d(_e,ae):ae)}finally{He(),oe.off("drain",le)}}async function fe(se,oe,ge,{end:ve}){P(oe)&&(oe=oe.writable);const _e=oe.getWriter();try{for await(const Z of se)await _e.ready,_e.write(Z).catch(()=>{});await _e.ready,ve&&await _e.close(),ge()}catch(Z){try{await _e.abort(Z),ge(Z)}catch(le){ge(le)}}}function F(...se){return L(se,l(K(se)))}function L(se,oe,ge){if(se.length===1&&r(se[0])&&(se=se[0]),se.length<2)throw new m("streams");const ve=new B,_e=ve.signal,Z=ge?.signal,le=[];y(Z,"options.signal");function Ce(){Re(new v)}q=q||requireUtil().addAbortListener;let He;Z&&(He=q(Z,Ce));let ae,G;const ee=[];let pe=0;function be(Te){Re(Te,--pe===0)}function Re(Te,$e){var gt;if(Te&&(!ae||ae.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ae=Te),!(!ae&&!$e)){for(;ee.length;)ee.shift()(ae);(gt=He)===null||gt===void 0||gt[a](),ve.abort(),$e&&(ae||le.forEach(ft=>ft()),e.nextTick(oe,ae,G))}}let je;for(let Te=0;Te<se.length;Te++){const $e=se[Te],gt=Te<se.length-1,ft=Te>0,pt=gt||ge?.end!==!1,D=Te===se.length-1;if(_($e)){let j=function(A){A&&A.name!=="AbortError"&&A.code!=="ERR_STREAM_PREMATURE_CLOSE"&&be(A)};var Pe=j;if(pt){const{destroy:A,cleanup:U}=ue($e,gt,ft);ee.push(A),T($e)&&D&&le.push(U)}$e.on("error",j),T($e)&&D&&le.push(()=>{$e.removeListener("error",j)})}if(Te===0)if(typeof $e=="function"){if(je=$e({signal:_e}),!w(je))throw new f("Iterable, AsyncIterable or Stream","source",je)}else w($e)||k($e)||P($e)?je=$e:je=h.from($e);else if(typeof $e=="function"){if(P(je)){var J;je=ce((J=je)===null||J===void 0?void 0:J.readable)}else je=ce(je);if(je=$e(je,{signal:_e}),gt){if(!w(je,!0))throw new f("AsyncIterable",`transform[${Te-1}]`,je)}else{var Se;O||(O=requirePassthrough());const j=new O({objectMode:!0}),A=(Se=je)===null||Se===void 0?void 0:Se.then;if(typeof A=="function")pe++,A.call(je,he=>{G=he,he!=null&&j.write(he),pt&&j.end(),e.nextTick(be)},he=>{j.destroy(he),e.nextTick(be,he)});else if(w(je,!0))pe++,W(je,j,be,{end:pt});else if(I(je)||P(je)){const he=je.readable||je;pe++,W(he,j,be,{end:pt})}else throw new f("AsyncIterable or Promise","destination",je);je=j;const{destroy:U,cleanup:te}=ue(je,!1,!0);ee.push(U),D&&le.push(te)}}else if(_($e)){if(k(je)){pe+=2;const j=Q(je,$e,be,{end:pt});T($e)&&D&&le.push(j)}else if(P(je)||I(je)){const j=je.readable||je;pe++,W(j,$e,be,{end:pt})}else if(w(je))pe++,W(je,$e,be,{end:pt});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=$e}else if(R($e)){if(k(je))pe++,fe(ce(je),$e,be,{end:pt});else if(I(je)||w(je))pe++,fe(je,$e,be,{end:pt});else if(P(je))pe++,fe(je.readable,$e,be,{end:pt});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],je);je=$e}else je=h.from($e)}return(_e!=null&&_e.aborted||Z!=null&&Z.aborted)&&e.nextTick(Ce),je}function Q(se,oe,ge,{end:ve}){let _e=!1;if(oe.on("close",()=>{_e||ge(new E)}),se.pipe(oe,{end:!1}),ve){let le=function(){_e=!0,oe.end()};var Z=le;H(se)?e.nextTick(le):se.once("end",le)}else ge();return c(se,{readable:!0,writable:!1},le=>{const Ce=se._readableState;le&&le.code==="ERR_STREAM_PREMATURE_CLOSE"&&Ce&&Ce.ended&&!Ce.errored&&!Ce.errorEmitted?se.once("end",ge).once("error",ge):ge(le)}),c(oe,{readable:!1,writable:!0},ge)}return pipeline_1={pipelineImpl:L,pipeline:F},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:e}=requirePipeline(),r=requireDuplex(),{destroyer:i}=requireDestroy(),{isNodeStream:s,isReadable:a,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:h,isReadableStream:d}=requireUtils(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:m}}=requireErrors(),g=requireEndOfStream();return compose=function(...v){if(v.length===0)throw new m("streams");if(v.length===1)return r.from(v[0]);const b=[...v];if(typeof v[0]=="function"&&(v[0]=r.from(v[0])),typeof v[v.length-1]=="function"){const O=v.length-1;v[O]=r.from(v[O])}for(let O=0;O<v.length;++O)if(!(!s(v[O])&&!l(v[O]))){if(O<v.length-1&&!(a(v[O])||d(v[O])||u(v[O])))throw new f(`streams[${O}]`,b[O],"must be readable");if(O>0&&!(c(v[O])||h(v[O])||u(v[O])))throw new f(`streams[${O}]`,b[O],"must be writable")}let y,w,T,k,_;function P(O){const V=k;k=null,V?V(O):O?_.destroy(O):!B&&!H&&_.destroy()}const R=v[0],I=e(v,P),H=!!(c(R)||h(R)||u(R)),B=!!(a(I)||d(I)||u(I));if(_=new r({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(I!=null&&I.readableObjectMode),writable:H,readable:B}),H){if(s(R))_._write=function(V,q,ue){R.write(V,q)?ue():y=ue},_._final=function(V){R.end(),w=V},R.on("drain",function(){if(y){const V=y;y=null,V()}});else if(l(R)){const q=(u(R)?R.writable:R).getWriter();_._write=async function(ue,K,ce){try{await q.ready,q.write(ue).catch(()=>{}),ce()}catch(we){ce(we)}},_._final=async function(ue){try{await q.ready,q.close().catch(()=>{}),w=ue}catch(K){ue(K)}}}const O=u(I)?I.readable:I;g(O,()=>{if(w){const V=w;w=null,V()}})}if(B){if(s(I))I.on("readable",function(){if(T){const O=T;T=null,O()}}),I.on("end",function(){_.push(null)}),_._read=function(){for(;;){const O=I.read();if(O===null){T=_._read;return}if(!_.push(O))return}};else if(l(I)){const V=(u(I)?I.readable:I).getReader();_._read=async function(){for(;;)try{const{value:q,done:ue}=await V.read();if(!_.push(q))return;if(ue){_.push(null);return}}catch{return}}}}return _._destroy=function(O,V){!O&&k!==null&&(O=new p),T=null,y=null,w=null,k===null?V(O):(k=V,s(I)&&i(I,O))},_},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const e=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:c}=requireErrors(),{validateAbortSignal:l,validateInteger:u,validateObject:h}=requireValidators(),d=requirePrimordials().Symbol("kWeak"),p=requirePrimordials().Symbol("kResistStopPropagation"),{finished:f}=requireEndOfStream(),m=requireCompose(),{addAbortSignalNoValidate:g}=requireAddAbortSignal(),{isWritable:E,isNodeStream:v}=requireUtils(),{deprecate:b}=requireUtil(),{ArrayPrototypePush:y,Boolean:w,MathFloor:T,Number:k,NumberIsNaN:_,Promise:P,PromiseReject:R,PromiseResolve:I,PromisePrototypeThen:H,Symbol:B}=requirePrimordials(),O=B("kEmpty"),V=B("kEof");function q(Z,le){if(le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),v(Z)&&!E(Z))throw new r("stream",Z,"must be writable");const Ce=m(this,Z);return le!=null&&le.signal&&g(le.signal,Ce),Ce}function ue(Z,le){if(typeof Z!="function")throw new i("fn",["Function","AsyncFunction"],Z);le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal");let Ce=1;le?.concurrency!=null&&(Ce=T(le.concurrency));let He=Ce-1;return le?.highWaterMark!=null&&(He=T(le.highWaterMark)),u(Ce,"options.concurrency",1),u(He,"options.highWaterMark",0),He+=Ce,async function*(){const G=requireUtil().AbortSignalAny([le?.signal].filter(w)),ee=this,pe=[],be={signal:G};let Re,je,J=!1,Se=0;function Pe(){J=!0,Te()}function Te(){Se-=1,$e()}function $e(){je&&!J&&Se<Ce&&pe.length<He&&(je(),je=null)}async function gt(){try{for await(let ft of ee){if(J)return;if(G.aborted)throw new c;try{if(ft=Z(ft,be),ft===O)continue;ft=I(ft)}catch(pt){ft=R(pt)}Se+=1,H(ft,Te,Pe),pe.push(ft),Re&&(Re(),Re=null),!J&&(pe.length>=He||Se>=Ce)&&await new P(pt=>{je=pt})}pe.push(V)}catch(ft){const pt=R(ft);H(pt,Te,Pe),pe.push(pt)}finally{J=!0,Re&&(Re(),Re=null)}}gt();try{for(;;){for(;pe.length>0;){const ft=await pe[0];if(ft===V)return;if(G.aborted)throw new c;ft!==O&&(yield ft),pe.shift(),$e()}await new P(ft=>{Re=ft})}}finally{J=!0,je&&(je(),je=null)}}.call(this)}function K(Z=void 0){return Z!=null&&h(Z,"options"),Z?.signal!=null&&l(Z.signal,"options.signal"),async function*(){let Ce=0;for await(const ae of this){var He;if(Z!=null&&(He=Z.signal)!==null&&He!==void 0&&He.aborted)throw new c({cause:Z.signal.reason});yield[Ce++,ae]}}.call(this)}async function ce(Z,le=void 0){for await(const Ce of F.call(this,Z,le))return!0;return!1}async function we(Z,le=void 0){if(typeof Z!="function")throw new i("fn",["Function","AsyncFunction"],Z);return!await ce.call(this,async(...Ce)=>!await Z(...Ce),le)}async function W(Z,le){for await(const Ce of F.call(this,Z,le))return Ce}async function fe(Z,le){if(typeof Z!="function")throw new i("fn",["Function","AsyncFunction"],Z);async function Ce(He,ae){return await Z(He,ae),O}for await(const He of ue.call(this,Ce,le));}function F(Z,le){if(typeof Z!="function")throw new i("fn",["Function","AsyncFunction"],Z);async function Ce(He,ae){return await Z(He,ae)?He:O}return ue.call(this,Ce,le)}class L extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Z,le,Ce){var He;if(typeof Z!="function")throw new i("reducer",["Function","AsyncFunction"],Z);Ce!=null&&h(Ce,"options"),Ce?.signal!=null&&l(Ce.signal,"options.signal");let ae=arguments.length>1;if(Ce!=null&&(He=Ce.signal)!==null&&He!==void 0&&He.aborted){const Re=new c(void 0,{cause:Ce.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(Re)),Re}const G=new e,ee=G.signal;if(Ce!=null&&Ce.signal){const Re={once:!0,[d]:this,[p]:!0};Ce.signal.addEventListener("abort",()=>G.abort(),Re)}let pe=!1;try{for await(const Re of this){var be;if(pe=!0,Ce!=null&&(be=Ce.signal)!==null&&be!==void 0&&be.aborted)throw new c;ae?le=await Z(le,Re,{signal:ee}):(le=Re,ae=!0)}if(!pe&&!ae)throw new L}finally{G.abort()}return le}async function se(Z){Z!=null&&h(Z,"options"),Z?.signal!=null&&l(Z.signal,"options.signal");const le=[];for await(const He of this){var Ce;if(Z!=null&&(Ce=Z.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new c(void 0,{cause:Z.signal.reason});y(le,He)}return le}function oe(Z,le){const Ce=ue.call(this,Z,le);return async function*(){for await(const ae of Ce)yield*ae}.call(this)}function ge(Z){if(Z=k(Z),_(Z))return 0;if(Z<0)throw new a("number",">= 0",Z);return Z}function ve(Z,le=void 0){return le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),Z=ge(Z),async function*(){var He;if(le!=null&&(He=le.signal)!==null&&He!==void 0&&He.aborted)throw new c;for await(const G of this){var ae;if(le!=null&&(ae=le.signal)!==null&&ae!==void 0&&ae.aborted)throw new c;Z--<=0&&(yield G)}}.call(this)}function _e(Z,le=void 0){return le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),Z=ge(Z),async function*(){var He;if(le!=null&&(He=le.signal)!==null&&He!==void 0&&He.aborted)throw new c;for await(const G of this){var ae;if(le!=null&&(ae=le.signal)!==null&&ae!==void 0&&ae.aborted)throw new c;if(Z-- >0&&(yield G),Z<=0)return}}.call(this)}return operators.streamReturningOperators={asIndexedPairs:b(K,"readable.asIndexedPairs will be removed in a future version."),drop:ve,filter:F,flatMap:oe,map:ue,take:_e,compose:q},operators.promiseReturningOperators={every:we,forEach:fe,reduce:Q,toArray:se,some:ce,find:W},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:r}=requirePrimordials(),{isIterable:i,isNodeStream:s,isWebStream:a}=requireUtils(),{pipelineImpl:c}=requirePipeline(),{finished:l}=requireEndOfStream();requireStream();function u(...h){return new r((d,p)=>{let f,m;const g=h[h.length-1];if(g&&typeof g=="object"&&!s(g)&&!i(g)&&!a(g)){const E=e(h);f=E.signal,m=E.end}c(h,(E,v)=>{E?p(E):d(v)},{signal:f,end:m})})}return promises={finished:l,pipeline:u},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=requireBuffer(),{ObjectDefineProperty:r,ObjectKeys:i,ReflectApply:s}=requirePrimordials(),{promisify:{custom:a}}=requireUtil(),{streamReturningOperators:c,promiseReturningOperators:l}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=requireErrors(),h=requireCompose(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=requireState(),{pipeline:f}=requirePipeline(),{destroyer:m}=requireDestroy(),g=requireEndOfStream(),E=requirePromises(),v=requireUtils(),b=stream.exports=requireLegacy().Stream;b.isDestroyed=v.isDestroyed,b.isDisturbed=v.isDisturbed,b.isErrored=v.isErrored,b.isReadable=v.isReadable,b.isWritable=v.isWritable,b.Readable=requireReadable();for(const T of i(c)){let _=function(...P){if(new.target)throw u();return b.Readable.from(s(k,this,P))};var w=_;const k=c[T];r(_,"name",{__proto__:null,value:k.name}),r(_,"length",{__proto__:null,value:k.length}),r(b.Readable.prototype,T,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(const T of i(l)){let _=function(...R){if(new.target)throw u();return s(k,this,R)};var w=_;const k=l[T];r(_,"name",{__proto__:null,value:k.name}),r(_,"length",{__proto__:null,value:k.length}),r(b.Readable.prototype,T,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}b.Writable=requireWritable(),b.Duplex=requireDuplex(),b.Transform=requireTransform(),b.PassThrough=requirePassthrough(),b.pipeline=f;const{addAbortSignal:y}=requireAddAbortSignal();return b.addAbortSignal=y,b.finished=g,b.destroy=m,b.compose=h,b.setDefaultHighWaterMark=d,b.getDefaultHighWaterMark=p,r(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return E}}),r(f,a,{__proto__:null,enumerable:!0,get(){return E.pipeline}}),r(g,a,{__proto__:null,enumerable:!0,get(){return E.finished}}),b.Stream=b,b._isUint8Array=function(k){return k instanceof Uint8Array},b._uint8ArrayToBuffer=function(k){return e.from(k.buffer,k.byteOffset,k.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e){const r=requireStream(),i=requirePromises(),s=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=s,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=r.Stream,e.exports.default=e.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const e=requireBrowser();class r extends e.Readable{constructor(s){super(),this.bytesRead=0,this.released=!1,this.reader=s.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(s=>{delete this.pendingRead,s.done||this.released?this.push(null):(this.bytesRead+=s.value.length,this.push(s.value))}).catch(s=>{this.destroy(s)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=r,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFromUrl=e.parseBlob=e.parseReadableStream=e.parseNodeStream=e.selectCover=e.ratingToStars=e.orderTags=e.parseFromTokenizer=e.parseBuffer=void 0;const r=requireBrowser$3(),i=requireCore(),s=requireLib$1(),a=r("music-metadata-browser:main");var c=requireCore();Object.defineProperty(e,"parseBuffer",{enumerable:!0,get:function(){return c.parseBuffer}}),Object.defineProperty(e,"parseFromTokenizer",{enumerable:!0,get:function(){return c.parseFromTokenizer}}),Object.defineProperty(e,"orderTags",{enumerable:!0,get:function(){return c.orderTags}}),Object.defineProperty(e,"ratingToStars",{enumerable:!0,get:function(){return c.ratingToStars}}),Object.defineProperty(e,"selectCover",{enumerable:!0,get:function(){return c.selectCover}}),e.parseNodeStream=i.parseStream;async function l(p,f,m){const g=new s.ReadableWebToNodeStream(p),E=await(0,e.parseNodeStream)(g,typeof f=="string"?{mimeType:f}:f,m);return await g.close(),E}e.parseReadableStream=l;async function u(p,f){p.type,p.size,p instanceof File&&p.name;const m=p.stream?p.stream():h(p);return l(m,{mimeType:p.type,size:p.size},f)}e.parseBlob=u;function h(p){const f=new FileReader;return new ReadableStream({start(m){f.onloadend=g=>{let E=g.target.result;E instanceof ArrayBuffer&&(E=new Uint8Array(E)),m.enqueue(E),m.close()},f.onerror=g=>{m.close()},f.onabort=g=>{m.close()},f.readAsArrayBuffer(p)}})}async function d(p,f){const m=await fetch(p),g={size:parseInt(m.headers.get("Content-Length"),10),mimeType:m.headers.get("Content-Type")};if(m.ok)if(m.body){const E=await l(m.body,g,f);return a("Closing HTTP-readable-stream..."),m.body.locked||await m.body.cancel(),a("HTTP-readable-stream closed."),E}else return u(await m.blob(),f);else throw new Error(`HTTP error status=${m.status}: ${m.statusText}`)}e.fetchFromUrl=d})(lib$3)),lib$3}var libExports=requireLib();const index=_mergeNamespaces({__proto__:null},[libExports]);function roundKHz(e){if(e==null)return;const r=e/1e3;return Math.round(r*10)/10}function safeSampleRate(e){if(!(e==null||Number.isNaN(e)))return roundKHz(e)}function safeBitrateKbps(e){if(!(e==null||!Number.isFinite(e)))return Math.round(e/1e3)}function extFromName(e){if(e==null||e==="")return;const r=e.split("?")[0].split("#")[0],i=r.lastIndexOf(".");if(i!==-1)return r.substring(i+1).toLowerCase()}function labelFromMimeOrExt(e,r){const i=(e??"").toLowerCase(),s=(r??"").toLowerCase(),a={flac:"FLAC",wav:"WAV",wave:"WAV",aiff:"AIFF",aif:"AIFF",mp3:"MP3",mpeg:"MP3",m4a:"M4A",mp4:"M4A",aac:"AAC",alac:"ALAC",ogg:"OGG",opus:"OPUS",webm:"WEBM"};if(i.includes("flac"))return"FLAC";if(i.includes("x-wav")||i.includes("wav"))return"WAV";if(i.includes("aiff"))return"AIFF";if(i.includes("mpeg"))return"MP3";if(i.includes("aac"))return"AAC";if(i.includes("alac"))return"ALAC";if(i.includes("mp4")||i.includes("m4a"))return"M4A";if(i.includes("ogg")&&i.includes("opus"))return"OPUS";if(i.includes("ogg"))return"OGG";if(i.includes("webm"))return"WEBM";if(s&&a[s])return a[s]}function normalizeCodec(e,r,i,s){const a=(e??"").toLowerCase(),c=(r??"").toLowerCase();return c.includes("flac")?"FLAC":c.includes("alac")||c.includes("apple lossless")?"ALAC":c.includes("aac")?"AAC":c.includes("mp3")||c.includes("mpeg")?"MP3":c.includes("opus")?"OPUS":c.includes("vorbis")?"OGG":c.includes("pcm")&&(a.includes("wav")||a.includes("wave"))?"WAV":c.includes("aiff")||a.includes("aiff")?"AIFF":a.includes("wave")||a.includes("wav")?"WAV":a.includes("flac")?"FLAC":a.includes("mp4")?"M4A":a.includes("ogg")?"OGG":a.includes("webm")?"WEBM":labelFromMimeOrExt(i,s)}async function extractAudioMeta(e){let r;e instanceof File?r=labelFromMimeOrExt(e.type,extFromName(e.name)):typeof e=="string"&&(r=labelFromMimeOrExt(void 0,extFromName(e)));try{if(e instanceof File){const s=(await libExports.parseBlob(e)).format,a=typeof s.bitsPerSample=="number"&&Number.isFinite(s.bitsPerSample)?s.bitsPerSample:void 0,c=safeSampleRate(s.sampleRate),l=safeBitrateKbps(s.bitrate);return{bitDepth:a,sampleRate:c,bitrateKbps:l,codecLabel:normalizeCodec(s.container,s.codec,e.type,extFromName(e.name))??r}}else if(typeof e=="string"){const i=await fetch(e,{mode:"cors"}),s=await i.arrayBuffer(),a=i.headers.get("Content-Type")??void 0,l=(await libExports.parseBuffer(new Uint8Array(s),{mimeType:a,size:s.byteLength})).format,u=typeof l.bitsPerSample=="number"&&Number.isFinite(l.bitsPerSample)?l.bitsPerSample:void 0,h=safeSampleRate(l.sampleRate),d=safeBitrateKbps(l.bitrate);return{bitDepth:u,sampleRate:h,bitrateKbps:d,codecLabel:normalizeCodec(l.container,l.codec,a,extFromName(e))??r}}}catch{}return new Promise(i=>{const s=new Audio;typeof e=="string"?s.src=e:s.src=URL.createObjectURL(e),s.preload="metadata",s.addEventListener("loadedmetadata",()=>{let a,c;try{const l=window,u=l.AudioContext??l.webkitAudioContext;if(u===void 0){i({sampleRate:a,bitrateKbps:c,codecLabel:r});return}const h=new u,d=new XMLHttpRequest;d.open("GET",s.src,!0),d.responseType="arraybuffer",d.onload=function(){const p=d.response;if(!(p instanceof ArrayBuffer)){i({sampleRate:a,bitrateKbps:c,codecLabel:r});return}const f=()=>{a=void 0;const m=Number.isFinite(s.duration)&&s.duration>0;e instanceof File&&m&&(c=Math.round(e.size/s.duration*8/1e3)),i({sampleRate:a,bitrateKbps:c,codecLabel:r})};h.decodeAudioData(p,f,()=>{i({sampleRate:a,bitrateKbps:c,codecLabel:r})})},d.onerror=function(){i({sampleRate:a,bitrateKbps:c,codecLabel:r})},d.send()}catch{i({sampleRate:a,bitrateKbps:c,codecLabel:r})}}),s.addEventListener("error",()=>i({codecLabel:r}))})}const normalizeNumber=e=>{if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const r=e.replace(/[^0-9.]/g,"");if(!r)return;const i=Number(r);return Number.isFinite(i)?i:void 0}},normalizeSampleRate=e=>{const r=normalizeNumber(e);if(r!==void 0)return r>1e3?Math.round(r/1e3*10)/10:r},needsExtraction=e=>e===null?!0:e.bitDepth===void 0||e.sampleRate===void 0||e.bitrateKbps===void 0||e.codecLabel===void 0,mergeMeta=(e,r)=>({bitDepth:e?.bitDepth??r.bitDepth,sampleRate:e?.sampleRate??r.sampleRate,bitrateKbps:e?.bitrateKbps??r.bitrateKbps,codecLabel:e?.codecLabel??r.codecLabel});function useTrackAudioMeta(e){const r=reactExports.useMemo(()=>{if(!e)return null;const a=normalizeNumber(e.bitDepth??null),c=normalizeSampleRate(e.sampleRate??null),l=normalizeNumber(e.bitrateKbps??null),u=inferCodecLabel({file:e.file,url:e.audioUrl,qualityHint:e.quality,codecLabel:e.codecLabel});return!(a!==void 0)&&!(c!==void 0)&&!(l!==void 0)&&!(u!==void 0&&u!=="")?null:{bitDepth:a,sampleRate:c,bitrateKbps:l,codecLabel:u}},[e]),[i,s]=reactExports.useState(r);return reactExports.useEffect(()=>{s(r)},[r]),reactExports.useEffect(()=>{if(e===null)return;const a=!!e.file,c=typeof e.audioUrl=="string"&&e.audioUrl!=="";if(!a&&!c||!needsExtraction(i))return;let l=!1;const u=e.file??e.audioUrl;return u==null?void 0:((async()=>{try{const d=await extractAudioMeta(u);if(l||d===null||d===void 0)return;s(p=>mergeMeta(p,d))}catch(d){console.warn("Failed to extract audio metadata:",d)}})(),()=>{l=!0})},[e,i]),i}const WALL_WARNING_TIME_SECONDS=310,WALL_COLLAPSE_TIME_SECONDS=313,WALL_REQUIRED_COMPLETED_TRACKS=24,WALL_TRACK_SEQUENCE=[{title:"In The Flesh?",aliases:["In the Flesh"]},{title:"The Thin Ice"},{title:"Another Brick In The Wall, Part 1",aliases:["Another Brick in the Wall Part 1"]},{title:"The Happiest Days Of Our Lives",aliases:["The Happiest Days of Our Lives"]},{title:"Another Brick In The Wall, Part 2",aliases:["Another Brick in the Wall Part 2"]},{title:"Mother"},{title:"Goodbye Blue Sky"},{title:"Empty Spaces"},{title:"Young Lust"},{title:"One Of My Turns",aliases:["One of My Turns"]},{title:"Don't Leave Me Now",aliases:["Dont Leave Me Now"]},{title:"Another Brick In The Wall, Part 3",aliases:["Another Brick in the Wall Part 3"]},{title:"Goodbye Cruel World"},{title:"Hey You"},{title:"Is There Anybody Out There?",aliases:["Is There Anybody Out There"]},{title:"Nobody Home"},{title:"Vera"},{title:"Bring The Boys Back Home",aliases:["Bring the Boys Back Home"]},{title:"Comfortably Numb"},{title:"The Show Must Go On"},{title:"In The Flesh",aliases:["In the Flesh (Reprise)","In the Flesh? (Reprise)"]},{title:"Run Like Hell"},{title:"Waiting For The Worms",aliases:["Waiting for the Worms"]},{title:"Stop"},{title:"The Trial"},{title:"Outside The Wall",aliases:["Outside the Wall"]}],stripKnownPrefixes=e=>{let r=e;return r=r.replace(/^[\s._-]*(disc|cd)\s*\d+\s*/g,""),r=r.replace(/^[\s._-]*\d+\s*(?:-|\.|:|\/)\s*/g,""),r=r.replace(/^[\s._-]*\d+\s+/g,""),r=r.replace(/^pink\s+floyd\s*[-:_]?\s*/,""),r=r.replace(/^the\s+wall\s*[-:_]?\s*/,""),r=r.replace(/^[\s._-]+/,""),r},normalizeTitle=e=>{if(!e)return"";let r=e.toLowerCase();return r=r.replace(/\((disc|cd)\s*\d+\)/g," "),r=r.replace(/\[(disc|cd)\s*\d+\]/g," "),r=r.replace(/\b(disc|cd)\s*\d+\b/g," "),r=r.replace(/pink\s+floyd/g," "),r=r.replace(/the\s+wall/g," "),r=stripKnownPrefixes(r),r=r.replace(/[^a-z0-9\s]/g," "),r=r.replace(/\s+/g," "),r.trim()},normalizedWallTrackMap=new Map;WALL_TRACK_SEQUENCE.forEach((e,r)=>{normalizedWallTrackMap.set(normalizeTitle(e.title),r),e.aliases?.forEach(i=>{normalizedWallTrackMap.set(normalizeTitle(i),r)})});const normalizedTrialTitle=normalizeTitle("The Trial"),normalizedOutsideTitle=normalizeTitle("Outside The Wall"),resolveOrderFromNormalized=e=>{if(!e)return null;const r=normalizedWallTrackMap.get(e);if(typeof r=="number")return r;for(const[i,s]of normalizedWallTrackMap.entries())if(i&&(e.includes(i)||i.includes(e)))return s;return null},isPinkFloyd=e=>!e||typeof e.artist!="string"?!1:e.artist.toLowerCase().includes("pink floyd"),isTheWallAlbum=e=>!e||typeof e.album!="string"?!1:e.album.toLowerCase().includes("the wall"),isWallAlbumTrack=e=>isPinkFloyd(e)&&isTheWallAlbum(e),getWallTrackOrder=e=>{if(!e)return null;const r=e.title??e.name;if(typeof r!="string"||r.trim()==="")return null;const i=normalizeTitle(r);return resolveOrderFromNormalized(i)},isTheTrialTrack=e=>getWallTrackOrder(e)===THE_TRIAL_ORDER_INDEX,THE_TRIAL_ORDER_INDEX=normalizedWallTrackMap.get(normalizedTrialTitle)??WALL_TRACK_SEQUENCE.length-2;normalizedWallTrackMap.get(normalizedOutsideTitle)??WALL_TRACK_SEQUENCE.length-1;const LONG_PAUSE_RESET_MS=600*1e3;function useTheWallTracker({currentTrack:e,currentTime:r,isPlaying:i}){const{startWarning:s,cancelWarning:a,triggerCollapse:c,pinkTierUnlocked:l}=useWall(),[u,h]=reactExports.useState(0),d=reactExports.useRef(0),p=reactExports.useRef(null),f=reactExports.useRef(!1),m=reactExports.useRef(!1),g=reactExports.useRef(null),E=reactExports.useCallback(()=>{g.current!==null&&(typeof window<"u"&&window.clearTimeout(g.current),g.current=null)},[]),v=reactExports.useCallback(()=>{(d.current!==0||f.current)&&a(),d.current=0,p.current=null,f.current=!1,m.current=!1,h(0)},[a]),b=reactExports.useCallback(()=>{l||v()},[l,v]),y=reactExports.useCallback(T=>{if(l)return;if(!T){b("missing-track");return}if(!isWallAlbumTrack(T)){b("non-wall");return}const k=getWallTrackOrder(T);if(k===null){b("unknown-order");return}const _=(p.current??-1)+1;if(k===0&&d.current===0){p.current=0,d.current=1,h(1);return}if(k===_){p.current=k;const P=k+1;d.current=P,h(P);return}if(k===0){p.current=0,d.current=1,h(1),f.current=!1,m.current=!1,a();return}b("out-of-order")},[a,b,l]);return reactExports.useEffect(()=>{if(!(l||typeof window>"u"))return i?E():g.current===null&&(g.current=window.setTimeout(()=>{b("long-pause"),g.current=null},LONG_PAUSE_RESET_MS)),()=>{E()}},[i,b,E,l]),reactExports.useEffect(()=>{if(l)return;if(!e){f.current=!1,m.current=!1,a();return}if(!isWallAlbumTrack(e)){d.current>0&&b("switched-album");return}if(!isTheTrialTrack(e)){f.current&&(f.current=!1,a()),m.current=!1;return}if(!(d.current>=WALL_REQUIRED_COMPLETED_TRACKS)){f.current&&(f.current=!1,a());return}r>=WALL_WARNING_TIME_SECONDS&&r<WALL_COLLAPSE_TIME_SECONDS&&!f.current&&(s(),f.current=!0),r<WALL_WARNING_TIME_SECONDS&&f.current&&(f.current=!1,a()),r>=WALL_COLLAPSE_TIME_SECONDS&&!m.current&&(m.current=!0,c())},[e,r,a,b,l,s,c]),reactExports.useMemo(()=>({consecutiveTracks:u,registerNaturalCompletion:y,invalidateSession:b}),[u,y,b])}const FALLBACK_AUDIO_URL="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",STREAM_ONLY_SIZE_MB=50,STREAM_ONLY_DURATION_SECONDS=1200;function MusicPlayer({currentTrack:e,playlist:r,onTrackChange:i,onPlayPause:s,isVisible:a=!0,onControlsReady:c,sidebarCollapsed:l=!1,externalIsPlaying:u,onExpandPlayer:h,onCreatePlaylist:d}){const p=useTrackAudioMeta(e??null),f=reactExports.useRef(null),m=reactExports.useRef(null),g=reactExports.useRef(null),[E,v]=reactExports.useState(!1),[b,y]=reactExports.useState(!1),[w,T]=reactExports.useState(0),[k,_]=reactExports.useState(0),[P,R]=reactExports.useState(!1),[I,H]=reactExports.useState(null),[B,O]=reactExports.useState(1),[V,q]=reactExports.useState(!1),[ue,K]=reactExports.useState(!1),[ce,we]=reactExports.useState(!1),[W,fe]=reactExports.useState(!1),[F,L]=reactExports.useState(!1),[Q,se]=reactExports.useState(!1),[oe,ge]=reactExports.useState(!1),[ve,_e]=reactExports.useState({bass:0,mid:0,treble:0}),[Z,le]=reactExports.useState({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200}),[Ce,He]=reactExports.useState({trackId:null,status:"idle"}),[ae,G]=reactExports.useState(!1),[ee,pe]=reactExports.useState(null),be=reactExports.useRef(!1),Re=reactExports.useRef(E),je={display:"inline-block",color:"#a0a0a0",fontSize:"0.55rem",padding:"1px 2px",backgroundColor:"rgba(255,255,255,0.04)",border:"1px solid #2d2d2d",borderRadius:"4px",lineHeight:"1",whiteSpace:"nowrap"},J=reactExports.useRef(r),Se=reactExports.useRef(i),Pe=reactExports.useRef(s),Te=reactExports.useRef({repeatAll:!1,repeatOne:!1}),$e=reactExports.useRef(!1),gt=reactExports.useRef(null),ft=reactExports.useRef(0),pt=reactExports.useRef(u??!0),D=reactExports.useRef(!1),j=reactExports.useRef(0),A=reactExports.useRef(null),U=reactExports.useRef(()=>{}),te=reactExports.useRef(e),he=reactExports.useRef(B);reactExports.useEffect(()=>{he.current=B},[B]);const ke=useTheWallTracker({currentTrack:e,currentTime:w,isPlaying:b}),ct=reactExports.useRef(ke.registerNaturalCompletion),bt=reactExports.useRef(ke.invalidateSession);reactExports.useEffect(()=>{ct.current=ke.registerNaturalCompletion},[ke.registerNaturalCompletion]),reactExports.useEffect(()=>{bt.current=ke.invalidateSession},[ke.invalidateSession]),reactExports.useEffect(()=>{J.current=r},[r]),reactExports.useEffect(()=>{Se.current=i},[i]),reactExports.useEffect(()=>{Pe.current=s},[s]),reactExports.useEffect(()=>{Te.current={repeatAll:ue,repeatOne:ce}},[ue,ce]),reactExports.useEffect(()=>{$e.current=W},[W]),reactExports.useEffect(()=>{u!==void 0&&(pt.current=u)},[u]),reactExports.useEffect(()=>{te.current=e},[e]),reactExports.useEffect(()=>{Re.current=E},[E]);const ht=reactExports.useCallback(de=>de?.audioUrl&&typeof de.audioUrl=="string"&&de.audioUrl.trim().length>0?de.audioUrl:FALLBACK_AUDIO_URL,[]),yt=reactExports.useCallback(de=>{if(typeof de.duration=="number")return de.duration;if(typeof de.duration=="string"){const Me=Number(de.duration);return Number.isFinite(Me)?Me:0}return 0},[]),mt=reactExports.useCallback(de=>{const Me=yt(de),De=typeof de.size=="number"?de.size/(1024*1024):0,We=de.bitrateKbps??de.bitrate??(de.quality?.toLowerCase()==="flac"?1100:320),Ye=Me>0?We*1e3/8*Me/(1024*1024):De;return!!(de.isCloud||de.cloudProvider)&&(De===0||De>STREAM_ONLY_SIZE_MB/2)||De>STREAM_ONLY_SIZE_MB||Me>STREAM_ONLY_DURATION_SECONDS?!0:Ye>STREAM_ONLY_SIZE_MB},[yt]),Y=reactExports.useCallback(de=>{if(!de||$e.current||Te.current.repeatOne)return null;const Me=J.current;if(!Me.length)return null;const De=Me.findIndex(Ye=>Ye.id===de);if(De===-1)return null;let We=De+1;if(We>=Me.length)if(Te.current.repeatAll)We=0;else return null;return We===De?null:Me[We]??null},[]),ye=reactExports.useCallback(async(de,Me,De)=>{const We=m.current??(m.current=new Audio);if(g.current&&g.current!==de&&(URL.revokeObjectURL(g.current),g.current=null),de.startsWith("blob:")&&(g.current=de),v(!0),We.src=de,We.currentTime=0,We.muted=!1,We.volume=he.current,We.onended=()=>U.current?.("auto"),We.ontimeupdate=()=>{T(We.currentTime),_(We.duration||k)},We.onloadedmetadata=()=>{_(We.duration||k)},Ue(Me),De)try{await We.play(),y(!0),Pe.current?.(!0)}catch(Ye){console.error("HTML audio play failed:",Ye),pt.current=!1,y(!1),Pe.current?.(!1)}else We.pause(),y(!1),Pe.current?.(!1)},[k]),Ne=reactExports.useCallback(de=>{const Me=f.current;if(!Me)return;const De=Y(de);if(!De)return;if(mt(De)){He({trackId:De.id,status:"idle",isCloud:De.isCloud});return}if(Ce.trackId===De.id&&(Ce.status==="loading"||Ce.status==="ready"))return;const We=ht(De);We&&(He({trackId:De.id,status:"loading",isCloud:De.isCloud}),Me.preloadNextTrack({url:We,id:De.id,isCloud:De.isCloud}))},[ht,Ce,Y,mt]),Be=reactExports.useRef(Ne);reactExports.useEffect(()=>{Be.current=Ne},[Ne]);const Ge=reactExports.useCallback(()=>{const de=te.current;de&&Ne(de.id)},[Ne]),Ue=de=>{const Me=ht(de);addRecentlyPlayedTrack({trackId:de.id,trackTitle:de.title||de.name||"Untitled",artistName:de.artist,coverArt:de.coverImage||de.coverArt||"",audioUrl:Me,playedAt:Date.now(),album:de.album,quality:de.quality,codecLabel:de.codecLabel,bitDepth:de.bitDepth,sampleRate:de.sampleRate,bitrateKbps:de.bitrateKbps,durationSeconds:typeof de.duration=="number"?de.duration:void 0}).catch(De=>console.error("Failed to track recently played:",De))};reactExports.useEffect(()=>(f.current||(f.current=new GaplessAudioEngine,f.current.setCallbacks({onStateChange:de=>{de.isPlaying!==void 0&&(y(de.isPlaying),Pe.current?.(de.isPlaying)),de.currentTime!==void 0&&T(de.currentTime),de.duration!==void 0&&_(de.duration),de.volume!==void 0&&O(de.volume),de.isMuted!==void 0&&q(de.isMuted)},onTrackEnd:()=>{ct.current?.(te.current),Te.current.repeatOne?(console.log("Looping current track"),f.current?.seek(0),f.current?.play()):U.current?.("auto")},onTrackChange:de=>{console.log("Gapless transition to track:",de),gt.current=de,Be.current?.(de);const Me=J.current.find(De=>De.id===de);Me&&Se.current&&Se.current(Me)},onPreloadStateChange:de=>{He({trackId:de.trackId,status:de.status,message:de.message,isCloud:de.isCloud}),de.status==="ready"&&be.current&&pt.current&&!Re.current&&(be.current=!1,G(!1),pe(null),f.current?.play()),de.status==="error"&&(G(!0),pe(de.message||"Network issue while preparing the next track"))}}),f.current.setVolume(1)),()=>{f.current?.destroy(),f.current=null}),[]),reactExports.useEffect(()=>{f.current&&f.current.setEQ(ve.bass,ve.mid,ve.treble)},[ve]),reactExports.useEffect(()=>{const de=f.current;if(!e||(be.current=!1,G(!1),pe(null),He(Je=>({...Je,status:"idle",trackId:null,message:void 0,isCloud:void 0})),v(!1),m.current&&(m.current.pause(),m.current.src=""),!de))return;if(gt.current===e.id){gt.current=null,Ue(e);return}const Me=ht(e),De=pt.current;if(mt(e)){de.pause(),ye(Me,e,De);return}if(de.usePreloadedTrack(e.id,De)){console.log("Used preloaded buffer for track:",e.id),D.current=!1,Ue(e),Ne(e.id);const Je=A.current;if(A.current=null,Je==="next")U.current?.("auto");else if(Je==="prev"){const ut=J.current,Tt=(ut.findIndex(Et=>Et.id===e.id)-1+ut.length)%ut.length;Se.current?.(ut[Tt])}return}const We=++ft.current;D.current=!0,console.log("Loading new track:",e.title||e.name,"requestId:",We,"url:",Me),de.pause();const Ye=async(Je,ut)=>{try{if(Ue(e),await de.loadTrack({url:Je,id:e.id}),ft.current!==We)return;D.current=!1,console.log("Track loaded successfully, starting playback"),de.seek(0),pt.current?de.play():de.pause(),Ne(e.id)}catch(vt){if(ft.current!==We)return;if(console.error("Failed to load track URL, allowFallback=",ut,"err=",vt),ut&&Je!==FALLBACK_AUDIO_URL){console.warn("Retrying with fallback audio URL"),await Ye(FALLBACK_AUDIO_URL,!1);return}D.current=!1;const Tt=m.current??(m.current=new Audio);g.current&&g.current!==Je&&(URL.revokeObjectURL(g.current),g.current=null),Je.startsWith("blob:")&&(g.current=Je),v(!0),Tt.src=Je,Tt.currentTime=0,Tt.muted=!1,Tt.volume=B,Tt.onended=()=>U.current?.("auto"),Tt.ontimeupdate=()=>{T(Tt.currentTime),_(Tt.duration||k)},Tt.onloadedmetadata=()=>{_(Tt.duration||k)},pt.current?Tt.play().then(()=>{y(!0),Pe.current?.(!0)}).catch(Et=>{console.error("HTML audio play failed after gapless fallback:",Et),pt.current=!1,y(!1),Pe.current?.(!1)}):(y(!1),Pe.current?.(!1))}};Ye(Me,!0)},[e,ht,Ne]);const Xe=reactExports.useCallback(()=>{const de=f.current,Me=m.current,De=!pt.current;if(pt.current=De,E&&Me){De?Me.play().catch(We=>console.error("HTML audio play failed:",We)):Me.pause(),y(De),Pe.current?.(De);return}if(!de){const We=te.current;if(!We)return;const Ye=ht(We);ye(Ye,We,De);return}D.current||(De?de.play():de.pause())},[E]),qe=reactExports.useCallback(de=>{const Me=f.current;if(!Me)return;const De=Math.max(0,Math.min(1,de));Me.setVolume(De),Me.setMuted(De===0),m.current&&(m.current.volume=De,m.current.muted=De===0)},[]),M=reactExports.useCallback(de=>{_e(de)},[_e]),z=reactExports.useCallback((de="manual")=>{const Me=Date.now();if(de==="manual"){if(bt.current?.("manual-next"),Me-j.current<300)return;j.current=Me}if(D.current){A.current="next";return}const De=f.current,We=J.current,Ye=te.current;if(!Ye||!We.length)return;console.log("Skipping to next track");const Je=We.findIndex(Tt=>Tt.id===Ye.id);let ut=Je;if(W){if(We.length===1){console.log("Only one track available, restarting current track"),De?.seek(0),pt.current&&De?.play();return}do ut=Math.floor(Math.random()*We.length);while(ut===Je)}else if(ut=Je===-1?0:Je+1,ut>=We.length)if(ue)ut=0;else{console.log("End of playlist reached, stopping playback"),De?.pause(),pt.current=!1,y(!1),Pe.current?.(!1);return}const vt=We[ut];if(!vt){console.warn("No track found for next index",ut);return}if(vt.id===Ye.id){console.log("Next track resolved to current track, restarting"),De?.seek(0),pt.current&&De?.play();return}De?.pause(),console.log(`Current index: ${Je}, Next index: ${ut}`),Se.current?.(vt)},[W,ue]);reactExports.useEffect(()=>{U.current=z},[z]);const Ae=reactExports.useCallback(()=>{bt.current?.("manual-prev");const de=Date.now();if(D.current){A.current="prev";return}if(de-j.current<300)return;j.current=de;const Me=f.current,De=J.current,We=te.current;if(!We||!De.length||!Me)return;if(console.log("Skipping to previous track"),w>3){console.log("Restarting current track (>3s)"),Me.seek(0);return}const Ye=De.findIndex(ut=>ut.id===We.id);if(Ye===-1){console.warn("Current track not found in playlist");return}let Je;if(W&&De.length>1)do Je=Math.floor(Math.random()*De.length);while(Je===Ye);else Je=(Ye-1+De.length)%De.length;console.log(`Current index: ${Ye}, Previous index: ${Je}`),Me.pause(),Se.current?.(De[Je])},[W]),Ie=reactExports.useCallback(de=>{const De=Number.isFinite(k)&&k>0?Math.max(0,Math.min(de,k)):Math.max(0,de);if(bt.current?.("seek"),E&&m.current){m.current.currentTime=De,T(De);return}f.current&&f.current.seek(De)},[k,E]),Ke=de=>{const Me=parseFloat(de.target.value);H(Me),P||Ie(Me)},St=()=>{R(!0)},tt=()=>{I!==null&&Ie(I),R(!1),H(null)},ne=de=>{const Me=parseFloat(de.target.value);if(E&&m.current){m.current.volume=Me,m.current.muted=Me===0,O(Me),q(Me===0);return}f.current&&(f.current.setVolume(Me),f.current.setMuted(Me===0))},Oe=()=>{const de=!V;if(E&&m.current){m.current.muted=de,q(de);return}f.current&&f.current.setMuted(de)},Qe=reactExports.useCallback(()=>{h?.()},[h]),Ze=de=>{if(isNaN(de))return"0:00";const Me=Math.floor(de/60),De=Math.floor(de%60);return`${Me}:${De.toString().padStart(2,"0")}`},nt=P&&I!==null?I:w;return reactExports.useEffect(()=>{c&&c({gaplessEngine:f.current,isPlaying:b,togglePlayPause:Xe,handleNext:z,handlePrevious:Ae,seek:Ie,currentTime:w,duration:k,formatTime:Ze,volume:B,setVolume:qe,eqBands:ve,setEqBands:M,invalidateWallSession:ke.invalidateSession,wallSessionCount:ke.consecutiveTracks,usingHtmlAudio:E,getAnalyserNode:()=>f.current?.getAnalyserNode?.()||null})},[b,w,k,B,ve,c,Xe,z,Ae,Ie,qe,M,ke.consecutiveTracks,ke.invalidateSession,E]),reactExports.useEffect(()=>{const de=setInterval(()=>{const Me=f.current;if(E&&m.current){T(m.current.currentTime),Number.isFinite(m.current.duration)&&m.current.duration>0&&_(m.current.duration);return}if(!Me)return;const De=Me.getCurrentTime(),We=Me.getDuration();T(Ye=>Number.isFinite(De)?De:Ye),Number.isFinite(We)&&We>0&&_(We)},250);return()=>clearInterval(de)},[E]),reactExports.useEffect(()=>()=>{g.current&&(URL.revokeObjectURL(g.current),g.current=null)},[]),reactExports.useEffect(()=>{const de=f.current,Me=te.current;if(!de||!Me||Re.current)return;const De=Y(Me.id);if(!De){be.current&&(be.current=!1,G(!1),pe(null));return}const We=Ce.trackId===De.id&&Ce.status==="ready",Ye=Number.isFinite(k)?k:0,Je=Math.max(0,Ye-w),ut=De.isCloud?5:3;if(be.current){We&&(be.current=!1,G(!1),pe(null),pt.current&&de.play());return}!We&&pt.current&&Je>0&&Je<=ut&&(be.current=!0,G(!0),pe(De.isCloud?"Buffering album from cloud":"Buffering next track"),de.pause())},[w,k,Ce,Y]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a&&jsxRuntimeExports.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 backdrop-blur-xl transition-all duration-300",style:{backgroundColor:"rgba(26, 26, 26, 0.95)",borderTop:"1px solid #333333"},children:[jsxRuntimeExports.jsx("div",{className:"max-w-screen-2xl mr-auto px-4 py-2",children:e?jsxRuntimeExports.jsx("div",{className:"mr-auto",style:{maxWidth:"1500px",width:"100%"},children:jsxRuntimeExports.jsxs("div",{className:"player-bottom-row",children:[jsxRuntimeExports.jsxs("div",{className:"player-bottom-left flex items-center gap-3 w-full",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Open full player",onClick:Qe,className:"flex-shrink-0 rounded-lg overflow-hidden focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#d32f2f]",style:{lineHeight:0},children:jsxRuntimeExports.jsx(ImageWithFallback,{src:e.coverImage||e.coverArt,alt:e.title||e.name||"Track",className:"w-14 h-14 object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1 mb-1",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:Qe,className:"text-left truncate mono hover:text-[#d32f2f] transition-colors",style:{color:"#e0e0e0",fontSize:"0.9rem",margin:0,lineHeight:"1.2",fontWeight:700},title:e.title||e.name||"Untitled",children:e.title||e.name||"Untitled"})}),jsxRuntimeExports.jsx("p",{className:"truncate mono",style:{color:"#a0a0a0",fontSize:"0.75rem",marginTop:"0px",lineHeight:"1.2"},children:e.artist}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-2",children:[p?.codecLabel&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0,minWidth:"88px"},children:p.codecLabel}),(p?.bitDepth||p?.sampleRate)&&jsxRuntimeExports.jsxs("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",minWidth:"132px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",padding:"0 8px",fontSize:"0.72rem",flexShrink:0},children:[jsxRuntimeExports.jsx("span",{style:{color:p?.bitDepth===24?"#c6a700":"#a0a0a0"},children:p?.bitDepth?`${p.bitDepth}-bit`:""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:p?.sampleRate?`${p.sampleRate}kHz`:""})]}),p?.bitrateKbps&&jsxRuntimeExports.jsx("span",{className:"mono",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 8px",height:"22px",borderRadius:"6px",border:"1px solid #333333",background:"rgba(26,26,26,0.6)",fontSize:"0.72rem",color:"#e0e0e0",flexShrink:0},children:formatBitrate(p.bitrateKbps)})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-center flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Create playlist",onClick:()=>d&&d(),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},title:"Create Playlist",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),jsxRuntimeExports.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":W?"Disable shuffle":"Enable shuffle",onClick:()=>fe(!W),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:W?"#d32f2f":"#a0a0a0"},children:jsxRuntimeExports.jsx(Shuffle,{size:16})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Previous track",onClick:Ae,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipBack,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":b?"Pause":"Play",onClick:Xe,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:"#d32f2f"},children:b?jsxRuntimeExports.jsx(Pause,{size:20,fill:"#ffffff",color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:20,fill:"#ffffff",color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Next track",onClick:()=>z("manual"),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:"#e0e0e0"},children:jsxRuntimeExports.jsx(SkipForward,{size:20,fill:"#e0e0e0"})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{!ue&&!ce?(K(!0),we(!1)):ue&&!ce?(K(!1),we(!0)):(K(!1),we(!1))},className:"p-2 rounded-lg transition-all duration-200 hover:scale-110 relative",style:{color:ue||ce?"#d32f2f":"#a0a0a0"},title:ce?"Repeat One":ue?"Repeat Playlist":"Repeat Off",children:[jsxRuntimeExports.jsx(Repeat,{size:16}),ce&&jsxRuntimeExports.jsx("span",{className:"absolute",style:{fontSize:"0.5rem",fontWeight:"bold",color:"#d32f2f",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",style:{maxWidth:"500px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},children:Ze(nt)}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:k||0,value:nt,onChange:Ke,onPointerDown:St,onPointerUp:tt,onPointerCancel:tt,className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${k>0?nt/k*100:0}%, #333333 ${k>0?nt/k*100:0}%)`,appearance:"none",cursor:"pointer"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"40px"},"aria-live":"polite",children:Ze(k)})]}),(ae||Ce.status==="loading"||Ce.status==="error")&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 w-full",style:{maxWidth:"500px",color:"#c0c0c0",fontSize:"0.75rem"},children:[Ce.status==="loading"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{size:14,className:"animate-spin"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ffcc80"},children:Ce.isCloud?"Buffering album from cloud":"Preloading next track"})]}),Ce.status==="error"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ff8a80"},children:ee||Ce.message||"Next track failed to buffer"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Ge,className:"mono px-2 py-1 rounded border",style:{borderColor:"#ff8a80",color:"#ff8a80",background:"rgba(255, 138, 128, 0.08)"},children:"Retry"})]}),ae&&Ce.status!=="error"&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#ffcc80"},children:ee||"Buffering album"})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-bottom-right flex items-center gap-3 justify-end relative w-full md:ml-auto",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":Q?"Hide equalizer":"Show equalizer",onClick:()=>se(!Q),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",style:{color:Q?"#d32f2f":"#a0a0a0"},title:"Equalizer",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),jsxRuntimeExports.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"14",x2:"6",y2:"14"}),jsxRuntimeExports.jsx("line",{x1:"10",y1:"8",x2:"14",y2:"8"}),jsxRuntimeExports.jsx("line",{x1:"18",y1:"16",x2:"22",y2:"16"})]})}),Q&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-full right-0 mb-2 p-4 rounded-lg backdrop-blur-xl",style:{backgroundColor:"rgba(26, 26, 26, 0.98)",border:"1px solid #333333",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",width:"240px"},role:"group","aria-label":"Equalizer controls",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button","aria-label":oe?"Hide advanced EQ":"Show advanced EQ",onClick:()=>ge(!oe),className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:oe?"#d32f2f":"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)",border:oe?"1px solid #d32f2f":"none"},children:"Adv"}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":"Reset equalizer",onClick:()=>{_e({bass:0,mid:0,treble:0}),le({bassFreq:200,midFreq:1e3,midQ:1,trebleFreq:3200})},className:"mono text-xs px-2 py-1 rounded transition-colors",style:{color:"#a0a0a0",backgroundColor:"rgba(255, 255, 255, 0.05)"},children:"Reset"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ve.bass,onChange:de=>_e({...ve,bass:parseFloat(de.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ve.bass+12)/24*100}%, #333333 ${(ve.bass+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ve.bass,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:je,children:[ve.bass>0?"+":"",ve.bass," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ve.mid,onChange:de=>_e({...ve,mid:parseFloat(de.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ve.mid+12)/24*100}%, #333333 ${(ve.mid+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ve.mid,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:je,children:[ve.mid>0?"+":"",ve.mid," dB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono whitespace-nowrap",style:{color:"#a0a0a0",fontSize:"0.7rem",minWidth:"50px"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:ve.treble,onChange:de=>_e({...ve,treble:parseFloat(de.target.value)}),className:"flex-1",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(ve.treble+12)/24*100}%, #333333 ${(ve.treble+12)/24*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble gain","aria-valuemin":-12,"aria-valuemax":12,"aria-valuenow":ve.treble,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:je,children:[ve.treble>0?"+":"",ve.treble," dB"]})]}),oe&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"my-2",style:{height:"1px",backgroundColor:"#333333"}}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.7rem"},children:"Frequency Controls"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Bass Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"20",max:"500",step:"10",value:Z.bassFreq,onChange:de=>{const Me=parseFloat(de.target.value);le({...Z,bassFreq:Me}),f.current?.setAdvancedEQ(Me,Z.midFreq,Z.midQ,Z.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(Z.bassFreq-20)/480*100}%, #333333 ${(Z.bassFreq-20)/480*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Bass frequency","aria-valuemin":20,"aria-valuemax":500,"aria-valuenow":Z.bassFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:Z.bassFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"200",max:"5000",step:"100",value:Z.midFreq,onChange:de=>{const Me=parseFloat(de.target.value);le({...Z,midFreq:Me}),f.current?.setAdvancedEQ(Z.bassFreq,Me,Z.midQ,Z.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(Z.midFreq-200)/4800*100}%, #333333 ${(Z.midFreq-200)/4800*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid frequency","aria-valuemin":200,"aria-valuemax":5e3,"aria-valuenow":Z.midFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:Z.midFreq})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Mid Q"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:Z.midQ,onChange:de=>{const Me=parseFloat(de.target.value);le({...Z,midQ:Me}),f.current?.setAdvancedEQ(Z.bassFreq,Z.midFreq,Me,Z.trebleFreq)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(Z.midQ-.1)/9.9*100}%, #333333 ${(Z.midQ-.1)/9.9*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Mid Q","aria-valuemin":.1,"aria-valuemax":10,"aria-valuenow":Z.midQ,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:Z.midQ.toFixed(1)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.65rem",minWidth:"50px"},children:"Treble Hz"}),jsxRuntimeExports.jsx("input",{type:"range",min:"2000",max:"16000",step:"100",value:Z.trebleFreq,onChange:de=>{const Me=parseFloat(de.target.value);le({...Z,trebleFreq:Me}),f.current?.setAdvancedEQ(Z.bassFreq,Z.midFreq,Z.midQ,Me)},className:"flex-1",style:{height:"3px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(Z.trebleFreq-2e3)/14e3*100}%, #333333 ${(Z.trebleFreq-2e3)/14e3*100}%)`,appearance:"none",cursor:"pointer"},"aria-label":"Treble frequency","aria-valuemin":2e3,"aria-valuemax":16e3,"aria-valuenow":Z.trebleFreq,"aria-orientation":"horizontal"}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#666666",fontSize:"0.55rem",minWidth:"45px",textAlign:"right"},children:Z.trebleFreq})]})]})]})})]}),jsxRuntimeExports.jsx("button",{type:"button","aria-label":V?"Unmute":"Mute",onClick:Oe,className:"p-2 rounded-lg transition-all duration-200 hover:scale-110",children:V?jsxRuntimeExports.jsx(VolumeX,{size:18,color:"#a0a0a0"}):jsxRuntimeExports.jsx(Volume2,{size:18,color:"#a0a0a0"})}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:V?0:B,onChange:ne,className:"w-20 md:w-24",style:{height:"4px",borderRadius:"2px",background:`linear-gradient(to right, #d32f2f ${(V?0:B)*100}%, #333333 ${(V?0:B)*100}%)`,appearance:"none",cursor:"pointer"}})]})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"48px"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.9rem"},children:"No track playing"})})}),jsxRuntimeExports.jsx("style",{children:`
            input[type="range"]::-webkit-slider-thumb {
              appearance: none;
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
            }
            input[type="range"]::-moz-range-thumb {
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background: #d32f2f;
              cursor: pointer;
              border: none;
            }
          `})]})})}const BRICK_COLUMNS=8,BRICK_ROWS=6,TOTAL_BRICKS=BRICK_COLUMNS*BRICK_ROWS,FORCED_OVERLAY_STATES=new Set(["SHAKING","COLLAPSED","REBUILDING"]);function WallOverlay({enabled:e=!0}){const{wallState:r}=useWall();if(!(e||FORCED_OVERLAY_STATES.has(r)))return null;const s=reactExports.useMemo(()=>Array.from({length:TOTAL_BRICKS}).map((a,c)=>{const l=Math.floor(c/BRICK_COLUMNS),u=c%BRICK_COLUMNS;return{id:`wall-brick-${c}`,row:l,column:u,jitter:(Math.random()-.5)*4}}),[]);return jsxRuntimeExports.jsx("div",{className:`wall-overlay wall-overlay--${r.toLowerCase()}`,"aria-hidden":"true",children:s.map(a=>{const c={"--wall-row":`${a.row}`,"--wall-column":`${a.column}`,"--wall-jitter":`${a.jitter}px`};return jsxRuntimeExports.jsx("div",{className:"wall-overlay__brick",style:c},a.id)})})}const buttonBaseStyle={border:"1px solid rgba(255,255,255,0.2)",background:"rgba(0,0,0,0.5)",color:"#f5f5f5",fontSize:"0.75rem",letterSpacing:"0.08em",textTransform:"uppercase",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",transition:"background 0.2s ease, transform 0.2s ease"};function WallDebugPanel({isPinkEnabled:e,onPinkOverride:r}){const[i,s]=reactExports.useState(!1),[a,c]=reactExports.useState(!1),l=reactExports.useRef(null),{wallState:u,pinkTierUnlocked:h,themeEnabled:d,setThemeEnabled:p,startWarning:f,cancelWarning:m,triggerCollapse:g,resetToSecure:E}=useWall();reactExports.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.getItem("brick_wall_debug")==="true"&&c(!0)}catch{}},[]),reactExports.useEffect(()=>{if(!(typeof window>"u"))return window.brickWallDebug={enable:()=>{c(!0);try{window.localStorage.setItem("brick_wall_debug","true")}catch{}},disable:()=>{c(!1),s(!1);try{window.localStorage.removeItem("brick_wall_debug")}catch{}}},()=>{window.brickWallDebug&&delete window.brickWallDebug}},[]),reactExports.useEffect(()=>()=>{l.current&&(window.clearTimeout(l.current),l.current=null)},[]);const v=reactExports.useMemo(()=>{const w=(WALL_COLLAPSE_TIME_SECONDS-WALL_WARNING_TIME_SECONDS)*1e3;return Math.max(w,1500)},[]),b=reactExports.useMemo(()=>[{label:"Wall State",value:u},{label:"Pink Tier",value:h?"Unlocked":"Locked"},{label:"Overlay",value:e?"Forced On":"Auto"},{label:"Theme",value:d?"Enabled":"Hidden"}],[e,h,d,u]),y=()=>{m(),E(),f(),l.current&&window.clearTimeout(l.current),l.current=window.setTimeout(()=>{g(),l.current=null},v)};return a?jsxRuntimeExports.jsxs("div",{style:{position:"fixed",bottom:"96px",right:"24px",zIndex:80,pointerEvents:"none"},children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>s(w=>!w),style:{...buttonBaseStyle,pointerEvents:"auto",background:i?"rgba(255,0,204,0.2)":"rgba(0,0,0,0.6)",borderColor:i?"rgba(255,0,204,0.7)":"rgba(255,255,255,0.2)",boxShadow:i?"0 0 12px rgba(255,0,204,0.4)":"none"},children:i?"Close Wall Debug":"Wall Debug"}),i&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"8px",width:"320px",maxWidth:"calc(100vw - 32px)",background:"rgba(8,8,8,0.92)",border:"1px solid rgba(255,0,204,0.35)",borderRadius:"12px",padding:"16px",boxShadow:"0 16px 40px rgba(0,0,0,0.45)",pointerEvents:"auto",backdropFilter:"blur(18px)"},children:[jsxRuntimeExports.jsx("p",{style:{marginBottom:"12px",fontSize:"0.75rem",color:"rgba(255,255,255,0.75)",letterSpacing:"0.04em",textTransform:"uppercase"},children:'Simulate "The Trial" without replaying the entire album. Actions below call the same hooks that the easter egg uses.'}),jsxRuntimeExports.jsx("div",{style:{display:"grid",gap:"6px",marginBottom:"12px"},children:b.map(w=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",color:"rgba(255,255,255,0.85)",letterSpacing:"0.05em"},children:[jsxRuntimeExports.jsx("span",{style:{color:"rgba(255,255,255,0.55)"},children:w.label}),jsxRuntimeExports.jsx("span",{children:w.value})]},w.label))}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:E,children:"Reset Secure"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:f,children:"Shake Wall"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:m,children:"Cancel Shake"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:g,children:"Collapse Now"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px",marginBottom:"12px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:{...buttonBaseStyle,background:"rgba(255,0,204,0.15)",borderColor:"rgba(255,0,204,0.5)"},onClick:y,children:"Simulate Trial Hit"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>p(!d),children:d?"Hide Pink Theme":"Show Pink Theme"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>r(!e),children:e?"Disable Overlay":"Force Overlay"}),jsxRuntimeExports.jsx("button",{type:"button",style:buttonBaseStyle,onClick:()=>{window.brickWallDebug?.disable()},children:"Hide Debugger"})]}),jsxRuntimeExports.jsxs("p",{style:{marginTop:"12px",fontSize:"0.65rem",color:"rgba(255,255,255,0.5)",letterSpacing:"0.04em"},children:["Tip: run ",jsxRuntimeExports.jsx("code",{children:"window.brickWallDebug.enable()"})," in the console to re-open this panel outside dev builds."]})]})]}):null}class LastFmService{apiKey;baseUrl="https://ws.audioscrobbler.com/2.0/";isRecord(r){return typeof r=="object"&&r!==null}constructor(r){this.apiKey=r}async makeRequest(r){const s=new URLSearchParams({...r,api_key:this.apiKey,format:"json"}).toString(),a=await fetch(`${this.baseUrl}?${s}`);if(!a.ok)throw new Error(`Last.fm API error: ${a.status}`);return await a.json()}async getTrackInfo(r,i){try{const s=await this.makeRequest({method:"track.getInfo",artist:r,track:i});if(this.isRecord(s)&&this.isRecord(s.track)){const a=s.track,c=typeof a.name=="string"?a.name:void 0,l=this.isRecord(a.artist)&&typeof a.artist.name=="string"?a.artist.name:void 0,u=this.isRecord(a.album)&&typeof a.album.title=="string"?a.album.title:void 0,h=typeof a.duration=="string"?Number(a.duration):void 0;if(c!==void 0&&c!==""&&(l!==void 0&&l!==""))return{name:c,artist:l,album:u,duration:typeof h=="number"&&Number.isFinite(h)?Math.floor(h/1e3).toString():void 0}}return null}catch(s){return console.error("Error fetching track info:",s),null}}async getArtistInfo(r){try{const i=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(r)}`);if(i.ok){const a=await i.json();if(this.isRecord(a)&&typeof a.extract=="string"&&a.extract.length>100)return{name:r,bio:a.extract,image:this.isRecord(a.thumbnail)&&typeof a.thumbnail.source=="string"?a.thumbnail.source:void 0,similar:[]}}const s=await this.makeRequest({method:"artist.getInfo",artist:r});return this.isRecord(s)&&this.isRecord(s.artist)?{name:typeof s.artist.name=="string"?s.artist.name:r,bio:this.isRecord(s.artist.bio)?typeof s.artist.bio.summary=="string"?s.artist.bio.summary:typeof s.artist.bio.content=="string"?s.artist.bio.content:void 0:void 0,image:Array.isArray(s.artist.image)?s.artist.image.filter(a=>this.isRecord(a)).find(a=>a.size==="large")?.["#text"]:void 0,similar:this.isRecord(s.artist.similar)&&Array.isArray(s.artist.similar.artist)?s.artist.similar.artist.filter(a=>this.isRecord(a)&&typeof a.name=="string").map(a=>a.name):[]}:null}catch(i){return console.error("Error fetching artist info:",i),null}}async getLyrics(r,i){try{const s=await fetch(`https://api.genius.com/search?q=${encodeURIComponent(`${r} ${i}`)}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(s.ok){const c=await s.json(),u=(this.isRecord(c)&&this.isRecord(c.response)&&Array.isArray(c.response.hits)?c.response.hits:[]).find(h=>this.isRecord(h)&&this.isRecord(h.result)&&typeof h.result.id=="number");if(u!==void 0){const h=u.result.id;if(h===null)return null;const d=await fetch(`https://api.genius.com/songs/${h}`,{headers:{Authorization:"Bearer YOUR_GENIUS_ACCESS_TOKEN"}});if(d.ok){const p=await d.json();if(this.isRecord(p)&&this.isRecord(p.response)&&this.isRecord(p.response.song)){const f=p.response.song,m=this.isRecord(f.lyrics)&&typeof f.lyrics.plain=="string"?f.lyrics.plain:void 0;if(m!==void 0&&m!=="")return m}}}}const a=await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(r)}/${encodeURIComponent(i)}`);if(a.ok){const c=await a.json();if(this.isRecord(c)&&typeof c.lyrics=="string")return c.lyrics}return console.warn(`Lyrics not found for ${r} - ${i}`),null}catch(s){return console.error("Error fetching lyrics:",s),null}}sanitizeTitle(r){return typeof r!="string"||r.trim()===""?"":r.replace(/\s*\([^)]*\)/g,"").replace(/\s*\[[^\]]*\]/g,"").replace(/\s+-\s+.*$/g,"").trim()}splitArtists(r){if(typeof r!="string"||r.trim()==="")return[];const i=/(feat\.|featuring|ft\.|with|&|,|;|\+| x )/i;return r.split(i).map(s=>s.trim()).filter(s=>s&&!i.test(s)).map(s=>s.replace(/^and\s+/i,"").trim())}async getAlbumInfoLoose(r,i,s){const a=this.splitArtists(r),c=a.length>0&&a[0]!==""?a[0]:r,l=this.sanitizeTitle(i),u=typeof s=="string"&&s.trim()!==""?this.sanitizeTitle(s):void 0,h=async(f,m)=>{if(f===""||m==="")return null;try{const g=await this.makeRequest({method:"album.getInfo",artist:f,album:m});if(this.isRecord(g)&&this.isRecord(g.album)){const E=this.isRecord(g.album)?g.album:{};return{title:typeof E.name=="string"?E.name:m,artist:typeof E.artist=="string"?E.artist:f,summary:this.isRecord(E.wiki)&&typeof E.wiki.summary=="string"?E.wiki.summary:void 0,image:Array.isArray(E.image)?E.image.filter(v=>this.isRecord(v)).reduce((v,b)=>{if(v!==void 0&&v!=="")return v;if(b.size==="extralarge"&&typeof b["#text"]=="string"||typeof b["#text"]=="string")return b["#text"]},void 0):void 0,tracks:this.isRecord(E.tracks)?(()=>{const v=this.isRecord(E.tracks)?E.tracks.track:void 0;if(Array.isArray(v))return v.filter(b=>this.isRecord(b)&&typeof b.name=="string").map(b=>({name:b.name,duration:typeof b.duration=="number"?b.duration:Number(b.duration)||void 0}))})():void 0}}}catch(g){console.warn("album.getInfo failed",f,m,g)}return null};let p=await h(c,l!==""?l:i);if(p!==null||(p=await h(c,i),p!==null)||u!==void 0&&(p=await h(c,u),p!==null))return p;try{const f=[l!==""?`${l||i} (${c} album)`:null,`${i} (${c} album)`,l&&l!==""?l:i].filter(m=>typeof m=="string"&&m!=="");for(const m of f){const g=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(m)}`);if(g.ok){const E=await g.json();if(this.isRecord(E)&&typeof E.title=="string"&&typeof E.extract=="string")return{title:E.title,artist:c,summary:E.extract,image:this.isRecord(E.thumbnail)&&typeof E.thumbnail.source=="string"?E.thumbnail.source:void 0}}}}catch(f){console.error("Wikipedia album fallback failed",f)}return null}}const lastFmService=new LastFmService("YOUR_LASTFM_API_KEY_HERE"),parseLRC=e=>{const r=e.split(`
`),i=[];for(const s of r){const a=s.trim(),c=new RegExp("\\[(\\d{2}):(\\d{2})(?:\\.(\\d{2,3}))?\\]","g"),l=[...a.matchAll(c)];if(l.length===0)continue;const u=a.replace(c,"").trim();l.forEach(h=>{const d=parseInt(h[1],10),p=parseInt(h[2],10),f=h[3]?parseInt(h[3],10):0,m=h[3]?.length===3?1e3:100,g=d*60+p+f/m;i.push({time:g,text:u})})}return i.sort((s,a)=>s.time-a.time)},fetchWikipediaAlbumSummary=async(e,r)=>{if(!r)return null;const s=(typeof lastFmService.sanitizeTitle=="function"?lastFmService.sanitizeTitle.bind(lastFmService):u=>u)(r),a=e?.trim(),c=[r,s,s?`${s} (album)`:"",s&&a?`${s} (${a} album)`:""].filter(u=>!!(u&&u.trim())),l=new Set;for(const u of c){const h=u.toLowerCase();if(!l.has(h)){l.add(h);try{const d=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(u)}`);if(!d.ok)continue;const p=await d.json();if(p?.extract)return{title:typeof p.title=="string"?p.title:u,summary:p.extract,image:p.thumbnail?.source}}catch(d){console.error("Wikipedia album summary fetch failed:",d)}}}return null};function PlayerApple({track:e,isPlaying:r,onPlayPause:i,onClose:s,onArtistClick:a,onNext:c,onPrevious:l,currentTime:u=0,duration:h=0,formatTime:d=v=>"0:00",onSeek:p,onVolumeChange:f,onEqChange:m,volumeLevel:g=1,eqBands:E}){const[v,b]=reactExports.useState("cover"),[y,w]=reactExports.useState(r),T=useTrackAudioMeta(e),[k,_]=reactExports.useState([]),[P,R]=reactExports.useState(null),[I,H]=reactExports.useState(!1),[B,O]=reactExports.useState(!1),[V,q]=reactExports.useState(null),[ue,K]=reactExports.useState(!1),[ce,we]=reactExports.useState(!1),W=reactExports.useRef(null),[fe,F]=reactExports.useState(Math.round(Math.max(0,Math.min(1,g))*100)),[L,Q]=reactExports.useState(!1),[se,oe]=reactExports.useState(null),[ge,ve]=reactExports.useState({low:E?.low??0,mid:E?.mid??0,high:E?.high??0}),[_e,Z]=reactExports.useState(!1),[le,Ce]=reactExports.useState(!1);reactExports.useEffect(()=>w(r),[r]),reactExports.useEffect(()=>{F(Math.round(Math.max(0,Math.min(1,g))*100))},[g]),reactExports.useEffect(()=>{E&&ve({low:E.low??0,mid:E.mid??0,high:E.high??0})},[E]),reactExports.useEffect(()=>{const be=async()=>{const J=lastFmService.splitArtists(e.artist||"")||[];if(J.length!==0){H(!0);try{const Se=await Promise.all(J.map(Pe=>lastFmService.getArtistInfo(Pe)));_(Se.filter(Pe=>!!Pe))}catch(Se){console.error("Failed to fetch artist info:",Se)}finally{H(!1)}}},Re=async()=>{const J=e.album;if(!e.artist||!J){R(null);return}O(!0);try{const Se=await lastFmService.getAlbumInfoLoose(e.artist,J,e.title);if(Se){R(Se);return}const Pe=await fetchWikipediaAlbumSummary(e.artist,J);if(Pe){R({title:Pe.title||J,artist:e.artist,summary:Pe.summary,image:Pe.image});return}R(null)}finally{O(!1)}},je=async()=>{if(!(!e.artist||!e.title)){we(!0),q(null),K(!1);try{const J=e.duration||(h>0?h:0);let Se=`https://lrclib.net/api/get?artist_name=${encodeURIComponent(e.artist)}&track_name=${encodeURIComponent(e.title)}`;J>0&&(Se+=`&duration=${Math.round(J)}`);const Pe=await fetch(Se);if(Pe.ok){const Te=await Pe.json();Te.syncedLyrics?(q(Te.syncedLyrics),K(!0)):Te.plainLyrics?(q(Te.plainLyrics),K(!1)):q(null)}}catch(J){console.error("Failed to fetch lyrics from LRCLIB:",J),q(null)}finally{we(!1)}}};be(),Re(),je()},[e.artist,e.title,e,h]);const He=reactExports.useMemo(()=>!V||!ue?[]:parseLRC(V),[V,ue]),ae=reactExports.useMemo(()=>!ue||He.length===0?-1:He.findIndex((be,Re)=>{const je=He[Re+1];return u>=be.time&&(!je||u<je.time)}),[u,He,ue]);reactExports.useEffect(()=>{v==="lyrics"&&W.current&&W.current.scrollIntoView({behavior:"smooth",block:"center"})},[ae,v]);const G=`In the depths of concrete walls
Where the echoes softly call
Building dreams from brick and stone
Finding strength we've always known

Industrial soundscapes fill the air
Melodies beyond compare`,ee="No artist bio available.",pe=be=>b(be);return jsxRuntimeExports.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",backdropFilter:"blur(8px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:jsxRuntimeExports.jsxs("div",{style:{width:"92%",maxWidth:"980px",height:"85vh",background:"#111",borderRadius:"16px",border:"1px solid #333",color:"#e0e0e0",fontFamily:"'Inter', 'Plus Jakarta Sans', sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"},children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",padding:"16px",display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"center",gap:"24px",flex:"0 0 auto"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("span",{"aria-hidden":!0,style:{display:"inline-flex",alignItems:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M4 9v6h4l5 4V5L8 9H4z",fill:"#bbb"})})}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,value:fe,onChange:be=>{const Re=Number(be.target.value);F(Re),f?.(Re/100)},style:{width:"180px",maxWidth:"45vw",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"0.85rem",color:"#bbb",whiteSpace:"nowrap"},children:[Math.round(fe),"%"]})]}),jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto",display:"flex",alignItems:"center",gap:"16px",justifyContent:"center"},children:[jsxRuntimeExports.jsx("button",{onClick:l,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipBack,{size:22,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{w(!y),i()},style:{background:"#d32f2f",border:"none",borderRadius:"50%",width:"72px",height:"72px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(211,47,47,0.4)"},children:y?jsxRuntimeExports.jsx(Pause,{size:30,color:"#ffffff"}):jsxRuntimeExports.jsx(Play,{size:30,color:"#ffffff"})}),jsxRuntimeExports.jsx("button",{onClick:c,style:{background:"none",border:"1px solid #444",borderRadius:"50%",width:"48px",height:"48px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(SkipForward,{size:22,color:"#e0e0e0"})})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"14px"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>Z(!_e),title:_e?"Hide equalizer":"Show equalizer",style:{background:"none",border:_e?"1px solid #d32f2f":"1px solid #444",color:_e?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:jsxRuntimeExports.jsx(SlidersVertical,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ce(!le),title:le?"Disable Loop":"Enable Loop",style:{background:"none",border:le?"1px solid #d32f2f":"1px solid #444",color:le?"#d32f2f":"#a0a0a0",borderRadius:"12px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsx(Repeat,{size:16})})]}),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",right:16,top:16,display:"flex",gap:"8px"},children:[jsxRuntimeExports.jsx("button",{onClick:s,style:{background:"none",border:"none",cursor:"pointer"},title:"Close",children:jsxRuntimeExports.jsx(X,{size:20,color:"#e0e0e0"})}),jsxRuntimeExports.jsx("button",{onClick:()=>pe("album"),style:{background:"none",border:"none",cursor:"pointer"},title:"Minimize",children:jsxRuntimeExports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M5 12h14",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round"})})})]})]}),_e&&jsxRuntimeExports.jsx("div",{style:{position:"relative",flex:"0 0 auto"},children:jsxRuntimeExports.jsxs("div",{style:{margin:"0 24px 8px",background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.35)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.8rem",fontWeight:600},children:"EQUALIZER"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const be={low:0,mid:0,high:0};ve(be),m?.(be)},style:{background:"none",border:"1px solid #444",color:"#a0a0a0",borderRadius:"10px",padding:"4px 8px",cursor:"pointer"},children:"Reset"})]}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Bass"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:ge.low,onChange:be=>{const Re=Number(be.target.value),je={...ge,low:Re};ve(je),m?.(je)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[ge.low," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Mid"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:ge.mid,onChange:be=>{const Re=Number(be.target.value),je={...ge,mid:Re};ve(je),m?.(je)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[ge.mid," dB"]}),jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:"Treble"}),jsxRuntimeExports.jsx("input",{type:"range",min:-12,max:12,value:ge.high,onChange:be=>{const Re=Number(be.target.value),je={...ge,high:Re};ve(je),m?.(je)},style:{width:"100%",accentColor:"#d32f2f"}}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.7rem"},children:[ge.high," dB"]})]})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"240px 1fr",gap:"24px",padding:"16px",overflow:"hidden",flex:"1 1 auto"},children:[jsxRuntimeExports.jsx("div",{style:{width:"240px",height:"240px",borderRadius:"16px",overflow:"hidden",background:"#222",boxShadow:"0 20px 60px rgba(0,0,0,0.4)"},children:jsxRuntimeExports.jsx("img",{src:e.coverArt||e.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:e.album||"Cover",style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",minHeight:0},children:[jsxRuntimeExports.jsxs("div",{style:{flex:"0 0 auto"},children:[jsxRuntimeExports.jsx("h2",{style:{margin:0,fontSize:"2rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:e.title||e.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"#aaa",cursor:"pointer",fontSize:"1.1rem",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:e.artist}),jsxRuntimeExports.jsx("p",{style:{marginTop:"4px",color:"#888",fontFamily:"'Syne', 'Inter', sans-serif",fontWeight:500,letterSpacing:"-0.02em"},children:e.album||""}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginTop:"8px"},children:[T?.codecLabel&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",color:"#e0e0e0",fontFamily:"JetBrains Mono, Space Mono, monospace"},children:String(T.codecLabel).toUpperCase()}),(T?.bitDepth||T?.sampleRate)&&jsxRuntimeExports.jsxs("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"6px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",padding:"0 10px",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:[jsxRuntimeExports.jsx("span",{style:{color:T?.bitDepth===24?"#c6a700":"#a0a0a0"},children:T?.bitDepth?String(T.bitDepth)+"-bit":""}),jsxRuntimeExports.jsx("span",{style:{color:"#555"},children:"/"}),jsxRuntimeExports.jsx("span",{style:{color:"#d32f2f"},children:T?.sampleRate?String(T.sampleRate)+"kHz":""})]}),T?.bitrateKbps&&jsxRuntimeExports.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 10px",height:"26px",borderRadius:"8px",border:"1px solid #333",background:"rgba(26,26,26,0.6)",fontSize:"0.9rem",fontFamily:"JetBrains Mono, Space Mono, monospace",color:"#e0e0e0"},children:formatBitrate(T.bitrateKbps)})]})]}),jsxRuntimeExports.jsx("div",{style:{flex:"0 0 auto"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[jsxRuntimeExports.jsx("span",{style:{width:"52px",fontSize:"0.875rem",color:"#a0a0a0"},children:d(se??u)}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:Math.max(0,h),step:.1,value:se??u,onChange:be=>{const Re=Number(be.target.value);oe(Re),L||p?.(Re)},onMouseDown:()=>Q(!0),onTouchStart:()=>Q(!0),onMouseUp:()=>{se!==null&&p?.(se),Q(!1),oe(null)},onTouchEnd:()=>{se!==null&&p?.(se),Q(!1),oe(null)},style:{flex:1},disabled:!Number.isFinite(h)||h<=0}),jsxRuntimeExports.jsx("span",{style:{width:"52px",textAlign:"right",fontSize:"0.875rem",color:"#a0a0a0"},children:d(h)})]})}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",minHeight:"320px",overflowY:"auto",padding:"1rem",animation:"fadeIn 0.3s ease-out",flex:"1 1 auto"},children:[v==="bio"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{width:"160px",height:"160px",borderRadius:"50%",overflow:"hidden",marginBottom:"1rem",boxShadow:"0 16px 32px rgba(0,0,0,0.3)"},children:jsxRuntimeExports.jsx("img",{src:k[0]?.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:e.artist,style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,color:"#e0e0e0",marginBottom:"0.75rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:(lastFmService.splitArtists(e.artist||"")||[e.artist]).join("  ")}),jsxRuntimeExports.jsx("div",{style:{color:"#a0a0a0",fontSize:"1rem",lineHeight:1.75,textAlign:"left"},children:I?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):k.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:k.map(be=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{margin:"0 0 0.25rem",color:"#e0e0e0",fontWeight:500},children:be.name}),jsxRuntimeExports.jsx("p",{style:{textAlign:"left",margin:0},children:be.bio||ee})]},be.name))}):jsxRuntimeExports.jsx("p",{style:{textAlign:"left"},children:ee})})]}),v==="cover"&&jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.75rem"},children:jsxRuntimeExports.jsxs("div",{style:{width:"100%",maxWidth:"720px",textAlign:"left"},children:[jsxRuntimeExports.jsx("h3",{style:{fontWeight:500,margin:"0.25rem 0",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:P?.title||String(e.album||"Album").replace(/[\(\[].*?[\)\]]/g,"").trim()}),B?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"0.5rem"}})]}):P?.summary?jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:P.summary}):jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},children:"No album details available."})]})}),v==="lyrics"&&jsxRuntimeExports.jsxs("div",{style:{color:"#a0a0a0",fontSize:"1.125rem",lineHeight:1.75,textAlign:"left",minHeight:"300px",paddingBottom:"3rem"},children:[jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:500,color:"#e0e0e0",marginBottom:"0.25rem",letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:e.title||e.name||"Untitled"}),jsxRuntimeExports.jsx("button",{onClick:a,style:{fontSize:"1rem",color:"#a0a0a0",background:"none",border:"none",cursor:"pointer",fontWeight:500,letterSpacing:"-0.02em",fontFamily:"'Syne', 'Inter', sans-serif"},children:e.artist})]}),ce?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem",marginBottom:"1rem"}}),jsxRuntimeExports.jsx("div",{style:{height:"1.5rem",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"0.25rem"}})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ue&&He.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:He.map((be,Re)=>{const je=Re===ae;return jsxRuntimeExports.jsx("div",{ref:je?W:null,style:{color:je?"#ffffff":"#555555",transition:"all 0.3s",opacity:je?1:.6,fontWeight:je?500:300},children:be.text||""},Re)})}):jsxRuntimeExports.jsx("pre",{style:{whiteSpace:"pre-wrap",textAlign:"left",fontWeight:300},children:V||G})})]})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.75rem",paddingBottom:"0.5rem",flex:"0 0 auto"},children:["bio","cover","lyrics"].map(be=>jsxRuntimeExports.jsx("button",{onClick:()=>pe(be),style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:v===be?"#ffffff":"rgba(255,255,255,0.4)",border:"none",cursor:"pointer",transition:"all 0.3s",transform:v===be?"scale(1.25)":"scale(1)"}},be))})]})]})]})})}function Navigation({activeTab:e,onTabChange:r,activeFilter:i,onFilterChange:s,onSettingsClick:a,isPinkMode:c=!1,notifications:l,onNotificationsViewed:u,onNotificationDismiss:h,pinkTierLabel:d,pinkTierUnlocked:p,pinkUnlockTimestamp:f}){const[m,g]=reactExports.useState(!0),[E,v]=reactExports.useState(!1),{theme:b,toggleTheme:y,colors:w}=useTheme$1(),{pinkTierUnlocked:T}=useWall(),k=l??[],_=reactExports.useMemo(()=>p??T?{id:"pink-tier-alert",title:"Pink Badge Activated",message:d?`You've received the ${d} badge.`:"You've received the Pink badge.",timestamp:f??Date.now(),unread:!1,system:!0}:null,[T,d,p,f]),P=reactExports.useMemo(()=>!_||k.some(q=>q.id===_.id)?k:[_,...k],[k,_]),R=P.filter(V=>V.unread).length,I=()=>{v(V=>{const q=!V;return!V&&q&&R>0&&u?.(),q})},H=V=>{try{return new Date(V).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}catch{return""}},B=[{id:"home",label:"Foundation",icon:House},{id:"radar",label:"Radar",icon:Target},{id:"profile",label:"My Wall",icon:Grid3x3},{id:"feed",label:"Neighborhood",icon:Users},{id:"vault",label:"Vault",icon:Lock}],O=[{id:"all",label:"All"},{id:"payroll",label:"Payroll"},{id:"network",label:"Network"},{id:"recent",label:"Recent"}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:flex fixed left-0 top-0 bottom-0 z-50 flex-col nav-rail",style:{width:"var(--rail-left-width)",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderRight:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"4px 0 20px rgba(0, 0, 0, 0.3)"},children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b",style:{borderColor:w.border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{style:{color:w.text.primary,fontSize:"1.25rem",letterSpacing:"0.08em"},children:"BRICK"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:I,className:`flex items-center justify-center rounded-full transition-all duration-300 relative overflow-hidden group ${R>0?"notification-glow":""}`,style:{width:"36px",height:"36px",border:"1px solid rgba(255,255,255,0.12)",background:R>0?"linear-gradient(135deg, rgba(211,47,47,0.15), rgba(198,166,0,0.1), rgba(84,110,122,0.1))":"linear-gradient(135deg, rgba(30,30,30,0.8), rgba(20,20,20,0.9))",boxShadow:R>0?"0 0 20px rgba(211,47,47,0.3), inset 0 1px 0 rgba(255,255,255,0.1)":"inset 0 1px 0 rgba(255,255,255,0.08), 0 2px 8px rgba(0,0,0,0.3)",backdropFilter:"blur(10px)"},title:"Notifications",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),jsxRuntimeExports.jsx(Bell,{size:16,color:R>0?"#ff6b6b":w.text.primary,strokeWidth:R>0?2.5:2,className:"relative z-10 transition-all duration-300"}),R>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center rounded-full text-[0.55rem] font-bold notification-badge",style:{width:"18px",height:"18px",background:"linear-gradient(135deg, #ff00cc, #ff6b6b)",color:"#ffffff",boxShadow:"0 0 12px rgba(255,0,204,0.6), 0 2px 4px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.2)"},children:R>9?"9+":R})]}),E&&jsxRuntimeExports.jsxs("div",{className:"absolute mt-4 rounded-xl shadow-2xl border notification-popover spring-in fade-in",style:{width:"420px",maxHeight:"280px",right:"-220px",backgroundColor:"rgba(18, 18, 18, 0.96)",backdropFilter:"blur(20px)",borderColor:"rgba(198, 167, 0, 0.15)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(198, 167, 0, 0.08), inset 0 -1px 0 rgba(0, 0, 0, 0.3)",zIndex:60},children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between",style:{borderColor:"rgba(198, 167, 0, 0.1)",background:"linear-gradient(180deg, rgba(198, 167, 0, 0.04), rgba(198, 167, 0, 0.01))"},children:[jsxRuntimeExports.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.25em] font-semibold",style:{color:"rgba(198, 167, 0, 0.8)"},children:"ALERTS"}),jsxRuntimeExports.jsx("button",{onClick:()=>v(!1),className:"rounded-full p-1 hover:bg-white/5 transition-all duration-200","aria-label":"Close notifications",style:{color:"rgba(255,255,255,0.5)"},children:jsxRuntimeExports.jsx(X,{size:14,strokeWidth:2})})]}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"240px"},children:[P.length===0&&jsxRuntimeExports.jsx("div",{className:"px-8 py-10 text-base text-center",style:{color:"rgba(255,255,255,0.72)",lineHeight:"1.5",minHeight:"72px",letterSpacing:"0.02em",display:"flex",alignItems:"center",justifyContent:"center"},children:"You're all caught up."}),P.map((V,q)=>{const ue=!!V.system,K=q===P.length-1;return jsxRuntimeExports.jsxs("div",{className:`px-6 py-3 flex items-center gap-3 notification-item ${K?"":"border-b"}`,style:{borderColor:"rgba(255, 255, 255, 0.03)",background:V.unread?"rgba(198, 167, 0, 0.02)":"transparent"},children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold truncate",style:{color:ue?"rgba(198, 167, 0, 0.95)":"#e0e0e0",letterSpacing:"-0.01em"},children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-[0.72rem] notification-message",style:{color:"rgba(255,255,255,0.55)",lineHeight:"1.25rem"},children:V.message})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[jsxRuntimeExports.jsx("span",{className:"text-[0.6rem]",style:{color:"rgba(255,255,255,0.4)"},children:H(V.timestamp)}),!ue&&jsxRuntimeExports.jsx("button",{onClick:()=>h?.(V.id),className:"p-0.5 rounded hover:bg-white/10 transition-colors","aria-label":"Dismiss notification",style:{color:"rgba(255,255,255,0.4)"},children:jsxRuntimeExports.jsx(X,{size:12,strokeWidth:2})})]})]},V.id)})]})]})]})]})}),e==="home"&&i&&s&&jsxRuntimeExports.jsxs("div",{className:"px-3 py-3 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"FILTERS"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:O.map(V=>{const q=i===V.id;return jsxRuntimeExports.jsx("button",{onClick:()=>{s(V.id),g(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:q?"rgba(211, 47, 47, 0.1)":"transparent"},children:jsxRuntimeExports.jsx("span",{style:{fontSize:"0.82rem",color:q?"#d32f2f":"#a0a0a0",fontWeight:q?600:400},children:V.label})},V.id)})})]}),jsxRuntimeExports.jsxs("nav",{className:"flex-1 px-3 py-3 overflow-y-auto",style:{paddingBottom:"120px"},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-4",style:{color:w.text.tertiary,fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NAVIGATE"}),B.map(V=>{const q=V.icon,ue=e===V.id,ce=V.id==="profile"&&c,we=`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1.5 nav-tab ${ue?"nav-tab-active":""} transition-all duration-200 hover:opacity-80 ${ce?pinkStyles.navPinkButton:""}`,W=`${ce?pinkStyles.navPinkLabel:""}`;return jsxRuntimeExports.jsxs("button",{onClick:()=>{r(V.id),g(!1)},style:{backgroundColor:ce?"transparent":ue?"rgba(211, 47, 47, 0.1)":"transparent"},className:we,"aria-current":ue?"page":void 0,children:[jsxRuntimeExports.jsx(q,{size:18,strokeWidth:2,color:ce?"#ffffff":ue?w.accent:w.text.secondary,className:`nav-icon transition-colors ${ue?"text-accent":""}`}),jsxRuntimeExports.jsx("span",{className:`${W} nav-label ${ue?"nav-label-active":""}`,style:{fontSize:ce?"1rem":"0.82rem",color:ce?"#ffffff":ue?w.accent:w.text.secondary,fontWeight:ce?500:ue?600:400},children:V.label})]},V.id)})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-[#333333] space-y-2",style:{position:"sticky",bottom:"96px",backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)"},children:[jsxRuntimeExports.jsxs("button",{onClick:a,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.05)"},children:[jsxRuntimeExports.jsx(Settings,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Settings"})]}),jsxRuntimeExports.jsx("button",{onClick:y,className:"w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all duration-200 hover:bg-[#252525]",style:{backgroundColor:"rgba(211, 47, 47, 0.1)"},children:b==="dark"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sun,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Light Mode"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Moon,{size:20,strokeWidth:2,color:"#d32f2f"}),jsxRuntimeExports.jsx("span",{style:{fontSize:"0.875rem",color:"#d32f2f",fontWeight:600},children:"Dark Mode"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden fixed bottom-20 right-4 z-40",children:jsxRuntimeExports.jsx("button",{onClick:y,className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:w.bg.secondary,border:`1px solid ${w.border}`},title:b==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:b==="dark"?jsxRuntimeExports.jsx(Sun,{size:20,color:w.accent,strokeWidth:2}):jsxRuntimeExports.jsx(Moon,{size:20,color:w.accent,strokeWidth:2})})}),m&&jsxRuntimeExports.jsx("div",{className:"hidden md:block fixed inset-0 bg-transparent z-40",onClick:()=>g(!1)}),jsxRuntimeExports.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderTop:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto px-6 py-3",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around items-center",children:B.map(V=>{const q=V.icon,ue=e===V.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>r(V.id),className:"flex flex-col items-center gap-1 py-2 px-4 transition-all",children:[jsxRuntimeExports.jsx(q,{size:24,strokeWidth:2,color:ue?"#d32f2f":"#a0a0a0",className:"transition-colors"}),jsxRuntimeExports.jsx("span",{className:"mono transition-colors",style:{fontSize:"0.65rem",color:ue?"#d32f2f":"#a0a0a0"},children:V.label})]},V.id)})})})})]})}function ConnectionAuditModal({isOpen:e,onClose:r,userName:i,userAvatar:s,matchScore:a,mutualArtists:c,diversityScore:l=85,onConnect:u,onConnectSuccess:h}){if(!e)return null;const d=l<30,p=()=>{u(),r(),h()};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:r,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsxs("div",{onClick:f=>f.stopPropagation(),className:"relative w-full max-w-md bg-[#252525] rounded-t-2xl md:rounded-2xl overflow-hidden animate-slide-up",style:{boxShadow:"0 20px 60px rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#333333]",children:[jsxRuntimeExports.jsx("h3",{style:{color:"#e0e0e0"},children:"Connection Audit"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-[#333333] transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:s,alt:i,className:"w-16 h-16 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{style:{color:"#e0e0e0"},children:i}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:["Architect  Diversity: ",l,"/100"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block mb-3",children:[jsxRuntimeExports.jsxs("svg",{width:"120",height:"120",className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#1a1a1a",strokeWidth:"10",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"60",cy:"60",r:"50",stroke:"#546e7a",strokeWidth:"10",fill:"none",strokeDasharray:`${a/100*314} 314`,strokeLinecap:"round"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"2rem"},children:[a,"%"]})})]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"STRUCTURAL INTEGRITY"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3",style:{color:"#a0a0a0",fontSize:"0.75rem"},children:"SHARED TASTE ANALYSIS"}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex -space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}}),jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:"#333333",borderColor:"#546e7a"}})]}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:[c.length," Mutual Artists"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((f,m)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"#252525",color:"#e0e0e0",fontSize:"0.75rem"},children:f},m))})]})]}),d&&jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid #d32f2f"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:20,color:"#d32f2f",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.875rem"},children:jsxRuntimeExports.jsx("strong",{children:"Warning: High Repetition Detected"})}),jsxRuntimeExports.jsx("p",{style:{color:"#d32f2f",fontSize:"0.75rem"},children:"Potential stream farm. Low diversity score indicates repetitive listening."})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:r,className:"flex-1 py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:p,className:"flex-1 py-3 rounded-full transition-all hover:scale-[1.02]",style:{backgroundColor:"#546e7a",color:"#e0e0e0",boxShadow:"0 4px 12px rgba(84, 110, 122, 0.3)"},children:"Send Connection Request"})]})]})]})]})}function ConnectionSuccessModal({isOpen:e,onClose:r,userName:i,userAvatar:s}){if(!e)return null;const a=[{icon:Music,title:"Unlock Playlists",description:"Access their curated collections"},{icon:Shield,title:"Ad-Free Listening",description:"No ads when playing their bricks"},{icon:Zap,title:"Live Updates",description:"See their new bricks in your feed"}];return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:r}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",boxShadow:"0 8px 30px rgba(211, 47, 47, 0.5)"},children:jsxRuntimeExports.jsx(Check,{size:40,color:"#e0e0e0",strokeWidth:3})}),jsxRuntimeExports.jsx("img",{src:s,alt:i,className:"w-16 h-16 rounded-full mx-auto mb-3 border-2",style:{borderColor:"#546e7a"}}),jsxRuntimeExports.jsxs("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:["Connected to ",i]}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"CONNECTION ESTABLISHED"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4 mb-6",children:a.map((c,l)=>{const u=c.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg",style:{backgroundColor:"rgba(37, 37, 37, 0.5)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(84, 110, 122, 0.2)",border:"1px solid #546e7a"},children:jsxRuntimeExports.jsx(u,{size:18,color:"#546e7a"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:c.title}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.75rem"},children:c.description})]})]},l)})}),jsxRuntimeExports.jsx("button",{onClick:r,className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #d32f2f, #b71c1c)",color:"#e0e0e0",boxShadow:"0 4px 20px rgba(211, 47, 47, 0.4)"},children:"Start Exploring"})]})]})}function PatronageLockModal({isOpen:e,onClose:r,artistName:i,daysRemaining:s,onPayEarlyUnlock:a}){if(!e)return null;const c=5;return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:r}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 rounded-2xl spring-in",style:{backgroundColor:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(40px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4",style:{backgroundColor:"rgba(198, 167, 0, 0.2)",border:"2px solid #c6a700"},children:jsxRuntimeExports.jsx(Lock,{size:36,color:"#c6a700"})}),jsxRuntimeExports.jsx("h3",{className:"mb-2",style:{color:"#e0e0e0"},children:"Patronage Slot Locked"}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"You're currently supporting another artist"})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{backgroundColor:"rgba(37, 37, 37, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx(Clock,{size:20,color:"#546e7a"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"mono mb-1",style:{color:"#e0e0e0",fontSize:"0.875rem"},children:"Time Until Unlock"}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#546e7a",fontSize:"1.25rem"},children:[s," Days"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-2",style:{backgroundColor:"#1a1a1a"},children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full",style:{width:`${(30-s)/30*100}%`,background:"linear-gradient(to right, #546e7a, #d32f2f)"}})})]}),jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg mb-6",style:{backgroundColor:"rgba(26, 26, 26, 0.6)",border:"1px solid rgba(255, 255, 255, 0.05)"},children:jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem",lineHeight:"1.6"},children:"Brick encourages long-term support. Your monthly patronage slots unlock every 30 days, ensuring artists receive stable, committed support."})}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl mb-6",style:{background:"linear-gradient(135deg, rgba(198, 167, 0, 0.1), rgba(198, 167, 0, 0.05))",border:"1px solid rgba(198, 167, 0, 0.3)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[jsxRuntimeExports.jsx(DollarSign,{size:20,color:"#c6a700",className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"mb-1",style:{color:"#c6a700"},children:"Early Unlock Available"}),jsxRuntimeExports.jsx("p",{style:{color:"#cccccc",fontSize:"0.875rem"},children:"Switch your patronage immediately for a one-time fee"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#a0a0a0",fontSize:"0.875rem"},children:"Early Unlock Fee"}),jsxRuntimeExports.jsxs("span",{className:"mono",style:{color:"#c6a700",fontSize:"1.25rem"},children:["$",c.toFixed(2)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{a(),r()},className:"w-full py-3 rounded-full transition-all duration-200 hover:scale-[1.02]",style:{background:"linear-gradient(to bottom, #c6a700, #a08700)",color:"#1a1a1a",fontWeight:600,boxShadow:"0 4px 20px rgba(198, 167, 0, 0.4)"},children:["Pay $",c.toFixed(2)," to Switch Now"]}),jsxRuntimeExports.jsxs("button",{onClick:r,className:"w-full py-3 rounded-full transition-all hover:bg-[#2a2a2a]",style:{backgroundColor:"transparent",border:"1px solid #333333",color:"#a0a0a0"},children:["Wait ",s," Days"]})]}),jsxRuntimeExports.jsxs("p",{className:"mono text-center mt-4",style:{color:"#666666",fontSize:"0.65rem"},children:["80% OF FEE GOES TO ",i.toUpperCase()]})]})]})}function DisplaySettings({analyserNode:e,enabled:r,onToggle:i}){const s=async a=>{i(a)};return jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>s(!r),onKeyDown:a=>{(a.key==="Enter"||a.key===" "||a.key==="Spacebar")&&(a.preventDefault(),i(!r))},className:"w-full flex items-center justify-between cursor-pointer","aria-pressed":r,"aria-label":"Toggle Seismic Monitor",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Zap,{size:18,color:r?"#d32f2f":"#a0a0a0",fill:r?"#d32f2f":"none"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"font-medium",children:"Seismic Monitor"}),jsxRuntimeExports.jsx("p",{style:{color:"#666666"},className:"text-xs",children:"Spectrum analyzer below the album art in the right rail."})]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-6 rounded-full flex items-center px-1 transition-colors",style:{backgroundColor:r?"#d32f2f":"#444444"},children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full bg-white transition-transform",style:{transform:r?"translateX(16px)":"translateX(0)"}})})]}),r&&!e&&jsxRuntimeExports.jsx("p",{className:"text-xs mono mt-2",style:{color:"#9a9a9a"},children:"Enabled  waiting for the audio engine's analyser. Play a track to initialize the analyzer and start the visualizer."})]})}const stripExtension=e=>e.replace(/\.[^.]+$/,""),sanitizeSegment=e=>e.replace(/_/g," ").replace(/\s+/g," ").trim(),removeTrackNumberPrefix=e=>e.replace(/^\s*\d{1,3}[\s._-]+/,"").trim(),deriveFromFilename=e=>{const r=stripExtension(e),i=r.split(" - ").map(sanitizeSegment);if(i.length>=3){const s=i[0],a=i[1],c=removeTrackNumberPrefix(i.slice(2).join(" - "));return{artist:s,album:a,title:c}}if(i.length===2){const s=i[0],a=removeTrackNumberPrefix(i[1]);return{artist:s,title:a}}return{title:removeTrackNumberPrefix(r)}};async function repairMetadataInDB(){const i=(await openBrickDB()).transaction(["localTracks"],"readwrite").objectStore("localTracks"),s=await new Promise((l,u)=>{const h=i.getAll();h.onsuccess=()=>l(Array.isArray(h.result)?h.result:[]),h.onerror=()=>u(h.error)});let a=0;for(const l of s){const u=l.file instanceof File?l.file.name:typeof l.name=="string"?l.name:"",h=deriveFromFilename(u),d=typeof l.artist=="string"?l.artist:"",p=typeof l.album=="string"?l.album:"",f=typeof l.name=="string"?l.name:"",m=d===""||d==="Unknown Artist",g=p===""||p==="Unknown Album",E=f===""||/^\d{1,3}[\s._-]/.test(f),v=h.artist??(d!==""?d:void 0),b=h.album??(p!==""?p:void 0),y=h.title??(f!==""?f:void 0),w=typeof l.albumArtist=="string"&&l.albumArtist!==""?l.albumArtist:m?v:d!==""?d:void 0,T={...l,artist:m?v:d!==""?d:void 0,album:g?b:p!==""?p:void 0,name:E?y:f!==""?f:void 0,albumArtist:w};(T.artist!==l.artist||T.album!==l.album||T.name!==l.name||T.albumArtist!==l.albumArtist)&&(await new Promise((k,_)=>{const P=i.put(T);P.onsuccess=()=>k(),P.onerror=()=>_(P.error)}),a+=1)}let c;try{c=(await new Promise((u,h)=>{const d=i.getAll();d.onsuccess=()=>u(Array.isArray(d.result)?d.result:[]),d.onerror=()=>h(d.error)})).map(u=>{const h=typeof u.url=="string"&&u.url!=="",d=u.file instanceof Blob?URL.createObjectURL(u.file):"";return{...u,url:h?u.url:d}}),window.dispatchEvent(new CustomEvent("brick:local-tracks-refreshed",{detail:{count:a,tracks:c}}))}catch{c=void 0}return{updated:a,tracks:c}}function UserSettingsModal({isOpen:e,onClose:r,userName:i="User",userAvatar:s="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=100",analyserNode:a=null,enabled:c=!1,onToggle:l=()=>{}}){const[u,h]=reactExports.useState(()=>{const p=localStorage.getItem("userSettings");return p?JSON.parse(p):{monthlySupport:!1}});reactExports.useEffect(()=>{localStorage.setItem("userSettings",JSON.stringify(u))},[u]);const d=async()=>{try{const f=(await openPlaylistDB$1()).transaction(["playlists"],"readonly"),m=await new Promise(w=>{const T=f.objectStore("playlists").getAll();T.onsuccess=()=>w(T.result)}),g={exportDate:new Date().toISOString(),userPlan:u.plan,monthlySupport:u.monthlySupport,playlistsCount:m.length,playlists:m.map(w=>({name:w.name,artist:w.artist,trackCount:w.tracks.length,structuralIntegrity:w.structuralIntegrity,createdDate:new Date(parseInt(w.id)).toISOString()}))},E=JSON.stringify(g,null,2),v=new Blob([E],{type:"application/json"}),b=URL.createObjectURL(v),y=document.createElement("a");y.href=b,y.download=`brick-listening-data-${Date.now()}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(b)}catch(p){console.error("Failed to export data:",p),alert("Failed to export listening data")}};return e?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-transparent flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-lg p-6 relative",style:{backgroundColor:"#1a1a1a",border:"1px solid #333333",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[jsxRuntimeExports.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-[#2a2a2a] rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{size:20,color:"#a0a0a0"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[jsxRuntimeExports.jsx("img",{src:s,alt:i,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{style:{color:"#e0e0e0"},className:"text-xl font-bold",children:i}),jsxRuntimeExports.jsx("p",{style:{color:"#a0a0a0"},className:"text-sm",children:"Settings"})]})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 p-3 rounded-lg",style:{backgroundColor:"#252525"},children:jsxRuntimeExports.jsxs("button",{onClick:()=>h({...u,monthlySupport:!u.monthlySupport}),className:"w-full flex items-center justify-between cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Heart,{size:18,color:u.monthlySupport?"#d32f2f":"#a0a0a0",fill:u.monthlySupport?"#d32f2f":"none"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0"},className:"font-medium",children:"Monthly Support"}),jsxRuntimeExports.jsxs("p",{style:{color:"#666666"},className:"text-xs",children:["$",u.monthlySupport?"9.99":"0","/month"]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-6 rounded-full flex items-center px-1 transition-colors",style:{backgroundColor:u.monthlySupport?"#d32f2f":"#444444"},children:jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full bg-white transition-transform",style:{transform:u.monthlySupport?"translateX(16px)":"translateX(0)"}})})]})}),jsxRuntimeExports.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg mb-4 transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"#252525",color:"#e0e0e0",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx(Download,{size:18}),"Export Listening Data"]}),jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg",style:{backgroundColor:"#252525",border:"1px solid #333333"},children:jsxRuntimeExports.jsx(DisplaySettings,{analyserNode:a,enabled:c,onToggle:l})}),jsxRuntimeExports.jsxs("button",{onClick:async()=>{try{const p=await repairMetadataInDB();alert(`Repair complete  updated ${p.updated} track${p.updated===1?"":"s"}`)}catch(p){console.error("Repair failed",p),alert("Repair failed  check console for details")}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg mb-4 transition-all hover:scale-105 active:scale-95",style:{backgroundColor:"#252525",color:"#e0e0e0",border:"1px solid #333333"},children:[jsxRuntimeExports.jsx(Zap,{size:18}),"Repair Local Metadata"]}),jsxRuntimeExports.jsx("p",{style:{color:"#666666"},className:"text-xs text-center",children:"Your settings are saved locally. Monthly support is for creators."})]})}):null}const openPlaylistDB$1=()=>openBrickDB(),DB_NAME="BrickAuthDB",DB_VERSION=1,USERS_STORE="users",CURRENT_USER_KEY="currentUser",isStoredUser=e=>{if(e==null||typeof e!="object")return!1;const r=e;return typeof r.id=="string"&&typeof r.email=="string"&&typeof r.password=="string"&&typeof r.name=="string"&&typeof r.avatar=="string"&&typeof r.diversityScore=="number"&&typeof r.connectionsUsed=="number"&&typeof r.connectionsMax=="number"&&typeof r.tier=="string"&&typeof r.createdAt=="number"},openAuthDB=()=>new Promise((e,r)=>{const i=indexedDB.open(DB_NAME,DB_VERSION);i.onerror=()=>r(i.error),i.onsuccess=()=>e(i.result),i.onupgradeneeded=s=>{const a=s.target.result;a.objectStoreNames.contains(USERS_STORE)||a.createObjectStore(USERS_STORE,{keyPath:"id"}).createIndex("email","email",{unique:!0})}}),generateAvatar=e=>{const r=e.split("").reduce((i,s)=>i+s.charCodeAt(0),0)%360;return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r.toString(16).padStart(6,"0")}&color=fff&size=400`},hashPassword=async e=>{const i=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(s)).map(c=>c.toString(16).padStart(2,"0")).join("")},registerUser=async(e,r,i)=>{try{const s=await openAuthDB(),l=s.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email");if(await new Promise(E=>{const v=l.get(e);v.onsuccess=()=>{const b=v.result;E(isStoredUser(b)?b:void 0)},v.onerror=()=>E(void 0)}))throw new Error("User already exists with this email");const h=await hashPassword(r),p={id:`user-${Date.now()}`,email:e,password:h,name:i,avatar:generateAvatar(i),diversityScore:0,connectionsUsed:0,connectionsMax:20,tier:"Foundation",createdAt:Date.now()},m=s.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((E,v)=>{const b=m.add(p);b.onsuccess=()=>E(),b.onerror=()=>v(b.error)});const g={id:p.id,name:p.name,avatar:p.avatar,bio:p.bio,diversityScore:p.diversityScore,connectionsUsed:p.connectionsUsed,connectionsMax:p.connectionsMax,tier:p.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(g)),g}catch(s){throw console.error("Registration error:",s),s}},loginUser=async(e,r)=>{try{const c=(await openAuthDB()).transaction([USERS_STORE],"readonly").objectStore(USERS_STORE).index("email"),l=await new Promise(d=>{const p=c.get(e);p.onsuccess=()=>{const f=p.result;d(isStoredUser(f)?f:void 0)},p.onerror=()=>d(void 0)});if(!l)throw new Error("User not found");const u=await hashPassword(r);if(l.password!==u)throw new Error("Invalid password");const h={id:l.id,name:l.name,avatar:l.avatar,bio:l.bio,diversityScore:l.diversityScore,connectionsUsed:l.connectionsUsed,connectionsMax:l.connectionsMax,tier:l.tier,playlists:[],chosenArtists:[]};return localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(h)),h}catch(i){throw console.error("Login error:",i),i}},getCurrentUser=()=>{try{const e=localStorage.getItem(CURRENT_USER_KEY);return e===null?null:JSON.parse(e)}catch(e){return console.error("Error getting current user:",e),null}},logoutUser=()=>{localStorage.removeItem(CURRENT_USER_KEY)},updateUser=async e=>{try{const r=await openAuthDB(),s=r.transaction([USERS_STORE],"readonly").objectStore(USERS_STORE),a=await new Promise(h=>{const d=s.get(e.id);d.onsuccess=()=>{const p=d.result;h(isStoredUser(p)?p:void 0)},d.onerror=()=>h(void 0)});if(!a)throw new Error("User not found in database");const c={...a,name:e.name,avatar:e.avatar,bio:e.bio,diversityScore:e.diversityScore,connectionsUsed:e.connectionsUsed,connectionsMax:e.connectionsMax,tier:e.tier},u=r.transaction([USERS_STORE],"readwrite").objectStore(USERS_STORE);await new Promise((h,d)=>{const p=u.put(c);p.onsuccess=()=>h(),p.onerror=()=>d(p.error)}),localStorage.setItem(CURRENT_USER_KEY,JSON.stringify(e))}catch(r){throw console.error("Error updating user:",r),r}},auth=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser,loginUser,logoutUser,registerUser,updateUser},Symbol.toStringTag,{value:"Module"}));function App(){const{colors:e}=useTheme$1(),{wallState:r,pinkTierUnlocked:i,pinkUnlockTimestamp:s,themeEnabled:a,setThemeEnabled:c}=useWall(),l=`app-shell brick-shell wall-state-${r.toLowerCase()}`,u=ne=>{if(typeof ne=="string"){if(ne.includes(":"))return ne;const Oe=parseFloat(ne);if(isNaN(Oe))return"0:00";const Qe=Math.floor(Oe/60),Ze=Math.floor(Oe%60);return`${Qe}:${Ze.toString().padStart(2,"0")}`}else{if(isNaN(ne))return"0:00";const Oe=Math.floor(ne/60),Qe=Math.floor(ne%60);return`${Oe}:${Qe.toString().padStart(2,"0")}`}},h=ne=>ne.split(/\s+/).filter(Boolean).map(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1).toLowerCase()).join(" ")||"Foundation",[d,p]=reactExports.useState("login"),[f,m]=reactExports.useState(null);reactExports.useEffect(()=>{document.title="Brick",(async()=>{const{getCurrentUser:Oe}=await __vitePreload(async()=>{const{getCurrentUser:Ze}=await Promise.resolve().then(()=>auth);return{getCurrentUser:Ze}},void 0),Qe=Oe();Qe&&(m(Qe),p("authenticated"))})()},[]);const[g,E]=reactExports.useState("home"),[v,b]=reactExports.useState("all"),[y,w]=reactExports.useState(!1),[T,k]=reactExports.useState(!1),[_,P]=reactExports.useState(null),[R,I]=reactExports.useState(null),[H,B]=reactExports.useState([]),[O,V]=reactExports.useState(null),[q,ue]=reactExports.useState(!1),[K,ce]=reactExports.useState(!1),[we,W]=reactExports.useState(null);reactExports.useEffect(()=>{O&&typeof O.isPlaying=="boolean"&&k(O.isPlaying)},[O?.isPlaying]);const fe=_??R,F=fe?.codec??fe?.quality?.toUpperCase(),L=fe?.bitDepth,Q=fe?.sampleRate,se=fe?.bitrate,oe=!!(fe?.file||fe?.audioUrl&&!String(fe.audioUrl).startsWith("http"));reactExports.useEffect(()=>{if(!i){q&&ue(!1),a&&c(!1);return}a!==q&&ue(a)},[q,i,a,c]);const ge=ne=>{i&&(ue(ne),c(ne))},ve=ne=>{O?.invalidateWallSession?.(ne)};reactExports.useEffect(()=>{let ne=null,Oe=null;return(async()=>{try{const{invoke:Qe}=await __vitePreload(async()=>{const{invoke:nt}=await import("./core-DhEqZVGG.js");return{invoke:nt}},[]),{listen:Ze}=await __vitePreload(async()=>{const{listen:nt}=await import("./event-DAEvp2rt.js");return{listen:nt}},__vite__mapDeps([0,1]));try{const nt=await Qe("get_config_visualizer_state");ce(!!nt)}catch{try{const nt=localStorage.getItem("visualizerEnabled");nt!==null&&ce(JSON.parse(nt))}catch{}}ne=await Ze("visualizer-state-changed",nt=>{const de=nt?.payload;typeof de?.enabled=="boolean"&&ce(de.enabled)})}catch{try{const Qe=localStorage.getItem("visualizerEnabled");Qe!==null&&ce(JSON.parse(Qe))}catch{}Oe=Qe=>{const Ze=Qe?.detail?.enabled;typeof Ze=="boolean"&&ce(Ze)},window.addEventListener("visualizer-state-changed",Oe)}})(),()=>{ne&&ne(),Oe&&window.removeEventListener("visualizer-state-changed",Oe)}},[]),reactExports.useEffect(()=>{try{const ne=window.__brickEngineInstance;ne&&typeof ne.getAnalyserNode=="function"&&W(ne.getAnalyserNode()||null)}catch{}},[]),reactExports.useEffect(()=>{if(O&&typeof O.getAnalyserNode=="function")try{const ne=O.getAnalyserNode();ne&&W(ne)}catch{}},[O]);const[_e,Z]=reactExports.useState(!1),[le,Ce]=reactExports.useState(null),[He,ae]=reactExports.useState(!1),[G,ee]=reactExports.useState(!1),[pe,be]=reactExports.useState(null),[Re,je]=reactExports.useState(!1),[J,Se]=reactExports.useState(!1),[Pe,Te]=reactExports.useState(!1),[$e,gt]=reactExports.useState(!1),[ft,pt]=reactExports.useState(!1),D=ne=>{m(ne),p("authenticated")},j=()=>{(async()=>{const{getCurrentUser:Oe}=await __vitePreload(async()=>{const{getCurrentUser:Ze}=await Promise.resolve().then(()=>auth);return{getCurrentUser:Ze}},void 0),Qe=Oe();Qe&&m(Qe)})(),p("import")},A=ne=>{console.log("Importing from:",ne),p("authenticated")},U=()=>{p("authenticated")},te=async ne=>{ve("playlist-start");try{const Ze=await openPlaylistDB(),de=Ze.transaction(["playlists"],"readonly").objectStore("playlists"),Me=await new Promise(De=>{const We=de.get(ne);We.onsuccess=()=>De(We.result),We.onerror=()=>De(void 0)});if(Me){if(!Me.tracks||Me.tracks.length===0){console.error("Local playlist has no tracks");return}const We=Ze.transaction(["localTracks"],"readonly").objectStore("localTracks"),Ye=await Promise.all(Me.tracks.map(async vt=>{let Tt=vt.audioUrl,Et=vt.file,Dt=vt.bitDepth,Mt=vt.sampleRate,xt=vt.bitrate,Ht=vt.codec??vt.quality?.toUpperCase();if(!Tt||!Tt.startsWith("http"))try{const Ft=await new Promise(jr=>{const wr=We.get(vt.id);wr.onsuccess=()=>jr(wr.result),wr.onerror=()=>jr(null)});Ft&&Ft.file&&(Tt=URL.createObjectURL(Ft.file),Et=Ft.file,Dt=Dt??Ft.bitDepth,Mt=Mt??Ft.sampleRate,xt=xt??Ft.bitrate??Ft.bitrateKbps,Ht=Ht??Ft.codec??Ft.codecLabel,console.log("Recreated blob URL for track:",vt.title))}catch(Ft){console.error("Failed to load local track:",Ft)}return{id:vt.id,title:vt.title,name:vt.title,artist:vt.artist,album:vt.album,coverImage:vt.coverArt,coverArt:vt.coverArt,audioUrl:Tt||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:vt.quality,duration:vt.duration,bitDepth:Dt,sampleRate:Mt,bitrate:xt,codec:Ht,file:Et}}));console.log("Loaded local playlist with tracks:",Ye),B(Ye),I(Ye[0]),console.log("Adding local playlist to recently played:",Me.name),addRecentlyPlayedPlaylist({playlistId:Me.id,playlistName:Me.name,coverImage:Me.coverImage,creatorName:typeof Me.creator=="string"?Me.creator:Me.creator?.name||"Your Collection",trackCount:Me.trackCount,structuralIntegrity:Me.structuralIntegrity}).then(()=>{console.log("Successfully added local playlist to recently played")}).catch(vt=>console.error("Failed to track recently played playlist:",vt));const Je=Ye[0],ut={id:Je.id,title:Je.name,artist:Je.artist,album:Je.album,coverArt:Je.coverImage,audioUrl:Je.audioUrl,quality:Je.quality,duration:"0:00",isPatronage:!1,bitDepth:Je.bitDepth,sampleRate:Je.sampleRate,bitrate:Je.bitrate??Je.bitrateKbps,codec:Je.codec??Je.quality?.toUpperCase(),file:Je.file};P(ut),w(!0),k(!0);return}}catch(Ze){console.error("Error loading playlist from IndexedDB:",Ze)}const Oe=mockPlaylists.find(Ze=>Ze.id===ne);if(!Oe||!Oe.tracks||Oe.tracks.length===0){console.error("Playlist not found or has no tracks");return}console.log("Adding online playlist to recently played:",Oe.name),addRecentlyPlayedPlaylist({playlistId:Oe.id,playlistName:Oe.name,coverImage:Oe.coverImage,creatorName:typeof Oe.creator=="string"?Oe.creator:Oe.creator?.name||"Your Collection",trackCount:Oe.trackCount,structuralIntegrity:Oe.structuralIntegrity}).then(()=>{console.log("Successfully added online playlist to recently played")}).catch(Ze=>console.error("Failed to track recently played playlist:",Ze));const Qe=Oe.tracks.map(Ze=>({id:Ze.id,name:Ze.title,artist:Ze.artist,album:Ze.album,coverImage:Ze.coverArt,audioUrl:Ze.audioUrl||"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",quality:Ze.quality,bitDepth:Ze.bitDepth,sampleRate:Ze.sampleRate,bitrate:Ze.bitrate??Ze.bitrateKbps,codec:Ze.codec??Ze.codecLabel??Ze.quality?.toUpperCase(),file:Ze.file}));B(Qe),I(Qe[0]),P(Qe[0]),w(!0),k(!0)},he=ne=>{ve("local-track"),console.log("Playing local track:",ne),addRecentlyPlayedTrack({trackId:ne.id,trackTitle:ne.name,artistName:ne.artist||"Unknown Artist",coverArt:ne.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ne.url,playedAt:Date.now(),album:ne.album,quality:ne.format,codec:ne.codec??ne.codecLabel??ne.format,bitDepth:ne.bitDepth,sampleRate:ne.sampleRate,bitrate:ne.bitrate??ne.bitrateKbps,durationSeconds:typeof ne.duration=="number"?ne.duration:void 0}).catch(Ze=>console.error("Failed to track recently played track:",Ze));const Oe={id:ne.id,title:ne.name,name:ne.name,artist:ne.artist||"Unknown Artist",album:ne.album||"Unknown Album",coverImage:ne.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:ne.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ne.url,quality:ne.format,duration:ne.duration,bitDepth:ne.bitDepth,sampleRate:ne.sampleRate,bitrate:ne.bitrate??ne.bitrateKbps,codec:ne.codec??ne.codecLabel??ne.format,file:ne.file},Qe={id:ne.id,title:ne.name,name:ne.name,artist:ne.artist||"Unknown Artist",album:ne.album||"Unknown Album",coverArt:ne.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:ne.url,quality:ne.format,duration:u(ne.duration),isPatronage:!1,bitDepth:ne.bitDepth,sampleRate:ne.sampleRate,bitrate:ne.bitrate??ne.bitrateKbps,codec:ne.codec??ne.codecLabel??ne.format,file:ne.file};B([Oe]),I(Oe),P(Qe),w(!0),k(!0)},ke=ne=>{ve("local-album"),console.log("Playing local album with",ne.length,"tracks");const Oe=ne.map(nt=>({id:nt.id,title:nt.name,name:nt.name,artist:nt.artist||"Unknown Artist",album:nt.album||"Unknown Album",coverImage:nt.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",coverArt:nt.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:nt.url,quality:nt.format,duration:nt.duration,bitDepth:nt.bitDepth,sampleRate:nt.sampleRate,bitrate:nt.bitrate??nt.bitrateKbps,codec:nt.codec??nt.codecLabel??nt.format,file:nt.file})),Qe=ne[0],Ze={id:Qe.id,title:Qe.name,name:Qe.name,artist:Qe.artist||"Unknown Artist",album:Qe.album||"Unknown Album",coverArt:Qe.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",audioUrl:Qe.url,quality:Qe.format,duration:Qe.duration.toString(),isPatronage:!1,bitDepth:Qe.bitDepth,sampleRate:Qe.sampleRate,bitrate:Qe.bitrate??Qe.bitrateKbps,codec:Qe.codec??Qe.codecLabel??Qe.format,file:Qe.file};B(Oe),I(Oe[0]),P(Ze),w(!0),k(!0)},ct=ne=>{I(ne);const Oe={id:ne.id,title:ne.name,artist:ne.artist,album:ne.album||"Unknown Album",coverArt:ne.coverImage,audioUrl:ne.audioUrl,quality:ne.quality||"MP3",duration:ne.duration||"3:45",isPatronage:ne.isPatronage||!1,bitDepth:ne.bitDepth,sampleRate:ne.sampleRate,bitrate:ne.bitrate??ne.bitrateKbps,codec:ne.codec??ne.codecLabel??ne.quality?.toUpperCase(),file:ne.file};P(Oe),console.log("Track changed to:",Oe.title)},bt=ne=>{Ce(ne),Z(!0)},ht=()=>{const ne=mockArtists.find(Oe=>Oe.name===_?.artist);ne&&(w(!1),Ce(ne.id),Z(!0))},yt=ne=>{be(ne),ee(!0)},mt=()=>{console.log("Connection request sent"),ee(!1),je(!0)},Y=async(ne,Oe)=>{console.log("Playlist published:",ne,Oe);const Qe=sessionStorage.getItem("playlistCustomCover");sessionStorage.removeItem("playlistCustomCover");const Ze={id:Date.now().toString(),name:ne,coverImage:Qe||Oe[0]?.coverArt||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",customCoverImage:Qe||void 0,trackCount:Oe.length,creator:f?.id||"user-1",likes:0,isLocked:!1,structuralIntegrity:Math.round(ye(Oe)),tracks:Oe};try{const Me=(await openPlaylistDB()).transaction(["playlists"],"readwrite").objectStore("playlists");await new Promise((De,We)=>{const Ye=Me.add(Ze);Ye.onsuccess=()=>De(),Ye.onerror=()=>We(Ye.error)}),console.log("Playlist saved successfully to IndexedDB")}catch(nt){console.error("Failed to save playlist:",nt),alert("Failed to save playlist. Please try again.");return}ae(!1),E("profile"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("switchToLocalWall"))},100)},ye=ne=>{if(ne.length===0)return 0;if(ne.length===1)return 100;const Oe={rock:["rock","alternative rock","indie rock","hard rock","punk rock","grunge","alt-rock","alternative","punk","garage rock","psychedelic rock"],metal:["metal","heavy metal","thrash metal","death metal","black metal","metalcore","doom metal","progressive metal","nu metal"],indie_adjacent:["indie","indie rock","alternative rock","shoegaze","post-rock","dream pop"],electronic:["electronic","house","techno","ambient","idm","downtempo","drum and bass","dance","edm","trance","dubstep"],hip_hop:["hip hop","rap","trap","drill","grime","hip-hop","r&b","rnb"],pop:["pop","synth pop","indie pop","electropop","k-pop","j-pop"],jazz:["jazz","bebop","smooth jazz","jazz fusion","free jazz","blues"],classical:["classical","orchestral","chamber music","baroque","romantic","contemporary classical"],folk:["folk","indie folk","americana","bluegrass","singer-songwriter","acoustic"],country:["country","alt-country","outlaw country","bluegrass","nashville"]},Qe=Et=>{if(!Et)return"unknown";const Dt=Et.toLowerCase().trim();for(const[Mt,xt]of Object.entries(Oe))for(const Ht of xt)if(Dt.includes(Ht)||Ht.includes(Dt))return Ht;return Dt},Ze=ne.map(Et=>Qe(Et.genre)),nt=Ze.filter(Et=>Et==="unknown").length;if(nt===ne.length)return 50;const de=nt/ne.length*20,Me=Ze.map(Et=>{const Dt=[];return Object.entries(Oe).forEach(([Mt,xt])=>{xt.includes(Et)&&Dt.push(Mt)}),{genre:Et,groups:Dt}}),De=Ze.filter(Et=>Et!=="unknown"),We=new Set(De);if(We.size===1&&nt===0)return 100;if(We.size===1&&nt>0)return Math.max(50,100-de);let Ye=0,Je=0;const ut={indie:{indie:100,"indie rock":95,"alternative rock":85,shoegaze:75,"dream pop":70,"post-rock":65,"alt-rock":90,alternative:85,"indie pop":90,punk:60,"psychedelic rock":60,rap:10,"hip hop":10,trap:5,metal:15,"heavy metal":10,country:20},shoegaze:{shoegaze:100,indie:75,"indie rock":80,"dream pop":85,"post-rock":80,ambient:75,"alternative rock":70,ethereal:90,"noise rock":70,rap:5,"hip hop":5,country:10,metal:10},"post-rock":{"post-rock":100,indie:65,shoegaze:80,ambient:80,"alternative rock":75,"dream pop":75,"progressive rock":80,"art rock":85,rap:10,"hip hop":10,metal:20,pop:15},rock:{rock:100,"alternative rock":90,"indie rock":85,"hard rock":85,punk:80,"garage rock":85,"psychedelic rock":85,"art rock":80,"progressive rock":80,rap:20,"hip hop":15,country:30},metal:{metal:100,"heavy metal":95,"thrash metal":90,"death metal":90,"black metal":90,metalcore:90,"doom metal":95,"progressive metal":85,"nu metal":85,rock:50,punk:40,rap:15,"hip hop":10},electronic:{electronic:100,house:95,techno:95,ambient:85,idm:85,downtempo:80,edm:90,trance:90,dubstep:80,"synth pop":75,dance:90,pop:60,indie:50,rap:40},"hip hop":{"hip hop":100,rap:95,trap:90,drill:85,grime:85,"r&b":85,rnb:85,pop:50,indie:15,rock:20,country:10},pop:{pop:100,"synth pop":95,"indie pop":90,electropop:90,"k-pop":85,electronic:70,"hip hop":40,indie:60,rock:40}};for(let Et=0;Et<Me.length;Et++)for(let Dt=Et+1;Dt<Me.length;Dt++){if(Ze[Et]==="unknown"||Ze[Dt]==="unknown")continue;Je++;const Mt=Ze[Et],xt=Ze[Dt];let Ht=50;ut[Mt]&&ut[Mt][xt]!==void 0?Ht=ut[Mt][xt]:ut[xt]&&ut[xt][Mt]!==void 0?Ht=ut[xt][Mt]:Mt===xt&&(Ht=100),Ye+=Ht}if(Je===0)return 50;let Tt=Ye/Je-de;return Math.max(0,Math.round(Tt))},Ne=ne=>{b(ne)},Be=mockArtists.find(ne=>ne.id===le),Ge=mockConnections$1.find(ne=>ne.user.id===pe),Ue=f?.name||"Guest",Xe=(f?.tier||"Foundation").trim(),qe=h(Xe),M=`Pink ${qe}`,z=q?M:qe.toUpperCase(),Ie={home:"HOME GRID",radar:"RADAR SCAN",profile:"PERSONAL WALL",vault:"VAULT",feed:"NEIGHBORHOOD"}[g],Ke=g,St=[{label:"OPERATOR",value:Ue},{label:"TIER",value:z,isPink:q},{label:"CURRENT PAGE",value:Ie},{label:"SYSTEM",value:"NO ALERT"}],tt=(ne,Oe)=>{console.log("Playing track from radar:",ne.title),ve("radar-play"),B(Oe),I(ne),P(ne),w(!0),k(!0)};return d==="login"?jsxRuntimeExports.jsx(LoginScreen,{onLogin:D,onSignup:j}):d==="import"?jsxRuntimeExports.jsx(ImportScreen,{onImport:A,onSkip:U}):jsxRuntimeExports.jsxs("div",{className:l,style:{backgroundColor:e.bg.primary},children:[jsxRuntimeExports.jsx(WallOverlay,{enabled:q}),jsxRuntimeExports.jsx(WallDebugPanel,{isPinkEnabled:q,onPinkOverride:ge}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-x-hidden pb-32 app-main-rails",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto responsive-main-shell",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 mb-4 px-3",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center justify-center rounded-[4px] border px-6 py-2 command-bar",style:{background:"linear-gradient(135deg, rgba(18,18,18,0.92), rgba(28,18,18,0.85))",borderColor:"rgba(211,47,47,0.25)",backdropFilter:"blur(18px)",boxShadow:"0 8px 24px rgba(0,0,0,0.45), 0 0 30px rgba(161,24,24,0.35)",width:"calc(100% + 40px)",marginLeft:"-20px",marginRight:"-20px"},children:St.map((ne,Oe)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center uppercase command-bar-item",children:[jsxRuntimeExports.jsxs("span",{className:"mono command-bar-label",children:[ne.label,":"]}),jsxRuntimeExports.jsx("span",{className:`mono command-bar-value ${ne.isPink?pinkStyles.pinkBadgeText:""}`,children:ne.value}),Oe<St.length-1&&jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#444444",letterSpacing:"0"},children:""})]},`${ne.label}-${Oe}`))})}),g==="home"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HomeScreenV2,{onPlaylistClick:te,onArtistPress:bt,onFeedClick:()=>E("feed"),activeFilter:v,onFilterChange:Ne,onLocalTrackPlay:he,onLocalAlbumPlay:ke},"home-screen-stable"),He&&jsxRuntimeExports.jsx("div",{style:{width:"100%"},children:jsxRuntimeExports.jsx(PlaylistCreationScreen,{onClose:()=>ae(!1),onPublish:Y,inline:!0})})]}),g==="radar"&&jsxRuntimeExports.jsx(RadarScreen,{onUserClick:yt,onTrackClick:tt}),g==="profile"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ProfileScreen,{onPlaylistClick:te,onCreatePlaylist:()=>ae(!0),currentUser:f,isPinkMode:q,onPinkToggle:ge,pinkTierUnlocked:i})}),g==="vault"&&jsxRuntimeExports.jsx(VaultScreen,{onOpenConnectionManagement:()=>Te(!0),onSignOut:()=>{try{logoutUser()}catch{}m(null),p("login"),E("home"),w(!1),k(!1),B([]),I(null),P(null),V(null)}}),g==="feed"&&jsxRuntimeExports.jsx(FeedScreen,{currentUser:f})]})}),(R||!R)&&jsxRuntimeExports.jsx("div",{className:"hidden md:flex md:flex-col border-l overflow-hidden fixed right-0 top-0 bottom-0 z-30 now-playing-rail player-ui",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.05)",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.3)"},children:jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 flex flex-col items-center",style:{width:"100%",maxWidth:"min(320px, 100%)",minWidth:0},children:[jsxRuntimeExports.jsx("p",{className:"mono mb-3 px-2 text-center",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.05em"},children:"NOW PLAYING"}),R?jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg overflow-hidden mx-auto cursor-pointer transition-all duration-200 hover:scale-105",style:{width:"180px",height:"180px",maxWidth:"180px",minWidth:"180px",boxShadow:"0 4px 16px rgba(211, 47, 47, 0.15)"},onClick:()=>w(!0),children:jsxRuntimeExports.jsx(ImageWithFallback,{src:R.coverImage||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300",alt:R.name,className:"w-full h-full object-cover"})}):jsxRuntimeExports.jsx("div",{className:"mb-4 rounded-lg mx-auto flex items-center justify-center",style:{width:"180px",height:"180px",border:"1px dashed rgba(255,255,255,0.1)",backgroundColor:"rgba(26,26,26,0.6)"},children:jsxRuntimeExports.jsx("span",{className:"mono",style:{color:"#b0b0b0",fontSize:"0.8rem"},children:"No track playing"})}),R&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center px-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[F&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem",minWidth:"72px"},children:String(F).toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded flex items-center gap-1",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[oe?jsxRuntimeExports.jsx(HardDrive,{size:12,color:"#e0e0e0"}):jsxRuntimeExports.jsx(Cloud,{size:12,color:"#e0e0e0"}),oe?"Local":"Cloud"]}),(L||Q)&&jsxRuntimeExports.jsxs("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:[L?`${L}-bit`:"",L&&Q?" / ":"",Q?`${Q} Hz`:""]}),se&&jsxRuntimeExports.jsx("span",{className:"mono px-2 py-0.5 rounded",style:{border:"1px solid #333333",background:"rgba(26,26,26,0.6)",color:"#e0e0e0",fontSize:"0.7rem"},children:`${Math.round(se).toLocaleString()} kbps`})]}),jsxRuntimeExports.jsx("p",{style:{color:"#e0e0e0",fontFamily:'"Chakra Petch", "Syne", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"text-sm font-bold mb-2 truncate w-full min-w-0 cursor-pointer hover:text-[#d32f2f] transition-colors",onClick:()=>w(!0),title:R.name,children:R.name}),jsxRuntimeExports.jsx("p",{style:{color:"#888888",fontFamily:'"Chakra Petch", "Syne", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},className:"text-xs truncate w-full min-w-0 mb-3",title:R.artist,children:R.artist}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full rounded-full h-1 mb-2 cursor-pointer",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:jsxRuntimeExports.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${O?.duration?O.currentTime/O.duration*100:0}%`,background:"linear-gradient(to right, #d32f2f, #b71c1c)",boxShadow:"0 0 10px rgba(211, 47, 47, 0.5)"}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mono",style:{color:"#a0a0a0",fontSize:"0.7rem"},children:[jsxRuntimeExports.jsx("span",{children:O?.formatTime?O.formatTime(O.currentTime):"0:00"}),jsxRuntimeExports.jsx("span",{children:O?.formatTime?O.formatTime(O.duration):"0:00"})]})]})]}),K&&jsxRuntimeExports.jsxs("div",{className:"w-full",style:{maxWidth:"min(320px, 100%)",marginTop:"6px"},children:[jsxRuntimeExports.jsx("div",{className:"px-3 mb-2 text-center",children:jsxRuntimeExports.jsx("p",{className:"mono text-xs",style:{color:"#a0a0a0",margin:0,textTransform:"uppercase",letterSpacing:"0.12em"},children:"Seismic Analyzer"})}),jsxRuntimeExports.jsx("div",{className:"w-full aspect-square overflow-hidden rounded",style:{backgroundColor:"transparent",position:"relative",border:"none",maxWidth:"min(320px, 100%)"},children:jsxRuntimeExports.jsx(SeismicMonitor,{analyser:we,enabled:K})})]}),!K&&H.length>1&&jsxRuntimeExports.jsxs("div",{className:"mt-4 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"px-4 mb-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, transparent, rgba(211, 47, 47, 0.3), transparent)"}}),jsxRuntimeExports.jsx("p",{className:"mono",style:{color:"#d32f2f",fontSize:"0.6rem",letterSpacing:"0.15em",fontWeight:700,textTransform:"uppercase",textShadow:"0 0 10px rgba(211, 47, 47, 0.3)"},children:"Up Next"}),jsxRuntimeExports.jsx("div",{style:{flex:1,height:"1px",background:"linear-gradient(to right, rgba(211, 47, 47, 0.3), transparent)"}})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 flex flex-col gap-0 overflow-hidden",style:{width:"100%",maxWidth:"min(320px, 100%)"},children:[(()=>{const ne=H.findIndex(Qe=>Qe.id===R?.id),Oe=H.slice(ne+1,ne+4);return Oe.map((Qe,Ze)=>jsxRuntimeExports.jsxs("div",{className:"w-full min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"py-2.5 px-2 transition-all duration-300 cursor-pointer group w-full min-w-0 rounded",style:{backgroundColor:"transparent",border:"1px solid transparent"},onMouseEnter:nt=>{nt.currentTarget.style.backgroundColor="rgba(211, 47, 47, 0.05)",nt.currentTarget.style.borderColor="rgba(211, 47, 47, 0.2)"},onMouseLeave:nt=>{nt.currentTarget.style.backgroundColor="transparent",nt.currentTarget.style.borderColor="transparent"},onClick:()=>{const nt=H.findIndex(de=>de.id===Qe.id);if(nt!==-1){const de=H[nt];ve("queue-jump"),I(de),P({id:de.id,title:de.title||de.name||"Untitled",name:de.name||de.title,artist:de.artist,album:de.album||"Unknown Album",coverArt:de.coverArt||de.coverImage,audioUrl:de.audioUrl,quality:de.quality||"MP3",duration:"0:00",isPatronage:!1})}},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full min-w-0 max-w-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-7 h-7 flex items-center justify-center mono",style:{backgroundColor:"rgba(211, 47, 47, 0.08)",border:"1px solid rgba(211, 47, 47, 0.2)",color:"#d32f2f",fontSize:"0.7rem",fontWeight:700,letterSpacing:"0.05em",clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)",textShadow:"0 0 8px rgba(211, 47, 47, 0.2)"},children:String(ne+Ze+2).padStart(2,"0")}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsx("p",{style:{color:"#e8e8e8",fontSize:"0.825rem",fontWeight:600,letterSpacing:"0.02em",lineHeight:"1.2"},className:"truncate w-full min-w-0 group-hover:text-[#d32f2f] transition-colors",title:Qe.name,children:Qe.name}),jsxRuntimeExports.jsx("p",{style:{color:"#7a7a7a",fontSize:"0.7rem",fontWeight:500,letterSpacing:"0.03em",lineHeight:"1.3",marginTop:"2px"},className:"truncate w-full min-w-0",title:Qe.artist,children:Qe.artist})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:jsxRuntimeExports.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#d32f2f",strokeWidth:"2",children:jsxRuntimeExports.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"#d32f2f"})})})]})}),Ze<Oe.length-1&&jsxRuntimeExports.jsx("div",{className:"mx-10 my-1.5",style:{height:"1px",background:"linear-gradient(to right, transparent, rgba(255, 255, 255, 0.06), transparent)"}})]},`${Qe.id}-${Ze}`))})(),(()=>{const ne=H.findIndex(Qe=>Qe.id===R?.id),Oe=H.length-ne-4;return Oe>0&&jsxRuntimeExports.jsx("div",{className:"py-3 w-full mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}}),jsxRuntimeExports.jsxs("p",{className:"mono",style:{color:"#666666",fontSize:"0.65rem",letterSpacing:"0.08em",fontWeight:600},children:["+",Oe," more"]}),jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"1px",backgroundColor:"rgba(211, 47, 47, 0.2)"}})]})})})()]})]})]})}),jsxRuntimeExports.jsx(Navigation,{activeTab:Ke,onTabChange:ne=>E(ne),activeFilter:g==="home"?v:void 0,onFilterChange:g==="home"?Ne:void 0,onSettingsClick:()=>gt(!0),isPinkMode:q,pinkTierLabel:M,pinkTierUnlocked:i,pinkUnlockTimestamp:s}),y&&O&&_&&(()=>{const ne={track:_,connectionName:"Jordan Rivera",isPlaying:O.isPlaying,onPlayPause:O.togglePlayPause,onNext:O.handleNext,onPrevious:O.handlePrevious,currentTime:O.currentTime,duration:O.duration,formatTime:O.formatTime,onSeek:O.seek};return jsxRuntimeExports.jsx(PlayerApple,{...ne,volumeLevel:O.volume,onVolumeChange:O.setVolume,eqBands:O.eqBands?{low:O.eqBands.bass,mid:O.eqBands.mid,high:O.eqBands.treble}:void 0,onEqChange:O.setEqBands?Oe=>O.setEqBands({bass:Oe.low,mid:Oe.mid,treble:Oe.high}):void 0,onClose:()=>w(!1),isPatronageUnlock:!1,onArtistClick:ht})})(),_e&&Be&&jsxRuntimeExports.jsx(ArtistProfileScreenV2,{artist:Be,onClose:()=>Z(!1),onShowPatronageLock:()=>Se(!0)}),G&&Ge&&jsxRuntimeExports.jsx(ConnectionAuditModal,{isOpen:G,onClose:()=>ee(!1),userName:Ge.user.name,userAvatar:Ge.user.avatar,matchScore:Ge.matchScore,mutualArtists:Ge.mutualArtists,onConnect:mt,onConnectSuccess:()=>je(!0)}),Re&&Ge&&jsxRuntimeExports.jsx(ConnectionSuccessModal,{isOpen:Re,onClose:()=>je(!1),userName:Ge.user.name,userAvatar:Ge.user.avatar}),J&&Be&&jsxRuntimeExports.jsx(PatronageLockModal,{isOpen:J,onClose:()=>Se(!1),artistName:Be.name,daysRemaining:18,onPayEarlyUnlock:()=>{console.log("Early unlock paid"),Se(!1)}}),Pe&&jsxRuntimeExports.jsx(ConnectionManagementScreen,{isOpen:Pe,onClose:()=>Te(!1)}),jsxRuntimeExports.jsx(UserSettingsModal,{isOpen:$e,onClose:()=>gt(!1),userName:f?.name||"Guest",userAvatar:f?.avatar||"",analyserNode:we,enabled:K,onToggle:ne=>{ce(ne),(async()=>{try{const Oe=await __vitePreload(()=>import("./core-DhEqZVGG.js"),[]);Oe?.invoke&&await Oe.invoke("set_visualizer_enabled",{is_enabled:ne})}catch{try{localStorage.setItem("visualizerEnabled",JSON.stringify(ne))}catch{}}finally{try{window.dispatchEvent(new CustomEvent("visualizer-state-changed",{detail:{enabled:ne}}))}catch{}}})()}}),jsxRuntimeExports.jsx(MusicPlayer,{currentTrack:R,playlist:H,onTrackChange:ct,onPlayPause:k,isVisible:!0,onControlsReady:V,sidebarCollapsed:ft,externalIsPlaying:T,onCreatePlaylist:()=>ae(!0),onExpandPlayer:()=>{!_&&R&&P({id:R.id,title:R.title||R.name||"Untitled",name:R.name||R.title,artist:R.artist,album:R.album||"Unknown Album",coverArt:R.coverArt||R.coverImage,audioUrl:R.audioUrl,quality:R.quality||"MP3",duration:"0:00",isPatronage:!1}),w(!0)}})]})}const openPlaylistDB=()=>openBrickDB(),startDeepLinkListener=async()=>{try{const{listen:e}=await __vitePreload(async()=>{const{listen:r}=await import("./event-DAEvp2rt.js");return{listen:r}},__vite__mapDeps([0,1]));await e("tauri://deep-link",r=>{const i=r?.payload;if(typeof i=="string")try{const s=new URL(i);if(s.protocol!=="brick:")return;const a=s.searchParams.get("code"),c=s.searchParams.get("state");if(a===null||a==="")return;window.postMessage({provider:c??void 0,code:a},"*")}catch{}})}catch{}};startDeepLinkListener();clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(WallProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
